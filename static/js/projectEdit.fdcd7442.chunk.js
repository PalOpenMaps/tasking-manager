/*! For license information please see projectEdit.fdcd7442.chunk.js.LICENSE.txt */
(this["webpackJsonpTaskingManager-frontend"]=this["webpackJsonpTaskingManager-frontend"]||[]).push([[813],{1914:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return c}));var n=r(30),a=r(13),s=r(62),i=r(0);const o=e=>{let{type:t="info",compact:r=!1,inline:n=!1,iconClassName:s,children:o}=e;const c={info:a.I,success:a.g,warning:a.a,error:a.c}[t];return Object(i.jsxs)("div",{className:"".concat(n?"di":"db"," blue-dark bl bw2 br2 ").concat(r?"pa2":"pa3"," ").concat({info:"b--blue bg-lightest-blue",success:"b--dark-green bg-washed-green",warning:"b--gold bg-washed-yellow",error:"b--dark-red bg-washed-red"}[t]),children:[Object(i.jsx)(c,{className:"h1 w1 v-top mr2 ".concat({info:"blue",success:"dark-green",warning:"gold",error:"dark-red"}[t]," ").concat(s||"")}),o]})};function c(e){let{entity:t,action:r="creation"}=e;const a="updation"===r?"entityInfoUpdationFailure":"entityCreationFailure";return Object(i.jsx)(o,{type:"error",children:Object(i.jsx)(n.a,{...s.a[a],values:{entity:t}})})}},1918:function(e,t,r){"use strict";var n=r(20);t.a=Object(n.b)({privacy:{id:"projects.formInputs.privacy.title",defaultMessage:"Privacy"},privateProject:{id:"projects.formInputs.privacy.field",defaultMessage:"Private project"},privacyDescription:{id:"projects.formInputs.privacy.description",defaultMessage:"Private means that only the users that are project team members can access, map or validate this project. This option overrides the mapping and validation permissions."},teams:{id:"projects.formInputs.teams.title",defaultMessage:"Teams"},teamsPermissionNote:{id:"projects.teams.teamsPermissionNote",defaultMessage:"Note: Mappers have mapping permissions. Validators have mapping and validation permissions. Project managers have mapping and validation permissions as well as the access to the management sections."},organisation:{id:"projects.formInputs.organisation.title",defaultMessage:"Organization"},campaign:{id:"projects.formInputs.campaign.title",defaultMessage:"Campaign"},categories:{id:"projects.formInputs.categories.title",defaultMessage:"Categories"},organisationDescription:{id:"projects.formInputs.organisation.description",defaultMessage:"Organization that is coordinating the project, if there is any. The managers of that organization will have administration rights over the project."},admins:{id:"projects.formInputs.admins.title",defaultMessage:"TM Admins"},selectImagery:{id:"projects.formInputs.imagery.select",defaultMessage:"Select imagery"},selectLicense:{id:"projects.formInputs.license.select",defaultMessage:"Select license"},selectOrganisation:{id:"projects.formInputs.organisation.select",defaultMessage:"Select organization"},selectCampaign:{id:"projects.formInputs.campaign.select",defaultMessage:"Select campaigns"},permissions_ANY:{id:"projects.formInputs.permissions.any",defaultMessage:"Any user"},permissions_LEVEL:{id:"projects.formInputs.permissions.level",defaultMessage:"Only users with intermediate or advanced level"},permissions_TEAMS:{id:"projects.formInputs.permissions.teams",defaultMessage:"Only team members"},permissions_TEAMS_LEVEL:{id:"projects.formInputs.permissions.teamsAndLevel",defaultMessage:"Only intermediate and advanced team members"},mappingPermissionDescription:{id:"projects.formInputs.permissions.mapping.description",defaultMessage:"Define which users can map this project."},validationPermissionDescription:{id:"projects.formInputs.permissions.validation.description",defaultMessage:"Define which users can validate this project."},mappingPermission:{id:"projects.formInputs.permissions.mapping.title",defaultMessage:"Mapping permissions"},validationPermission:{id:"projects.formInputs.permissions.validation.title",defaultMessage:"Validation permissions"},mappingValidationSection:{id:"projects.sections.mapping_validation.title",defaultMessage:"Mapping, validation and invalidation"},mappingValidationSectionDescription:{id:"projects.sections.mapping_validation.description",defaultMessage:"Use this if for some reason you need to map, validate or invalidate all tasks in this project in a single step."},messageContributors:{id:"projects.actions.message_contributors.title",defaultMessage:"Message all contributors"},messageContributorsDescription:{id:"projects.actions.message_contributors.description",defaultMessage:"This will send a message to every contributor of the current project. Please use this feature carefully."},messageContributorsTranslationAlert:{id:"projects.actions.message_contributors.translation_alert",defaultMessage:"This message will not be translated to the different languages of the users, so you may want to include your own translations."},messageContributorsSuccess:{id:"projects.actions.message_contributors.success",defaultMessage:"Contributors were messaged successfully."},messageContributorsError:{id:"projects.actions.message_contributors.error",defaultMessage:"Failed to message all contributors for an unknown reason."},mapAll:{id:"projects.actions.map_all_tasks.title",defaultMessage:"Map all tasks"},mapAllConfirmation:{id:"projects.actions.map_all_tasks.confirmation",defaultMessage:"Are you sure you want to mark all tasks in this project as mapped? You cannot undo this."},mapAllDescription:{id:"projects.actions.map_all_tasks.description",defaultMessage:"This will mark all tasks (except 'unavailable' ones) as mapped. Please use this only if you are sure of what you are doing."},mapAllSuccess:{id:"projects.actions.map_all_tasks.success",defaultMessage:"The tasks were mapped successfully."},mapAllError:{id:"projects.actions.map_all_tasks.error",defaultMessage:"Mapping all the tasks failed for an unknown reason."},invalidateAll:{id:"projects.actions.invalidate_all_tasks.title",defaultMessage:"Invalidate all validated tasks"},invalidateAllConfirmation:{id:"projects.actions.invalidate_all_tasks.confirmation",defaultMessage:"Are you sure you want to invalidate all validated tasks in this project? You cannot undo this."},invalidateAllDescription:{id:"projects.actions.invalidate_all_tasks.description",defaultMessage:"This will mark all validated tasks as 'more mapping needed'. Please use this only if you are sure of what you are doing."},invalidateAllSuccess:{id:"projects.actions.invalidate_all_tasks.success",defaultMessage:"The tasks were set as 'more mapping needed' successfully."},invalidateAllError:{id:"projects.actions.invalidate_all_tasks.error",defaultMessage:"Invalidating all the tasks failed for an unknown reason."},validateAllTasks:{id:"projects.actions.validate_all_tasks.title",defaultMessage:"Validate all mapped tasks"},validateAllTasksConfirmation:{id:"projects.actions.validate_all_tasks.confirmation",defaultMessage:"Are you sure you want to validate all mapped tasks? You cannot undo this."},validateAllTasksDescription:{id:"projects.actions.validate_all_tasks.description",defaultMessage:"This will change the status of all mapped tasks to 'finished'. Please use this only if you are sure of what you are doing."},validateAllSuccess:{id:"projects.actions.validate_all_tasks.success",defaultMessage:"The tasks were validated successfully."},validateAllError:{id:"projects.actions.validate_all_tasks.error",defaultMessage:"Validating all the tasks failed for an unknown reason."},resetBadImagery:{id:"projects.actions.reset_bad_imagery_tasks.title",defaultMessage:"Reset tasks marked as unavailable"},resetBadImageryConfirmation:{id:"projects.actions.reset_bad_imagery_tasks.confirmation",defaultMessage:"Are you sure you want to reset all tasks marked as unavailable in this project? You cannot undo this."},resetBadImageryDescription:{id:"projects.actions.reset_bad_imagery_tasks.description",defaultMessage:"This will change the status of those tasks to 'ready for mapping'. Please use this only if you are sure of what you are doing."},resetBadImageryButton:{id:"projects.actions.reset_bad_imagery_tasks.button",defaultMessage:"Reset all unavailable tasks"},resetBadImagerySuccess:{id:"projects.actions.reset_bad_imagery_tasks.success",defaultMessage:"The tasks marked as unavailable were reset successfully."},resetBadImageryError:{id:"projects.actions.reset_bad_imagery_tasks.error",defaultMessage:"Resetting the tasks failed for an unknown reason."},resetAll:{id:"projects.actions.reset_all_tasks.title",defaultMessage:"Reset tasks"},resetAllButton:{id:"projects.actions.reset_all_tasks.button",defaultMessage:"Reset all tasks"},resetAllDescription:{id:"projects.actions.reset_all_tasks.description",defaultMessage:"Reset all tasks in the project to ready to map, preserving history."},resetAllSuccess:{id:"projects.actions.reset_all_tasks.success",defaultMessage:"All tasks were reset successfully."},resetAllError:{id:"projects.actions.reset_all_tasks.error",defaultMessage:"Resetting all the tasks failed for an unknown reason."},cloneProject:{id:"projects.actions.clone_project.button",defaultMessage:"Clone project"},cloneProjectDescription:{id:"projects.actions.clone_project.description",defaultMessage:"This will copy all descriptions, instructions, metadata etc to a new project. The Area of Interest, tasks and the priority areas will not be copied. You will have to redraw/import these. Your newly cloned project will be in draft status."},revertVALIDATEDTasks:{id:"projects.actions.revert_validated_tasks.button",defaultMessage:"Revert validated tasks"},revertVALIDATEDTasksTitle:{id:"projects.actions.revert_validated_tasks.title",defaultMessage:"Revert validated tasks"},revertVALIDATEDTasksDescription:{id:"projects.actions.revert_validated_tasks.description",defaultMessage:"Revert all validated tasks by a specified user and mark it as mapped"},revertVALIDATEDTasksSuccess:{id:"projects.actions.revert_validated_tasks.success",defaultMessage:"The tasks were reverted successfully."},revertBADIMAGERYTasks:{id:"projects.actions.revert_unavailable_tasks.button",defaultMessage:"Revert unavailable tasks"},revertBADIMAGERYTasksTitle:{id:"projects.actions.revert_unavailable_tasks.title",defaultMessage:"Revert unavailable tasks"},revertBADIMAGERYTasksDescription:{id:"projects.actions.revert_unavailable_tasks.description",defaultMessage:"Revert all tasks marked as unavailable by a specified user and mark it as ready to map"},revertBADIMAGERYTasksSuccess:{id:"projects.actions.revert_unavailable_tasks.success",defaultMessage:"The tasks were reverted successfully."},revertTasksError:{id:"projects.actions.revert_validated_tasks.error",defaultMessage:"The tasks reversion failed."},transferProject:{id:"projects.actions.transfer_project.button",defaultMessage:"Transfer project"},transferProjectTitle:{id:"projects.actions.transfer_project.title",defaultMessage:"Transfer project ownership"},transferProjectAlert:{id:"projects.actions.transfer_project.alert",defaultMessage:"This feature is only available to the project author, organisation manager and TM admin."},transferProjectSuccess:{id:"projects.actions.transfer_project.success",defaultMessage:"The project was transferred successfully."},transferProjectError:{id:"projects.actions.transfer_project.error",defaultMessage:"The project transfer failed."},deleteProject:{id:"projects.actions.delete_project.title",defaultMessage:"Delete project"},deleteProjectAlert:{id:"projects.actions.delete_project.alert",defaultMessage:"You can only delete projects that has no received contributions."},deleteProjectSuccess:{id:"projects.actions.delete_project.success",defaultMessage:"The project was deleted successfully."},deleteProjectError:{id:"projects.actions.delete_project.error",defaultMessage:"The project deletion failed. If this project has received some contributions, you should archive it instead."},taskReset:{id:"projects.actions.task_reset.title",defaultMessage:"Task reset"},taskResetButton:{id:"projects.actions.task_reset.button",defaultMessage:"Reset all tasks"},cancel:{id:"projects.actions.modal.cancel.button",defaultMessage:"Cancel"},canNotUndo:{id:"projects.actions.alerts.can_not_undo",defaultMessage:"This cannot be undone."},warning:{id:"projects.actions.alerts.warning",defaultMessage:"Warning"},taskResetConfirmation:{id:"projects.actions.task_reset.confirmation",defaultMessage:"Are you sure you want to reset all tasks? You cannot undo this."},status:{id:"projects.formInputs.status",defaultMessage:"Status"},priority:{id:"projects.formInputs.priority",defaultMessage:"Priority"},license:{id:"projects.formInputs.license",defaultMessage:"Required license"},language:{id:"projects.formInputs.language",defaultMessage:"Default language"},typeHere:{id:"projects.formInputs.type",defaultMessage:"Type here..."},translations:{id:"projects.formInputs.language.translations",defaultMessage:"Translations"},selectLanguage:{id:"projects.formInputs.language.select",defaultMessage:"Select a language above to translate."},mappingEditors:{id:"projects.formInputs.mapping_editors",defaultMessage:"Editors for mapping"},validationEditors:{id:"projects.formInputs.validation_editors",defaultMessage:"Editors for validation"},customEditor:{id:"projects.formInputs.editors.options.custom",defaultMessage:"Custom editor"},randomTaskSelection:{id:"projects.formInputs.random_task_selection",defaultMessage:"Enforce random task selection"},randomTaskSelectionMapping:{id:"projects.formInputs.random_task_selection.mapping",defaultMessage:"Enforce random task selection on mapping"},randomTaskSelectionDescription:{id:"projects.formInputs.random_task_selection.description",defaultMessage:"If checked, users must edit tasks at random for the initial editing stage (managers and admins are exempt)."},rapidPowerUser:{id:"projects.formInputs.rapid_power_user",defaultMessage:"Enable RapiD Power User Features"},rapidPowerUserDescription:{id:"projects.formInputs.rapid_power_user.description",defaultMessage:"If checked, RapiD will load with the power user dialog enabled."},imagery:{id:"projects.formInputs.imagery",defaultMessage:"Imagery"},imageryURLNote:{id:"projects.formInputs.imagery.note",defaultMessage:"Follow this format for TMS URLs: {exampleUrl}"},drawPolygon:{id:"projects.formInputs.priority_areas.options.polygon",defaultMessage:"Draw polygon"},drawRectangle:{id:"projects.formInputs.priority_areas.options.rectangle",defaultMessage:"Draw rectangle"},clearAll:{id:"projects.formInputs.priority_areas.action.clear",defaultMessage:"Clear all"},selectFile:{id:"projects.formInputs.priority_areas.action.selectFile",defaultMessage:"Select File"},importDescription:{id:"projects.formInputs.priority_areas.upload.description",defaultMessage:"The supported file formats are: GeoJSON, KML, OSM or zipped Shapefile. You can drag and drop a file over the map to import it."},name:{id:"projects.formInputs.name",defaultMessage:"Name of the project"},dueDate:{id:"projects.formInputs.dueDate",defaultMessage:"Due date"},dueDateDescription:{id:"projects.formInputs.dueDate.description",defaultMessage:"Define the ideal date to have the project finished. The date format is day/month/year."},description:{id:"projects.formInputs.description",defaultMessage:"Description"},shortDescription:{id:"projects.formInputs.shortDescription",defaultMessage:"Short description"},instructions:{id:"projects.formInputs.instructions",defaultMessage:"Detailed instructions"},osmchaFilterId:{id:"projects.formInputs.osmcha_filter_id",defaultMessage:"OSMCha filter ID"},osmchaFilterIdDescription:{id:"projects.formInputs.osmcha_filter_id.description",defaultMessage:"Optional id of a saved OSMCha filter to apply when viewing the project in OSMCha, if you desire custom filtering. Note that this replaces all standard filters. Example: 095e8b31-b3cb-4b36-a106-02826fb6a109 (for convenience, you can also paste an OSMCha URL here that uses a saved filter and the filter id will be extracted for you)."},priorityAreasDescription:{id:"projects.formInputs.priority_areas.description",defaultMessage:"If you want mappers to work on the highest priority areas first, draw one or more polygons within the project area or import a file."},mappingTypes:{id:"projects.formInputs.mapping_types",defaultMessage:"Types of mapping"},idPresets:{id:"projects.formInputs.id_presets",defaultMessage:"iD editor presets"},userRole:{id:"projects.formInputs.user_role",defaultMessage:"User role"},difficulty:{id:"projects.formInputs.difficulty",defaultMessage:"Difficulty"},difficultyDescription:{id:"projects.formInputs.difficulty.description",defaultMessage:"Setting the difficulty will help mappers to find suitable projects to work on."},perTaskInstructions:{id:"projects.formInputs.per_task_instructions",defaultMessage:"Per task instructions"},perTaskInstructionsDescription:{id:"projects.formInputs.per_task_instructions.descriptions",defaultMessage:'Add any information that can be useful to users while mapping a task. "{x}", "{y}" and "{z}" will be replaced by the corresponding parameters for each task. "{x}", "{y}" and "{z}" parameters can only be be used on tasks generated in the Tasking Manager and not on imported tasks.'},perTaskInstructionsExample:{id:"projects.formInputs.per_task_instructions.example",defaultMessage:"Example: This task involves loading extra data. Click [here](http://localhost:8111/import?new_layer=true&amp;url=http://www.domain.com/data/{x}/{y}/{z}/routes_2009.osm) to load the data into JOSM."},changesetComment:{id:"projects.formInputs.changesetComment",defaultMessage:"Changeset comment"},changesetCommentExample:{id:"projects.formInputs.changesetComment.example",defaultMessage:"Example: #hotosm-project-470 #missingmaps Buildings mapping."},changesetCommentDescription:{id:"projects.formInputs.changesetComment.description",defaultMessage:"Default comments added to uploaded changeset comment field. Users should also be encouraged to add text describing what they mapped. Hashtags are sometimes used for analysis later, but should be human informative and not overused, #group #event for example."},nonEditableComment:{id:"projects.formInputs.non_editable_comment",defaultMessage:"This default comment is not editable."},projectPriorityURGENT:{id:"project.formInputs.priority.options.urgent",defaultMessage:"Urgent"},projectPriorityHIGH:{id:"project.formInputs.priority.options.high",defaultMessage:"High"},projectPriorityMEDIUM:{id:"project.formInputs.priority.options.medium",defaultMessage:"Medium"},projectPriorityLOW:{id:"project.formInputs.priority.options.low",defaultMessage:"Low"},statusDRAFT:{id:"project.formInputs.status.options.draft",defaultMessage:"Draft"},statusARCHIVED:{id:"project.formInputs.status.options.archived",defaultMessage:"Archived"},statusPUBLISHED:{id:"project.formInputs.status.options.published",defaultMessage:"Published"},userRoleALL:{id:"project.formInputs.user_role.options.all",defaultMessage:"All roles"},userRoleMAPPER:{id:"project.formInputs.user_role.options.mapper",defaultMessage:"Mapper"},subjectPlaceholder:{id:"project.formInputs.placeholders.subject",defaultMessage:"Subject *"},messagePlaceholder:{id:"project.formInputs.placeholders.message",defaultMessage:"Message *"},difficultyALL:{id:"project.formInputs.mapper_level.options.all",defaultMessage:"All levels"},difficultyCHALLENGING:{id:"project.formInputs.mapper_level.options.challenging",defaultMessage:"Challenging"},difficultyMODERATE:{id:"project.formInputs.mapper_level.options.moderate",defaultMessage:"Moderate"},difficultyEASY:{id:"project.formInputs.mapper_level.options.easy",defaultMessage:"Easy"},filterByOrg:{id:"project.formInputs.teams.actions.filter.organisations",defaultMessage:"Filter teams by organizations"},selectTeam:{id:"project.formInputs.teams.actions.select",defaultMessage:"Select a team..."},selectRole:{id:"project.formInputs.teams.actions.select.role",defaultMessage:"Select a role..."},add:{id:"project.formInputs.teams.actions.add",defaultMessage:"Add"},update:{id:"project.formInputs.teams.actions.update",defaultMessage:"Update"},preview:{id:"project.messages.preview",defaultMessage:"Preview"},customEditorName:{id:"projects.formInputs.custom_editor.name",defaultMessage:"Name"},customEditorDescription:{id:"projects.formInputs.custom_editor.description",defaultMessage:"Description"},customEditorUrl:{id:"projects.formInputs.custom_editor.url",defaultMessage:"URL"},customEditorEnabledForMapping:{id:"projects.formInputs.custom_editor.enabled.mapping",defaultMessage:"Enabled for mapping"},customEditorEnabledForValidation:{id:"projects.formInputs.custom_editor.enabled.validation",defaultMessage:"Enabled for validation"},deleteCustomEditor:{id:"projects.formInputs.custom_editor.delete",defaultMessage:"Delete Custom Editor"},removeCustomEditor:{id:"projects.formInputs.custom_editor.remove",defaultMessage:"Remove Custom Editor"},confirmDeleteCustomEditor:{id:"projects.formInputs.custom_editor.delete.confirm",defaultMessage:'This will remove the custom editor from the project. Are you sure you don\'t want to disable the custom editor by toggling the "Enabled" checkbox above?'},noMappingEditor:{id:"projects.formInputs.noMappingEditor",defaultMessage:"At least one editor must be enabled for mapping"},noValidationEditor:{id:"projects.formInputs.noValidationEditor",defaultMessage:"At least one editor must be enabled for validation"},extraIdParams:{id:"projects.formInputs.extraIdParams",defaultMessage:"Additional iD URL parameters"},extraIdParamsDescription:{id:"projects.formInputs.extraIdParams.description",defaultMessage:"Any additional URL parameters that you want include when loading iD editor (both the embedded and the external ones). Use & to separate different parameters. Example: {text}."},extraIdParamsDescriptionLink:{id:"projects.formInputs.extraIdParams.description.link",defaultMessage:"Check the {link} for more information."},iDAPIDocs:{id:"projects.formInputs.extraIdParams.iDAPIDocs",defaultMessage:"iD editor documentation"}})},1919:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return o}));var n=r(1),a=r(10);function s(e){const t=Object(a.d)((e=>e.auth.userDetails)),r=Object(a.d)((e=>e.auth.organisations)),s=Object(a.d)((e=>e.auth.pmTeams)),[i,o]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{"ADMIN"===t.role&&o(!0),e&&e.author&&t.username===e.author&&o(!0),r&&r.includes(e.organisation)&&o(!0);const n=e.teams?e.teams.filter((e=>"PROJECT_MANAGER"===e.role)).map((e=>e.teamId)):[];s&&s.some((e=>n.includes(e)))&&o(!0)}),[s,t.role,t.username,r,e]),[i]}function i(e){const t=Object(a.d)((e=>e.auth.userDetails)),r=Object(a.d)((e=>e.auth.organisations)),s=Object(a.d)((e=>e.auth.pmTeams)),[i,o]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{if("ADMIN"===t.role&&o(!0),r&&r.includes(e.organisation_id)&&o(!0),s&&s.includes(e.teamId)&&o(!0),e.members){const r=e.members.filter((e=>e.active&&"MANAGER"===e.function)).map((e=>e.username));t.username&&r.includes(t.username)&&o(!0)}}),[s,t.role,t.username,r,e]),[i]}function o(e){const t=Object(a.d)((e=>e.auth.userDetails)),r=Object(a.d)((e=>e.auth.organisations)),[s,i]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{"ADMIN"===t.role&&i(!0),e&&e.organisationId&&r&&r.includes(e.organisationId)&&i(!0),e&&e.managers&&e.managers.map((e=>e.username)).includes(t.username)&&i(!0)}),[e,r,t.username,t.role]),[s]}},1920:function(e,t,r){"use strict";var n=r(20);t.a=Object(n.b)({imageUploadFailed:{id:"comment.input.imageUpload.error",defaultMessage:"The image upload failed."},imageUploadOnProgress:{id:"comment.input.imageUpload.progress",defaultMessage:"Uploading file..."},sendingMessage:{id:"comment.input.sending.progress",defaultMessage:"Sending message..."},messageSent:{id:"comment.input.sending.success",defaultMessage:"Message sent."},messageError:{id:"comment.input.sending.error",defaultMessage:"An error occurred while sending message."},managersHashtagTip:{id:"comment.hashtags.help.managers",defaultMessage:'Add "{hashtag}" to notify the project managers about your comment.'},authorHashtagTip:{id:"comment.hashtags.help.author",defaultMessage:'Add "{hashtag}" to notify the project author about your comment.'},contributorsHashtagTip:{id:"comment.hashtags.help.contributors",defaultMessage:'Add "{hashtag}" to notify the task contributors about your comment.'},nothingToPreview:{id:"comment.preview.nothingToPreview",defaultMessage:"Nothing to preview"},leaveAComment:{id:"comment.preview.leaveAComment",defaultMessage:"Leave a comment..."},write:{id:"textarea.write",defaultMessage:"Write"},preview:{id:"textarea.preview",defaultMessage:"Preview"},attachImage:{id:"comment.write.attachImage",defaultMessage:"Attach image by dragging and dropping"},markdownSupported:{id:"comment.write.markdownSupported",defaultMessage:"Markdown supported"}})},1928:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r(1);var n=r(1914),a=r(30),s=r(55),i=r(0);function o(e){let{className:t}=e;return Object(i.jsx)("div",{className:t,children:Object(i.jsxs)(n.a,{type:"warning",iconClassName:"h2 w2",children:[Object(i.jsx)("h3",{className:"barlow-condensed f3 fw6 mv0 dib",children:Object(i.jsx)(a.a,{...s.a.webglUnsupportedTitle})}),Object(i.jsx)("div",{className:"mv4 lh-title",children:Object(i.jsx)(a.a,{...s.a.webglUnsupportedDescription,values:{a:e=>Object(i.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://get.webgl.org/",children:e})}})})]})})}},1935:function(e,t,r){"use strict";r.d(t,"a",(function(){return x}));var n=r(1),a=r(10),s=r(1951),i=r(2052),o=r.n(i),c=r(30),l=r(1965),u=(r(2053),r(1947)),d=r(29),h=r(50),p=r(1920),f=r(0);function m(e){let{text:t,setFn:r,hashtag:n,className:a}=e;const s=Object(h.a)();return Object(f.jsx)("span",{className:"bb pointer ".concat(a),style:{borderBottomStyle:"dashed"},onClick:()=>r(t?"".concat(t," ").concat(n):"".concat(n," ")),title:s.formatMessage(p.a["".concat(n.replace("#",""),"HashtagTip")],{hashtag:n}),children:n})}var g=e=>{let{files:t}=e;return Object(f.jsx)("ul",{children:t.map((e=>{let{file:t,errors:r}=e;return Object(f.jsxs)("li",{className:"red",children:[t.path," (",r.map((e=>Object(f.jsxs)("span",{className:"dib pr2",children:[e.message,","]},e.code))),")"]},t.path)}))})};var y=e=>{let{uploadError:t,uploading:r}=e;return Object(f.jsxs)(f.Fragment,{children:[t&&Object(f.jsx)("span",{className:"red f6 pt3 db",children:Object(f.jsx)(c.a,{...p.a.imageUploadFailed})}),r&&Object(f.jsx)("span",{className:"blue-grey f6 pt3 db",children:Object(f.jsx)(c.a,{...p.a.imageUploadOnProgress})})]})},b=r(9),v=r(167);const _=14,w={bold:{...s.a.bold,icon:Object(f.jsx)("svg",{role:"img",width:_,height:_,viewBox:"0 0 384 512",children:Object(f.jsx)("path",{fill:"currentColor",d:"M304.793 243.891c33.639-18.537 53.657-54.16 53.657-95.693 0-48.236-26.25-87.626-68.626-104.179C265.138 34.01 240.849 32 209.661 32H24c-8.837 0-16 7.163-16 16v33.049c0 8.837 7.163 16 16 16h33.113v318.53H24c-8.837 0-16 7.163-16 16V464c0 8.837 7.163 16 16 16h195.69c24.203 0 44.834-1.289 66.866-7.584C337.52 457.193 376 410.647 376 350.014c0-52.168-26.573-91.684-71.207-106.123zM142.217 100.809h67.444c16.294 0 27.536 2.019 37.525 6.717 15.828 8.479 24.906 26.502 24.906 49.446 0 35.029-20.32 56.79-53.029 56.79h-76.846V100.809zm112.642 305.475c-10.14 4.056-22.677 4.907-31.409 4.907h-81.233V281.943h84.367c39.645 0 63.057 25.38 63.057 63.057.001 28.425-13.66 52.483-34.782 61.284z"})})},italic:{...s.a.italic,icon:Object(f.jsx)("svg",{"data-name":"italic",width:_,height:_,role:"img",viewBox:"0 0 320 512",children:Object(f.jsx)("path",{fill:"currentColor",d:"M204.758 416h-33.849l62.092-320h40.725a16 16 0 0 0 15.704-12.937l6.242-32C297.599 41.184 290.034 32 279.968 32H120.235a16 16 0 0 0-15.704 12.937l-6.242 32C96.362 86.816 103.927 96 113.993 96h33.846l-62.09 320H46.278a16 16 0 0 0-15.704 12.935l-6.245 32C22.402 470.815 29.967 480 40.034 480h158.479a16 16 0 0 0 15.704-12.935l6.245-32c1.927-9.88-5.638-19.065-15.704-19.065z"})})},quote:{...s.a.quote,icon:Object(f.jsx)("svg",{width:_,height:_,viewBox:"0 0 520 520",children:Object(f.jsx)("path",{fill:"currentColor",d:"M520,95.75 L520,225.75 C520,364.908906 457.127578,437.050625 325.040469,472.443125 C309.577578,476.586875 294.396016,464.889922 294.396016,448.881641 L294.396016,414.457031 C294.396016,404.242891 300.721328,395.025078 310.328125,391.554687 C377.356328,367.342187 414.375,349.711094 414.375,274.5 L341.25,274.5 C314.325781,274.5 292.5,252.674219 292.5,225.75 L292.5,95.75 C292.5,68.8257812 314.325781,47 341.25,47 L471.25,47 C498.174219,47 520,68.8257812 520,95.75 Z M178.75,47 L48.75,47 C21.8257813,47 0,68.8257812 0,95.75 L0,225.75 C0,252.674219 21.8257813,274.5 48.75,274.5 L121.875,274.5 C121.875,349.711094 84.8563281,367.342187 17.828125,391.554687 C8.22132813,395.025078 1.89601563,404.242891 1.89601563,414.457031 L1.89601563,448.881641 C1.89601563,464.889922 17.0775781,476.586875 32.5404687,472.443125 C164.627578,437.050625 227.5,364.908906 227.5,225.75 L227.5,95.75 C227.5,68.8257812 205.674219,47 178.75,47 Z"})})},link:{...s.a.link,icon:Object(f.jsx)("svg",{"data-name":"italic",width:_,height:_,role:"img",viewBox:"0 0 520 520",children:Object(f.jsx)("path",{fill:"currentColor",d:"M331.751196,182.121107 C392.438214,241.974735 391.605313,337.935283 332.11686,396.871226 C332.005129,396.991316 331.873084,397.121413 331.751196,397.241503 L263.493918,464.491645 C203.291404,523.80587 105.345257,523.797864 45.151885,464.491645 C-15.0506283,405.187427 -15.0506283,308.675467 45.151885,249.371249 L82.8416853,212.237562 C92.836501,202.39022 110.049118,208.9351 110.56511,222.851476 C111.223305,240.5867 114.451306,258.404985 120.407566,275.611815 C122.424812,281.438159 120.983487,287.882964 116.565047,292.23621 L103.272145,305.332975 C74.8052033,333.379887 73.9123737,379.047937 102.098973,407.369054 C130.563883,435.969378 177.350591,436.139505 206.033884,407.879434 L274.291163,340.6393 C302.9257,312.427264 302.805844,266.827265 274.291163,238.733318 C270.531934,235.036561 266.74528,232.16442 263.787465,230.157924 C259.544542,227.2873 256.928256,222.609848 256.731165,217.542518 C256.328935,206.967633 260.13184,196.070508 268.613213,187.714278 L289.998463,166.643567 C295.606326,161.118448 304.403592,160.439942 310.906317,164.911276 C318.353355,170.034591 325.328531,175.793397 331.751196,182.121107 Z M240.704978,55.4828366 L172.447607,122.733236 C172.325719,122.853326 172.193674,122.983423 172.081943,123.103513 C117.703294,179.334654 129.953294,261.569283 185.365841,328.828764 C191.044403,335.721376 198.762988,340.914712 206.209732,346.037661 C212.712465,350.509012 221.510759,349.829503 227.117615,344.305363 L248.502893,323.234572 C256.984277,314.87831 260.787188,303.981143 260.384957,293.406218 C260.187865,288.338869 257.571576,283.661398 253.328648,280.790763 C250.370829,278.78426 246.58417,275.912107 242.824936,272.215337 C214.310216,244.121282 206.209732,204.825874 229.906702,179.334654 L298.164073,112.094263 C326.847404,83.8340838 373.633159,84.0042113 402.099123,112.604645 C430.285761,140.92587 429.393946,186.594095 400.92595,214.641114 L387.63303,227.737929 C383.214584,232.091191 381.773257,238.536021 383.790506,244.362388 C389.746774,261.569283 392.974779,279.387637 393.632975,297.122928 C394.149984,311.039357 411.361608,317.584262 421.356437,307.736882 L459.046288,270.603053 C519.249898,211.29961 519.249898,114.787281 459.047304,55.4828366 C398.853851,-3.82360914 300.907572,-3.83161514 240.704978,55.4828366 Z"})})},unorderedListCommand:{...s.a.unorderedListCommand,icon:Object(f.jsx)("svg",{"data-name":"unordered-list",width:_,height:_,viewBox:"0 0 512 512",children:Object(f.jsx)("path",{fill:"currentColor",d:"M96 96c0 26.51-21.49 48-48 48S0 122.51 0 96s21.49-48 48-48 48 21.49 48 48zM48 208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm0 160c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm96-236h352c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"})})},orderedListCommand:{...s.a.orderedListCommand,icon:Object(f.jsx)("svg",{"data-name":"ordered-list",width:_,height:_,role:"img",viewBox:"0 0 512 512",children:Object(f.jsx)("path",{fill:"currentColor",d:"M3.263 139.527c0-7.477 3.917-11.572 11.573-11.572h15.131V88.078c0-5.163.534-10.503.534-10.503h-.356s-1.779 2.67-2.848 3.738c-4.451 4.273-10.504 4.451-15.666-1.068l-5.518-6.231c-5.342-5.341-4.984-11.216.534-16.379l21.72-19.938C32.815 33.602 36.732 32 42.785 32H54.89c7.656 0 11.749 3.916 11.749 11.572v84.384h15.488c7.655 0 11.572 4.094 11.572 11.572v8.901c0 7.477-3.917 11.572-11.572 11.572H14.836c-7.656 0-11.573-4.095-11.573-11.572v-8.902zM2.211 304.591c0-47.278 50.955-56.383 50.955-69.165 0-7.18-5.954-8.755-9.28-8.755-3.153 0-6.479 1.051-9.455 3.852-5.079 4.903-10.507 7.004-16.111 2.451l-8.579-6.829c-5.779-4.553-7.18-9.805-2.803-15.409C13.592 201.981 26.025 192 47.387 192c19.437 0 44.476 10.506 44.476 39.573 0 38.347-46.753 46.402-48.679 56.909h39.049c7.529 0 11.557 4.027 11.557 11.382v8.755c0 7.354-4.028 11.382-11.557 11.382h-67.94c-7.005 0-12.083-4.028-12.083-11.382v-4.028zM5.654 454.61l5.603-9.28c3.853-6.654 9.105-7.004 15.584-3.152 4.903 2.101 9.63 3.152 14.359 3.152 10.155 0 14.358-3.502 14.358-8.23 0-6.654-5.604-9.106-15.934-9.106h-4.728c-5.954 0-9.28-2.101-12.258-7.88l-1.05-1.926c-2.451-4.728-1.226-9.806 2.801-14.884l5.604-7.004c6.829-8.405 12.257-13.483 12.257-13.483v-.35s-4.203 1.051-12.608 1.051H16.685c-7.53 0-11.383-4.028-11.383-11.382v-8.755c0-7.53 3.853-11.382 11.383-11.382h58.484c7.529 0 11.382 4.027 11.382 11.382v3.327c0 5.778-1.401 9.806-5.079 14.183l-17.509 20.137c19.611 5.078 28.716 20.487 28.716 34.845 0 21.363-14.358 44.126-48.503 44.126-16.636 0-28.192-4.728-35.896-9.455-5.779-4.202-6.304-9.805-2.626-15.934zM144 132h352c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"})})},mention:{name:"mention",keyCommand:"mention",value:"@",buttonProps:{"aria-label":"Mention user",title:"Mention user"},icon:Object(f.jsxs)("svg",{width:_,height:_,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(f.jsx)("circle",{cx:"12",cy:"12",r:"4"}),Object(f.jsx)("path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94"})]}),execute:(e,t)=>{const r=Object(s.c)({text:e.text,selection:e.selection}),n=t.setSelectionRange(r),a=t.replaceSelection("@".concat(n.selectedText));t.setSelectionRange({start:a.selection.end-n.selectedText.length,end:a.selection.end})}},upload:{name:"upload",keyCommand:"upload",buttonProps:{"aria-label":"Upload user",title:"Upload image"},icon:Object(f.jsx)("svg",{width:_,height:_,x:"0",y:"0",viewBox:"0 0 24 24",className:"",children:Object(f.jsx)("g",{children:Object(f.jsx)("path",{id:"image-upload",d:"m21.75 11v6a3.383 3.383 0 0 1 -3.75 3.75h-12a3.383 3.383 0 0 1 -3.75-3.75v-10a3.383 3.383 0 0 1 3.75-3.75h8a.75.75 0 0 1 0 1.5h-8c-1.577 0-2.25.673-2.25 2.25v9.25l2.54-2.54a1.008 1.008 0 0 1 1.42 0l.94.94a.5.5 0 0 0 .7 0l4.94-4.94a1.008 1.008 0 0 1 1.42 0l4.54 4.54v-3.25a.75.75 0 0 1 1.5 0zm-13.757-3.25a1.253 1.253 0 1 0 .007 0zm10.537-2.72.22-.219v2.189a.75.75 0 0 0 1.5 0v-2.189l.22.219a.75.75 0 0 0 1.06-1.06l-1.5-1.5a.751.751 0 0 0 -1.06 0l-1.5 1.5a.75.75 0 0 0 1.06 1.06z",fill:"#000000","data-original":"#000000",className:""})})}),execute:()=>{document.getElementById("image_picker").click()}}};var j=r(106);const x=e=>{let{comment:t,setComment:r,contributors:i,enableHashtagPaste:h=!1,isShowTabNavs:_=!1,isShowFooter:x=!1,enableContributorsHashtag:M=!1,isShowUserPicture:O=!1,placeholderMsg:k=p.a.leaveAComment,markdownTextareaProps:C={}}=e;const E=Object(a.d)((e=>e.auth.token)),S=Object(n.useRef)(),N=Object(n.useRef)(!1),[I,D]=Object(n.useState)(!1),T=e=>r("".concat(t,"\n![image](").concat(e,")\n")),[A,P,L]=Object(u.a)(T),{fileRejections:R,getRootProps:F,getInputProps:B}=Object(l.a)({onDrop:L,...b.f}),[U,z,Y]=Object(u.b)(),G=new o.a({trigger:"@",values:async(e,t)=>{try{if(!e)return t(i.map((e=>({username:e}))));t((await Object(d.b)("users/queries/filter/".concat(e,"/"),E)).usernames.map((e=>({username:e}))))}catch(r){return[]}},lookup:"username",fillAttr:"username",selectTemplate:e=>"@[".concat(e.original.username,"]"),itemClass:"w-100 pv2 ph3 bg-tan hover-bg-blue-grey blue-grey hover-white pointer base-font",requireLeadingSpace:!0,noMatchTemplate:null,allowSpaces:!0,searchOpts:{skip:!0}});Object(n.useEffect)((()=>{S.current.textarea&&!N.current&&Array.isArray(i)&&(N.current=!0,G.attach(S.current.textarea),S.current.textarea.addEventListener("tribute-replaced",(e=>{r(e.target.value)})))}),[S.current,i]);return Object(f.jsxs)("div",{...F(),children:[_&&Object(f.jsxs)("div",{className:"flex items-center gap-1 ".concat(O?"mb3":""),children:[O&&Object(f.jsx)(j.a,{className:"w3 h3"}),Object(f.jsxs)("div",{className:"pv3-ns ph3 ph3-m bg-grey-light dib",children:[Object(f.jsx)("span",{role:"button",className:"pointer db dib-ns pb1 bb bw1 ".concat(I?"b--grey-light":"b--blue-dark"),onClick:()=>D(!1),children:Object(f.jsx)(c.a,{...p.a.write})}),Object(f.jsx)("span",{role:"button",className:"pointer ml3 db dib-ns pb1 bb bw1 ".concat(I?"b--blue-dark":"b--grey-light"),onClick:()=>D(!0),children:Object(f.jsx)(c.a,{...p.a.preview})})]})]}),Object(f.jsxs)("div",{className:"".concat(I?"dn":""," bg-white"),"data-color-mode":"light",children:[Object(f.jsx)(c.a,{...k,children:e=>Object(f.jsx)(s.b,{ref:S,preview:"edit",commands:Object.keys(w).map((e=>w[e])),extraCommands:[],height:200,value:t,onChange:r,textareaProps:{...B(),spellCheck:"true",placeholder:e,...C},defaultTabEnable:!0})}),Object(f.jsx)("input",{type:"file",id:"image_picker",className:"dn",accept:"image/*",onChange:async e=>await Y(e.target.files[0],T,E)}),x&&Object(f.jsxs)("div",{className:"dn flex-ns justify-between ba bt-0 w-100 ph2 pv1 relative b--blue-grey textareaDetail",children:[Object(f.jsx)("span",{className:"f7 lh-copy gray",children:Object(f.jsx)(c.a,{...p.a.attachImage})}),Object(f.jsx)("span",{className:"f7 lh-copy gray",children:Object(f.jsx)(c.a,{...p.a.markdownSupported})})]})]}),I&&Object(f.jsxs)("div",{className:"db ba ph3",style:{minHeight:200,borderColor:"#F0EEEE"},children:[t&&Object(f.jsx)("div",{style:{wordWrap:"break-word"},className:"blue-grey f5 lh-title markdown-content",dangerouslySetInnerHTML:Object(v.b)(Object(v.a)(t))}),!t&&Object(f.jsx)("span",{className:"db mt3",children:Object(f.jsx)(c.a,{...p.a.nothingToPreview})})]}),h&&!I&&Object(f.jsxs)("span",{className:"db blue-grey f6 pt2",children:[Object(f.jsx)(m,{text:t,setFn:r,hashtag:"#managers"}),Object(f.jsx)("span",{children:", "}),Object(f.jsx)(m,{text:t,setFn:r,hashtag:"#author"}),M&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("span",{children:", "}),Object(f.jsx)(m,{text:t,setFn:r,hashtag:"#contributors"})]})]}),Object(f.jsx)(y,{uploading:P||z,uploadError:A||U}),Object(f.jsx)(g,{files:R})]})}},1937:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(1913),a=r(1912),s=r(1911);function i(e,t){Object(s.a)(2,arguments);var r=Object(a.default)(e),i=Object(n.a)(t),o=r.getFullYear(),c=r.getDate(),l=new Date(0);l.setFullYear(o,i,15),l.setHours(0,0,0,0);var u=function(e){Object(s.a)(1,arguments);var t=Object(a.default)(e),r=t.getFullYear(),n=t.getMonth(),i=new Date(0);return i.setFullYear(r,n+1,0),i.setHours(0,0,0,0),i.getDate()}(l);return r.setMonth(i,Math.min(c,u)),r}},1941:function(e,t,r){"use strict";function n(e){const t="https://osmcha.org/";if(e.osmchaFilterId)return"".concat(t,"?aoi=").concat(encodeURIComponent(e.osmchaFilterId));let r={};return e.aoiBBOX&&(r.in_bbox=a("string"===typeof e.aoiBBOX?e.aoiBBOX:e.aoiBBOX.join(",")),e.usernames||(r.area_lt=a(2))),"string"===typeof e.created&&(r.date__gte=a(e.created.split("T")[0])),e.mappingTeams&&(r.mapping_teams=a(e.mappingTeams)),e.changesetComment&&(r.comment=a(e.changesetComment)),"object"===typeof e.usernames&&(r.users=a(e.usernames)),"".concat(t,"?filters=").concat(encodeURIComponent(JSON.stringify(r)))}function a(e){return(Array.isArray(e)?e:[e]).map((e=>{return{label:t=e,value:t};var t}))}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return s}));const s=e=>e.startsWith("https://osmcha.org/")&&-1!==e.search("aoi=")?e.split("aoi=")[1]:e},1944:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(1),a=r(10),s=r(6),i=r(30),o=r(82),c=r(173),l=r(29),u=r(119),d=r(32),h=r(13),p=r(0);function f(e){let{id:t,name:r,type:f,className:m,endpointURL:g,onDelete:y}=e;const b=Object(s.q)(),v=Object(n.useRef)(),_=Object(a.d)((e=>e.auth.token)),[w,j]=Object(n.useState)(null),[x,M]=Object(n.useState)(null),O=g||"".concat(f,"/").concat(t,"/");return Object(p.jsx)(o.a,{ref:v,trigger:Object(p.jsx)(u.b,{className:"".concat(m||""," dib ml3"),showText:"comments"!==f}),modal:!0,closeOnDocumentClick:!0,nested:!0,onClose:()=>{j(null),M(null)},children:e=>Object(p.jsxs)("div",{className:"pv4",onClick:e=>{e.preventDefault(),e.stopPropagation()},children:[Object(p.jsx)("div",{className:"cf tc red",children:Object(p.jsx)(h.a,{height:"50px",width:"50px"})}),Object(p.jsxs)("div",{className:"cf blue-dark tc",children:[!w&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h3",{className:"barlow-condensed f3",children:Object(p.jsx)(i.a,{...c.a["confirmDeleteTitle_".concat(f)]})}),Object(p.jsxs)("div",{className:"pt3",children:[Object(p.jsx)(d.b,{className:"bg-white blue-dark mr3",onClick:()=>{j(!1),e()},children:Object(p.jsx)(i.a,{...c.a.cancel})}),Object(p.jsx)(d.b,{className:"bg-red white",onClick:()=>(j("started"),void Object(l.b)(O,_,"DELETE").then((e=>{if(j("success"),"notifications"===f)setTimeout((()=>b("/inbox")),750);else{if("comments"===f)return void setTimeout((()=>{y(),v.current.close()}),750);setTimeout((()=>b("/manage/".concat("interests"!==f?f:"categories"))),750)}})).catch((e=>{j("failure"),M(e.message)}))),children:Object(p.jsx)(i.a,{...c.a.delete})})]})]}),w&&Object(p.jsxs)("h3",{className:"barlow-condensed f3",children:["started"===w&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(i.a,{...c.a.processing}),"\u2026"]}),"success"===w&&Object(p.jsx)(i.a,{...c.a["success_".concat(f)]}),"failure"===w&&Object(p.jsx)(i.a,{...c.a["failure_".concat(f)]})]}),"failure"===w&&Object(p.jsx)("p",{children:x&&c.a["".concat(x,"Error")]&&Object(p.jsx)(i.a,{...c.a["".concat(x,"Error")]})||x})]})]})})}},1947:function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return l}));var n=r(1),a=r(10),s=r(29),i=r(1987),o=r.n(i);const c=()=>{const[e,t]=Object(n.useState)(!1),[r,a]=Object(n.useState)(null);return[r,e,Object(n.useCallback)(((e,r,n)=>{if(e&&r&&n){new Promise(((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>{n.result?t(n.result):r(Error("Failed converting to base64"))}})).then((i=>{const c=JSON.stringify({mime:e.type,data:i.split("base64,")[1],filename:(l=e.name,u=e.type,-1===l.lastIndexOf(".")&&(l="".concat(l,".").concat(u.split("/")[1])),"".concat(o()(l.substr(0,l.lastIndexOf(".")))).concat(l.substr(l.lastIndexOf("."))))});var l,u;t(!0),Object(s.d)("system/image-upload/",c,n).then((e=>{r(e.url),t(!1),a(null)})).catch((e=>{a(e),t(!1)}))}),(e=>{a(e)}))}}),[])]},l=e=>{const t=Object(a.d)((e=>e.auth.token)),[r,s,i]=c();return[r,s,Object(n.useCallback)((r=>{r.forEach((async r=>await i(r,e,t)))}),[t,i,e])]}},1950:function(e,t,r){"use strict";var n=r(20);t.a=Object(n.b)({createProject:{id:"management.projects.create.title",defaultMessage:"Create new project"},cloneProject:{id:"management.projects.clone.message",defaultMessage:"The new project will be a clone of the project #{id} ({name})."},clone:{id:"management.projects.create.clone",defaultMessage:"Clone"},areaSize:{id:"management.projects.create.area_size",defaultMessage:"Area size: {area} km{sq}"},areaOverLimitError:{id:"management.projects.create.area_error",defaultMessage:"Project area is higher than {n} squared kilometers."},taskNumber:{id:"management.projects.create.tasks",defaultMessage:"Number of tasks: {n}"},step1:{id:"management.projects.create.steps.1",defaultMessage:"Step 1: define area"},step2:{id:"management.projects.create.steps.2",defaultMessage:"Step 2: set tasks sizes"},step3:{id:"management.projects.create.steps.3",defaultMessage:"Step 3: trim task grid"},step4:{id:"management.projects.create.steps.4",defaultMessage:"Step 4: review"},name:{id:"management.projects.create.review_tasks.name",defaultMessage:"Name"},organization:{id:"management.projects.create.review_tasks.organization",defaultMessage:"Organization"},creationFailed:{id:"management.projects.create.review_tasks.failure.message",defaultMessage:"It was not possible to save your project due to an error: {error}"},create:{id:"management.projects.create.review_tasks.button.create",defaultMessage:"Create"},reviewTaskNumberMessage:{id:"management.projects.create.review_tasks.number",defaultMessage:"Your project will be created with {n} tasks."},task:{id:"management.projects.create.review_tasks.task",defaultMessage:"task"},tasks:{id:"management.projects.create.review_tasks.tasks",defaultMessage:"tasks"},trimTasksDescriptionLine1:{id:"management.projects.create.trim_tasks.description.1",defaultMessage:"Trim the task grid to the area of interest (optional)."},trimTasksDescriptionLine2:{id:"management.projects.create.trim_tasks.description.2",defaultMessage:"You can keep the current tasks or trim the area for your project. This can take some time to execute."},trimToAOI:{id:"management.projects.create.trim_tasks.trim_to_aoi",defaultMessage:"Trim the tasks to define the exact Area of Interest for mapping."},tinyTasks:{id:"management.projects.create.trim_tasks.tiny_tasks",defaultMessage:"{number, plural, one {There is # task smaller than {area}m\xb2. Would you like to discard it?} other {There are # tasks smaller than {area}m\xb2. Would you like to discard them?}}"},discard:{id:"management.projects.create.trim_tasks.tiny_tasks.discard",defaultMessage:"Discard"},taskSizes:{id:"management.projects.create.task_sizes.description",defaultMessage:"General task size"},smaller:{id:"management.projects.create.task_sizes.smaller",defaultMessage:"Smaller"},larger:{id:"management.projects.create.task_sizes.larger",defaultMessage:"Larger"},invalidFile:{id:"management.projects.create.errors.invalid",defaultMessage:"It was not possible to read the geometries on the file. Verify it and upload again."},unsupportedGeom:{id:"management.projects.create.errors.unsupported_geom",defaultMessage:"Unsupported geometry type {geometry}"},noFeatureCollection:{id:"management.projects.create.errors.no_featurecollection",defaultMessage:"type field is not FeatureCollection"},closedLinestring:{id:"management.projects.create.errors.closed_linestring",defaultMessage:"Points do not form a closed linestring"},noGeometry:{id:"management.projects.create.errors.no_geometry",defaultMessage:"You need to define the project's area of interest."},noOrganization:{id:"management.projects.create.errors.no_organization",defaultMessage:"Organization is a required field."},fileSize:{id:"management.projects.create.errors.fileSize",defaultMessage:"We only accept files up to {fileSize} MB. Please reduce the size of your file and try again."},splitTaskDescription:{id:"management.projects.create.split_task.description",defaultMessage:"Make tasks smaller by clicking on specific tasks or drawing an area on the map."},reset:{id:"management.projects.create.reset.button",defaultMessage:"Reset"},showProjectsAOILayer:{id:"management.projects.create.show_aois",defaultMessage:"Show existing projects AoIs"},disabledAOILayer:{id:"management.projects.create.show_aois.disabled",defaultMessage:"Zoom in to be able to activate the visualization of other projects' areas of interest."},enableAOILayer:{id:"management.projects.create.show_aois.enable",defaultMessage:"Enable the visualization of the existing projects' areas of interest."},colorLegend:{id:"management.projects.create.show_aois.legend",defaultMessage:"Color legend:"},taskNumberMessage:{id:"management.projects.create.split.tasks.number",defaultMessage:"A new project will be created with {n} tasks."},taskAreaMessage:{id:"management.projects.create.split.tasks.area",defaultMessage:"The size of each task is approximately {area} km{sq}."},splitByDrawing:{id:"management.projects.create.split_task.draw.button",defaultMessage:"Draw area to split"},splitByClicking:{id:"management.projects.create.split_task.click.button",defaultMessage:"Click to split"},uploadError:{id:"management.projects.create.upload_file.error",defaultMessage:"Error when importing geometry. Verify if the file you uploaded is correct."},backToPrevious:{id:"management.projects.create.button.back",defaultMessage:"Back to previous"},next:{id:"management.projects.create.button.next",defaultMessage:"Next"},trim:{id:"management.projects.create.button.trim",defaultMessage:"Trim"},trimError:{id:"management.projects.create.trimError",defaultMessage:"An error occured while trimming the geometry."},SelfIntersectingAOIError:{id:"management.projects.create.SelfIntersectingAOIError",defaultMessage:"Invalid geometry - polygon is self intersecting."},draw:{id:"management.projects.create.button.draw",defaultMessage:"Draw"},selectFile:{id:"management.projects.create.button.select_file",defaultMessage:"Select file"},arbitraryTasks:{id:"management.projects.create.arbitrary_tasks",defaultMessage:"Set tasks using uploaded polygons"},defineAreaDescription:{id:"management.projects.create.draw.description",defaultMessage:"Draw the Area of Interest on the map or import a file."},importDescription:{id:"management.projects.create.upload.description",defaultMessage:"The supported file formats are: GeoJSON, KML, OSM or zipped Shapefile. You can drag and drop a file over the map to import it."}})},1963:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return i}));r(1922);function n(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function a(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function s(e){return"Feature"===e.type?e.geometry:e}function i(e,t){return"FeatureCollection"===e.type?"FeatureCollection":"GeometryCollection"===e.type?"GeometryCollection":"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type}},1964:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(1);const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const[r,a]=Object(n.useState)("idle"),[s,i]=Object(n.useState)(null),[o,c]=Object(n.useState)(null),l=Object(n.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return a("pending"),i(null),c(null),e(t).then((e=>{i(e),a("success")})).catch((e=>{c(e),a("error")}))}),[e]);return Object(n.useEffect)((()=>{t&&l()}),[l,t]),{execute:l,status:r,value:s,error:o}}},1976:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(9);function a(e,t){let r=[{label:"RapiD",value:"RAPID",url:n.P},{label:"iD Editor",value:"ID",url:n.n},{label:"JOSM",value:"JOSM",url:"http://127.0.0.1:8111"},{label:"Potlatch 2",value:"POTLATCH_2",url:n.N},{label:"Field Papers",value:"FIELD_PAPERS",url:"http://fieldpapers.org/compose"}];return e&&(r=r.filter((t=>e.includes(t.value)))),t&&e.includes("CUSTOM")&&r.push({label:t.name,value:"CUSTOM",url:t.url}),r}},1981:function(e,t,r){},1985:function(e,t,r){!function(e,t,r,n,a,s,i,o,c,l,u,d,h,p,f,m,g,y,b,v,_,w,j,x,M,O,k,C,E,S,N,I,D,T,A,P,L,R,F,B,U,z,Y,G,W,V,q,H,K,Z,J,Q,X,$,ee,te,re,ne,ae,se,ie,oe,ce,le){"use strict";function ue(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var de=ue(t),he=ue(n),pe=ue(a),fe=ue(s),me=ue(i),ge=ue(o),ye=ue(c),be=ue(l),ve=ue(u),_e=ue(d),we=ue(h),je=ue(p),xe=ue(f),Me=ue(m),Oe=ue(g),ke=ue(y),Ce=ue(b),Ee=ue(v),Se=ue(_),Ne=ue(w),Ie=ue(j),De=ue(x),Te=ue(M),Ae=ue(O),Pe=ue(k),Le=ue(C),Re=ue(E),Fe=ue(S),Be=ue(N),Ue=ue(I),ze=ue(D),Ye=ue(T),Ge=ue(A),We=ue(P),Ve=ue(L),qe=ue(R),He=ue(F),Ke=ue(B),Ze=ue(U),Je=ue(z),Qe=ue(Y),Xe=ue(G),$e=ue(W),et=ue(V),tt=ue(H),rt=ue(K),nt=ue(Z),at=ue(J),st=ue(Q),it=ue(X),ot=ue($),ct=ue(ee),lt=ue(te),ut=ue(re),dt=ue(ne),ht=ue(ae),pt=ue(se),ft=ue(ie),mt=ue(oe),gt=ue(le);function yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(r),!0).forEach((function(t){xt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vt(e){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vt(e)}function _t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Dt(n.key),n)}}function jt(e,t,r){return t&&wt(e.prototype,t),r&&wt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function xt(e,t,r){return(t=Dt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mt(){return Mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mt.apply(this,arguments)}function Ot(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ct(e,t)}function kt(e){return kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kt(e)}function Ct(e,t){return Ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ct(e,t)}function Et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function St(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=kt(e);if(t){var a=kt(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Et(e)}(this,r)}}function Nt(e){return function(e){if(Array.isArray(e))return It(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return It(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?It(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dt(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var Tt=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},At=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Pt={p:At,P:function(e,t){var r,n=e.match(/(P+)(p+)?/)||[],a=n[1],s=n[2];if(!s)return Tt(e,t);switch(a){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",Tt(a,t)).replace("{{time}}",At(s,t))}},Lt=12,Rt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function Ft(e){var t=e?"string"==typeof e||e instanceof String?pt.default(e):dt.default(e):new Date;return Bt(t)?t:null}function Bt(e,t){return t=t||new Date("1/1/1000"),fe.default(e)&&!lt.default(e,t)}function Ut(e,t,r){if("en"===r)return me.default(e,t,{awareOfUnicodeTokens:!0});var n=tr(r);return r&&!n&&console.warn('A locale object was not found for the provided string ["'.concat(r,'"].')),!n&&er()&&tr(er())&&(n=tr(er())),me.default(e,t,{locale:n||null,awareOfUnicodeTokens:!0})}function zt(e,t){var r=t.dateFormat,n=t.locale;return e&&Ut(e,Array.isArray(r)?r[0]:r,n)||""}function Yt(e,t){var r=t.hour,n=void 0===r?0:r,a=t.minute,s=void 0===a?0:a,i=t.second,o=void 0===i?0:i;return Ue.default(Be.default(Fe.default(e,o),s),n)}function Gt(e,t,r){var n=tr(t||er());return Je.default(e,{locale:n,weekStartsOn:r})}function Wt(e){return Qe.default(e)}function Vt(e){return $e.default(e)}function qt(e){return Xe.default(e)}function Ht(){return Ze.default(Ft())}function Kt(e,t){return e&&t?it.default(e,t):!e&&!t}function Zt(e,t){return e&&t?st.default(e,t):!e&&!t}function Jt(e,t){return e&&t?ot.default(e,t):!e&&!t}function Qt(e,t){return e&&t?at.default(e,t):!e&&!t}function Xt(e,t){return e&&t?nt.default(e,t):!e&&!t}function $t(e,t,r){var n,a=Ze.default(t),s=et.default(r);try{n=ut.default(e,{start:a,end:s})}catch(e){n=!1}return n}function er(){return("undefined"!=typeof window?window:globalThis).__localeId__}function tr(e){if("string"==typeof e){var t="undefined"!=typeof window?window:globalThis;return t.__localeData__?t.__localeData__[e]:null}return e}function rr(e,t){return Ut(ze.default(Ft(),e),"LLLL",t)}function nr(e,t){return Ut(ze.default(Ft(),e),"LLL",t)}function ar(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.minDate,n=t.maxDate,a=t.excludeDates,s=t.excludeDateIntervals,i=t.includeDates,o=t.includeDateIntervals,c=t.filterDate;return hr(e,{minDate:r,maxDate:n})||a&&a.some((function(t){return Qt(e,t)}))||s&&s.some((function(t){var r=t.start,n=t.end;return ut.default(e,{start:r,end:n})}))||i&&!i.some((function(t){return Qt(e,t)}))||o&&!o.some((function(t){var r=t.start,n=t.end;return ut.default(e,{start:r,end:n})}))||c&&!c(Ft(e))||!1}function sr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.excludeDates,n=t.excludeDateIntervals;return n&&n.length>0?n.some((function(t){var r=t.start,n=t.end;return ut.default(e,{start:r,end:n})})):r&&r.some((function(t){return Qt(e,t)}))||!1}function ir(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.minDate,n=t.maxDate,a=t.excludeDates,s=t.includeDates,i=t.filterDate;return hr(e,{minDate:Qe.default(r),maxDate:tt.default(n)})||a&&a.some((function(t){return Zt(e,t)}))||s&&!s.some((function(t){return Zt(e,t)}))||i&&!i(Ft(e))||!1}function or(e,t,r,n){var a=Le.default(e),s=Ae.default(e),i=Le.default(t),o=Ae.default(t),c=Le.default(n);return a===i&&a===c?s<=r&&r<=o:a<i?c===a&&s<=r||c===i&&o>=r||c<i&&c>a:void 0}function cr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.minDate,n=t.maxDate,a=t.excludeDates,s=t.includeDates,i=t.filterDate;return hr(e,{minDate:r,maxDate:n})||a&&a.some((function(t){return Jt(e,t)}))||s&&!s.some((function(t){return Jt(e,t)}))||i&&!i(Ft(e))||!1}function lr(e,t,r){if(!fe.default(t)||!fe.default(r))return!1;var n=Le.default(t),a=Le.default(r);return n<=e&&a>=e}function ur(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.minDate,n=t.maxDate,a=t.excludeDates,s=t.includeDates,i=t.filterDate,o=new Date(e,0,1);return hr(o,{minDate:$e.default(r),maxDate:rt.default(n)})||a&&a.some((function(e){return Kt(o,e)}))||s&&!s.some((function(e){return Kt(o,e)}))||i&&!i(Ft(o))||!1}function dr(e,t,r,n){var a=Le.default(e),s=Pe.default(e),i=Le.default(t),o=Pe.default(t),c=Le.default(n);return a===i&&a===c?s<=r&&r<=o:a<i?c===a&&s<=r||c===i&&o>=r||c<i&&c>a:void 0}function hr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.minDate,n=t.maxDate;return r&&qe.default(e,r)<0||n&&qe.default(e,n)>0}function pr(e,t){return t.some((function(t){return Ne.default(t)===Ne.default(e)&&Se.default(t)===Se.default(e)}))}function fr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.excludeTimes,n=t.includeTimes,a=t.filterTime;return r&&pr(e,r)||n&&!pr(e,n)||a&&!a(e)||!1}function mr(e,t){var r=t.minTime,n=t.maxTime;if(!r||!n)throw new Error("Both minTime and maxTime props required");var a,s=Ft(),i=Ue.default(Be.default(s,Se.default(e)),Ne.default(e)),o=Ue.default(Be.default(s,Se.default(r)),Ne.default(r)),c=Ue.default(Be.default(s,Se.default(n)),Ne.default(n));try{a=!ut.default(i,{start:o,end:c})}catch(e){a=!1}return a}function gr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.minDate,n=t.includeDates,a=Oe.default(e,1);return r&&He.default(r,a)>0||n&&n.every((function(e){return He.default(e,a)>0}))||!1}function yr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.maxDate,n=t.includeDates,a=_e.default(e,1);return r&&He.default(a,r)>0||n&&n.every((function(e){return He.default(a,e)>0}))||!1}function br(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.minDate,n=t.includeDates,a=Ce.default(e,1);return r&&Ke.default(r,a)>0||n&&n.every((function(e){return Ke.default(e,a)>0}))||!1}function vr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.maxDate,n=t.includeDates,a=je.default(e,1);return r&&Ke.default(a,r)>0||n&&n.every((function(e){return Ke.default(a,e)>0}))||!1}function _r(e){var t=e.minDate,r=e.includeDates;if(r&&t){var n=r.filter((function(e){return qe.default(e,t)>=0}));return We.default(n)}return r?We.default(r):t}function wr(e){var t=e.maxDate,r=e.includeDates;if(r&&t){var n=r.filter((function(e){return qe.default(e,t)<=0}));return Ve.default(n)}return r?Ve.default(r):t}function jr(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"react-datepicker__day--highlighted",r=new Map,n=0,a=e.length;n<a;n++){var s=e[n];if(pe.default(s)){var i=Ut(s,"MM.dd.yyyy"),o=r.get(i)||[];o.includes(t)||(o.push(t),r.set(i,o))}else if("object"===vt(s)){var c=Object.keys(s),l=c[0],u=s[c[0]];if("string"==typeof l&&u.constructor===Array)for(var d=0,h=u.length;d<h;d++){var p=Ut(u[d],"MM.dd.yyyy"),f=r.get(p)||[];f.includes(l)||(f.push(l),r.set(p,f))}}}return r}function xr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"react-datepicker__day--holidays",r=new Map;return e.forEach((function(e){var n=e.date,a=e.holidayName;if(pe.default(n)){var s=Ut(n,"MM.dd.yyyy"),i=r.get(s)||{};if(!("className"in i)||i.className!==t||(o=i.holidayNames,c=[a],o.length!==c.length||!o.every((function(e,t){return e===c[t]})))){var o,c;i.className=t;var l=i.holidayNames;i.holidayNames=l?[].concat(Nt(l),[a]):[a],r.set(s,i)}}})),r}function Mr(e,t,r,n,a){for(var s=a.length,i=[],o=0;o<s;o++){var c=ge.default(ye.default(e,Ne.default(a[o])),Se.default(a[o])),l=ge.default(e,(r+1)*n);ct.default(c,t)&&lt.default(c,l)&&i.push(a[o])}return i}function Or(e){return e<10?"0".concat(e):"".concat(e)}function kr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lt,r=Math.ceil(Le.default(e)/t)*t;return{startPeriod:r-(t-1),endPeriod:r}}function Cr(e){var t=e.getSeconds(),r=e.getMilliseconds();return dt.default(e.getTime()-1e3*t-r)}function Er(e,t,r,n){for(var a=[],s=0;s<2*t+1;s++){var i=e+t-s,o=!0;r&&(o=Le.default(r)<=i),n&&o&&(o=Le.default(n)>=i),o&&a.push(i)}return a}var Sr=function(e){Ot(n,e);var r=St(n);function n(e){var a;_t(this,n),xt(Et(a=r.call(this,e)),"renderOptions",(function(){var e=a.props.year,t=a.state.yearsList.map((function(t){return de.default.createElement("div",{className:e===t?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:t,onClick:a.onChange.bind(Et(a),t),"aria-selected":e===t?"true":void 0},e===t?de.default.createElement("span",{className:"react-datepicker__year-option--selected"},"\u2713"):"",t)})),r=a.props.minDate?Le.default(a.props.minDate):null,n=a.props.maxDate?Le.default(a.props.maxDate):null;return n&&a.state.yearsList.find((function(e){return e===n}))||t.unshift(de.default.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:a.incrementYears},de.default.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),r&&a.state.yearsList.find((function(e){return e===r}))||t.push(de.default.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:a.decrementYears},de.default.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),t})),xt(Et(a),"onChange",(function(e){a.props.onChange(e)})),xt(Et(a),"handleClickOutside",(function(){a.props.onCancel()})),xt(Et(a),"shiftYears",(function(e){var t=a.state.yearsList.map((function(t){return t+e}));a.setState({yearsList:t})})),xt(Et(a),"incrementYears",(function(){return a.shiftYears(1)})),xt(Et(a),"decrementYears",(function(){return a.shiftYears(-1)}));var s=e.yearDropdownItemNumber,i=e.scrollableYearDropdown,o=s||(i?10:5);return a.state={yearsList:Er(a.props.year,o,a.props.minDate,a.props.maxDate)},a.dropdownRef=t.createRef(),a}return jt(n,[{key:"componentDidMount",value:function(){var e=this.dropdownRef.current;if(e){var t=e.children?Array.from(e.children):null,r=t?t.find((function(e){return e.ariaSelected})):null;e.scrollTop=r?r.offsetTop+(r.clientHeight-e.clientHeight)/2:(e.scrollHeight-e.clientHeight)/2}}},{key:"render",value:function(){var e=he.default({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return de.default.createElement("div",{className:e,ref:this.dropdownRef},this.renderOptions())}}]),n}(de.default.Component),Nr=ft.default(Sr),Ir=function(e){Ot(r,e);var t=St(r);function r(){var e;_t(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return xt(Et(e=t.call.apply(t,[this].concat(a))),"state",{dropdownVisible:!1}),xt(Et(e),"renderSelectOptions",(function(){for(var t=e.props.minDate?Le.default(e.props.minDate):1900,r=e.props.maxDate?Le.default(e.props.maxDate):2100,n=[],a=t;a<=r;a++)n.push(de.default.createElement("option",{key:a,value:a},a));return n})),xt(Et(e),"onSelectChange",(function(t){e.onChange(t.target.value)})),xt(Et(e),"renderSelectMode",(function(){return de.default.createElement("select",{value:e.props.year,className:"react-datepicker__year-select",onChange:e.onSelectChange},e.renderSelectOptions())})),xt(Et(e),"renderReadView",(function(t){return de.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(t){return e.toggleDropdown(t)}},de.default.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),de.default.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},e.props.year))})),xt(Et(e),"renderDropdown",(function(){return de.default.createElement(Nr,{key:"dropdown",year:e.props.year,onChange:e.onChange,onCancel:e.toggleDropdown,minDate:e.props.minDate,maxDate:e.props.maxDate,scrollableYearDropdown:e.props.scrollableYearDropdown,yearDropdownItemNumber:e.props.yearDropdownItemNumber})})),xt(Et(e),"renderScrollMode",(function(){var t=e.state.dropdownVisible,r=[e.renderReadView(!t)];return t&&r.unshift(e.renderDropdown()),r})),xt(Et(e),"onChange",(function(t){e.toggleDropdown(),t!==e.props.year&&e.props.onChange(t)})),xt(Et(e),"toggleDropdown",(function(t){e.setState({dropdownVisible:!e.state.dropdownVisible},(function(){e.props.adjustDateOnChange&&e.handleYearChange(e.props.date,t)}))})),xt(Et(e),"handleYearChange",(function(t,r){e.onSelect(t,r),e.setOpen()})),xt(Et(e),"onSelect",(function(t,r){e.props.onSelect&&e.props.onSelect(t,r)})),xt(Et(e),"setOpen",(function(){e.props.setOpen&&e.props.setOpen(!0)})),e}return jt(r,[{key:"render",value:function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return de.default.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},e)}}]),r}(de.default.Component),Dr=function(e){Ot(r,e);var t=St(r);function r(){var e;_t(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return xt(Et(e=t.call.apply(t,[this].concat(a))),"isSelectedMonth",(function(t){return e.props.month===t})),xt(Et(e),"renderOptions",(function(){return e.props.monthNames.map((function(t,r){return de.default.createElement("div",{className:e.isSelectedMonth(r)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:t,onClick:e.onChange.bind(Et(e),r),"aria-selected":e.isSelectedMonth(r)?"true":void 0},e.isSelectedMonth(r)?de.default.createElement("span",{className:"react-datepicker__month-option--selected"},"\u2713"):"",t)}))})),xt(Et(e),"onChange",(function(t){return e.props.onChange(t)})),xt(Et(e),"handleClickOutside",(function(){return e.props.onCancel()})),e}return jt(r,[{key:"render",value:function(){return de.default.createElement("div",{className:"react-datepicker__month-dropdown"},this.renderOptions())}}]),r}(de.default.Component),Tr=ft.default(Dr),Ar=function(e){Ot(r,e);var t=St(r);function r(){var e;_t(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return xt(Et(e=t.call.apply(t,[this].concat(a))),"state",{dropdownVisible:!1}),xt(Et(e),"renderSelectOptions",(function(e){return e.map((function(e,t){return de.default.createElement("option",{key:t,value:t},e)}))})),xt(Et(e),"renderSelectMode",(function(t){return de.default.createElement("select",{value:e.props.month,className:"react-datepicker__month-select",onChange:function(t){return e.onChange(t.target.value)}},e.renderSelectOptions(t))})),xt(Et(e),"renderReadView",(function(t,r){return de.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:e.toggleDropdown},de.default.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),de.default.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},r[e.props.month]))})),xt(Et(e),"renderDropdown",(function(t){return de.default.createElement(Tr,{key:"dropdown",month:e.props.month,monthNames:t,onChange:e.onChange,onCancel:e.toggleDropdown})})),xt(Et(e),"renderScrollMode",(function(t){var r=e.state.dropdownVisible,n=[e.renderReadView(!r,t)];return r&&n.unshift(e.renderDropdown(t)),n})),xt(Et(e),"onChange",(function(t){e.toggleDropdown(),t!==e.props.month&&e.props.onChange(t)})),xt(Et(e),"toggleDropdown",(function(){return e.setState({dropdownVisible:!e.state.dropdownVisible})})),e}return jt(r,[{key:"render",value:function(){var e,t=this,r=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(e){return nr(e,t.props.locale)}:function(e){return rr(e,t.props.locale)});switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode(r);break;case"select":e=this.renderSelectMode(r)}return de.default.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},e)}}]),r}(de.default.Component);function Pr(e,t){for(var r=[],n=Wt(e),a=Wt(t);!ct.default(n,a);)r.push(Ft(n)),n=_e.default(n,1);return r}var Lr=function(e){Ot(r,e);var t=St(r);function r(e){var n;return _t(this,r),xt(Et(n=t.call(this,e)),"renderOptions",(function(){return n.state.monthYearsList.map((function(e){var t=Re.default(e),r=Kt(n.props.date,e)&&Zt(n.props.date,e);return de.default.createElement("div",{className:r?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:t,onClick:n.onChange.bind(Et(n),t),"aria-selected":r?"true":void 0},r?de.default.createElement("span",{className:"react-datepicker__month-year-option--selected"},"\u2713"):"",Ut(e,n.props.dateFormat,n.props.locale))}))})),xt(Et(n),"onChange",(function(e){return n.props.onChange(e)})),xt(Et(n),"handleClickOutside",(function(){n.props.onCancel()})),n.state={monthYearsList:Pr(n.props.minDate,n.props.maxDate)},n}return jt(r,[{key:"render",value:function(){var e=he.default({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return de.default.createElement("div",{className:e},this.renderOptions())}}]),r}(de.default.Component),Rr=ft.default(Lr),Fr=function(e){Ot(r,e);var t=St(r);function r(){var e;_t(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return xt(Et(e=t.call.apply(t,[this].concat(a))),"state",{dropdownVisible:!1}),xt(Et(e),"renderSelectOptions",(function(){for(var t=Wt(e.props.minDate),r=Wt(e.props.maxDate),n=[];!ct.default(t,r);){var a=Re.default(t);n.push(de.default.createElement("option",{key:a,value:a},Ut(t,e.props.dateFormat,e.props.locale))),t=_e.default(t,1)}return n})),xt(Et(e),"onSelectChange",(function(t){e.onChange(t.target.value)})),xt(Et(e),"renderSelectMode",(function(){return de.default.createElement("select",{value:Re.default(Wt(e.props.date)),className:"react-datepicker__month-year-select",onChange:e.onSelectChange},e.renderSelectOptions())})),xt(Et(e),"renderReadView",(function(t){var r=Ut(e.props.date,e.props.dateFormat,e.props.locale);return de.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:function(t){return e.toggleDropdown(t)}},de.default.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),de.default.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},r))})),xt(Et(e),"renderDropdown",(function(){return de.default.createElement(Rr,{key:"dropdown",date:e.props.date,dateFormat:e.props.dateFormat,onChange:e.onChange,onCancel:e.toggleDropdown,minDate:e.props.minDate,maxDate:e.props.maxDate,scrollableMonthYearDropdown:e.props.scrollableMonthYearDropdown,locale:e.props.locale})})),xt(Et(e),"renderScrollMode",(function(){var t=e.state.dropdownVisible,r=[e.renderReadView(!t)];return t&&r.unshift(e.renderDropdown()),r})),xt(Et(e),"onChange",(function(t){e.toggleDropdown();var r=Ft(parseInt(t));Kt(e.props.date,r)&&Zt(e.props.date,r)||e.props.onChange(r)})),xt(Et(e),"toggleDropdown",(function(){return e.setState({dropdownVisible:!e.state.dropdownVisible})})),e}return jt(r,[{key:"render",value:function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return de.default.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},e)}}]),r}(de.default.Component),Br=function(e){Ot(r,e);var t=St(r);function r(){var e;_t(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return xt(Et(e=t.call.apply(t,[this].concat(a))),"dayEl",de.default.createRef()),xt(Et(e),"handleClick",(function(t){!e.isDisabled()&&e.props.onClick&&e.props.onClick(t)})),xt(Et(e),"handleMouseEnter",(function(t){!e.isDisabled()&&e.props.onMouseEnter&&e.props.onMouseEnter(t)})),xt(Et(e),"handleOnKeyDown",(function(t){" "===t.key&&(t.preventDefault(),t.key="Enter"),e.props.handleOnKeyDown(t)})),xt(Et(e),"isSameDay",(function(t){return Qt(e.props.day,t)})),xt(Et(e),"isKeyboardSelected",(function(){return!e.props.disabledKeyboardNavigation&&!(e.isSameDay(e.props.selected)||e.isSameWeek(e.props.selected))&&(e.isSameDay(e.props.preSelection)||e.isSameWeek(e.props.preSelection))})),xt(Et(e),"isDisabled",(function(){return ar(e.props.day,e.props)})),xt(Et(e),"isExcluded",(function(){return sr(e.props.day,e.props)})),xt(Et(e),"isStartOfWeek",(function(){return Qt(e.props.day,Gt(e.props.day,e.props.locale,e.props.calendarStartDay))})),xt(Et(e),"isSameWeek",(function(t){return e.props.showWeekPicker&&Qt(t,Gt(e.props.day,e.props.locale,e.props.calendarStartDay))})),xt(Et(e),"getHighLightedClass",(function(){var t=e.props,r=t.day,n=t.highlightDates;if(!n)return!1;var a=Ut(r,"MM.dd.yyyy");return n.get(a)})),xt(Et(e),"getHolidaysClass",(function(){var t=e.props,r=t.day,n=t.holidays;if(!n)return!1;var a=Ut(r,"MM.dd.yyyy");return n.has(a)?[n.get(a).className]:void 0})),xt(Et(e),"isInRange",(function(){var t=e.props,r=t.day,n=t.startDate,a=t.endDate;return!(!n||!a)&&$t(r,n,a)})),xt(Et(e),"isInSelectingRange",(function(){var t,r=e.props,n=r.day,a=r.selectsStart,s=r.selectsEnd,i=r.selectsRange,o=r.selectsDisabledDaysInRange,c=r.startDate,l=r.endDate,u=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return!(!(a||s||i)||!u||!o&&e.isDisabled())&&(a&&l&&(lt.default(u,l)||Xt(u,l))?$t(n,u,l):(s&&c&&(ct.default(u,c)||Xt(u,c))||!(!i||!c||l||!ct.default(u,c)&&!Xt(u,c)))&&$t(n,c,u))})),xt(Et(e),"isSelectingRangeStart",(function(){var t;if(!e.isInSelectingRange())return!1;var r=e.props,n=r.day,a=r.startDate,s=r.selectsStart,i=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return Qt(n,s?i:a)})),xt(Et(e),"isSelectingRangeEnd",(function(){var t;if(!e.isInSelectingRange())return!1;var r=e.props,n=r.day,a=r.endDate,s=r.selectsEnd,i=r.selectsRange,o=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return Qt(n,s||i?o:a)})),xt(Et(e),"isRangeStart",(function(){var t=e.props,r=t.day,n=t.startDate,a=t.endDate;return!(!n||!a)&&Qt(n,r)})),xt(Et(e),"isRangeEnd",(function(){var t=e.props,r=t.day,n=t.startDate,a=t.endDate;return!(!n||!a)&&Qt(a,r)})),xt(Et(e),"isWeekend",(function(){var t=Ie.default(e.props.day);return 0===t||6===t})),xt(Et(e),"isAfterMonth",(function(){return void 0!==e.props.month&&(e.props.month+1)%12===Ae.default(e.props.day)})),xt(Et(e),"isBeforeMonth",(function(){return void 0!==e.props.month&&(Ae.default(e.props.day)+1)%12===e.props.month})),xt(Et(e),"isCurrentDay",(function(){return e.isSameDay(Ft())})),xt(Et(e),"isSelected",(function(){return e.isSameDay(e.props.selected)||e.isSameWeek(e.props.selected)})),xt(Et(e),"getClassNames",(function(t){var r,n=e.props.dayClassName?e.props.dayClassName(t):void 0;return he.default("react-datepicker__day",n,"react-datepicker__day--"+Ut(e.props.day,"ddd",r),{"react-datepicker__day--disabled":e.isDisabled(),"react-datepicker__day--excluded":e.isExcluded(),"react-datepicker__day--selected":e.isSelected(),"react-datepicker__day--keyboard-selected":e.isKeyboardSelected(),"react-datepicker__day--range-start":e.isRangeStart(),"react-datepicker__day--range-end":e.isRangeEnd(),"react-datepicker__day--in-range":e.isInRange(),"react-datepicker__day--in-selecting-range":e.isInSelectingRange(),"react-datepicker__day--selecting-range-start":e.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":e.isSelectingRangeEnd(),"react-datepicker__day--today":e.isCurrentDay(),"react-datepicker__day--weekend":e.isWeekend(),"react-datepicker__day--outside-month":e.isAfterMonth()||e.isBeforeMonth()},e.getHighLightedClass("react-datepicker__day--highlighted"),e.getHolidaysClass())})),xt(Et(e),"getAriaLabel",(function(){var t=e.props,r=t.day,n=t.ariaLabelPrefixWhenEnabled,a=void 0===n?"Choose":n,s=t.ariaLabelPrefixWhenDisabled,i=void 0===s?"Not available":s,o=e.isDisabled()||e.isExcluded()?i:a;return"".concat(o," ").concat(Ut(r,"PPPP",e.props.locale))})),xt(Et(e),"getTitle",(function(){var t=e.props,r=t.day,n=t.holidays,a=void 0===n?new Map:n,s=Ut(r,"MM.dd.yyyy");return a.has(s)&&a.get(s).holidayNames.length>0?a.get(s).holidayNames.join(", "):""})),xt(Et(e),"getTabIndex",(function(t,r){var n=t||e.props.selected,a=r||e.props.preSelection;return(!e.props.showWeekPicker||!e.props.showWeekNumber&&e.isStartOfWeek())&&(e.isKeyboardSelected()||e.isSameDay(n)&&Qt(a,n))?0:-1})),xt(Et(e),"handleFocusDay",(function(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!1;0===e.getTabIndex()&&!r.isInputFocused&&e.isSameDay(e.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(n=!0),e.props.inline&&!e.props.shouldFocusDayInline&&(n=!1),e.props.containerRef&&e.props.containerRef.current&&e.props.containerRef.current.contains(document.activeElement)&&document.activeElement.classList.contains("react-datepicker__day")&&(n=!0),e.props.monthShowsDuplicateDaysEnd&&e.isAfterMonth()&&(n=!1),e.props.monthShowsDuplicateDaysStart&&e.isBeforeMonth()&&(n=!1)),n&&(null===(t=e.dayEl.current)||void 0===t||t.focus({preventScroll:!0}))})),xt(Et(e),"renderDayContents",(function(){return e.props.monthShowsDuplicateDaysEnd&&e.isAfterMonth()||e.props.monthShowsDuplicateDaysStart&&e.isBeforeMonth()?null:e.props.renderDayContents?e.props.renderDayContents(De.default(e.props.day),e.props.day):De.default(e.props.day)})),xt(Et(e),"render",(function(){return de.default.createElement("div",{ref:e.dayEl,className:e.getClassNames(e.props.day),onKeyDown:e.handleOnKeyDown,onClick:e.handleClick,onMouseEnter:e.handleMouseEnter,tabIndex:e.getTabIndex(),"aria-label":e.getAriaLabel(),role:"option",title:e.getTitle(),"aria-disabled":e.isDisabled(),"aria-current":e.isCurrentDay()?"date":void 0,"aria-selected":e.isSelected()||e.isInRange()},e.renderDayContents(),""!==e.getTitle()&&de.default.createElement("span",{className:"holiday-overlay"},e.getTitle()))})),e}return jt(r,[{key:"componentDidMount",value:function(){this.handleFocusDay()}},{key:"componentDidUpdate",value:function(e){this.handleFocusDay(e)}}]),r}(de.default.Component),Ur=function(e){Ot(r,e);var t=St(r);function r(){var e;_t(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return xt(Et(e=t.call.apply(t,[this].concat(a))),"weekNumberEl",de.default.createRef()),xt(Et(e),"handleClick",(function(t){e.props.onClick&&e.props.onClick(t)})),xt(Et(e),"handleOnKeyDown",(function(t){" "===t.key&&(t.preventDefault(),t.key="Enter"),e.props.handleOnKeyDown(t)})),xt(Et(e),"isKeyboardSelected",(function(){return!e.props.disabledKeyboardNavigation&&!Qt(e.props.date,e.props.selected)&&Qt(e.props.date,e.props.preSelection)})),xt(Et(e),"getTabIndex",(function(){return e.props.showWeekPicker&&e.props.showWeekNumber&&(e.isKeyboardSelected()||Qt(e.props.date,e.props.selected)&&Qt(e.props.preSelection,e.props.selected))?0:-1})),xt(Et(e),"handleFocusWeekNumber",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!1;0===e.getTabIndex()&&!t.isInputFocused&&Qt(e.props.date,e.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(r=!0),e.props.inline&&!e.props.shouldFocusDayInline&&(r=!1),e.props.containerRef&&e.props.containerRef.current&&e.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(r=!0)),r&&e.weekNumberEl.current&&e.weekNumberEl.current.focus({preventScroll:!0})})),e}return jt(r,[{key:"componentDidMount",value:function(){this.handleFocusWeekNumber()}},{key:"componentDidUpdate",value:function(e){this.handleFocusWeekNumber(e)}},{key:"render",value:function(){var e=this.props,t=e.weekNumber,r=e.ariaLabelPrefix,n=void 0===r?"week ":r,a={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!e.onClick,"react-datepicker__week-number--selected":Qt(this.props.date,this.props.selected),"react-datepicker__week-number--keyboard-selected":this.isKeyboardSelected()};return de.default.createElement("div",{ref:this.weekNumberEl,className:he.default(a),"aria-label":"".concat(n," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},t)}}],[{key:"defaultProps",get:function(){return{ariaLabelPrefix:"week "}}}]),r}(de.default.Component),zr=function(e){Ot(r,e);var t=St(r);function r(){var e;_t(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return xt(Et(e=t.call.apply(t,[this].concat(a))),"handleDayClick",(function(t,r){e.props.onDayClick&&e.props.onDayClick(t,r)})),xt(Et(e),"handleDayMouseEnter",(function(t){e.props.onDayMouseEnter&&e.props.onDayMouseEnter(t)})),xt(Et(e),"handleWeekClick",(function(t,r,n){if("function"==typeof e.props.onWeekSelect&&e.props.onWeekSelect(t,r,n),e.props.showWeekPicker){var a=Gt(t,e.props.locale,e.props.calendarStartDay);e.handleDayClick(a,n)}e.props.shouldCloseOnSelect&&e.props.setOpen(!1)})),xt(Et(e),"formatWeekNumber",(function(t){return e.props.formatWeekNumber?e.props.formatWeekNumber(t):function(e,t){var r=t&&tr(t)||er()&&tr(er());return Te.default(e,r?{locale:r}:null)}(t)})),xt(Et(e),"renderDays",(function(){var t=Gt(e.props.day,e.props.locale,e.props.calendarStartDay),r=[],n=e.formatWeekNumber(t);if(e.props.showWeekNumber){var a=e.props.onWeekSelect||e.props.showWeekPicker?e.handleWeekClick.bind(Et(e),t,n):void 0;r.push(de.default.createElement(Ur,{key:"W",weekNumber:n,date:t,onClick:a,selected:e.props.selected,preSelection:e.props.preSelection,ariaLabelPrefix:e.props.ariaLabelPrefix,showWeekPicker:e.props.showWeekPicker,showWeekNumber:e.props.showWeekNumber,disabledKeyboardNavigation:e.props.disabledKeyboardNavigation,handleOnKeyDown:e.props.handleOnKeyDown,isInputFocused:e.props.isInputFocused,containerRef:e.props.containerRef}))}return r.concat([0,1,2,3,4,5,6].map((function(r){var n=be.default(t,r);return de.default.createElement(Br,{ariaLabelPrefixWhenEnabled:e.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:e.props.disabledDayAriaLabelPrefix,key:n.valueOf(),day:n,month:e.props.month,onClick:e.handleDayClick.bind(Et(e),n),onMouseEnter:e.handleDayMouseEnter.bind(Et(e),n),minDate:e.props.minDate,maxDate:e.props.maxDate,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDates:e.props.includeDates,includeDateIntervals:e.props.includeDateIntervals,highlightDates:e.props.highlightDates,holidays:e.props.holidays,selectingDate:e.props.selectingDate,filterDate:e.props.filterDate,preSelection:e.props.preSelection,selected:e.props.selected,selectsStart:e.props.selectsStart,selectsEnd:e.props.selectsEnd,selectsRange:e.props.selectsRange,showWeekPicker:e.props.showWeekPicker,showWeekNumber:e.props.showWeekNumber,selectsDisabledDaysInRange:e.props.selectsDisabledDaysInRange,startDate:e.props.startDate,endDate:e.props.endDate,dayClassName:e.props.dayClassName,renderDayContents:e.props.renderDayContents,disabledKeyboardNavigation:e.props.disabledKeyboardNavigation,handleOnKeyDown:e.props.handleOnKeyDown,isInputFocused:e.props.isInputFocused,containerRef:e.props.containerRef,inline:e.props.inline,shouldFocusDayInline:e.props.shouldFocusDayInline,monthShowsDuplicateDaysEnd:e.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:e.props.monthShowsDuplicateDaysStart,locale:e.props.locale})})))})),xt(Et(e),"startOfWeek",(function(){return Gt(e.props.day,e.props.locale,e.props.calendarStartDay)})),xt(Et(e),"isKeyboardSelected",(function(){return!e.props.disabledKeyboardNavigation&&!Qt(e.startOfWeek(),e.props.selected)&&Qt(e.startOfWeek(),e.props.preSelection)})),e}return jt(r,[{key:"render",value:function(){var e={"react-datepicker__week":!0,"react-datepicker__week--selected":Qt(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return de.default.createElement("div",{className:he.default(e)},this.renderDays())}}],[{key:"defaultProps",get:function(){return{shouldCloseOnSelect:!0}}}]),r}(de.default.Component),Yr="two_columns",Gr="three_columns",Wr="four_columns",Vr=xt(xt(xt({},Yr,{grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2}),Gr,{grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3}),Wr,{grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4});function qr(e,t){return e?Wr:t?Yr:Gr}var Hr=function(e){Ot(r,e);var t=St(r);function r(){var e;_t(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return xt(Et(e=t.call.apply(t,[this].concat(a))),"MONTH_REFS",Nt(Array(12)).map((function(){return de.default.createRef()}))),xt(Et(e),"QUARTER_REFS",Nt(Array(4)).map((function(){return de.default.createRef()}))),xt(Et(e),"isDisabled",(function(t){return ar(t,e.props)})),xt(Et(e),"isExcluded",(function(t){return sr(t,e.props)})),xt(Et(e),"handleDayClick",(function(t,r){e.props.onDayClick&&e.props.onDayClick(t,r,e.props.orderInDisplay)})),xt(Et(e),"handleDayMouseEnter",(function(t){e.props.onDayMouseEnter&&e.props.onDayMouseEnter(t)})),xt(Et(e),"handleMouseLeave",(function(){e.props.onMouseLeave&&e.props.onMouseLeave()})),xt(Et(e),"isRangeStartMonth",(function(t){var r=e.props,n=r.day,a=r.startDate,s=r.endDate;return!(!a||!s)&&Zt(ze.default(n,t),a)})),xt(Et(e),"isRangeStartQuarter",(function(t){var r=e.props,n=r.day,a=r.startDate,s=r.endDate;return!(!a||!s)&&Jt(Ye.default(n,t),a)})),xt(Et(e),"isRangeEndMonth",(function(t){var r=e.props,n=r.day,a=r.startDate,s=r.endDate;return!(!a||!s)&&Zt(ze.default(n,t),s)})),xt(Et(e),"isRangeEndQuarter",(function(t){var r=e.props,n=r.day,a=r.startDate,s=r.endDate;return!(!a||!s)&&Jt(Ye.default(n,t),s)})),xt(Et(e),"isInSelectingRangeMonth",(function(t){var r,n=e.props,a=n.day,s=n.selectsStart,i=n.selectsEnd,o=n.selectsRange,c=n.startDate,l=n.endDate,u=null!==(r=e.props.selectingDate)&&void 0!==r?r:e.props.preSelection;return!(!(s||i||o)||!u)&&(s&&l?or(u,l,t,a):(i&&c||!(!o||!c||l))&&or(c,u,t,a))})),xt(Et(e),"isSelectingMonthRangeStart",(function(t){var r;if(!e.isInSelectingRangeMonth(t))return!1;var n=e.props,a=n.day,s=n.startDate,i=n.selectsStart,o=ze.default(a,t),c=null!==(r=e.props.selectingDate)&&void 0!==r?r:e.props.preSelection;return Zt(o,i?c:s)})),xt(Et(e),"isSelectingMonthRangeEnd",(function(t){var r;if(!e.isInSelectingRangeMonth(t))return!1;var n=e.props,a=n.day,s=n.endDate,i=n.selectsEnd,o=n.selectsRange,c=ze.default(a,t),l=null!==(r=e.props.selectingDate)&&void 0!==r?r:e.props.preSelection;return Zt(c,i||o?l:s)})),xt(Et(e),"isInSelectingRangeQuarter",(function(t){var r,n=e.props,a=n.day,s=n.selectsStart,i=n.selectsEnd,o=n.selectsRange,c=n.startDate,l=n.endDate,u=null!==(r=e.props.selectingDate)&&void 0!==r?r:e.props.preSelection;return!(!(s||i||o)||!u)&&(s&&l?dr(u,l,t,a):(i&&c||!(!o||!c||l))&&dr(c,u,t,a))})),xt(Et(e),"isWeekInMonth",(function(t){var r=e.props.day,n=be.default(t,6);return Zt(t,r)||Zt(n,r)})),xt(Et(e),"isCurrentMonth",(function(e,t){return Le.default(e)===Le.default(Ft())&&t===Ae.default(Ft())})),xt(Et(e),"isCurrentQuarter",(function(e,t){return Le.default(e)===Le.default(Ft())&&t===Pe.default(Ft())})),xt(Et(e),"isSelectedMonth",(function(e,t,r){return Ae.default(r)===t&&Le.default(e)===Le.default(r)})),xt(Et(e),"isSelectedQuarter",(function(e,t,r){return Pe.default(e)===t&&Le.default(e)===Le.default(r)})),xt(Et(e),"renderWeeks",(function(){for(var t=[],r=e.props.fixedHeight,n=0,a=!1,s=Gt(Wt(e.props.day),e.props.locale,e.props.calendarStartDay);t.push(de.default.createElement(zr,{ariaLabelPrefix:e.props.weekAriaLabelPrefix,chooseDayAriaLabelPrefix:e.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:e.props.disabledDayAriaLabelPrefix,key:n,day:s,month:Ae.default(e.props.day),onDayClick:e.handleDayClick,onDayMouseEnter:e.handleDayMouseEnter,onWeekSelect:e.props.onWeekSelect,formatWeekNumber:e.props.formatWeekNumber,locale:e.props.locale,minDate:e.props.minDate,maxDate:e.props.maxDate,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDates:e.props.includeDates,includeDateIntervals:e.props.includeDateIntervals,inline:e.props.inline,shouldFocusDayInline:e.props.shouldFocusDayInline,highlightDates:e.props.highlightDates,holidays:e.props.holidays,selectingDate:e.props.selectingDate,filterDate:e.props.filterDate,preSelection:e.props.preSelection,selected:e.props.selected,selectsStart:e.props.selectsStart,selectsEnd:e.props.selectsEnd,selectsRange:e.props.selectsRange,selectsDisabledDaysInRange:e.props.selectsDisabledDaysInRange,showWeekNumber:e.props.showWeekNumbers,showWeekPicker:e.props.showWeekPicker,startDate:e.props.startDate,endDate:e.props.endDate,dayClassName:e.props.dayClassName,setOpen:e.props.setOpen,shouldCloseOnSelect:e.props.shouldCloseOnSelect,disabledKeyboardNavigation:e.props.disabledKeyboardNavigation,renderDayContents:e.props.renderDayContents,handleOnKeyDown:e.props.handleOnKeyDown,isInputFocused:e.props.isInputFocused,containerRef:e.props.containerRef,calendarStartDay:e.props.calendarStartDay,monthShowsDuplicateDaysEnd:e.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:e.props.monthShowsDuplicateDaysStart})),!a;){n++,s=ve.default(s,1);var i=r&&n>=6,o=!r&&!e.isWeekInMonth(s);if(i||o){if(!e.props.peekNextMonth)break;a=!0}}return t})),xt(Et(e),"onMonthClick",(function(t,r){e.handleDayClick(Wt(ze.default(e.props.day,r)),t)})),xt(Et(e),"onMonthMouseEnter",(function(t){e.handleDayMouseEnter(Wt(ze.default(e.props.day,t)))})),xt(Et(e),"handleMonthNavigation",(function(t,r){e.isDisabled(r)||e.isExcluded(r)||(e.props.setPreSelection(r),e.MONTH_REFS[t].current&&e.MONTH_REFS[t].current.focus())})),xt(Et(e),"onMonthKeyDown",(function(t,r){var n=e.props,a=n.selected,s=n.preSelection,i=n.disabledKeyboardNavigation,o=n.showTwoColumnMonthYearPicker,c=n.showFourColumnMonthYearPicker,l=n.setPreSelection,u=t.key;if("Tab"!==u&&t.preventDefault(),!i){var d=qr(c,o),h=Vr[d].verticalNavigationOffset,p=Vr[d].grid;switch(u){case"Enter":e.onMonthClick(t,r),l(a);break;case"ArrowRight":e.handleMonthNavigation(11===r?0:r+1,_e.default(s,1));break;case"ArrowLeft":e.handleMonthNavigation(0===r?11:r-1,Oe.default(s,1));break;case"ArrowUp":e.handleMonthNavigation(p[0].includes(r)?r+12-h:r-h,Oe.default(s,h));break;case"ArrowDown":e.handleMonthNavigation(p[p.length-1].includes(r)?r-12+h:r+h,_e.default(s,h))}}})),xt(Et(e),"onQuarterClick",(function(t,r){e.handleDayClick(qt(Ye.default(e.props.day,r)),t)})),xt(Et(e),"onQuarterMouseEnter",(function(t){e.handleDayMouseEnter(qt(Ye.default(e.props.day,t)))})),xt(Et(e),"handleQuarterNavigation",(function(t,r){e.isDisabled(r)||e.isExcluded(r)||(e.props.setPreSelection(r),e.QUARTER_REFS[t-1].current&&e.QUARTER_REFS[t-1].current.focus())})),xt(Et(e),"onQuarterKeyDown",(function(t,r){var n=t.key;if(!e.props.disabledKeyboardNavigation)switch(n){case"Enter":e.onQuarterClick(t,r),e.props.setPreSelection(e.props.selected);break;case"ArrowRight":e.handleQuarterNavigation(4===r?1:r+1,we.default(e.props.preSelection,1));break;case"ArrowLeft":e.handleQuarterNavigation(1===r?4:r-1,ke.default(e.props.preSelection,1))}})),xt(Et(e),"getMonthClassNames",(function(t){var r=e.props,n=r.day,a=r.startDate,s=r.endDate,i=r.selected,o=r.minDate,c=r.maxDate,l=r.preSelection,u=r.monthClassName,d=r.excludeDates,h=r.includeDates,p=u?u(ze.default(n,t)):void 0,f=ze.default(n,t);return he.default("react-datepicker__month-text","react-datepicker__month-".concat(t),p,{"react-datepicker__month-text--disabled":(o||c||d||h)&&ir(f,e.props),"react-datepicker__month-text--selected":e.isSelectedMonth(n,t,i),"react-datepicker__month-text--keyboard-selected":!e.props.disabledKeyboardNavigation&&Ae.default(l)===t,"react-datepicker__month-text--in-selecting-range":e.isInSelectingRangeMonth(t),"react-datepicker__month-text--in-range":or(a,s,t,n),"react-datepicker__month-text--range-start":e.isRangeStartMonth(t),"react-datepicker__month-text--range-end":e.isRangeEndMonth(t),"react-datepicker__month-text--selecting-range-start":e.isSelectingMonthRangeStart(t),"react-datepicker__month-text--selecting-range-end":e.isSelectingMonthRangeEnd(t),"react-datepicker__month-text--today":e.isCurrentMonth(n,t)})})),xt(Et(e),"getTabIndex",(function(t){var r=Ae.default(e.props.preSelection);return e.props.disabledKeyboardNavigation||t!==r?"-1":"0"})),xt(Et(e),"getQuarterTabIndex",(function(t){var r=Pe.default(e.props.preSelection);return e.props.disabledKeyboardNavigation||t!==r?"-1":"0"})),xt(Et(e),"getAriaLabel",(function(t){var r=e.props,n=r.chooseDayAriaLabelPrefix,a=void 0===n?"Choose":n,s=r.disabledDayAriaLabelPrefix,i=void 0===s?"Not available":s,o=r.day,c=ze.default(o,t),l=e.isDisabled(c)||e.isExcluded(c)?i:a;return"".concat(l," ").concat(Ut(c,"MMMM yyyy"))})),xt(Et(e),"getQuarterClassNames",(function(t){var r=e.props,n=r.day,a=r.startDate,s=r.endDate,i=r.selected,o=r.minDate,c=r.maxDate,l=r.preSelection,u=r.disabledKeyboardNavigation;return he.default("react-datepicker__quarter-text","react-datepicker__quarter-".concat(t),{"react-datepicker__quarter-text--disabled":(o||c)&&cr(Ye.default(n,t),e.props),"react-datepicker__quarter-text--selected":e.isSelectedQuarter(n,t,i),"react-datepicker__quarter-text--keyboard-selected":!u&&Pe.default(l)===t,"react-datepicker__quarter-text--in-selecting-range":e.isInSelectingRangeQuarter(t),"react-datepicker__quarter-text--in-range":dr(a,s,t,n),"react-datepicker__quarter-text--range-start":e.isRangeStartQuarter(t),"react-datepicker__quarter-text--range-end":e.isRangeEndQuarter(t)})})),xt(Et(e),"getMonthContent",(function(t){var r=e.props,n=r.showFullMonthYearPicker,a=r.renderMonthContent,s=r.locale,i=r.day,o=nr(t,s),c=rr(t,s);return a?a(t,o,c,i):n?c:o})),xt(Et(e),"getQuarterContent",(function(t){var r=e.props,n=r.renderQuarterContent,a=function(e,t){return Ut(Ye.default(Ft(),e),"QQQ",t)}(t,r.locale);return n?n(t,a):a})),xt(Et(e),"renderMonths",(function(){var t=e.props,r=t.showTwoColumnMonthYearPicker,n=t.showFourColumnMonthYearPicker,a=t.day,s=t.selected;return Vr[qr(n,r)].grid.map((function(t,r){return de.default.createElement("div",{className:"react-datepicker__month-wrapper",key:r},t.map((function(t,r){return de.default.createElement("div",{ref:e.MONTH_REFS[t],key:r,onClick:function(r){e.onMonthClick(r,t)},onKeyDown:function(r){e.onMonthKeyDown(r,t)},onMouseEnter:function(){return e.onMonthMouseEnter(t)},tabIndex:e.getTabIndex(t),className:e.getMonthClassNames(t),role:"option","aria-label":e.getAriaLabel(t),"aria-current":e.isCurrentMonth(a,t)?"date":void 0,"aria-selected":e.isSelectedMonth(a,t,s)},e.getMonthContent(t))})))}))})),xt(Et(e),"renderQuarters",(function(){var t=e.props,r=t.day,n=t.selected;return de.default.createElement("div",{className:"react-datepicker__quarter-wrapper"},[1,2,3,4].map((function(t,a){return de.default.createElement("div",{key:a,ref:e.QUARTER_REFS[a],role:"option",onClick:function(r){e.onQuarterClick(r,t)},onKeyDown:function(r){e.onQuarterKeyDown(r,t)},onMouseEnter:function(){return e.onQuarterMouseEnter(t)},className:e.getQuarterClassNames(t),"aria-selected":e.isSelectedQuarter(r,t,n),tabIndex:e.getQuarterTabIndex(t),"aria-current":e.isCurrentQuarter(r,t)?"date":void 0},e.getQuarterContent(t))})))})),xt(Et(e),"getClassNames",(function(){var t=e.props,r=t.selectingDate,n=t.selectsStart,a=t.selectsEnd,s=t.showMonthYearPicker,i=t.showQuarterYearPicker,o=t.showWeekPicker;return he.default("react-datepicker__month",{"react-datepicker__month--selecting-range":r&&(n||a)},{"react-datepicker__monthPicker":s},{"react-datepicker__quarterPicker":i},{"react-datepicker__weekPicker":o})})),e}return jt(r,[{key:"render",value:function(){var e=this.props,t=e.showMonthYearPicker,r=e.showQuarterYearPicker,n=e.day,a=e.ariaLabelPrefix,s=void 0===a?"month ":a;return de.default.createElement("div",{className:this.getClassNames(),onMouseLeave:this.handleMouseLeave,"aria-label":"".concat(s," ").concat(Ut(n,"yyyy-MM")),role:"listbox"},t?this.renderMonths():r?this.renderQuarters():this.renderWeeks())}}]),r}(de.default.Component),Kr=function(e){Ot(r,e);var t=St(r);function r(){var e;_t(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return xt(Et(e=t.call.apply(t,[this].concat(a))),"state",{height:null}),xt(Et(e),"scrollToTheSelectedTime",(function(){requestAnimationFrame((function(){e.list&&(e.list.scrollTop=e.centerLi&&r.calcCenterPosition(e.props.monthRef?e.props.monthRef.clientHeight-e.header.clientHeight:e.list.clientHeight,e.centerLi))}))})),xt(Et(e),"handleClick",(function(t){(e.props.minTime||e.props.maxTime)&&mr(t,e.props)||(e.props.excludeTimes||e.props.includeTimes||e.props.filterTime)&&fr(t,e.props)||e.props.onChange(t)})),xt(Et(e),"isSelectedTime",(function(t){return e.props.selected&&(r=t,Cr(e.props.selected).getTime()===Cr(r).getTime());var r})),xt(Et(e),"isDisabledTime",(function(t){return(e.props.minTime||e.props.maxTime)&&mr(t,e.props)||(e.props.excludeTimes||e.props.includeTimes||e.props.filterTime)&&fr(t,e.props)})),xt(Et(e),"liClasses",(function(t){var r=["react-datepicker__time-list-item",e.props.timeClassName?e.props.timeClassName(t):void 0];return e.isSelectedTime(t)&&r.push("react-datepicker__time-list-item--selected"),e.isDisabledTime(t)&&r.push("react-datepicker__time-list-item--disabled"),e.props.injectTimes&&(60*Ne.default(t)+Se.default(t))%e.props.intervals!=0&&r.push("react-datepicker__time-list-item--injected"),r.join(" ")})),xt(Et(e),"handleOnKeyDown",(function(t,r){" "===t.key&&(t.preventDefault(),t.key="Enter"),"ArrowUp"!==t.key&&"ArrowLeft"!==t.key||!t.target.previousSibling||(t.preventDefault(),t.target.previousSibling.focus()),"ArrowDown"!==t.key&&"ArrowRight"!==t.key||!t.target.nextSibling||(t.preventDefault(),t.target.nextSibling.focus()),"Enter"===t.key&&e.handleClick(r),e.props.handleOnKeyDown(t)})),xt(Et(e),"renderTimes",(function(){for(var t,r=[],n=e.props.format?e.props.format:"p",a=e.props.intervals,s=e.props.selected||e.props.openToDate||Ft(),i=(t=s,Ze.default(t)),o=e.props.injectTimes&&e.props.injectTimes.sort((function(e,t){return e-t})),c=60*function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+r-+t)/36e5)}(s),l=c/a,u=0;u<l;u++){var d=ge.default(i,u*a);if(r.push(d),o){var h=Mr(i,d,u,a,o);r=r.concat(h)}}var p=r.reduce((function(e,t){return t.getTime()<=s.getTime()?t:e}),r[0]);return r.map((function(t,r){return de.default.createElement("li",{key:r,onClick:e.handleClick.bind(Et(e),t),className:e.liClasses(t),ref:function(r){t===p&&(e.centerLi=r)},onKeyDown:function(r){e.handleOnKeyDown(r,t)},tabIndex:t===p?0:-1,role:"option","aria-selected":e.isSelectedTime(t)?"true":void 0,"aria-disabled":e.isDisabledTime(t)?"true":void 0},Ut(t,n,e.props.locale))}))})),e}return jt(r,[{key:"componentDidMount",value:function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})}},{key:"render",value:function(){var e=this,t=this.state.height;return de.default.createElement("div",{className:"react-datepicker__time-container ".concat(this.props.todayButton?"react-datepicker__time-container--with-today-button":"")},de.default.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(this.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(t){e.header=t}},de.default.createElement("div",{className:"react-datepicker-time__header"},this.props.timeCaption)),de.default.createElement("div",{className:"react-datepicker__time"},de.default.createElement("div",{className:"react-datepicker__time-box"},de.default.createElement("ul",{className:"react-datepicker__time-list",ref:function(t){e.list=t},style:t?{height:t}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))}}],[{key:"defaultProps",get:function(){return{intervals:30,onTimeChange:function(){},todayButton:null,timeCaption:"Time"}}}]),r}(de.default.Component);xt(Kr,"calcCenterPosition",(function(e,t){return t.offsetTop-(e/2-t.clientHeight/2)}));var Zr=function(e){Ot(r,e);var t=St(r);function r(e){var n;return _t(this,r),xt(Et(n=t.call(this,e)),"YEAR_REFS",Nt(Array(n.props.yearItemNumber)).map((function(){return de.default.createRef()}))),xt(Et(n),"isDisabled",(function(e){return ar(e,n.props)})),xt(Et(n),"isExcluded",(function(e){return sr(e,n.props)})),xt(Et(n),"selectingDate",(function(){var e;return null!==(e=n.props.selectingDate)&&void 0!==e?e:n.props.preSelection})),xt(Et(n),"updateFocusOnPaginate",(function(e){var t=function(){this.YEAR_REFS[e].current.focus()}.bind(Et(n));window.requestAnimationFrame(t)})),xt(Et(n),"handleYearClick",(function(e,t){n.props.onDayClick&&n.props.onDayClick(e,t)})),xt(Et(n),"handleYearNavigation",(function(e,t){var r=n.props,a=r.date,s=r.yearItemNumber,i=kr(a,s).startPeriod;n.isDisabled(t)||n.isExcluded(t)||(n.props.setPreSelection(t),e-i==-1?n.updateFocusOnPaginate(s-1):e-i===s?n.updateFocusOnPaginate(0):n.YEAR_REFS[e-i].current.focus())})),xt(Et(n),"isSameDay",(function(e,t){return Qt(e,t)})),xt(Et(n),"isCurrentYear",(function(e){return e===Le.default(Ft())})),xt(Et(n),"isRangeStart",(function(e){return n.props.startDate&&n.props.endDate&&Kt(Ge.default(Ft(),e),n.props.startDate)})),xt(Et(n),"isRangeEnd",(function(e){return n.props.startDate&&n.props.endDate&&Kt(Ge.default(Ft(),e),n.props.endDate)})),xt(Et(n),"isInRange",(function(e){return lr(e,n.props.startDate,n.props.endDate)})),xt(Et(n),"isInSelectingRange",(function(e){var t=n.props,r=t.selectsStart,a=t.selectsEnd,s=t.selectsRange,i=t.startDate,o=t.endDate;return!(!(r||a||s)||!n.selectingDate())&&(r&&o?lr(e,n.selectingDate(),o):(a&&i||!(!s||!i||o))&&lr(e,i,n.selectingDate()))})),xt(Et(n),"isSelectingRangeStart",(function(e){if(!n.isInSelectingRange(e))return!1;var t=n.props,r=t.startDate,a=t.selectsStart;return Kt(Ge.default(Ft(),e),a?n.selectingDate():r)})),xt(Et(n),"isSelectingRangeEnd",(function(e){if(!n.isInSelectingRange(e))return!1;var t=n.props,r=t.endDate,a=t.selectsEnd,s=t.selectsRange;return Kt(Ge.default(Ft(),e),a||s?n.selectingDate():r)})),xt(Et(n),"isKeyboardSelected",(function(e){var t=Vt(Ge.default(n.props.date,e));return!n.props.disabledKeyboardNavigation&&!n.props.inline&&!Qt(t,Vt(n.props.selected))&&Qt(t,Vt(n.props.preSelection))})),xt(Et(n),"onYearClick",(function(e,t){var r=n.props.date;n.handleYearClick(Vt(Ge.default(r,t)),e)})),xt(Et(n),"onYearKeyDown",(function(e,t){var r=e.key;if(!n.props.disabledKeyboardNavigation)switch(r){case"Enter":n.onYearClick(e,t),n.props.setPreSelection(n.props.selected);break;case"ArrowRight":n.handleYearNavigation(t+1,je.default(n.props.preSelection,1));break;case"ArrowLeft":n.handleYearNavigation(t-1,Ce.default(n.props.preSelection,1))}})),xt(Et(n),"getYearClassNames",(function(e){var t=n.props,r=t.minDate,a=t.maxDate,s=t.selected,i=t.excludeDates,o=t.includeDates,c=t.filterDate;return he.default("react-datepicker__year-text",{"react-datepicker__year-text--selected":e===Le.default(s),"react-datepicker__year-text--disabled":(r||a||i||o||c)&&ur(e,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(e),"react-datepicker__year-text--range-start":n.isRangeStart(e),"react-datepicker__year-text--range-end":n.isRangeEnd(e),"react-datepicker__year-text--in-range":n.isInRange(e),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(e),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(e),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(e),"react-datepicker__year-text--today":n.isCurrentYear(e)})})),xt(Et(n),"getYearTabIndex",(function(e){return n.props.disabledKeyboardNavigation?"-1":e===Le.default(n.props.preSelection)?"0":"-1"})),xt(Et(n),"getYearContainerClassNames",(function(){var e=n.props,t=e.selectingDate,r=e.selectsStart,a=e.selectsEnd,s=e.selectsRange;return he.default("react-datepicker__year",{"react-datepicker__year--selecting-range":t&&(r||a||s)})})),xt(Et(n),"getYearContent",(function(e){return n.props.renderYearContent?n.props.renderYearContent(e):e})),n}return jt(r,[{key:"render",value:function(){for(var e=this,t=[],r=this.props,n=r.date,a=r.yearItemNumber,s=r.onYearMouseEnter,i=r.onYearMouseLeave,o=kr(n,a),c=o.startPeriod,l=o.endPeriod,u=function(r){t.push(de.default.createElement("div",{ref:e.YEAR_REFS[r-c],onClick:function(t){e.onYearClick(t,r)},onKeyDown:function(t){e.onYearKeyDown(t,r)},tabIndex:e.getYearTabIndex(r),className:e.getYearClassNames(r),onMouseEnter:function(e){return s(e,r)},onMouseLeave:function(e){return i(e,r)},key:r,"aria-current":e.isCurrentYear(r)?"date":void 0},e.getYearContent(r)))},d=c;d<=l;d++)u(d);return de.default.createElement("div",{className:this.getYearContainerClassNames()},de.default.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.clearSelectingDate},t))}}]),r}(de.default.Component),Jr=function(e){Ot(r,e);var t=St(r);function r(e){var n;return _t(this,r),xt(Et(n=t.call(this,e)),"onTimeChange",(function(e){n.setState({time:e});var t=n.props.date,r=t instanceof Date&&!isNaN(t)?t:new Date;r.setHours(e.split(":")[0]),r.setMinutes(e.split(":")[1]),n.props.onChange(r)})),xt(Et(n),"renderTimeInput",(function(){var e=n.state.time,t=n.props,r=t.date,a=t.timeString,s=t.customTimeInput;return s?de.default.cloneElement(s,{date:r,value:e,onChange:n.onTimeChange}):de.default.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",required:!0,value:e,onChange:function(e){n.onTimeChange(e.target.value||a)}})})),n.state={time:n.props.timeString},n}return jt(r,[{key:"render",value:function(){return de.default.createElement("div",{className:"react-datepicker__input-time-container"},de.default.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),de.default.createElement("div",{className:"react-datepicker-time__input-container"},de.default.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.timeString!==t.time?{time:e.timeString}:null}}]),r}(de.default.Component);function Qr(e){var t=e.className,r=e.children,n=e.showPopperArrow,a=e.arrowProps,s=void 0===a?{}:a;return de.default.createElement("div",{className:t},n&&de.default.createElement("div",Mt({className:"react-datepicker__triangle"},s)),r)}var Xr=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],$r=function(e){Ot(r,e);var t=St(r);function r(e){var n;return _t(this,r),xt(Et(n=t.call(this,e)),"handleClickOutside",(function(e){n.props.onClickOutside(e)})),xt(Et(n),"setClickOutsideRef",(function(){return n.containerRef.current})),xt(Et(n),"handleDropdownFocus",(function(e){(function(){var e=((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).className||"").split(/\s+/);return Xr.some((function(t){return e.indexOf(t)>=0}))})(e.target)&&n.props.onDropdownFocus()})),xt(Et(n),"getDateInView",(function(){var e=n.props,t=e.preSelection,r=e.selected,a=e.openToDate,s=_r(n.props),i=wr(n.props),o=Ft();return a||r||t||(s&&lt.default(o,s)?s:i&&ct.default(o,i)?i:o)})),xt(Et(n),"increaseMonth",(function(){n.setState((function(e){var t=e.date;return{date:_e.default(t,1)}}),(function(){return n.handleMonthChange(n.state.date)}))})),xt(Et(n),"decreaseMonth",(function(){n.setState((function(e){var t=e.date;return{date:Oe.default(t,1)}}),(function(){return n.handleMonthChange(n.state.date)}))})),xt(Et(n),"handleDayClick",(function(e,t,r){n.props.onSelect(e,t,r),n.props.setPreSelection&&n.props.setPreSelection(e)})),xt(Et(n),"handleDayMouseEnter",(function(e){n.setState({selectingDate:e}),n.props.onDayMouseEnter&&n.props.onDayMouseEnter(e)})),xt(Et(n),"handleMonthMouseLeave",(function(){n.setState({selectingDate:null}),n.props.onMonthMouseLeave&&n.props.onMonthMouseLeave()})),xt(Et(n),"handleYearMouseEnter",(function(e,t){n.setState({selectingDate:Ge.default(Ft(),t)}),n.props.onYearMouseEnter&&n.props.onYearMouseEnter(e,t)})),xt(Et(n),"handleYearMouseLeave",(function(e,t){n.props.onYearMouseLeave&&n.props.onYearMouseLeave(e,t)})),xt(Et(n),"handleYearChange",(function(e){n.props.onYearChange&&(n.props.onYearChange(e),n.setState({isRenderAriaLiveMessage:!0})),n.props.adjustDateOnChange&&(n.props.onSelect&&n.props.onSelect(e),n.props.setOpen&&n.props.setOpen(!0)),n.props.setPreSelection&&n.props.setPreSelection(e)})),xt(Et(n),"handleMonthChange",(function(e){n.handleCustomMonthChange(e),n.props.adjustDateOnChange&&(n.props.onSelect&&n.props.onSelect(e),n.props.setOpen&&n.props.setOpen(!0)),n.props.setPreSelection&&n.props.setPreSelection(e)})),xt(Et(n),"handleCustomMonthChange",(function(e){n.props.onMonthChange&&(n.props.onMonthChange(e),n.setState({isRenderAriaLiveMessage:!0}))})),xt(Et(n),"handleMonthYearChange",(function(e){n.handleYearChange(e),n.handleMonthChange(e)})),xt(Et(n),"changeYear",(function(e){n.setState((function(t){var r=t.date;return{date:Ge.default(r,e)}}),(function(){return n.handleYearChange(n.state.date)}))})),xt(Et(n),"changeMonth",(function(e){n.setState((function(t){var r=t.date;return{date:ze.default(r,e)}}),(function(){return n.handleMonthChange(n.state.date)}))})),xt(Et(n),"changeMonthYear",(function(e){n.setState((function(t){var r=t.date;return{date:Ge.default(ze.default(r,Ae.default(e)),Le.default(e))}}),(function(){return n.handleMonthYearChange(n.state.date)}))})),xt(Et(n),"header",(function(){var e=Gt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state.date,n.props.locale,n.props.calendarStartDay),t=[];return n.props.showWeekNumbers&&t.push(de.default.createElement("div",{key:"W",className:"react-datepicker__day-name"},n.props.weekLabel||"#")),t.concat([0,1,2,3,4,5,6].map((function(t){var r=be.default(e,t),a=n.formatWeekday(r,n.props.locale),s=n.props.weekDayClassName?n.props.weekDayClassName(r):void 0;return de.default.createElement("div",{key:t,className:he.default("react-datepicker__day-name",s)},a)})))})),xt(Et(n),"formatWeekday",(function(e,t){return n.props.formatWeekDay?function(e,t,r){return t(Ut(e,"EEEE",r))}(e,n.props.formatWeekDay,t):n.props.useWeekdaysShort?function(e,t){return Ut(e,"EEE",t)}(e,t):function(e,t){return Ut(e,"EEEEEE",t)}(e,t)})),xt(Et(n),"decreaseYear",(function(){n.setState((function(e){var t=e.date;return{date:Ce.default(t,n.props.showYearPicker?n.props.yearItemNumber:1)}}),(function(){return n.handleYearChange(n.state.date)}))})),xt(Et(n),"clearSelectingDate",(function(){n.setState({selectingDate:null})})),xt(Et(n),"renderPreviousButton",(function(){if(!n.props.renderCustomHeader){var e;switch(!0){case n.props.showMonthYearPicker:e=br(n.state.date,n.props);break;case n.props.showYearPicker:e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.minDate,n=t.yearItemNumber,a=void 0===n?Lt:n,s=kr(Vt(Ce.default(e,a)),a).endPeriod,i=r&&Le.default(r);return i&&i>s||!1}(n.state.date,n.props);break;default:e=gr(n.state.date,n.props)}if((n.props.forceShowMonthNavigation||n.props.showDisabledMonthNavigation||!e)&&!n.props.showTimeSelectOnly){var t=["react-datepicker__navigation","react-datepicker__navigation--previous"],r=n.decreaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(r=n.decreaseYear),e&&n.props.showDisabledMonthNavigation&&(t.push("react-datepicker__navigation--previous--disabled"),r=null);var a=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,s=n.props,i=s.previousMonthButtonLabel,o=s.previousYearButtonLabel,c=n.props,l=c.previousMonthAriaLabel,u=void 0===l?"string"==typeof i?i:"Previous Month":l,d=c.previousYearAriaLabel,h=void 0===d?"string"==typeof o?o:"Previous Year":d;return de.default.createElement("button",{type:"button",className:t.join(" "),onClick:r,onKeyDown:n.props.handleOnKeyDown,"aria-label":a?h:u},de.default.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"].join(" ")},a?n.props.previousYearButtonLabel:n.props.previousMonthButtonLabel))}}})),xt(Et(n),"increaseYear",(function(){n.setState((function(e){var t=e.date;return{date:je.default(t,n.props.showYearPicker?n.props.yearItemNumber:1)}}),(function(){return n.handleYearChange(n.state.date)}))})),xt(Et(n),"renderNextButton",(function(){if(!n.props.renderCustomHeader){var e;switch(!0){case n.props.showMonthYearPicker:e=vr(n.state.date,n.props);break;case n.props.showYearPicker:e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.maxDate,n=t.yearItemNumber,a=void 0===n?Lt:n,s=kr(je.default(e,a),a).startPeriod,i=r&&Le.default(r);return i&&i<s||!1}(n.state.date,n.props);break;default:e=yr(n.state.date,n.props)}if((n.props.forceShowMonthNavigation||n.props.showDisabledMonthNavigation||!e)&&!n.props.showTimeSelectOnly){var t=["react-datepicker__navigation","react-datepicker__navigation--next"];n.props.showTimeSelect&&t.push("react-datepicker__navigation--next--with-time"),n.props.todayButton&&t.push("react-datepicker__navigation--next--with-today-button");var r=n.increaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(r=n.increaseYear),e&&n.props.showDisabledMonthNavigation&&(t.push("react-datepicker__navigation--next--disabled"),r=null);var a=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,s=n.props,i=s.nextMonthButtonLabel,o=s.nextYearButtonLabel,c=n.props,l=c.nextMonthAriaLabel,u=void 0===l?"string"==typeof i?i:"Next Month":l,d=c.nextYearAriaLabel,h=void 0===d?"string"==typeof o?o:"Next Year":d;return de.default.createElement("button",{type:"button",className:t.join(" "),onClick:r,onKeyDown:n.props.handleOnKeyDown,"aria-label":a?h:u},de.default.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"].join(" ")},a?n.props.nextYearButtonLabel:n.props.nextMonthButtonLabel))}}})),xt(Et(n),"renderCurrentMonth",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state.date,t=["react-datepicker__current-month"];return n.props.showYearDropdown&&t.push("react-datepicker__current-month--hasYearDropdown"),n.props.showMonthDropdown&&t.push("react-datepicker__current-month--hasMonthDropdown"),n.props.showMonthYearDropdown&&t.push("react-datepicker__current-month--hasMonthYearDropdown"),de.default.createElement("div",{className:t.join(" ")},Ut(e,n.props.dateFormat,n.props.locale))})),xt(Et(n),"renderYearDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n.props.showYearDropdown&&!e)return de.default.createElement(Ir,{adjustDateOnChange:n.props.adjustDateOnChange,date:n.state.date,onSelect:n.props.onSelect,setOpen:n.props.setOpen,dropdownMode:n.props.dropdownMode,onChange:n.changeYear,minDate:n.props.minDate,maxDate:n.props.maxDate,year:Le.default(n.state.date),scrollableYearDropdown:n.props.scrollableYearDropdown,yearDropdownItemNumber:n.props.yearDropdownItemNumber})})),xt(Et(n),"renderMonthDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n.props.showMonthDropdown&&!e)return de.default.createElement(Ar,{dropdownMode:n.props.dropdownMode,locale:n.props.locale,onChange:n.changeMonth,month:Ae.default(n.state.date),useShortMonthInDropdown:n.props.useShortMonthInDropdown})})),xt(Et(n),"renderMonthYearDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n.props.showMonthYearDropdown&&!e)return de.default.createElement(Fr,{dropdownMode:n.props.dropdownMode,locale:n.props.locale,dateFormat:n.props.dateFormat,onChange:n.changeMonthYear,minDate:n.props.minDate,maxDate:n.props.maxDate,date:n.state.date,scrollableMonthYearDropdown:n.props.scrollableMonthYearDropdown})})),xt(Et(n),"handleTodayButtonClick",(function(e){n.props.onSelect(Ht(),e),n.props.setPreSelection&&n.props.setPreSelection(Ht())})),xt(Et(n),"renderTodayButton",(function(){if(n.props.todayButton&&!n.props.showTimeSelectOnly)return de.default.createElement("div",{className:"react-datepicker__today-button",onClick:function(e){return n.handleTodayButtonClick(e)}},n.props.todayButton)})),xt(Et(n),"renderDefaultHeader",(function(e){var t=e.monthDate,r=e.i;return de.default.createElement("div",{className:"react-datepicker__header ".concat(n.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},n.renderCurrentMonth(t),de.default.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(n.props.dropdownMode),onFocus:n.handleDropdownFocus},n.renderMonthDropdown(0!==r),n.renderMonthYearDropdown(0!==r),n.renderYearDropdown(0!==r)),de.default.createElement("div",{className:"react-datepicker__day-names"},n.header(t)))})),xt(Et(n),"renderCustomHeader",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.monthDate,r=e.i;if(n.props.showTimeSelect&&!n.state.monthContainer||n.props.showTimeSelectOnly)return null;var a=gr(n.state.date,n.props),s=yr(n.state.date,n.props),i=br(n.state.date,n.props),o=vr(n.state.date,n.props),c=!n.props.showMonthYearPicker&&!n.props.showQuarterYearPicker&&!n.props.showYearPicker;return de.default.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:n.props.onDropdownFocus},n.props.renderCustomHeader(bt(bt({},n.state),{},{customHeaderCount:r,monthDate:t,changeMonth:n.changeMonth,changeYear:n.changeYear,decreaseMonth:n.decreaseMonth,increaseMonth:n.increaseMonth,decreaseYear:n.decreaseYear,increaseYear:n.increaseYear,prevMonthButtonDisabled:a,nextMonthButtonDisabled:s,prevYearButtonDisabled:i,nextYearButtonDisabled:o})),c&&de.default.createElement("div",{className:"react-datepicker__day-names"},n.header(t)))})),xt(Et(n),"renderYearHeader",(function(){var e=n.state.date,t=n.props,r=t.showYearPicker,a=kr(e,t.yearItemNumber),s=a.startPeriod,i=a.endPeriod;return de.default.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},r?"".concat(s," - ").concat(i):Le.default(e))})),xt(Et(n),"renderHeader",(function(e){switch(!0){case void 0!==n.props.renderCustomHeader:return n.renderCustomHeader(e);case n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker:return n.renderYearHeader(e);default:return n.renderDefaultHeader(e)}})),xt(Et(n),"renderMonths",(function(){var e;if(!n.props.showTimeSelectOnly&&!n.props.showYearPicker){for(var t=[],r=n.props.showPreviousMonths?n.props.monthsShown-1:0,a=Oe.default(n.state.date,r),s=null!==(e=n.props.monthSelectedIn)&&void 0!==e?e:r,i=0;i<n.props.monthsShown;++i){var o=i-s+r,c=_e.default(a,o),l="month-".concat(i),u=i<n.props.monthsShown-1,d=i>0;t.push(de.default.createElement("div",{key:l,ref:function(e){n.monthContainer=e},className:"react-datepicker__month-container"},n.renderHeader({monthDate:c,i:i}),de.default.createElement(Hr,{chooseDayAriaLabelPrefix:n.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:n.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:n.props.weekAriaLabelPrefix,ariaLabelPrefix:n.props.monthAriaLabelPrefix,onChange:n.changeMonthYear,day:c,dayClassName:n.props.dayClassName,calendarStartDay:n.props.calendarStartDay,monthClassName:n.props.monthClassName,onDayClick:n.handleDayClick,handleOnKeyDown:n.props.handleOnDayKeyDown,onDayMouseEnter:n.handleDayMouseEnter,onMouseLeave:n.handleMonthMouseLeave,onWeekSelect:n.props.onWeekSelect,orderInDisplay:i,formatWeekNumber:n.props.formatWeekNumber,locale:n.props.locale,minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,highlightDates:n.props.highlightDates,holidays:n.props.holidays,selectingDate:n.state.selectingDate,includeDates:n.props.includeDates,includeDateIntervals:n.props.includeDateIntervals,inline:n.props.inline,shouldFocusDayInline:n.props.shouldFocusDayInline,fixedHeight:n.props.fixedHeight,filterDate:n.props.filterDate,preSelection:n.props.preSelection,setPreSelection:n.props.setPreSelection,selected:n.props.selected,selectsStart:n.props.selectsStart,selectsEnd:n.props.selectsEnd,selectsRange:n.props.selectsRange,selectsDisabledDaysInRange:n.props.selectsDisabledDaysInRange,showWeekNumbers:n.props.showWeekNumbers,startDate:n.props.startDate,endDate:n.props.endDate,peekNextMonth:n.props.peekNextMonth,setOpen:n.props.setOpen,shouldCloseOnSelect:n.props.shouldCloseOnSelect,renderDayContents:n.props.renderDayContents,renderMonthContent:n.props.renderMonthContent,renderQuarterContent:n.props.renderQuarterContent,renderYearContent:n.props.renderYearContent,disabledKeyboardNavigation:n.props.disabledKeyboardNavigation,showMonthYearPicker:n.props.showMonthYearPicker,showFullMonthYearPicker:n.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:n.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:n.props.showFourColumnMonthYearPicker,showYearPicker:n.props.showYearPicker,showQuarterYearPicker:n.props.showQuarterYearPicker,showWeekPicker:n.props.showWeekPicker,isInputFocused:n.props.isInputFocused,containerRef:n.containerRef,monthShowsDuplicateDaysEnd:u,monthShowsDuplicateDaysStart:d})))}return t}})),xt(Et(n),"renderYears",(function(){if(!n.props.showTimeSelectOnly)return n.props.showYearPicker?de.default.createElement("div",{className:"react-datepicker__year--container"},n.renderHeader(),de.default.createElement(Zr,Mt({onDayClick:n.handleDayClick,selectingDate:n.state.selectingDate,clearSelectingDate:n.clearSelectingDate,date:n.state.date},n.props,{onYearMouseEnter:n.handleYearMouseEnter,onYearMouseLeave:n.handleYearMouseLeave}))):void 0})),xt(Et(n),"renderTimeSection",(function(){if(n.props.showTimeSelect&&(n.state.monthContainer||n.props.showTimeSelectOnly))return de.default.createElement(Kr,{selected:n.props.selected,openToDate:n.props.openToDate,onChange:n.props.onTimeChange,timeClassName:n.props.timeClassName,format:n.props.timeFormat,includeTimes:n.props.includeTimes,intervals:n.props.timeIntervals,minTime:n.props.minTime,maxTime:n.props.maxTime,excludeTimes:n.props.excludeTimes,filterTime:n.props.filterTime,timeCaption:n.props.timeCaption,todayButton:n.props.todayButton,showMonthDropdown:n.props.showMonthDropdown,showMonthYearDropdown:n.props.showMonthYearDropdown,showYearDropdown:n.props.showYearDropdown,withPortal:n.props.withPortal,monthRef:n.state.monthContainer,injectTimes:n.props.injectTimes,locale:n.props.locale,handleOnKeyDown:n.props.handleOnKeyDown,showTimeSelectOnly:n.props.showTimeSelectOnly})})),xt(Et(n),"renderInputTimeSection",(function(){var e=new Date(n.props.selected),t=Bt(e)&&Boolean(n.props.selected)?"".concat(Or(e.getHours()),":").concat(Or(e.getMinutes())):"";if(n.props.showTimeInput)return de.default.createElement(Jr,{date:e,timeString:t,timeInputLabel:n.props.timeInputLabel,onChange:n.props.onTimeChange,customTimeInput:n.props.customTimeInput})})),xt(Et(n),"renderAriaLiveRegion",(function(){var e,t=kr(n.state.date,n.props.yearItemNumber),r=t.startPeriod,a=t.endPeriod;return e=n.props.showYearPicker?"".concat(r," - ").concat(a):n.props.showMonthYearPicker||n.props.showQuarterYearPicker?Le.default(n.state.date):"".concat(rr(Ae.default(n.state.date),n.props.locale)," ").concat(Le.default(n.state.date)),de.default.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n.state.isRenderAriaLiveMessage&&e)})),xt(Et(n),"renderChildren",(function(){if(n.props.children)return de.default.createElement("div",{className:"react-datepicker__children-container"},n.props.children)})),n.containerRef=de.default.createRef(),n.state={date:n.getDateInView(),selectingDate:null,monthContainer:null,isRenderAriaLiveMessage:!1},n}return jt(r,[{key:"componentDidMount",value:function(){var e=this;this.props.showTimeSelect&&(this.assignMonthContainer=void e.setState({monthContainer:e.monthContainer}))}},{key:"componentDidUpdate",value:function(e){var t=this;if(!this.props.preSelection||Qt(this.props.preSelection,e.preSelection)&&this.props.monthSelectedIn===e.monthSelectedIn)this.props.openToDate&&!Qt(this.props.openToDate,e.openToDate)&&this.setState({date:this.props.openToDate});else{var r=!Zt(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},(function(){return r&&t.handleCustomMonthChange(t.state.date)}))}}},{key:"render",value:function(){var e=this.props.container||Qr;return de.default.createElement("div",{style:{display:"contents"},ref:this.containerRef},de.default.createElement(e,{className:he.default("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showPopperArrow:this.props.showPopperArrow,arrowProps:this.props.arrowProps},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))}}],[{key:"defaultProps",get:function(){return{onDropdownFocus:function(){},monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",customTimeInput:null,yearItemNumber:Lt}}}]),r}(de.default.Component),en=function(e){var t=e.icon,r=e.className,n=void 0===r?"":r,a=e.onClick,s="react-datepicker__calendar-icon";return de.default.isValidElement(t)?de.default.cloneElement(t,{className:"".concat(t.props.className||""," ").concat(s," ").concat(n),onClick:function(e){"function"==typeof t.props.onClick&&t.props.onClick(e),"function"==typeof a&&a(e)}}):"string"==typeof t?de.default.createElement("i",{className:"".concat(s," ").concat(t," ").concat(n),"aria-hidden":"true",onClick:a}):de.default.createElement("svg",{className:"".concat(s," ").concat(n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:a},de.default.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},tn=function(e){Ot(r,e);var t=St(r);function r(e){var n;return _t(this,r),(n=t.call(this,e)).el=document.createElement("div"),n}return jt(r,[{key:"componentDidMount",value:function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.portalRoot.removeChild(this.el)}},{key:"render",value:function(){return mt.default.createPortal(this.props.children,this.el)}}]),r}(de.default.Component),rn=function(e){return!e.disabled&&-1!==e.tabIndex},nn=function(e){Ot(r,e);var t=St(r);function r(e){var n;return _t(this,r),xt(Et(n=t.call(this,e)),"getTabChildren",(function(){return Array.prototype.slice.call(n.tabLoopRef.current.querySelectorAll("[tabindex], a, button, input, select, textarea"),1,-1).filter(rn)})),xt(Et(n),"handleFocusStart",(function(){var e=n.getTabChildren();e&&e.length>1&&e[e.length-1].focus()})),xt(Et(n),"handleFocusEnd",(function(){var e=n.getTabChildren();e&&e.length>1&&e[0].focus()})),n.tabLoopRef=de.default.createRef(),n}return jt(r,[{key:"render",value:function(){return this.props.enableTabLoop?de.default.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},de.default.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:"0",onFocus:this.handleFocusStart}),this.props.children,de.default.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:"0",onFocus:this.handleFocusEnd})):this.props.children}}],[{key:"defaultProps",get:function(){return{enableTabLoop:!0}}}]),r}(de.default.Component),an=function(e){Ot(r,e);var t=St(r);function r(){return _t(this,r),t.apply(this,arguments)}return jt(r,[{key:"render",value:function(){var e,t=this.props,r=t.className,n=t.wrapperClassName,a=t.hidePopper,s=t.popperComponent,i=t.popperModifiers,o=t.popperPlacement,c=t.popperProps,l=t.targetComponent,u=t.enableTabLoop,d=t.popperOnKeyDown,h=t.portalId,p=t.portalHost;if(!a){var f=he.default("react-datepicker-popper",r);e=de.default.createElement(ce.Popper,Mt({modifiers:i,placement:o},c),(function(e){var t=e.ref,r=e.style,n=e.placement,a=e.arrowProps;return de.default.createElement(nn,{enableTabLoop:u},de.default.createElement("div",{ref:t,style:r,className:f,"data-placement":n,onKeyDown:d},de.default.cloneElement(s,{arrowProps:a})))}))}this.props.popperContainer&&(e=de.default.createElement(this.props.popperContainer,{},e)),h&&!a&&(e=de.default.createElement(tn,{portalId:h,portalHost:p},e));var m=he.default("react-datepicker-wrapper",n);return de.default.createElement(ce.Manager,{className:"react-datepicker-manager"},de.default.createElement(ce.Reference,null,(function(e){var t=e.ref;return de.default.createElement("div",{ref:t,className:m},l)})),e)}}],[{key:"defaultProps",get:function(){return{hidePopper:!0,popperModifiers:[],popperProps:{},popperPlacement:"bottom-start"}}}]),r}(de.default.Component),sn="react-datepicker-ignore-onclickoutside",on=ft.default($r),cn="Date input not valid.",ln=function(e){Ot(r,e);var t=St(r);function r(e){var n;return _t(this,r),xt(Et(n=t.call(this,e)),"getPreSelection",(function(){return n.props.openToDate?n.props.openToDate:n.props.selectsEnd&&n.props.startDate?n.props.startDate:n.props.selectsStart&&n.props.endDate?n.props.endDate:Ft()})),xt(Et(n),"modifyHolidays",(function(){var e;return null===(e=n.props.holidays)||void 0===e?void 0:e.reduce((function(e,t){var r=new Date(t.date);return fe.default(r)?[].concat(Nt(e),[bt(bt({},t),{},{date:r})]):e}),[])})),xt(Et(n),"calcInitialState",(function(){var e,t=n.getPreSelection(),r=_r(n.props),a=wr(n.props),s=r&&lt.default(t,Ze.default(r))?r:a&&ct.default(t,et.default(a))?a:t;return{open:n.props.startOpen||!1,preventFocus:!1,preSelection:null!==(e=n.props.selectsRange?n.props.startDate:n.props.selected)&&void 0!==e?e:s,highlightDates:jr(n.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1}})),xt(Et(n),"clearPreventFocusTimeout",(function(){n.preventFocusTimeout&&clearTimeout(n.preventFocusTimeout)})),xt(Et(n),"setFocus",(function(){n.input&&n.input.focus&&n.input.focus({preventScroll:!0})})),xt(Et(n),"setBlur",(function(){n.input&&n.input.blur&&n.input.blur(),n.cancelFocusInput()})),xt(Et(n),"setOpen",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.setState({open:e,preSelection:e&&n.state.open?n.state.preSelection:n.calcInitialState().preSelection,lastPreSelectChange:dn},(function(){e||n.setState((function(e){return{focused:!!t&&e.focused}}),(function(){!t&&n.setBlur(),n.setState({inputValue:null})}))}))})),xt(Et(n),"inputOk",(function(){return pe.default(n.state.preSelection)})),xt(Et(n),"isCalendarOpen",(function(){return void 0===n.props.open?n.state.open&&!n.props.disabled&&!n.props.readOnly:n.props.open})),xt(Et(n),"handleFocus",(function(e){n.state.preventFocus||(n.props.onFocus(e),n.props.preventOpenOnFocus||n.props.readOnly||n.setOpen(!0)),n.setState({focused:!0})})),xt(Et(n),"sendFocusBackToInput",(function(){n.preventFocusTimeout&&n.clearPreventFocusTimeout(),n.setState({preventFocus:!0},(function(){n.preventFocusTimeout=setTimeout((function(){n.setFocus(),n.setState({preventFocus:!1})}))}))})),xt(Et(n),"cancelFocusInput",(function(){clearTimeout(n.inputFocusTimeout),n.inputFocusTimeout=null})),xt(Et(n),"deferFocusInput",(function(){n.cancelFocusInput(),n.inputFocusTimeout=setTimeout((function(){return n.setFocus()}),1)})),xt(Et(n),"handleDropdownFocus",(function(){n.cancelFocusInput()})),xt(Et(n),"handleBlur",(function(e){(!n.state.open||n.props.withPortal||n.props.showTimeInput)&&n.props.onBlur(e),n.setState({focused:!1})})),xt(Et(n),"handleCalendarClickOutside",(function(e){n.props.inline||n.setOpen(!1),n.props.onClickOutside(e),n.props.withPortal&&e.preventDefault()})),xt(Et(n),"handleChange",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t[0];if(!n.props.onChangeRaw||(n.props.onChangeRaw.apply(Et(n),t),"function"==typeof a.isDefaultPrevented&&!a.isDefaultPrevented())){n.setState({inputValue:a.target.value,lastPreSelectChange:un});var s,i,o,c,l,u,d,h,p=(s=a.target.value,i=n.props.dateFormat,o=n.props.locale,c=n.props.strictParsing,l=n.props.minDate,u=null,d=tr(o)||tr(er()),h=!0,Array.isArray(i)?(i.forEach((function(e){var t=ht.default(s,e,new Date,{locale:d});c&&(h=Bt(t,l)&&s===Ut(t,e,o)),Bt(t,l)&&h&&(u=t)})),u):(u=ht.default(s,i,new Date,{locale:d}),c?h=Bt(u)&&s===Ut(u,i,o):Bt(u)||(i=i.match(Rt).map((function(e){var t=e[0];return"p"===t||"P"===t?d?(0,Pt[t])(e,d.formatLong):t:e})).join(""),s.length>0&&(u=ht.default(s,i.slice(0,s.length),new Date)),Bt(u)||(u=new Date(s))),Bt(u)&&h?u:null));n.props.showTimeSelectOnly&&n.props.selected&&p&&!Qt(p,n.props.selected)&&(p=gt.default(n.props.selected,{hours:Ne.default(p),minutes:Se.default(p),seconds:Ee.default(p)})),!p&&a.target.value||(n.props.showWeekPicker&&(p=Gt(p,n.props.locale,n.props.calendarStartDay)),n.setSelected(p,a,!0))}})),xt(Et(n),"handleSelect",(function(e,t,r){if(n.props.shouldCloseOnSelect&&!n.props.showTimeSelect&&n.sendFocusBackToInput(),n.props.onChangeRaw&&n.props.onChangeRaw(t),n.props.showWeekPicker&&(e=Gt(e,n.props.locale,n.props.calendarStartDay)),n.setSelected(e,t,!1,r),n.props.showDateSelect&&n.setState({isRenderAriaLiveMessage:!0}),!n.props.shouldCloseOnSelect||n.props.showTimeSelect)n.setPreSelection(e);else if(!n.props.inline){n.props.selectsRange||n.setOpen(!1);var a=n.props,s=a.startDate,i=a.endDate;!s||i||lt.default(e,s)||n.setOpen(!1)}})),xt(Et(n),"setSelected",(function(e,t,r,a){var s=e;if(n.props.showYearPicker){if(null!==s&&ur(Le.default(s),n.props))return}else if(n.props.showMonthYearPicker){if(null!==s&&ir(s,n.props))return}else if(null!==s&&ar(s,n.props))return;var i=n.props,o=i.onChange,c=i.selectsRange,l=i.startDate,u=i.endDate;if(!Xt(n.props.selected,s)||n.props.allowSameDay||c)if(null!==s&&(!n.props.selected||r&&(n.props.showTimeSelect||n.props.showTimeSelectOnly||n.props.showTimeInput)||(s=Yt(s,{hour:Ne.default(n.props.selected),minute:Se.default(n.props.selected),second:Ee.default(n.props.selected)})),n.props.inline||n.setState({preSelection:s}),n.props.focusSelectedMonth||n.setState({monthSelectedIn:a})),c){var d=l&&u;l||u?l&&!u&&(lt.default(s,l)?o([s,null],t):o([l,s],t)):o([s,null],t),d&&o([s,null],t)}else o(s,t);r||(n.props.onSelect(s,t),n.setState({inputValue:null}))})),xt(Et(n),"setPreSelection",(function(e){var t=void 0!==n.props.minDate,r=void 0!==n.props.maxDate,a=!0;if(e){n.props.showWeekPicker&&(e=Gt(e,n.props.locale,n.props.calendarStartDay));var s=Ze.default(e);if(t&&r)a=$t(e,n.props.minDate,n.props.maxDate);else if(t){var i=Ze.default(n.props.minDate);a=ct.default(e,i)||Xt(s,i)}else if(r){var o=et.default(n.props.maxDate);a=lt.default(e,o)||Xt(s,o)}}a&&n.setState({preSelection:e})})),xt(Et(n),"toggleCalendar",(function(){n.setOpen(!n.state.open)})),xt(Et(n),"handleTimeChange",(function(e){var t=n.props.selected?n.props.selected:n.getPreSelection(),r=n.props.selected?e:Yt(t,{hour:Ne.default(e),minute:Se.default(e)});n.setState({preSelection:r}),n.props.onChange(r),n.props.shouldCloseOnSelect&&(n.sendFocusBackToInput(),n.setOpen(!1)),n.props.showTimeInput&&n.setOpen(!0),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),n.setState({inputValue:null})})),xt(Et(n),"onInputClick",(function(){n.props.disabled||n.props.readOnly||n.setOpen(!0),n.props.onInputClick()})),xt(Et(n),"onInputKeyDown",(function(e){n.props.onKeyDown(e);var t=e.key;if(n.state.open||n.props.inline||n.props.preventOpenOnFocus){if(n.state.open){if("ArrowDown"===t||"ArrowUp"===t){e.preventDefault();var r=n.props.showWeekPicker&&n.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',a=n.calendar.componentNode&&n.calendar.componentNode.querySelector(r);return void(a&&a.focus({preventScroll:!0}))}var s=Ft(n.state.preSelection);"Enter"===t?(e.preventDefault(),n.inputOk()&&n.state.lastPreSelectChange===dn?(n.handleSelect(s,e),!n.props.shouldCloseOnSelect&&n.setPreSelection(s)):n.setOpen(!1)):"Escape"===t?(e.preventDefault(),n.sendFocusBackToInput(),n.setOpen(!1)):"Tab"===t&&n.setOpen(!1),n.inputOk()||n.props.onInputError({code:1,msg:cn})}}else"ArrowDown"!==t&&"ArrowUp"!==t&&"Enter"!==t||n.onInputClick()})),xt(Et(n),"onPortalKeyDown",(function(e){"Escape"===e.key&&(e.preventDefault(),n.setState({preventFocus:!0},(function(){n.setOpen(!1),setTimeout((function(){n.setFocus(),n.setState({preventFocus:!1})}))})))})),xt(Et(n),"onDayKeyDown",(function(e){n.props.onKeyDown(e);var t=e.key,r=Ft(n.state.preSelection);if("Enter"===t)e.preventDefault(),n.handleSelect(r,e),!n.props.shouldCloseOnSelect&&n.setPreSelection(r);else if("Escape"===t)e.preventDefault(),n.setOpen(!1),n.inputOk()||n.props.onInputError({code:1,msg:cn});else if(!n.props.disabledKeyboardNavigation){var a;switch(t){case"ArrowLeft":a=n.props.showWeekPicker?Me.default(r,1):xe.default(r,1);break;case"ArrowRight":a=n.props.showWeekPicker?ve.default(r,1):be.default(r,1);break;case"ArrowUp":a=Me.default(r,1);break;case"ArrowDown":a=ve.default(r,1);break;case"PageUp":a=Oe.default(r,1);break;case"PageDown":a=_e.default(r,1);break;case"Home":a=Ce.default(r,1);break;case"End":a=je.default(r,1);break;default:a=null}if(!a)return void(n.props.onInputError&&n.props.onInputError({code:1,msg:cn}));if(e.preventDefault(),n.setState({lastPreSelectChange:dn}),n.props.adjustDateOnChange&&n.setSelected(a),n.setPreSelection(a),n.props.inline){var s=Ae.default(r),i=Ae.default(a),o=Le.default(r),c=Le.default(a);s!==i||o!==c?n.setState({shouldFocusDayInline:!0}):n.setState({shouldFocusDayInline:!1})}}})),xt(Et(n),"onPopperKeyDown",(function(e){"Escape"===e.key&&(e.preventDefault(),n.sendFocusBackToInput())})),xt(Et(n),"onClearClick",(function(e){e&&e.preventDefault&&e.preventDefault(),n.sendFocusBackToInput(),n.props.selectsRange?n.props.onChange([null,null],e):n.props.onChange(null,e),n.setState({inputValue:null})})),xt(Et(n),"clear",(function(){n.onClearClick()})),xt(Et(n),"onScroll",(function(e){"boolean"==typeof n.props.closeOnScroll&&n.props.closeOnScroll?e.target!==document&&e.target!==document.documentElement&&e.target!==document.body||n.setOpen(!1):"function"==typeof n.props.closeOnScroll&&n.props.closeOnScroll(e)&&n.setOpen(!1)})),xt(Et(n),"renderCalendar",(function(){return n.props.inline||n.isCalendarOpen()?de.default.createElement(on,{ref:function(e){n.calendar=e},locale:n.props.locale,calendarStartDay:n.props.calendarStartDay,chooseDayAriaLabelPrefix:n.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:n.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:n.props.weekAriaLabelPrefix,monthAriaLabelPrefix:n.props.monthAriaLabelPrefix,adjustDateOnChange:n.props.adjustDateOnChange,setOpen:n.setOpen,shouldCloseOnSelect:n.props.shouldCloseOnSelect,dateFormat:n.props.dateFormatCalendar,useWeekdaysShort:n.props.useWeekdaysShort,formatWeekDay:n.props.formatWeekDay,dropdownMode:n.props.dropdownMode,selected:n.props.selected,preSelection:n.state.preSelection,onSelect:n.handleSelect,onWeekSelect:n.props.onWeekSelect,openToDate:n.props.openToDate,minDate:n.props.minDate,maxDate:n.props.maxDate,selectsStart:n.props.selectsStart,selectsEnd:n.props.selectsEnd,selectsRange:n.props.selectsRange,startDate:n.props.startDate,endDate:n.props.endDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,filterDate:n.props.filterDate,onClickOutside:n.handleCalendarClickOutside,formatWeekNumber:n.props.formatWeekNumber,highlightDates:n.state.highlightDates,holidays:xr(n.modifyHolidays()),includeDates:n.props.includeDates,includeDateIntervals:n.props.includeDateIntervals,includeTimes:n.props.includeTimes,injectTimes:n.props.injectTimes,inline:n.props.inline,shouldFocusDayInline:n.state.shouldFocusDayInline,peekNextMonth:n.props.peekNextMonth,showMonthDropdown:n.props.showMonthDropdown,showPreviousMonths:n.props.showPreviousMonths,useShortMonthInDropdown:n.props.useShortMonthInDropdown,showMonthYearDropdown:n.props.showMonthYearDropdown,showWeekNumbers:n.props.showWeekNumbers,showYearDropdown:n.props.showYearDropdown,withPortal:n.props.withPortal,forceShowMonthNavigation:n.props.forceShowMonthNavigation,showDisabledMonthNavigation:n.props.showDisabledMonthNavigation,scrollableYearDropdown:n.props.scrollableYearDropdown,scrollableMonthYearDropdown:n.props.scrollableMonthYearDropdown,todayButton:n.props.todayButton,weekLabel:n.props.weekLabel,outsideClickIgnoreClass:sn,fixedHeight:n.props.fixedHeight,monthsShown:n.props.monthsShown,monthSelectedIn:n.state.monthSelectedIn,onDropdownFocus:n.handleDropdownFocus,onMonthChange:n.props.onMonthChange,onYearChange:n.props.onYearChange,dayClassName:n.props.dayClassName,weekDayClassName:n.props.weekDayClassName,monthClassName:n.props.monthClassName,timeClassName:n.props.timeClassName,showDateSelect:n.props.showDateSelect,showTimeSelect:n.props.showTimeSelect,showTimeSelectOnly:n.props.showTimeSelectOnly,onTimeChange:n.handleTimeChange,timeFormat:n.props.timeFormat,timeIntervals:n.props.timeIntervals,minTime:n.props.minTime,maxTime:n.props.maxTime,excludeTimes:n.props.excludeTimes,filterTime:n.props.filterTime,timeCaption:n.props.timeCaption,className:n.props.calendarClassName,container:n.props.calendarContainer,yearItemNumber:n.props.yearItemNumber,yearDropdownItemNumber:n.props.yearDropdownItemNumber,previousMonthAriaLabel:n.props.previousMonthAriaLabel,previousMonthButtonLabel:n.props.previousMonthButtonLabel,nextMonthAriaLabel:n.props.nextMonthAriaLabel,nextMonthButtonLabel:n.props.nextMonthButtonLabel,previousYearAriaLabel:n.props.previousYearAriaLabel,previousYearButtonLabel:n.props.previousYearButtonLabel,nextYearAriaLabel:n.props.nextYearAriaLabel,nextYearButtonLabel:n.props.nextYearButtonLabel,timeInputLabel:n.props.timeInputLabel,disabledKeyboardNavigation:n.props.disabledKeyboardNavigation,renderCustomHeader:n.props.renderCustomHeader,popperProps:n.props.popperProps,renderDayContents:n.props.renderDayContents,renderMonthContent:n.props.renderMonthContent,renderQuarterContent:n.props.renderQuarterContent,renderYearContent:n.props.renderYearContent,onDayMouseEnter:n.props.onDayMouseEnter,onMonthMouseLeave:n.props.onMonthMouseLeave,onYearMouseEnter:n.props.onYearMouseEnter,onYearMouseLeave:n.props.onYearMouseLeave,selectsDisabledDaysInRange:n.props.selectsDisabledDaysInRange,showTimeInput:n.props.showTimeInput,showMonthYearPicker:n.props.showMonthYearPicker,showFullMonthYearPicker:n.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:n.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:n.props.showFourColumnMonthYearPicker,showYearPicker:n.props.showYearPicker,showQuarterYearPicker:n.props.showQuarterYearPicker,showWeekPicker:n.props.showWeekPicker,showPopperArrow:n.props.showPopperArrow,excludeScrollbar:n.props.excludeScrollbar,handleOnKeyDown:n.props.onKeyDown,handleOnDayKeyDown:n.onDayKeyDown,isInputFocused:n.state.focused,customTimeInput:n.props.customTimeInput,setPreSelection:n.setPreSelection},n.props.children):null})),xt(Et(n),"renderAriaLiveRegion",(function(){var e,t=n.props,r=t.dateFormat,a=t.locale,s=n.props.showTimeInput||n.props.showTimeSelect?"PPPPp":"PPPP";return e=n.props.selectsRange?"Selected start date: ".concat(zt(n.props.startDate,{dateFormat:s,locale:a}),". ").concat(n.props.endDate?"End date: "+zt(n.props.endDate,{dateFormat:s,locale:a}):""):n.props.showTimeSelectOnly?"Selected time: ".concat(zt(n.props.selected,{dateFormat:r,locale:a})):n.props.showYearPicker?"Selected year: ".concat(zt(n.props.selected,{dateFormat:"yyyy",locale:a})):n.props.showMonthYearPicker?"Selected month: ".concat(zt(n.props.selected,{dateFormat:"MMMM yyyy",locale:a})):n.props.showQuarterYearPicker?"Selected quarter: ".concat(zt(n.props.selected,{dateFormat:"yyyy, QQQ",locale:a})):"Selected date: ".concat(zt(n.props.selected,{dateFormat:s,locale:a})),de.default.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},e)})),xt(Et(n),"renderDateInput",(function(){var e,t=he.default(n.props.className,xt({},sn,n.state.open)),r=n.props.customInput||de.default.createElement("input",{type:"text"}),a=n.props.customInputRef||"ref",s="string"==typeof n.props.value?n.props.value:"string"==typeof n.state.inputValue?n.state.inputValue:n.props.selectsRange?function(e,t,r){if(!e)return"";var n=zt(e,r),a=t?zt(t,r):"";return"".concat(n," - ").concat(a)}(n.props.startDate,n.props.endDate,n.props):zt(n.props.selected,n.props);return de.default.cloneElement(r,(xt(xt(xt(xt(xt(xt(xt(xt(xt(xt(e={},a,(function(e){n.input=e})),"value",s),"onBlur",n.handleBlur),"onChange",n.handleChange),"onClick",n.onInputClick),"onFocus",n.handleFocus),"onKeyDown",n.onInputKeyDown),"id",n.props.id),"name",n.props.name),"form",n.props.form),xt(xt(xt(xt(xt(xt(xt(xt(xt(xt(e,"autoFocus",n.props.autoFocus),"placeholder",n.props.placeholderText),"disabled",n.props.disabled),"autoComplete",n.props.autoComplete),"className",he.default(r.props.className,t)),"title",n.props.title),"readOnly",n.props.readOnly),"required",n.props.required),"tabIndex",n.props.tabIndex),"aria-describedby",n.props.ariaDescribedBy),xt(xt(xt(e,"aria-invalid",n.props.ariaInvalid),"aria-labelledby",n.props.ariaLabelledBy),"aria-required",n.props.ariaRequired)))})),xt(Et(n),"renderClearButton",(function(){var e=n.props,t=e.isClearable,r=e.disabled,a=e.selected,s=e.startDate,i=e.endDate,o=e.clearButtonTitle,c=e.clearButtonClassName,l=void 0===c?"":c,u=e.ariaLabelClose,d=void 0===u?"Close":u;return!t||null==a&&null==s&&null==i?null:de.default.createElement("button",{type:"button",className:he.default("react-datepicker__close-icon",l,{"react-datepicker__close-icon--disabled":r}),disabled:r,"aria-label":d,onClick:n.onClearClick,title:o,tabIndex:-1})})),n.state=n.calcInitialState(),n.preventFocusTimeout=null,n}return jt(r,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll,!0)}},{key:"componentDidUpdate",value:function(e,t){var r,n;e.inline&&(r=e.selected,n=this.props.selected,r&&n?Ae.default(r)!==Ae.default(n)||Le.default(r)!==Le.default(n):r!==n)&&this.setPreSelection(this.props.selected),void 0!==this.state.monthSelectedIn&&e.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),e.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:jr(this.props.highlightDates)}),t.focused||Xt(e.selected,this.props.selected)||this.setState({inputValue:null}),t.open!==this.state.open&&(!1===t.open&&!0===this.state.open&&this.props.onCalendarOpen(),!0===t.open&&!1===this.state.open&&this.props.onCalendarClose())}},{key:"componentWillUnmount",value:function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0)}},{key:"renderInputContainer",value:function(){var e=this.props,t=e.showIcon,r=e.icon,n=e.calendarIconClassname,a=e.toggleCalendarOnIconClick,s=this.state.open;return de.default.createElement("div",{className:"react-datepicker__input-container".concat(t?" react-datepicker__view-calendar-icon":"")},t&&de.default.createElement(en,Mt({icon:r,className:"".concat(n," ").concat(s&&"react-datepicker-ignore-onclickoutside")},a?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())}},{key:"render",value:function(){var e=this.renderCalendar();if(this.props.inline)return e;if(this.props.withPortal){var t=this.state.open?de.default.createElement(nn,{enableTabLoop:this.props.enableTabLoop},de.default.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},e)):null;return this.state.open&&this.props.portalId&&(t=de.default.createElement(tn,{portalId:this.props.portalId,portalHost:this.props.portalHost},t)),de.default.createElement("div",null,this.renderInputContainer(),t)}return de.default.createElement(an,{className:this.props.popperClassName,wrapperClassName:this.props.wrapperClassName,hidePopper:!this.isCalendarOpen(),portalId:this.props.portalId,portalHost:this.props.portalHost,popperModifiers:this.props.popperModifiers,targetComponent:this.renderInputContainer(),popperContainer:this.props.popperContainer,popperComponent:e,popperPlacement:this.props.popperPlacement,popperProps:this.props.popperProps,popperOnKeyDown:this.onPopperKeyDown,enableTabLoop:this.props.enableTabLoop})}}],[{key:"defaultProps",get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",onChange:function(){},disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",onFocus:function(){},onBlur:function(){},onKeyDown:function(){},onInputClick:function(){},onSelect:function(){},onClickOutside:function(){},onMonthChange:function(){},onCalendarOpen:function(){},onCalendarClose:function(){},preventOpenOnFocus:!1,onYearChange:function(){},onInputError:function(){},monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Lt,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1}}}]),r}(de.default.Component),un="input",dn="navigate";e.CalendarContainer=Qr,e.default=ln,e.getDefaultLocale=er,e.registerLocale=function(e,t){var r="undefined"!=typeof window?window:globalThis;r.__localeData__||(r.__localeData__={}),r.__localeData__[e]=t},e.setDefaultLocale=function(e){("undefined"!=typeof window?window:globalThis).__localeId__=e},Object.defineProperty(e,"__esModule",{value:!0})}(t,r(1),r(19),r(1997),r(2061),r(2060),r(2116),r(2047),r(2048),r(1942),r(1956),r(1953),r(1957),r(1958),r(1998),r(1999),r(2109),r(2e3),r(2001),r(2002),r(2003),r(2004),r(2005),r(2006),r(2043),r(2007),r(2008),r(2009),r(2010),r(2011),r(2012),r(2013),r(1937),r(2014),r(2015),r(2016),r(2017),r(1959),r(2018),r(2019),r(1938),r(1949),r(1982),r(1960),r(1970),r(1986),r(1983),r(1971),r(1984),r(2020),r(2021),r(2022),r(2023),r(2024),r(2025),r(2026),r(2027),r(1912),r(2058),r(2049),r(2028),r(56),r(2041),r(2031))},1990:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(2032),a=6378137;function s(e){return Object(n.c)(e,(function(e,t){return e+function(e){var t,r=0;switch(e.type){case"Polygon":return i(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)r+=i(e.coordinates[t]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)}),0)}function i(e){var t=0;if(e&&e.length>0){t+=Math.abs(o(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(o(e[r]))}return t}function o(e){var t,r,n,s,i,o,l=0,u=e.length;if(u>2){for(o=0;o<u;o++)o===u-2?(n=u-2,s=u-1,i=0):o===u-1?(n=u-1,s=0,i=1):(n=o,s=o+1,i=o+2),t=e[n],r=e[s],l+=(c(e[i][0])-c(t[0]))*Math.sin(c(r[1]));l=l*a*a/2}return l}function c(e){return e*Math.PI/180}},1991:function(e,t,r){"use strict";var n=r(2083);function a(){}var s={},i=["REJECTED"],o=["FULFILLED"],c=["PENDING"];function l(e){if("function"!==typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==a&&p(this,e)}function u(e,t,r){this.promise=e,"function"===typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"===typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function d(e,t,r){n((function(){var n;try{n=t(r)}catch(a){return s.reject(e,a)}n===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,n)}))}function h(e){var t=e&&e.then;if(e&&("object"===typeof e||"function"===typeof e)&&"function"===typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var r=!1;function n(t){r||(r=!0,s.reject(e,t))}function a(t){r||(r=!0,s.resolve(e,t))}var i=f((function(){t(a,n)}));"error"===i.status&&n(i.value)}function f(e,t){var r={};try{r.value=e(t),r.status="success"}catch(n){r.status="error",r.value=n}return r}e.exports=l,l.prototype.finally=function(e){if("function"!==typeof e)return this;var t=this.constructor;return this.then((function(r){return t.resolve(e()).then((function(){return r}))}),(function(r){return t.resolve(e()).then((function(){throw r}))}))},l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!==typeof e&&this.state===o||"function"!==typeof t&&this.state===i)return this;var r=new this.constructor(a);this.state!==c?d(r,this.state===o?e:t,this.outcome):this.queue.push(new u(r,e,t));return r},u.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){s.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},s.resolve=function(e,t){var r=f(h,t);if("error"===r.status)return s.reject(e,r.value);var n=r.value;if(n)p(e,n);else{e.state=o,e.outcome=t;for(var a=-1,i=e.queue.length;++a<i;)e.queue[a].callFulfilled(t)}return e},s.reject=function(e,t){e.state=i,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},l.resolve=function(e){if(e instanceof this)return e;return s.resolve(new this(a),e)},l.reject=function(e){var t=new this(a);return s.reject(t,e)},l.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);var i=new Array(r),o=0,c=-1,l=new this(a);for(;++c<r;)u(e[c],c);return l;function u(e,a){t.resolve(e).then((function(e){i[a]=e,++o!==r||n||(n=!0,s.resolve(l,i))}),(function(e){n||(n=!0,s.reject(l,e))}))}},l.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);var i=-1,o=new this(a);for(;++i<r;)c=e[i],t.resolve(c).then((function(e){n||(n=!0,s.resolve(o,e))}),(function(e){n||(n=!0,s.reject(o,e))}));var c;return o}},1992:function(e,t,r){(function(t){const r=t.URL;e.exports=(e,t)=>{if(!t)return e;const n=new r(e);return n.pathname="".concat(n.pathname,".").concat(t),n.href}}).call(this,r(93))},1997:function(e,t,r){var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=i(e,s(r)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=i(t,n));return t}function i(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},1998:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(1942),a=r(1911),s=r(1913);function i(e,t){Object(a.a)(2,arguments);var r=Object(s.a)(t);return Object(n.default)(e,-r)}},1999:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(1913),a=r(1956),s=r(1911);function i(e,t){Object(s.a)(2,arguments);var r=Object(n.a)(t);return Object(a.default)(e,-r)}},2e3:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(1913),a=r(1957),s=r(1911);function i(e,t){Object(s.a)(2,arguments);var r=Object(n.a)(t);return Object(a.default)(e,-r)}},2001:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(1913),a=r(1958),s=r(1911);function i(e,t){Object(s.a)(2,arguments);var r=Object(n.a)(t);return Object(a.default)(e,-r)}},2002:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(1912),a=r(1911);function s(e){return Object(a.a)(1,arguments),Object(n.default)(e).getSeconds()}},2003:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(1912),a=r(1911);function s(e){return Object(a.a)(1,arguments),Object(n.default)(e).getMinutes()}},2004:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(1912),a=r(1911);function s(e){return Object(a.a)(1,arguments),Object(n.default)(e).getHours()}},2005:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(1912),a=r(1911);function s(e){return Object(a.a)(1,arguments),Object(n.default)(e).getDay()}},2006:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(1912),a=r(1911);function s(e){return Object(a.a)(1,arguments),Object(n.default)(e).getDate()}},2007:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(1912),a=r(1911);function s(e){return Object(a.a)(1,arguments),Object(n.default)(e).getMonth()}},2008:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(1912),a=r(1911);function s(e){Object(a.a)(1,arguments);var t=Object(n.default)(e);return Math.floor(t.getMonth()/3)+1}},2009:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(1912),a=r(1911);function s(e){return Object(a.a)(1,arguments),Object(n.default)(e).getFullYear()}},2010:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(1912),a=r(1911);function s(e){return Object(a.a)(1,arguments),Object(n.default)(e).getTime()}},2011:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(1913),a=r(1912),s=r(1911);function i(e,t){Object(s.a)(2,arguments);var r=Object(a.default)(e),i=Object(n.a)(t);return r.setSeconds(i),r}},2012:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(1913),a=r(1912),s=r(1911);function i(e,t){Object(s.a)(2,arguments);var r=Object(a.default)(e),i=Object(n.a)(t);return r.setMinutes(i),r}},2013:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(1913),a=r(1912),s=r(1911);function i(e,t){Object(s.a)(2,arguments);var r=Object(a.default)(e),i=Object(n.a)(t);return r.setHours(i),r}},2014:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return o}));var n=r(1913),a=r(1912),s=r(1937),i=r(1911);function o(e,t){Object(i.a)(2,arguments);var r=Object(a.default)(e),o=Object(n.a)(t)-(Math.floor(r.getMonth()/3)+1);return Object(s.default)(r,r.getMonth()+3*o)}},2015:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(1913),a=r(1912),s=r(1911);function i(e,t){Object(s.a)(2,arguments);var r=Object(a.default)(e),i=Object(n.a)(t);return isNaN(r.getTime())?new Date(NaN):(r.setFullYear(i),r)}},2016:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(67),a=r(1912),s=r(1911);function i(e){var t,r;if(Object(s.a)(1,arguments),e&&"function"===typeof e.forEach)t=e;else{if("object"!==Object(n.a)(e)||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=Object(a.default)(e);(void 0===r||r>t||isNaN(t.getDate()))&&(r=t)})),r||new Date(NaN)}},2017:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(67),a=r(1912),s=r(1911);function i(e){var t,r;if(Object(s.a)(1,arguments),e&&"function"===typeof e.forEach)t=e;else{if("object"!==Object(n.a)(e)||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=Object(a.default)(e);(void 0===r||r<t||isNaN(Number(t)))&&(r=t)})),r||new Date(NaN)}},2020:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(1912),a=r(1911);function s(e,t){Object(a.a)(2,arguments);var r=Object(n.default)(e),s=Object(n.default)(t);return r.getTime()===s.getTime()}},2021:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(1938),a=r(1911);function s(e,t){Object(a.a)(2,arguments);var r=Object(n.default)(e),s=Object(n.default)(t);return r.getTime()===s.getTime()}},2022:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(1912),a=r(1911);function s(e,t){Object(a.a)(2,arguments);var r=Object(n.default)(e),s=Object(n.default)(t);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}},2023:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(1912),a=r(1911);function s(e,t){Object(a.a)(2,arguments);var r=Object(n.default)(e),s=Object(n.default)(t);return r.getFullYear()===s.getFullYear()}},2024:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(1960),a=r(1911);function s(e,t){Object(a.a)(2,arguments);var r=Object(n.default)(e),s=Object(n.default)(t);return r.getTime()===s.getTime()}},2025:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(1912),a=r(1911);function s(e,t){Object(a.a)(2,arguments);var r=Object(n.default)(e),s=Object(n.default)(t);return r.getTime()>s.getTime()}},2026:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(1912),a=r(1911);function s(e,t){Object(a.a)(2,arguments);var r=Object(n.default)(e),s=Object(n.default)(t);return r.getTime()<s.getTime()}},2027:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(1912),a=r(1911);function s(e,t){Object(a.a)(2,arguments);var r=Object(n.default)(e).getTime(),s=Object(n.default)(t.start).getTime(),i=Object(n.default)(t.end).getTime();if(!(s<=i))throw new RangeError("Invalid interval");return r>=s&&r<=i}},2028:function(e,t,r){"use strict";r.r(t),r.d(t,"IGNORE_CLASS_NAME",(function(){return f}));var n=r(1),a=r(56);function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t,r){return e===t||(e.correspondingElement?e.correspondingElement.classList.contains(r):e.classList.contains(r))}var c,l,u=(void 0===c&&(c=0),function(){return++c}),d={},h={},p=["touchstart","touchmove"],f="ignore-react-onclickoutside";function m(e,t){var r={};return-1!==p.indexOf(t)&&l&&(r.passive=!e.props.preventDefault),r}t.default=function(e,t){var r,c,p=e.displayName||e.name||"Component";return c=r=function(r){var c,f;function g(e){var n;return(n=r.call(this,e)||this).__outsideClickHandler=function(e){if("function"!==typeof n.__clickOutsideHandlerProp){var t=n.getInstance();if("function"!==typeof t.props.handleClickOutside){if("function"!==typeof t.handleClickOutside)throw new Error("WrappedComponent: "+p+" lacks a handleClickOutside(event) function for processing outside click events.");t.handleClickOutside(e)}else t.props.handleClickOutside(e)}else n.__clickOutsideHandlerProp(e)},n.__getComponentNode=function(){var e=n.getInstance();return t&&"function"===typeof t.setClickOutsideRef?t.setClickOutsideRef()(e):"function"===typeof e.setClickOutsideRef?e.setClickOutsideRef():Object(a.findDOMNode)(e)},n.enableOnClickOutside=function(){if("undefined"!==typeof document&&!h[n._uid]){"undefined"===typeof l&&(l=function(){if("undefined"!==typeof window&&"function"===typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),r=function(){};return window.addEventListener("testPassiveEventSupport",r,t),window.removeEventListener("testPassiveEventSupport",r,t),e}}()),h[n._uid]=!0;var e=n.props.eventTypes;e.forEach||(e=[e]),d[n._uid]=function(e){var t;null!==n.componentNode&&(n.props.preventDefault&&e.preventDefault(),n.props.stopPropagation&&e.stopPropagation(),n.props.excludeScrollbar&&(t=e,document.documentElement.clientWidth<=t.clientX||document.documentElement.clientHeight<=t.clientY)||function(e,t,r){if(e===t)return!0;for(;e.parentNode||e.host;){if(e.parentNode&&o(e,t,r))return!0;e=e.parentNode||e.host}return e}(e.composed&&e.composedPath&&e.composedPath().shift()||e.target,n.componentNode,n.props.outsideClickIgnoreClass)===document&&n.__outsideClickHandler(e))},e.forEach((function(e){document.addEventListener(e,d[n._uid],m(i(n),e))}))}},n.disableOnClickOutside=function(){delete h[n._uid];var e=d[n._uid];if(e&&"undefined"!==typeof document){var t=n.props.eventTypes;t.forEach||(t=[t]),t.forEach((function(t){return document.removeEventListener(t,e,m(i(n),t))})),delete d[n._uid]}},n.getRef=function(e){return n.instanceRef=e},n._uid=u(),n}f=r,(c=g).prototype=Object.create(f.prototype),c.prototype.constructor=c,s(c,f);var y=g.prototype;return y.getInstance=function(){if(e.prototype&&!e.prototype.isReactComponent)return this;var t=this.instanceRef;return t.getInstance?t.getInstance():t},y.componentDidMount=function(){if("undefined"!==typeof document&&document.createElement){var e=this.getInstance();if(t&&"function"===typeof t.handleClickOutside&&(this.__clickOutsideHandlerProp=t.handleClickOutside(e),"function"!==typeof this.__clickOutsideHandlerProp))throw new Error("WrappedComponent: "+p+" lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=this.__getComponentNode(),this.props.disableOnClickOutside||this.enableOnClickOutside()}},y.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},y.componentWillUnmount=function(){this.disableOnClickOutside()},y.render=function(){var t=this.props;t.excludeScrollbar;var r=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(t,["excludeScrollbar"]);return e.prototype&&e.prototype.isReactComponent?r.ref=this.getRef:r.wrappedRef=this.getRef,r.disableOnClickOutside=this.disableOnClickOutside,r.enableOnClickOutside=this.enableOnClickOutside,Object(n.createElement)(e,r)},g}(n.Component),r.displayName="OnClickOutside("+p+")",r.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:t&&t.excludeScrollbar||!1,outsideClickIgnoreClass:f,preventDefault:!1,stopPropagation:!1},r.getClass=function(){return e.getClass?e.getClass():e},c}},2029:function(e,t){var r="undefined"!==typeof Element,n="function"===typeof Map,a="function"===typeof Set,s="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function i(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var o,c,l,u;if(Array.isArray(e)){if((o=e.length)!=t.length)return!1;for(c=o;0!==c--;)if(!i(e[c],t[c]))return!1;return!0}if(n&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(u=e.entries();!(c=u.next()).done;)if(!t.has(c.value[0]))return!1;for(u=e.entries();!(c=u.next()).done;)if(!i(c.value[1],t.get(c.value[0])))return!1;return!0}if(a&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(u=e.entries();!(c=u.next()).done;)if(!t.has(c.value[0]))return!1;return!0}if(s&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if((o=e.length)!=t.length)return!1;for(c=o;0!==c--;)if(e[c]!==t[c])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof t.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof t.toString)return e.toString()===t.toString();if((o=(l=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(c=o;0!==c--;)if(!Object.prototype.hasOwnProperty.call(t,l[c]))return!1;if(r&&e instanceof Element)return!1;for(c=o;0!==c--;)if(("_owner"!==l[c]&&"__v"!==l[c]&&"__o"!==l[c]||!e.$$typeof)&&!i(e[l[c]],t[l[c]]))return!1;return!0}return e!==e&&t!==t}e.exports=function(e,t){try{return i(e,t)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}}},2030:function(e,t,r){"use strict";var n=function(){};e.exports=n},2031:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return c}));var n=r(67),a=r(1912),s=r(1937),i=r(1913),o=r(1911);function c(e,t){if(Object(o.a)(2,arguments),"object"!==Object(n.a)(t)||null===t)throw new RangeError("values parameter must be an object");var r=Object(a.default)(e);return isNaN(r.getTime())?new Date(NaN):(null!=t.year&&r.setFullYear(t.year),null!=t.month&&(r=Object(s.default)(r,t.month)),null!=t.date&&r.setDate(Object(i.a)(t.date)),null!=t.hours&&r.setHours(Object(i.a)(t.hours)),null!=t.minutes&&r.setMinutes(Object(i.a)(t.minutes)),null!=t.seconds&&r.setSeconds(Object(i.a)(t.seconds)),null!=t.milliseconds&&r.setMilliseconds(Object(i.a)(t.milliseconds)),r)}},2034:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return s}));var n=r(1);const a=[{label:"Bing",value:"Bing"},{label:"Mapbox Satellite",value:"Mapbox"},{label:"ESRI World Imagery",value:"EsriWorldImagery"},{label:"ESRI World Imagery (Clarity) Beta",value:"EsriWorldImageryClarity"},{label:"Maxar Premium",value:"Maxar-Premium"},{label:"Maxar Standard",value:"Maxar-Standard"},{label:"Custom",value:"custom"}],s=e=>Object(n.useMemo)((()=>{if(e){const t=a.filter((t=>t.value===e));return t.length?t[0]:a[a.length-1]}return null}),[e])},2039:function(e,t,r){!function(e){"use strict";function t(e){return e&&e.normalize&&e.normalize(),e&&e.textContent||""}function r(e,t){const r=e.getElementsByTagName(t);return r.length?r[0]:null}function n(e){const n={};if(e){const a=r(e,"line");if(a){const e=t(r(a,"color")),s=parseFloat(t(r(a,"opacity"))),i=parseFloat(t(r(a,"width")));e&&(n.stroke=e),isNaN(s)||(n["stroke-opacity"]=s),isNaN(i)||(n["stroke-width"]=96*i/25.4)}}return n}function a(e){let r=[];if(null!==e)for(let n=0;n<e.childNodes.length;n++){const s=e.childNodes[n];if(1!==s.nodeType)continue;const i=["heart","gpxtpx:hr","hr"].includes(s.nodeName)?"heart":s.nodeName;if("gpxtpx:TrackPointExtension"===i)r=r.concat(a(s));else{const e=t(s);r.push([i,isNaN(e)?e:parseFloat(e)])}}return r}function s(e,n){const a={};let s,i;for(i=0;i<n.length;i++)s=r(e,n[i]),s&&(a[n[i]]=t(s));return a}function i(e){const r=s(e,["name","cmt","desc","type","time","keywords"]),n=e.getElementsByTagNameNS("http://www.garmin.com/xmlschemas/GpxExtensions/v3","*");for(let s=0;s<n.length;s++){const a=n[s];a.parentNode.parentNode===e&&(r[a.tagName.replace(":","_")]=t(a))}const a=e.getElementsByTagName("link");a.length&&(r.links=[]);for(let t=0;t<a.length;t++)r.links.push(Object.assign({href:a[t].getAttribute("href")},s(a[t],["text","type"])));return r}function o(e){const n=[parseFloat(e.getAttribute("lon")),parseFloat(e.getAttribute("lat"))],s=r(e,"ele"),i=r(e,"time");if(s){const e=parseFloat(t(s));isNaN(e)||n.push(e)}return{coordinates:n,time:i?t(i):null,extendedValues:a(r(e,"extensions"))}}function c(e){const t=l(e,"rtept");if(t)return{type:"Feature",properties:Object.assign(i(e),n(r(e,"extensions")),{_gpxType:"rte"}),geometry:{type:"LineString",coordinates:t.line}}}function l(e,t){const r=e.getElementsByTagName(t);if(r.length<2)return;const n=[],a=[],s={};for(let i=0;i<r.length;i++){const e=o(r[i]);n.push(e.coordinates),e.time&&a.push(e.time);for(let t=0;t<e.extendedValues.length;t++){const[n,a]=e.extendedValues[t],o="heart"===n?n:n.replace("gpxtpx:","")+"s";s[o]||(s[o]=Array(r.length).fill(null)),s[o][i]=a}}return{line:n,times:a,extendedValues:s}}function u(e){const t=e.getElementsByTagName("trkseg"),a=[],s=[],o=[];for(let r=0;r<t.length;r++){const e=l(t[r],"trkpt");e&&(o.push(e),e.times&&e.times.length&&s.push(e.times))}if(0===o.length)return;const c=o.length>1,u=Object.assign(i(e),n(r(e,"extensions")),{_gpxType:"trk"},s.length?{coordinateProperties:{times:c?s:s[0]}}:{});for(let r=0;r<o.length;r++){const e=o[r];a.push(e.line);for(const[t,n]of Object.entries(e.extendedValues)){u.coordinateProperties||(u.coordinateProperties={});const e=u.coordinateProperties;c?(e[t]||(e[t]=o.map((e=>new Array(e.line.length).fill(null)))),e[t][r]=n):e[t]=n}}return{type:"Feature",properties:u,geometry:c?{type:"MultiLineString",coordinates:a}:{type:"LineString",coordinates:a[0]}}}function*d(e){const t=e.getElementsByTagName("trk"),r=e.getElementsByTagName("rte"),n=e.getElementsByTagName("wpt");for(let s=0;s<t.length;s++){const e=u(t[s]);e&&(yield e)}for(let s=0;s<r.length;s++){const e=c(r[s]);e&&(yield e)}for(let c=0;c<n.length;c++)yield(a=n[c],{type:"Feature",properties:Object.assign(i(a),s(a,["sym"])),geometry:{type:"Point",coordinates:o(a).coordinates}});var a}const h=[["heartRate","heartRates"],["Cadence","cadences"],["Speed","speeds"],["Watts","watts"]],p=[["TotalTimeSeconds","totalTimeSeconds"],["DistanceMeters","distanceMeters"],["MaximumSpeed","maxSpeed"],["AverageHeartRateBpm","avgHeartRate"],["MaximumHeartRateBpm","maxHeartRate"],["AvgSpeed","avgSpeed"],["AvgWatts","avgWatts"],["MaxWatts","maxWatts"]];function f(e,n){const a=[];for(const[s,i]of n){let n=r(e,s);if(!n){const t=e.getElementsByTagNameNS("http://www.garmin.com/xmlschemas/ActivityExtension/v2",s);t.length&&(n=t[0])}const o=parseFloat(t(n));isNaN(o)||a.push([i,o])}return a}function m(e){const n=t(r(e,"LongitudeDegrees")),a=t(r(e,"LatitudeDegrees"));if(!n.length||!a.length)return null;const s=[parseFloat(n),parseFloat(a)],i=r(e,"AltitudeMeters"),o=r(e,"HeartRateBpm"),c=r(e,"Time");let l;return i&&(l=parseFloat(t(i)),isNaN(l)||s.push(l)),{coordinates:s,time:c?t(c):null,heartRate:o?parseFloat(t(o)):null,extensions:f(e,h)}}function g(e,t){const r=e.getElementsByTagName(t),n=[],a=[],s=[];if(r.length<2)return null;const i={extendedProperties:{}};for(let o=0;o<r.length;o++){const e=m(r[o]);if(null!==e){n.push(e.coordinates),e.time&&a.push(e.time),e.heartRate&&s.push(e.heartRate);for(const[t,n]of e.extensions)i.extendedProperties[t]||(i.extendedProperties[t]=Array(r.length).fill(null)),i.extendedProperties[t][o]=n}}return Object.assign(i,{line:n,times:a,heartRates:s})}function y(e){const n=e.getElementsByTagName("Track"),a=[],s=[],i=[],o=[];let c;const l=function(e){const t={};for(const[r,n]of e)t[r]=n;return t}(f(e,p)),u=r(e,"Name");u&&(l.name=t(u));for(let t=0;t<n.length;t++)c=g(n[t],"Trackpoint"),c&&(a.push(c.line),c.times.length&&s.push(c.times),c.heartRates.length&&i.push(c.heartRates),o.push(c.extendedProperties));for(let t=0;t<o.length;t++){const e=o[t];for(const r in e)1===n.length?l[r]=c.extendedProperties[r]:(l[r]||(l[r]=a.map((e=>Array(e.length).fill(null)))),l[r][t]=e[r])}if(0!==a.length)return(s.length||i.length)&&(l.coordinateProperties=Object.assign(s.length?{times:1===a.length?s[0]:s}:{},i.length?{heart:1===a.length?i[0]:i}:{})),{type:"Feature",properties:l,geometry:{type:1===a.length?"LineString":"MultiLineString",coordinates:1===a.length?a[0]:a}}}function*b(e){const t=e.getElementsByTagName("Lap");for(let n=0;n<t.length;n++){const e=y(t[n]);e&&(yield e)}const r=e.getElementsByTagName("Courses");for(let n=0;n<r.length;n++){const e=y(r[n]);e&&(yield e)}}const v=/\s*/g,_=/^\s*|\s*$/g,w=/\s+/;function j(e){if(!e||!e.length)return 0;let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return t}function x(e){return e.replace(v,"").split(",").map(parseFloat)}function M(e){return e.replace(_,"").split(w).map(x)}function O(e){if(void 0!==e.xml)return e.xml;if(e.tagName){let t=e.tagName;for(let r=0;r<e.attributes.length;r++)t+=e.attributes[r].name+e.attributes[r].value;for(let r=0;r<e.childNodes.length;r++)t+=O(e.childNodes[r]);return t}return"#text"===e.nodeName?(e.nodeValue||e.value||"").trim():"#cdata-section"===e.nodeName?e.nodeValue:""}const k=["Polygon","LineString","Point","Track","gx:Track"];function C(e,n,a){let s=t(r(n,"color"))||"";const i="stroke"==a||"fill"===a?a:a+"-color";"#"===s.substr(0,1)&&(s=s.substr(1)),6===s.length||3===s.length?e[i]=s:8===s.length&&(e[a+"-opacity"]=parseInt(s.substr(0,2),16)/255,e[i]="#"+s.substr(6,2)+s.substr(4,2)+s.substr(2,2))}function E(e,n,a,s){const i=parseFloat(t(r(n,a)));isNaN(i)||(e[s]=i)}function S(e){let r=e.getElementsByTagName("coord");const n=[],a=[];0===r.length&&(r=e.getElementsByTagName("gx:coord"));for(let i=0;i<r.length;i++)n.push(t(r[i]).split(" ").map(parseFloat));const s=e.getElementsByTagName("when");for(let i=0;i<s.length;i++)a.push(t(s[i]));return{coords:n,times:a}}function N(e){let n,a,s,i,o;const c=[],l=[];if(r(e,"MultiGeometry"))return N(r(e,"MultiGeometry"));if(r(e,"MultiTrack"))return N(r(e,"MultiTrack"));if(r(e,"gx:MultiTrack"))return N(r(e,"gx:MultiTrack"));for(s=0;s<k.length;s++)if(a=e.getElementsByTagName(k[s]),a)for(i=0;i<a.length;i++)if(n=a[i],"Point"===k[s])c.push({type:"Point",coordinates:x(t(r(n,"coordinates")))});else if("LineString"===k[s])c.push({type:"LineString",coordinates:M(t(r(n,"coordinates")))});else if("Polygon"===k[s]){const e=n.getElementsByTagName("LinearRing"),a=[];for(o=0;o<e.length;o++)a.push(M(t(r(e[o],"coordinates"))));c.push({type:"Polygon",coordinates:a})}else if("Track"===k[s]||"gx:Track"===k[s]){const e=S(n);c.push({type:"LineString",coordinates:e.coords}),e.times.length&&l.push(e.times)}return{geoms:c,coordTimes:l}}function I(e,n,a,s){const i=N(e);let o;const c={},l=t(r(e,"name")),u=t(r(e,"address"));let d=t(r(e,"styleUrl"));const h=t(r(e,"description")),p=r(e,"TimeSpan"),f=r(e,"TimeStamp"),m=r(e,"ExtendedData");let g=r(e,"IconStyle"),y=r(e,"LabelStyle"),b=r(e,"LineStyle"),v=r(e,"PolyStyle");const _=r(e,"visibility");if(l&&(c.name=l),u&&(c.address=u),d){"#"!==d[0]&&(d="#"+d),c.styleUrl=d,n[d]&&(c.styleHash=n[d]),a[d]&&(c.styleMapHash=a[d],c.styleHash=n[a[d].normal]);const e=s[c.styleHash];e&&(g||(g=r(e,"IconStyle")),y||(y=r(e,"LabelStyle")),b||(b=r(e,"LineStyle")),v||(v=r(e,"PolyStyle")))}if(h&&(c.description=h),p){const e=t(r(p,"begin")),n=t(r(p,"end"));c.timespan={begin:e,end:n}}if(f&&(c.timestamp=t(r(f,"when"))),g){C(c,g,"icon"),E(c,g,"scale","icon-scale"),E(c,g,"heading","icon-heading");const e=r(g,"hotSpot");if(e){const t=parseFloat(e.getAttribute("x")),r=parseFloat(e.getAttribute("y"));isNaN(t)||isNaN(r)||(c["icon-offset"]=[t,r])}const n=r(g,"Icon");if(n){const e=t(r(n,"href"));e&&(c.icon=e)}}if(y&&(C(c,y,"label"),E(c,y,"scale","label-scale")),b&&(C(c,b,"stroke"),E(c,b,"width","stroke-width")),v){C(c,v,"fill");const e=t(r(v,"fill")),n=t(r(v,"outline"));e&&(c["fill-opacity"]="1"===e?c["fill-opacity"]||1:0),n&&(c["stroke-opacity"]="1"===n?c["stroke-opacity"]||1:0)}if(m){const e=m.getElementsByTagName("Data"),n=m.getElementsByTagName("SimpleData");for(o=0;o<e.length;o++)c[e[o].getAttribute("name")]=t(r(e[o],"value"));for(o=0;o<n.length;o++)c[n[o].getAttribute("name")]=t(n[o])}_&&(c.visibility=t(_)),i.coordTimes.length&&(c.coordinateProperties={times:1===i.coordTimes.length?i.coordTimes[0]:i.coordTimes});const w={type:"Feature",geometry:0===i.geoms.length?null:1===i.geoms.length?i.geoms[0]:{type:"GeometryCollection",geometries:i.geoms},properties:c};return e.getAttribute("id")&&(w.id=e.getAttribute("id")),w}function*D(e){const n={},a={},s={},i=e.getElementsByTagName("Placemark"),o=e.getElementsByTagName("Style"),c=e.getElementsByTagName("StyleMap");for(let t=0;t<o.length;t++){const e=o[t],r=j(O(e)).toString(16);let s=e.getAttribute("id");s||"CascadingStyle"!==e.parentNode.tagName.replace("gx:","")||(s=e.parentNode.getAttribute("kml:id")||e.parentNode.getAttribute("id")),n["#"+s]=r,a[r]=e}for(let l=0;l<c.length;l++){n["#"+c[l].getAttribute("id")]=j(O(c[l])).toString(16);const e=c[l].getElementsByTagName("Pair"),a={};for(let n=0;n<e.length;n++)a[t(r(e[n],"key"))]=t(r(e[n],"styleUrl"));s["#"+c[l].getAttribute("id")]=a}for(let t=0;t<i.length;t++){const e=I(i[t],n,s,a);e&&(yield e)}}e.gpx=function(e){return{type:"FeatureCollection",features:Array.from(d(e))}},e.gpxGen=d,e.kml=function(e){return{type:"FeatureCollection",features:Array.from(D(e))}},e.kmlGen=D,e.tcx=function(e){return{type:"FeatureCollection",features:Array.from(b(e))}},e.tcxGen=b,Object.defineProperty(e,"__esModule",{value:!0})}(t)},2041:function(e,t,r){"use strict";r.r(t),r.d(t,"Popper",(function(){return De})),r.d(t,"Manager",(function(){return i})),r.d(t,"Reference",(function(){return Pe})),r.d(t,"usePopper",(function(){return Ee}));var n=r(1),a=n.createContext(),s=n.createContext();function i(e){var t=e.children,r=n.useState(null),i=r[0],o=r[1],c=n.useRef(!1);n.useEffect((function(){return function(){c.current=!0}}),[]);var l=n.useCallback((function(e){c.current||o(e)}),[]);return n.createElement(a.Provider,{value:i},n.createElement(s.Provider,{value:l},t))}var o=function(e){return Array.isArray(e)?e[0]:e},c=function(e){if("function"===typeof e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.apply(void 0,r)}},l=function(e,t){if("function"===typeof e)return c(e,t);null!=e&&(e.current=t)},u=function(e){return e.reduce((function(e,t){var r=t[0],n=t[1];return e[r]=n,e}),{})},d="undefined"!==typeof window&&window.document&&window.document.createElement?n.useLayoutEffect:n.useEffect,h=r(56);function p(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function f(e){return e instanceof p(e).Element||e instanceof Element}function m(e){return e instanceof p(e).HTMLElement||e instanceof HTMLElement}function g(e){return"undefined"!==typeof ShadowRoot&&(e instanceof p(e).ShadowRoot||e instanceof ShadowRoot)}var y=Math.max,b=Math.min,v=Math.round;function _(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function w(){return!/^((?!chrome|android).)*safari/i.test(_())}function j(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var n=e.getBoundingClientRect(),a=1,s=1;t&&m(e)&&(a=e.offsetWidth>0&&v(n.width)/e.offsetWidth||1,s=e.offsetHeight>0&&v(n.height)/e.offsetHeight||1);var i=(f(e)?p(e):window).visualViewport,o=!w()&&r,c=(n.left+(o&&i?i.offsetLeft:0))/a,l=(n.top+(o&&i?i.offsetTop:0))/s,u=n.width/a,d=n.height/s;return{width:u,height:d,top:l,right:c+u,bottom:l+d,left:c,x:c,y:l}}function x(e){var t=p(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function M(e){return e?(e.nodeName||"").toLowerCase():null}function O(e){return((f(e)?e.ownerDocument:e.document)||window.document).documentElement}function k(e){return j(O(e)).left+x(e).scrollLeft}function C(e){return p(e).getComputedStyle(e)}function E(e){var t=C(e),r=t.overflow,n=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+n)}function S(e,t,r){void 0===r&&(r=!1);var n=m(t),a=m(t)&&function(e){var t=e.getBoundingClientRect(),r=v(t.width)/e.offsetWidth||1,n=v(t.height)/e.offsetHeight||1;return 1!==r||1!==n}(t),s=O(t),i=j(e,a,r),o={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(n||!n&&!r)&&(("body"!==M(t)||E(s))&&(o=function(e){return e!==p(e)&&m(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:x(e);var t}(t)),m(t)?((c=j(t,!0)).x+=t.clientLeft,c.y+=t.clientTop):s&&(c.x=k(s))),{x:i.left+o.scrollLeft-c.x,y:i.top+o.scrollTop-c.y,width:i.width,height:i.height}}function N(e){var t=j(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function I(e){return"html"===M(e)?e:e.assignedSlot||e.parentNode||(g(e)?e.host:null)||O(e)}function D(e){return["html","body","#document"].indexOf(M(e))>=0?e.ownerDocument.body:m(e)&&E(e)?e:D(I(e))}function T(e,t){var r;void 0===t&&(t=[]);var n=D(e),a=n===(null==(r=e.ownerDocument)?void 0:r.body),s=p(n),i=a?[s].concat(s.visualViewport||[],E(n)?n:[]):n,o=t.concat(i);return a?o:o.concat(T(I(i)))}function A(e){return["table","td","th"].indexOf(M(e))>=0}function P(e){return m(e)&&"fixed"!==C(e).position?e.offsetParent:null}function L(e){for(var t=p(e),r=P(e);r&&A(r)&&"static"===C(r).position;)r=P(r);return r&&("html"===M(r)||"body"===M(r)&&"static"===C(r).position)?t:r||function(e){var t=/firefox/i.test(_());if(/Trident/i.test(_())&&m(e)&&"fixed"===C(e).position)return null;var r=I(e);for(g(r)&&(r=r.host);m(r)&&["html","body"].indexOf(M(r))<0;){var n=C(r);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||t&&"filter"===n.willChange||t&&n.filter&&"none"!==n.filter)return r;r=r.parentNode}return null}(e)||t}var R="top",F="bottom",B="right",U="left",z="auto",Y=[R,F,B,U],G="start",W="end",V="clippingParents",q="viewport",H="popper",K="reference",Z=Y.reduce((function(e,t){return e.concat([t+"-"+G,t+"-"+W])}),[]),J=[].concat(Y,[z]).reduce((function(e,t){return e.concat([t,t+"-"+G,t+"-"+W])}),[]),Q=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function X(e){var t=new Map,r=new Set,n=[];function a(e){r.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!r.has(e)){var n=t.get(e);n&&a(n)}})),n.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){r.has(e.name)||a(e)})),n}function $(e){var t;return function(){return t||(t=new Promise((function(r){Promise.resolve().then((function(){t=void 0,r(e())}))}))),t}}var ee={placement:"bottom",modifiers:[],strategy:"absolute"};function te(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function re(e){void 0===e&&(e={});var t=e,r=t.defaultModifiers,n=void 0===r?[]:r,a=t.defaultOptions,s=void 0===a?ee:a;return function(e,t,r){void 0===r&&(r=s);var a={placement:"bottom",orderedModifiers:[],options:Object.assign({},ee,s),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},i=[],o=!1,c={state:a,setOptions:function(r){var o="function"===typeof r?r(a.options):r;l(),a.options=Object.assign({},s,a.options,o),a.scrollParents={reference:f(e)?T(e):e.contextElement?T(e.contextElement):[],popper:T(t)};var u=function(e){var t=X(e);return Q.reduce((function(e,r){return e.concat(t.filter((function(e){return e.phase===r})))}),[])}(function(e){var t=e.reduce((function(e,t){var r=e[t.name];return e[t.name]=r?Object.assign({},r,t,{options:Object.assign({},r.options,t.options),data:Object.assign({},r.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(n,a.options.modifiers)));return a.orderedModifiers=u.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,r=e.options,n=void 0===r?{}:r,s=e.effect;if("function"===typeof s){var o=s({state:a,name:t,instance:c,options:n}),l=function(){};i.push(o||l)}})),c.update()},forceUpdate:function(){if(!o){var e=a.elements,t=e.reference,r=e.popper;if(te(t,r)){a.rects={reference:S(t,L(r),"fixed"===a.options.strategy),popper:N(r)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var n=0;n<a.orderedModifiers.length;n++)if(!0!==a.reset){var s=a.orderedModifiers[n],i=s.fn,l=s.options,u=void 0===l?{}:l,d=s.name;"function"===typeof i&&(a=i({state:a,options:u,name:d,instance:c})||a)}else a.reset=!1,n=-1}}},update:$((function(){return new Promise((function(e){c.forceUpdate(),e(a)}))})),destroy:function(){l(),o=!0}};if(!te(e,t))return c;function l(){i.forEach((function(e){return e()})),i=[]}return c.setOptions(r).then((function(e){!o&&r.onFirstUpdate&&r.onFirstUpdate(e)})),c}}var ne={passive:!0};function ae(e){return e.split("-")[0]}function se(e){return e.split("-")[1]}function ie(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function oe(e){var t,r=e.reference,n=e.element,a=e.placement,s=a?ae(a):null,i=a?se(a):null,o=r.x+r.width/2-n.width/2,c=r.y+r.height/2-n.height/2;switch(s){case R:t={x:o,y:r.y-n.height};break;case F:t={x:o,y:r.y+r.height};break;case B:t={x:r.x+r.width,y:c};break;case U:t={x:r.x-n.width,y:c};break;default:t={x:r.x,y:r.y}}var l=s?ie(s):null;if(null!=l){var u="y"===l?"height":"width";switch(i){case G:t[l]=t[l]-(r[u]/2-n[u]/2);break;case W:t[l]=t[l]+(r[u]/2-n[u]/2)}}return t}var ce={top:"auto",right:"auto",bottom:"auto",left:"auto"};function le(e){var t,r=e.popper,n=e.popperRect,a=e.placement,s=e.variation,i=e.offsets,o=e.position,c=e.gpuAcceleration,l=e.adaptive,u=e.roundOffsets,d=e.isFixed,h=i.x,f=void 0===h?0:h,m=i.y,g=void 0===m?0:m,y="function"===typeof u?u({x:f,y:g}):{x:f,y:g};f=y.x,g=y.y;var b=i.hasOwnProperty("x"),_=i.hasOwnProperty("y"),w=U,j=R,x=window;if(l){var M=L(r),k="clientHeight",E="clientWidth";if(M===p(r)&&"static"!==C(M=O(r)).position&&"absolute"===o&&(k="scrollHeight",E="scrollWidth"),a===R||(a===U||a===B)&&s===W)j=F,g-=(d&&M===x&&x.visualViewport?x.visualViewport.height:M[k])-n.height,g*=c?1:-1;if(a===U||(a===R||a===F)&&s===W)w=B,f-=(d&&M===x&&x.visualViewport?x.visualViewport.width:M[E])-n.width,f*=c?1:-1}var S,N=Object.assign({position:o},l&&ce),I=!0===u?function(e,t){var r=e.x,n=e.y,a=t.devicePixelRatio||1;return{x:v(r*a)/a||0,y:v(n*a)/a||0}}({x:f,y:g},p(r)):{x:f,y:g};return f=I.x,g=I.y,c?Object.assign({},N,((S={})[j]=_?"0":"",S[w]=b?"0":"",S.transform=(x.devicePixelRatio||1)<=1?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",S)):Object.assign({},N,((t={})[j]=_?g+"px":"",t[w]=b?f+"px":"",t.transform="",t))}var ue={left:"right",right:"left",bottom:"top",top:"bottom"};function de(e){return e.replace(/left|right|bottom|top/g,(function(e){return ue[e]}))}var he={start:"end",end:"start"};function pe(e){return e.replace(/start|end/g,(function(e){return he[e]}))}function fe(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&g(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function me(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ge(e,t,r){return t===q?me(function(e,t){var r=p(e),n=O(e),a=r.visualViewport,s=n.clientWidth,i=n.clientHeight,o=0,c=0;if(a){s=a.width,i=a.height;var l=w();(l||!l&&"fixed"===t)&&(o=a.offsetLeft,c=a.offsetTop)}return{width:s,height:i,x:o+k(e),y:c}}(e,r)):f(t)?function(e,t){var r=j(e,!1,"fixed"===t);return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}(t,r):me(function(e){var t,r=O(e),n=x(e),a=null==(t=e.ownerDocument)?void 0:t.body,s=y(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),i=y(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),o=-n.scrollLeft+k(e),c=-n.scrollTop;return"rtl"===C(a||r).direction&&(o+=y(r.clientWidth,a?a.clientWidth:0)-s),{width:s,height:i,x:o,y:c}}(O(e)))}function ye(e,t,r,n){var a="clippingParents"===t?function(e){var t=T(I(e)),r=["absolute","fixed"].indexOf(C(e).position)>=0&&m(e)?L(e):e;return f(r)?t.filter((function(e){return f(e)&&fe(e,r)&&"body"!==M(e)})):[]}(e):[].concat(t),s=[].concat(a,[r]),i=s[0],o=s.reduce((function(t,r){var a=ge(e,r,n);return t.top=y(a.top,t.top),t.right=b(a.right,t.right),t.bottom=b(a.bottom,t.bottom),t.left=y(a.left,t.left),t}),ge(e,i,n));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function be(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function ve(e,t){return t.reduce((function(t,r){return t[r]=e,t}),{})}function _e(e,t){void 0===t&&(t={});var r=t,n=r.placement,a=void 0===n?e.placement:n,s=r.strategy,i=void 0===s?e.strategy:s,o=r.boundary,c=void 0===o?V:o,l=r.rootBoundary,u=void 0===l?q:l,d=r.elementContext,h=void 0===d?H:d,p=r.altBoundary,m=void 0!==p&&p,g=r.padding,y=void 0===g?0:g,b=be("number"!==typeof y?y:ve(y,Y)),v=h===H?K:H,_=e.rects.popper,w=e.elements[m?v:h],x=ye(f(w)?w:w.contextElement||O(e.elements.popper),c,u,i),M=j(e.elements.reference),k=oe({reference:M,element:_,strategy:"absolute",placement:a}),C=me(Object.assign({},_,k)),E=h===H?C:M,S={top:x.top-E.top+b.top,bottom:E.bottom-x.bottom+b.bottom,left:x.left-E.left+b.left,right:E.right-x.right+b.right},N=e.modifiersData.offset;if(h===H&&N){var I=N[a];Object.keys(S).forEach((function(e){var t=[B,F].indexOf(e)>=0?1:-1,r=[R,F].indexOf(e)>=0?"y":"x";S[e]+=I[r]*t}))}return S}function we(e,t,r){return y(e,b(t,r))}function je(e,t,r){return void 0===r&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function xe(e){return[R,B,F,U].some((function(t){return e[t]>=0}))}var Me=re({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,r=e.instance,n=e.options,a=n.scroll,s=void 0===a||a,i=n.resize,o=void 0===i||i,c=p(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&l.forEach((function(e){e.addEventListener("scroll",r.update,ne)})),o&&c.addEventListener("resize",r.update,ne),function(){s&&l.forEach((function(e){e.removeEventListener("scroll",r.update,ne)})),o&&c.removeEventListener("resize",r.update,ne)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,r=e.name;t.modifiersData[r]=oe({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,r=e.options,n=r.gpuAcceleration,a=void 0===n||n,s=r.adaptive,i=void 0===s||s,o=r.roundOffsets,c=void 0===o||o,l={placement:ae(t.placement),variation:se(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,le(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,le(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var r=t.styles[e]||{},n=t.attributes[e]||{},a=t.elements[e];m(a)&&M(a)&&(Object.assign(a.style,r),Object.keys(n).forEach((function(e){var t=n[e];!1===t?a.removeAttribute(e):a.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach((function(e){var n=t.elements[e],a=t.attributes[e]||{},s=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:r[e]).reduce((function(e,t){return e[t]="",e}),{});m(n)&&M(n)&&(Object.assign(n.style,s),Object.keys(a).forEach((function(e){n.removeAttribute(e)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,r=e.options,n=e.name,a=r.offset,s=void 0===a?[0,0]:a,i=J.reduce((function(e,r){return e[r]=function(e,t,r){var n=ae(e),a=[U,R].indexOf(n)>=0?-1:1,s="function"===typeof r?r(Object.assign({},t,{placement:e})):r,i=s[0],o=s[1];return i=i||0,o=(o||0)*a,[U,B].indexOf(n)>=0?{x:o,y:i}:{x:i,y:o}}(r,t.rects,s),e}),{}),o=i[t.placement],c=o.x,l=o.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=l),t.modifiersData[n]=i}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var a=r.mainAxis,s=void 0===a||a,i=r.altAxis,o=void 0===i||i,c=r.fallbackPlacements,l=r.padding,u=r.boundary,d=r.rootBoundary,h=r.altBoundary,p=r.flipVariations,f=void 0===p||p,m=r.allowedAutoPlacements,g=t.options.placement,y=ae(g),b=c||(y===g||!f?[de(g)]:function(e){if(ae(e)===z)return[];var t=de(e);return[pe(e),t,pe(t)]}(g)),v=[g].concat(b).reduce((function(e,r){return e.concat(ae(r)===z?function(e,t){void 0===t&&(t={});var r=t,n=r.placement,a=r.boundary,s=r.rootBoundary,i=r.padding,o=r.flipVariations,c=r.allowedAutoPlacements,l=void 0===c?J:c,u=se(n),d=u?o?Z:Z.filter((function(e){return se(e)===u})):Y,h=d.filter((function(e){return l.indexOf(e)>=0}));0===h.length&&(h=d);var p=h.reduce((function(t,r){return t[r]=_e(e,{placement:r,boundary:a,rootBoundary:s,padding:i})[ae(r)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:r,boundary:u,rootBoundary:d,padding:l,flipVariations:f,allowedAutoPlacements:m}):r)}),[]),_=t.rects.reference,w=t.rects.popper,j=new Map,x=!0,M=v[0],O=0;O<v.length;O++){var k=v[O],C=ae(k),E=se(k)===G,S=[R,F].indexOf(C)>=0,N=S?"width":"height",I=_e(t,{placement:k,boundary:u,rootBoundary:d,altBoundary:h,padding:l}),D=S?E?B:U:E?F:R;_[N]>w[N]&&(D=de(D));var T=de(D),A=[];if(s&&A.push(I[C]<=0),o&&A.push(I[D]<=0,I[T]<=0),A.every((function(e){return e}))){M=k,x=!1;break}j.set(k,A)}if(x)for(var P=function(e){var t=v.find((function(t){var r=j.get(t);if(r)return r.slice(0,e).every((function(e){return e}))}));if(t)return M=t,"break"},L=f?3:1;L>0;L--){if("break"===P(L))break}t.placement!==M&&(t.modifiersData[n]._skip=!0,t.placement=M,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,r=e.options,n=e.name,a=r.mainAxis,s=void 0===a||a,i=r.altAxis,o=void 0!==i&&i,c=r.boundary,l=r.rootBoundary,u=r.altBoundary,d=r.padding,h=r.tether,p=void 0===h||h,f=r.tetherOffset,m=void 0===f?0:f,g=_e(t,{boundary:c,rootBoundary:l,padding:d,altBoundary:u}),v=ae(t.placement),_=se(t.placement),w=!_,j=ie(v),x="x"===j?"y":"x",M=t.modifiersData.popperOffsets,O=t.rects.reference,k=t.rects.popper,C="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,E="number"===typeof C?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),S=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,I={x:0,y:0};if(M){if(s){var D,T="y"===j?R:U,A="y"===j?F:B,P="y"===j?"height":"width",z=M[j],Y=z+g[T],W=z-g[A],V=p?-k[P]/2:0,q=_===G?O[P]:k[P],H=_===G?-k[P]:-O[P],K=t.elements.arrow,Z=p&&K?N(K):{width:0,height:0},J=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Q=J[T],X=J[A],$=we(0,O[P],Z[P]),ee=w?O[P]/2-V-$-Q-E.mainAxis:q-$-Q-E.mainAxis,te=w?-O[P]/2+V+$+X+E.mainAxis:H+$+X+E.mainAxis,re=t.elements.arrow&&L(t.elements.arrow),ne=re?"y"===j?re.clientTop||0:re.clientLeft||0:0,oe=null!=(D=null==S?void 0:S[j])?D:0,ce=z+te-oe,le=we(p?b(Y,z+ee-oe-ne):Y,z,p?y(W,ce):W);M[j]=le,I[j]=le-z}if(o){var ue,de="x"===j?R:U,he="x"===j?F:B,pe=M[x],fe="y"===x?"height":"width",me=pe+g[de],ge=pe-g[he],ye=-1!==[R,U].indexOf(v),be=null!=(ue=null==S?void 0:S[x])?ue:0,ve=ye?me:pe-O[fe]-k[fe]-be+E.altAxis,je=ye?pe+O[fe]+k[fe]-be-E.altAxis:ge,xe=p&&ye?function(e,t,r){var n=we(e,t,r);return n>r?r:n}(ve,pe,je):we(p?ve:me,pe,p?je:ge);M[x]=xe,I[x]=xe-pe}t.modifiersData[n]=I}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,r=e.state,n=e.name,a=e.options,s=r.elements.arrow,i=r.modifiersData.popperOffsets,o=ae(r.placement),c=ie(o),l=[U,B].indexOf(o)>=0?"height":"width";if(s&&i){var u=function(e,t){return be("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:ve(e,Y))}(a.padding,r),d=N(s),h="y"===c?R:U,p="y"===c?F:B,f=r.rects.reference[l]+r.rects.reference[c]-i[c]-r.rects.popper[l],m=i[c]-r.rects.reference[c],g=L(s),y=g?"y"===c?g.clientHeight||0:g.clientWidth||0:0,b=f/2-m/2,v=u[h],_=y-d[l]-u[p],w=y/2-d[l]/2+b,j=we(v,w,_),x=c;r.modifiersData[n]=((t={})[x]=j,t.centerOffset=j-w,t)}},effect:function(e){var t=e.state,r=e.options.element,n=void 0===r?"[data-popper-arrow]":r;null!=n&&("string"!==typeof n||(n=t.elements.popper.querySelector(n)))&&fe(t.elements.popper,n)&&(t.elements.arrow=n)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,r=e.name,n=t.rects.reference,a=t.rects.popper,s=t.modifiersData.preventOverflow,i=_e(t,{elementContext:"reference"}),o=_e(t,{altBoundary:!0}),c=je(i,n),l=je(o,a,s),u=xe(c),d=xe(l);t.modifiersData[r]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}}]}),Oe=r(2029),ke=r.n(Oe),Ce=[],Ee=function(e,t,r){void 0===r&&(r={});var a=n.useRef(null),s={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||Ce},i=n.useState({styles:{popper:{position:s.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),o=i[0],c=i[1],l=n.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(e){var t=e.state,r=Object.keys(t.elements);h.flushSync((function(){c({styles:u(r.map((function(e){return[e,t.styles[e]||{}]}))),attributes:u(r.map((function(e){return[e,t.attributes[e]]})))})}))},requires:["computeStyles"]}}),[]),p=n.useMemo((function(){var e={onFirstUpdate:s.onFirstUpdate,placement:s.placement,strategy:s.strategy,modifiers:[].concat(s.modifiers,[l,{name:"applyStyles",enabled:!1}])};return ke()(a.current,e)?a.current||e:(a.current=e,e)}),[s.onFirstUpdate,s.placement,s.strategy,s.modifiers,l]),f=n.useRef();return d((function(){f.current&&f.current.setOptions(p)}),[p]),d((function(){if(null!=e&&null!=t){var n=(r.createPopper||Me)(e,t,p);return f.current=n,function(){n.destroy(),f.current=null}}}),[e,t,r.createPopper]),{state:f.current?f.current.state:null,styles:o.styles,attributes:o.attributes,update:f.current?f.current.update:null,forceUpdate:f.current?f.current.forceUpdate:null}},Se=function(){},Ne=function(){return Promise.resolve(null)},Ie=[];function De(e){var t=e.placement,r=void 0===t?"bottom":t,s=e.strategy,i=void 0===s?"absolute":s,c=e.modifiers,u=void 0===c?Ie:c,d=e.referenceElement,h=e.onFirstUpdate,p=e.innerRef,f=e.children,m=n.useContext(a),g=n.useState(null),y=g[0],b=g[1],v=n.useState(null),_=v[0],w=v[1];n.useEffect((function(){l(p,y)}),[p,y]);var j=n.useMemo((function(){return{placement:r,strategy:i,onFirstUpdate:h,modifiers:[].concat(u,[{name:"arrow",enabled:null!=_,options:{element:_}}])}}),[r,i,h,u,_]),x=Ee(d||m,y,j),M=x.state,O=x.styles,k=x.forceUpdate,C=x.update,E=n.useMemo((function(){return{ref:b,style:O.popper,placement:M?M.placement:r,hasPopperEscaped:M&&M.modifiersData.hide?M.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:M&&M.modifiersData.hide?M.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:O.arrow,ref:w},forceUpdate:k||Se,update:C||Ne}}),[b,w,r,M,O,C,k]);return o(f)(E)}var Te=r(2030),Ae=r.n(Te);function Pe(e){var t=e.children,r=e.innerRef,a=n.useContext(s),i=n.useCallback((function(e){l(r,e),c(a,e)}),[r,a]);return n.useEffect((function(){return function(){return l(r,null)}}),[]),n.useEffect((function(){Ae()(Boolean(a),"`Reference` should not be used outside of a `Manager` component.")}),[a]),o(t)({ref:i})}},2043:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return l}));var n=r(1912),a=r(1949),s=r(1911);function i(e){return Object(s.a)(1,arguments),Object(a.default)(e,{weekStartsOn:1})}function o(e){Object(s.a)(1,arguments);var t=function(e){Object(s.a)(1,arguments);var t=Object(n.default)(e),r=t.getFullYear(),a=new Date(0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);var o=i(a),c=new Date(0);c.setFullYear(r,0,4),c.setHours(0,0,0,0);var l=i(c);return t.getTime()>=o.getTime()?r+1:t.getTime()>=l.getTime()?r:r-1}(e),r=new Date(0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),i(r)}var c=6048e5;function l(e){Object(s.a)(1,arguments);var t=Object(n.default)(e),r=i(t).getTime()-o(t).getTime();return Math.round(r/c)+1}},2055:function(e,t,r){"use strict";function n(e){var t={type:"Feature"};return Object.keys(e).forEach((function(r){switch(r){case"type":case"properties":case"geometry":return;default:t[r]=e[r]}})),t.properties=a(e.properties),t.geometry=s(e.geometry),t}function a(e){var t={};return e?(Object.keys(e).forEach((function(r){var n=e[r];"object"===typeof n?null===n?t[r]=null:Array.isArray(n)?t[r]=n.map((function(e){return e})):t[r]=a(n):t[r]=n})),t):t}function s(e){var t={type:e.type};return e.bbox&&(t.bbox=e.bbox),"GeometryCollection"===e.type?(t.geometries=e.geometries.map((function(e){return s(e)})),t):(t.coordinates=i(e.coordinates),t)}function i(e){var t=e;return"object"!==typeof t[0]?t.slice():t.map((function(e){return i(e)}))}t.a=function(e){if(!e)throw new Error("geojson is required");switch(e.type){case"Feature":return n(e);case"FeatureCollection":return function(e){var t={type:"FeatureCollection"};return Object.keys(e).forEach((function(r){switch(r){case"type":case"features":return;default:t[r]=e[r]}})),t.features=e.features.map((function(e){return n(e)})),t}(e);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return s(e);default:throw new Error("unknown GeoJSON type")}}},2056:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},2069:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(9);const a=(e,t)=>{const r=new RegExp("".concat(n.T,"-").concat(t));return e.split(" ").filter((e=>null!==e.match(r)))}},2071:function(e,t,r){},2072:function(e,t,r){(function(t){e.exports=function(){"use strict";var e=function(e,t){var r={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},n={on:function(e,t,n){if(void 0===r[e])throw new Error("Invalid event type: "+e);r[e].push({selector:t,fn:n})},render:function(e){t.store.featureChanged(e)}},a=function(e,a){for(var s=r[e],i=s.length;i--;){var o=s[i];if(o.selector(a)){o.fn.call(n,a)||t.store.render(),t.ui.updateMapClasses();break}}};return e.start.call(n),{render:e.render,stop:function(){e.stop&&e.stop()},trash:function(){e.trash&&(e.trash(),t.store.render())},combineFeatures:function(){e.combineFeatures&&e.combineFeatures()},uncombineFeatures:function(){e.uncombineFeatures&&e.uncombineFeatures()},drag:function(e){a("drag",e)},click:function(e){a("click",e)},mousemove:function(e){a("mousemove",e)},mousedown:function(e){a("mousedown",e)},mouseup:function(e){a("mouseup",e)},mouseout:function(e){a("mouseout",e)},keydown:function(e){a("keydown",e)},keyup:function(e){a("keyup",e)},touchstart:function(e){a("touchstart",e)},touchmove:function(e){a("touchmove",e)},touchend:function(e){a("touchend",e)},tap:function(e){a("tap",e)}}};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){if(this instanceof e){var r=[null];return r.push.apply(r,arguments),new(Function.bind.apply(t,r))}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})})),r}var a={},s={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142};function i(e){var t=0;if(e&&e.length>0){t+=Math.abs(o(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(o(e[r]))}return t}function o(e){var t,r,n,a,i,o,l=0,u=e.length;if(u>2){for(o=0;o<u;o++)o===u-2?(n=u-2,a=u-1,i=0):o===u-1?(n=u-1,a=0,i=1):(n=o,a=o+1,i=o+2),t=e[n],r=e[a],l+=(c(e[i][0])-c(t[0]))*Math.sin(c(r[1]));l=l*s.RADIUS*s.RADIUS/2}return l}function c(e){return e*Math.PI/180}a.geometry=function e(t){var r,n=0;switch(t.type){case"Polygon":return i(t.coordinates);case"MultiPolygon":for(r=0;r<t.coordinates.length;r++)n+=i(t.coordinates[r]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(r=0;r<t.geometries.length;r++)n+=e(t.geometries[r]);return n}},a.ring=o;var l={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},u={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},d={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},h={POLYGON:"polygon",LINE:"line_string",POINT:"point"},p={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},f={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},m={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},g={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},y={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},b={ACTIVE:"true",INACTIVE:"false"},v=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],_=-85,w=Object.freeze({__proto__:null,classes:l,sources:u,cursors:d,types:h,geojsonTypes:p,modes:f,events:m,updateActions:g,meta:y,activeStates:b,interactions:v,LAT_MIN:-90,LAT_RENDERED_MIN:_,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),j={Point:0,LineString:1,MultiLineString:1,Polygon:2};function x(e,t){var r=j[e.geometry.type]-j[t.geometry.type];return 0===r&&e.geometry.type===p.POLYGON?e.area-t.area:r}function M(e){return e.map((function(e){return e.geometry.type===p.POLYGON&&(e.area=a.geometry({type:p.FEATURE,property:{},geometry:e.geometry})),e})).sort(x).map((function(e){return delete e.area,e}))}function O(e,t){return void 0===t&&(t=0),[[e.point.x-t,e.point.y-t],[e.point.x+t,e.point.y+t]]}function k(e){if(this._items={},this._nums={},this._length=e?e.length:0,e)for(var t=0,r=e.length;t<r;t++)this.add(e[t]),void 0!==e[t]&&("string"==typeof e[t]?this._items[e[t]]=t:this._nums[e[t]]=t)}k.prototype.add=function(e){return this.has(e)||(this._length++,"string"==typeof e?this._items[e]=this._length:this._nums[e]=this._length),this},k.prototype.delete=function(e){return!1===this.has(e)||(this._length--,delete this._items[e],delete this._nums[e]),this},k.prototype.has=function(e){return("string"==typeof e||"number"==typeof e)&&(void 0!==this._items[e]||void 0!==this._nums[e])},k.prototype.values=function(){var e=this,t=[];return Object.keys(this._items).forEach((function(r){t.push({k:r,v:e._items[r]})})),Object.keys(this._nums).forEach((function(r){t.push({k:JSON.parse(r),v:e._nums[r]})})),t.sort((function(e,t){return e.v-t.v})).map((function(e){return e.k}))},k.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var C=[y.FEATURE,y.MIDPOINT,y.VERTEX],E={click:function(e,t,r){return S(e,t,r,r.options.clickBuffer)},touch:function(e,t,r){return S(e,t,r,r.options.touchBuffer)}};function S(e,t,r,n){if(null===r.map)return[];var a=e?O(e,n):t,s={};r.options.styles&&(s.layers=r.options.styles.map((function(e){return e.id})).filter((function(e){return null!=r.map.getLayer(e)})));var i=r.map.queryRenderedFeatures(a,s).filter((function(e){return-1!==C.indexOf(e.properties.meta)})),o=new k,c=[];return i.forEach((function(e){var t=e.properties.id;o.has(t)||(o.add(t),c.push(e))})),M(c)}function N(e,t){var r=E.click(e,null,t),n={mouse:d.NONE};return r[0]&&(n.mouse=r[0].properties.active===b.ACTIVE?d.MOVE:d.POINTER,n.feature=r[0].properties.meta),-1!==t.events.currentModeName().indexOf("draw")&&(n.mouse=d.ADD),t.ui.queueMapClasses(n),t.ui.updateMapClasses(),r[0]}function I(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)}function D(e,t,r){void 0===r&&(r={});var n=null!=r.fineTolerance?r.fineTolerance:4,a=null!=r.grossTolerance?r.grossTolerance:12,s=null!=r.interval?r.interval:500;e.point=e.point||t.point,e.time=e.time||t.time;var i=I(e.point,t.point);return i<n||i<a&&t.time-e.time<s}function T(e,t,r){void 0===r&&(r={});var n=null!=r.tolerance?r.tolerance:25,a=null!=r.interval?r.interval:250;return e.point=e.point||t.point,e.time=e.time||t.time,I(e.point,t.point)<n&&t.time-e.time<a}var A={exports:{}},P=A.exports=function(e,t){if(t||(t=16),void 0===e&&(e=128),e<=0)return"0";for(var r=Math.log(Math.pow(2,e))/Math.log(t),n=2;r===1/0;n*=2)r=Math.log(Math.pow(2,e/n))/Math.log(t)*n;var a=r-Math.floor(r),s="";for(n=0;n<Math.floor(r);n++)s=Math.floor(Math.random()*t).toString(t)+s;if(a){var i=Math.pow(t,a);s=Math.floor(Math.random()*i).toString(t)+s}var o=parseInt(s,t);return o!==1/0&&o>=Math.pow(2,e)?P(e,t):s};P.rack=function(e,t,r){var n=function(n){var s=0;do{if(s++>10){if(!r)throw new Error("too many ID collisions, use more bits");e+=r}var i=P(e,t)}while(Object.hasOwnProperty.call(a,i));return a[i]=n,i},a=n.hats={};return n.get=function(e){return n.hats[e]},n.set=function(e,t){return n.hats[e]=t,n},n.bits=e||128,n.base=t||16,n};var L=r(A.exports),R=function(e,t){this.ctx=e,this.properties=t.properties||{},this.coordinates=t.geometry.coordinates,this.id=t.id||L(),this.type=t.geometry.type};R.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},R.prototype.incomingCoords=function(e){this.setCoordinates(e)},R.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},R.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},R.prototype.setProperty=function(e,t){this.properties[e]=t},R.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:p.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},R.prototype.internal=function(e){var t={id:this.id,meta:y.FEATURE,"meta:type":this.type,active:b.INACTIVE,mode:e};if(this.ctx.options.userProperties)for(var r in this.properties)t["user_"+r]=this.properties[r];return{type:p.FEATURE,properties:t,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var F=function(e,t){R.call(this,e,t)};(F.prototype=Object.create(R.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},F.prototype.updateCoordinate=function(e,t,r){this.coordinates=3===arguments.length?[t,r]:[e,t],this.changed()},F.prototype.getCoordinate=function(){return this.getCoordinates()};var B=function(e,t){R.call(this,e,t)};(B.prototype=Object.create(R.prototype)).isValid=function(){return this.coordinates.length>1},B.prototype.addCoordinate=function(e,t,r){this.changed();var n=parseInt(e,10);this.coordinates.splice(n,0,[t,r])},B.prototype.getCoordinate=function(e){var t=parseInt(e,10);return JSON.parse(JSON.stringify(this.coordinates[t]))},B.prototype.removeCoordinate=function(e){this.changed(),this.coordinates.splice(parseInt(e,10),1)},B.prototype.updateCoordinate=function(e,t,r){var n=parseInt(e,10);this.coordinates[n]=[t,r],this.changed()};var U=function(e,t){R.call(this,e,t),this.coordinates=this.coordinates.map((function(e){return e.slice(0,-1)}))};(U.prototype=Object.create(R.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every((function(e){return e.length>2}))},U.prototype.incomingCoords=function(e){this.coordinates=e.map((function(e){return e.slice(0,-1)})),this.changed()},U.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},U.prototype.addCoordinate=function(e,t,r){this.changed();var n=e.split(".").map((function(e){return parseInt(e,10)}));this.coordinates[n[0]].splice(n[1],0,[t,r])},U.prototype.removeCoordinate=function(e){this.changed();var t=e.split(".").map((function(e){return parseInt(e,10)})),r=this.coordinates[t[0]];r&&(r.splice(t[1],1),r.length<3&&this.coordinates.splice(t[0],1))},U.prototype.getCoordinate=function(e){var t=e.split(".").map((function(e){return parseInt(e,10)})),r=this.coordinates[t[0]];return JSON.parse(JSON.stringify(r[t[1]]))},U.prototype.getCoordinates=function(){return this.coordinates.map((function(e){return e.concat([e[0]])}))},U.prototype.updateCoordinate=function(e,t,r){this.changed();var n=e.split("."),a=parseInt(n[0],10),s=parseInt(n[1],10);void 0===this.coordinates[a]&&(this.coordinates[a]=[]),this.coordinates[a][s]=[t,r]};var z={MultiPoint:F,MultiLineString:B,MultiPolygon:U},Y=function(e,t,r,n,a){var s=r.split("."),i=parseInt(s[0],10),o=s[1]?s.slice(1).join("."):null;return e[i][t](o,n,a)},G=function(e,t){if(R.call(this,e,t),delete this.coordinates,this.model=z[t.geometry.type],void 0===this.model)throw new TypeError(t.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(t.geometry.coordinates)};function W(e){this.map=e.map,this.drawConfig=JSON.parse(JSON.stringify(e.options||{})),this._ctx=e}(G.prototype=Object.create(R.prototype))._coordinatesToFeatures=function(e){var t=this,r=this.model.bind(this);return e.map((function(e){return new r(t.ctx,{id:L(),type:p.FEATURE,properties:{},geometry:{coordinates:e,type:t.type.replace("Multi","")}})}))},G.prototype.isValid=function(){return this.features.every((function(e){return e.isValid()}))},G.prototype.setCoordinates=function(e){this.features=this._coordinatesToFeatures(e),this.changed()},G.prototype.getCoordinate=function(e){return Y(this.features,"getCoordinate",e)},G.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map((function(e){return e.type===p.POLYGON?e.getCoordinates():e.coordinates}))))},G.prototype.updateCoordinate=function(e,t,r){Y(this.features,"updateCoordinate",e,t,r),this.changed()},G.prototype.addCoordinate=function(e,t,r){Y(this.features,"addCoordinate",e,t,r),this.changed()},G.prototype.removeCoordinate=function(e){Y(this.features,"removeCoordinate",e),this.changed()},G.prototype.getFeatures=function(){return this.features},W.prototype.setSelected=function(e){return this._ctx.store.setSelected(e)},W.prototype.setSelectedCoordinates=function(e){var t=this;this._ctx.store.setSelectedCoordinates(e),e.reduce((function(e,r){return void 0===e[r.feature_id]&&(e[r.feature_id]=!0,t._ctx.store.get(r.feature_id).changed()),e}),{})},W.prototype.getSelected=function(){return this._ctx.store.getSelected()},W.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},W.prototype.isSelected=function(e){return this._ctx.store.isSelected(e)},W.prototype.getFeature=function(e){return this._ctx.store.get(e)},W.prototype.select=function(e){return this._ctx.store.select(e)},W.prototype.deselect=function(e){return this._ctx.store.deselect(e)},W.prototype.deleteFeature=function(e,t){return void 0===t&&(t={}),this._ctx.store.delete(e,t)},W.prototype.addFeature=function(e){return this._ctx.store.add(e)},W.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},W.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},W.prototype.setActionableState=function(e){void 0===e&&(e={});var t={trash:e.trash||!1,combineFeatures:e.combineFeatures||!1,uncombineFeatures:e.uncombineFeatures||!1};return this._ctx.events.actionable(t)},W.prototype.changeMode=function(e,t,r){return void 0===t&&(t={}),void 0===r&&(r={}),this._ctx.events.changeMode(e,t,r)},W.prototype.updateUIClasses=function(e){return this._ctx.ui.queueMapClasses(e)},W.prototype.activateUIButton=function(e){return this._ctx.ui.setActiveButton(e)},W.prototype.featuresAt=function(e,t,r){if(void 0===r&&(r="click"),"click"!==r&&"touch"!==r)throw new Error("invalid buffer type");return E[r](e,t,this._ctx)},W.prototype.newFeature=function(e){var t=e.geometry.type;return t===p.POINT?new F(this._ctx,e):t===p.LINE_STRING?new B(this._ctx,e):t===p.POLYGON?new U(this._ctx,e):new G(this._ctx,e)},W.prototype.isInstanceOf=function(e,t){if(e===p.POINT)return t instanceof F;if(e===p.LINE_STRING)return t instanceof B;if(e===p.POLYGON)return t instanceof U;if("MultiFeature"===e)return t instanceof G;throw new Error("Unknown feature class: "+e)},W.prototype.doRender=function(e){return this._ctx.store.featureChanged(e)},W.prototype.onSetup=function(){},W.prototype.onDrag=function(){},W.prototype.onClick=function(){},W.prototype.onMouseMove=function(){},W.prototype.onMouseDown=function(){},W.prototype.onMouseUp=function(){},W.prototype.onMouseOut=function(){},W.prototype.onKeyUp=function(){},W.prototype.onKeyDown=function(){},W.prototype.onTouchStart=function(){},W.prototype.onTouchMove=function(){},W.prototype.onTouchEnd=function(){},W.prototype.onTap=function(){},W.prototype.onStop=function(){},W.prototype.onTrash=function(){},W.prototype.onCombineFeature=function(){},W.prototype.onUncombineFeature=function(){},W.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var V={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},q=Object.keys(V);function H(e){var t=Object.keys(e);return function(r,n){void 0===n&&(n={});var a={},s=t.reduce((function(t,r){return t[r]=e[r],t}),new W(r));return{start:function(){var t=this;a=s.onSetup(n),q.forEach((function(r){var n,i=V[r],o=function(){return!1};e[i]&&(o=function(){return!0}),t.on(r,o,(n=i,function(e){return s[n](a,e)}))}))},stop:function(){s.onStop(a)},trash:function(){s.onTrash(a)},combineFeatures:function(){s.onCombineFeatures(a)},uncombineFeatures:function(){s.onUncombineFeatures(a)},render:function(e,t){s.toDisplayFeatures(a,e,t)}}}}function K(e){return[].concat(e).filter((function(e){return void 0!==e}))}function Z(){var e=this;if(!e.ctx.map||void 0===e.ctx.map.getSource(u.HOT))return c();var t=e.ctx.events.currentModeName();e.ctx.ui.queueMapClasses({mode:t});var r=[],n=[];e.isDirty?n=e.getAllIds():(r=e.getChangedIds().filter((function(t){return void 0!==e.get(t)})),n=e.sources.hot.filter((function(t){return t.properties.id&&-1===r.indexOf(t.properties.id)&&void 0!==e.get(t.properties.id)})).map((function(e){return e.properties.id}))),e.sources.hot=[];var a=e.sources.cold.length;e.sources.cold=e.isDirty?[]:e.sources.cold.filter((function(e){var t=e.properties.id||e.properties.parent;return-1===r.indexOf(t)}));var s=a!==e.sources.cold.length||n.length>0;function i(r,n){var a=e.get(r).internal(t);e.ctx.events.currentModeRender(a,(function(t){e.sources[n].push(t)}))}if(r.forEach((function(e){return i(e,"hot")})),n.forEach((function(e){return i(e,"cold")})),s&&e.ctx.map.getSource(u.COLD).setData({type:p.FEATURE_COLLECTION,features:e.sources.cold}),e.ctx.map.getSource(u.HOT).setData({type:p.FEATURE_COLLECTION,features:e.sources.hot}),e._emitSelectionChange&&(e.ctx.map.fire(m.SELECTION_CHANGE,{features:e.getSelected().map((function(e){return e.toGeoJSON()})),points:e.getSelectedCoordinates().map((function(e){return{type:p.FEATURE,properties:{},geometry:{type:p.POINT,coordinates:e.coordinates}}}))}),e._emitSelectionChange=!1),e._deletedFeaturesToEmit.length){var o=e._deletedFeaturesToEmit.map((function(e){return e.toGeoJSON()}));e._deletedFeaturesToEmit=[],e.ctx.map.fire(m.DELETE,{features:o})}function c(){e.isDirty=!1,e.clearChangedIds()}c(),e.ctx.map.fire(m.RENDER,{})}function J(e){var t,r=this;this._features={},this._featureIds=new k,this._selectedFeatureIds=new k,this._selectedCoordinates=[],this._changedFeatureIds=new k,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=e,this.sources={hot:[],cold:[]},this.render=function(){t||(t=requestAnimationFrame((function(){t=null,Z.call(r)})))},this.isDirty=!1}function Q(e,t){var r=e._selectedCoordinates.filter((function(t){return e._selectedFeatureIds.has(t.feature_id)}));e._selectedCoordinates.length===r.length||t.silent||(e._emitSelectionChange=!0),e._selectedCoordinates=r}J.prototype.createRenderBatch=function(){var e=this,t=this.render,r=0;return this.render=function(){r++},function(){e.render=t,r>0&&e.render()}},J.prototype.setDirty=function(){return this.isDirty=!0,this},J.prototype.featureChanged=function(e){return this._changedFeatureIds.add(e),this},J.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},J.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},J.prototype.getAllIds=function(){return this._featureIds.values()},J.prototype.add=function(e){return this.featureChanged(e.id),this._features[e.id]=e,this._featureIds.add(e.id),this},J.prototype.delete=function(e,t){var r=this;return void 0===t&&(t={}),K(e).forEach((function(e){r._featureIds.has(e)&&(r._featureIds.delete(e),r._selectedFeatureIds.delete(e),t.silent||-1===r._deletedFeaturesToEmit.indexOf(r._features[e])&&r._deletedFeaturesToEmit.push(r._features[e]),delete r._features[e],r.isDirty=!0)})),Q(this,t),this},J.prototype.get=function(e){return this._features[e]},J.prototype.getAll=function(){var e=this;return Object.keys(this._features).map((function(t){return e._features[t]}))},J.prototype.select=function(e,t){var r=this;return void 0===t&&(t={}),K(e).forEach((function(e){r._selectedFeatureIds.has(e)||(r._selectedFeatureIds.add(e),r._changedFeatureIds.add(e),t.silent||(r._emitSelectionChange=!0))})),this},J.prototype.deselect=function(e,t){var r=this;return void 0===t&&(t={}),K(e).forEach((function(e){r._selectedFeatureIds.has(e)&&(r._selectedFeatureIds.delete(e),r._changedFeatureIds.add(e),t.silent||(r._emitSelectionChange=!0))})),Q(this,t),this},J.prototype.clearSelected=function(e){return void 0===e&&(e={}),this.deselect(this._selectedFeatureIds.values(),{silent:e.silent}),this},J.prototype.setSelected=function(e,t){var r=this;return void 0===t&&(t={}),e=K(e),this.deselect(this._selectedFeatureIds.values().filter((function(t){return-1===e.indexOf(t)})),{silent:t.silent}),this.select(e.filter((function(e){return!r._selectedFeatureIds.has(e)})),{silent:t.silent}),this},J.prototype.setSelectedCoordinates=function(e){return this._selectedCoordinates=e,this._emitSelectionChange=!0,this},J.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},J.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},J.prototype.getSelected=function(){var e=this;return this._selectedFeatureIds.values().map((function(t){return e.get(t)}))},J.prototype.getSelectedCoordinates=function(){var e=this;return this._selectedCoordinates.map((function(t){return{coordinates:e.get(t.feature_id).getCoordinate(t.coord_path)}}))},J.prototype.isSelected=function(e){return this._selectedFeatureIds.has(e)},J.prototype.setFeatureProperty=function(e,t,r){this.get(e).setProperty(t,r),this.featureChanged(e)},J.prototype.storeMapConfig=function(){var e=this;v.forEach((function(t){e.ctx.map[t]&&(e._mapInitialConfig[t]=e.ctx.map[t].isEnabled())}))},J.prototype.restoreMapConfig=function(){var e=this;Object.keys(this._mapInitialConfig).forEach((function(t){e._mapInitialConfig[t]?e.ctx.map[t].enable():e.ctx.map[t].disable()}))},J.prototype.getInitialConfigValue=function(e){return void 0===this._mapInitialConfig[e]||this._mapInitialConfig[e]};var X=function(){for(var e=arguments,t={},r=0;r<arguments.length;r++){var n=e[r];for(var a in n)$.call(n,a)&&(t[a]=n[a])}return t},$=Object.prototype.hasOwnProperty,ee=r(X),te=["mode","feature","mouse"];function re(t){var r=null,n=null,a={onRemove:function(){return t.map.off("load",a.connect),clearInterval(n),a.removeLayers(),t.store.restoreMapConfig(),t.ui.removeButtons(),t.events.removeEventListeners(),t.ui.clearMapClasses(),t.boxZoomInitial&&t.map.boxZoom.enable(),t.map=null,t.container=null,t.store=null,r&&r.parentNode&&r.parentNode.removeChild(r),r=null,this},connect:function(){t.map.off("load",a.connect),clearInterval(n),a.addLayers(),t.store.storeMapConfig(),t.events.addEventListeners()},onAdd:function(s){var i=s.fire;return s.fire=function(e,t){var r=arguments;return 1===i.length&&1!==arguments.length&&(r=[ee({},{type:e},t)]),i.apply(s,r)},t.map=s,t.events=function(t){var r=Object.keys(t.options.modes).reduce((function(e,r){return e[r]=H(t.options.modes[r]),e}),{}),n={},a={},s={},i=null,o=null;s.drag=function(e,r){r({point:e.point,time:(new Date).getTime()})?(t.ui.queueMapClasses({mouse:d.DRAG}),o.drag(e)):e.originalEvent.stopPropagation()},s.mousedrag=function(e){s.drag(e,(function(e){return!D(n,e)}))},s.touchdrag=function(e){s.drag(e,(function(e){return!T(a,e)}))},s.mousemove=function(e){if(1===(void 0!==e.originalEvent.buttons?e.originalEvent.buttons:e.originalEvent.which))return s.mousedrag(e);var r=N(e,t);e.featureTarget=r,o.mousemove(e)},s.mousedown=function(e){n={time:(new Date).getTime(),point:e.point};var r=N(e,t);e.featureTarget=r,o.mousedown(e)},s.mouseup=function(e){var r=N(e,t);e.featureTarget=r,D(n,{point:e.point,time:(new Date).getTime()})?o.click(e):o.mouseup(e)},s.mouseout=function(e){o.mouseout(e)},s.touchstart=function(e){if(t.options.touchEnabled){a={time:(new Date).getTime(),point:e.point};var r=E.touch(e,null,t)[0];e.featureTarget=r,o.touchstart(e)}},s.touchmove=function(e){if(t.options.touchEnabled)return o.touchmove(e),s.touchdrag(e)},s.touchend=function(e){if(e.originalEvent.preventDefault(),t.options.touchEnabled){var r=E.touch(e,null,t)[0];e.featureTarget=r,T(a,{time:(new Date).getTime(),point:e.point})?o.tap(e):o.touchend(e)}};var c=function(e){return!(8===e||46===e||e>=48&&e<=57)};function l(n,a,s){void 0===s&&(s={}),o.stop();var c=r[n];if(void 0===c)throw new Error(n+" is not valid");i=n;var l=c(t,a);o=e(l,t),s.silent||t.map.fire(m.MODE_CHANGE,{mode:n}),t.store.setDirty(),t.store.render()}s.keydown=function(e){(e.srcElement||e.target).classList.contains("mapboxgl-canvas")&&(8!==e.keyCode&&46!==e.keyCode||!t.options.controls.trash?c(e.keyCode)?o.keydown(e):49===e.keyCode&&t.options.controls.point?l(f.DRAW_POINT):50===e.keyCode&&t.options.controls.line_string?l(f.DRAW_LINE_STRING):51===e.keyCode&&t.options.controls.polygon&&l(f.DRAW_POLYGON):(e.preventDefault(),o.trash()))},s.keyup=function(e){c(e.keyCode)&&o.keyup(e)},s.zoomend=function(){t.store.changeZoom()},s.data=function(e){if("style"===e.dataType){var r=t.setup,n=t.map,a=t.options,s=t.store;a.styles.some((function(e){return n.getLayer(e.id)}))||(r.addLayers(),s.setDirty(),s.render())}};var u={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){i=t.options.defaultMode,o=e(r[i](t),t)},changeMode:l,actionable:function(e){var r=!1;Object.keys(e).forEach((function(t){if(void 0===u[t])throw new Error("Invalid action type");u[t]!==e[t]&&(r=!0),u[t]=e[t]})),r&&t.map.fire(m.ACTIONABLE,{actions:u})},currentModeName:function(){return i},currentModeRender:function(e,t){return o.render(e,t)},fire:function(e,t){s[e]&&s[e](t)},addEventListeners:function(){t.map.on("mousemove",s.mousemove),t.map.on("mousedown",s.mousedown),t.map.on("mouseup",s.mouseup),t.map.on("data",s.data),t.map.on("touchmove",s.touchmove),t.map.on("touchstart",s.touchstart),t.map.on("touchend",s.touchend),t.container.addEventListener("mouseout",s.mouseout),t.options.keybindings&&(t.container.addEventListener("keydown",s.keydown),t.container.addEventListener("keyup",s.keyup))},removeEventListeners:function(){t.map.off("mousemove",s.mousemove),t.map.off("mousedown",s.mousedown),t.map.off("mouseup",s.mouseup),t.map.off("data",s.data),t.map.off("touchmove",s.touchmove),t.map.off("touchstart",s.touchstart),t.map.off("touchend",s.touchend),t.container.removeEventListener("mouseout",s.mouseout),t.options.keybindings&&(t.container.removeEventListener("keydown",s.keydown),t.container.removeEventListener("keyup",s.keyup))},trash:function(e){o.trash(e)},combineFeatures:function(){o.combineFeatures()},uncombineFeatures:function(){o.uncombineFeatures()},getMode:function(){return i}}}(t),t.ui=function(e){var t={},r=null,n={mode:null,feature:null,mouse:null},a={mode:null,feature:null,mouse:null};function s(e){a=ee(a,e)}function i(){var t,r;if(e.container){var s=[],i=[];te.forEach((function(e){a[e]!==n[e]&&(s.push(e+"-"+n[e]),null!==a[e]&&i.push(e+"-"+a[e]))})),s.length>0&&(t=e.container.classList).remove.apply(t,s),i.length>0&&(r=e.container.classList).add.apply(r,i),n=ee(n,a)}}function o(e,t){void 0===t&&(t={});var n=document.createElement("button");return n.className=l.CONTROL_BUTTON+" "+t.className,n.setAttribute("title",t.title),t.container.appendChild(n),n.addEventListener("click",(function(n){if(n.preventDefault(),n.stopPropagation(),n.target===r)return c(),void t.onDeactivate();u(e),t.onActivate()}),!0),n}function c(){r&&(r.classList.remove(l.ACTIVE_BUTTON),r=null)}function u(e){c();var n=t[e];n&&n&&"trash"!==e&&(n.classList.add(l.ACTIVE_BUTTON),r=n)}return{setActiveButton:u,queueMapClasses:s,updateMapClasses:i,clearMapClasses:function(){s({mode:null,feature:null,mouse:null}),i()},addButtons:function(){var r=e.options.controls,n=document.createElement("div");return n.className=l.CONTROL_GROUP+" "+l.CONTROL_BASE,r?(r[h.LINE]&&(t[h.LINE]=o(h.LINE,{container:n,className:l.CONTROL_BUTTON_LINE,title:"LineString tool "+(e.options.keybindings?"(l)":""),onActivate:function(){return e.events.changeMode(f.DRAW_LINE_STRING)},onDeactivate:function(){return e.events.trash()}})),r[h.POLYGON]&&(t[h.POLYGON]=o(h.POLYGON,{container:n,className:l.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(e.options.keybindings?"(p)":""),onActivate:function(){return e.events.changeMode(f.DRAW_POLYGON)},onDeactivate:function(){return e.events.trash()}})),r[h.POINT]&&(t[h.POINT]=o(h.POINT,{container:n,className:l.CONTROL_BUTTON_POINT,title:"Marker tool "+(e.options.keybindings?"(m)":""),onActivate:function(){return e.events.changeMode(f.DRAW_POINT)},onDeactivate:function(){return e.events.trash()}})),r.trash&&(t.trash=o("trash",{container:n,className:l.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){e.events.trash()}})),r.combine_features&&(t.combine_features=o("combineFeatures",{container:n,className:l.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){e.events.combineFeatures()}})),r.uncombine_features&&(t.uncombine_features=o("uncombineFeatures",{container:n,className:l.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){e.events.uncombineFeatures()}})),n):n},removeButtons:function(){Object.keys(t).forEach((function(e){var r=t[e];r.parentNode&&r.parentNode.removeChild(r),delete t[e]}))}}}(t),t.container=s.getContainer(),t.store=new J(t),r=t.ui.addButtons(),t.options.boxSelect&&(t.boxZoomInitial=s.boxZoom.isEnabled(),s.boxZoom.disable(),s.dragPan.disable(),s.dragPan.enable()),s.loaded()?a.connect():(s.on("load",a.connect),n=setInterval((function(){s.loaded()&&a.connect()}),16)),t.events.start(),r},addLayers:function(){t.map.addSource(u.COLD,{data:{type:p.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.map.addSource(u.HOT,{data:{type:p.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.options.styles.forEach((function(e){t.map.addLayer(e)})),t.store.setDirty(!0),t.store.render()},removeLayers:function(){t.options.styles.forEach((function(e){t.map.getLayer(e.id)&&t.map.removeLayer(e.id)})),t.map.getSource(u.COLD)&&t.map.removeSource(u.COLD),t.map.getSource(u.HOT)&&t.map.removeSource(u.HOT)}};return t.setup=a,a}var ne=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function ae(e){return function(t){var r=t.featureTarget;return!!r&&!!r.properties&&r.properties.meta===e}}function se(e){return!!e.originalEvent&&!!e.originalEvent.shiftKey&&0===e.originalEvent.button}function ie(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.active===b.ACTIVE&&e.featureTarget.properties.meta===y.FEATURE}function oe(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.active===b.INACTIVE&&e.featureTarget.properties.meta===y.FEATURE}function ce(e){return void 0===e.featureTarget}function le(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.meta===y.FEATURE}function ue(e){var t=e.featureTarget;return!!t&&!!t.properties&&t.properties.meta===y.VERTEX}function de(e){return!!e.originalEvent&&!0===e.originalEvent.shiftKey}function he(e){return 27===e.keyCode}function pe(e){return 13===e.keyCode}var fe=Object.freeze({__proto__:null,isOfMetaType:ae,isShiftMousedown:se,isActiveFeature:ie,isInactiveFeature:oe,noTarget:ce,isFeature:le,isVertex:ue,isShiftDown:de,isEscapeKey:he,isEnterKey:pe,isTrue:function(){return!0}}),me=ge;function ge(e,t){this.x=e,this.y=t}ge.prototype={clone:function(){return new ge(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,r=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=t*this.x-r*this.y,a=r*this.x+t*this.y;return this.x=n,this.y=a,this},_rotateAround:function(e,t){var r=Math.cos(e),n=Math.sin(e),a=t.x+r*(this.x-t.x)-n*(this.y-t.y),s=t.y+n*(this.x-t.x)+r*(this.y-t.y);return this.x=a,this.y=s,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ge.convert=function(e){return e instanceof ge?e:Array.isArray(e)?new ge(e[0],e[1]):e};var ye=r(me);function be(e,t){var r=t.getBoundingClientRect();return new ye(e.clientX-r.left-(t.clientLeft||0),e.clientY-r.top-(t.clientTop||0))}function ve(e,t,r,n){return{type:p.FEATURE,properties:{meta:y.VERTEX,parent:e,coord_path:r,active:n?b.ACTIVE:b.INACTIVE},geometry:{type:p.POINT,coordinates:t}}}function _e(e,t,r){var n=t.geometry.coordinates,a=r.geometry.coordinates;if(n[1]>85||n[1]<_||a[1]>85||a[1]<_)return null;var s={lng:(n[0]+a[0])/2,lat:(n[1]+a[1])/2};return{type:p.FEATURE,properties:{meta:y.MIDPOINT,parent:e,lng:s.lng,lat:s.lat,coord_path:r.properties.coord_path},geometry:{type:p.POINT,coordinates:[s.lng,s.lat]}}}function we(e,t,r){void 0===t&&(t={}),void 0===r&&(r=null);var n,a=e.geometry,s=a.type,i=a.coordinates,o=e.properties&&e.properties.id,c=[];function l(e,r){var n="",a=null;e.forEach((function(e,s){var i=null!=r?r+"."+s:String(s),l=ve(o,e,i,u(i));if(t.midpoints&&a){var d=_e(o,a,l);d&&c.push(d)}a=l;var h=JSON.stringify(e);n!==h&&c.push(l),0===s&&(n=h)}))}function u(e){return!!t.selectedPaths&&-1!==t.selectedPaths.indexOf(e)}return s===p.POINT?c.push(ve(o,i,r,u(r))):s===p.POLYGON?i.forEach((function(e,t){l(e,null!==r?r+"."+t:String(t))})):s===p.LINE_STRING?l(i,r):0===s.indexOf(p.MULTI_PREFIX)&&(n=s.replace(p.MULTI_PREFIX,""),i.forEach((function(r,a){var s={type:p.FEATURE,properties:e.properties,geometry:{type:n,coordinates:r}};c=c.concat(we(s,t,a))}))),c}var je={enable:function(e){setTimeout((function(){e.map&&e.map.doubleClickZoom&&e._ctx&&e._ctx.store&&e._ctx.store.getInitialConfigValue&&e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()}),0)},disable:function(e){setTimeout((function(){e.map&&e.map.doubleClickZoom&&e.map.doubleClickZoom.disable()}),0)}},xe={exports:{}},Me=function(e){if(!e||!e.type)return null;var t=Oe[e.type];return t?"geometry"===t?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]}:"feature"===t?{type:"FeatureCollection",features:[e]}:"featurecollection"===t?e:void 0:null},Oe={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},ke=r(Me),Ce=Object.freeze({__proto__:null,default:function e(t){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.reduce((function(t,r){return t.concat(e(r))}),[]),t;case"Feature":return t.geometry?e(t.geometry).map((function(e){var r={type:"Feature",properties:JSON.parse(JSON.stringify(t.properties)),geometry:e};return void 0!==t.id&&(r.id=t.id),r})):[t];case"MultiPoint":return t.coordinates.map((function(e){return{type:"Point",coordinates:e}}));case"MultiPolygon":return t.coordinates.map((function(e){return{type:"Polygon",coordinates:e}}));case"MultiLineString":return t.coordinates.map((function(e){return{type:"LineString",coordinates:e}}));case"GeometryCollection":return t.geometries.map(e).reduce((function(e,t){return e.concat(t)}),[]);case"Point":case"Polygon":case"LineString":return[t]}}}),Ee=Me,Se=n(Ce),Ne=function(e){return function e(t){return Array.isArray(t)&&t.length&&"number"==typeof t[0]?[t]:t.reduce((function(t,r){return Array.isArray(r)&&Array.isArray(r[0])?t.concat(e(r)):(t.push(r),t)}),[])}(e)};Se instanceof Function||(Se=Se.default);var Ie={exports:{}},De=Ie.exports=function(e){return new Te(e)};function Te(e){this.value=e}function Ae(e,t,r){var n=[],a=[],s=!0;return function e(i){var o=r?Pe(i):i,c={},l=!0,u={node:o,node_:i,path:[].concat(n),parent:a[a.length-1],parents:a,key:n.slice(-1)[0],isRoot:0===n.length,level:n.length,circular:null,update:function(e,t){u.isRoot||(u.parent.node[u.key]=e),u.node=e,t&&(l=!1)},delete:function(e){delete u.parent.node[u.key],e&&(l=!1)},remove:function(e){Fe(u.parent.node)?u.parent.node.splice(u.key,1):delete u.parent.node[u.key],e&&(l=!1)},keys:null,before:function(e){c.before=e},after:function(e){c.after=e},pre:function(e){c.pre=e},post:function(e){c.post=e},stop:function(){s=!1},block:function(){l=!1}};if(!s)return u;function d(){if("object"==typeof u.node&&null!==u.node){u.keys&&u.node_===u.node||(u.keys=Le(u.node)),u.isLeaf=0==u.keys.length;for(var e=0;e<a.length;e++)if(a[e].node_===i){u.circular=a[e];break}}else u.isLeaf=!0,u.keys=null;u.notLeaf=!u.isLeaf,u.notRoot=!u.isRoot}d();var h=t.call(u,u.node);return void 0!==h&&u.update&&u.update(h),c.before&&c.before.call(u,u.node),l?("object"!=typeof u.node||null===u.node||u.circular||(a.push(u),d(),Be(u.keys,(function(t,a){n.push(t),c.pre&&c.pre.call(u,u.node[t],t);var s=e(u.node[t]);r&&Ue.call(u.node,t)&&(u.node[t]=s.node),s.isLast=a==u.keys.length-1,s.isFirst=0==a,c.post&&c.post.call(u,s),n.pop()})),a.pop()),c.after&&c.after.call(u,u.node),u):u}(e).node}function Pe(e){if("object"==typeof e&&null!==e){var t;if(Fe(e))t=[];else if("[object Date]"===Re(e))t=new Date(e.getTime?e.getTime():e);else if(function(e){return"[object RegExp]"===Re(e)}(e))t=new RegExp(e);else if(function(e){return"[object Error]"===Re(e)}(e))t={message:e.message};else if(function(e){return"[object Boolean]"===Re(e)}(e))t=new Boolean(e);else if(function(e){return"[object Number]"===Re(e)}(e))t=new Number(e);else if(function(e){return"[object String]"===Re(e)}(e))t=new String(e);else if(Object.create&&Object.getPrototypeOf)t=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)t={};else{var r=e.constructor&&e.constructor.prototype||e.__proto__||{},n=function(){};n.prototype=r,t=new n}return Be(Le(e),(function(r){t[r]=e[r]})),t}return e}Te.prototype.get=function(e){for(var t=this.value,r=0;r<e.length;r++){var n=e[r];if(!t||!Ue.call(t,n)){t=void 0;break}t=t[n]}return t},Te.prototype.has=function(e){for(var t=this.value,r=0;r<e.length;r++){var n=e[r];if(!t||!Ue.call(t,n))return!1;t=t[n]}return!0},Te.prototype.set=function(e,t){for(var r=this.value,n=0;n<e.length-1;n++){var a=e[n];Ue.call(r,a)||(r[a]={}),r=r[a]}return r[e[n]]=t,t},Te.prototype.map=function(e){return Ae(this.value,e,!0)},Te.prototype.forEach=function(e){return this.value=Ae(this.value,e,!1),this.value},Te.prototype.reduce=function(e,t){var r=1===arguments.length,n=r?this.value:t;return this.forEach((function(t){this.isRoot&&r||(n=e.call(this,n,t))})),n},Te.prototype.paths=function(){var e=[];return this.forEach((function(t){e.push(this.path)})),e},Te.prototype.nodes=function(){var e=[];return this.forEach((function(t){e.push(this.node)})),e},Te.prototype.clone=function(){var e=[],t=[];return function r(n){for(var a=0;a<e.length;a++)if(e[a]===n)return t[a];if("object"==typeof n&&null!==n){var s=Pe(n);return e.push(n),t.push(s),Be(Le(n),(function(e){s[e]=r(n[e])})),e.pop(),t.pop(),s}return n}(this.value)};var Le=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};function Re(e){return Object.prototype.toString.call(e)}var Fe=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Be=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)};Be(Le(Te.prototype),(function(e){De[e]=function(t){var r=[].slice.call(arguments,1),n=new Te(t);return n[e].apply(n,r)}}));var Ue=Object.hasOwnProperty||function(e,t){return t in e},ze=Ie.exports,Ye=Ge;function Ge(e){if(!(this instanceof Ge))return new Ge(e);this._bbox=e||[1/0,1/0,-1/0,-1/0],this._valid=!!e}Ge.prototype.include=function(e){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[0]),this._bbox[3]=Math.max(this._bbox[3],e[1]),this},Ge.prototype.equals=function(e){var t;return t=e instanceof Ge?e.bbox():e,this._bbox[0]==t[0]&&this._bbox[1]==t[1]&&this._bbox[2]==t[2]&&this._bbox[3]==t[3]},Ge.prototype.center=function(e){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Ge.prototype.union=function(e){var t;return this._valid=!0,t=e instanceof Ge?e.bbox():e,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[2]),this._bbox[3]=Math.max(this._bbox[3],t[3]),this},Ge.prototype.bbox=function(){return this._valid?this._bbox:null},Ge.prototype.contains=function(e){if(!e)return this._fastContains();if(!this._valid)return null;var t=e[0],r=e[1];return this._bbox[0]<=t&&this._bbox[1]<=r&&this._bbox[2]>=t&&this._bbox[3]>=r},Ge.prototype.intersect=function(e){return this._valid?(t=e instanceof Ge?e.bbox():e,!(this._bbox[0]>t[2]||this._bbox[2]<t[0]||this._bbox[3]<t[1]||this._bbox[1]>t[3])):null;var t},Ge.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var e="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",e)},Ge.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var We=function(e){if(!e)return[];var t=Se(Ee(e)),r=[];return t.features.forEach((function(e){e.geometry&&(r=r.concat(Ne(e.geometry.coordinates)))})),r},Ve=ze,qe=Ye,He={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},Ke=Object.keys(He);function Ze(e){for(var t=qe(),r=We(e),n=0;n<r.length;n++)t.include(r[n]);return t}xe.exports=function(e){return Ze(e).bbox()},xe.exports.polygon=function(e){return Ze(e).polygon()},xe.exports.bboxify=function(e){return Ve(e).map((function(e){e&&Ke.some((function(t){return!!e[t]&&-1!==He[t].indexOf(e.type)}))&&(e.bbox=Ze(e).bbox(),this.update(e))}))};var Je=r(xe.exports),Qe=-90;function Xe(e,t){var r=Qe,n=90,a=Qe,s=90,i=270,o=-270;e.forEach((function(e){var t=Je(e),c=t[1],l=t[3],u=t[0],d=t[2];c>r&&(r=c),l<n&&(n=l),l>a&&(a=l),c<s&&(s=c),u<i&&(i=u),d>o&&(o=d)}));var c=t;return r+c.lat>85&&(c.lat=85-r),a+c.lat>90&&(c.lat=90-a),n+c.lat<-85&&(c.lat=-85-n),s+c.lat<Qe&&(c.lat=Qe-s),i+c.lng<=-270&&(c.lng+=360*Math.ceil(Math.abs(c.lng)/360)),o+c.lng>=270&&(c.lng-=360*Math.ceil(Math.abs(c.lng)/360)),c}function $e(e,t){var r=Xe(e.map((function(e){return e.toGeoJSON()})),t);e.forEach((function(e){var t,n=e.getCoordinates(),a=function(e){var t={lng:e[0]+r.lng,lat:e[1]+r.lat};return[t.lng,t.lat]},s=function(e){return e.map((function(e){return a(e)}))};e.type===p.POINT?t=a(n):e.type===p.LINE_STRING||e.type===p.MULTI_POINT?t=n.map(a):e.type===p.POLYGON||e.type===p.MULTI_LINE_STRING?t=n.map(s):e.type===p.MULTI_POLYGON&&(t=n.map((function(e){return e.map((function(e){return s(e)}))}))),e.incomingCoords(t)}))}var et={onSetup:function(e){var t=this,r={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(r.initiallySelectedFeatureIds.filter((function(e){return void 0!==t.getFeature(e)}))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),r},fireUpdate:function(){this.map.fire(m.UPDATE,{action:g.MOVE,features:this.getSelected().map((function(e){return e.toGeoJSON()}))})},fireActionable:function(){var e=this,t=this.getSelected(),r=t.filter((function(t){return e.isInstanceOf("MultiFeature",t)})),n=!1;if(t.length>1){n=!0;var a=t[0].type.replace("Multi","");t.forEach((function(e){e.type.replace("Multi","")!==a&&(n=!1)}))}var s=r.length>0,i=t.length>0;this.setActionableState({combineFeatures:n,uncombineFeatures:s,trash:i})},getUniqueIds:function(e){return e.length?e.map((function(e){return e.properties.id})).filter((function(e){return void 0!==e})).reduce((function(e,t){return e.add(t),e}),new k).values():[]},stopExtendedInteractions:function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1},onStop:function(){je.enable(this)},onMouseMove:function(e,t){return le(t)&&e.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(e),!0},onMouseOut:function(e){return!e.dragMoving||this.fireUpdate()}};et.onTap=et.onClick=function(e,t){return ce(t)?this.clickAnywhere(e,t):ae(y.VERTEX)(t)?this.clickOnVertex(e,t):le(t)?this.clickOnFeature(e,t):void 0},et.clickAnywhere=function(e){var t=this,r=this.getSelectedIds();r.length&&(this.clearSelectedFeatures(),r.forEach((function(e){return t.doRender(e)}))),je.enable(this),this.stopExtendedInteractions(e)},et.clickOnVertex=function(e,t){this.changeMode(f.DIRECT_SELECT,{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:d.MOVE})},et.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},et.clickOnFeature=function(e,t){var r=this;je.disable(this),this.stopExtendedInteractions(e);var n=de(t),a=this.getSelectedIds(),s=t.featureTarget.properties.id,i=this.isSelected(s);if(!n&&i&&this.getFeature(s).type!==p.POINT)return this.changeMode(f.DIRECT_SELECT,{featureId:s});i&&n?(this.deselect(s),this.updateUIClasses({mouse:d.POINTER}),1===a.length&&je.enable(this)):!i&&n?(this.select(s),this.updateUIClasses({mouse:d.MOVE})):i||n||(a.forEach((function(e){return r.doRender(e)})),this.setSelected(s),this.updateUIClasses({mouse:d.MOVE})),this.doRender(s)},et.onMouseDown=function(e,t){return ie(t)?this.startOnActiveFeature(e,t):this.drawConfig.boxSelect&&se(t)?this.startBoxSelect(e,t):void 0},et.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=be(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0},et.onTouchStart=function(e,t){if(ie(t))return this.startOnActiveFeature(e,t)},et.onDrag=function(e,t){return e.canDragMove?this.dragMove(e,t):this.drawConfig.boxSelect&&e.canBoxSelect?this.whileBoxSelect(e,t):void 0},et.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:d.ADD}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(l.BOX_SELECT),this.map.getContainer().appendChild(e.boxSelectElement));var r=be(t.originalEvent,this.map.getContainer()),n=Math.min(e.boxSelectStartLocation.x,r.x),a=Math.max(e.boxSelectStartLocation.x,r.x),s=Math.min(e.boxSelectStartLocation.y,r.y),i=Math.max(e.boxSelectStartLocation.y,r.y),o="translate("+n+"px, "+s+"px)";e.boxSelectElement.style.transform=o,e.boxSelectElement.style.WebkitTransform=o,e.boxSelectElement.style.width=a-n+"px",e.boxSelectElement.style.height=i-s+"px"},et.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();var r={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};$e(this.getSelected(),r),e.dragMoveLocation=t.lngLat},et.onTouchEnd=et.onMouseUp=function(e,t){var r=this;if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){var n=[e.boxSelectStartLocation,be(t.originalEvent,this.map.getContainer())],a=this.featuresAt(null,n,"click"),s=this.getUniqueIds(a).filter((function(e){return!r.isSelected(e)}));s.length&&(this.select(s),s.forEach((function(e){return r.doRender(e)})),this.updateUIClasses({mouse:d.MOVE}))}this.stopExtendedInteractions(e)},et.toDisplayFeatures=function(e,t,r){t.properties.active=this.isSelected(t.properties.id)?b.ACTIVE:b.INACTIVE,r(t),this.fireActionable(),t.properties.active===b.ACTIVE&&t.geometry.type!==p.POINT&&we(t).forEach(r)},et.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},et.onCombineFeatures=function(){var e=this.getSelected();if(!(0===e.length||e.length<2)){for(var t=[],r=[],n=e[0].type.replace("Multi",""),a=0;a<e.length;a++){var s=e[a];if(s.type.replace("Multi","")!==n)return;s.type.includes("Multi")?s.getCoordinates().forEach((function(e){t.push(e)})):t.push(s.getCoordinates()),r.push(s.toGeoJSON())}if(r.length>1){var i=this.newFeature({type:p.FEATURE,properties:r[0].properties,geometry:{type:"Multi"+n,coordinates:t}});this.addFeature(i),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([i.id]),this.map.fire(m.COMBINE_FEATURES,{createdFeatures:[i.toGeoJSON()],deletedFeatures:r})}this.fireActionable()}},et.onUncombineFeatures=function(){var e=this,t=this.getSelected();if(0!==t.length){for(var r=[],n=[],a=function(a){var s=t[a];e.isInstanceOf("MultiFeature",s)&&(s.getFeatures().forEach((function(t){e.addFeature(t),t.properties=s.properties,r.push(t.toGeoJSON()),e.select([t.id])})),e.deleteFeature(s.id,{silent:!0}),n.push(s.toGeoJSON()))},s=0;s<t.length;s++)a(s);r.length>1&&this.map.fire(m.UNCOMBINE_FEATURES,{createdFeatures:r,deletedFeatures:n}),this.fireActionable()}};var tt=ae(y.VERTEX),rt=ae(y.MIDPOINT),nt={fireUpdate:function(){this.map.fire(m.UPDATE,{action:g.CHANGE_COORDINATES,features:this.getSelected().map((function(e){return e.toGeoJSON()}))})},fireActionable:function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})},startDragging:function(e,t){this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},stopDragging:function(e){this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null},onVertex:function(e,t){this.startDragging(e,t);var r=t.featureTarget.properties,n=e.selectedCoordPaths.indexOf(r.coord_path);de(t)||-1!==n?de(t)&&-1===n&&e.selectedCoordPaths.push(r.coord_path):e.selectedCoordPaths=[r.coord_path];var a=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(a)},onMidpoint:function(e,t){this.startDragging(e,t);var r=t.featureTarget.properties;e.feature.addCoordinate(r.coord_path,r.lng,r.lat),this.fireUpdate(),e.selectedCoordPaths=[r.coord_path]},pathsToCoordinates:function(e,t){return t.map((function(t){return{feature_id:e,coord_path:t}}))},onFeature:function(e,t){0===e.selectedCoordPaths.length?this.startDragging(e,t):this.stopDragging(e)},dragFeature:function(e,t,r){$e(this.getSelected(),r),e.dragMoveLocation=t.lngLat},dragVertex:function(e,t,r){for(var n=e.selectedCoordPaths.map((function(t){return e.feature.getCoordinate(t)})),a=Xe(n.map((function(e){return{type:p.FEATURE,properties:{},geometry:{type:p.POINT,coordinates:e}}})),r),s=0;s<n.length;s++){var i=n[s];e.feature.updateCoordinate(e.selectedCoordPaths[s],i[0]+a.lng,i[1]+a.lat)}},clickNoTarget:function(){this.changeMode(f.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(f.SIMPLE_SELECT)},clickActiveFeature:function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()},onSetup:function(e){var t=e.featureId,r=this.getFeature(t);if(!r)throw new Error("You must provide a featureId to enter direct_select mode");if(r.type===p.POINT)throw new TypeError("direct_select mode doesn't handle point features");var n={featureId:t,feature:r,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,n.selectedCoordPaths)),this.setSelected(t),je.disable(this),this.setActionableState({trash:!0}),n},onStop:function(){je.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(e,t,r){e.featureId===t.properties.id?(t.properties.active=b.ACTIVE,r(t),we(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(r)):(t.properties.active=b.INACTIVE,r(t)),this.fireActionable(e)},onTrash:function(e){e.selectedCoordPaths.sort((function(e,t){return t.localeCompare(e,"en",{numeric:!0})})).forEach((function(t){return e.feature.removeCoordinate(t)})),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),!1===e.feature.isValid()&&(this.deleteFeature([e.featureId]),this.changeMode(f.SIMPLE_SELECT,{}))},onMouseMove:function(e,t){var r=ie(t),n=tt(t),a=rt(t),s=0===e.selectedCoordPaths.length;return r&&s||n&&!s?this.updateUIClasses({mouse:d.MOVE}):this.updateUIClasses({mouse:d.NONE}),(n||r||a)&&e.dragMoving&&this.fireUpdate(),this.stopDragging(e),!0},onMouseOut:function(e){return e.dragMoving&&this.fireUpdate(),!0}};nt.onTouchStart=nt.onMouseDown=function(e,t){return tt(t)?this.onVertex(e,t):ie(t)?this.onFeature(e,t):rt(t)?this.onMidpoint(e,t):void 0},nt.onDrag=function(e,t){if(!0===e.canDragMove){e.dragMoving=!0,t.originalEvent.stopPropagation();var r={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,r):this.dragFeature(e,t,r),e.dragMoveLocation=t.lngLat}},nt.onClick=function(e,t){return ce(t)?this.clickNoTarget(e,t):ie(t)?this.clickActiveFeature(e,t):oe(t)?this.clickInactive(e,t):void this.stopDragging(e)},nt.onTap=function(e,t){return ce(t)?this.clickNoTarget(e,t):ie(t)?this.clickActiveFeature(e,t):oe(t)?this.clickInactive(e,t):void 0},nt.onTouchEnd=nt.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};var at={};function st(e,t){return!!e.lngLat&&e.lngLat.lng===t[0]&&e.lngLat.lat===t[1]}at.onSetup=function(){var e=this.newFeature({type:p.FEATURE,properties:{},geometry:{type:p.POINT,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:d.ADD}),this.activateUIButton(h.POINT),this.setActionableState({trash:!0}),{point:e}},at.stopDrawingAndRemove=function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode(f.SIMPLE_SELECT)},at.onTap=at.onClick=function(e,t){this.updateUIClasses({mouse:d.MOVE}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),this.map.fire(m.CREATE,{features:[e.point.toGeoJSON()]}),this.changeMode(f.SIMPLE_SELECT,{featureIds:[e.point.id]})},at.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})},at.toDisplayFeatures=function(e,t,r){var n=t.properties.id===e.point.id;if(t.properties.active=n?b.ACTIVE:b.INACTIVE,!n)return r(t)},at.onTrash=at.stopDrawingAndRemove,at.onKeyUp=function(e,t){if(he(t)||pe(t))return this.stopDrawingAndRemove(e,t)};var it={onSetup:function(){var e=this.newFeature({type:p.FEATURE,properties:{},geometry:{type:p.POLYGON,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),je.disable(this),this.updateUIClasses({mouse:d.ADD}),this.activateUIButton(h.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&st(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode(f.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:d.ADD}),e.polygon.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(f.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},onMouseMove:function(e,t){e.polygon.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),ue(t)&&this.updateUIClasses({mouse:d.POINTER})}};it.onTap=it.onClick=function(e,t){return ue(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)},it.onKeyUp=function(e,t){he(t)?(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(f.SIMPLE_SELECT)):pe(t)&&this.changeMode(f.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},it.onStop=function(e){this.updateUIClasses({mouse:d.NONE}),je.enable(this),this.activateUIButton(),void 0!==this.getFeature(e.polygon.id)&&(e.polygon.removeCoordinate("0."+e.currentVertexPosition),e.polygon.isValid()?this.map.fire(m.CREATE,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(f.SIMPLE_SELECT,{},{silent:!0})))},it.toDisplayFeatures=function(e,t,r){var n=t.properties.id===e.polygon.id;if(t.properties.active=n?b.ACTIVE:b.INACTIVE,!n)return r(t);if(0!==t.geometry.coordinates.length){var a=t.geometry.coordinates[0].length;if(!(a<3)){if(t.properties.meta=y.FEATURE,r(ve(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),a>3){var s=t.geometry.coordinates[0].length-3;r(ve(e.polygon.id,t.geometry.coordinates[0][s],"0."+s,!1))}if(a<=4){var i=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(r({type:p.FEATURE,properties:t.properties,geometry:{coordinates:i,type:p.LINE_STRING}}),3===a)return}return r(t)}}},it.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(f.SIMPLE_SELECT)};var ot={onSetup:function(e){var t,r,n=(e=e||{}).featureId,a="forward";if(n){if(!(t=this.getFeature(n)))throw new Error("Could not find a feature with the provided featureId");var s=e.from;if(s&&"Feature"===s.type&&s.geometry&&"Point"===s.geometry.type&&(s=s.geometry),s&&"Point"===s.type&&s.coordinates&&2===s.coordinates.length&&(s=s.coordinates),!s||!Array.isArray(s))throw new Error("Please use the `from` property to indicate which point to continue the line from");var i=t.coordinates.length-1;if(t.coordinates[i][0]===s[0]&&t.coordinates[i][1]===s[1])r=i+1,t.addCoordinate.apply(t,[r].concat(t.coordinates[i]));else{if(t.coordinates[0][0]!==s[0]||t.coordinates[0][1]!==s[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");a="backwards",r=0,t.addCoordinate.apply(t,[r].concat(t.coordinates[0]))}}else t=this.newFeature({type:p.FEATURE,properties:{},geometry:{type:p.LINE_STRING,coordinates:[]}}),r=0,this.addFeature(t);return this.clearSelectedFeatures(),je.disable(this),this.updateUIClasses({mouse:d.ADD}),this.activateUIButton(h.LINE),this.setActionableState({trash:!0}),{line:t,currentVertexPosition:r,direction:a}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&st(t,e.line.coordinates[e.currentVertexPosition-1])||"backwards"===e.direction&&st(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode(f.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:d.ADD}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),"forward"===e.direction?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(f.SIMPLE_SELECT,{featureIds:[e.line.id]})},onMouseMove:function(e,t){e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),ue(t)&&this.updateUIClasses({mouse:d.POINTER})}};ot.onTap=ot.onClick=function(e,t){if(ue(t))return this.clickOnVertex(e,t);this.clickAnywhere(e,t)},ot.onKeyUp=function(e,t){pe(t)?this.changeMode(f.SIMPLE_SELECT,{featureIds:[e.line.id]}):he(t)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(f.SIMPLE_SELECT))},ot.onStop=function(e){je.enable(this),this.activateUIButton(),void 0!==this.getFeature(e.line.id)&&(e.line.removeCoordinate(""+e.currentVertexPosition),e.line.isValid()?this.map.fire(m.CREATE,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(f.SIMPLE_SELECT,{},{silent:!0})))},ot.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(f.SIMPLE_SELECT)},ot.toDisplayFeatures=function(e,t,r){var n=t.properties.id===e.line.id;if(t.properties.active=n?b.ACTIVE:b.INACTIVE,!n)return r(t);t.geometry.coordinates.length<2||(t.properties.meta=y.FEATURE,r(ve(e.line.id,t.geometry.coordinates["forward"===e.direction?t.geometry.coordinates.length-2:1],""+("forward"===e.direction?t.geometry.coordinates.length-2:1),!1)),r(t))};var ct={simple_select:et,direct_select:nt,draw_point:at,draw_polygon:it,draw_line_string:ot},lt={defaultMode:f.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:ne,modes:ct,controls:{},userProperties:!1},ut={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},dt={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function ht(e,t){return e.map((function(e){return e.source?e:ee(e,{id:e.id+"."+t,source:"hot"===t?u.HOT:u.COLD})}))}var pt={exports:{}};!function(e,r){var n="__lodash_hash_undefined__",a=9007199254740991,s="[object Arguments]",i="[object Array]",o="[object Boolean]",c="[object Date]",l="[object Error]",u="[object Function]",d="[object Map]",h="[object Number]",p="[object Object]",f="[object Promise]",m="[object RegExp]",g="[object Set]",y="[object String]",b="[object Symbol]",v="[object WeakMap]",_="[object ArrayBuffer]",w="[object DataView]",j=/^\[object .+?Constructor\]$/,x=/^(?:0|[1-9]\d*)$/,M={};M["[object Float32Array]"]=M["[object Float64Array]"]=M["[object Int8Array]"]=M["[object Int16Array]"]=M["[object Int32Array]"]=M["[object Uint8Array]"]=M["[object Uint8ClampedArray]"]=M["[object Uint16Array]"]=M["[object Uint32Array]"]=!0,M[s]=M[i]=M[_]=M[o]=M[w]=M[c]=M[l]=M[u]=M[d]=M[h]=M[p]=M[m]=M[g]=M[y]=M[v]=!1;var O="object"==typeof t&&t&&t.Object===Object&&t,k="object"==typeof self&&self&&self.Object===Object&&self,C=O||k||Function("return this")(),E=r&&!r.nodeType&&r,S=E&&e&&!e.nodeType&&e,N=S&&S.exports===E,I=N&&O.process,D=function(){try{return I&&I.binding&&I.binding("util")}catch(e){}}(),T=D&&D.isTypedArray;function A(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function P(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function L(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var R,F,B,U=Array.prototype,z=Function.prototype,Y=Object.prototype,G=C["__core-js_shared__"],W=z.toString,V=Y.hasOwnProperty,q=(R=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||""))?"Symbol(src)_1."+R:"",H=Y.toString,K=RegExp("^"+W.call(V).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Z=N?C.Buffer:void 0,J=C.Symbol,Q=C.Uint8Array,X=Y.propertyIsEnumerable,$=U.splice,ee=J?J.toStringTag:void 0,te=Object.getOwnPropertySymbols,re=Z?Z.isBuffer:void 0,ne=(F=Object.keys,B=Object,function(e){return F(B(e))}),ae=De(C,"DataView"),se=De(C,"Map"),ie=De(C,"Promise"),oe=De(C,"Set"),ce=De(C,"WeakMap"),le=De(Object,"create"),ue=Le(ae),de=Le(se),he=Le(ie),pe=Le(oe),fe=Le(ce),me=J?J.prototype:void 0,ge=me?me.valueOf:void 0;function ye(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function be(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ve(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function _e(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new ve;++t<r;)this.add(e[t])}function we(e){var t=this.__data__=new be(e);this.size=t.size}function je(e,t){var r=Be(e),n=!r&&Fe(e),a=!r&&!n&&Ue(e),s=!r&&!n&&!a&&Ve(e),i=r||n||a||s,o=i?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=o.length;for(var l in e)!t&&!V.call(e,l)||i&&("length"==l||a&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Pe(l,c))||o.push(l);return o}function xe(e,t){for(var r=e.length;r--;)if(Re(e[r][0],t))return r;return-1}function Me(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ee&&ee in Object(e)?function(e){var t=V.call(e,ee),r=e[ee];try{e[ee]=void 0;var n=!0}catch(e){}var a=H.call(e);return n&&(t?e[ee]=r:delete e[ee]),a}(e):function(e){return H.call(e)}(e)}function Oe(e){return We(e)&&Me(e)==s}function ke(e,t,r,n,a){return e===t||(null==e||null==t||!We(e)&&!We(t)?e!=e&&t!=t:function(e,t,r,n,a,u){var f=Be(e),v=Be(t),j=f?i:Ae(e),x=v?i:Ae(t),M=(j=j==s?p:j)==p,O=(x=x==s?p:x)==p,k=j==x;if(k&&Ue(e)){if(!Ue(t))return!1;f=!0,M=!1}if(k&&!M)return u||(u=new we),f||Ve(e)?Se(e,t,r,n,a,u):function(e,t,r,n,a,s,i){switch(r){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _:return!(e.byteLength!=t.byteLength||!s(new Q(e),new Q(t)));case o:case c:case h:return Re(+e,+t);case l:return e.name==t.name&&e.message==t.message;case m:case y:return e==t+"";case d:var u=P;case g:var p=1&n;if(u||(u=L),e.size!=t.size&&!p)return!1;var f=i.get(e);if(f)return f==t;n|=2,i.set(e,t);var v=Se(u(e),u(t),n,a,s,i);return i.delete(e),v;case b:if(ge)return ge.call(e)==ge.call(t)}return!1}(e,t,j,r,n,a,u);if(!(1&r)){var C=M&&V.call(e,"__wrapped__"),E=O&&V.call(t,"__wrapped__");if(C||E){var S=C?e.value():e,N=E?t.value():t;return u||(u=new we),a(S,N,r,n,u)}}return!!k&&(u||(u=new we),function(e,t,r,n,a,s){var i=1&r,o=Ne(e),c=o.length;if(c!=Ne(t).length&&!i)return!1;for(var l=c;l--;){var u=o[l];if(!(i?u in t:V.call(t,u)))return!1}var d=s.get(e);if(d&&s.get(t))return d==t;var h=!0;s.set(e,t),s.set(t,e);for(var p=i;++l<c;){var f=e[u=o[l]],m=t[u];if(n)var g=i?n(m,f,u,t,e,s):n(f,m,u,e,t,s);if(!(void 0===g?f===m||a(f,m,r,n,s):g)){h=!1;break}p||(p="constructor"==u)}if(h&&!p){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(h=!1)}return s.delete(e),s.delete(t),h}(e,t,r,n,a,u))}(e,t,r,n,ke,a))}function Ce(e){return!(!Ge(e)||function(e){return!!q&&q in e}(e))&&(ze(e)?K:j).test(Le(e))}function Ee(e){if(r=(t=e)&&t.constructor,t!==("function"==typeof r&&r.prototype||Y))return ne(e);var t,r,n=[];for(var a in Object(e))V.call(e,a)&&"constructor"!=a&&n.push(a);return n}function Se(e,t,r,n,a,s){var i=1&r,o=e.length,c=t.length;if(o!=c&&!(i&&c>o))return!1;var l=s.get(e);if(l&&s.get(t))return l==t;var u=-1,d=!0,h=2&r?new _e:void 0;for(s.set(e,t),s.set(t,e);++u<o;){var p=e[u],f=t[u];if(n)var m=i?n(f,p,u,t,e,s):n(p,f,u,e,t,s);if(void 0!==m){if(m)continue;d=!1;break}if(h){if(!A(t,(function(e,t){if(i=t,!h.has(i)&&(p===e||a(p,e,r,n,s)))return h.push(t);var i}))){d=!1;break}}else if(p!==f&&!a(p,f,r,n,s)){d=!1;break}}return s.delete(e),s.delete(t),d}function Ne(e){return function(e,t,r){var n=t(e);return Be(e)?n:function(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}(n,r(e))}(e,qe,Te)}function Ie(e,t){var r,n,a=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?a["string"==typeof t?"string":"hash"]:a.map}function De(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Ce(r)?r:void 0}ye.prototype.clear=function(){this.__data__=le?le(null):{},this.size=0},ye.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ye.prototype.get=function(e){var t=this.__data__;if(le){var r=t[e];return r===n?void 0:r}return V.call(t,e)?t[e]:void 0},ye.prototype.has=function(e){var t=this.__data__;return le?void 0!==t[e]:V.call(t,e)},ye.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=le&&void 0===t?n:t,this},be.prototype.clear=function(){this.__data__=[],this.size=0},be.prototype.delete=function(e){var t=this.__data__,r=xe(t,e);return!(r<0)&&(r==t.length-1?t.pop():$.call(t,r,1),--this.size,!0)},be.prototype.get=function(e){var t=this.__data__,r=xe(t,e);return r<0?void 0:t[r][1]},be.prototype.has=function(e){return xe(this.__data__,e)>-1},be.prototype.set=function(e,t){var r=this.__data__,n=xe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},ve.prototype.clear=function(){this.size=0,this.__data__={hash:new ye,map:new(se||be),string:new ye}},ve.prototype.delete=function(e){var t=Ie(this,e).delete(e);return this.size-=t?1:0,t},ve.prototype.get=function(e){return Ie(this,e).get(e)},ve.prototype.has=function(e){return Ie(this,e).has(e)},ve.prototype.set=function(e,t){var r=Ie(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},_e.prototype.add=_e.prototype.push=function(e){return this.__data__.set(e,n),this},_e.prototype.has=function(e){return this.__data__.has(e)},we.prototype.clear=function(){this.__data__=new be,this.size=0},we.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},we.prototype.get=function(e){return this.__data__.get(e)},we.prototype.has=function(e){return this.__data__.has(e)},we.prototype.set=function(e,t){var r=this.__data__;if(r instanceof be){var n=r.__data__;if(!se||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ve(n)}return r.set(e,t),this.size=r.size,this};var Te=te?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,n=null==e?0:e.length,a=0,s=[];++r<n;){var i=e[r];t(i,r,e)&&(s[a++]=i)}return s}(te(e),(function(t){return X.call(e,t)})))}:function(){return[]},Ae=Me;function Pe(e,t){return!!(t=null==t?a:t)&&("number"==typeof e||x.test(e))&&e>-1&&e%1==0&&e<t}function Le(e){if(null!=e){try{return W.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Re(e,t){return e===t||e!=e&&t!=t}(ae&&Ae(new ae(new ArrayBuffer(1)))!=w||se&&Ae(new se)!=d||ie&&Ae(ie.resolve())!=f||oe&&Ae(new oe)!=g||ce&&Ae(new ce)!=v)&&(Ae=function(e){var t=Me(e),r=t==p?e.constructor:void 0,n=r?Le(r):"";if(n)switch(n){case ue:return w;case de:return d;case he:return f;case pe:return g;case fe:return v}return t});var Fe=Oe(function(){return arguments}())?Oe:function(e){return We(e)&&V.call(e,"callee")&&!X.call(e,"callee")},Be=Array.isArray,Ue=re||function(){return!1};function ze(e){if(!Ge(e))return!1;var t=Me(e);return t==u||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ye(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function Ge(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function We(e){return null!=e&&"object"==typeof e}var Ve=T?function(e){return function(t){return e(t)}}(T):function(e){return We(e)&&Ye(e.length)&&!!M[Me(e)]};function qe(e){return null!=(t=e)&&Ye(t.length)&&!ze(t)?je(e):Ee(e);var t}e.exports=function(e,t){return ke(e,t)}}(pt,pt.exports);var ft=r(pt.exports);function mt(e,t){return e.length===t.length&&JSON.stringify(e.map((function(e){return e})).sort())===JSON.stringify(t.map((function(e){return e})).sort())}var gt={Polygon:U,LineString:B,Point:F,MultiPolygon:G,MultiLineString:G,MultiPoint:G},yt=Object.freeze({__proto__:null,CommonSelectors:fe,constrainFeatureMovement:Xe,createMidPoint:_e,createSupplementaryPoints:we,createVertex:ve,doubleClickZoom:je,euclideanDistance:I,featuresAt:E,getFeatureAtAndSetCursors:N,isClick:D,isEventAtCoordinates:st,isTap:T,mapEventToBoundingBox:O,ModeHandler:e,moveFeatures:$e,sortFeatures:M,stringSetsAreEqual:mt,StringSet:k,theme:ne,toDenseArray:K}),bt=function(e,t){var r={options:e=function(e){void 0===e&&(e={});var t=ee(e);return e.controls||(t.controls={}),!1===e.displayControlsDefault?t.controls=ee(dt,e.controls):t.controls=ee(ut,e.controls),(t=ee(lt,t)).styles=ht(t.styles,"cold").concat(ht(t.styles,"hot")),t}(e)};t=function(e,t){return t.modes=f,t.getFeatureIdsAt=function(t){return E.click({point:t},null,e).map((function(e){return e.properties.id}))},t.getSelectedIds=function(){return e.store.getSelectedIds()},t.getSelected=function(){return{type:p.FEATURE_COLLECTION,features:e.store.getSelectedIds().map((function(t){return e.store.get(t)})).map((function(e){return e.toGeoJSON()}))}},t.getSelectedPoints=function(){return{type:p.FEATURE_COLLECTION,features:e.store.getSelectedCoordinates().map((function(e){return{type:p.FEATURE,properties:{},geometry:{type:p.POINT,coordinates:e.coordinates}}}))}},t.set=function(r){if(void 0===r.type||r.type!==p.FEATURE_COLLECTION||!Array.isArray(r.features))throw new Error("Invalid FeatureCollection");var n=e.store.createRenderBatch(),a=e.store.getAllIds().slice(),s=t.add(r),i=new k(s);return(a=a.filter((function(e){return!i.has(e)}))).length&&t.delete(a),n(),s},t.add=function(t){var r=JSON.parse(JSON.stringify(ke(t))).features.map((function(t){if(t.id=t.id||L(),null===t.geometry)throw new Error("Invalid geometry: null");if(void 0===e.store.get(t.id)||e.store.get(t.id).type!==t.geometry.type){var r=gt[t.geometry.type];if(void 0===r)throw new Error("Invalid geometry type: "+t.geometry.type+".");var n=new r(e,t);e.store.add(n)}else{var a=e.store.get(t.id);a.properties=t.properties,ft(a.properties,t.properties)||e.store.featureChanged(a.id),ft(a.getCoordinates(),t.geometry.coordinates)||a.incomingCoords(t.geometry.coordinates)}return t.id}));return e.store.render(),r},t.get=function(t){var r=e.store.get(t);if(r)return r.toGeoJSON()},t.getAll=function(){return{type:p.FEATURE_COLLECTION,features:e.store.getAll().map((function(e){return e.toGeoJSON()}))}},t.delete=function(r){return e.store.delete(r,{silent:!0}),t.getMode()!==f.DIRECT_SELECT||e.store.getSelectedIds().length?e.store.render():e.events.changeMode(f.SIMPLE_SELECT,void 0,{silent:!0}),t},t.deleteAll=function(){return e.store.delete(e.store.getAllIds(),{silent:!0}),t.getMode()===f.DIRECT_SELECT?e.events.changeMode(f.SIMPLE_SELECT,void 0,{silent:!0}):e.store.render(),t},t.changeMode=function(r,n){return void 0===n&&(n={}),r===f.SIMPLE_SELECT&&t.getMode()===f.SIMPLE_SELECT?(mt(n.featureIds||[],e.store.getSelectedIds())||(e.store.setSelected(n.featureIds,{silent:!0}),e.store.render()),t):(r===f.DIRECT_SELECT&&t.getMode()===f.DIRECT_SELECT&&n.featureId===e.store.getSelectedIds()[0]||e.events.changeMode(r,n,{silent:!0}),t)},t.getMode=function(){return e.events.getMode()},t.trash=function(){return e.events.trash({silent:!0}),t},t.combineFeatures=function(){return e.events.combineFeatures({silent:!0}),t},t.uncombineFeatures=function(){return e.events.uncombineFeatures({silent:!0}),t},t.setFeatureProperty=function(r,n,a){return e.store.setFeatureProperty(r,n,a),t},t}(r,t),r.api=t;var n=re(r);return t.onAdd=n.onAdd,t.onRemove=n.onRemove,t.types=h,t.options=e,t};function vt(e){bt(e,this)}return vt.modes=ct,vt.constants=w,vt.lib=yt,vt}()}).call(this,r(93))},2073:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(1),a=r(9),s=r(0);const i=e=>{let{map:t}=e,r=a.c;a.r||(r=a.c.filter((e=>"object"===typeof e.value)));const[i,o]=Object(n.useState)(r[0].label);return Object(s.jsx)("div",{className:"bg-white blue-dark flex mt2 ml2 f7 fr br1 shadow-1",children:r.map(((e,r)=>Object(s.jsx)("div",{onClick:()=>(e=>{let r=e.value;"string"===typeof e.value&&(r="mapbox://styles/mapbox/"+e.value),t.setStyle(r),o(e.label)})(e),className:"ttc pv2 ph3 pointer link + ".concat(i===e.label?"bg-grey-light fw6":""),children:e.label},r)))})}},2074:function(e,t,r){"use strict";r.d(t,"c",(function(){return u})),r.d(t,"b",(function(){return d})),r.d(t,"d",(function(){return h})),r.d(t,"a",(function(){return p}));var n=r(2075),a=r(1990),s=r(2039),i=r(9),o=r(2076),c=r.n(o),l=r(2093);const u=e=>{if(e.size>=i.v)throw Error("fileSize")},d=e=>{const t=e.name.split(".")[1].toLowerCase();if(!1===["json","geojson","kml","osm","xml","zip"].includes(t))throw Error("invalidFile")},h=(e,t)=>{if("FeatureCollection"!==e.type)throw Error("noFeatureCollection");return e.features=e.features.map((e=>((e,t)=>{if(!1===t.includes(e.geometry.type))throw Error("unsupportedGeom - ".concat(e.geometry.type));if("LineString"===e.geometry.type){const t=e.geometry.coordinates;if(JSON.stringify(t[0])!==JSON.stringify(t[t.length-1]))throw Error("closedLinestring");return Object(n.a)(e)}return e})(e,t))).filter((e=>Object(a.a)(e)>0)),e};const p=async e=>{const t=e.name.split(".")[1].toLowerCase();let r=await function(e,t){return new Promise(((r,n)=>{let a=new FileReader;a.onload=()=>{r(a.result)},a.onerror=n,"zip"===t?a.readAsArrayBuffer(e):a.readAsText(e)}))}(e,t);switch(t){case"json":case"geojson":return JSON.parse(r);case"kml":return Object(s.kml)((new DOMParser).parseFromString(r,"text/xml"));case"osm":let e=(new DOMParser).parseFromString(r,"text/xml");return l(e);case"xml":let t=(new DOMParser).parseFromString(r,"text/xml");return l(t);case"zip":return c()(r).then((e=>e))}}},2075:function(e,t,r){"use strict";var n=r(1930),a=r(1963),s=r(1922),i=r(2055);function o(e,t,r,i){t=t||("Feature"===e.type?e.properties:{});var o=Object(a.c)(e),l=o.coordinates,u=o.type;if(!l.length)throw new Error("line must contain coordinates");switch(u){case"LineString":return r&&(l=c(l)),Object(s.k)([l],t);case"MultiLineString":var d=[],h=0;return l.forEach((function(e){if(r&&(e=c(e)),i){var t=function(e){var t=e[0],r=e[1],n=e[2],a=e[3];return Math.abs(t-n)*Math.abs(r-a)}(Object(n.a)(Object(s.h)(e)));t>h?(d.unshift(e),h=t):d.push(e)}else d.push(e)})),Object(s.k)(d,t);default:throw new Error("geometry type "+u+" is not supported")}}function c(e){var t=e[0],r=t[0],n=t[1],a=e[e.length-1],s=a[0],i=a[1];return r===s&&n===i||e.push(t),e}t.a=function(e,t){var r,n,c;void 0===t&&(t={});var l=t.properties,u=null===(r=t.autoComplete)||void 0===r||r,d=null===(n=t.orderCoords)||void 0===n||n;if(null!==(c=t.mutate)&&void 0!==c&&c||(e=Object(i.a)(e)),"FeatureCollection"===e.type){var h=[];return e.features.forEach((function(e){h.push(Object(a.b)(o(e,{},u,d)))})),Object(s.i)(h,l)}return o(e,l,u,d)}},2076:function(e,t,r){"use strict";(function(t){let n=r(2101);n.default&&(n=n.default);const a=r(2077),s=r(2081),i=r(2084),o=r(2085),c=r(1991),l=r(2092),u=r(248).Buffer,d=t.URL,h=new l({max:20});function p(e){if(!e)throw new Error("forgot to pass buffer");return u.isBuffer(e)?e:f(e)?u.from(e):f(e.buffer)?1===e.BYTES_PER_ELEMENT?u.from(e):u.from(e.buffer):void 0}function f(e){return e instanceof t.ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)}function m(e,t){return"string"===typeof e&&h.has(e)?c.resolve(h.get(e)):m.getShapefile(e,t).then((function(t){return"string"===typeof e&&h.set(e,t),t}))}m.combine=function(e){let[t,r]=e;const n={type:"FeatureCollection",features:[]};let a=0;const s=t.length;for(r||(r=[]);a<s;)n.features.push({type:"Feature",geometry:t[a],properties:r[a]||{}}),a++;return n},m.parseZip=async function(e,t){let r;e=p(e);const s=await a(e),c=[];for(r in t=t||[],s)-1===r.indexOf("__MACOSX")&&("shp"===r.slice(-3).toLowerCase()?(c.push(r.slice(0,-4)),s[r.slice(0,-3)+r.slice(-3).toLowerCase()]=s[r]):"prj"===r.slice(-3).toLowerCase()?s[r.slice(0,-3)+r.slice(-3).toLowerCase()]=n(s[r]):"json"===r.slice(-4).toLowerCase()||t.indexOf(r.split(".").pop())>-1?c.push(r.slice(0,-3)+r.slice(-3).toLowerCase()):"dbf"!==r.slice(-3).toLowerCase()&&"cpg"!==r.slice(-3).toLowerCase()||(s[r.slice(0,-3)+r.slice(-3).toLowerCase()]=s[r]));if(!c.length)throw new Error("no layers founds");const l=c.map((function(e){let r,n;const a=e.lastIndexOf(".");return a>-1&&e.slice(a).indexOf("json")>-1?(r=JSON.parse(s[e]),r.fileName=e.slice(0,a)):t.indexOf(e.slice(a+1))>-1?(r=s[e],r.fileName=e):(s[e+".dbf"]&&(n=o(s[e+".dbf"],s[e+".cpg"])),r=m.combine([i(s[e+".shp"],s[e+".prj"]),n]),r.fileName=e),r}));return 1===l.length?l[0]:l};const g=async e=>{const t=await c.all([s(e,"shp"),s(e,"prj")]);let r=!1;try{t[1]&&(r=n(t[1]))}catch(a){r=!1}return i(t[0],r)},y=async e=>{const[t,r]=await c.all([s(e,"dbf"),s(e,"cpg")]);if(t)return o(t,r)};m.getShapefile=async function(e,t){if("string"!==typeof e)return m.parseZip(e);if(((e,t)=>new d(e).pathname.slice(-4).toLowerCase()===t)(e,".zip"))return async function(e,t){const r=await s(e);return m.parseZip(r,t)}(e,t);const r=await c.all([g(e),y(e)]);return m.combine(r)},m.parseShp=function(e,t){if(e=p(e),u.isBuffer(t)&&(t=t.toString()),"string"===typeof t)try{t=n(t)}catch(r){t=!1}return i(e,t)},m.parseDbf=function(e,t){return e=p(e),o(e,t)},e.exports=m}).call(this,r(93))},2077:function(e,t,r){"use strict";const n=r(2078);e.exports=async e=>{const t=new n;await t.loadAsync(e);const r=t.file(/.+/),a={};return await Promise.all(r.map((async e=>{let t;t="shp"===e.name.slice(-3).toLowerCase()||"dbf"===e.name.slice(-3).toLowerCase()?await e.async("nodebuffer"):await e.async("text"),a[e.name]=t}))),a}},2078:function(e,t,r){(function(t,r,n,a){e.exports=function e(t,r,n){function a(i,o){if(!r[i]){if(!t[i]){if(s)return s(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[i]={exports:{}};t[i][0].call(l.exports,(function(e){return a(t[i][1][e]||e)}),l,l.exports,e,t,r,n)}return r[i].exports}for(var s=!1,i=0;i<n.length;i++)a(n[i]);return a}({1:[function(e,t,r){"use strict";var n=e("./utils"),a=e("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(e){for(var t,r,a,i,o,c,l,u=[],d=0,h=e.length,p=h,f="string"!==n.getTypeOf(e);d<e.length;)p=h-d,a=f?(t=e[d++],r=d<h?e[d++]:0,d<h?e[d++]:0):(t=e.charCodeAt(d++),r=d<h?e.charCodeAt(d++):0,d<h?e.charCodeAt(d++):0),i=t>>2,o=(3&t)<<4|r>>4,c=1<p?(15&r)<<2|a>>6:64,l=2<p?63&a:64,u.push(s.charAt(i)+s.charAt(o)+s.charAt(c)+s.charAt(l));return u.join("")},r.decode=function(e){var t,r,n,i,o,c,l=0,u=0,d="data:";if(e.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var h,p=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===s.charAt(64)&&p--,e.charAt(e.length-2)===s.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=a.uint8array?new Uint8Array(0|p):new Array(0|p);l<e.length;)t=s.indexOf(e.charAt(l++))<<2|(i=s.indexOf(e.charAt(l++)))>>4,r=(15&i)<<4|(o=s.indexOf(e.charAt(l++)))>>2,n=(3&o)<<6|(c=s.indexOf(e.charAt(l++))),h[u++]=t,64!==o&&(h[u++]=r),64!==c&&(h[u++]=n);return h}},{"./support":30,"./utils":32}],2:[function(e,t,r){"use strict";var n=e("./external"),a=e("./stream/DataWorker"),s=e("./stream/Crc32Probe"),i=e("./stream/DataLengthProbe");function o(e,t,r,n,a){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=n,this.compressedContent=a}o.prototype={getContentWorker:function(){var e=new a(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new i("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new a(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(e,t,r){return e.pipe(new s).pipe(new i("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new i("compressedSize")).withStreamInfo("compression",t)},t.exports=o},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,r){"use strict";var n=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,r){"use strict";var n=e("./utils"),a=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==n.getTypeOf(e)?function(e,t,r,n){var s=a,i=n+r;e^=-1;for(var o=n;o<i;o++)e=e>>>8^s[255&(e^t[o])];return-1^e}(0|t,e,e.length,0):function(e,t,r,n){var s=a,i=n+r;e^=-1;for(var o=n;o<i;o++)e=e>>>8^s[255&(e^t.charCodeAt(o))];return-1^e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,t,r){"use strict";var n=null;n="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:n}},{lie:37}],7:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,a=e("pako"),s=e("./utils"),i=e("./stream/GenericWorker"),o=n?"uint8array":"array";function c(e,t){i.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}r.magic="\b\0",s.inherits(c,i),c.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(o,e.data),!1)},c.prototype.flush=function(){i.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},r.compressWorker=function(e){return new c("Deflate",e)},r.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,r){"use strict";function n(e,t){var r,n="";for(r=0;r<t;r++)n+=String.fromCharCode(255&e),e>>>=8;return n}function a(e,t,r,a,i,u){var d,h,p=e.file,f=e.compression,m=u!==o.utf8encode,g=s.transformTo("string",u(p.name)),y=s.transformTo("string",o.utf8encode(p.name)),b=p.comment,v=s.transformTo("string",u(b)),_=s.transformTo("string",o.utf8encode(b)),w=y.length!==p.name.length,j=_.length!==b.length,x="",M="",O="",k=p.dir,C=p.date,E={crc32:0,compressedSize:0,uncompressedSize:0};t&&!r||(E.crc32=e.crc32,E.compressedSize=e.compressedSize,E.uncompressedSize=e.uncompressedSize);var S=0;t&&(S|=8),m||!w&&!j||(S|=2048);var N=0,I=0;k&&(N|=16),"UNIX"===i?(I=798,N|=function(e,t){var r=e;return e||(r=t?16893:33204),(65535&r)<<16}(p.unixPermissions,k)):(I=20,N|=function(e){return 63&(e||0)}(p.dosPermissions)),d=C.getUTCHours(),d<<=6,d|=C.getUTCMinutes(),d<<=5,d|=C.getUTCSeconds()/2,h=C.getUTCFullYear()-1980,h<<=4,h|=C.getUTCMonth()+1,h<<=5,h|=C.getUTCDate(),w&&(M=n(1,1)+n(c(g),4)+y,x+="up"+n(M.length,2)+M),j&&(O=n(1,1)+n(c(v),4)+_,x+="uc"+n(O.length,2)+O);var D="";return D+="\n\0",D+=n(S,2),D+=f.magic,D+=n(d,2),D+=n(h,2),D+=n(E.crc32,4),D+=n(E.compressedSize,4),D+=n(E.uncompressedSize,4),D+=n(g.length,2),D+=n(x.length,2),{fileRecord:l.LOCAL_FILE_HEADER+D+g+x,dirRecord:l.CENTRAL_FILE_HEADER+n(I,2)+D+n(v.length,2)+"\0\0\0\0"+n(N,4)+n(a,4)+g+x+v}}var s=e("../utils"),i=e("../stream/GenericWorker"),o=e("../utf8"),c=e("../crc32"),l=e("../signature");function u(e,t,r,n){i.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(u,i),u.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,i.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-n-1))/r:100}}))},u.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var r=a(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,r=a(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),t)this.push({data:function(e){return l.DATA_DESCRIPTOR+n(e.crc32,4)+n(e.compressedSize,4)+n(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r=this.bytesWritten-e,a=function(e,t,r,a,i){var o=s.transformTo("string",i(a));return l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(e,2)+n(e,2)+n(t,4)+n(r,4)+n(o.length,2)+o}(this.dirRecords.length,r,e,this.zipComment,this.encodeFileName);this.push({data:a,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},u.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(e){var t=this._sources;if(!i.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch(e){}return!0},u.prototype.lock=function(){i.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,r){"use strict";var n=e("../compressions"),a=e("./ZipFileWorker");r.generateWorker=function(e,t,r){var s=new a(t.streamFiles,r,t.platform,t.encodeFileName),i=0;try{e.forEach((function(e,r){i++;var a=function(e,t){var r=e||t,a=n[r];if(!a)throw new Error(r+" is not a valid compression method !");return a}(r.options.compression,t.compression),o=r.options.compressionOptions||t.compressionOptions||{},c=r.dir,l=r.date;r._compressWorker(a,o).withStreamInfo("file",{name:e,dir:c,date:l,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(s)})),s.entriesCount=i}catch(e){s.error(e)}return s}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,r){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new n;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(n.prototype=e("./object")).loadAsync=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.version="3.10.1",n.loadAsync=function(e,t){return(new n).loadAsync(e,t)},n.external=e("./external"),t.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,r){"use strict";var n=e("./utils"),a=e("./external"),s=e("./utf8"),i=e("./zipEntries"),o=e("./stream/Crc32Probe"),c=e("./nodejsUtils");function l(e){return new a.Promise((function(t,r){var n=e.decompressed.getContentWorker().pipe(new o);n.on("error",(function(e){r(e)})).on("end",(function(){n.streamInfo.crc32!==e.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var r=this;return t=n.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),c.isNode&&c.isStream(e)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var r=new i(t);return r.load(e),r})).then((function(e){var r=[a.Promise.resolve(e)],n=e.files;if(t.checkCRC32)for(var s=0;s<n.length;s++)r.push(l(n[s]));return a.Promise.all(r)})).then((function(e){for(var a=e.shift(),s=a.files,i=0;i<s.length;i++){var o=s[i],c=o.fileNameStr,l=n.resolve(o.fileNameStr);r.file(l,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:t.createFolders}),o.dir||(r.file(l).unsafeOriginalName=c)}return a.zipComment.length&&(r.comment=a.zipComment),r}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,r){"use strict";var n=e("../utils"),a=e("../stream/GenericWorker");function s(e,t){a.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}n.inherits(s,a),s.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},s.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,r){"use strict";var n=e("readable-stream").Readable;function a(e,t,r){n.call(this,t),this._helper=e;var a=this;e.on("data",(function(e,t){a.push(e)||a._helper.pause(),r&&r(t)})).on("error",(function(e){a.emit("error",e)})).on("end",(function(){a.push(null)}))}e("../utils").inherits(a,n),a.prototype._read=function(){this._helper.resume()},t.exports=a},{"../utils":32,"readable-stream":16}],14:[function(e,r,n){"use strict";r.exports={isNode:"undefined"!=typeof t,newBufferFrom:function(e,r){if(t.from&&t.from!==Uint8Array.from)return t.from(e,r);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new t(e,r)},allocBuffer:function(e){if(t.alloc)return t.alloc(e);var r=new t(e);return r.fill(0),r},isBuffer:function(e){return t.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,r){"use strict";function n(e,t,r){var n,a=s.getTypeOf(t),o=s.extend(r||{},c);o.date=o.date||new Date,null!==o.compression&&(o.compression=o.compression.toUpperCase()),"string"==typeof o.unixPermissions&&(o.unixPermissions=parseInt(o.unixPermissions,8)),o.unixPermissions&&16384&o.unixPermissions&&(o.dir=!0),o.dosPermissions&&16&o.dosPermissions&&(o.dir=!0),o.dir&&(e=m(e)),o.createFolders&&(n=f(e))&&g.call(this,n,!0);var d="string"===a&&!1===o.binary&&!1===o.base64;r&&void 0!==r.binary||(o.binary=!d),(t instanceof l&&0===t.uncompressedSize||o.dir||!t||0===t.length)&&(o.base64=!1,o.binary=!0,t="",o.compression="STORE",a="string");var y=null;y=t instanceof l||t instanceof i?t:h.isNode&&h.isStream(t)?new p(e,t):s.prepareContent(e,t,o.binary,o.optimizedBinaryString,o.base64);var b=new u(e,y,o);this.files[e]=b}var a=e("./utf8"),s=e("./utils"),i=e("./stream/GenericWorker"),o=e("./stream/StreamHelper"),c=e("./defaults"),l=e("./compressedObject"),u=e("./zipObject"),d=e("./generate"),h=e("./nodejsUtils"),p=e("./nodejs/NodejsStreamInputAdapter"),f=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:c.createFolders,e=m(e),this.files[e]||n.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function y(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,r,n;for(t in this.files)n=this.files[t],(r=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(r,n)},filter:function(e){var t=[];return this.forEach((function(r,n){e(r,n)&&t.push(n)})),t},file:function(e,t,r){if(1!==arguments.length)return e=this.root+e,n.call(this,e,t,r),this;if(y(e)){var a=e;return this.filter((function(e,t){return!t.dir&&a.test(e)}))}var s=this.files[this.root+e];return s&&!s.dir?s:null},folder:function(e){if(!e)return this;if(y(e))return this.filter((function(t,r){return r.dir&&e.test(t)}));var t=this.root+e,r=g.call(this,t),n=this.clone();return n.root=r.name,n},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter((function(t,r){return r.name.slice(0,e.length)===e})),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,r={};try{if((r=s.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");s.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var n=r.comment||this.comment||"";t=d.generateWorker(this,r,n)}catch(e){(t=new i("error")).error(e)}return new o(t,r.type||"string",r.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,r){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,r){"use strict";var n=e("./DataReader");function a(e){n.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(a,n),a.prototype.byteAt=function(e){return this.data[this.zero+e]},a.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),a=e.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===t&&this.data[s+1]===r&&this.data[s+2]===n&&this.data[s+3]===a)return s-this.zero;return-1},a.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),a=e.charCodeAt(3),s=this.readData(4);return t===s[0]&&r===s[1]&&n===s[2]&&a===s[3]},a.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"../utils":32,"./DataReader":18}],18:[function(e,t,r){"use strict";var n=e("../utils");function a(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=a},{"../utils":32}],19:[function(e,t,r){"use strict";var n=e("./Uint8ArrayReader");function a(e){n.call(this,e)}e("../utils").inherits(a,n),a.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,r){"use strict";var n=e("./DataReader");function a(e){n.call(this,e)}e("../utils").inherits(a,n),a.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},a.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},a.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},a.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"../utils":32,"./DataReader":18}],21:[function(e,t,r){"use strict";var n=e("./ArrayReader");function a(e){n.call(this,e)}e("../utils").inherits(a,n),a.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,r){"use strict";var n=e("../utils"),a=e("../support"),s=e("./ArrayReader"),i=e("./StringReader"),o=e("./NodeBufferReader"),c=e("./Uint8ArrayReader");t.exports=function(e){var t=n.getTypeOf(e);return n.checkSupport(t),"string"!==t||a.uint8array?"nodebuffer"===t?new o(e):a.uint8array?new c(n.transformTo("uint8array",e)):new s(n.transformTo("array",e)):new i(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,r){"use strict";r.LOCAL_FILE_HEADER="PK\x03\x04",r.CENTRAL_FILE_HEADER="PK\x01\x02",r.CENTRAL_DIRECTORY_END="PK\x05\x06",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,t,r){"use strict";var n=e("./GenericWorker"),a=e("../utils");function s(e){n.call(this,"ConvertWorker to "+e),this.destType=e}a.inherits(s,n),s.prototype.processChunk=function(e){this.push({data:a.transformTo(this.destType,e.data),meta:e.meta})},t.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,r){"use strict";var n=e("./GenericWorker"),a=e("../crc32");function s(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(s,n),s.prototype.processChunk=function(e){this.streamInfo.crc32=a(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,r){"use strict";var n=e("../utils"),a=e("./GenericWorker");function s(e){a.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}n.inherits(s,a),s.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}a.prototype.processChunk.call(this,e)},t.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,r){"use strict";var n=e("../utils"),a=e("./GenericWorker");function s(e){a.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=n.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}n.inherits(s,a),s.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,r){"use strict";function n(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=n},{}],29:[function(e,r,n){"use strict";var a=e("../utils"),s=e("./ConvertWorker"),i=e("./GenericWorker"),o=e("../base64"),c=e("../support"),l=e("../external"),u=null;if(c.nodestream)try{u=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function d(e,r){return new l.Promise((function(n,s){var i=[],c=e._internalType,l=e._outputType,u=e._mimeType;e.on("data",(function(e,t){i.push(e),r&&r(t)})).on("error",(function(e){i=[],s(e)})).on("end",(function(){try{var e=function(e,t,r){switch(e){case"blob":return a.newBlob(a.transformTo("arraybuffer",t),r);case"base64":return o.encode(t);default:return a.transformTo(e,t)}}(l,function(e,r){var n,a=0,s=null,i=0;for(n=0;n<r.length;n++)i+=r[n].length;switch(e){case"string":return r.join("");case"array":return Array.prototype.concat.apply([],r);case"uint8array":for(s=new Uint8Array(i),n=0;n<r.length;n++)s.set(r[n],a),a+=r[n].length;return s;case"nodebuffer":return t.concat(r);default:throw new Error("concat : unsupported type '"+e+"'")}}(c,i),u);n(e)}catch(e){s(e)}i=[]})).resume()}))}function h(e,t,r){var n=t;switch(t){case"blob":case"arraybuffer":n="uint8array";break;case"base64":n="string"}try{this._internalType=n,this._outputType=t,this._mimeType=r,a.checkSupport(n),this._worker=e.pipe(new s(n)),e.lock()}catch(e){this._worker=new i("error"),this._worker.error(e)}}h.prototype={accumulate:function(e){return d(this,e)},on:function(e,t){var r=this;return"data"===e?this._worker.on(e,(function(e){t.call(r,e.data,e.meta)})):this._worker.on(e,(function(){a.delay(t,arguments,r)})),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(a.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},e)}},r.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,r,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof t,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var a=new ArrayBuffer(0);try{n.blob=0===new Blob([a],{type:"application/zip"}).size}catch(e){try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(a),n.blob=0===s.getBlob("application/zip").size}catch(e){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(e){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,r){"use strict";for(var n=e("./utils"),a=e("./support"),s=e("./nodejsUtils"),i=e("./stream/GenericWorker"),o=new Array(256),c=0;c<256;c++)o[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function l(){i.call(this,"utf-8 decode"),this.leftOver=null}function u(){i.call(this,"utf-8 encode")}o[254]=o[254]=1,r.utf8encode=function(e){return a.nodebuffer?s.newBufferFrom(e,"utf-8"):function(e){var t,r,n,s,i,o=e.length,c=0;for(s=0;s<o;s++)55296==(64512&(r=e.charCodeAt(s)))&&s+1<o&&56320==(64512&(n=e.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(n-56320),s++),c+=r<128?1:r<2048?2:r<65536?3:4;for(t=a.uint8array?new Uint8Array(c):new Array(c),s=i=0;i<c;s++)55296==(64512&(r=e.charCodeAt(s)))&&s+1<o&&56320==(64512&(n=e.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(n-56320),s++),r<128?t[i++]=r:(r<2048?t[i++]=192|r>>>6:(r<65536?t[i++]=224|r>>>12:(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63),t[i++]=128|r>>>6&63),t[i++]=128|63&r);return t}(e)},r.utf8decode=function(e){return a.nodebuffer?n.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,r,a,s,i=e.length,c=new Array(2*i);for(t=r=0;t<i;)if((a=e[t++])<128)c[r++]=a;else if(4<(s=o[a]))c[r++]=65533,t+=s-1;else{for(a&=2===s?31:3===s?15:7;1<s&&t<i;)a=a<<6|63&e[t++],s--;1<s?c[r++]=65533:a<65536?c[r++]=a:(a-=65536,c[r++]=55296|a>>10&1023,c[r++]=56320|1023&a)}return c.length!==r&&(c.subarray?c=c.subarray(0,r):c.length=r),n.applyFromCharCode(c)}(e=n.transformTo(a.uint8array?"uint8array":"array",e))},n.inherits(l,i),l.prototype.processChunk=function(e){var t=n.transformTo(a.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var s=t;(t=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),t.set(s,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var i=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+o[e[r]]>t?r:t}(t),c=t;i!==t.length&&(a.uint8array?(c=t.subarray(0,i),this.leftOver=t.subarray(i,t.length)):(c=t.slice(0,i),this.leftOver=t.slice(i,t.length))),this.push({data:r.utf8decode(c),meta:e.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=l,n.inherits(u,i),u.prototype.processChunk=function(e){this.push({data:r.utf8encode(e.data),meta:e.meta})},r.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var a=e("./support"),s=e("./base64"),i=e("./nodejsUtils"),o=e("./external");function c(e){return e}function l(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}e("setimmediate"),n.newBlob=function(t,r){n.checkSupport("blob");try{return new Blob([t],{type:r})}catch(e){try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return a.append(t),a.getBlob(r)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(e,t,r){var n=[],a=0,s=e.length;if(s<=r)return String.fromCharCode.apply(null,e);for(;a<s;)"array"===t||"nodebuffer"===t?n.push(String.fromCharCode.apply(null,e.slice(a,Math.min(a+r,s)))):n.push(String.fromCharCode.apply(null,e.subarray(a,Math.min(a+r,s)))),a+=r;return n.join("")},stringifyByChar:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&1===String.fromCharCode.apply(null,i.allocBuffer(1)).length}catch(e){return!1}}()}};function d(e){var t=65536,r=n.getTypeOf(e),a=!0;if("uint8array"===r?a=u.applyCanBeUsed.uint8array:"nodebuffer"===r&&(a=u.applyCanBeUsed.nodebuffer),a)for(;1<t;)try{return u.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return u.stringifyByChar(e)}function h(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}n.applyFromCharCode=d;var p={};p.string={string:c,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return p.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,i.allocBuffer(e.length))}},p.array={string:d,array:c,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.newBufferFrom(e)}},p.arraybuffer={string:function(e){return d(new Uint8Array(e))},array:function(e){return h(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:c,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.newBufferFrom(new Uint8Array(e))}},p.uint8array={string:d,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:c,nodebuffer:function(e){return i.newBufferFrom(e)}},p.nodebuffer={string:d,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return p.nodebuffer.uint8array(e).buffer},uint8array:function(e){return h(e,new Uint8Array(e.length))},nodebuffer:c},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return p[r][e](t)},n.resolve=function(e){for(var t=e.split("/"),r=[],n=0;n<t.length;n++){var a=t[n];"."===a||""===a&&0!==n&&n!==t.length-1||(".."===a?r.pop():r.push(a))}return r.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":a.nodebuffer&&i.isBuffer(e)?"nodebuffer":a.uint8array&&e instanceof Uint8Array?"uint8array":a.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!a[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,r,n="";for(r=0;r<(e||"").length;r++)n+="\\x"+((t=e.charCodeAt(r))<16?"0":"")+t.toString(16).toUpperCase();return n},n.delay=function(e,t,n){r((function(){e.apply(n||null,t||[])}))},n.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.prototype=new r},n.extend=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r},n.prepareContent=function(e,t,r,i,c){return o.Promise.resolve(t).then((function(e){return a.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new o.Promise((function(t,r){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(e){r(e.target.error)},n.readAsArrayBuffer(e)})):e})).then((function(t){var u=n.getTypeOf(t);return u?("arraybuffer"===u?t=n.transformTo("uint8array",t):"string"===u&&(c?t=s.decode(t):r&&!0!==i&&(t=function(e){return l(e,a.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):o.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,r){"use strict";var n=e("./reader/readerFor"),a=e("./utils"),s=e("./signature"),i=e("./zipEntry"),o=e("./support");function c(e){this.files=[],this.loadOptions=e}c.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(t)+", expected "+a.pretty(e)+")")}},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4)===t;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=o.uint8array?"uint8array":"array",r=a.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,n=this.zip64EndOfCentralSize-44;0<n;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(e=new i({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=t-r;if(0<n)this.isSignature(t,s.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){this.reader=n(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,r){"use strict";var n=e("./reader/readerFor"),a=e("./utils"),s=e("./compressedObject"),i=e("./crc32"),o=e("./utf8"),c=e("./compressions"),l=e("./support");function u(e,t){this.options=e,this.loadOptions=t}u.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in c)if(Object.prototype.hasOwnProperty.call(c,t)&&c[t].magic===e)return c[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=n(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,r,n,a=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<a;)t=e.readInt(2),r=e.readInt(2),n=e.readData(r),this.extraFields[t]={id:t,length:r,value:n};e.setIndex(a)},handleUTF8:function(){var e=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=a.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var s=a.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=n(e.value);return 1!==t.readInt(1)||i(this.fileName)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=n(e.value);return 1!==t.readInt(1)||i(this.fileComment)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null}},t.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,r){"use strict";function n(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var a=e("./stream/StreamHelper"),s=e("./stream/DataWorker"),i=e("./utf8"),o=e("./compressedObject"),c=e("./stream/GenericWorker");n.prototype={internalStream:function(e){var t=null,r="string";try{if(!e)throw new Error("No output type specified.");var n="string"===(r=e.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),t=this._decompressWorker();var s=!this._dataBinary;s&&!n&&(t=t.pipe(new i.Utf8EncodeWorker)),!s&&n&&(t=t.pipe(new i.Utf8DecodeWorker))}catch(e){(t=new c("error")).error(e)}return new a(t,r,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof o&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new i.Utf8EncodeWorker)),o.createWorkerFrom(r,e,t)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof c?this._data:new s(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<l.length;d++)n.prototype[l[d]]=u;t.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){"use strict";var r,n,a=e.MutationObserver||e.WebKitMutationObserver;if(a){var s=0,i=new a(u),o=e.document.createTextNode("");i.observe(o,{characterData:!0}),r=function(){o.data=s=++s%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var c=new e.MessageChannel;c.port1.onmessage=u,r=function(){c.port2.postMessage(0)}}var l=[];function u(){var e,t;n=!0;for(var r=l.length;r;){for(t=l,l=[],e=-1;++e<r;)t[e]();r=l.length}n=!1}t.exports=function(e){1!==l.push(e)||n||r()}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,r){"use strict";var n=e("immediate");function a(){}var s={},i=["REJECTED"],o=["FULFILLED"],c=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==a&&p(this,e)}function u(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function d(e,t,r){n((function(){var n;try{n=t(r)}catch(n){return s.reject(e,n)}n===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,n)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var r=!1;function n(t){r||(r=!0,s.reject(e,t))}function a(t){r||(r=!0,s.resolve(e,t))}var i=f((function(){t(a,n)}));"error"===i.status&&n(i.value)}function f(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}(t.exports=l).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(r){return t.resolve(e()).then((function(){return r}))}),(function(r){return t.resolve(e()).then((function(){throw r}))}))},l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===o||"function"!=typeof t&&this.state===i)return this;var r=new this.constructor(a);return this.state!==c?d(r,this.state===o?e:t,this.outcome):this.queue.push(new u(r,e,t)),r},u.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){s.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},s.resolve=function(e,t){var r=f(h,t);if("error"===r.status)return s.reject(e,r.value);var n=r.value;if(n)p(e,n);else{e.state=o,e.outcome=t;for(var a=-1,i=e.queue.length;++a<i;)e.queue[a].callFulfilled(t)}return e},s.reject=function(e,t){e.state=i,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},l.resolve=function(e){return e instanceof this?e:s.resolve(new this(a),e)},l.reject=function(e){var t=new this(a);return s.reject(t,e)},l.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var i=new Array(r),o=0,c=-1,l=new this(a);++c<r;)u(e[c],c);return l;function u(e,a){t.resolve(e).then((function(e){i[a]=e,++o!==r||n||(n=!0,s.resolve(l,i))}),(function(e){n||(n=!0,s.reject(l,e))}))}},l.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var i,o=-1,c=new this(a);++o<r;)i=e[o],t.resolve(i).then((function(e){n||(n=!0,s.resolve(c,e))}),(function(e){n||(n=!0,s.reject(c,e))}));return c}},{immediate:36}],38:[function(e,t,r){"use strict";var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,r){"use strict";var n=e("./zlib/deflate"),a=e("./utils/common"),s=e("./utils/strings"),i=e("./zlib/messages"),o=e("./zlib/zstream"),c=Object.prototype.toString,l=0,u=-1,d=0,h=8;function p(e){if(!(this instanceof p))return new p(e);this.options=a.assign({level:u,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==l)throw new Error(i[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){var f;if(f="string"==typeof t.dictionary?s.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=n.deflateSetDictionary(this.strm,f))!==l)throw new Error(i[r]);this._dict_set=!0}}function f(e,t){var r=new p(t);if(r.push(e,!0),r.err)throw r.msg||i[r.err];return r.result}p.prototype.push=function(e,t){var r,i,o=this.strm,u=this.options.chunkSize;if(this.ended)return!1;i=t===~~t?t:!0===t?4:0,"string"==typeof e?o.input=s.string2buf(e):"[object ArrayBuffer]"===c.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new a.Buf8(u),o.next_out=0,o.avail_out=u),1!==(r=n.deflate(o,i))&&r!==l)return this.onEnd(r),!(this.ended=!0);0!==o.avail_out&&(0!==o.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(s.buf2binstring(a.shrinkBuf(o.output,o.next_out))):this.onData(a.shrinkBuf(o.output,o.next_out)))}while((0<o.avail_in||0===o.avail_out)&&1!==r);return 4===i?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===l):2!==i||(this.onEnd(l),!(o.avail_out=0))},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===l&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=p,r.deflate=f,r.deflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},r.gzip=function(e,t){return(t=t||{}).gzip=!0,f(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,r){"use strict";var n=e("./zlib/inflate"),a=e("./utils/common"),s=e("./utils/strings"),i=e("./zlib/constants"),o=e("./zlib/messages"),c=e("./zlib/zstream"),l=e("./zlib/gzheader"),u=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,t.windowBits);if(r!==i.Z_OK)throw new Error(o[r]);this.header=new l,n.inflateGetHeader(this.strm,this.header)}function h(e,t){var r=new d(t);if(r.push(e,!0),r.err)throw r.msg||o[r.err];return r.result}d.prototype.push=function(e,t){var r,o,c,l,d,h,p=this.strm,f=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;o=t===~~t?t:!0===t?i.Z_FINISH:i.Z_NO_FLUSH,"string"==typeof e?p.input=s.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?p.input=new Uint8Array(e):p.input=e,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new a.Buf8(f),p.next_out=0,p.avail_out=f),(r=n.inflate(p,i.Z_NO_FLUSH))===i.Z_NEED_DICT&&m&&(h="string"==typeof m?s.string2buf(m):"[object ArrayBuffer]"===u.call(m)?new Uint8Array(m):m,r=n.inflateSetDictionary(this.strm,h)),r===i.Z_BUF_ERROR&&!0===g&&(r=i.Z_OK,g=!1),r!==i.Z_STREAM_END&&r!==i.Z_OK)return this.onEnd(r),!(this.ended=!0);p.next_out&&(0!==p.avail_out&&r!==i.Z_STREAM_END&&(0!==p.avail_in||o!==i.Z_FINISH&&o!==i.Z_SYNC_FLUSH)||("string"===this.options.to?(c=s.utf8border(p.output,p.next_out),l=p.next_out-c,d=s.buf2string(p.output,c),p.next_out=l,p.avail_out=f-l,l&&a.arraySet(p.output,p.output,c,l,0),this.onData(d)):this.onData(a.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(g=!0)}while((0<p.avail_in||0===p.avail_out)&&r!==i.Z_STREAM_END);return r===i.Z_STREAM_END&&(o=i.Z_FINISH),o===i.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===i.Z_OK):o!==i.Z_SYNC_FLUSH||(this.onEnd(i.Z_OK),!(p.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===i.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=d,r.inflate=h,r.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},r.ungzip=h},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,r,n,a){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),a);else for(var s=0;s<n;s++)e[a+s]=t[r+s]},flattenChunks:function(e){var t,r,n,a,s,i;for(t=n=0,r=e.length;t<r;t++)n+=e[t].length;for(i=new Uint8Array(n),t=a=0,r=e.length;t<r;t++)s=e[t],i.set(s,a),a+=s.length;return i}},s={arraySet:function(e,t,r,n,a){for(var s=0;s<n;s++)e[a+s]=t[r+s]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,a)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(n)},{}],42:[function(e,t,r){"use strict";var n=e("./common"),a=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(e){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){s=!1}for(var i=new n.Buf8(256),o=0;o<256;o++)i[o]=252<=o?6:248<=o?5:240<=o?4:224<=o?3:192<=o?2:1;function c(e,t){if(t<65537&&(e.subarray&&s||!e.subarray&&a))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var r="",i=0;i<t;i++)r+=String.fromCharCode(e[i]);return r}i[254]=i[254]=1,r.string2buf=function(e){var t,r,a,s,i,o=e.length,c=0;for(s=0;s<o;s++)55296==(64512&(r=e.charCodeAt(s)))&&s+1<o&&56320==(64512&(a=e.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(a-56320),s++),c+=r<128?1:r<2048?2:r<65536?3:4;for(t=new n.Buf8(c),s=i=0;i<c;s++)55296==(64512&(r=e.charCodeAt(s)))&&s+1<o&&56320==(64512&(a=e.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(a-56320),s++),r<128?t[i++]=r:(r<2048?t[i++]=192|r>>>6:(r<65536?t[i++]=224|r>>>12:(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63),t[i++]=128|r>>>6&63),t[i++]=128|63&r);return t},r.buf2binstring=function(e){return c(e,e.length)},r.binstring2buf=function(e){for(var t=new n.Buf8(e.length),r=0,a=t.length;r<a;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,n,a,s,o=t||e.length,l=new Array(2*o);for(r=n=0;r<o;)if((a=e[r++])<128)l[n++]=a;else if(4<(s=i[a]))l[n++]=65533,r+=s-1;else{for(a&=2===s?31:3===s?15:7;1<s&&r<o;)a=a<<6|63&e[r++],s--;1<s?l[n++]=65533:a<65536?l[n++]=a:(a-=65536,l[n++]=55296|a>>10&1023,l[n++]=56320|1023&a)}return c(l,n)},r.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+i[e[r]]>t?r:t}},{"./common":41}],43:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){for(var a=65535&e|0,s=e>>>16&65535|0,i=0;0!==r;){for(r-=i=2e3<r?2e3:r;s=s+(a=a+t[n++]|0)|0,--i;);a%=65521,s%=65521}return a|s<<16|0}},{}],44:[function(e,t,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,r){"use strict";var n=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,a){var s=n,i=a+r;e^=-1;for(var o=a;o<i;o++)e=e>>>8^s[255&(e^t[o])];return-1^e}},{}],46:[function(e,t,r){"use strict";var n,a=e("../utils/common"),s=e("./trees"),i=e("./adler32"),o=e("./crc32"),c=e("./messages"),l=0,u=4,d=0,h=-2,p=-1,f=4,m=2,g=8,y=9,b=286,v=30,_=19,w=2*b+1,j=15,x=3,M=258,O=M+x+1,k=42,C=113,E=1,S=2,N=3,I=4;function D(e,t){return e.msg=c[t],t}function T(e){return(e<<1)-(4<e?9:0)}function A(e){for(var t=e.length;0<=--t;)e[t]=0}function P(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(a.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function L(e,t){s._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,P(e.strm)}function R(e,t){e.pending_buf[e.pending++]=t}function F(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function B(e,t){var r,n,a=e.max_chain_length,s=e.strstart,i=e.prev_length,o=e.nice_match,c=e.strstart>e.w_size-O?e.strstart-(e.w_size-O):0,l=e.window,u=e.w_mask,d=e.prev,h=e.strstart+M,p=l[s+i-1],f=l[s+i];e.prev_length>=e.good_match&&(a>>=2),o>e.lookahead&&(o=e.lookahead);do{if(l[(r=t)+i]===f&&l[r+i-1]===p&&l[r]===l[s]&&l[++r]===l[s+1]){s+=2,r++;do{}while(l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&s<h);if(n=M-(h-s),s=h-M,i<n){if(e.match_start=t,o<=(i=n))break;p=l[s+i-1],f=l[s+i]}}}while((t=d[t&u])>c&&0!=--a);return i<=e.lookahead?i:e.lookahead}function U(e){var t,r,n,s,c,l,u,d,h,p,f=e.w_size;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=f+(f-O)){for(a.arraySet(e.window,e.window,f,f,0),e.match_start-=f,e.strstart-=f,e.block_start-=f,t=r=e.hash_size;n=e.head[--t],e.head[t]=f<=n?n-f:0,--r;);for(t=r=f;n=e.prev[--t],e.prev[t]=f<=n?n-f:0,--r;);s+=f}if(0===e.strm.avail_in)break;if(l=e.strm,u=e.window,d=e.strstart+e.lookahead,p=void 0,(h=s)<(p=l.avail_in)&&(p=h),r=0===p?0:(l.avail_in-=p,a.arraySet(u,l.input,l.next_in,p,d),1===l.state.wrap?l.adler=i(l.adler,u,p,d):2===l.state.wrap&&(l.adler=o(l.adler,u,p,d)),l.next_in+=p,l.total_in+=p,p),e.lookahead+=r,e.lookahead+e.insert>=x)for(c=e.strstart-e.insert,e.ins_h=e.window[c],e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+x-1])&e.hash_mask,e.prev[c&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=c,c++,e.insert--,!(e.lookahead+e.insert<x)););}while(e.lookahead<O&&0!==e.strm.avail_in)}function z(e,t){for(var r,n;;){if(e.lookahead<O){if(U(e),e.lookahead<O&&t===l)return E;if(0===e.lookahead)break}if(r=0,e.lookahead>=x&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-O&&(e.match_length=B(e,r)),e.match_length>=x)if(n=s._tr_tally(e,e.strstart-e.match_start,e.match_length-x),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=x){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(L(e,!1),0===e.strm.avail_out))return E}return e.insert=e.strstart<x-1?e.strstart:x-1,t===u?(L(e,!0),0===e.strm.avail_out?N:I):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?E:S}function Y(e,t){for(var r,n,a;;){if(e.lookahead<O){if(U(e),e.lookahead<O&&t===l)return E;if(0===e.lookahead)break}if(r=0,e.lookahead>=x&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=x-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-O&&(e.match_length=B(e,r),e.match_length<=5&&(1===e.strategy||e.match_length===x&&4096<e.strstart-e.match_start)&&(e.match_length=x-1)),e.prev_length>=x&&e.match_length<=e.prev_length){for(a=e.strstart+e.lookahead-x,n=s._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-x),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=a&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=x-1,e.strstart++,n&&(L(e,!1),0===e.strm.avail_out))return E}else if(e.match_available){if((n=s._tr_tally(e,0,e.window[e.strstart-1]))&&L(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return E}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=s._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<x-1?e.strstart:x-1,t===u?(L(e,!0),0===e.strm.avail_out?N:I):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?E:S}function G(e,t,r,n,a){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=a}function W(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*w),this.dyn_dtree=new a.Buf16(2*(2*v+1)),this.bl_tree=new a.Buf16(2*(2*_+1)),A(this.dyn_ltree),A(this.dyn_dtree),A(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(j+1),this.heap=new a.Buf16(2*b+1),A(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*b+1),A(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function V(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=m,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?k:C,e.adler=2===t.wrap?0:1,t.last_flush=l,s._tr_init(t),d):D(e,h)}function q(e){var t=V(e);return t===d&&function(e){e.window_size=2*e.w_size,A(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=x-1,e.match_available=0,e.ins_h=0}(e.state),t}function H(e,t,r,n,s,i){if(!e)return h;var o=1;if(t===p&&(t=6),n<0?(o=0,n=-n):15<n&&(o=2,n-=16),s<1||y<s||r!==g||n<8||15<n||t<0||9<t||i<0||f<i)return D(e,h);8===n&&(n=9);var c=new W;return(e.state=c).strm=e,c.wrap=o,c.gzhead=null,c.w_bits=n,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=s+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+x-1)/x),c.window=new a.Buf8(2*c.w_size),c.head=new a.Buf16(c.hash_size),c.prev=new a.Buf16(c.w_size),c.lit_bufsize=1<<s+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new a.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=i,c.method=r,q(e)}n=[new G(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(U(e),0===e.lookahead&&t===l)return E;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,L(e,!1),0===e.strm.avail_out))return E;if(e.strstart-e.block_start>=e.w_size-O&&(L(e,!1),0===e.strm.avail_out))return E}return e.insert=0,t===u?(L(e,!0),0===e.strm.avail_out?N:I):(e.strstart>e.block_start&&(L(e,!1),e.strm.avail_out),E)})),new G(4,4,8,4,z),new G(4,5,16,8,z),new G(4,6,32,32,z),new G(4,4,16,16,Y),new G(8,16,32,32,Y),new G(8,16,128,128,Y),new G(8,32,128,256,Y),new G(32,128,258,1024,Y),new G(32,258,258,4096,Y)],r.deflateInit=function(e,t){return H(e,t,g,15,8,0)},r.deflateInit2=H,r.deflateReset=q,r.deflateResetKeep=V,r.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?h:(e.state.gzhead=t,d):h},r.deflate=function(e,t){var r,a,i,c;if(!e||!e.state||5<t||t<0)return e?D(e,h):h;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||666===a.status&&t!==u)return D(e,0===e.avail_out?-5:h);if(a.strm=e,r=a.last_flush,a.last_flush=t,a.status===k)if(2===a.wrap)e.adler=0,R(a,31),R(a,139),R(a,8),a.gzhead?(R(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),R(a,255&a.gzhead.time),R(a,a.gzhead.time>>8&255),R(a,a.gzhead.time>>16&255),R(a,a.gzhead.time>>24&255),R(a,9===a.level?2:2<=a.strategy||a.level<2?4:0),R(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(R(a,255&a.gzhead.extra.length),R(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=o(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(R(a,0),R(a,0),R(a,0),R(a,0),R(a,0),R(a,9===a.level?2:2<=a.strategy||a.level<2?4:0),R(a,3),a.status=C);else{var p=g+(a.w_bits-8<<4)<<8;p|=(2<=a.strategy||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(p|=32),p+=31-p%31,a.status=C,F(a,p),0!==a.strstart&&(F(a,e.adler>>>16),F(a,65535&e.adler)),e.adler=1}if(69===a.status)if(a.gzhead.extra){for(i=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>i&&(e.adler=o(e.adler,a.pending_buf,a.pending-i,i)),P(e),i=a.pending,a.pending!==a.pending_buf_size));)R(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>i&&(e.adler=o(e.adler,a.pending_buf,a.pending-i,i)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){i=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>i&&(e.adler=o(e.adler,a.pending_buf,a.pending-i,i)),P(e),i=a.pending,a.pending===a.pending_buf_size)){c=1;break}c=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,R(a,c)}while(0!==c);a.gzhead.hcrc&&a.pending>i&&(e.adler=o(e.adler,a.pending_buf,a.pending-i,i)),0===c&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){i=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>i&&(e.adler=o(e.adler,a.pending_buf,a.pending-i,i)),P(e),i=a.pending,a.pending===a.pending_buf_size)){c=1;break}c=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,R(a,c)}while(0!==c);a.gzhead.hcrc&&a.pending>i&&(e.adler=o(e.adler,a.pending_buf,a.pending-i,i)),0===c&&(a.status=103)}else a.status=103;if(103===a.status&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&P(e),a.pending+2<=a.pending_buf_size&&(R(a,255&e.adler),R(a,e.adler>>8&255),e.adler=0,a.status=C)):a.status=C),0!==a.pending){if(P(e),0===e.avail_out)return a.last_flush=-1,d}else if(0===e.avail_in&&T(t)<=T(r)&&t!==u)return D(e,-5);if(666===a.status&&0!==e.avail_in)return D(e,-5);if(0!==e.avail_in||0!==a.lookahead||t!==l&&666!==a.status){var f=2===a.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(U(e),0===e.lookahead)){if(t===l)return E;break}if(e.match_length=0,r=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(L(e,!1),0===e.strm.avail_out))return E}return e.insert=0,t===u?(L(e,!0),0===e.strm.avail_out?N:I):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?E:S}(a,t):3===a.strategy?function(e,t){for(var r,n,a,i,o=e.window;;){if(e.lookahead<=M){if(U(e),e.lookahead<=M&&t===l)return E;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=x&&0<e.strstart&&(n=o[a=e.strstart-1])===o[++a]&&n===o[++a]&&n===o[++a]){i=e.strstart+M;do{}while(n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&a<i);e.match_length=M-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=x?(r=s._tr_tally(e,1,e.match_length-x),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(L(e,!1),0===e.strm.avail_out))return E}return e.insert=0,t===u?(L(e,!0),0===e.strm.avail_out?N:I):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?E:S}(a,t):n[a.level].func(a,t);if(f!==N&&f!==I||(a.status=666),f===E||f===N)return 0===e.avail_out&&(a.last_flush=-1),d;if(f===S&&(1===t?s._tr_align(a):5!==t&&(s._tr_stored_block(a,0,0,!1),3===t&&(A(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),P(e),0===e.avail_out))return a.last_flush=-1,d}return t!==u?d:a.wrap<=0?1:(2===a.wrap?(R(a,255&e.adler),R(a,e.adler>>8&255),R(a,e.adler>>16&255),R(a,e.adler>>24&255),R(a,255&e.total_in),R(a,e.total_in>>8&255),R(a,e.total_in>>16&255),R(a,e.total_in>>24&255)):(F(a,e.adler>>>16),F(a,65535&e.adler)),P(e),0<a.wrap&&(a.wrap=-a.wrap),0!==a.pending?d:1)},r.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==k&&69!==t&&73!==t&&91!==t&&103!==t&&t!==C&&666!==t?D(e,h):(e.state=null,t===C?D(e,-3):d):h},r.deflateSetDictionary=function(e,t){var r,n,s,o,c,l,u,p,f=t.length;if(!e||!e.state)return h;if(2===(o=(r=e.state).wrap)||1===o&&r.status!==k||r.lookahead)return h;for(1===o&&(e.adler=i(e.adler,t,f,0)),r.wrap=0,f>=r.w_size&&(0===o&&(A(r.head),r.strstart=0,r.block_start=0,r.insert=0),p=new a.Buf8(r.w_size),a.arraySet(p,t,f-r.w_size,r.w_size,0),t=p,f=r.w_size),c=e.avail_in,l=e.next_in,u=e.input,e.avail_in=f,e.next_in=0,e.input=t,U(r);r.lookahead>=x;){for(n=r.strstart,s=r.lookahead-(x-1);r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+x-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--s;);r.strstart=n,r.lookahead=x-1,U(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=x-1,r.match_available=0,e.next_in=l,e.input=u,e.avail_in=c,r.wrap=o,d},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,r){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,r){"use strict";t.exports=function(e,t){var r,n,a,s,i,o,c,l,u,d,h,p,f,m,g,y,b,v,_,w,j,x,M,O,k;r=e.state,n=e.next_in,O=e.input,a=n+(e.avail_in-5),s=e.next_out,k=e.output,i=s-(t-e.avail_out),o=s+(e.avail_out-257),c=r.dmax,l=r.wsize,u=r.whave,d=r.wnext,h=r.window,p=r.hold,f=r.bits,m=r.lencode,g=r.distcode,y=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;e:do{f<15&&(p+=O[n++]<<f,f+=8,p+=O[n++]<<f,f+=8),v=m[p&y];t:for(;;){if(p>>>=_=v>>>24,f-=_,0===(_=v>>>16&255))k[s++]=65535&v;else{if(!(16&_)){if(0==(64&_)){v=m[(65535&v)+(p&(1<<_)-1)];continue t}if(32&_){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}w=65535&v,(_&=15)&&(f<_&&(p+=O[n++]<<f,f+=8),w+=p&(1<<_)-1,p>>>=_,f-=_),f<15&&(p+=O[n++]<<f,f+=8,p+=O[n++]<<f,f+=8),v=g[p&b];r:for(;;){if(p>>>=_=v>>>24,f-=_,!(16&(_=v>>>16&255))){if(0==(64&_)){v=g[(65535&v)+(p&(1<<_)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(j=65535&v,f<(_&=15)&&(p+=O[n++]<<f,(f+=8)<_&&(p+=O[n++]<<f,f+=8)),c<(j+=p&(1<<_)-1)){e.msg="invalid distance too far back",r.mode=30;break e}if(p>>>=_,f-=_,(_=s-i)<j){if(u<(_=j-_)&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(M=h,(x=0)===d){if(x+=l-_,_<w){for(w-=_;k[s++]=h[x++],--_;);x=s-j,M=k}}else if(d<_){if(x+=l+d-_,(_-=d)<w){for(w-=_;k[s++]=h[x++],--_;);if(x=0,d<w){for(w-=_=d;k[s++]=h[x++],--_;);x=s-j,M=k}}}else if(x+=d-_,_<w){for(w-=_;k[s++]=h[x++],--_;);x=s-j,M=k}for(;2<w;)k[s++]=M[x++],k[s++]=M[x++],k[s++]=M[x++],w-=3;w&&(k[s++]=M[x++],1<w&&(k[s++]=M[x++]))}else{for(x=s-j;k[s++]=k[x++],k[s++]=k[x++],k[s++]=k[x++],2<(w-=3););w&&(k[s++]=k[x++],1<w&&(k[s++]=k[x++]))}break}}break}}while(n<a&&s<o);n-=w=f>>3,p&=(1<<(f-=w<<3))-1,e.next_in=n,e.next_out=s,e.avail_in=n<a?a-n+5:5-(n-a),e.avail_out=s<o?o-s+257:257-(s-o),r.hold=p,r.bits=f}},{}],49:[function(e,t,r){"use strict";var n=e("../utils/common"),a=e("./adler32"),s=e("./crc32"),i=e("./inffast"),o=e("./inftrees"),c=1,l=2,u=0,d=-2,h=1,p=852,f=592;function m(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=h,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(p),t.distcode=t.distdyn=new n.Buf32(f),t.sane=1,t.back=-1,u):d}function b(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,y(e)):d}function v(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?d:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,b(e))):d}function _(e,t){var r,n;return e?(n=new g,(e.state=n).window=null,(r=v(e,t))!==u&&(e.state=null),r):d}var w,j,x=!0;function M(e){if(x){var t;for(w=new n.Buf32(512),j=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(o(c,e.lens,0,288,w,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;o(l,e.lens,0,32,j,0,e.work,{bits:5}),x=!1}e.lencode=w,e.lenbits=9,e.distcode=j,e.distbits=5}function O(e,t,r,a){var s,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new n.Buf8(i.wsize)),a>=i.wsize?(n.arraySet(i.window,t,r-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):(a<(s=i.wsize-i.wnext)&&(s=a),n.arraySet(i.window,t,r-a,s,i.wnext),(a-=s)?(n.arraySet(i.window,t,r-a,a,0),i.wnext=a,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0}r.inflateReset=b,r.inflateReset2=v,r.inflateResetKeep=y,r.inflateInit=function(e){return _(e,15)},r.inflateInit2=_,r.inflate=function(e,t){var r,p,f,g,y,b,v,_,w,j,x,k,C,E,S,N,I,D,T,A,P,L,R,F,B=0,U=new n.Buf8(4),z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return d;12===(r=e.state).mode&&(r.mode=13),y=e.next_out,f=e.output,v=e.avail_out,g=e.next_in,p=e.input,b=e.avail_in,_=r.hold,w=r.bits,j=b,x=v,L=u;e:for(;;)switch(r.mode){case h:if(0===r.wrap){r.mode=13;break}for(;w<16;){if(0===b)break e;b--,_+=p[g++]<<w,w+=8}if(2&r.wrap&&35615===_){U[r.check=0]=255&_,U[1]=_>>>8&255,r.check=s(r.check,U,2,0),w=_=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&_)<<8)+(_>>8))%31){e.msg="incorrect header check",r.mode=30;break}if(8!=(15&_)){e.msg="unknown compression method",r.mode=30;break}if(w-=4,P=8+(15&(_>>>=4)),0===r.wbits)r.wbits=P;else if(P>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<P,e.adler=r.check=1,r.mode=512&_?10:12,w=_=0;break;case 2:for(;w<16;){if(0===b)break e;b--,_+=p[g++]<<w,w+=8}if(r.flags=_,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=_>>8&1),512&r.flags&&(U[0]=255&_,U[1]=_>>>8&255,r.check=s(r.check,U,2,0)),w=_=0,r.mode=3;case 3:for(;w<32;){if(0===b)break e;b--,_+=p[g++]<<w,w+=8}r.head&&(r.head.time=_),512&r.flags&&(U[0]=255&_,U[1]=_>>>8&255,U[2]=_>>>16&255,U[3]=_>>>24&255,r.check=s(r.check,U,4,0)),w=_=0,r.mode=4;case 4:for(;w<16;){if(0===b)break e;b--,_+=p[g++]<<w,w+=8}r.head&&(r.head.xflags=255&_,r.head.os=_>>8),512&r.flags&&(U[0]=255&_,U[1]=_>>>8&255,r.check=s(r.check,U,2,0)),w=_=0,r.mode=5;case 5:if(1024&r.flags){for(;w<16;){if(0===b)break e;b--,_+=p[g++]<<w,w+=8}r.length=_,r.head&&(r.head.extra_len=_),512&r.flags&&(U[0]=255&_,U[1]=_>>>8&255,r.check=s(r.check,U,2,0)),w=_=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(b<(k=r.length)&&(k=b),k&&(r.head&&(P=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,p,g,k,P)),512&r.flags&&(r.check=s(r.check,p,k,g)),b-=k,g+=k,r.length-=k),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===b)break e;for(k=0;P=p[g+k++],r.head&&P&&r.length<65536&&(r.head.name+=String.fromCharCode(P)),P&&k<b;);if(512&r.flags&&(r.check=s(r.check,p,k,g)),b-=k,g+=k,P)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===b)break e;for(k=0;P=p[g+k++],r.head&&P&&r.length<65536&&(r.head.comment+=String.fromCharCode(P)),P&&k<b;);if(512&r.flags&&(r.check=s(r.check,p,k,g)),b-=k,g+=k,P)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;w<16;){if(0===b)break e;b--,_+=p[g++]<<w,w+=8}if(_!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}w=_=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;w<32;){if(0===b)break e;b--,_+=p[g++]<<w,w+=8}e.adler=r.check=m(_),w=_=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=y,e.avail_out=v,e.next_in=g,e.avail_in=b,r.hold=_,r.bits=w,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){_>>>=7&w,w-=7&w,r.mode=27;break}for(;w<3;){if(0===b)break e;b--,_+=p[g++]<<w,w+=8}switch(r.last=1&_,w-=1,3&(_>>>=1)){case 0:r.mode=14;break;case 1:if(M(r),r.mode=20,6!==t)break;_>>>=2,w-=2;break e;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}_>>>=2,w-=2;break;case 14:for(_>>>=7&w,w-=7&w;w<32;){if(0===b)break e;b--,_+=p[g++]<<w,w+=8}if((65535&_)!=(_>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&_,w=_=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(k=r.length){if(b<k&&(k=b),v<k&&(k=v),0===k)break e;n.arraySet(f,p,g,k,y),b-=k,g+=k,v-=k,y+=k,r.length-=k;break}r.mode=12;break;case 17:for(;w<14;){if(0===b)break e;b--,_+=p[g++]<<w,w+=8}if(r.nlen=257+(31&_),_>>>=5,w-=5,r.ndist=1+(31&_),_>>>=5,w-=5,r.ncode=4+(15&_),_>>>=4,w-=4,286<r.nlen||30<r.ndist){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;w<3;){if(0===b)break e;b--,_+=p[g++]<<w,w+=8}r.lens[z[r.have++]]=7&_,_>>>=3,w-=3}for(;r.have<19;)r.lens[z[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,R={bits:r.lenbits},L=o(0,r.lens,0,19,r.lencode,0,r.work,R),r.lenbits=R.bits,L){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;N=(B=r.lencode[_&(1<<r.lenbits)-1])>>>16&255,I=65535&B,!((S=B>>>24)<=w);){if(0===b)break e;b--,_+=p[g++]<<w,w+=8}if(I<16)_>>>=S,w-=S,r.lens[r.have++]=I;else{if(16===I){for(F=S+2;w<F;){if(0===b)break e;b--,_+=p[g++]<<w,w+=8}if(_>>>=S,w-=S,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}P=r.lens[r.have-1],k=3+(3&_),_>>>=2,w-=2}else if(17===I){for(F=S+3;w<F;){if(0===b)break e;b--,_+=p[g++]<<w,w+=8}w-=S,P=0,k=3+(7&(_>>>=S)),_>>>=3,w-=3}else{for(F=S+7;w<F;){if(0===b)break e;b--,_+=p[g++]<<w,w+=8}w-=S,P=0,k=11+(127&(_>>>=S)),_>>>=7,w-=7}if(r.have+k>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;k--;)r.lens[r.have++]=P}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,R={bits:r.lenbits},L=o(c,r.lens,0,r.nlen,r.lencode,0,r.work,R),r.lenbits=R.bits,L){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,R={bits:r.distbits},L=o(l,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,R),r.distbits=R.bits,L){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(6<=b&&258<=v){e.next_out=y,e.avail_out=v,e.next_in=g,e.avail_in=b,r.hold=_,r.bits=w,i(e,x),y=e.next_out,f=e.output,v=e.avail_out,g=e.next_in,p=e.input,b=e.avail_in,_=r.hold,w=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;N=(B=r.lencode[_&(1<<r.lenbits)-1])>>>16&255,I=65535&B,!((S=B>>>24)<=w);){if(0===b)break e;b--,_+=p[g++]<<w,w+=8}if(N&&0==(240&N)){for(D=S,T=N,A=I;N=(B=r.lencode[A+((_&(1<<D+T)-1)>>D)])>>>16&255,I=65535&B,!(D+(S=B>>>24)<=w);){if(0===b)break e;b--,_+=p[g++]<<w,w+=8}_>>>=D,w-=D,r.back+=D}if(_>>>=S,w-=S,r.back+=S,r.length=I,0===N){r.mode=26;break}if(32&N){r.back=-1,r.mode=12;break}if(64&N){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&N,r.mode=22;case 22:if(r.extra){for(F=r.extra;w<F;){if(0===b)break e;b--,_+=p[g++]<<w,w+=8}r.length+=_&(1<<r.extra)-1,_>>>=r.extra,w-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;N=(B=r.distcode[_&(1<<r.distbits)-1])>>>16&255,I=65535&B,!((S=B>>>24)<=w);){if(0===b)break e;b--,_+=p[g++]<<w,w+=8}if(0==(240&N)){for(D=S,T=N,A=I;N=(B=r.distcode[A+((_&(1<<D+T)-1)>>D)])>>>16&255,I=65535&B,!(D+(S=B>>>24)<=w);){if(0===b)break e;b--,_+=p[g++]<<w,w+=8}_>>>=D,w-=D,r.back+=D}if(_>>>=S,w-=S,r.back+=S,64&N){e.msg="invalid distance code",r.mode=30;break}r.offset=I,r.extra=15&N,r.mode=24;case 24:if(r.extra){for(F=r.extra;w<F;){if(0===b)break e;b--,_+=p[g++]<<w,w+=8}r.offset+=_&(1<<r.extra)-1,_>>>=r.extra,w-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===v)break e;if(k=x-v,r.offset>k){if((k=r.offset-k)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}C=k>r.wnext?(k-=r.wnext,r.wsize-k):r.wnext-k,k>r.length&&(k=r.length),E=r.window}else E=f,C=y-r.offset,k=r.length;for(v<k&&(k=v),v-=k,r.length-=k;f[y++]=E[C++],--k;);0===r.length&&(r.mode=21);break;case 26:if(0===v)break e;f[y++]=r.length,v--,r.mode=21;break;case 27:if(r.wrap){for(;w<32;){if(0===b)break e;b--,_|=p[g++]<<w,w+=8}if(x-=v,e.total_out+=x,r.total+=x,x&&(e.adler=r.check=r.flags?s(r.check,f,x,y-x):a(r.check,f,x,y-x)),x=v,(r.flags?_:m(_))!==r.check){e.msg="incorrect data check",r.mode=30;break}w=_=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;w<32;){if(0===b)break e;b--,_+=p[g++]<<w,w+=8}if(_!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}w=_=0}r.mode=29;case 29:L=1;break e;case 30:L=-3;break e;case 31:return-4;default:return d}return e.next_out=y,e.avail_out=v,e.next_in=g,e.avail_in=b,r.hold=_,r.bits=w,(r.wsize||x!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&O(e,e.output,e.next_out,x-e.avail_out)?(r.mode=31,-4):(j-=e.avail_in,x-=e.avail_out,e.total_in+=j,e.total_out+=x,r.total+=x,r.wrap&&x&&(e.adler=r.check=r.flags?s(r.check,f,x,e.next_out-x):a(r.check,f,x,e.next_out-x)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==j&&0===x||4===t)&&L===u&&(L=-5),L)},r.inflateEnd=function(e){if(!e||!e.state)return d;var t=e.state;return t.window&&(t.window=null),e.state=null,u},r.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?d:((r.head=t).done=!1,u):d},r.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?d:11===r.mode&&a(1,t,n,0)!==r.check?-3:O(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,u):d},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,r){"use strict";var n=e("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],i=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,c,l,u,d,h){var p,f,m,g,y,b,v,_,w,j=h.bits,x=0,M=0,O=0,k=0,C=0,E=0,S=0,N=0,I=0,D=0,T=null,A=0,P=new n.Buf16(16),L=new n.Buf16(16),R=null,F=0;for(x=0;x<=15;x++)P[x]=0;for(M=0;M<c;M++)P[t[r+M]]++;for(C=j,k=15;1<=k&&0===P[k];k--);if(k<C&&(C=k),0===k)return l[u++]=20971520,l[u++]=20971520,h.bits=1,0;for(O=1;O<k&&0===P[O];O++);for(C<O&&(C=O),x=N=1;x<=15;x++)if(N<<=1,(N-=P[x])<0)return-1;if(0<N&&(0===e||1!==k))return-1;for(L[1]=0,x=1;x<15;x++)L[x+1]=L[x]+P[x];for(M=0;M<c;M++)0!==t[r+M]&&(d[L[t[r+M]]++]=M);if(b=0===e?(T=R=d,19):1===e?(T=a,A-=257,R=s,F-=257,256):(T=i,R=o,-1),x=O,y=u,S=M=D=0,m=-1,g=(I=1<<(E=C))-1,1===e&&852<I||2===e&&592<I)return 1;for(;;){for(v=x-S,w=d[M]<b?(_=0,d[M]):d[M]>b?(_=R[F+d[M]],T[A+d[M]]):(_=96,0),p=1<<x-S,O=f=1<<E;l[y+(D>>S)+(f-=p)]=v<<24|_<<16|w|0,0!==f;);for(p=1<<x-1;D&p;)p>>=1;if(0!==p?(D&=p-1,D+=p):D=0,M++,0==--P[x]){if(x===k)break;x=t[r+d[M]]}if(C<x&&(D&g)!==m){for(0===S&&(S=C),y+=O,N=1<<(E=x-S);E+S<k&&!((N-=P[E+S])<=0);)E++,N<<=1;if(I+=1<<E,1===e&&852<I||2===e&&592<I)return 1;l[m=D&g]=C<<24|E<<16|y-u|0}}return 0!==D&&(l[y+D]=x-S<<24|64<<16|0),h.bits=C,0}},{"../utils/common":41}],51:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,r){"use strict";var n=e("../utils/common"),a=0,s=1;function i(e){for(var t=e.length;0<=--t;)e[t]=0}var o=0,c=29,l=256,u=l+1+c,d=30,h=19,p=2*u+1,f=15,m=16,g=7,y=256,b=16,v=17,_=18,w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],O=new Array(2*(u+2));i(O);var k=new Array(2*d);i(k);var C=new Array(512);i(C);var E=new Array(256);i(E);var S=new Array(c);i(S);var N,I,D,T=new Array(d);function A(e,t,r,n,a){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}function P(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function L(e){return e<256?C[e]:C[256+(e>>>7)]}function R(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function F(e,t,r){e.bi_valid>m-r?(e.bi_buf|=t<<e.bi_valid&65535,R(e,e.bi_buf),e.bi_buf=t>>m-e.bi_valid,e.bi_valid+=r-m):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function B(e,t,r){F(e,r[2*t],r[2*t+1])}function U(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1}function z(e,t,r){var n,a,s=new Array(f+1),i=0;for(n=1;n<=f;n++)s[n]=i=i+r[n-1]<<1;for(a=0;a<=t;a++){var o=e[2*a+1];0!==o&&(e[2*a]=U(s[o]++,o))}}function Y(e){var t;for(t=0;t<u;t++)e.dyn_ltree[2*t]=0;for(t=0;t<d;t++)e.dyn_dtree[2*t]=0;for(t=0;t<h;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*y]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function G(e){8<e.bi_valid?R(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function W(e,t,r,n){var a=2*t,s=2*r;return e[a]<e[s]||e[a]===e[s]&&n[t]<=n[r]}function V(e,t,r){for(var n=e.heap[r],a=r<<1;a<=e.heap_len&&(a<e.heap_len&&W(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!W(t,n,e.heap[a],e.depth));)e.heap[r]=e.heap[a],r=a,a<<=1;e.heap[r]=n}function q(e,t,r){var n,a,s,i,o=0;if(0!==e.last_lit)for(;n=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],a=e.pending_buf[e.l_buf+o],o++,0===n?B(e,a,t):(B(e,(s=E[a])+l+1,t),0!==(i=w[s])&&F(e,a-=S[s],i),B(e,s=L(--n),r),0!==(i=j[s])&&F(e,n-=T[s],i)),o<e.last_lit;);B(e,y,t)}function H(e,t){var r,n,a,s=t.dyn_tree,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,c=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=p,r=0;r<c;r++)0!==s[2*r]?(e.heap[++e.heap_len]=l=r,e.depth[r]=0):s[2*r+1]=0;for(;e.heap_len<2;)s[2*(a=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[a]=0,e.opt_len--,o&&(e.static_len-=i[2*a+1]);for(t.max_code=l,r=e.heap_len>>1;1<=r;r--)V(e,s,r);for(a=c;r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],V(e,s,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,s[2*a]=s[2*r]+s[2*n],e.depth[a]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,s[2*r+1]=s[2*n+1]=a,e.heap[1]=a++,V(e,s,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,a,s,i,o,c=t.dyn_tree,l=t.max_code,u=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,m=t.stat_desc.extra_base,g=t.stat_desc.max_length,y=0;for(s=0;s<=f;s++)e.bl_count[s]=0;for(c[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<p;r++)g<(s=c[2*c[2*(n=e.heap[r])+1]+1]+1)&&(s=g,y++),c[2*n+1]=s,l<n||(e.bl_count[s]++,i=0,m<=n&&(i=h[n-m]),o=c[2*n],e.opt_len+=o*(s+i),d&&(e.static_len+=o*(u[2*n+1]+i)));if(0!==y){do{for(s=g-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[g]--,y-=2}while(0<y);for(s=g;0!==s;s--)for(n=e.bl_count[s];0!==n;)l<(a=e.heap[--r])||(c[2*a+1]!==s&&(e.opt_len+=(s-c[2*a+1])*c[2*a],c[2*a+1]=s),n--)}}(e,t),z(s,l,e.bl_count)}function K(e,t,r){var n,a,s=-1,i=t[1],o=0,c=7,l=4;for(0===i&&(c=138,l=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)a=i,i=t[2*(n+1)+1],++o<c&&a===i||(o<l?e.bl_tree[2*a]+=o:0!==a?(a!==s&&e.bl_tree[2*a]++,e.bl_tree[2*b]++):o<=10?e.bl_tree[2*v]++:e.bl_tree[2*_]++,s=a,l=(o=0)===i?(c=138,3):a===i?(c=6,3):(c=7,4))}function Z(e,t,r){var n,a,s=-1,i=t[1],o=0,c=7,l=4;for(0===i&&(c=138,l=3),n=0;n<=r;n++)if(a=i,i=t[2*(n+1)+1],!(++o<c&&a===i)){if(o<l)for(;B(e,a,e.bl_tree),0!=--o;);else 0!==a?(a!==s&&(B(e,a,e.bl_tree),o--),B(e,b,e.bl_tree),F(e,o-3,2)):o<=10?(B(e,v,e.bl_tree),F(e,o-3,3)):(B(e,_,e.bl_tree),F(e,o-11,7));s=a,l=(o=0)===i?(c=138,3):a===i?(c=6,3):(c=7,4)}}i(T);var J=!1;function Q(e,t,r,a){F(e,(o<<1)+(a?1:0),3),function(e,t,r,a){G(e),a&&(R(e,r),R(e,~r)),n.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r,!0)}r._tr_init=function(e){J||(function(){var e,t,r,n,a,s=new Array(f+1);for(n=r=0;n<c-1;n++)for(S[n]=r,e=0;e<1<<w[n];e++)E[r++]=n;for(E[r-1]=n,n=a=0;n<16;n++)for(T[n]=a,e=0;e<1<<j[n];e++)C[a++]=n;for(a>>=7;n<d;n++)for(T[n]=a<<7,e=0;e<1<<j[n]-7;e++)C[256+a++]=n;for(t=0;t<=f;t++)s[t]=0;for(e=0;e<=143;)O[2*e+1]=8,e++,s[8]++;for(;e<=255;)O[2*e+1]=9,e++,s[9]++;for(;e<=279;)O[2*e+1]=7,e++,s[7]++;for(;e<=287;)O[2*e+1]=8,e++,s[8]++;for(z(O,u+1,s),e=0;e<d;e++)k[2*e+1]=5,k[2*e]=U(e,5);N=new A(O,w,l+1,u,f),I=new A(k,j,0,d,f),D=new A(new Array(0),x,0,h,g)}(),J=!0),e.l_desc=new P(e.dyn_ltree,N),e.d_desc=new P(e.dyn_dtree,I),e.bl_desc=new P(e.bl_tree,D),e.bi_buf=0,e.bi_valid=0,Y(e)},r._tr_stored_block=Q,r._tr_flush_block=function(e,t,r,n){var i,o,c=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return a;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return s;for(t=32;t<l;t++)if(0!==e.dyn_ltree[2*t])return s;return a}(e)),H(e,e.l_desc),H(e,e.d_desc),c=function(e){var t;for(K(e,e.dyn_ltree,e.l_desc.max_code),K(e,e.dyn_dtree,e.d_desc.max_code),H(e,e.bl_desc),t=h-1;3<=t&&0===e.bl_tree[2*M[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=r+5,r+4<=i&&-1!==t?Q(e,t,r,n):4===e.strategy||o===i?(F(e,2+(n?1:0),3),q(e,O,k)):(F(e,4+(n?1:0),3),function(e,t,r,n){var a;for(F(e,t-257,5),F(e,r-1,5),F(e,n-4,4),a=0;a<n;a++)F(e,e.bl_tree[2*M[a]+1],3);Z(e,e.dyn_ltree,t-1),Z(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,c+1),q(e,e.dyn_ltree,e.dyn_dtree)),Y(e),n&&G(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(E[r]+l+1)]++,e.dyn_dtree[2*L(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){F(e,2,3),B(e,y,O),function(e){16===e.bi_valid?(R(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(e){!function(e,t){"use strict";if(!e.setImmediate){var r,n,s,i,o=1,c={},l=!1,u=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,r="[object process]"==={}.toString.call(e.process)?function(e){a.nextTick((function(){p(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(i="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",f,!1):e.attachEvent("onmessage",f),function(t){e.postMessage(i+t,"*")}):e.MessageChannel?((s=new MessageChannel).port1.onmessage=function(e){p(e.data)},function(e){s.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(n=u.documentElement,function(e){var t=u.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):function(e){setTimeout(p,0,e)},d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return c[o]=a,r(o),o++},d.clearImmediate=h}function h(e){delete c[e]}function p(e){if(l)setTimeout(p,0,e);else{var r=c[e];if(r){l=!0;try{!function(e){var r=e.callback,n=e.args;switch(n.length){case 0:r();break;case 1:r(n[0]);break;case 2:r(n[0],n[1]);break;case 3:r(n[0],n[1],n[2]);break;default:r.apply(t,n)}}(r)}finally{h(e),l=!1}}}}function f(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&p(+t.data.slice(i.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)}).call(this,r(248).Buffer,r(2079).setImmediate,r(93),r(251))},2079:function(e,t,r){(function(e){var n="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,a=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(a.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new s(a.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(2080),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(93))},2080:function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,a=1,s={},i=!1,o=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){u(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"===typeof r.data&&0===r.data.indexOf(t)&&u(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),n=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){u(e.data)},n=function(t){e.port2.postMessage(t)}}():o&&"onreadystatechange"in o.createElement("script")?function(){var e=o.documentElement;n=function(t){var r=o.createElement("script");r.onreadystatechange=function(){u(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():n=function(e){setTimeout(u,0,e)},c.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return s[a]=i,n(a),a++},c.clearImmediate=l}function l(e){delete s[e]}function u(e){if(i)setTimeout(u,0,e);else{var t=s[e];if(t){i=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}(t)}finally{l(e),i=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,r(93),r(251))},2081:function(e,t,r){"use strict";(function(t){const n=r(2082),a=r(1992),s=r(248).Buffer;e.exports=async function(e,r){if(!t.fetch)return n(e,r);const i=a(e,r),o="prj"===r||"cpg"===r;try{const e=await fetch(i);if(e.status>399)throw new Error(e.statusText);if(o)return e.text();const t=await e.arrayBuffer();return s.from(t)}catch(c){if(console.log("ERROR",c,r),o||"dbf"===r)return!1;throw c}}}).call(this,r(93))},2082:function(e,t,r){"use strict";const n=r(1991),a=r(1992),s=r(248).Buffer;e.exports=function(e,t){return new n((function(r,n){const i=a(e,t),o=new XMLHttpRequest;o.open("GET",i,!0),"prj"!==t&&"cpg"!==t&&(o.responseType="arraybuffer"),o.addEventListener("load",(function(){return o.status>399?"prj"===t||"cpg"===t?r(!1):n(new Error(o.status)):r("prj"!==t&&"cpg"!==t?s.from(o.response):o.response)}),!1),o.send()}))}},2083:function(e,t,r){"use strict";(function(t){var r,n,a=t.MutationObserver||t.WebKitMutationObserver;if(a){var s=0,i=new a(u),o=t.document.createTextNode("");i.observe(o,{characterData:!0}),r=function(){o.data=s=++s%2}}else if(t.setImmediate||"undefined"===typeof t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var c=new t.MessageChannel;c.port1.onmessage=u,r=function(){c.port2.postMessage(0)}}var l=[];function u(){var e,t;n=!0;for(var r=l.length;r;){for(t=l,l=[],e=-1;++e<r;)t[e]();r=l.length}n=!1}e.exports=function(e){1!==l.push(e)||n||r()}}).call(this,r(93))},2084:function(e,t,r){"use strict";function n(e,t){return!function(e){let t=0,r=1;const n=e.length;let a,s;for(;r<n;)a=s||e[0],s=e[r],t+=(s[0]-a[0])*(s[1]+a[1]),r++;return t>0}(t)&&e.length?e[e.length-1].push(t):e.push([t]),e}s.prototype.parsePoint=function(e){return{type:"Point",coordinates:this.parseCoord(e,0)}},s.prototype.parseZPoint=function(e){const t=this.parsePoint(e);return t.coordinates.push(e.readDoubleLE(16)),t},s.prototype.parsePointArray=function(e,t,r){const n=[];let a=0;for(;a<r;)n.push(this.parseCoord(e,t)),t+=16,a++;return n},s.prototype.parseZPointArray=function(e,t,r,n){let a=0;for(;a<r;)n[a].push(e.readDoubleLE(t)),a++,t+=8;return n},s.prototype.parseArrayGroup=function(e,t,r,n,a){const s=[];let i,o,c=0,l=0;for(;c<n;)c++,r+=4,i=l,l=c===n?a:e.readInt32LE(r),o=l-i,o&&(s.push(this.parsePointArray(e,t,o)),t+=o<<4);return s},s.prototype.parseZArrayGroup=function(e,t,r,n){let a=0;for(;a<r;)n[a]=this.parseZPointArray(e,t,n[a].length,n[a]),t+=n[a].length<<3,a++;return n},s.prototype.parseMultiPoint=function(e){const t={},r=e.readInt32LE(32,!0);if(!r)return null;const n=this.parseCoord(e,0),a=this.parseCoord(e,16);t.bbox=[n[0],n[1],a[0],a[1]];return 1===r?(t.type="Point",t.coordinates=this.parseCoord(e,36)):(t.type="MultiPoint",t.coordinates=this.parsePointArray(e,36,r)),t},s.prototype.parseZMultiPoint=function(e){const t=this.parseMultiPoint(e);if(!t)return null;let r;if("Point"===t.type)return t.coordinates.push(e.readDoubleLE(72)),t;r=t.coordinates.length;const n=52+(r<<4);return t.coordinates=this.parseZPointArray(e,n,r,t.coordinates),t},s.prototype.parsePolyline=function(e){const t={},r=e.readInt32LE(32);if(!r)return null;const n=this.parseCoord(e,0),a=this.parseCoord(e,16);t.bbox=[n[0],n[1],a[0],a[1]];const s=e.readInt32LE(36);let i,o;return 1===r?(t.type="LineString",i=44,t.coordinates=this.parsePointArray(e,i,s)):(t.type="MultiLineString",i=40+(r<<2),o=40,t.coordinates=this.parseArrayGroup(e,i,40,r,s)),t},s.prototype.parseZPolyline=function(e){const t=this.parsePolyline(e);if(!t)return null;const r=t.coordinates.length;let n;if("LineString"===t.type)return n=60+(r<<4),t.coordinates=this.parseZPointArray(e,n,r,t.coordinates),t;return n=56+(t.coordinates.reduce((function(e,t){return e+t.length}),0)<<4)+(r<<2),t.coordinates=this.parseZArrayGroup(e,n,r,t.coordinates),t},s.prototype.polyFuncs=function(e){return e?"LineString"===e.type?(e.type="Polygon",e.coordinates=[e.coordinates],e):(e.coordinates=e.coordinates.reduce(n,[]),1===e.coordinates.length?(e.type="Polygon",e.coordinates=e.coordinates[0],e):(e.type="MultiPolygon",e)):e},s.prototype.parsePolygon=function(e){return this.polyFuncs(this.parsePolyline(e))},s.prototype.parseZPolygon=function(e){return this.polyFuncs(this.parseZPolyline(e))};const a={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};function s(e,t){if(!(this instanceof s))return new s(e,t);this.buffer=e,this.headers=this.parseHeader(),this.headers.length<this.buffer.byteLength&&(this.buffer=this.buffer.slice(0,this.headers.length)),this.shpFuncs(t),this.rows=this.getRows()}s.prototype.shpFuncs=function(e){let t=this.headers.shpCode;if(t>20&&(t-=20),!(t in a))throw new Error("I don't know that shp type");var r;this.parseFunc=this[a[t]],this.parseCoord=(r=e)?function(e,t){const n=[e.readDoubleLE(t),e.readDoubleLE(t+8)];return r.inverse(n)}:function(e,t){return[e.readDoubleLE(t),e.readDoubleLE(t+8)]}},s.prototype.getShpCode=function(){return this.parseHeader().shpCode},s.prototype.parseHeader=function(){const e=this.buffer.slice(0,100);return{length:e.readInt32BE(24)<<1,version:e.readInt32LE(28),shpCode:e.readInt32LE(32),bbox:[e.readDoubleLE(36),e.readDoubleLE(44),e.readDoubleLE(52),e.readDoubleLE(52)]}},s.prototype.getRows=function(){let e=100;const t=this.buffer.byteLength,r=[];let n;for(;e<t&&(n=this.getRow(e),n);)e+=8,e+=n.len,n.type?r.push(this.parseFunc(n.data)):r.push(null);return r},s.prototype.getRow=function(e){const t=this.buffer.slice(e,e+12),r=t.readInt32BE(4)<<1,n=t.readInt32BE(0);return 0===r?{id:n,len:r,type:0}:{id:n,len:r,data:this.buffer.slice(e+12,e+r+8),type:t.readInt32LE(8)}},e.exports=function(e,t){return new s(e,t).rows}},2085:function(e,t,r){var n=r(2086);function a(e,t,r,n,a){var s=a(e.slice(t,t+r));switch(n){case"N":case"F":case"O":return parseFloat(s,10);case"D":return new Date(s.slice(0,4),parseInt(s.slice(4,6),10)-1,s.slice(6,8));case"L":return"y"===s.toLowerCase()||"t"===s.toLowerCase();default:return s}}function s(e,t,r,n){for(var s,i,o={},c=0,l=r.length;c<l;)s=a(e,t,(i=r[c]).len,i.dataType,n),t+=i.len,"undefined"!==typeof s&&(o[i.name]=s),c++;return o}e.exports=function(e,t){for(var r=n(t),a=function(e){var t={};return t.lastUpdated=new Date(e.readUInt8(1)+1900,e.readUInt8(2),e.readUInt8(3)),t.records=e.readUInt32LE(4),t.headerLen=e.readUInt16LE(8),t.recLen=e.readUInt16LE(10),t}(e),i=function(e,t,r){for(var n=[],a=32;a<t&&(n.push({name:r(e.slice(a,a+11)),dataType:String.fromCharCode(e.readUInt8(a+11)),len:e.readUInt8(a+16),decimal:e.readUInt8(a+17)}),13!==e.readUInt8(a+32));)a+=32;return n}(e,a.headerLen-1,r),o=2+(i.length+1<<5),c=a.recLen,l=a.records,u=[];l;)u.push(s(e,o,i,r)),o+=c,l--;return u}},2086:function(e,t,r){r(2087);var n=r(2090).StringDecoder;function a(e){var t=new n;return(t.write(e)+t.end()).replace(/\0/g,"").trim()}e.exports=function e(t,r){if(!t)return a;try{new TextDecoder(t.trim())}catch(i){var n=s.exec(t);return n&&!r?e("windows-"+n[1],!0):a}return function(e){var r=new TextDecoder(t);return(r.decode(e,{stream:!0})+r.decode()).replace(/\0/g,"").trim()}};var s=/^(?:ANSI\s)?(\d+)$/m},2087:function(e,t,r){e.exports=r(2088)},2088:function(e,t,r){!function(t){"use strict";function n(e,t,r){return t<=e&&e<=r}e.exports&&!t["encoding-indexes"]&&r(2089);var a=Math.floor;function s(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function i(e){return 0<=e&&e<=127}var o=i,c=-1;function l(e){this.tokens=[].slice.call(e),this.tokens.reverse()}l.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():c},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.pop());else this.tokens.push(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.shift());else this.tokens.unshift(e)}};var u=-1;function d(e,t){if(e)throw TypeError("Decoder error");return t||65533}function h(e){throw TypeError("The code point "+e+" could not be encoded.")}function p(e){return e=String(e).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(m,e)?m[e]:null}var f=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],m={};f.forEach((function(e){e.encodings.forEach((function(e){e.labels.forEach((function(t){m[t]=e}))}))}));var g,y,b={},v={};function _(e,t){return t&&t[e]||null}function w(e,t){var r=t.indexOf(e);return-1===r?null:r}function j(e){if(!("encoding-indexes"in t))throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?");return t["encoding-indexes"][e]}var x="utf-8";function M(e,t){if(!(this instanceof M))throw TypeError("Called as a function. Did you forget 'new'?");e=void 0!==e?String(e):x,t=s(t),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var r=p(e);if(null===r||"replacement"===r.name)throw RangeError("Unknown encoding: "+e);if(!v[r.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?");var n=this;return n._encoding=r,Boolean(t.fatal)&&(n._error_mode="fatal"),Boolean(t.ignoreBOM)&&(n._ignoreBOM=!0),Object.defineProperty||(this.encoding=n._encoding.name.toLowerCase(),this.fatal="fatal"===n._error_mode,this.ignoreBOM=n._ignoreBOM),n}function O(e,r){if(!(this instanceof O))throw TypeError("Called as a function. Did you forget 'new'?");r=s(r),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=Boolean(r.fatal)?"fatal":"replacement";var n=this;if(Boolean(r.NONSTANDARD_allowLegacyEncoding)){var a=p(e=void 0!==e?String(e):x);if(null===a||"replacement"===a.name)throw RangeError("Unknown encoding: "+e);if(!b[a.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");n._encoding=a}else n._encoding=p("utf-8"),void 0!==e&&"console"in t&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=n._encoding.name.toLowerCase()),n}function k(e){var t=e.fatal,r=0,a=0,s=0,i=128,o=191;this.handler=function(e,l){if(l===c&&0!==s)return s=0,d(t);if(l===c)return u;if(0===s){if(n(l,0,127))return l;if(n(l,194,223))s=1,r=31&l;else if(n(l,224,239))224===l&&(i=160),237===l&&(o=159),s=2,r=15&l;else{if(!n(l,240,244))return d(t);240===l&&(i=144),244===l&&(o=143),s=3,r=7&l}return null}if(!n(l,i,o))return r=s=a=0,i=128,o=191,e.prepend(l),d(t);if(i=128,o=191,r=r<<6|63&l,(a+=1)!==s)return null;var h=r;return r=s=a=0,h}}function C(e){e.fatal;this.handler=function(e,t){if(t===c)return u;if(o(t))return t;var r,a;n(t,128,2047)?(r=1,a=192):n(t,2048,65535)?(r=2,a=224):n(t,65536,1114111)&&(r=3,a=240);for(var s=[(t>>6*r)+a];r>0;){var i=t>>6*(r-1);s.push(128|63&i),r-=1}return s}}function E(e,t){var r=t.fatal;this.handler=function(t,n){if(n===c)return u;if(i(n))return n;var a=e[n-128];return null===a?d(r):a}}function S(e,t){t.fatal;this.handler=function(t,r){if(r===c)return u;if(o(r))return r;var n=w(r,e);return null===n&&h(r),n+128}}function N(e){var t=e.fatal,r=0,a=0,s=0;this.handler=function(e,o){if(o===c&&0===r&&0===a&&0===s)return u;var l;if(o!==c||0===r&&0===a&&0===s||(r=0,a=0,s=0,d(t)),0!==s){l=null,n(o,48,57)&&(l=function(e){if(e>39419&&e<189e3||e>1237575)return null;if(7457===e)return 59335;var t,r=0,n=0,a=j("gb18030-ranges");for(t=0;t<a.length;++t){var s=a[t];if(!(s[0]<=e))break;r=s[0],n=s[1]}return n+e-r}(10*(126*(10*(r-129)+a-48)+s-129)+o-48));var h=[a,s,o];return r=0,a=0,s=0,null===l?(e.prepend(h),d(t)):l}if(0!==a)return n(o,129,254)?(s=o,null):(e.prepend([a,o]),r=0,a=0,d(t));if(0!==r){if(n(o,48,57))return a=o,null;var p=r,f=null;r=0;var m=o<127?64:65;return(n(o,64,126)||n(o,128,254))&&(f=190*(p-129)+(o-m)),null===(l=null===f?null:_(f,j("gb18030")))&&i(o)&&e.prepend(o),null===l?d(t):l}return i(o)?o:128===o?8364:n(o,129,254)?(r=o,null):d(t)}}function I(e,t){e.fatal;this.handler=function(e,r){if(r===c)return u;if(o(r))return r;if(58853===r)return h(r);if(t&&8364===r)return 128;var n=w(r,j("gb18030"));if(null!==n){var s=n%190;return[a(n/190)+129,s+(s<63?64:65)]}if(t)return h(r);n=function(e){if(59335===e)return 7457;var t,r=0,n=0,a=j("gb18030-ranges");for(t=0;t<a.length;++t){var s=a[t];if(!(s[1]<=e))break;r=s[1],n=s[0]}return n+e-r}(r);var i=a(n/10/126/10),l=a((n-=10*i*126*10)/10/126),d=a((n-=10*l*126)/10);return[i+129,l+48,d+129,n-10*d+48]}}function D(e){var t=e.fatal,r=0;this.handler=function(e,a){if(a===c&&0!==r)return r=0,d(t);if(a===c&&0===r)return u;if(0!==r){var s=r,o=null;r=0;var l=a<127?64:98;switch((n(a,64,126)||n(a,161,254))&&(o=157*(s-129)+(a-l)),o){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var h=null===o?null:_(o,j("big5"));return null===h&&i(a)&&e.prepend(a),null===h?d(t):h}return i(a)?a:n(a,129,254)?(r=a,null):d(t)}}function T(e){e.fatal;this.handler=function(e,t){if(t===c)return u;if(o(t))return t;var r=function(e){y=y||j("big5").map((function(e,t){return t<5024?null:e}));var t=y;return 9552===e||9566===e||9569===e||9578===e||21313===e||21317===e?t.lastIndexOf(e):w(e,t)}(t);if(null===r)return h(t);var n=a(r/157)+129;if(n<161)return h(t);var s=r%157;return[n,s+(s<63?64:98)]}}function A(e){var t=e.fatal,r=!1,a=0;this.handler=function(e,s){if(s===c&&0!==a)return a=0,d(t);if(s===c&&0===a)return u;if(142===a&&n(s,161,223))return a=0,65216+s;if(143===a&&n(s,161,254))return r=!0,a=s,null;if(0!==a){var o=a;a=0;var l=null;return n(o,161,254)&&n(s,161,254)&&(l=_(94*(o-161)+(s-161),j(r?"jis0212":"jis0208"))),r=!1,n(s,161,254)||e.prepend(s),null===l?d(t):l}return i(s)?s:142===s||143===s||n(s,161,254)?(a=s,null):d(t)}}function P(e){e.fatal;this.handler=function(e,t){if(t===c)return u;if(o(t))return t;if(165===t)return 92;if(8254===t)return 126;if(n(t,65377,65439))return[142,t-65377+161];8722===t&&(t=65293);var r=w(t,j("jis0208"));return null===r?h(t):[a(r/94)+161,r%94+161]}}function L(e){var t=e.fatal,r=0,a=1,s=2,i=3,o=4,l=5,h=6,p=r,f=r,m=0,g=!1;this.handler=function(e,y){switch(p){default:case r:return 27===y?(p=l,null):n(y,0,127)&&14!==y&&15!==y&&27!==y?(g=!1,y):y===c?u:(g=!1,d(t));case a:return 27===y?(p=l,null):92===y?(g=!1,165):126===y?(g=!1,8254):n(y,0,127)&&14!==y&&15!==y&&27!==y&&92!==y&&126!==y?(g=!1,y):y===c?u:(g=!1,d(t));case s:return 27===y?(p=l,null):n(y,33,95)?(g=!1,65344+y):y===c?u:(g=!1,d(t));case i:return 27===y?(p=l,null):n(y,33,126)?(g=!1,m=y,p=o,null):y===c?u:(g=!1,d(t));case o:if(27===y)return p=l,d(t);if(n(y,33,126)){p=i;var b=_(94*(m-33)+y-33,j("jis0208"));return null===b?d(t):b}return y===c?(p=i,e.prepend(y),d(t)):(p=i,d(t));case l:return 36===y||40===y?(m=y,p=h,null):(e.prepend(y),g=!1,p=f,d(t));case h:var v=m;m=0;var w=null;if(40===v&&66===y&&(w=r),40===v&&74===y&&(w=a),40===v&&73===y&&(w=s),36!==v||64!==y&&66!==y||(w=i),null!==w){p=p=w;var x=g;return g=!0,x?d(t):null}return e.prepend([v,y]),g=!1,p=f,d(t)}}}function R(e){e.fatal;var t=0,r=1,n=2,s=t;this.handler=function(e,i){if(i===c&&s!==t)return e.prepend(i),s=t,[27,40,66];if(i===c&&s===t)return u;if((s===t||s===r)&&(14===i||15===i||27===i))return h(65533);if(s===t&&o(i))return i;if(s===r&&(o(i)&&92!==i&&126!==i||165==i||8254==i)){if(o(i))return i;if(165===i)return 92;if(8254===i)return 126}if(o(i)&&s!==t)return e.prepend(i),s=t,[27,40,66];if((165===i||8254===i)&&s!==r)return e.prepend(i),s=r,[27,40,74];8722===i&&(i=65293);var l=w(i,j("jis0208"));return null===l?h(i):s!==n?(e.prepend(i),s=n,[27,36,66]):[a(l/94)+33,l%94+33]}}function F(e){var t=e.fatal,r=0;this.handler=function(e,a){if(a===c&&0!==r)return r=0,d(t);if(a===c&&0===r)return u;if(0!==r){var s=r,o=null;r=0;var l=a<127?64:65,h=s<160?129:193;if((n(a,64,126)||n(a,128,252))&&(o=188*(s-h)+a-l),n(o,8836,10715))return 48508+o;var p=null===o?null:_(o,j("jis0208"));return null===p&&i(a)&&e.prepend(a),null===p?d(t):p}return i(a)||128===a?a:n(a,161,223)?65216+a:n(a,129,159)||n(a,224,252)?(r=a,null):d(t)}}function B(e){e.fatal;this.handler=function(e,t){if(t===c)return u;if(o(t)||128===t)return t;if(165===t)return 92;if(8254===t)return 126;if(n(t,65377,65439))return t-65377+161;8722===t&&(t=65293);var r=function(e){return g=g||j("jis0208").map((function(e,t){return n(t,8272,8835)?null:e})),g.indexOf(e)}(t);if(null===r)return h(t);var s=a(r/188),i=r%188;return[s+(s<31?129:193),i+(i<63?64:65)]}}function U(e){var t=e.fatal,r=0;this.handler=function(e,a){if(a===c&&0!==r)return r=0,d(t);if(a===c&&0===r)return u;if(0!==r){var s=r,o=null;r=0,n(a,65,254)&&(o=190*(s-129)+(a-65));var l=null===o?null:_(o,j("euc-kr"));return null===o&&i(a)&&e.prepend(a),null===l?d(t):l}return i(a)?a:n(a,129,254)?(r=a,null):d(t)}}function z(e){e.fatal;this.handler=function(e,t){if(t===c)return u;if(o(t))return t;var r=w(t,j("euc-kr"));return null===r?h(t):[a(r/190)+129,r%190+65]}}function Y(e,t){var r=e>>8,n=255&e;return t?[r,n]:[n,r]}function G(e,t){var r=t.fatal,a=null,s=null;this.handler=function(t,i){if(i===c&&(null!==a||null!==s))return d(r);if(i===c&&null===a&&null===s)return u;if(null===a)return a=i,null;var o;if(o=e?(a<<8)+i:(i<<8)+a,a=null,null!==s){var l=s;return s=null,n(o,56320,57343)?65536+1024*(l-55296)+(o-56320):(t.prepend(Y(o,e)),d(r))}return n(o,55296,56319)?(s=o,null):n(o,56320,57343)?d(r):o}}function W(e,t){t.fatal;this.handler=function(t,r){if(r===c)return u;if(n(r,0,65535))return Y(r,e);var a=Y(55296+(r-65536>>10),e),s=Y(56320+(r-65536&1023),e);return a.concat(s)}}function V(e){e.fatal;this.handler=function(e,t){return t===c?u:i(t)?t:63360+t-128}}function q(e){e.fatal;this.handler=function(e,t){return t===c?u:o(t)?t:n(t,63360,63487)?t-63360+128:h(t)}}Object.defineProperty&&(Object.defineProperty(M.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(M.prototype,"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(M.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),M.prototype.decode=function(e,t){var r;r="object"===typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"===typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=s(t),this._do_not_flush||(this._decoder=v[this._encoding.name]({fatal:"fatal"===this._error_mode}),this._BOMseen=!1),this._do_not_flush=Boolean(t.stream);for(var n,a=new l(r),i=[];;){var o=a.read();if(o===c)break;if((n=this._decoder.handler(a,o))===u)break;null!==n&&(Array.isArray(n)?i.push.apply(i,n):i.push(n))}if(!this._do_not_flush){do{if((n=this._decoder.handler(a,a.read()))===u)break;null!==n&&(Array.isArray(n)?i.push.apply(i,n):i.push(n))}while(!a.endOfStream());this._decoder=null}return function(e){var t,r;return t=["UTF-8","UTF-16LE","UTF-16BE"],r=this._encoding.name,-1===t.indexOf(r)||this._ignoreBOM||this._BOMseen||(e.length>0&&65279===e[0]?(this._BOMseen=!0,e.shift()):e.length>0&&(this._BOMseen=!0)),function(e){for(var t="",r=0;r<e.length;++r){var n=e[r];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return t}(e)}.call(this,i)},Object.defineProperty&&Object.defineProperty(O.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),O.prototype.encode=function(e,t){e=void 0===e?"":String(e),t=s(t),this._do_not_flush||(this._encoder=b[this._encoding.name]({fatal:"fatal"===this._fatal})),this._do_not_flush=Boolean(t.stream);for(var r,n=new l(function(e){for(var t=String(e),r=t.length,n=0,a=[];n<r;){var s=t.charCodeAt(n);if(s<55296||s>57343)a.push(s);else if(56320<=s&&s<=57343)a.push(65533);else if(55296<=s&&s<=56319)if(n===r-1)a.push(65533);else{var i=t.charCodeAt(n+1);if(56320<=i&&i<=57343){var o=1023&s,c=1023&i;a.push(65536+(o<<10)+c),n+=1}else a.push(65533)}n+=1}return a}(e)),a=[];;){var i=n.read();if(i===c)break;if((r=this._encoder.handler(n,i))===u)break;Array.isArray(r)?a.push.apply(a,r):a.push(r)}if(!this._do_not_flush){for(;(r=this._encoder.handler(n,n.read()))!==u;)Array.isArray(r)?a.push.apply(a,r):a.push(r);this._encoder=null}return new Uint8Array(a)},b["UTF-8"]=function(e){return new C(e)},v["UTF-8"]=function(e){return new k(e)},"encoding-indexes"in t&&f.forEach((function(e){"Legacy single-byte encodings"===e.heading&&e.encodings.forEach((function(e){var t=e.name,r=j(t.toLowerCase());v[t]=function(e){return new E(r,e)},b[t]=function(e){return new S(r,e)}}))})),v.GBK=function(e){return new N(e)},b.GBK=function(e){return new I(e,!0)},b.gb18030=function(e){return new I(e)},v.gb18030=function(e){return new N(e)},b.Big5=function(e){return new T(e)},v.Big5=function(e){return new D(e)},b["EUC-JP"]=function(e){return new P(e)},v["EUC-JP"]=function(e){return new A(e)},b["ISO-2022-JP"]=function(e){return new R(e)},v["ISO-2022-JP"]=function(e){return new L(e)},b.Shift_JIS=function(e){return new B(e)},v.Shift_JIS=function(e){return new F(e)},b["EUC-KR"]=function(e){return new z(e)},v["EUC-KR"]=function(e){return new U(e)},b["UTF-16BE"]=function(e){return new W(!0,e)},v["UTF-16BE"]=function(e){return new G(!0,e)},b["UTF-16LE"]=function(e){return new W(!1,e)},v["UTF-16LE"]=function(e){return new G(!1,e)},b["x-user-defined"]=function(e){return new q(e)},v["x-user-defined"]=function(e){return new V(e)},t.TextEncoder||(t.TextEncoder=O),t.TextDecoder||(t.TextDecoder=M),e.exports&&(e.exports={TextEncoder:t.TextEncoder,TextDecoder:t.TextDecoder,EncodingIndexes:t["encoding-indexes"]})}(this||{})},2089:function(e,t){},2090:function(e,t,r){"use strict";var n=r(2091).Buffer,a=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!==typeof t&&(n.isEncoding===a||!a(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:return this.write=h,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function i(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!==(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function u(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},s.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var a=i(t[n]);if(a>=0)return a>0&&(e.lastNeed=a-1),a;if(--n<r||-2===a)return 0;if(a=i(t[n]),a>=0)return a>0&&(e.lastNeed=a-2),a;if(--n<r||-2===a)return 0;if(a=i(t[n]),a>=0)return a>0&&(2===a?a=0:e.lastNeed=a-3),a;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},2091:function(e,t,r){var n=r(248),a=n.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function i(e,t,r){return a(e,t,r)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=n:(s(n,t),t.Buffer=i),i.prototype=Object.create(a.prototype),s(a,i),i.from=function(e,t,r){if("number"===typeof e)throw new TypeError("Argument must not be a number");return a(e,t,r)},i.alloc=function(e,t,r){if("number"!==typeof e)throw new TypeError("Argument must be a number");var n=a(e);return void 0!==t?"string"===typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},i.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return a(e)},i.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},2092:function(e,t,r){!function(){function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function r(){return 1}e.exports?e.exports=s:this.LRUCache=s;var n=!1;function a(e){n||"string"===typeof e||"number"===typeof e||(n=!0,console.error(new TypeError("LRU: key must be a string or number. Almost certainly a bug! "+typeof e).stack))}function s(e){if(!(this instanceof s))return new s(e);"number"===typeof e&&(e={max:e}),e||(e={}),this._max=e.max,(!this._max||"number"!==typeof this._max||this._max<=0)&&(this._max=1/0),this._lengthCalculator=e.length||r,"function"!==typeof this._lengthCalculator&&(this._lengthCalculator=r),this._allowStale=e.stale||!1,this._maxAge=e.maxAge||null,this._dispose=e.dispose,this.reset()}function i(e,t,r){a(t);var n=e._cache[t];return n&&(o(e,n)?(u(e,n),e._allowStale||(n=void 0)):r&&function(e,t){l(e,t),t.lu=e._mru++,e._lruList[t.lu]=t}(e,n),n&&(n=n.value)),n}function o(e,t){if(!t||!t.maxAge&&!e._maxAge)return!1;var r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e._maxAge&&r>e._maxAge}function c(e){for(;e._lru<e._mru&&e._length>e._max;)u(e,e._lruList[e._lru])}function l(e,t){for(delete e._lruList[t.lu];e._lru<e._mru&&!e._lruList[e._lru];)e._lru++}function u(e,t){t&&(e._dispose&&e._dispose(t.key,t.value),e._length-=t.length,e._itemCount--,delete e._cache[t.key],l(e,t))}function d(e,t,r,n,a,s){this.key=e,this.value=t,this.lu=r,this.length=n,this.now=a,s&&(this.maxAge=s)}Object.defineProperty(s.prototype,"max",{set:function(e){(!e||"number"!==typeof e||e<=0)&&(e=1/0),this._max=e,this._length>this._max&&c(this)},get:function(){return this._max},enumerable:!0}),Object.defineProperty(s.prototype,"lengthCalculator",{set:function(e){if("function"!==typeof e)for(var t in this._lengthCalculator=r,this._length=this._itemCount,this._cache)this._cache[t].length=1;else for(var t in this._lengthCalculator=e,this._length=0,this._cache)this._cache[t].length=this._lengthCalculator(this._cache[t].value),this._length+=this._cache[t].length;this._length>this._max&&c(this)},get:function(){return this._lengthCalculator},enumerable:!0}),Object.defineProperty(s.prototype,"length",{get:function(){return this._length},enumerable:!0}),Object.defineProperty(s.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0}),s.prototype.forEach=function(e,t){t=t||this;for(var r=0,n=this._itemCount,a=this._mru-1;a>=0&&r<n;a--)if(this._lruList[a]){r++;var s=this._lruList[a];o(this,s)&&(u(this,s),this._allowStale||(s=void 0)),s&&e.call(t,s.value,s.key,this)}},s.prototype.keys=function(){for(var e=new Array(this._itemCount),t=0,r=this._mru-1;r>=0&&t<this._itemCount;r--)if(this._lruList[r]){var n=this._lruList[r];e[t++]=n.key}return e},s.prototype.values=function(){for(var e=new Array(this._itemCount),t=0,r=this._mru-1;r>=0&&t<this._itemCount;r--)if(this._lruList[r]){var n=this._lruList[r];e[t++]=n.value}return e},s.prototype.reset=function(){if(this._dispose&&this._cache)for(var e in this._cache)this._dispose(e,this._cache[e].value);this._cache=Object.create(null),this._lruList=Object.create(null),this._mru=0,this._lru=0,this._length=0,this._itemCount=0},s.prototype.dump=function(){for(var e=[],t=0,r=this._mru-1;r>=0&&t<this._itemCount;r--)if(this._lruList[r]){var n=this._lruList[r];o(this,n)||(++t,e.push({k:n.key,v:n.value,e:n.now+(n.maxAge||0)}))}return e},s.prototype.dumpLru=function(){return this._lruList},s.prototype.set=function(e,r,n){n=n||this._maxAge,a(e);var s=n?Date.now():0,i=this._lengthCalculator(r);if(t(this._cache,e))return i>this._max?(u(this,this._cache[e]),!1):(this._dispose&&this._dispose(e,this._cache[e].value),this._cache[e].now=s,this._cache[e].maxAge=n,this._cache[e].value=r,this._length+=i-this._cache[e].length,this._cache[e].length=i,this.get(e),this._length>this._max&&c(this),!0);var o=new d(e,r,this._mru++,i,s,n);return o.length>this._max?(this._dispose&&this._dispose(e,r),!1):(this._length+=o.length,this._lruList[o.lu]=this._cache[e]=o,this._itemCount++,this._length>this._max&&c(this),!0)},s.prototype.has=function(e){return a(e),!!t(this._cache,e)&&!o(this,this._cache[e])},s.prototype.get=function(e){return a(e),i(this,e,!0)},s.prototype.peek=function(e){return a(e),i(this,e,!1)},s.prototype.pop=function(){var e=this._lruList[this._lru];return u(this,e),e||null},s.prototype.del=function(e){a(e),u(this,this._cache[e])},s.prototype.load=function(e){this.reset();for(var t=Date.now(),r=e.length-1;r>=0;r--){var n=e[r];a(n.k);var s=n.e||0;if(0===s)this.set(n.k,n.v);else{var i=s-t;i>0&&this.set(n.k,n.v,i)}}}}()},2093:function(e,t,r){var n=r(2094),a=r(2095),s={};function i(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:n.merge(e,t)}r(2096).forEach((function(e){if("all"===e.polygon)s[e.key]=!0;else{var t="whitelist"===e.polygon?"included_values":"excluded_values",r={};e.values.forEach((function(e){r[e]=!0})),s[e.key]={},s[e.key][t]=r}}));var o;function c(e){for(var t,r,n,a,s,i,o=function(e){return e[0]},c=function(e){return e[e.length-1]},l=function(e,t){return void 0!==e&&void 0!==t&&e.id===t.id},u=[];e.length;)for(t=e.pop().nodes.slice(),u.push(t);e.length&&!l(o(t),c(t));){for(r=o(t),n=c(t),a=0;a<e.length;a++){if(l(n,o(i=e[a].nodes))){s=t.push,i=i.slice(1);break}if(l(n,c(i))){s=t.push,i=i.slice(0,-1).reverse();break}if(l(r,c(i))){s=t.unshift,i=i.slice(0,-1);break}if(l(r,o(i))){s=t.unshift,i=i.slice(1).reverse();break}i=s=null}if(!i)break;e.splice(a,1),s.apply(t,i)}return u}o=function(e,t,r){return t=n.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:s,deduplicator:i},t),"undefined"!==typeof XMLDocument&&e instanceof XMLDocument||"undefined"===typeof XMLDocument&&e.childNodes?function(e){var t,r,a=new Array,s=new Array,i=new Array;function c(e,t,r){e.hasAttribute(r)&&(t[r]=e.getAttribute(r))}function l(e,t){var r=n.clone(e);c(t,r,"lat"),c(t,r,"lon"),r.__is_center_placeholder=!0,a.push(r)}function u(e,t){var r=n.clone(e);function i(e,t,n){var s={type:"node",id:"_"+r.type+"/"+r.id+"bounds"+n,lat:e,lon:t};r.nodes.push(s.id),a.push(s)}r.nodes=[],i(t.getAttribute("minlat"),t.getAttribute("minlon"),1),i(t.getAttribute("maxlat"),t.getAttribute("minlon"),2),i(t.getAttribute("maxlat"),t.getAttribute("maxlon"),3),i(t.getAttribute("minlat"),t.getAttribute("maxlon"),4),r.nodes.push(r.nodes[0]),r.__is_bounds_placeholder=!0,s.push(r)}return n.each(e.getElementsByTagName("node"),(function(e,t){var r={};n.each(e.getElementsByTagName("tag"),(function(e){r[e.getAttribute("k")]=e.getAttribute("v")}));var s={type:"node"};c(e,s,"id"),c(e,s,"lat"),c(e,s,"lon"),c(e,s,"version"),c(e,s,"timestamp"),c(e,s,"changeset"),c(e,s,"uid"),c(e,s,"user"),n.isEmpty(r)||(s.tags=r),a.push(s)})),n.each(e.getElementsByTagName("way"),(function(e,i){var o={},d=[];n.each(e.getElementsByTagName("tag"),(function(e){o[e.getAttribute("k")]=e.getAttribute("v")}));var h=!1;n.each(e.getElementsByTagName("nd"),(function(e,t){var r;(r=e.getAttribute("ref"))&&(d[t]=r),!h&&e.getAttribute("lat")&&(h=!0)}));var p={type:"way"};c(e,p,"id"),c(e,p,"version"),c(e,p,"timestamp"),c(e,p,"changeset"),c(e,p,"uid"),c(e,p,"user"),d.length>0&&(p.nodes=d),n.isEmpty(o)||(p.tags=o),(t=e.getElementsByTagName("center")[0])&&l(p,t),h?function(e,t){function r(e,t,r){var n={type:"node",id:r,lat:e,lon:t};return a.push(n),n.id}n.isArray(e.nodes)||(e.nodes=[],n.each(t,(function(t,r){e.nodes.push("_anonymous@"+t.getAttribute("lat")+"/"+t.getAttribute("lon"))})));n.each(t,(function(t,n){t.getAttribute("lat")&&r(t.getAttribute("lat"),t.getAttribute("lon"),e.nodes[n])}))}(p,e.getElementsByTagName("nd")):(r=e.getElementsByTagName("bounds")[0])&&u(p,r),s.push(p)})),n.each(e.getElementsByTagName("relation"),(function(e,o){var d={},h=[];n.each(e.getElementsByTagName("tag"),(function(e){d[e.getAttribute("k")]=e.getAttribute("v")}));var p=!1;n.each(e.getElementsByTagName("member"),(function(e,t){h[t]={},c(e,h[t],"ref"),c(e,h[t],"role"),c(e,h[t],"type"),(!p&&"node"==h[t].type&&e.getAttribute("lat")||"way"==h[t].type&&e.getElementsByTagName("nd").length>0)&&(p=!0)}));var f={type:"relation"};c(e,f,"id"),c(e,f,"version"),c(e,f,"timestamp"),c(e,f,"changeset"),c(e,f,"uid"),c(e,f,"user"),h.length>0&&(f.members=h),n.isEmpty(d)||(f.tags=d),(t=e.getElementsByTagName("center")[0])&&l(f,t),p?function(e,t){function r(e,t,r){var n={type:"node",id:r,lat:e,lon:t};a.push(n)}function i(e,t){if(!s.some((function(e){return"way"==e.type&&e.id==t}))){var r={type:"way",id:t,nodes:[]};n.each(e,(function(e){e.getAttribute("lat")?i(e.getAttribute("lat"),e.getAttribute("lon")):r.nodes.push(void 0)})),s.push(r)}function i(e,t){var n={type:"node",id:"_anonymous@"+e+"/"+t,lat:e,lon:t};r.nodes.push(n.id),a.push(n)}}n.each(t,(function(t,n){"node"==e.members[n].type?t.getAttribute("lat")&&r(t.getAttribute("lat"),t.getAttribute("lon"),e.members[n].ref):"way"==e.members[n].type&&t.getElementsByTagName("nd").length>0&&(e.members[n].ref="_fullGeom"+e.members[n].ref,i(t.getElementsByTagName("nd"),e.members[n].ref))}))}(f,e.getElementsByTagName("member")):(r=e.getElementsByTagName("bounds")[0])&&u(f,r),i.push(f)})),o(a,s,i)}(e):function(e){var t=new Array,r=new Array,a=new Array;function s(e){var r=n.clone(e);r.lat=e.center.lat,r.lon=e.center.lon,r.__is_center_placeholder=!0,t.push(r)}function i(e){var a=n.clone(e);function s(e,r,n){var s={type:"node",id:"_"+a.type+"/"+a.id+"bounds"+n,lat:e,lon:r};a.nodes.push(s.id),t.push(s)}a.nodes=[],s(a.bounds.minlat,a.bounds.minlon,1),s(a.bounds.maxlat,a.bounds.minlon,2),s(a.bounds.maxlat,a.bounds.maxlon,3),s(a.bounds.minlat,a.bounds.maxlon,4),a.nodes.push(a.nodes[0]),a.__is_bounds_placeholder=!0,r.push(a)}function c(e){n.isArray(e.nodes)||(e.nodes=e.geometry.map((function(e){return null!==e?"_anonymous@"+e.lat+"/"+e.lon:"_anonymous@unknown_location"}))),e.geometry.forEach((function(r,n){r&&function(e,r,n){var a={type:"node",id:n,lat:e,lon:r};t.push(a)}(r.lat,r.lon,e.nodes[n])}))}function l(e){function n(e,n){if(!r.some((function(e){return"way"==e.type&&e.id==n}))){var a={type:"way",id:n,nodes:[]};e.forEach((function(e){e?function(e,r){var n={type:"node",id:"_anonymous@"+e+"/"+r,lat:e,lon:r};a.nodes.push(n.id),t.push(n)}(e.lat,e.lon):a.nodes.push(void 0)})),r.push(a)}}e.members.forEach((function(e,r){"node"==e.type?e.lat&&function(e,r,n){var a={type:"node",id:n,lat:e,lon:r};t.push(a)}(e.lat,e.lon,e.ref):"way"==e.type&&e.geometry&&(e.ref="_fullGeom"+e.ref,n(e.geometry,e.ref))}))}for(var u=0;u<e.elements.length;u++)switch(e.elements[u].type){case"node":var d=e.elements[u];t.push(d);break;case"way":var h=n.clone(e.elements[u]);h.nodes=n.clone(h.nodes),r.push(h),h.center&&s(h),h.geometry?c(h):h.bounds&&i(h);break;case"relation":var p=n.clone(e.elements[u]);p.members=n.clone(p.members),a.push(p);var f=p.members&&p.members.some((function(e){return"node"==e.type&&e.lat||"way"==e.type&&e.geometry&&e.geometry.length>0}));p.center&&s(p),f?l(p):p.bounds&&i(p)}return o(t,r,a)}(e);function o(e,s,i){function o(e,r){if("object"!==typeof r&&(r={}),"function"===typeof t.uninterestingTags)return!t.uninterestingTags(e,r);for(var n in e)if(!0!==t.uninterestingTags[n]&&!0!==r[n]&&r[n]!==e[n])return!0;return!1}function u(e){var t={timestamp:e.timestamp,version:e.version,changeset:e.changeset,user:e.user,uid:e.uid};for(var r in t)void 0===t[r]&&delete t[r];return t}for(var d=new Object,h=new Object,p=0;p<e.length;p++){void 0!==d[(_=e[p]).id]&&(_=t.deduplicator(_,d[_.id])),d[_.id]=_,"undefined"!=typeof _.tags&&o(_.tags)&&(h[_.id]=!0)}for(p=0;p<i.length;p++)if(n.isArray(i[p].members))for(var f=0;f<i[p].members.length;f++)"node"==i[p].members[f].type&&(h[i[p].members[f].ref]=!0);var m=new Object,g=new Object;for(p=0;p<s.length;p++){var y=s[p];if(m[y.id]&&(y=t.deduplicator(y,m[y.id])),m[y.id]=y,n.isArray(y.nodes))for(f=0;f<y.nodes.length;f++)"object"!==typeof y.nodes[f]&&(g[y.nodes[f]]=!0,y.nodes[f]=d[y.nodes[f]])}var b=new Array;for(var v in d){var _=d[v];g[v]&&!h[v]||b.push(_)}var w=new Array;for(p=0;p<i.length;p++){w[(M=i[p]).id]&&(M=t.deduplicator(M,w[M.id])),w[M.id]=M}var j,x={node:{},way:{},relation:{}};for(var v in w){var M=w[v];if(n.isArray(M.members))for(f=0;f<M.members.length;f++){var O=M.members[f].type,k=M.members[f].ref;"number"!==typeof k&&(k=k.replace("_fullGeom","")),x[O]?("undefined"===typeof x[O][k]&&(x[O][k]=[]),x[O][k].push({role:M.members[f].role,rel:M.id,reltags:M.tags})):t.verbose&&console.warn("Relation",M.type+"/"+M.id,"member",O+"/"+k,"ignored because it has an invalid type")}else t.verbose&&console.warn("Relation",M.type+"/"+M.id,"ignored because it has no members")}var C=[];for(p=0;p<b.length;p++)if("undefined"!=typeof b[p].lon&&"undefined"!=typeof b[p].lat){var E={type:"Feature",id:b[p].type+"/"+b[p].id,properties:{type:b[p].type,id:b[p].id,tags:b[p].tags||{},relations:x.node[b[p].id]||[],meta:u(b[p])},geometry:{type:"Point",coordinates:[+b[p].lon,+b[p].lat]}};b[p].__is_center_placeholder&&(E.properties.geometry="center"),r?r(E):C.push(E)}else t.verbose&&console.warn("POI",b[p].type+"/"+b[p].id,"ignored because it lacks coordinates");var S=[],N=[];for(p=0;p<i.length;p++)if(w[i[p].id]===i[p]){if("undefined"!=typeof i[p].tags&&("route"==i[p].tags.type||"waterway"==i[p].tags.type)){if(!n.isArray(i[p].members)){t.verbose&&console.warn("Route",i[p].type+"/"+i[p].id,"ignored because it has no members");continue}if(i[p].members.forEach((function(e){m[e.ref]&&!o(m[e.ref].tags)&&(m[e.ref].is_skippablerelationmember=!0)})),!1===(E=I(i[p]))){t.verbose&&console.warn("Route relation",i[p].type+"/"+i[p].id,"ignored because it has invalid geometry");continue}function I(e){var r,a,s=!1;r=(r=e.members.filter((function(e){return"way"===e.type}))).map((function(r){var n=m[r.ref];return void 0===n||void 0===n.nodes?(t.verbose&&console.warn("Route "+e.type+"/"+e.id,"tainted by a missing or incomplete  way",r.type+"/"+r.ref),void(s=!0)):{id:r.ref,role:r.role,way:n,nodes:n.nodes.filter((function(n){return void 0!==n||(s=!0,t.verbose&&console.warn("Route",e.type+"/"+e.id,"tainted by a way",r.type+"/"+r.ref,"with a missing node"),!1)}))}})),a=c(r=n.compact(r));var i;if(i=n.compact(a.map((function(e){return n.compact(e.map((function(e){return[+e.lon,+e.lat]})))}))),0==i.length)return t.verbose&&console.warn("Route",e.type+"/"+e.id,"contains no coordinates"),!1;var o={type:"Feature",id:e.type+"/"+e.id,properties:{type:e.type,id:e.id,tags:e.tags||{},relations:x[e.type][e.id]||[],meta:u(e)},geometry:{type:1===i.length?"LineString":"MultiLineString",coordinates:1===i.length?i[0]:i}};return s&&(t.verbose&&console.warn("Route",e.type+"/"+e.id,"is tainted"),o.properties.tainted=!0),o}r?r(a(E)):N.push(E)}if("undefined"!=typeof i[p].tags&&("multipolygon"==i[p].tags.type||"boundary"==i[p].tags.type)){if(!n.isArray(i[p].members)){t.verbose&&console.warn("Multipolygon",i[p].type+"/"+i[p].id,"ignored because it has no members");continue}var D=0;for(f=0;f<i[p].members.length;f++)"outer"==i[p].members[f].role?D++:t.verbose&&"inner"!=i[p].members[f].role&&console.warn("Multipolygon",i[p].type+"/"+i[p].id,"member",i[p].members[f].type+"/"+i[p].members[f].ref,'ignored because it has an invalid role: "'+i[p].members[f].role+'"');if(i[p].members.forEach((function(e){m[e.ref]&&("outer"!==e.role||o(m[e.ref].tags,i[p].tags)||(m[e.ref].is_skippablerelationmember=!0),"inner"!==e.role||o(m[e.ref].tags)||(m[e.ref].is_skippablerelationmember=!0))})),0==D){t.verbose&&console.warn("Multipolygon relation",i[p].type+"/"+i[p].id,"ignored because it has no outer ways");continue}var T=!1;1!=D||o(i[p].tags,{type:!0})||(T=!0);E=null;if(T){var A=i[p].members.filter((function(e){return"outer"===e.role}))[0];if(void 0===(A=m[A.ref])){t.verbose&&console.warn("Multipolygon relation",i[p].type+"/"+i[p].id,"ignored because outer way",A.type+"/"+A.ref,"is missing");continue}A.is_skippablerelationmember=!0,E=P(A,i[p])}else E=P(i[p],i[p]);if(!1===E){t.verbose&&console.warn("Multipolygon relation",i[p].type+"/"+i[p].id,"ignored because it has invalid geometry");continue}function P(e,r){var a,s,i,o,l=!1,d=T?"way":"relation",h="number"===typeof e.id?e.id:+e.id.replace("_fullGeom","");function p(e){var t,r=function(e,t){for(var r=0;r<t.length;r++)if(a(t[r],e))return!0;return!1},n=function(e){return e.map((function(e){return[+e.lat,+e.lon]}))},a=function(e,t){for(var r=e[0],n=e[1],a=!1,s=0,i=t.length-1;s<t.length;i=s++){var o=t[s][0],c=t[s][1],l=t[i][0],u=t[i][1];c>n!=u>n&&r<(l-o)*(n-c)/(u-c)+o&&(a=!a)}return a};for(e=n(e),t=0;t<s.length;t++)if(r(n(s[t]),e))return t}a=(a=r.members.filter((function(e){return"way"===e.type}))).map((function(e){var r=m[e.ref];return void 0===r||void 0===r.nodes?(t.verbose&&console.warn("Multipolygon",d+"/"+h,"tainted by a missing or incomplete way",e.type+"/"+e.ref),void(l=!0)):{id:e.ref,role:e.role||"outer",way:r,nodes:r.nodes.filter((function(r){return void 0!==r||(l=!0,t.verbose&&console.warn("Multipolygon",d+"/"+h,"tainted by a way",e.type+"/"+e.ref,"with a missing node"),!1)}))}})),a=n.compact(a),s=c(a.filter((function(e){return"outer"===e.role}))),i=c(a.filter((function(e){return"inner"===e.role}))),o=s.map((function(e){return[e]}));for(var f=0;f<i.length;f++){var g=p(i[f]);void 0!==g?o[g].push(i[f]):t.verbose&&console.warn("Multipolygon",d+"/"+h,"contains an inner ring with no containing outer")}var y=[];if(y=n.compact(o.map((function(e){var r=n.compact(e.map((function(e){if(!(e.length<4))return n.compact(e.map((function(e){return[+e.lon,+e.lat]})));t.verbose&&console.warn("Multipolygon",d+"/"+h,"contains a ring with less than four nodes")})));if(0!=r.length)return r;t.verbose&&console.warn("Multipolygon",d+"/"+h,"contains an empty ring cluster")}))),0==y.length)return t.verbose&&console.warn("Multipolygon",d+"/"+h,"contains no coordinates"),!1;var b="MultiPolygon";1===y.length&&(b="Polygon",y=y[0]);var v={type:"Feature",id:e.type+"/"+h,properties:{type:e.type,id:h,tags:e.tags||{},relations:x[e.type][e.id]||[],meta:u(e)},geometry:{type:b,coordinates:y}};return l&&(t.verbose&&console.warn("Multipolygon",d+"/"+h,"is tainted"),v.properties.tainted=!0),v}r?r(a(E)):N.push(E)}}for(p=0;p<s.length;p++)if(m[s[p].id]===s[p])if(n.isArray(s[p].nodes)){if(!s[p].is_skippablerelationmember){"number"!==typeof s[p].id&&(s[p].id=+s[p].id.replace("_fullGeom","")),s[p].tainted=!1,s[p].hidden=!1;var L=new Array;for(f=0;f<s[p].nodes.length;f++)"object"==typeof s[p].nodes[f]?L.push([+s[p].nodes[f].lon,+s[p].nodes[f].lat]):(t.verbose&&console.warn("Way",s[p].type+"/"+s[p].id,"is tainted by an invalid node"),s[p].tainted=!0);if(L.length<=1)t.verbose&&console.warn("Way",s[p].type+"/"+s[p].id,"ignored because it contains too few nodes");else{var R="LineString";"undefined"!=typeof s[p].nodes[0]&&"undefined"!=typeof s[p].nodes[s[p].nodes.length-1]&&s[p].nodes[0].id===s[p].nodes[s[p].nodes.length-1].id&&("undefined"!=typeof s[p].tags&&l(s[p].tags)||s[p].__is_bounds_placeholder)&&(R="Polygon",L=[L]);E={type:"Feature",id:s[p].type+"/"+s[p].id,properties:{type:s[p].type,id:s[p].id,tags:s[p].tags||{},relations:x.way[s[p].id]||[],meta:u(s[p])},geometry:{type:R,coordinates:L}};s[p].tainted&&(t.verbose&&console.warn("Way",s[p].type+"/"+s[p].id,"is tainted"),E.properties.tainted=!0),s[p].__is_bounds_placeholder&&(E.properties.geometry="bounds"),r?r(a(E)):"LineString"==R?S.push(E):N.push(E)}}}else t.verbose&&console.warn("Way",s[p].type+"/"+s[p].id,"ignored because it has no nodes");return!!r||((j={type:"FeatureCollection",features:[]}).features=j.features.concat(N),j.features=j.features.concat(S),j.features=j.features.concat(C),t.flatProperties&&j.features.forEach((function(e){e.properties=n.merge(e.properties.meta,e.properties.tags,{id:e.properties.type+"/"+e.properties.id})})),j=a(j))}function l(e){var r=t.polygonFeatures;if("function"===typeof r)return r(e);if("no"===e.area)return!1;for(var n in e){var a=e[n],s=r[n];if("undefined"!==typeof s&&"no"!==a){if(!0===s)return!0;if(s.included_values&&!0===s.included_values[a])return!0;if(s.excluded_values&&!0!==s.excluded_values[a])return!0}}return!1}},o.toGeojson=o,e.exports=o},2094:function(e,t,r){(function(e,r){(function(){var n,a="__lodash_hash_undefined__",s=1,i=2,o=1/0,c=9007199254740991,l="[object Arguments]",u="[object Array]",d="[object Boolean]",h="[object Date]",p="[object Error]",f="[object Function]",m="[object GeneratorFunction]",g="[object Map]",y="[object Number]",b="[object Object]",v="[object Promise]",_="[object RegExp]",w="[object Set]",j="[object String]",x="[object Symbol]",M="[object WeakMap]",O="[object ArrayBuffer]",k="[object DataView]",C="[object Float32Array]",E="[object Float64Array]",S="[object Int8Array]",N="[object Int16Array]",I="[object Int32Array]",D="[object Uint8Array]",T="[object Uint8ClampedArray]",A="[object Uint16Array]",P="[object Uint32Array]",L=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,R=/^\w*$/,F=/^\./,B=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,U=/\\(\\)?/g,z=/\w*$/,Y=/^\[object .+?Constructor\]$/,G=/^(?:0|[1-9]\d*)$/,W={};W[C]=W[E]=W[S]=W[N]=W[I]=W[D]=W[T]=W[A]=W[P]=!0,W[l]=W[u]=W[O]=W[d]=W[k]=W[h]=W[p]=W[f]=W[g]=W[y]=W[b]=W[_]=W[w]=W[j]=W[M]=!1;var V={};V[l]=V[u]=V[O]=V[k]=V[d]=V[h]=V[C]=V[E]=V[S]=V[N]=V[I]=V[g]=V[y]=V[b]=V[_]=V[w]=V[j]=V[x]=V[D]=V[T]=V[A]=V[P]=!0,V[p]=V[f]=V[M]=!1;var q="object"==typeof e&&e&&e.Object===Object&&e,H="object"==typeof self&&self&&self.Object===Object&&self,K=q||H||Function("return this")(),Z=t&&!t.nodeType&&t,J=Z&&"object"==typeof r&&r&&!r.nodeType&&r,Q=J&&J.exports===Z,X=Q&&q.process,$=function(){try{return X&&X.binding("util")}catch(e){}}(),ee=$&&$.isTypedArray;function te(e,t){return e.set(t[0],t[1]),e}function re(e,t){return e.add(t),e}function ne(e,t){for(var r=-1,n=e?e.length:0;++r<n&&!1!==t(e[r],r,e););return e}function ae(e,t,r,n){var a=-1,s=e?e.length:0;for(n&&s&&(r=e[++a]);++a<s;)r=t(r,e[a],a,e);return r}function se(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function ie(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(r){}return t}function oe(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function ce(e,t){return function(r){return e(t(r))}}function le(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var ue=Array.prototype,de=Function.prototype,he=Object.prototype,pe=K["__core-js_shared__"],fe=function(){var e=/[^.]+$/.exec(pe&&pe.keys&&pe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),me=de.toString,ge=he.hasOwnProperty,ye=me.call(Object),be=he.toString,ve=RegExp("^"+me.call(ge).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_e=Q?K.Buffer:n,we=K.Symbol,je=K.Uint8Array,xe=ce(Object.getPrototypeOf,Object),Me=Object.create,Oe=he.propertyIsEnumerable,ke=ue.splice,Ce=Object.getOwnPropertySymbols,Ee=_e?_e.isBuffer:n,Se=ce(Object.keys,Object),Ne=Math.max,Ie=wt(K,"DataView"),De=wt(K,"Map"),Te=wt(K,"Promise"),Ae=wt(K,"Set"),Pe=wt(K,"WeakMap"),Le=wt(Object,"create"),Re=!Oe.call({valueOf:1},"valueOf"),Fe=It(Ie),Be=It(De),Ue=It(Te),ze=It(Ae),Ye=It(Pe),Ge=we?we.prototype:n,We=Ge?Ge.valueOf:n,Ve=Ge?Ge.toString:n;function qe(){}function He(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ke(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ze(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Je(e){var t=-1,r=e?e.length:0;for(this.__data__=new Ze;++t<r;)this.add(e[t])}function Qe(e){this.__data__=new Ke(e)}function Xe(e,t){var r=Lt(e)||Pt(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,a=!!n;for(var s in e)!t&&!ge.call(e,s)||a&&("length"==s||Mt(s,n))||r.push(s);return r}function $e(e,t,r){(r!==n&&!At(e[t],r)||"number"==typeof t&&r===n&&!(t in e))&&(e[t]=r)}function et(e,t,r){var a=e[t];ge.call(e,t)&&At(a,r)&&(r!==n||t in e)||(e[t]=r)}function tt(e,t){for(var r=e.length;r--;)if(At(e[r][0],t))return r;return-1}function rt(e,t,r,a,s,i,o){var c;if(a&&(c=i?a(e,s,i,o):a(e)),c!==n)return c;if(!Yt(e))return e;var u=Lt(e);if(u){if(c=function(e){var t=e.length,r=e.constructor(t);t&&"string"==typeof e[0]&&ge.call(e,"index")&&(r.index=e.index,r.input=e.input);return r}(e),!t)return gt(e,c)}else{var p=xt(e),v=p==f||p==m;if(Bt(e))return function(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}(e,t);if(p==b||p==l||v&&!i){if(ie(e))return i?e:{};if(c=function(e){return"function"!=typeof e.constructor||kt(e)?{}:(t=xe(e),Yt(t)?Me(t):{});var t}(v?{}:e),!t)return function(e,t){return yt(e,jt(e),t)}(e,function(e,t){return e&&yt(t,Xt(t),e)}(c,e))}else{if(!V[p])return i?e:{};c=function(e,t,r,n){var a=e.constructor;switch(t){case O:return mt(e);case d:case h:return new a(+e);case k:return function(e,t){var r=t?mt(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,n);case C:case E:case S:case N:case I:case D:case T:case A:case P:return function(e,t){var r=t?mt(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,n);case g:return function(e,t,r){var n=t?r(oe(e),!0):oe(e);return ae(n,te,new e.constructor)}(e,n,r);case y:case j:return new a(e);case _:return function(e){var t=new e.constructor(e.source,z.exec(e));return t.lastIndex=e.lastIndex,t}(e);case w:return function(e,t,r){var n=t?r(le(e),!0):le(e);return ae(n,re,new e.constructor)}(e,n,r);case x:return s=e,We?Object(We.call(s)):{}}var s}(e,p,rt,t)}}o||(o=new Qe);var M=o.get(e);if(M)return M;if(o.set(e,c),!u)var L=r?function(e){return function(e,t,r){var n=t(e);return Lt(e)?n:function(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}(n,r(e))}(e,Xt,jt)}(e):Xt(e);return ne(L||e,(function(n,s){L&&(n=e[s=n]),et(c,s,rt(n,t,r,a,s,e,o))})),c}He.prototype.clear=function(){this.__data__=Le?Le(null):{}},He.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},He.prototype.get=function(e){var t=this.__data__;if(Le){var r=t[e];return r===a?n:r}return ge.call(t,e)?t[e]:n},He.prototype.has=function(e){var t=this.__data__;return Le?t[e]!==n:ge.call(t,e)},He.prototype.set=function(e,t){return this.__data__[e]=Le&&t===n?a:t,this},Ke.prototype.clear=function(){this.__data__=[]},Ke.prototype.delete=function(e){var t=this.__data__,r=tt(t,e);return!(r<0)&&(r==t.length-1?t.pop():ke.call(t,r,1),!0)},Ke.prototype.get=function(e){var t=this.__data__,r=tt(t,e);return r<0?n:t[r][1]},Ke.prototype.has=function(e){return tt(this.__data__,e)>-1},Ke.prototype.set=function(e,t){var r=this.__data__,n=tt(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},Ze.prototype.clear=function(){this.__data__={hash:new He,map:new(De||Ke),string:new He}},Ze.prototype.delete=function(e){return _t(this,e).delete(e)},Ze.prototype.get=function(e){return _t(this,e).get(e)},Ze.prototype.has=function(e){return _t(this,e).has(e)},Ze.prototype.set=function(e,t){return _t(this,e).set(e,t),this},Je.prototype.add=Je.prototype.push=function(e){return this.__data__.set(e,a),this},Je.prototype.has=function(e){return this.__data__.has(e)},Qe.prototype.clear=function(){this.__data__=new Ke},Qe.prototype.delete=function(e){return this.__data__.delete(e)},Qe.prototype.get=function(e){return this.__data__.get(e)},Qe.prototype.has=function(e){return this.__data__.has(e)},Qe.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Ke){var n=r.__data__;if(!De||n.length<199)return n.push([e,t]),this;r=this.__data__=new Ze(n)}return r.set(e,t),this};var nt,at,st=(nt=function(e,t){return e&&it(e,t,Xt)},function(e,t){if(null==e)return e;if(!Rt(e))return nt(e,t);for(var r=e.length,n=at?r:-1,a=Object(e);(at?n--:++n<r)&&!1!==t(a[n],n,a););return e}),it=function(e){return function(t,r,n){for(var a=-1,s=Object(t),i=n(t),o=i.length;o--;){var c=i[e?o:++a];if(!1===r(s[c],c,s))break}return t}}();function ot(e,t){for(var r=0,a=(t=Ot(t,e)?[t]:ft(t)).length;null!=e&&r<a;)e=e[Nt(t[r++])];return r&&r==a?e:n}function ct(e,t){return null!=e&&t in Object(e)}function lt(e,t,r,a,o){return e===t||(null==e||null==t||!Yt(e)&&!Gt(t)?e!==e&&t!==t:function(e,t,r,a,o,c){var f=Lt(e),m=Lt(t),v=u,M=u;f||(v=(v=xt(e))==l?b:v);m||(M=(M=xt(t))==l?b:M);var C=v==b&&!ie(e),E=M==b&&!ie(t),S=v==M;if(S&&!C)return c||(c=new Qe),f||Ht(e)?bt(e,t,r,a,o,c):function(e,t,r,n,a,o,c){switch(r){case k:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case O:return!(e.byteLength!=t.byteLength||!n(new je(e),new je(t)));case d:case h:case y:return At(+e,+t);case p:return e.name==t.name&&e.message==t.message;case _:case j:return e==t+"";case g:var l=oe;case w:var u=o&i;if(l||(l=le),e.size!=t.size&&!u)return!1;var f=c.get(e);if(f)return f==t;o|=s,c.set(e,t);var m=bt(l(e),l(t),n,a,o,c);return c.delete(e),m;case x:if(We)return We.call(e)==We.call(t)}return!1}(e,t,v,r,a,o,c);if(!(o&i)){var N=C&&ge.call(e,"__wrapped__"),I=E&&ge.call(t,"__wrapped__");if(N||I){var D=N?e.value():e,T=I?t.value():t;return c||(c=new Qe),r(D,T,a,o,c)}}if(!S)return!1;return c||(c=new Qe),function(e,t,r,a,s,o){var c=s&i,l=Xt(e),u=l.length,d=Xt(t),h=d.length;if(u!=h&&!c)return!1;var p=u;for(;p--;){var f=l[p];if(!(c?f in t:ge.call(t,f)))return!1}var m=o.get(e);if(m&&o.get(t))return m==t;var g=!0;o.set(e,t),o.set(t,e);var y=c;for(;++p<u;){var b=e[f=l[p]],v=t[f];if(a)var _=c?a(v,b,f,t,e,o):a(b,v,f,e,t,o);if(!(_===n?b===v||r(b,v,a,s,o):_)){g=!1;break}y||(y="constructor"==f)}if(g&&!y){var w=e.constructor,j=t.constructor;w==j||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof j&&j instanceof j||(g=!1)}return o.delete(e),o.delete(t),g}(e,t,r,a,o,c)}(e,t,lt,r,a,o))}function ut(e){return!(!Yt(e)||(t=e,fe&&fe in t))&&(Ut(e)||ie(e)?ve:Y).test(It(e));var t}function dt(e){return"function"==typeof e?e:null==e?tr:"object"==typeof e?Lt(e)?function(e,t){if(Ot(e)&&Ct(t))return Et(Nt(e),t);return function(r){var a=Jt(r,e);return a===n&&a===t?Qt(r,e):lt(t,a,n,s|i)}}(e[0],e[1]):function(e){var t=function(e){var t=Xt(e),r=t.length;for(;r--;){var n=t[r],a=e[n];t[r]=[n,a,Ct(a)]}return t}(e);if(1==t.length&&t[0][2])return Et(t[0][0],t[0][1]);return function(r){return r===e||function(e,t,r,a){var o=r.length,c=o,l=!a;if(null==e)return!c;for(e=Object(e);o--;){var u=r[o];if(l&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<c;){var d=(u=r[o])[0],h=e[d],p=u[1];if(l&&u[2]){if(h===n&&!(d in e))return!1}else{var f=new Qe;if(a)var m=a(h,p,d,e,t,f);if(!(m===n?lt(p,h,a,s|i,f):m))return!1}}return!0}(r,e,t)}}(e):nr(e)}function ht(e){if(!Yt(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=kt(e),r=[];for(var n in e)("constructor"!=n||!t&&ge.call(e,n))&&r.push(n);return r}function pt(e,t,r,a,s){if(e!==t){if(!Lt(t)&&!Ht(t))var i=ht(t);ne(i||t,(function(o,c){if(i&&(o=t[c=o]),Yt(o))s||(s=new Qe),function(e,t,r,a,s,i,o){var c=e[r],l=t[r],u=o.get(l);if(u)return void $e(e,r,u);var d=i?i(c,l,r+"",e,t,o):n,h=d===n;h&&(d=l,Lt(l)||Ht(l)?Lt(c)?d=c:Ft(c)?d=gt(c):(h=!1,d=rt(l,!0)):Wt(l)||Pt(l)?Pt(c)?d=Kt(c):!Yt(c)||a&&Ut(c)?(h=!1,d=rt(l,!0)):d=c:h=!1);h&&(o.set(l,d),s(d,l,a,i,o),o.delete(l));$e(e,r,d)}(e,t,c,r,pt,a,s);else{var l=a?a(e[c],o,c+"",e,t,s):n;l===n&&(l=o),$e(e,c,l)}}))}}function ft(e){return Lt(e)?e:St(e)}function mt(e){var t=new e.constructor(e.byteLength);return new je(t).set(new je(e)),t}function gt(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function yt(e,t,r,a){r||(r={});for(var s=-1,i=t.length;++s<i;){var o=t[s],c=a?a(r[o],e[o],o,r,e):n;et(r,o,c===n?e[o]:c)}return r}function bt(e,t,r,a,o,c){var l=o&i,u=e.length,d=t.length;if(u!=d&&!(l&&d>u))return!1;var h=c.get(e);if(h&&c.get(t))return h==t;var p=-1,f=!0,m=o&s?new Je:n;for(c.set(e,t),c.set(t,e);++p<u;){var g=e[p],y=t[p];if(a)var b=l?a(y,g,p,t,e,c):a(g,y,p,e,t,c);if(b!==n){if(b)continue;f=!1;break}if(m){if(!se(t,(function(e,t){if(!m.has(t)&&(g===e||r(g,e,a,o,c)))return m.add(t)}))){f=!1;break}}else if(g!==y&&!r(g,y,a,o,c)){f=!1;break}}return c.delete(e),c.delete(t),f}function vt(){var e=qe.iteratee||rr;return e=e===rr?dt:e,arguments.length?e(arguments[0],arguments[1]):e}function _t(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function wt(e,t){var r=function(e,t){return null==e?n:e[t]}(e,t);return ut(r)?r:n}var jt=Ce?ce(Ce,Object):ar,xt=function(e){return be.call(e)};function Mt(e,t){return!!(t=null==t?c:t)&&("number"==typeof e||G.test(e))&&e>-1&&e%1==0&&e<t}function Ot(e,t){if(Lt(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Vt(e))||(R.test(e)||!L.test(e)||null!=t&&e in Object(t))}function kt(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||he)}function Ct(e){return e===e&&!Yt(e)}function Et(e,t){return function(r){return null!=r&&(r[e]===t&&(t!==n||e in Object(r)))}}(Ie&&xt(new Ie(new ArrayBuffer(1)))!=k||De&&xt(new De)!=g||Te&&xt(Te.resolve())!=v||Ae&&xt(new Ae)!=w||Pe&&xt(new Pe)!=M)&&(xt=function(e){var t=be.call(e),r=t==b?e.constructor:n,a=r?It(r):n;if(a)switch(a){case Fe:return k;case Be:return g;case Ue:return v;case ze:return w;case Ye:return M}return t});var St=Tt((function(e){e=Zt(e);var t=[];return F.test(e)&&t.push(""),e.replace(B,(function(e,r,n,a){t.push(n?a.replace(U,"$1"):r||e)})),t}));function Nt(e){if("string"==typeof e||Vt(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}function It(e){if(null!=e){try{return me.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Dt(e,t){return(Lt(e)?ne:st)(e,vt(t,3))}function Tt(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],s=r.cache;if(s.has(a))return s.get(a);var i=e.apply(this,n);return r.cache=s.set(a,i),i};return r.cache=new(Tt.Cache||Ze),r}function At(e,t){return e===t||e!==e&&t!==t}function Pt(e){return Ft(e)&&ge.call(e,"callee")&&(!Oe.call(e,"callee")||be.call(e)==l)}Tt.Cache=Ze;var Lt=Array.isArray;function Rt(e){return null!=e&&zt(e.length)&&!Ut(e)}function Ft(e){return Gt(e)&&Rt(e)}var Bt=Ee||sr;function Ut(e){var t=Yt(e)?be.call(e):"";return t==f||t==m}function zt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}function Yt(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Gt(e){return!!e&&"object"==typeof e}function Wt(e){if(!Gt(e)||be.call(e)!=b||ie(e))return!1;var t=xe(e);if(null===t)return!0;var r=ge.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&me.call(r)==ye}function Vt(e){return"symbol"==typeof e||Gt(e)&&be.call(e)==x}var qt,Ht=ee?(qt=ee,function(e){return qt(e)}):function(e){return Gt(e)&&zt(e.length)&&!!W[be.call(e)]};function Kt(e){return yt(e,$t(e))}function Zt(e){return null==e?"":function(e){if("string"==typeof e)return e;if(Vt(e))return Ve?Ve.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}(e)}function Jt(e,t,r){var a=null==e?n:ot(e,t);return a===n?r:a}function Qt(e,t){return null!=e&&function(e,t,r){for(var n,a=-1,s=(t=Ot(t,e)?[t]:ft(t)).length;++a<s;){var i=Nt(t[a]);if(!(n=null!=e&&r(e,i)))break;e=e[i]}return n||!!(s=e?e.length:0)&&zt(s)&&Mt(i,s)&&(Lt(e)||Pt(e))}(e,t,ct)}function Xt(e){return Rt(e)?Xe(e):function(e){if(!kt(e))return Se(e);var t=[];for(var r in Object(e))ge.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}function $t(e){return Rt(e)?Xe(e,!0):ht(e)}var er=function(e){return t=function(t,r){var a=-1,s=r.length,i=s>1?r[s-1]:n,o=s>2?r[2]:n;for(i=e.length>3&&"function"==typeof i?(s--,i):n,o&&function(e,t,r){if(!Yt(r))return!1;var n=typeof t;return!!("number"==n?Rt(r)&&Mt(t,r.length):"string"==n&&t in r)&&At(r[t],e)}(r[0],r[1],o)&&(i=s<3?n:i,s=1),t=Object(t);++a<s;){var c=r[a];c&&e(t,c,a,i)}return t},r=Ne(r===n?t.length-1:r,0),function(){for(var e=arguments,n=-1,a=Ne(e.length-r,0),s=Array(a);++n<a;)s[n]=e[r+n];n=-1;for(var i=Array(r+1);++n<r;)i[n]=e[n];return i[r]=s,function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(t,this,i)};var t,r}((function(e,t,r){pt(e,t,r)}));function tr(e){return e}function rr(e){return dt("function"==typeof e?e:rt(e,!0))}function nr(e){return Ot(e)?(t=Nt(e),function(e){return null==e?n:e[t]}):function(e){return function(t){return ot(t,e)}}(e);var t}function ar(){return[]}function sr(){return!1}qe.compact=function(e){for(var t=-1,r=e?e.length:0,n=0,a=[];++t<r;){var s=e[t];s&&(a[n++]=s)}return a},qe.iteratee=rr,qe.keys=Xt,qe.keysIn=$t,qe.memoize=Tt,qe.merge=er,qe.property=nr,qe.toPlainObject=Kt,qe.clone=function(e){return rt(e,!1,!0)},qe.eq=At,qe.forEach=Dt,qe.get=Jt,qe.hasIn=Qt,qe.identity=tr,qe.isArguments=Pt,qe.isArray=Lt,qe.isArrayLike=Rt,qe.isArrayLikeObject=Ft,qe.isBuffer=Bt,qe.isEmpty=function(e){if(Rt(e)&&(Lt(e)||"string"==typeof e||"function"==typeof e.splice||Bt(e)||Pt(e)))return!e.length;var t=xt(e);if(t==g||t==w)return!e.size;if(Re||kt(e))return!Se(e).length;for(var r in e)if(ge.call(e,r))return!1;return!0},qe.isFunction=Ut,qe.isLength=zt,qe.isObject=Yt,qe.isObjectLike=Gt,qe.isPlainObject=Wt,qe.isSymbol=Vt,qe.isTypedArray=Ht,qe.stubArray=ar,qe.stubFalse=sr,qe.toString=Zt,qe.each=Dt,qe.VERSION="4.15.0",J&&((J.exports=qe)._=qe,Z._=qe)}).call(this)}).call(this,r(93),r(2056)(e))},2095:function(e,t){function r(e,t){if(0!==e.length){n(e[0],t);for(var r=1;r<e.length;r++)n(e[r],!t)}}function n(e,t){for(var r=0,n=0,a=0,s=e.length,i=s-1;a<s;i=a++){var o=(e[a][0]-e[i][0])*(e[i][1]+e[a][1]),c=r+o;n+=Math.abs(r)>=Math.abs(o)?r-c+o:o-c+r,r=c}r+n>=0!==!!t&&e.reverse()}e.exports=function e(t,n){var a,s=t&&t.type;if("FeatureCollection"===s)for(a=0;a<t.features.length;a++)e(t.features[a],n);else if("GeometryCollection"===s)for(a=0;a<t.geometries.length;a++)e(t.geometries[a],n);else if("Feature"===s)e(t.geometry,n);else if("Polygon"===s)r(t.coordinates,n);else if("MultiPolygon"===s)for(a=0;a<t.coordinates.length;a++)r(t.coordinates[a],n);return t}},2096:function(e,t,r){e.exports=r(2097)},2097:function(e){e.exports=JSON.parse('[{"key":"building","polygon":"all"},{"key":"highway","polygon":"whitelist","values":["services","rest_area","escape","elevator"]},{"key":"natural","polygon":"blacklist","values":["coastline","cliff","ridge","arete","tree_row"]},{"key":"landuse","polygon":"all"},{"key":"waterway","polygon":"whitelist","values":["riverbank","dock","boatyard","dam"]},{"key":"amenity","polygon":"all"},{"key":"leisure","polygon":"all"},{"key":"barrier","polygon":"whitelist","values":["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{"key":"railway","polygon":"whitelist","values":["station","turntable","roundhouse","platform"]},{"key":"area","polygon":"all"},{"key":"boundary","polygon":"all"},{"key":"man_made","polygon":"blacklist","values":["cutline","embankment","pipeline"]},{"key":"power","polygon":"whitelist","values":["plant","substation","generator","transformer"]},{"key":"place","polygon":"all"},{"key":"shop","polygon":"all"},{"key":"aeroway","polygon":"blacklist","values":["taxiway"]},{"key":"tourism","polygon":"all"},{"key":"historic","polygon":"all"},{"key":"public_transport","polygon":"all"},{"key":"office","polygon":"all"},{"key":"building:part","polygon":"all"},{"key":"military","polygon":"all"},{"key":"ruins","polygon":"all"},{"key":"area:highway","polygon":"all"},{"key":"craft","polygon":"all"},{"key":"golf","polygon":"all"},{"key":"indoor","polygon":"all"}]')},2098:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r(1);var n=r(30),a=r(9),s=r(1950),i=r(0);const o=e=>{let t=!!s.a[e];return"fileSize"===e?Object(i.jsx)(n.a,{...s.a[e],values:{fileSize:a.v/1e6}}):e.includes("unsupportedGeom")?Object(i.jsx)(n.a,{...s.a[e.split("-")[0].trim()],values:{geometry:e.split("-")[1].trim()}}):t?Object(i.jsx)(n.a,{...s.a[e]}):null}},2101:function(e,t,r){"use strict";r.r(t);var n=1,a=2,s=3,i=6378137,o=.0066943799901413165,c=484813681109536e-20,l=Math.PI/2,u=.16666666666666666,d=.04722222222222222,h=.022156084656084655,p=1e-10,f=.017453292519943295,m=57.29577951308232,g=Math.PI/4,y=2*Math.PI,b=3.14159265359,v={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},_={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},w=/[\s_\-\/\(\)]/g;function j(e,t){if(e[t])return e[t];for(var r,n=Object.keys(e),a=t.toLowerCase().replace(w,""),s=-1;++s<n.length;)if((r=n[s]).toLowerCase().replace(w,"")===a)return e[r]}var x=function(e){var t,r,n,a={},s=e.split("+").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var r=t.split("=");return r.push(!0),e[r[0].toLowerCase()]=r[1],e}),{}),i={proj:"projName",datum:"datumCode",rf:function(e){a.rf=parseFloat(e)},lat_0:function(e){a.lat0=e*f},lat_1:function(e){a.lat1=e*f},lat_2:function(e){a.lat2=e*f},lat_ts:function(e){a.lat_ts=e*f},lon_0:function(e){a.long0=e*f},lon_1:function(e){a.long1=e*f},lon_2:function(e){a.long2=e*f},alpha:function(e){a.alpha=parseFloat(e)*f},gamma:function(e){a.rectified_grid_angle=parseFloat(e)},lonc:function(e){a.longc=e*f},x_0:function(e){a.x0=parseFloat(e)},y_0:function(e){a.y0=parseFloat(e)},k_0:function(e){a.k0=parseFloat(e)},k:function(e){a.k0=parseFloat(e)},a:function(e){a.a=parseFloat(e)},b:function(e){a.b=parseFloat(e)},r_a:function(){a.R_A=!0},zone:function(e){a.zone=parseInt(e,10)},south:function(){a.utmSouth=!0},towgs84:function(e){a.datum_params=e.split(",").map((function(e){return parseFloat(e)}))},to_meter:function(e){a.to_meter=parseFloat(e)},units:function(e){a.units=e;var t=j(_,e);t&&(a.to_meter=t.to_meter)},from_greenwich:function(e){a.from_greenwich=e*f},pm:function(e){var t=j(v,e);a.from_greenwich=(t||parseFloat(e))*f},nadgrids:function(e){"@null"===e?a.datumCode="none":a.nadgrids=e},axis:function(e){var t="ewnsud";3===e.length&&-1!==t.indexOf(e.substr(0,1))&&-1!==t.indexOf(e.substr(1,1))&&-1!==t.indexOf(e.substr(2,1))&&(a.axis=e)},approx:function(){a.approx=!0}};for(t in s)r=s[t],t in i?"function"===typeof(n=i[t])?n(r):a[n]=r:a[t]=r;return"string"===typeof a.datumCode&&"WGS84"!==a.datumCode&&(a.datumCode=a.datumCode.toLowerCase()),a},M=function(e){var t=new I(e);return t.output()},O=1,k=/\s/,C=/[A-Za-z]/,E=/[A-Za-z84_]/,S=/[,\]]/,N=/[\d\.E\-\+]/;function I(e){if("string"!==typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=O}function D(e,t,r){Array.isArray(t)&&(r.unshift(t),t=null);var n=t?{}:e,a=r.reduce((function(e,t){return T(t,e),e}),n);t&&(e[t]=a)}function T(e,t){if(Array.isArray(e)){var r=e.shift();if("PARAMETER"===r&&(r=e.shift()),1===e.length)return Array.isArray(e[0])?(t[r]={},void T(e[0],t[r])):void(t[r]=e[0]);if(e.length)if("TOWGS84"!==r){if("AXIS"===r)return r in t||(t[r]=[]),void t[r].push(e);var n;switch(Array.isArray(r)||(t[r]={}),r){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[r]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&T(e[2],t[r]));case"SPHEROID":case"ELLIPSOID":return t[r]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&T(e[3],t[r]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return e[0]=["name",e[0]],void D(t,r,e);default:for(n=-1;++n<e.length;)if(!Array.isArray(e[n]))return T(e,t[r]);return D(t,r,e)}}else t[r]=e;else t[r]=!0}else t[e]=!0}I.prototype.readCharicter=function(){var e=this.text[this.place++];if(4!==this.state)for(;k.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case O:return this.neutral(e);case 2:return this.keyword(e);case 4:return this.quoted(e);case 5:return this.afterquote(e);case 3:return this.number(e);case-1:return}},I.prototype.afterquote=function(e){if('"'===e)return this.word+='"',void(this.state=4);if(S.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)},I.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=O)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=O,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},I.prototype.number=function(e){if(!N.test(e)){if(S.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)}this.word+=e},I.prototype.quoted=function(e){'"'!==e?this.word+=e:this.state=5},I.prototype.keyword=function(e){if(E.test(e))this.word+=e;else{if("["===e){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=O)}if(!S.test(e))throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place);this.afterItem(e)}},I.prototype.neutral=function(e){if(C.test(e))return this.word=e,void(this.state=2);if('"'===e)return this.word="",void(this.state=4);if(N.test(e))return this.word=e,void(this.state=3);if(!S.test(e))throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place);this.afterItem(e)},I.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var A=.017453292519943295;function P(e){return e*A}var L=function(e){var t=M(e),r=t.shift(),n=t.shift();t.unshift(["name",n]),t.unshift(["type",r]);var a={};return T(t,a),function(e){if("GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):"object"===typeof e.PROJECTION?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var t="",r=0,n=e.AXIS.length;r<n;++r){var a=[e.AXIS[r][0].toLowerCase(),e.AXIS[r][1].toLowerCase()];-1!==a[0].indexOf("north")||("y"===a[0]||"lat"===a[0])&&"north"===a[1]?t+="n":-1!==a[0].indexOf("south")||("y"===a[0]||"lat"===a[0])&&"south"===a[1]?t+="s":-1!==a[0].indexOf("east")||("x"===a[0]||"lon"===a[0])&&"east"===a[1]?t+="e":-1===a[0].indexOf("west")&&("x"!==a[0]&&"lon"!==a[0]||"west"!==a[1])||(t+="w")}2===t.length&&(t+="u"),3===t.length&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var s=e.GEOGCS;function i(t){return t*(e.to_meter||1)}"GEOGCS"===e.type&&(s=e),s&&(s.DATUM?e.datumCode=s.DATUM.name.toLowerCase():e.datumCode=s.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==e.datumCode&&"new_zealand_1949"!==e.datumCode||(e.datumCode="nzgd49"),"wgs_1984"!==e.datumCode&&"world_geodetic_system_1984"!==e.datumCode||("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"_ferro"===e.datumCode.slice(-6)&&(e.datumCode=e.datumCode.slice(0,-6)),"_jakarta"===e.datumCode.slice(-8)&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(e.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=s.DATUM.SPHEROID.a,e.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(e.datum_params=s.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),"ch1903+"===e.datumCode&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",P],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",P],["x0","false_easting",i],["y0","false_northing",i],["long0","central_meridian",P],["lat0","latitude_of_origin",P],["lat0","standard_parallel_1",P],["lat1","standard_parallel_1",P],["lat2","standard_parallel_2",P],["azimuth","Azimuth"],["alpha","azimuth",P],["srsCode","name"]].forEach((function(t){return function(e,t){var r=t[0],n=t[1];!(r in e)&&n in e&&(e[r]=e[n],3===t.length&&(e[r]=t[2](e[r])))}(e,t)})),e.long0||!e.longc||"Albers_Conic_Equal_Area"!==e.projName&&"Lambert_Azimuthal_Equal_Area"!==e.projName||(e.long0=e.longc),e.lat_ts||!e.lat1||"Stereographic_South_Pole"!==e.projName&&"Polar Stereographic (variant B)"!==e.projName?!e.lat_ts&&e.lat0&&"Polar_Stereographic"===e.projName&&(e.lat_ts=e.lat0,e.lat0=P(e.lat0>0?90:-90)):(e.lat0=P(e.lat1>0?90:-90),e.lat_ts=e.lat1)}(a),a};function R(e){var t=this;if(2===arguments.length){var r=arguments[1];"string"===typeof r?"+"===r.charAt(0)?R[e]=x(arguments[1]):R[e]=L(arguments[1]):R[e]=r}else if(1===arguments.length){if(Array.isArray(e))return e.map((function(e){Array.isArray(e)?R.apply(t,e):R(e)}));if("string"===typeof e){if(e in R)return R[e]}else"EPSG"in e?R["EPSG:"+e.EPSG]=e:"ESRI"in e?R["ESRI:"+e.ESRI]=e:"IAU2000"in e?R["IAU2000:"+e.IAU2000]=e:console.log(e);return}}!function(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}(R);var F=R;var B=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var U=["3857","900913","3785","102113"];var z=function(e){if(!function(e){return"string"===typeof e}(e))return e;if(function(e){return e in F}(e))return F[e];if(function(e){return B.some((function(t){return e.indexOf(t)>-1}))}(e)){var t=L(e);if(function(e){var t=j(e,"authority");if(t){var r=j(t,"epsg");return r&&U.indexOf(r)>-1}}(t))return F["EPSG:3857"];var r=function(e){var t=j(e,"extension");if(t)return j(t,"proj4")}(t);return r?x(r):t}return function(e){return"+"===e[0]}(e)?x(e):void 0},Y=function(e,t){var r,n;if(e=e||{},!t)return e;for(n in t)void 0!==(r=t[n])&&(e[n]=r);return e},G=function(e,t,r){var n=e*t;return r/Math.sqrt(1-n*n)},W=function(e){return e<0?-1:1},V=function(e){return Math.abs(e)<=b?e:e-W(e)*y},q=function(e,t,r){var n=e*r,a=.5*e;return n=Math.pow((1-n)/(1+n),a),Math.tan(.5*(l-t))/n},H=function(e,t){for(var r,n,a=.5*e,s=l-2*Math.atan(t),i=0;i<=15;i++)if(r=e*Math.sin(s),s+=n=l-2*Math.atan(t*Math.pow((1-r)/(1+r),a))-s,Math.abs(n)<=1e-10)return s;return-9999};function K(e){return e}var Z=[{init:function(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=G(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(e){var t,r,n=e.x,a=e.y;if(a*m>90&&a*m<-90&&n*m>180&&n*m<-180)return null;if(Math.abs(Math.abs(a)-l)<=p)return null;if(this.sphere)t=this.x0+this.a*this.k0*V(n-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(g+.5*a));else{var s=Math.sin(a),i=q(this.e,a,s);t=this.x0+this.a*this.k0*V(n-this.long0),r=this.y0-this.a*this.k0*Math.log(i)}return e.x=t,e.y=r,e},inverse:function(e){var t,r,n=e.x-this.x0,a=e.y-this.y0;if(this.sphere)r=l-2*Math.atan(Math.exp(-a/(this.a*this.k0)));else{var s=Math.exp(-a/(this.a*this.k0));if(-9999===(r=H(this.e,s)))return null}return t=V(this.long0+n/(this.a*this.k0)),e.x=t,e.y=r,e},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:K,inverse:K,names:["longlat","identity"]}],J={},Q=[];function X(e,t){var r=Q.length;return e.names?(Q[r]=e,e.names.forEach((function(e){J[e.toLowerCase()]=r})),this):(console.log(t),!0)}var $={start:function(){Z.forEach(X)},add:X,get:function(e){if(!e)return!1;var t=e.toLowerCase();return"undefined"!==typeof J[t]&&Q[J[t]]?Q[J[t]]:void 0}},ee={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},te=ee.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};ee.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var re={};re.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},re.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},re.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},re.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},re.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},re.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},re.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},re.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},re.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},re.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},re.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},re.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},re.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},re.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},re.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},re.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},re.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},re.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var ne=function(e,t,r,i,o,l,u){var d={};return d.datum_type=void 0===e||"none"===e?5:4,t&&(d.datum_params=t.map(parseFloat),0===d.datum_params[0]&&0===d.datum_params[1]&&0===d.datum_params[2]||(d.datum_type=n),d.datum_params.length>3&&(0===d.datum_params[3]&&0===d.datum_params[4]&&0===d.datum_params[5]&&0===d.datum_params[6]||(d.datum_type=a,d.datum_params[3]*=c,d.datum_params[4]*=c,d.datum_params[5]*=c,d.datum_params[6]=d.datum_params[6]/1e6+1))),u&&(d.datum_type=s,d.grids=u),d.a=r,d.b=i,d.es=o,d.ep2=l,d},ae={};function se(e){if(0===e.length)return null;var t="@"===e[0];return t&&(e=e.slice(1)),"null"===e?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:ae[e]||null,isNull:!1}}function ie(e){return e/3600*Math.PI/180}function oe(e,t,r){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,r)))}function ce(e){return e.map((function(e){return[ie(e.longitudeShift),ie(e.latitudeShift)]}))}function le(e,t,r){return{name:oe(e,t+8,t+16).trim(),parent:oe(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,r),upperLatitude:e.getFloat64(t+88,r),lowerLongitude:e.getFloat64(t+104,r),upperLongitude:e.getFloat64(t+120,r),latitudeInterval:e.getFloat64(t+136,r),longitudeInterval:e.getFloat64(t+152,r),gridNodeCount:e.getInt32(t+168,r)}}function ue(e,t,r,n){for(var a=t+176,s=[],i=0;i<r.gridNodeCount;i++){var o={latitudeShift:e.getFloat32(a+16*i,n),longitudeShift:e.getFloat32(a+16*i+4,n),latitudeAccuracy:e.getFloat32(a+16*i+8,n),longitudeAccuracy:e.getFloat32(a+16*i+12,n)};s.push(o)}return s}function de(e,t){if(!(this instanceof de))return new de(e);t=t||function(e){if(e)throw e};var r=z(e);if("object"===typeof r){var n=de.projections.get(r.projName);if(n){if(r.datumCode&&"none"!==r.datumCode){var a=j(re,r.datumCode);a&&(r.datum_params=r.datum_params||(a.towgs84?a.towgs84.split(","):null),r.ellps=a.ellipse,r.datumName=a.datumName?a.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var s=function(e,t,r,n,a){if(!e){var s=j(ee,n);s||(s=te),e=s.a,t=s.b,r=s.rf}return r&&!t&&(t=(1-1/r)*e),(0===r||Math.abs(e-t)<p)&&(a=!0,t=e),{a:e,b:t,rf:r,sphere:a}}(r.a,r.b,r.rf,r.ellps,r.sphere),i=function(e,t,r,n){var a=e*e,s=t*t,i=(a-s)/a,o=0;return n?(a=(e*=1-i*(u+i*(d+i*h)))*e,i=0):o=Math.sqrt(i),{es:i,e:o,ep2:(a-s)/s}}(s.a,s.b,s.rf,r.R_A),o=function(e){return void 0===e?null:e.split(",").map(se)}(r.nadgrids),c=r.datum||ne(r.datumCode,r.datum_params,s.a,s.b,i.es,i.ep2,o);Y(this,r),Y(this,n),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=i.es,this.e=i.e,this.ep2=i.ep2,this.datum=c,this.init(),t(null,this)}else t(e)}else t(e)}de.projections=$,de.projections.start();var he=de;function pe(e,t,r){var n,a,s,i,o=e.x,c=e.y,u=e.z?e.z:0;if(c<-l&&c>-1.001*l)c=-l;else if(c>l&&c<1.001*l)c=l;else{if(c<-l)return{x:-1/0,y:-1/0,z:e.z};if(c>l)return{x:1/0,y:1/0,z:e.z}}return o>Math.PI&&(o-=2*Math.PI),a=Math.sin(c),i=Math.cos(c),s=a*a,{x:((n=r/Math.sqrt(1-t*s))+u)*i*Math.cos(o),y:(n+u)*i*Math.sin(o),z:(n*(1-t)+u)*a}}function fe(e,t,r,n){var a,s,i,o,c,u,d,h,p,f,m,g,y,b,v,_=1e-12,w=e.x,j=e.y,x=e.z?e.z:0;if(a=Math.sqrt(w*w+j*j),s=Math.sqrt(w*w+j*j+x*x),a/r<_){if(b=0,s/r<_)return l,v=-n,{x:e.x,y:e.y,z:e.z}}else b=Math.atan2(j,w);i=x/s,h=(o=a/s)*(1-t)*(c=1/Math.sqrt(1-t*(2-t)*o*o)),p=i*c,y=0;do{y++,u=t*(d=r/Math.sqrt(1-t*p*p))/(d+(v=a*h+x*p-d*(1-t*p*p))),g=(m=i*(c=1/Math.sqrt(1-u*(2-u)*o*o)))*h-(f=o*(1-u)*c)*p,h=f,p=m}while(g*g>1e-24&&y<30);return{x:b,y:Math.atan(m/Math.abs(f)),z:v}}function me(e){return e===n||e===a}var ge=function(e,t,r){if(function(e,t){return e.datum_type===t.datum_type&&!(e.a!==t.a||Math.abs(e.es-t.es)>5e-11)&&(e.datum_type===n?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type!==a||e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6])}(e,t))return r;if(5===e.datum_type||5===t.datum_type)return r;var c=e.a,l=e.es;if(e.datum_type===s){if(0!==ye(e,!1,r))return;c=i,l=o}var u=t.a,d=t.b,h=t.es;if(t.datum_type===s&&(u=i,d=6356752.314,h=o),l===h&&c===u&&!me(e.datum_type)&&!me(t.datum_type))return r;if((r=pe(r,l,c),me(e.datum_type)&&(r=function(e,t,r){if(t===n)return{x:e.x+r[0],y:e.y+r[1],z:e.z+r[2]};if(t===a){var s=r[0],i=r[1],o=r[2],c=r[3],l=r[4],u=r[5],d=r[6];return{x:d*(e.x-u*e.y+l*e.z)+s,y:d*(u*e.x+e.y-c*e.z)+i,z:d*(-l*e.x+c*e.y+e.z)+o}}}(r,e.datum_type,e.datum_params)),me(t.datum_type)&&(r=function(e,t,r){if(t===n)return{x:e.x-r[0],y:e.y-r[1],z:e.z-r[2]};if(t===a){var s=r[0],i=r[1],o=r[2],c=r[3],l=r[4],u=r[5],d=r[6],h=(e.x-s)/d,p=(e.y-i)/d,f=(e.z-o)/d;return{x:h+u*p-l*f,y:-u*h+p+c*f,z:l*h-c*p+f}}}(r,t.datum_type,t.datum_params)),r=fe(r,h,u,d),t.datum_type===s)&&0!==ye(t,!0,r))return;return r};function ye(e,t,r){if(null===e.grids||0===e.grids.length)return console.log("Grid shift grids not found"),-1;var n={x:-r.x,y:r.y},a={x:Number.NaN,y:Number.NaN},s=[];e:for(var i=0;i<e.grids.length;i++){var o=e.grids[i];if(s.push(o.name),o.isNull){a=n;break}if(o.mandatory,null!==o.grid)for(var c=o.grid.subgrids,l=0,u=c.length;l<u;l++){var d=c[l],h=(Math.abs(d.del[1])+Math.abs(d.del[0]))/1e4,p=d.ll[0]-h,f=d.ll[1]-h,g=d.ll[0]+(d.lim[0]-1)*d.del[0]+h,y=d.ll[1]+(d.lim[1]-1)*d.del[1]+h;if(!(f>n.y||p>n.x||y<n.y||g<n.x)&&(a=be(n,t,d),!isNaN(a.x)))break e}else if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1}return isNaN(a.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*m+" "+n.y*m+" tried: '"+s+"'"),-1):(r.x=-a.x,r.y=a.y,0)}function be(e,t,r){var n={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return n;var a={x:e.x,y:e.y};a.x-=r.ll[0],a.y-=r.ll[1],a.x=V(a.x-Math.PI)+Math.PI;var s=ve(a,r);if(t){if(isNaN(s.x))return n;s.x=a.x-s.x,s.y=a.y-s.y;var i,o,c=9;do{if(o=ve(s,r),isNaN(o.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}i={x:a.x-(o.x+s.x),y:a.y-(o.y+s.y)},s.x+=i.x,s.y+=i.y}while(c--&&Math.abs(i.x)>1e-12&&Math.abs(i.y)>1e-12);if(c<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=V(s.x+r.ll[0]),n.y=s.y+r.ll[1]}else isNaN(s.x)||(n.x=e.x+s.x,n.y=e.y+s.y);return n}function ve(e,t){var r,n={x:e.x/t.del[0],y:e.y/t.del[1]},a=Math.floor(n.x),s=Math.floor(n.y),i=n.x-1*a,o=n.y-1*s,c={x:Number.NaN,y:Number.NaN};if(a<0||a>=t.lim[0])return c;if(s<0||s>=t.lim[1])return c;r=s*t.lim[0]+a;var l=t.cvs[r][0],u=t.cvs[r][1];r++;var d=t.cvs[r][0],h=t.cvs[r][1];r+=t.lim[0];var p=t.cvs[r][0],f=t.cvs[r][1];r--;var m=t.cvs[r][0],g=t.cvs[r][1],y=i*o,b=i*(1-o),v=(1-i)*(1-o),_=(1-i)*o;return c.x=v*l+b*d+_*m+y*p,c.y=v*u+b*h+_*g+y*f,c}var _e=function(e,t,r){var n,a,s,i=r.x,o=r.y,c=r.z||0,l={};for(s=0;s<3;s++)if(!t||2!==s||void 0!==r.z)switch(0===s?(n=i,a=-1!=="ew".indexOf(e.axis[s])?"x":"y"):1===s?(n=o,a=-1!=="ns".indexOf(e.axis[s])?"y":"x"):(n=c,a="z"),e.axis[s]){case"e":case"n":l[a]=n;break;case"w":case"s":l[a]=-n;break;case"u":void 0!==r[a]&&(l.z=n);break;case"d":void 0!==r[a]&&(l.z=-n);break;default:return null}return l},we=function(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t},je=function(e){xe(e.x),xe(e.y)};function xe(e){if("function"===typeof Number.isFinite){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!==typeof e||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function Me(e,t,r,i){var o,c=void 0!==(r=Array.isArray(r)?we(r):{x:r.x,y:r.y,z:r.z,m:r.m}).z;if(je(r),e.datum&&t.datum&&function(e,t){return(e.datum.datum_type===n||e.datum.datum_type===a||e.datum.datum_type===s)&&"WGS84"!==t.datumCode||(t.datum.datum_type===n||t.datum.datum_type===a||t.datum.datum_type===s)&&"WGS84"!==e.datumCode}(e,t)&&(r=Me(e,o=new he("WGS84"),r,i),e=o),i&&"enu"!==e.axis&&(r=_e(e,!1,r)),"longlat"===e.projName)r={x:r.x*f,y:r.y*f,z:r.z||0};else if(e.to_meter&&(r={x:r.x*e.to_meter,y:r.y*e.to_meter,z:r.z||0}),!(r=e.inverse(r)))return;if(e.from_greenwich&&(r.x+=e.from_greenwich),r=ge(e.datum,t.datum,r))return t.from_greenwich&&(r={x:r.x-t.from_greenwich,y:r.y,z:r.z||0}),"longlat"===t.projName?r={x:r.x*m,y:r.y*m,z:r.z||0}:(r=t.forward(r),t.to_meter&&(r={x:r.x/t.to_meter,y:r.y/t.to_meter,z:r.z||0})),i&&"enu"!==t.axis?_e(t,!0,r):(r&&!c&&delete r.z,r)}var Oe=he("WGS84");function ke(e,t,r,n){var a,s,i;return Array.isArray(r)?(a=Me(e,t,r,n)||{x:NaN,y:NaN},r.length>2?"undefined"!==typeof e.name&&"geocent"===e.name||"undefined"!==typeof t.name&&"geocent"===t.name?"number"===typeof a.z?[a.x,a.y,a.z].concat(r.splice(3)):[a.x,a.y,r[2]].concat(r.splice(3)):[a.x,a.y].concat(r.splice(2)):[a.x,a.y]):(s=Me(e,t,r,n),2===(i=Object.keys(r)).length||i.forEach((function(n){if("undefined"!==typeof e.name&&"geocent"===e.name||"undefined"!==typeof t.name&&"geocent"===t.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;s[n]=r[n]})),s)}function Ce(e){return e instanceof he?e:e.oProj?e.oProj:he(e)}var Ee=function(e,t,r){e=Ce(e);var n,a=!1;return"undefined"===typeof t?(t=e,e=Oe,a=!0):("undefined"!==typeof t.x||Array.isArray(t))&&(r=t,t=e,e=Oe,a=!0),t=Ce(t),r?ke(e,t,r):(n={forward:function(r,n){return ke(e,t,r,n)},inverse:function(r,n){return ke(t,e,r,n)}},a&&(n.oProj=t),n)},Se=6,Ne="AJSAJS",Ie="AFAFAF",De=65,Te=73,Ae=79,Pe=86,Le=90,Re={forward:Fe,inverse:function(e){var t=Ye(Ve(e.toUpperCase()));if(t.lat&&t.lon)return[t.lon,t.lat,t.lon,t.lat];return[t.left,t.bottom,t.right,t.top]},toPoint:Be};function Fe(e,t){return t=t||5,function(e,t){var r="00000"+e.easting,n="00000"+e.northing;return e.zoneNumber+e.zoneLetter+function(e,t,r){var n=We(r),a=Math.floor(e/1e5),s=Math.floor(t/1e5)%20;return function(e,t,r){var n=r-1,a=Ne.charCodeAt(n),s=Ie.charCodeAt(n),i=a+e-1,o=s+t,c=!1;i>Le&&(i=i-Le+De-1,c=!0);(i===Te||a<Te&&i>Te||(i>Te||a<Te)&&c)&&i++;(i===Ae||a<Ae&&i>Ae||(i>Ae||a<Ae)&&c)&&++i===Te&&i++;i>Le&&(i=i-Le+De-1);o>Pe?(o=o-Pe+De-1,c=!0):c=!1;(o===Te||s<Te&&o>Te||(o>Te||s<Te)&&c)&&o++;(o===Ae||s<Ae&&o>Ae||(o>Ae||s<Ae)&&c)&&++o===Te&&o++;o>Pe&&(o=o-Pe+De-1);return String.fromCharCode(i)+String.fromCharCode(o)}(a,s,n)}(e.easting,e.northing,e.zoneNumber)+r.substr(r.length-5,t)+n.substr(n.length-5,t)}(function(e){var t,r,n,a,s,i,o,c,l=e.lat,u=e.lon,d=6378137,h=.00669438,p=.9996,f=Ue(l),m=Ue(u);c=Math.floor((u+180)/6)+1,180===u&&(c=60);l>=56&&l<64&&u>=3&&u<12&&(c=32);l>=72&&l<84&&(u>=0&&u<9?c=31:u>=9&&u<21?c=33:u>=21&&u<33?c=35:u>=33&&u<42&&(c=37));o=Ue(6*(c-1)-180+3),t=h/(1-h),r=d/Math.sqrt(1-h*Math.sin(f)*Math.sin(f)),n=Math.tan(f)*Math.tan(f),a=t*Math.cos(f)*Math.cos(f),s=Math.cos(f)*(m-o),i=d*((1-h/4-3*h*h/64-5*h*h*h/256)*f-(3*h/8+3*h*h/32+45*h*h*h/1024)*Math.sin(2*f)+(15*h*h/256+45*h*h*h/1024)*Math.sin(4*f)-35*h*h*h/3072*Math.sin(6*f));var g=p*r*(s+(1-n+a)*s*s*s/6+(5-18*n+n*n+72*a-58*t)*s*s*s*s*s/120)+5e5,y=p*(i+r*Math.tan(f)*(s*s/2+(5-n+9*a+4*a*a)*s*s*s*s/24+(61-58*n+n*n+600*a-330*t)*s*s*s*s*s*s/720));l<0&&(y+=1e7);return{northing:Math.round(y),easting:Math.round(g),zoneNumber:c,zoneLetter:Ge(l)}}({lat:e[1],lon:e[0]}),t)}function Be(e){var t=Ye(Ve(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function Ue(e){return e*(Math.PI/180)}function ze(e){return e/Math.PI*180}function Ye(e){var t=e.northing,r=e.easting,n=e.zoneLetter,a=e.zoneNumber;if(a<0||a>60)return null;var s,i,o,c,l,u,d,h,p,f=.9996,m=6378137,g=.00669438,y=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),b=r-5e5,v=t;n<"N"&&(v-=1e7),d=6*(a-1)-180+3,s=.006739496752268451,p=(h=v/f/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*h)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*h)+151*y*y*y/96*Math.sin(6*h),i=m/Math.sqrt(1-g*Math.sin(p)*Math.sin(p)),o=Math.tan(p)*Math.tan(p),c=s*Math.cos(p)*Math.cos(p),l=.99330562*m/Math.pow(1-g*Math.sin(p)*Math.sin(p),1.5),u=b/(i*f);var _=p-i*Math.tan(p)/l*(u*u/2-(5+3*o+10*c-4*c*c-9*s)*u*u*u*u/24+(61+90*o+298*c+45*o*o-1.6983531815716497-3*c*c)*u*u*u*u*u*u/720);_=ze(_);var w,j=(u-(1+2*o+c)*u*u*u/6+(5-2*c+28*o-3*c*c+8*s+24*o*o)*u*u*u*u*u/120)/Math.cos(p);if(j=d+ze(j),e.accuracy){var x=Ye({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});w={top:x.lat,right:x.lon,bottom:_,left:j}}else w={lat:_,lon:j};return w}function Ge(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function We(e){var t=e%Se;return 0===t&&(t=Se),t}function Ve(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t,r=e.length,n=null,a="",s=0;!/[A-Z]/.test(t=e.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+e;a+=t,s++}var i=parseInt(a,10);if(0===s||s+3>r)throw"MGRSPoint bad conversion from: "+e;var o=e.charAt(s++);if(o<="A"||"B"===o||"Y"===o||o>="Z"||"I"===o||"O"===o)throw"MGRSPoint zone letter "+o+" not handled: "+e;n=e.substring(s,s+=2);for(var c=We(i),l=function(e,t){var r=Ne.charCodeAt(t-1),n=1e5,a=!1;for(;r!==e.charCodeAt(0);){if(++r===Te&&r++,r===Ae&&r++,r>Le){if(a)throw"Bad character: "+e;r=De,a=!0}n+=1e5}return n}(n.charAt(0),c),u=function(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;var r=Ie.charCodeAt(t-1),n=0,a=!1;for(;r!==e.charCodeAt(0);){if(++r===Te&&r++,r===Ae&&r++,r>Pe){if(a)throw"Bad character: "+e;r=De,a=!0}n+=1e5}return n}(n.charAt(1),c);u<qe(o);)u+=2e6;var d=r-s;if(d%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var h,p,f,m=d/2,g=0,y=0;return m>0&&(h=1e5/Math.pow(10,m),p=e.substring(s,s+m),g=parseFloat(p)*h,f=e.substring(s+m),y=parseFloat(f)*h),{easting:g+l,northing:y+u,zoneLetter:o,zoneNumber:i,accuracy:h}}function qe(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function He(e,t,r){if(!(this instanceof He))return new He(e,t,r);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if("object"===typeof e)this.x=e.x,this.y=e.y,this.z=e.z||0;else if("string"===typeof e&&"undefined"===typeof t){var n=e.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=e,this.y=t,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}He.fromMGRS=function(e){return new He(Be(e))},He.prototype.toMGRS=function(e){return Fe([this.x,this.y],e)};var Ke=He,Ze=.046875,Je=.01953125,Qe=.01068115234375,Xe=function(e){var t=[];t[0]=1-e*(.25+e*(Ze+e*(Je+e*Qe))),t[1]=e*(.75-e*(Ze+e*(Je+e*Qe)));var r=e*e;return t[2]=r*(.46875-e*(.013020833333333334+.007120768229166667*e)),r*=e,t[3]=r*(.3645833333333333-.005696614583333333*e),t[4]=r*e*.3076171875,t},$e=function(e,t,r,n){return r*=t,t*=t,n[0]*e-r*(n[1]+t*(n[2]+t*(n[3]+t*n[4])))},et=function(e,t,r){for(var n=1/(1-t),a=e,s=20;s;--s){var i=Math.sin(a),o=1-t*i*i;if(a-=o=($e(a,i,Math.cos(a),r)-e)*(o*Math.sqrt(o))*n,Math.abs(o)<p)return a}return a};var tt={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Xe(this.es),this.ml0=$e(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(e){var t,r,n,a=e.x,s=e.y,i=V(a-this.long0),o=Math.sin(s),c=Math.cos(s);if(this.es){var l=c*i,u=Math.pow(l,2),d=this.ep2*Math.pow(c,2),h=Math.pow(d,2),f=Math.abs(c)>p?Math.tan(s):0,m=Math.pow(f,2),g=Math.pow(m,2);t=1-this.es*Math.pow(o,2),l/=Math.sqrt(t);var y=$e(s,o,c,this.en);r=this.a*(this.k0*l*(1+u/6*(1-m+d+u/20*(5-18*m+g+14*d-58*m*d+u/42*(61+179*g-g*m-479*m)))))+this.x0,n=this.a*(this.k0*(y-this.ml0+o*i*l/2*(1+u/12*(5-m+9*d+4*h+u/30*(61+g-58*m+270*d-330*m*d+u/56*(1385+543*g-g*m-3111*m))))))+this.y0}else{var b=c*Math.sin(i);if(Math.abs(Math.abs(b)-1)<p)return 93;if(r=.5*this.a*this.k0*Math.log((1+b)/(1-b))+this.x0,n=c*Math.cos(i)/Math.sqrt(1-Math.pow(b,2)),(b=Math.abs(n))>=1){if(b-1>p)return 93;n=0}else n=Math.acos(n);s<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return e.x=r,e.y=n,e},inverse:function(e){var t,r,n,a,s=(e.x-this.x0)*(1/this.a),i=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+i/this.k0,r=et(t,this.es,this.en),Math.abs(r)<l){var o=Math.sin(r),c=Math.cos(r),u=Math.abs(c)>p?Math.tan(r):0,d=this.ep2*Math.pow(c,2),h=Math.pow(d,2),f=Math.pow(u,2),m=Math.pow(f,2);t=1-this.es*Math.pow(o,2);var g=s*Math.sqrt(t)/this.k0,y=Math.pow(g,2);n=r-(t*=u)*y/(1-this.es)*.5*(1-y/12*(5+3*f-9*d*f+d-4*h-y/30*(61+90*f-252*d*f+45*m+46*d-y/56*(1385+3633*f+4095*m+1574*m*f)))),a=V(this.long0+g*(1-y/6*(1+2*f+d-y/20*(5+28*f+24*m+8*d*f+6*d-y/42*(61+662*f+1320*m+720*m*f))))/c)}else n=l*W(i),a=0;else{var b=Math.exp(s/this.k0),v=.5*(b-1/b),_=this.lat0+i/this.k0,w=Math.cos(_);t=Math.sqrt((1-Math.pow(w,2))/(1+Math.pow(v,2))),n=Math.asin(t),i<0&&(n=-n),a=0===v&&0===w?0:V(Math.atan2(v,w)+this.long0)}return e.x=a,e.y=n,e},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]},rt=function(e){var t=Math.exp(e);return t=(t-1/t)/2},nt=function(e,t){e=Math.abs(e),t=Math.abs(t);var r=Math.max(e,t),n=Math.min(e,t)/(r||1);return r*Math.sqrt(1+Math.pow(n,2))},at=function(e){var t=Math.abs(e);return t=function(e){var t=1+e,r=t-1;return 0===r?e:e*Math.log(t)/r}(t*(1+t/(nt(1,t)+1))),e<0?-t:t},st=function(e,t){for(var r,n=2*Math.cos(2*t),a=e.length-1,s=e[a],i=0;--a>=0;)r=n*s-i+e[a],i=s,s=r;return t+r*Math.sin(2*t)},it=function(e,t,r){for(var n,a,s=Math.sin(t),i=Math.cos(t),o=rt(r),c=function(e){var t=Math.exp(e);return(t+1/t)/2}(r),l=2*i*c,u=-2*s*o,d=e.length-1,h=e[d],p=0,f=0,m=0;--d>=0;)n=f,a=p,h=l*(f=h)-n-u*(p=m)+e[d],m=u*f-a+l*p;return[(l=s*c)*h-(u=i*o)*m,l*m+u*h]};var ot={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(tt.init.apply(this),this.forward=tt.forward,this.inverse=tt.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),r=t;this.cgb[0]=t*(2+t*(-2/3+t*(t*(116/45+t*(26/45+t*(-2854/675)))-2))),this.cbg[0]=t*(t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))-2),r*=t,this.cgb[1]=r*(7/3+t*(t*(-227/45+t*(2704/315+t*(2323/945)))-1.6)),this.cbg[1]=r*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),r*=t,this.cgb[2]=r*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=r*(-26/15+t*(34/21+t*(1.6+t*(-12686/2835)))),r*=t,this.cgb[3]=r*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=r*(1237/630+t*(t*(-24832/14175)-2.4)),r*=t,this.cgb[4]=r*(4174/315+t*(-144838/6237)),this.cbg[4]=r*(-734/315+t*(109598/31185)),r*=t,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=t*(t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))-.5),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=r*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=r*(13/48+t*(t*(557/1440+t*(281/630+t*(-1983433/1935360)))-.6)),r*=t,this.utg[2]=r*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=r*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),r*=t,this.utg[3]=r*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=r*(49561/161280+t*(-179/168+t*(6601661/7257600))),r*=t,this.utg[4]=r*(-4583/161280+t*(108847/3991680)),this.gtu[4]=r*(34729/80640+t*(-3418889/1995840)),r*=t,this.utg[5]=r*(-20648693/638668800),this.gtu[5]=.6650675310896665*r;var n=st(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(e,t){for(var r,n=2*Math.cos(t),a=e.length-1,s=e[a],i=0;--a>=0;)r=n*s-i+e[a],i=s,s=r;return Math.sin(t)*r}(this.gtu,2*n))},forward:function(e){var t=V(e.x-this.long0),r=e.y;r=st(this.cbg,r);var n=Math.sin(r),a=Math.cos(r),s=Math.sin(t),i=Math.cos(t);r=Math.atan2(n,i*a),t=Math.atan2(s*a,nt(n,a*i)),t=at(Math.tan(t));var o,c,l=it(this.gtu,2*r,2*t);return r+=l[0],t+=l[1],Math.abs(t)<=2.623395162778?(o=this.a*(this.Qn*t)+this.x0,c=this.a*(this.Qn*r+this.Zb)+this.y0):(o=1/0,c=1/0),e.x=o,e.y=c,e},inverse:function(e){var t,r,n=(e.x-this.x0)*(1/this.a),a=(e.y-this.y0)*(1/this.a);if(a=(a-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var s=it(this.utg,2*a,2*n);a+=s[0],n+=s[1],n=Math.atan(rt(n));var i=Math.sin(a),o=Math.cos(a),c=Math.sin(n),l=Math.cos(n);a=Math.atan2(i*l,nt(c,l*o)),n=Math.atan2(c,l*o),t=V(n+this.long0),r=st(this.cgb,a)}else t=1/0,r=1/0;return e.x=t,e.y=r,e},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"]};var ct={init:function(){var e=function(e,t){if(void 0===e){if((e=Math.floor(30*(V(t)+Math.PI)/Math.PI)+1)<0)return 0;if(e>60)return 60}return e}(this.zone,this.long0);if(void 0===e)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*f,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,ot.init.apply(this),this.forward=ot.forward,this.inverse=ot.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},lt=function(e,t){return Math.pow((1-e)/(1+e),t)};var ut={init:function(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+g)/(Math.pow(Math.tan(.5*this.lat0+g),this.C)*lt(this.e*e,this.ratexp))},forward:function(e){var t=e.x,r=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+g),this.C)*lt(this.e*Math.sin(r),this.ratexp))-l,e.x=this.C*t,e},inverse:function(e){for(var t=e.x/this.C,r=e.y,n=Math.pow(Math.tan(.5*r+g)/this.K,1/this.C),a=20;a>0&&(r=2*Math.atan(n*lt(this.e*Math.sin(e.y),-.5*this.e))-l,!(Math.abs(r-e.y)<1e-14));--a)e.y=r;return a?(e.x=t,e.y=r,e):null},names:["gauss"]};var dt={init:function(){ut.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(e){var t,r,n,a;return e.x=V(e.x-this.long0),ut.forward.apply(this,[e]),t=Math.sin(e.y),r=Math.cos(e.y),n=Math.cos(e.x),a=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*r*n),e.x=a*r*Math.sin(e.x),e.y=a*(this.cosc0*t-this.sinc0*r*n),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function(e){var t,r,n,a,s;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,s=nt(e.x,e.y)){var i=2*Math.atan2(s,this.R2);t=Math.sin(i),r=Math.cos(i),a=Math.asin(r*this.sinc0+e.y*t*this.cosc0/s),n=Math.atan2(e.x*t,s*this.cosc0*r-e.y*this.sinc0*t)}else a=this.phic0,n=0;return e.x=n,e.y=a,ut.inverse.apply(this,[e]),e.x=V(e.x+this.long0),e},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var ht={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=p&&(this.k0=.5*(1+W(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=p&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=p&&Math.abs(Math.cos(this.lat_ts))>p&&(this.k0=.5*this.cons*G(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/q(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=G(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-l,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(e){var t,r,n,a,s,i,o=e.x,c=e.y,u=Math.sin(c),d=Math.cos(c),h=V(o-this.long0);return Math.abs(Math.abs(o-this.long0)-Math.PI)<=p&&Math.abs(c+this.lat0)<=p?(e.x=NaN,e.y=NaN,e):this.sphere?(t=2*this.k0/(1+this.sinlat0*u+this.coslat0*d*Math.cos(h)),e.x=this.a*t*d*Math.sin(h)+this.x0,e.y=this.a*t*(this.coslat0*u-this.sinlat0*d*Math.cos(h))+this.y0,e):(r=2*Math.atan(this.ssfn_(c,u,this.e))-l,a=Math.cos(r),n=Math.sin(r),Math.abs(this.coslat0)<=p?(s=q(this.e,c*this.con,this.con*u),i=2*this.a*this.k0*s/this.cons,e.x=this.x0+i*Math.sin(o-this.long0),e.y=this.y0-this.con*i*Math.cos(o-this.long0),e):(Math.abs(this.sinlat0)<p?(t=2*this.a*this.k0/(1+a*Math.cos(h)),e.y=t*n):(t=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*a*Math.cos(h))),e.y=t*(this.cosX0*n-this.sinX0*a*Math.cos(h))+this.y0),e.x=t*a*Math.sin(h)+this.x0,e))},inverse:function(e){var t,r,n,a,s;e.x-=this.x0,e.y-=this.y0;var i=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var o=2*Math.atan(i/(2*this.a*this.k0));return t=this.long0,r=this.lat0,i<=p?(e.x=t,e.y=r,e):(r=Math.asin(Math.cos(o)*this.sinlat0+e.y*Math.sin(o)*this.coslat0/i),t=Math.abs(this.coslat0)<p?this.lat0>0?V(this.long0+Math.atan2(e.x,-1*e.y)):V(this.long0+Math.atan2(e.x,e.y)):V(this.long0+Math.atan2(e.x*Math.sin(o),i*this.coslat0*Math.cos(o)-e.y*this.sinlat0*Math.sin(o))),e.x=t,e.y=r,e)}if(Math.abs(this.coslat0)<=p){if(i<=p)return r=this.lat0,t=this.long0,e.x=t,e.y=r,e;e.x*=this.con,e.y*=this.con,n=i*this.cons/(2*this.a*this.k0),r=this.con*H(this.e,n),t=this.con*V(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else a=2*Math.atan(i*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,i<=p?s=this.X0:(s=Math.asin(Math.cos(a)*this.sinX0+e.y*Math.sin(a)*this.cosX0/i),t=V(this.long0+Math.atan2(e.x*Math.sin(a),i*this.cosX0*Math.cos(a)-e.y*this.sinX0*Math.sin(a)))),r=-1*H(this.e,Math.tan(.5*(l+s)));return e.x=t,e.y=r,e},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],ssfn_:function(e,t,r){return t*=r,Math.tan(.5*(l+e))*Math.pow((1-t)/(1+t),.5*r)}};var pt={init:function(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),r=this.a,n=1/this.rf,a=2*n-Math.pow(n,2),s=this.e=Math.sqrt(a);this.R=this.k0*r*Math.sqrt(1-a)/(1-a*Math.pow(t,2)),this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var i=Math.log(Math.tan(Math.PI/4+this.b0/2)),o=Math.log(Math.tan(Math.PI/4+e/2)),c=Math.log((1+s*t)/(1-s*t));this.K=i-this.alpha*o+this.alpha*s/2*c},forward:function(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),n=-this.alpha*(t+r)+this.K,a=2*(Math.atan(Math.exp(n))-Math.PI/4),s=this.alpha*(e.x-this.lambda0),i=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(a)+Math.cos(this.b0)*Math.cos(s))),o=Math.asin(Math.cos(this.b0)*Math.sin(a)-Math.sin(this.b0)*Math.cos(a)*Math.cos(s));return e.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,e.x=this.R*i+this.x0,e},inverse:function(e){for(var t=e.x-this.x0,r=e.y-this.y0,n=t/this.R,a=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(a)+Math.sin(this.b0)*Math.cos(a)*Math.cos(n)),i=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(a))),o=this.lambda0+i/this.alpha,c=0,l=s,u=-1e3,d=0;Math.abs(l-u)>1e-7;){if(++d>20)return;c=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),u=l,l=2*Math.atan(Math.exp(c))-Math.PI/2}return e.x=o,e.y=l,e},names:["somerc"]},ft=1e-7;var mt={init:function(){var e,t,r,n,a,s,i,o,c,u,d,h=0,m=0,b=0,v=0,_=0,w=0,j=0;this.no_off=function(e){var t="object"===typeof e.PROJECTION?Object.keys(e.PROJECTION)[0]:e.PROJECTION;return"no_uoff"in e||"no_off"in e||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(t)}(this),this.no_rot="no_rot"in this;var x=!1;"alpha"in this&&(x=!0);var M=!1;if("rectified_grid_angle"in this&&(M=!0),x&&(j=this.alpha),M&&(h=this.rectified_grid_angle*f),x||M)m=this.longc;else if(b=this.long1,_=this.lat1,v=this.long2,w=this.lat2,Math.abs(_-w)<=ft||(e=Math.abs(_))<=ft||Math.abs(e-l)<=ft||Math.abs(Math.abs(this.lat0)-l)<=ft||Math.abs(Math.abs(w)-l)<=ft)throw new Error;var O=1-this.es;t=Math.sqrt(O),Math.abs(this.lat0)>p?(o=Math.sin(this.lat0),r=Math.cos(this.lat0),e=1-this.es*o*o,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/O),this.A=this.B*this.k0*t/e,(a=(n=this.B*t/(r*Math.sqrt(e)))*n-1)<=0?a=0:(a=Math.sqrt(a),this.lat0<0&&(a=-a)),this.E=a+=n,this.E*=Math.pow(q(this.e,this.lat0,o),this.B)):(this.B=1/t,this.A=this.k0,this.E=n=a=1),x||M?(x?(d=Math.asin(Math.sin(j)/n),M||(h=j)):(d=h,j=Math.asin(n*Math.sin(d))),this.lam0=m-Math.asin(.5*(a-1/a)*Math.tan(d))/this.B):(s=Math.pow(q(this.e,_,Math.sin(_)),this.B),i=Math.pow(q(this.e,w,Math.sin(w)),this.B),a=this.E/s,c=(i-s)/(i+s),u=((u=this.E*this.E)-i*s)/(u+i*s),(e=b-v)<-Math.pi?v-=y:e>Math.pi&&(v+=y),this.lam0=V(.5*(b+v)-Math.atan(u*Math.tan(.5*this.B*(b-v))/c)/this.B),d=Math.atan(2*Math.sin(this.B*V(b-this.lam0))/(a-1/a)),h=j=Math.asin(n*Math.sin(d))),this.singam=Math.sin(d),this.cosgam=Math.cos(d),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(j))),this.lat0<0&&(this.u_0=-this.u_0)),a=.5*d,this.v_pole_n=this.ArB*Math.log(Math.tan(g-a)),this.v_pole_s=this.ArB*Math.log(Math.tan(g+a))},forward:function(e){var t,r,n,a,s,i,o,c,u={};if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-l)>p){if(t=.5*((s=this.E/Math.pow(q(this.e,e.y,Math.sin(e.y)),this.B))-(i=1/s)),r=.5*(s+i),a=Math.sin(this.B*e.x),n=(t*this.singam-a*this.cosgam)/r,Math.abs(Math.abs(n)-1)<p)throw new Error;c=.5*this.ArB*Math.log((1-n)/(1+n)),i=Math.cos(this.B*e.x),o=Math.abs(i)<ft?this.A*e.x:this.ArB*Math.atan2(t*this.cosgam+a*this.singam,i)}else c=e.y>0?this.v_pole_n:this.v_pole_s,o=this.ArB*e.y;return this.no_rot?(u.x=o,u.y=c):(o-=this.u_0,u.x=c*this.cosrot+o*this.sinrot,u.y=o*this.cosrot-c*this.sinrot),u.x=this.a*u.x+this.x0,u.y=this.a*u.y+this.y0,u},inverse:function(e){var t,r,n,a,s,i,o,c={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(r=e.y,t=e.x):(r=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),a=.5*((n=Math.exp(-this.BrA*r))-1/n),s=.5*(n+1/n),o=((i=Math.sin(this.BrA*t))*this.cosgam+a*this.singam)/s,Math.abs(Math.abs(o)-1)<p)c.x=0,c.y=o<0?-l:l;else{if(c.y=this.E/Math.sqrt((1+o)/(1-o)),c.y=H(this.e,Math.pow(c.y,1/this.B)),c.y===1/0)throw new Error;c.x=-this.rB*Math.atan2(a*this.cosgam-i*this.singam,Math.cos(this.BrA*t))}return c.x+=this.lam0,c},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};var gt={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<p)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),r=Math.cos(this.lat1),n=G(this.e,t,r),a=q(this.e,this.lat1,t),s=Math.sin(this.lat2),i=Math.cos(this.lat2),o=G(this.e,s,i),c=q(this.e,this.lat2,s),l=q(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>p?this.ns=Math.log(n/o)/Math.log(a/c):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=n/(this.ns*Math.pow(a,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(e){var t=e.x,r=e.y;Math.abs(2*Math.abs(r)-Math.PI)<=p&&(r=W(r)*(l-2*p));var n,a,s=Math.abs(Math.abs(r)-l);if(s>p)n=q(this.e,r,Math.sin(r)),a=this.a*this.f0*Math.pow(n,this.ns);else{if((s=r*this.ns)<=0)return null;a=0}var i=this.ns*V(t-this.long0);return e.x=this.k0*(a*Math.sin(i))+this.x0,e.y=this.k0*(this.rh-a*Math.cos(i))+this.y0,e},inverse:function(e){var t,r,n,a,s,i=(e.x-this.x0)/this.k0,o=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(i*i+o*o),r=1):(t=-Math.sqrt(i*i+o*o),r=-1);var c=0;if(0!==t&&(c=Math.atan2(r*i,r*o)),0!==t||this.ns>0){if(r=1/this.ns,n=Math.pow(t/(this.a*this.f0),r),-9999===(a=H(this.e,n)))return null}else a=-l;return s=V(c/this.ns+this.long0),e.x=s,e.y=a,e},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]};var yt={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(e){var t,r,n,a,s,i,o,c=e.x,l=e.y,u=V(c-this.long0);return t=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/t)-this.s45),n=-u*this.alfa,a=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),s=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(a)),i=this.n*s,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(a/2+this.s45),this.n),e.y=o*Math.cos(i)/1,e.x=o*Math.sin(i)/1,this.czech||(e.y*=-1,e.x*=-1),e},inverse:function(e){var t,r,n,a,s,i,o,c=e.x;e.x=e.y,e.y=c,this.czech||(e.y*=-1,e.x*=-1),s=Math.sqrt(e.x*e.x+e.y*e.y),a=Math.atan2(e.y,e.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(a)),r=Math.asin(Math.cos(n)*Math.sin(a)/Math.cos(t)),e.x=this.long0-r/this.alfa,i=t,o=0;var l=0;do{e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(i))/(1-this.e*Math.sin(i)),this.e/2))-this.s45),Math.abs(i-e.y)<1e-10&&(o=1),i=e.y,l+=1}while(0===o&&l<15);return l>=15?null:e},names:["Krovak","krovak"]},bt=function(e,t,r,n,a){return e*a-t*Math.sin(2*a)+r*Math.sin(4*a)-n*Math.sin(6*a)},vt=function(e){return 1-.25*e*(1+e/16*(3+1.25*e))},_t=function(e){return.375*e*(1+.25*e*(1+.46875*e))},wt=function(e){return.05859375*e*e*(1+.75*e)},jt=function(e){return e*e*e*(35/3072)},xt=function(e,t,r){var n=t*r;return e/Math.sqrt(1-n*n)},Mt=function(e){return Math.abs(e)<l?e:e-W(e)*Math.PI},Ot=function(e,t,r,n,a){var s,i;s=e/t;for(var o=0;o<15;o++)if(s+=i=(e-(t*s-r*Math.sin(2*s)+n*Math.sin(4*s)-a*Math.sin(6*s)))/(t-2*r*Math.cos(2*s)+4*n*Math.cos(4*s)-6*a*Math.cos(6*s)),Math.abs(i)<=1e-10)return s;return NaN};var kt={init:function(){this.sphere||(this.e0=vt(this.es),this.e1=_t(this.es),this.e2=wt(this.es),this.e3=jt(this.es),this.ml0=this.a*bt(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(e){var t,r,n=e.x,a=e.y;if(n=V(n-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(a)*Math.sin(n)),r=this.a*(Math.atan2(Math.tan(a),Math.cos(n))-this.lat0);else{var s=Math.sin(a),i=Math.cos(a),o=xt(this.a,this.e,s),c=Math.tan(a)*Math.tan(a),l=n*Math.cos(a),u=l*l,d=this.es*i*i/(1-this.es);t=o*l*(1-u*c*(1/6-(8-c+8*d)*u/120)),r=this.a*bt(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+o*s/i*u*(.5+(5-c+6*d)*u/24)}return e.x=t+this.x0,e.y=r+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,r,n=e.x/this.a,a=e.y/this.a;if(this.sphere){var s=a+this.lat0;t=Math.asin(Math.sin(s)*Math.cos(n)),r=Math.atan2(Math.tan(n),Math.cos(s))}else{var i=this.ml0/this.a+a,o=Ot(i,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-l)<=p)return e.x=this.long0,e.y=l,a<0&&(e.y*=-1),e;var c=xt(this.a,this.e,Math.sin(o)),u=c*c*c/this.a/this.a*(1-this.es),d=Math.pow(Math.tan(o),2),h=n*this.a/c,f=h*h;t=o-c*Math.tan(o)/u*h*h*(.5-(1+3*d)*h*h/24),r=h*(1-f*(d/3+(1+3*d)*d*f/15))/Math.cos(o)}return e.x=V(r+this.long0),e.y=Mt(t),e},names:["Cassini","Cassini_Soldner","cass"]},Ct=function(e,t){var r;return e>1e-7?(1-e*e)*(t/(1-(r=e*t)*r)-.5/e*Math.log((1-r)/(1+r))):2*t};var Et=.3333333333333333,St=.17222222222222222,Nt=.10257936507936508,It=.06388888888888888,Dt=.0664021164021164,Tt=.016415012942191543;var At={init:function(){var e,t=Math.abs(this.lat0);if(Math.abs(t-l)<p?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<p?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Ct(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(e){var t,r=[];return r[0]=e*Et,t=e*e,r[0]+=t*St,r[1]=t*It,t*=e,r[0]+=t*Nt,r[1]+=t*Dt,r[2]=t*Tt,r}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Ct(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(e){var t,r,n,a,s,i,o,c,u,d,h=e.x,f=e.y;if(h=V(h-this.long0),this.sphere){if(s=Math.sin(f),d=Math.cos(f),n=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((r=this.mode===this.EQUIT?1+d*n:1+this.sinph0*s+this.cosph0*d*n)<=p)return null;t=(r=Math.sqrt(2/r))*d*Math.sin(h),r*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*d*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(f+this.lat0)<p)return null;r=g-.5*f,t=(r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)))*Math.sin(h),r*=n}}else{switch(o=0,c=0,u=0,n=Math.cos(h),a=Math.sin(h),s=Math.sin(f),i=Ct(this.e,s),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(o=i/this.qp,c=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:u=1+this.sinb1*o+this.cosb1*c*n;break;case this.EQUIT:u=1+c*n;break;case this.N_POLE:u=l+f,i=this.qp-i;break;case this.S_POLE:u=f-l,i=this.qp+i}if(Math.abs(u)<p)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),r=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*o-this.sinb1*c*n):(u=Math.sqrt(2/(1+c*n)))*o*this.ymf,t=this.xmf*u*c*a;break;case this.N_POLE:case this.S_POLE:i>=0?(t=(u=Math.sqrt(i))*a,r=n*(this.mode===this.S_POLE?u:-u)):t=r=0}}return e.x=this.a*t+this.x0,e.y=this.a*r+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,r,n,a,s,i,o,c=e.x/this.a,u=e.y/this.a;if(this.sphere){var d,h=0,f=0;if((r=.5*(d=Math.sqrt(c*c+u*u)))>1)return null;switch(r=2*Math.asin(r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(f=Math.sin(r),h=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(d)<=p?0:Math.asin(u*f/d),c*=f,u=h*d;break;case this.OBLIQ:r=Math.abs(d)<=p?this.lat0:Math.asin(h*this.sinph0+u*f*this.cosph0/d),c*=f*this.cosph0,u=(h-Math.sin(r)*this.sinph0)*d;break;case this.N_POLE:u=-u,r=l-r;break;case this.S_POLE:r-=l}t=0!==u||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(c,u):0}else{if(o=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c/=this.dd,u*=this.dd,(i=Math.sqrt(c*c+u*u))<p)return e.x=this.long0,e.y=this.lat0,e;a=2*Math.asin(.5*i/this.rq),n=Math.cos(a),c*=a=Math.sin(a),this.mode===this.OBLIQ?(o=n*this.sinb1+u*a*this.cosb1/i,s=this.qp*o,u=i*this.cosb1*n-u*this.sinb1*a):(o=u*a/i,s=this.qp*o,u=i*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(u=-u),!(s=c*c+u*u))return e.x=this.long0,e.y=this.lat0,e;o=1-s/this.qp,this.mode===this.S_POLE&&(o=-o)}t=Math.atan2(c,u),r=function(e,t){var r=e+e;return e+t[0]*Math.sin(r)+t[1]*Math.sin(r+r)+t[2]*Math.sin(r+r+r)}(Math.asin(o),this.apa)}return e.x=V(this.long0+t),e.y=r,e},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},Pt=function(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)};var Lt={init:function(){Math.abs(this.lat1+this.lat2)<p||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=G(this.e3,this.sin_po,this.cos_po),this.qs1=Ct(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=G(this.e3,this.sin_po,this.cos_po),this.qs2=Ct(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Ct(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>p?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(e){var t=e.x,r=e.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var n=Ct(this.e3,this.sin_phi),a=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,s=this.ns0*V(t-this.long0),i=a*Math.sin(s)+this.x0,o=this.rh-a*Math.cos(s)+this.y0;return e.x=i,e.y=o,e},inverse:function(e){var t,r,n,a,s,i;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),n=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),n=-1),a=0,0!==t&&(a=Math.atan2(n*e.x,n*e.y)),n=t*this.ns0/this.a,this.sphere?i=Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,i=this.phi1z(this.e3,r)),s=V(a/this.ns0+this.long0),e.x=s,e.y=i,e},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(e,t){var r,n,a,s,i=Pt(.5*t);if(e<p)return i;for(var o=e*e,c=1;c<=25;c++)if(i+=s=.5*(a=1-(n=e*(r=Math.sin(i)))*n)*a/Math.cos(i)*(t/(1-o)-r/a+.5/e*Math.log((1-n)/(1+n))),Math.abs(s)<=1e-7)return i;return null}};var Rt={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(e){var t,r,n,a,s,i,o,c=e.x,l=e.y;return n=V(c-this.long0),t=Math.sin(l),r=Math.cos(l),a=Math.cos(n),1,(s=this.sin_p14*t+this.cos_p14*r*a)>0||Math.abs(s)<=p?(i=this.x0+1*this.a*r*Math.sin(n)/s,o=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*r*a)/s):(i=this.x0+this.infinity_dist*r*Math.sin(n),o=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*r*a)),e.x=i,e.y=o,e},inverse:function(e){var t,r,n,a,s,i;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(a=Math.atan2(t,this.rc),r=Math.sin(a),n=Math.cos(a),i=Pt(n*this.sin_p14+e.y*r*this.cos_p14/t),s=Math.atan2(e.x*r,t*this.cos_p14*n-e.y*this.sin_p14*r),s=V(this.long0+s)):(i=this.phic0,s=0),e.x=s,e.y=i,e},names:["gnom"]};var Ft={init:function(){this.sphere||(this.k0=G(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(e){var t,r,n=e.x,a=e.y,s=V(n-this.long0);if(this.sphere)t=this.x0+this.a*s*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(a)/Math.cos(this.lat_ts);else{var i=Ct(this.e,Math.sin(a));t=this.x0+this.a*this.k0*s,r=this.y0+this.a*i*.5/this.k0}return e.x=t,e.y=r,e},inverse:function(e){var t,r;return e.x-=this.x0,e.y-=this.y0,this.sphere?(t=V(this.long0+e.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(r=function(e,t){var r=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-r)<1e-6)return t<0?-1*l:l;for(var n,a,s,i,o=Math.asin(.5*t),c=0;c<30;c++)if(a=Math.sin(o),s=Math.cos(o),i=e*a,o+=n=Math.pow(1-i*i,2)/(2*s)*(t/(1-e*e)-a/(1-i*i)+.5/e*Math.log((1-i)/(1+i))),Math.abs(n)<=1e-10)return o;return NaN}(this.e,2*e.y*this.k0/this.a),t=V(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=r,e},names:["cea"]};var Bt={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(e){var t=e.x,r=e.y,n=V(t-this.long0),a=Mt(r-this.lat0);return e.x=this.x0+this.a*n*this.rc,e.y=this.y0+this.a*a,e},inverse:function(e){var t=e.x,r=e.y;return e.x=V(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=Mt(this.lat0+(r-this.y0)/this.a),e},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var Ut={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=vt(this.es),this.e1=_t(this.es),this.e2=wt(this.es),this.e3=jt(this.es),this.ml0=this.a*bt(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(e){var t,r,n,a=e.x,s=e.y,i=V(a-this.long0);if(n=i*Math.sin(s),this.sphere)Math.abs(s)<=p?(t=this.a*i,r=-1*this.a*this.lat0):(t=this.a*Math.sin(n)/Math.tan(s),r=this.a*(Mt(s-this.lat0)+(1-Math.cos(n))/Math.tan(s)));else if(Math.abs(s)<=p)t=this.a*i,r=-1*this.ml0;else{var o=xt(this.a,this.e,Math.sin(s))/Math.tan(s);t=o*Math.sin(n),r=this.a*bt(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+o*(1-Math.cos(n))}return e.x=t+this.x0,e.y=r+this.y0,e},inverse:function(e){var t,r,n,a,s,i,o,c,l;if(n=e.x-this.x0,a=e.y-this.y0,this.sphere)if(Math.abs(a+this.a*this.lat0)<=p)t=V(n/this.a+this.long0),r=0;else{var u;for(i=this.lat0+a/this.a,o=n*n/this.a/this.a+i*i,c=i,s=20;s;--s)if(c+=l=-1*(i*(c*(u=Math.tan(c))+1)-c-.5*(c*c+o)*u)/((c-i)/u-1),Math.abs(l)<=p){r=c;break}t=V(this.long0+Math.asin(n*Math.tan(c)/this.a)/Math.sin(r))}else if(Math.abs(a+this.ml0)<=p)r=0,t=V(this.long0+n/this.a);else{var d,h,f,m,g;for(i=(this.ml0+a)/this.a,o=n*n/this.a/this.a+i*i,c=i,s=20;s;--s)if(g=this.e*Math.sin(c),d=Math.sqrt(1-g*g)*Math.tan(c),h=this.a*bt(this.e0,this.e1,this.e2,this.e3,c),f=this.e0-2*this.e1*Math.cos(2*c)+4*this.e2*Math.cos(4*c)-6*this.e3*Math.cos(6*c),c-=l=(i*(d*(m=h/this.a)+1)-m-.5*d*(m*m+o))/(this.es*Math.sin(2*c)*(m*m+o-2*i*m)/(4*d)+(i-m)*(d*f-2/Math.sin(2*c))-f),Math.abs(l)<=p){r=c;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),t=V(this.long0+Math.asin(n*d/this.a)/Math.sin(r))}return e.x=t,e.y=r,e},names:["Polyconic","poly"]};var zt={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(e){var t,r=e.x,n=e.y-this.lat0,a=r-this.long0,s=n/c*1e-5,i=a,o=1,l=0;for(t=1;t<=10;t++)o*=s,l+=this.A[t]*o;var u,d=l,h=i,p=1,f=0,m=0,g=0;for(t=1;t<=6;t++)u=f*d+p*h,p=p*d-f*h,f=u,m=m+this.B_re[t]*p-this.B_im[t]*f,g=g+this.B_im[t]*p+this.B_re[t]*f;return e.x=g*this.a+this.x0,e.y=m*this.a+this.y0,e},inverse:function(e){var t,r,n=e.x,a=e.y,s=n-this.x0,i=(a-this.y0)/this.a,o=s/this.a,l=1,u=0,d=0,h=0;for(t=1;t<=6;t++)r=u*i+l*o,l=l*i-u*o,u=r,d=d+this.C_re[t]*l-this.C_im[t]*u,h=h+this.C_im[t]*l+this.C_re[t]*u;for(var p=0;p<this.iterations;p++){var f,m=d,g=h,y=i,b=o;for(t=2;t<=6;t++)f=g*d+m*h,m=m*d-g*h,g=f,y+=(t-1)*(this.B_re[t]*m-this.B_im[t]*g),b+=(t-1)*(this.B_im[t]*m+this.B_re[t]*g);m=1,g=0;var v=this.B_re[1],_=this.B_im[1];for(t=2;t<=6;t++)f=g*d+m*h,m=m*d-g*h,g=f,v+=t*(this.B_re[t]*m-this.B_im[t]*g),_+=t*(this.B_im[t]*m+this.B_re[t]*g);var w=v*v+_*_;d=(y*v+b*_)/w,h=(b*v-y*_)/w}var j=d,x=h,M=1,O=0;for(t=1;t<=9;t++)M*=j,O+=this.D[t]*M;var k=this.lat0+O*c*1e5,C=this.long0+x;return e.x=C,e.y=k,e},names:["New_Zealand_Map_Grid","nzmg"]};var Yt={init:function(){},forward:function(e){var t=e.x,r=e.y,n=V(t-this.long0),a=this.x0+this.a*n,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return e.x=a,e.y=s,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=V(this.long0+e.x/this.a),r=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=r,e},names:["Miller_Cylindrical","mill"]};var Gt={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Xe(this.es)},forward:function(e){var t,r,n=e.x,a=e.y;if(n=V(n-this.long0),this.sphere){if(this.m)for(var s=this.n*Math.sin(a),i=20;i;--i){var o=(this.m*a+Math.sin(a)-s)/(this.m+Math.cos(a));if(a-=o,Math.abs(o)<p)break}else a=1!==this.n?Math.asin(this.n*Math.sin(a)):a;t=this.a*this.C_x*n*(this.m+Math.cos(a)),r=this.a*this.C_y*a}else{var c=Math.sin(a),l=Math.cos(a);r=this.a*$e(a,c,l,this.en),t=this.a*n*l/Math.sqrt(1-this.es*c*c)}return e.x=t,e.y=r,e},inverse:function(e){var t,r,n,a;return e.x-=this.x0,n=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,n/=this.C_x*(this.m+Math.cos(t)),this.m?t=Pt((this.m*t+Math.sin(t))/this.n):1!==this.n&&(t=Pt(Math.sin(t)/this.n)),n=V(n+this.long0),t=Mt(t)):(t=et(e.y/this.a,this.es,this.en),(a=Math.abs(t))<l?(a=Math.sin(t),r=this.long0+e.x*Math.sqrt(1-this.es*a*a)/(this.a*Math.cos(t)),n=V(r)):a-p<l&&(n=this.long0)),e.x=n,e.y=t,e},names:["Sinusoidal","sinu"]};var Wt={init:function(){},forward:function(e){for(var t=e.x,r=e.y,n=V(t-this.long0),a=r,s=Math.PI*Math.sin(r);;){var i=-(a+Math.sin(a)-s)/(1+Math.cos(a));if(a+=i,Math.abs(i)<p)break}a/=2,Math.PI/2-Math.abs(r)<p&&(n=0);var o=.900316316158*this.a*n*Math.cos(a)+this.x0,c=1.4142135623731*this.a*Math.sin(a)+this.y0;return e.x=o,e.y=c,e},inverse:function(e){var t,r;e.x-=this.x0,e.y-=this.y0,r=e.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),t=Math.asin(r);var n=V(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),r=(2*t+Math.sin(2*t))/Math.PI,Math.abs(r)>1&&(r=1);var a=Math.asin(r);return e.x=n,e.y=a,e},names:["Mollweide","moll"]};var Vt={init:function(){Math.abs(this.lat1+this.lat2)<p||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=vt(this.es),this.e1=_t(this.es),this.e2=wt(this.es),this.e3=jt(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=G(this.e,this.sinphi,this.cosphi),this.ml1=bt(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<p?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=G(this.e,this.sinphi,this.cosphi),this.ml2=bt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=bt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(e){var t,r=e.x,n=e.y;if(this.sphere)t=this.a*(this.g-n);else{var a=bt(this.e0,this.e1,this.e2,this.e3,n);t=this.a*(this.g-a)}var s=this.ns*V(r-this.long0),i=this.x0+t*Math.sin(s),o=this.y0+this.rh-t*Math.cos(s);return e.x=i,e.y=o,e},inverse:function(e){var t,r,n,a;e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns>=0?(r=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(r=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var s=0;if(0!==r&&(s=Math.atan2(t*e.x,t*e.y)),this.sphere)return a=V(this.long0+s/this.ns),n=Mt(this.g-r/this.a),e.x=a,e.y=n,e;var i=this.g-r/this.a;return n=Ot(i,this.e0,this.e1,this.e2,this.e3),a=V(this.long0+s/this.ns),e.x=a,e.y=n,e},names:["Equidistant_Conic","eqdc"]};var qt={init:function(){this.R=this.a},forward:function(e){var t,r,n=e.x,a=e.y,s=V(n-this.long0);Math.abs(a)<=p&&(t=this.x0+this.R*s,r=this.y0);var i=Pt(2*Math.abs(a/Math.PI));(Math.abs(s)<=p||Math.abs(Math.abs(a)-l)<=p)&&(t=this.x0,r=a>=0?this.y0+Math.PI*this.R*Math.tan(.5*i):this.y0+Math.PI*this.R*-Math.tan(.5*i));var o=.5*Math.abs(Math.PI/s-s/Math.PI),c=o*o,u=Math.sin(i),d=Math.cos(i),h=d/(u+d-1),f=h*h,m=h*(2/u-1),g=m*m,y=Math.PI*this.R*(o*(h-g)+Math.sqrt(c*(h-g)*(h-g)-(g+c)*(f-g)))/(g+c);s<0&&(y=-y),t=this.x0+y;var b=c+h;return y=Math.PI*this.R*(m*b-o*Math.sqrt((g+c)*(c+1)-b*b))/(g+c),r=a>=0?this.y0+y:this.y0-y,e.x=t,e.y=r,e},inverse:function(e){var t,r,n,a,s,i,o,c,l,u,d,h;return e.x-=this.x0,e.y-=this.y0,d=Math.PI*this.R,s=(n=e.x/d)*n+(a=e.y/d)*a,d=3*(a*a/(c=-2*(i=-Math.abs(a)*(1+s))+1+2*a*a+s*s)+(2*(o=i-2*a*a+n*n)*o*o/c/c/c-9*i*o/c/c)/27)/(l=(i-o*o/3/c)/c)/(u=2*Math.sqrt(-l/3)),Math.abs(d)>1&&(d=d>=0?1:-1),h=Math.acos(d)/3,r=e.y>=0?(-u*Math.cos(h+Math.PI/3)-o/3/c)*Math.PI:-(-u*Math.cos(h+Math.PI/3)-o/3/c)*Math.PI,t=Math.abs(n)<p?this.long0:V(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(n*n-a*a)+s*s))/2/n),e.x=t,e.y=r,e},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var Ht={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(e){var t,r,n,a,s,i,o,c,u,d,h,f,m,g,y,b,v,_,w,j,x,M,O=e.x,k=e.y,C=Math.sin(e.y),E=Math.cos(e.y),S=V(O-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=p?(e.x=this.x0+this.a*(l-k)*Math.sin(S),e.y=this.y0-this.a*(l-k)*Math.cos(S),e):Math.abs(this.sin_p12+1)<=p?(e.x=this.x0+this.a*(l+k)*Math.sin(S),e.y=this.y0+this.a*(l+k)*Math.cos(S),e):(_=this.sin_p12*C+this.cos_p12*E*Math.cos(S),v=(b=Math.acos(_))?b/Math.sin(b):1,e.x=this.x0+this.a*v*E*Math.sin(S),e.y=this.y0+this.a*v*(this.cos_p12*C-this.sin_p12*E*Math.cos(S)),e):(t=vt(this.es),r=_t(this.es),n=wt(this.es),a=jt(this.es),Math.abs(this.sin_p12-1)<=p?(s=this.a*bt(t,r,n,a,l),i=this.a*bt(t,r,n,a,k),e.x=this.x0+(s-i)*Math.sin(S),e.y=this.y0-(s-i)*Math.cos(S),e):Math.abs(this.sin_p12+1)<=p?(s=this.a*bt(t,r,n,a,l),i=this.a*bt(t,r,n,a,k),e.x=this.x0+(s+i)*Math.sin(S),e.y=this.y0+(s+i)*Math.cos(S),e):(o=C/E,c=xt(this.a,this.e,this.sin_p12),u=xt(this.a,this.e,C),d=Math.atan((1-this.es)*o+this.es*c*this.sin_p12/(u*E)),w=0===(h=Math.atan2(Math.sin(S),this.cos_p12*Math.tan(d)-this.sin_p12*Math.cos(S)))?Math.asin(this.cos_p12*Math.sin(d)-this.sin_p12*Math.cos(d)):Math.abs(Math.abs(h)-Math.PI)<=p?-Math.asin(this.cos_p12*Math.sin(d)-this.sin_p12*Math.cos(d)):Math.asin(Math.sin(S)*Math.cos(d)/Math.sin(h)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),b=c*w*(1-(j=w*w)*(y=(m=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*m)*(1-y)/6+(x=j*w)/8*(g=f*m)*(1-2*y)+(M=x*w)/120*(y*(4-7*y)-3*f*f*(1-7*y))-M*w/48*g),e.x=this.x0+b*Math.sin(h),e.y=this.y0+b*Math.cos(h),e))},inverse:function(e){var t,r,n,a,s,i,o,c,u,d,h,f,m,g,y,b,v,_,w,j,x,M,O;if(e.x-=this.x0,e.y-=this.y0,this.sphere){if((t=Math.sqrt(e.x*e.x+e.y*e.y))>2*l*this.a)return;return r=t/this.a,n=Math.sin(r),a=Math.cos(r),s=this.long0,Math.abs(t)<=p?i=this.lat0:(i=Pt(a*this.sin_p12+e.y*n*this.cos_p12/t),o=Math.abs(this.lat0)-l,s=Math.abs(o)<=p?this.lat0>=0?V(this.long0+Math.atan2(e.x,-e.y)):V(this.long0-Math.atan2(-e.x,e.y)):V(this.long0+Math.atan2(e.x*n,t*this.cos_p12*a-e.y*this.sin_p12*n))),e.x=s,e.y=i,e}return c=vt(this.es),u=_t(this.es),d=wt(this.es),h=jt(this.es),Math.abs(this.sin_p12-1)<=p?(f=this.a*bt(c,u,d,h,l),t=Math.sqrt(e.x*e.x+e.y*e.y),i=Ot((f-t)/this.a,c,u,d,h),s=V(this.long0+Math.atan2(e.x,-1*e.y)),e.x=s,e.y=i,e):Math.abs(this.sin_p12+1)<=p?(f=this.a*bt(c,u,d,h,l),t=Math.sqrt(e.x*e.x+e.y*e.y),i=Ot((t-f)/this.a,c,u,d,h),s=V(this.long0+Math.atan2(e.x,e.y)),e.x=s,e.y=i,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),y=Math.atan2(e.x,e.y),m=xt(this.a,this.e,this.sin_p12),b=Math.cos(y),_=-(v=this.e*this.cos_p12*b)*v/(1-this.es),w=3*this.es*(1-_)*this.sin_p12*this.cos_p12*b/(1-this.es),M=1-_*(x=(j=t/m)-_*(1+_)*Math.pow(j,3)/6-w*(1+3*_)*Math.pow(j,4)/24)*x/2-j*x*x*x/6,g=Math.asin(this.sin_p12*Math.cos(x)+this.cos_p12*Math.sin(x)*b),s=V(this.long0+Math.asin(Math.sin(y)*Math.sin(x)/Math.cos(g))),O=Math.sin(g),i=Math.atan2((O-this.es*M*this.sin_p12)*Math.tan(g),O*(1-this.es)),e.x=s,e.y=i,e)},names:["Azimuthal_Equidistant","aeqd"]};var Kt={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(e){var t,r,n,a,s,i,o,c=e.x,l=e.y;return n=V(c-this.long0),t=Math.sin(l),r=Math.cos(l),a=Math.cos(n),1,((s=this.sin_p14*t+this.cos_p14*r*a)>0||Math.abs(s)<=p)&&(i=1*this.a*r*Math.sin(n),o=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*r*a)),e.x=i,e.y=o,e},inverse:function(e){var t,r,n,a,s,i,o;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),r=Pt(t/this.a),n=Math.sin(r),a=Math.cos(r),i=this.long0,Math.abs(t)<=p?(o=this.lat0,e.x=i,e.y=o,e):(o=Pt(a*this.sin_p14+e.y*n*this.cos_p14/t),s=Math.abs(this.lat0)-l,Math.abs(s)<=p?(i=this.lat0>=0?V(this.long0+Math.atan2(e.x,-e.y)):V(this.long0-Math.atan2(-e.x,e.y)),e.x=i,e.y=o,e):(i=V(this.long0+Math.atan2(e.x*n,t*this.cos_p14*a-e.y*this.sin_p14*n)),e.x=i,e.y=o,e))},names:["ortho"]},Zt=1,Jt=2,Qt=3,Xt=4,$t=5,er=6,tr={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function rr(e,t,r,n){var a;return e<p?(n.value=tr.AREA_0,a=0):(a=Math.atan2(t,r),Math.abs(a)<=g?n.value=tr.AREA_0:a>g&&a<=l+g?(n.value=tr.AREA_1,a-=l):a>l+g||a<=-(l+g)?(n.value=tr.AREA_2,a=a>=0?a-b:a+b):(n.value=tr.AREA_3,a+=l)),a}function nr(e,t){var r=e+t;return r<-b?r+=y:r>+b&&(r-=y),r}var ar={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=l-g/2?this.face=$t:this.lat0<=-(l-g/2)?this.face=er:Math.abs(this.long0)<=g?this.face=Zt:Math.abs(this.long0)<=l+g?this.face=this.long0>0?Jt:Xt:this.face=Qt,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(e){var t,r,n,a,s,i,o={x:0,y:0},c={value:0};if(e.x-=this.long0,t=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(e.y)):e.y,r=e.x,this.face===$t)a=l-t,r>=g&&r<=l+g?(c.value=tr.AREA_0,n=r-l):r>l+g||r<=-(l+g)?(c.value=tr.AREA_1,n=r>0?r-b:r+b):r>-(l+g)&&r<=-g?(c.value=tr.AREA_2,n=r+l):(c.value=tr.AREA_3,n=r);else if(this.face===er)a=l+t,r>=g&&r<=l+g?(c.value=tr.AREA_0,n=-r+l):r<g&&r>=-g?(c.value=tr.AREA_1,n=-r):r<-g&&r>=-(l+g)?(c.value=tr.AREA_2,n=-r-l):(c.value=tr.AREA_3,n=r>0?-r+b:-r-b);else{var u,d,h,p,f,m;this.face===Jt?r=nr(r,+l):this.face===Qt?r=nr(r,+b):this.face===Xt&&(r=nr(r,-l)),p=Math.sin(t),f=Math.cos(t),m=Math.sin(r),u=f*Math.cos(r),d=f*m,h=p,this.face===Zt?n=rr(a=Math.acos(u),h,d,c):this.face===Jt?n=rr(a=Math.acos(d),h,-u,c):this.face===Qt?n=rr(a=Math.acos(-u),h,-d,c):this.face===Xt?n=rr(a=Math.acos(-d),h,u,c):(a=n=0,c.value=tr.AREA_0)}return i=Math.atan(12/b*(n+Math.acos(Math.sin(n)*Math.cos(g))-l)),s=Math.sqrt((1-Math.cos(a))/(Math.cos(i)*Math.cos(i))/(1-Math.cos(Math.atan(1/Math.cos(n))))),c.value===tr.AREA_1?i+=l:c.value===tr.AREA_2?i+=b:c.value===tr.AREA_3&&(i+=1.5*b),o.x=s*Math.cos(i),o.y=s*Math.sin(i),o.x=o.x*this.a+this.x0,o.y=o.y*this.a+this.y0,e.x=o.x,e.y=o.y,e},inverse:function(e){var t,r,n,a,s,i,o,c,u,d,h,p,f={lam:0,phi:0},m={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,r=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),t=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?m.value=tr.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(m.value=tr.AREA_1,t-=l):e.x<0&&-e.x>=Math.abs(e.y)?(m.value=tr.AREA_2,t=t<0?t+b:t-b):(m.value=tr.AREA_3,t+=l),u=b/12*Math.tan(t),s=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),i=Math.atan(s),(o=1-(n=Math.cos(t))*n*(a=Math.tan(r))*a*(1-Math.cos(Math.atan(1/Math.cos(i)))))<-1?o=-1:o>1&&(o=1),this.face===$t)c=Math.acos(o),f.phi=l-c,m.value===tr.AREA_0?f.lam=i+l:m.value===tr.AREA_1?f.lam=i<0?i+b:i-b:m.value===tr.AREA_2?f.lam=i-l:f.lam=i;else if(this.face===er)c=Math.acos(o),f.phi=c-l,m.value===tr.AREA_0?f.lam=-i+l:m.value===tr.AREA_1?f.lam=-i:m.value===tr.AREA_2?f.lam=-i-l:f.lam=i<0?-i-b:-i+b;else{var g,y,v;u=(g=o)*g,y=(u+=(v=u>=1?0:Math.sqrt(1-u)*Math.sin(i))*v)>=1?0:Math.sqrt(1-u),m.value===tr.AREA_1?(u=y,y=-v,v=u):m.value===tr.AREA_2?(y=-y,v=-v):m.value===tr.AREA_3&&(u=y,y=v,v=-u),this.face===Jt?(u=g,g=-y,y=u):this.face===Qt?(g=-g,y=-y):this.face===Xt&&(u=g,g=y,y=-u),f.phi=Math.acos(-v)-l,f.lam=Math.atan2(y,g),this.face===Jt?f.lam=nr(f.lam,-l):this.face===Qt?f.lam=nr(f.lam,-b):this.face===Xt&&(f.lam=nr(f.lam,+l))}return 0!==this.es&&(d=f.phi<0?1:0,h=Math.tan(f.phi),p=this.b/Math.sqrt(h*h+this.one_minus_f_squared),f.phi=Math.atan(Math.sqrt(this.a*this.a-p*p)/(this.one_minus_f*p)),d&&(f.phi=-f.phi)),f.lam+=this.long0,e.x=f.lam,e.y=f.phi,e},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},sr=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],ir=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],or=.8487,cr=1.3523,lr=m/5,ur=1/lr,dr=18,hr=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))};var pr={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(e){var t=V(e.x-this.long0),r=Math.abs(e.y),n=Math.floor(r*lr);n<0?n=0:n>=dr&&(n=17);var a={x:hr(sr[n],r=m*(r-ur*n))*t,y:hr(ir[n],r)};return e.y<0&&(a.y=-a.y),a.x=a.x*this.a*or+this.x0,a.y=a.y*this.a*cr+this.y0,a},inverse:function(e){var t={x:(e.x-this.x0)/(this.a*or),y:Math.abs(e.y-this.y0)/(this.a*cr)};if(t.y>=1)t.x/=sr[18][0],t.y=e.y<0?-l:l;else{var r=Math.floor(t.y*dr);for(r<0?r=0:r>=dr&&(r=17);;)if(ir[r][0]>t.y)--r;else{if(!(ir[r+1][0]<=t.y))break;++r}var n=ir[r],a=5*(t.y-n[0])/(ir[r+1][0]-n[0]);a=function(e,t,r,n){for(var a=t;n;--n){var s=e(a);if(a-=s,Math.abs(s)<r)break}return a}((function(e){return(hr(n,e)-t.y)/function(e,t){return e[1]+t*(2*e[2]+3*t*e[3])}(n,e)}),a,p,100),t.x/=hr(sr[r],a),t.y=(5*r+a)*f,e.y<0&&(t.y=-t.y)}return t.x=V(t.x+this.long0),t},names:["Robinson","robin"]};var fr={init:function(){this.name="geocent"},forward:function(e){return pe(e,this.es,this.a)},inverse:function(e){return fe(e,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},mr=0,gr=1,yr=2,br=3,vr={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};var _r={init:function(){if(Object.keys(vr).forEach(function(e){if("undefined"===typeof this[e])this[e]=vr[e].def;else{if(vr[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);vr[e].num&&(this[e]=parseFloat(this[e]))}vr[e].degrees&&(this[e]=this[e]*f)}.bind(this)),Math.abs(Math.abs(this.lat0)-l)<p?this.mode=this.lat0<0?gr:mr:Math.abs(this.lat0)<p?this.mode=yr:(this.mode=br,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)},forward:function(e){e.x-=this.long0;var t,r,n,a,s=Math.sin(e.y),i=Math.cos(e.y),o=Math.cos(e.x);switch(this.mode){case br:r=this.sinph0*s+this.cosph0*i*o;break;case yr:r=i*o;break;case gr:r=-s;break;case mr:r=s}switch(t=(r=this.pn1/(this.p-r))*i*Math.sin(e.x),this.mode){case br:r*=this.cosph0*s-this.sinph0*i*o;break;case yr:r*=s;break;case mr:r*=-i*o;break;case gr:r*=i*o}return a=1/((n=r*this.cg+t*this.sg)*this.sw*this.h1+this.cw),t=(t*this.cg-r*this.sg)*this.cw*a,r=n*a,e.x=t*this.a,e.y=r*this.a,e},inverse:function(e){e.x/=this.a,e.y/=this.a;var t,r,n,a={x:e.x,y:e.y};n=1/(this.pn1-e.y*this.sw),t=this.pn1*e.x*n,r=this.pn1*e.y*this.cw*n,e.x=t*this.cg+r*this.sg,e.y=r*this.cg-t*this.sg;var s=nt(e.x,e.y);if(Math.abs(s)<p)a.x=0,a.y=e.y;else{var i,o;switch(o=1-s*s*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/s+s/this.pn1),i=Math.sqrt(1-o*o),this.mode){case br:a.y=Math.asin(i*this.sinph0+e.y*o*this.cosph0/s),e.y=(i-this.sinph0*Math.sin(a.y))*s,e.x*=o*this.cosph0;break;case yr:a.y=Math.asin(e.y*o/s),e.y=i*s,e.x*=o;break;case mr:a.y=Math.asin(i),e.y=-e.y;break;case gr:a.y=-Math.asin(i)}a.x=Math.atan2(e.x,e.y)}return e.x=a.x+this.long0,e.y=a.y,e},names:["Tilted_Perspective","tpers"]};var wr,jr={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var e=1-this.es,t=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(e){var t,r,n,a,s=e.x,i=e.y;if(s-=this.long0,"ellipse"===this.shape){i=Math.atan(this.radius_p2*Math.tan(i));var o=this.radius_p/nt(this.radius_p*Math.cos(i),Math.sin(i));if(r=o*Math.cos(s)*Math.cos(i),n=o*Math.sin(s)*Math.cos(i),a=o*Math.sin(i),(this.radius_g-r)*r-n*n-a*a*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;t=this.radius_g-r,this.flip_axis?(e.x=this.radius_g_1*Math.atan(n/nt(a,t)),e.y=this.radius_g_1*Math.atan(a/t)):(e.x=this.radius_g_1*Math.atan(n/t),e.y=this.radius_g_1*Math.atan(a/nt(n,t)))}else"sphere"===this.shape&&(t=Math.cos(i),r=Math.cos(s)*t,n=Math.sin(s)*t,a=Math.sin(i),t=this.radius_g-r,this.flip_axis?(e.x=this.radius_g_1*Math.atan(n/nt(a,t)),e.y=this.radius_g_1*Math.atan(a/t)):(e.x=this.radius_g_1*Math.atan(n/t),e.y=this.radius_g_1*Math.atan(a/nt(n,t))));return e.x=e.x*this.a,e.y=e.y*this.a,e},inverse:function(e){var t,r,n,a,s=-1,i=0,o=0;if(e.x=e.x/this.a,e.y=e.y/this.a,"ellipse"===this.shape){this.flip_axis?(o=Math.tan(e.y/this.radius_g_1),i=Math.tan(e.x/this.radius_g_1)*nt(1,o)):(i=Math.tan(e.x/this.radius_g_1),o=Math.tan(e.y/this.radius_g_1)*nt(1,i));var c=o/this.radius_p;if(t=i*i+c*c+s*s,(n=(r=2*this.radius_g*s)*r-4*t*this.C)<0)return e.x=Number.NaN,e.y=Number.NaN,e;a=(-r-Math.sqrt(n))/(2*t),s=this.radius_g+a*s,i*=a,o*=a,e.x=Math.atan2(i,s),e.y=Math.atan(o*Math.cos(e.x)/s),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if("sphere"===this.shape){if(this.flip_axis?(o=Math.tan(e.y/this.radius_g_1),i=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+o*o)):(i=Math.tan(e.x/this.radius_g_1),o=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+i*i)),t=i*i+o*o+s*s,(n=(r=2*this.radius_g*s)*r-4*t*this.C)<0)return e.x=Number.NaN,e.y=Number.NaN,e;a=(-r-Math.sqrt(n))/(2*t),s=this.radius_g+a*s,i*=a,o*=a,e.x=Math.atan2(i,s),e.y=Math.atan(o*Math.cos(e.x)/s)}return e.x=e.x+this.long0,e},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};Ee.defaultDatum="WGS84",Ee.Proj=he,Ee.WGS84=new Ee.Proj("WGS84"),Ee.Point=Ke,Ee.toPoint=we,Ee.defs=F,Ee.nadgrid=function(e,t){var r=new DataView(t),n=function(e){var t=e.getInt32(8,!1);if(11===t)return!1;t=e.getInt32(8,!0),11!==t&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian");return!0}(r),a=function(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:oe(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}(r,n),s=function(e,t,r){for(var n=176,a=[],s=0;s<t.nSubgrids;s++){var i=le(e,n,r),o=ue(e,n,i,r),c=Math.round(1+(i.upperLongitude-i.lowerLongitude)/i.longitudeInterval),l=Math.round(1+(i.upperLatitude-i.lowerLatitude)/i.latitudeInterval);a.push({ll:[ie(i.lowerLongitude),ie(i.lowerLatitude)],del:[ie(i.longitudeInterval),ie(i.latitudeInterval)],lim:[c,l],count:i.gridNodeCount,cvs:ce(o)}),n+=176+16*i.gridNodeCount}return a}(r,a,n),i={header:a,subgrids:s};return ae[e]=i,i},Ee.transform=Me,Ee.mgrs=Re,Ee.version="__VERSION__",(wr=Ee).Proj.projections.add(tt),wr.Proj.projections.add(ot),wr.Proj.projections.add(ct),wr.Proj.projections.add(dt),wr.Proj.projections.add(ht),wr.Proj.projections.add(pt),wr.Proj.projections.add(mt),wr.Proj.projections.add(gt),wr.Proj.projections.add(yt),wr.Proj.projections.add(kt),wr.Proj.projections.add(At),wr.Proj.projections.add(Lt),wr.Proj.projections.add(Rt),wr.Proj.projections.add(Ft),wr.Proj.projections.add(Bt),wr.Proj.projections.add(Ut),wr.Proj.projections.add(zt),wr.Proj.projections.add(Yt),wr.Proj.projections.add(Gt),wr.Proj.projections.add(Wt),wr.Proj.projections.add(Vt),wr.Proj.projections.add(qt),wr.Proj.projections.add(Ht),wr.Proj.projections.add(Kt),wr.Proj.projections.add(ar),wr.Proj.projections.add(pr),wr.Proj.projections.add(fr),wr.Proj.projections.add(_r),wr.Proj.projections.add(jr);t.default=Ee},2139:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){setTimeout((function(){e.map&&e.map.doubleClickZoom&&e._ctx&&e._ctx.store&&e._ctx.store.getInitialConfigValue&&e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()}),0)},a=function(e){setTimeout((function(){e.map&&e.map.doubleClickZoom&&e.map.doubleClickZoom.disable()}),0)},s={onSetup:function(e){var t=this.newFeature({type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[]]}});return this.addFeature(t),this.clearSelectedFeatures(),a(this),this.updateUIClasses({mouse:"add"}),this.setActionableState({trash:!0}),{rectangle:t}},onTap:function(e,t){e.startPoint&&this.onMouseMove(e,t),this.onClick(e,t)},onClick:function(e,t){e.startPoint&&e.startPoint[0]!==t.lngLat.lng&&e.startPoint[1]!==t.lngLat.lat&&(this.updateUIClasses({mouse:"pointer"}),e.endPoint=[t.lngLat.lng,t.lngLat.lat],this.changeMode("simple_select",{featuresId:e.rectangle.id}));var r=[t.lngLat.lng,t.lngLat.lat];e.startPoint=r},onMouseMove:function(e,t){e.startPoint&&(e.rectangle.updateCoordinate("0.0",e.startPoint[0],e.startPoint[1]),e.rectangle.updateCoordinate("0.1",t.lngLat.lng,e.startPoint[1]),e.rectangle.updateCoordinate("0.2",t.lngLat.lng,t.lngLat.lat),e.rectangle.updateCoordinate("0.3",e.startPoint[0],t.lngLat.lat),e.rectangle.updateCoordinate("0.4",e.startPoint[0],e.startPoint[1]))},onKeyUp:function(e,t){if(27===t.keyCode)return this.changeMode("simple_select")},onStop:function(e){n(this),this.updateUIClasses({mouse:"none"}),this.activateUIButton(),void 0!==this.getFeature(e.rectangle.id)&&(e.rectangle.removeCoordinate("0.4"),e.rectangle.isValid()?this.map.fire("draw.create",{features:[e.rectangle.toGeoJSON()]}):(this.deleteFeature([e.rectangle.id],{silent:!0}),this.changeMode("simple_select",{},{silent:!0})))},toDisplayFeatures:function(e,t,r){var n=t.properties.id===e.rectangle.id;return t.properties.active=n?"true":"false",n?e.startPoint?r(t):void 0:r(t)},onTrash:function(e){this.deleteFeature([e.rectangle.id],{silent:!0}),this.changeMode("simple_select")}};t.default=s},2167:function(e,t,r){"use strict";r.r(t),r.d(t,"StateContext",(function(){return Ce})),r.d(t,"styleClasses",(function(){return Ee})),r.d(t,"handleCheckButton",(function(){return Se})),r.d(t,"ProjectEdit",(function(){return De}));var n=r(1),a=r.n(n),s=r(10),i=r(6),o=r(92),c=r.n(o),l=r(30),u=r(62),d=r(1918),h=r(1985),p=r.n(h),f=(r(1981),r(0));const m=e=>{let{localeCode:t,name:r,isActive:n,hasValue:a,onClick:s}=e;const i=n?"bg-blue-grey fw6 white":a?"bg-white fw6 blue-dark":"bg-white blue-grey";return Object(f.jsx)("li",{onClick:()=>s(t),className:"".concat(i," ba b--grey-light br1 ph2 mb2 pv1 f7 mr2 pointer"),title:r,children:t})};var g=r(1935);const y=e=>{let{children:t,name:r,type:a,maxLength:s,languages:i}=e;const{projectInfo:o,setProjectInfo:c,setSuccess:u,setError:h}=Object(n.useContext)(Ce),[p,g]=Object(n.useState)(null),y=o.projectInfoLocales,v=y.filter((e=>e.locale!==o.defaultLocale)).filter((e=>e[r])).map((e=>e.locale)),_=Object(n.useCallback)((()=>{const e=i.filter((e=>e.code===o.defaultLocale));if(e.length)return e[0].language}),[i,o.defaultLocale]),w=(e,t,r)=>{let n=y.filter((e=>e.locale===r)),a=null;0===n.length?a={locale:r,[e]:t}:(a=n[0],a[e]=t);let s=y.filter((e=>e.locale!==r));s.push(a),c({...o,projectInfoLocales:s})};return Object(n.useEffect)((()=>{null===p&&v&&v.length&&g(v[0])}),[p,v]),Object(n.useLayoutEffect)((()=>{u(!1),h(null)}),[p,u,h]),Object(f.jsxs)("div",{children:[t,Object(f.jsxs)("div",{className:"cf db mb0 pt1",children:[Object(f.jsxs)("label",{className:"cf db w-100 mb1 blue-grey fw5",children:[Object(f.jsx)(l.a,{...d.a.language})," - ",_()]}),Object(f.jsx)(b,{type:a,name:r,maxLength:s,updateContext:w,locale:o.defaultLocale})]}),Object(f.jsx)("p",{className:"cf db w-100 mv0 blue-grey fw5",children:Object(f.jsx)(l.a,{...d.a.translations})}),Object(f.jsx)("ul",{className:"list mb2 mt2 pa0 w-100 flex flex-wrap ttu",children:i&&i.filter((e=>e.code!==o.defaultLocale)).map((e=>Object(f.jsx)(m,{localeCode:e.code,name:e.language,isActive:e.code===p,hasValue:v.includes(e.code),onClick:g},e.code)))}),p?Object(f.jsx)(b,{type:a,name:r,maxLength:s,updateContext:w,locale:p}):Object(f.jsx)("span",{className:"pt2",children:Object(f.jsx)(l.a,{...d.a.selectLanguage})})]})},b=e=>{let{type:t,maxLength:r,name:a,locale:s,updateContext:i}=e;const{projectInfo:o,success:c,setSuccess:l,error:u,setError:h}=Object(n.useContext)(Ce),[p,m]=Object(n.useState)(""),y=Object(n.useCallback)((()=>{const e=o.projectInfoLocales.filter((e=>e.locale===s));e.length&&e[0][a]?m(e[0][a]):m("")}),[s,a,o.projectInfoLocales]);Object(n.useEffect)((()=>y()),[s,y]);const b=()=>{!1!==c&&l(!1),null!==u&&h(null)};return Object(f.jsxs)(f.Fragment,{children:["text"===t?Object(f.jsx)("input",{type:"text",onBlur:()=>i(a,p,s),className:Ee.inputClass,name:a,value:p,onChange:e=>{m(e.target.value),b()}}):Object(f.jsx)("div",{className:"w-80",children:Object(f.jsx)(g.a,{isShowTabNavs:!0,isShowFooter:!0,comment:p,setComment:e=>{m(e),b()},maxLength:r,markdownTextareaProps:{onBlur:()=>i(a,p,s),maxLength:r||null,name:a},placeholderMsg:d.a.typeHere})}),r&&Object(f.jsxs)("div",{className:"tr w-80 f7 ".concat(p&&p.length>.9*r?"red":"blue-light"),children:[p?p.length:0," / ",r]})]})},v=e=>{let{languages:t}=e;const{projectInfo:r,setProjectInfo:a}=Object(n.useContext)(Ce);return Object(f.jsxs)("div",{className:"w-100",children:[Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.status})}),[{value:"PUBLISHED",label:"PUBLISHED"},{value:"ARCHIVED",label:"ARCHIVED"},{value:"DRAFT",label:"DRAFT"}].map((e=>Object(f.jsxs)("label",{className:"dib pr5",children:[Object(f.jsx)("input",{value:e.value,checked:r.status===e.value,onChange:()=>a({...r,status:e.value}),type:"radio",className:"radio-input input-reset pointer v-mid dib h2 w2 mr2 br-100 ba b--blue-light"}),Object(f.jsx)(l.a,{...d.a["status".concat(e.label)]})]},e.value)))]}),Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.priority})}),[{value:"URGENT",label:"URGENT"},{value:"HIGH",label:"HIGH"},{value:"MEDIUM",label:"MEDIUM"},{value:"LOW",label:"LOW"}].map((e=>Object(f.jsxs)("label",{className:"dib pr5",children:[Object(f.jsx)("input",{value:e.value,checked:r.projectPriority===e.value,onChange:()=>a({...r,projectPriority:e.value}),type:"radio",className:"radio-input input-reset pointer v-mid dib h2 w2 mr2 br-100 ba b--blue-light"}),Object(f.jsx)(l.a,{...d.a["projectPriority".concat(e.label)]})]},e.value)))]}),Object(f.jsx)("div",{className:Ee.divClass,children:Object(f.jsx)(y,{languages:t,name:"name",type:"text",preview:!1,maxLength:130,children:Object(f.jsxs)("label",{className:Ee.labelClass,children:[Object(f.jsx)(l.a,{...d.a.name}),"*"]})})}),Object(f.jsx)("div",{className:Ee.divClass,children:Object(f.jsx)(y,{languages:t,name:"shortDescription",maxLength:1500,children:Object(f.jsxs)("label",{className:Ee.labelClass,children:[Object(f.jsx)(l.a,{...d.a.shortDescription}),"*"]})})}),Object(f.jsx)("div",{className:Ee.divClass,children:Object(f.jsx)(y,{languages:t,name:"description",children:Object(f.jsxs)("label",{className:Ee.labelClass,children:[Object(f.jsx)(l.a,{...d.a.description}),"*"]})})}),Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.dueDate})}),Object(f.jsx)(p.a,{selected:Date.parse(r.dueDate),onChange:e=>a({...r,dueDate:e}),minDate:Date.parse(r.created),dateFormat:"dd/MM/yyyy",className:Ee.inputClass,showYearDropdown:!0,scrollableYearDropdown:!0}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.dueDateDescription})})]})]})};var _=r(2069);function w(e,t){const r=document.createElement("canvas").getContext("2d");return r.font=t||getComputedStyle(document.body).font,r.measureText(e).width}const j=e=>{let{languages:t}=e;const{projectInfo:r,setProjectInfo:a}=Object(n.useContext)(Ce),s=Object(_.a)(r.changesetComment,r.projectId)[0];return Object(f.jsxs)("div",{className:"w-100",children:[Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.changesetComment})}),Object(f.jsxs)("div",{className:"relative",children:[Object(f.jsx)("input",{className:Ee.inputClass,type:"text",value:r.changesetComment.split(s)[1],name:"changesetComment",onChange:e=>{if(["instructions","perTaskInstructions"].includes(e.target.name)){let t=r.projectInfoLocales.filter((e=>e.locale===r.defaultLocale))[0];t[e.target.name]=e.target.value;let n=r.projectInfoLocales.filter((e=>e.locale!==r.defaultLocale));n.push(t),a({...r,projectInfoLocales:n})}else a({...r,[e.target.name]:"changesetComment"===e.target.name?"".concat(s," ").concat(e.target.value.trimStart()):e.target.value})},style:{paddingLeft:w(s)+30}}),Object(f.jsx)(l.a,{...d.a.nonEditableComment,children:e=>Object(f.jsx)("span",{className:"absolute db bg-tan",style:{top:"9px",left:"8px",color:"fieldtext",lineHeight:1.15},title:e,children:s})})]}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.changesetCommentDescription})}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.changesetCommentExample})})]}),Object(f.jsx)("div",{className:Ee.divClass,children:Object(f.jsx)(y,{languages:t,name:"instructions",children:Object(f.jsxs)("label",{className:Ee.labelClass,children:[Object(f.jsx)(l.a,{...d.a.instructions}),"*"]})})}),Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)(y,{languages:t,name:"perTaskInstructions",children:Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.perTaskInstructions})})}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.perTaskInstructionsDescription})}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.perTaskInstructionsExample})})]})]})};var x=r(107),M=r(55),O=r(80);const k=e=>{let{interests:t,projectInterests:r,setProjectInfo:n}=e;const a=r.map((e=>e.id)),s=t.map((e=>{let t=!1;return a.includes(e.id)&&(t=!0),{...e,selected:t}}));return Object(f.jsx)(O.c,{interests:s,field:"selected",changeSelect:e=>{const t=s.findIndex((t=>t.id===e)),r=s.map(((e,r)=>(r===t&&(e.selected=!e.selected),e))).filter((e=>!0===e.selected));r.map((e=>delete e.selected)),n((e=>({...e,interests:r})))}})},C=e=>{let{value:t,setProjectInfo:r}=e;return Object(f.jsx)("input",{className:Ee.inputClass,onChange:e=>{r((t=>({...t,extraIdParams:e.target.value})))},type:"text",name:"extraIdParams",placeholder:"disabled_features=buildings&offset=-10,5",value:t})},E=e=>{let{className:t,children:r}=e;return Object(f.jsx)("code",{className:"f6 i ph1 bg-white o-80 ".concat(t||""),children:r})};var S=r(29);const N={"category-roads-barrier":{name:"Barrier Features",members:["barrier/fence","barrier/wall","barrier/ditch","barrier/gate","barrier/hedge","barrier/kerb","barrier"]},"category-building":{name:"Building Features",members:["building","building/house","building/apartments","building/garage","building/retail","building/commercial","building/industrial","building/residential"]},"category-landuse":{name:"Land Use Features",members:["landuse/residential","landuse/industrial","landuse/commercial","landuse/retail","landuse/farmland","landuse/farmyard","landuse/forest","landuse/meadow","landuse/aquaculture","landuse/cemetery","landuse/military","landuse/religious"]},"category-natural":{name:"Natural Features",members:["natural/water","natural/wood","natural/scrub","natural/wetland","natural/grassland","natural/heath","natural/bare_rock","natural/beach","natural/cave_entrance","natural/glacier","natural/coastline","natural/tree_row","natural/peak","natural/cliff","natural/beach"]},"category-roads-path":{name:"Paths",members:["highway/path","highway/footway","highway/footway/marked","highway/footway/sidewalk","highway/steps","highway/cycleway","highway/bridleway","highway/pedestrian_line"]},"category-other-rail":{name:"Rails",members:["railway/rail","railway/disused","railway/tram","railway/subway","railway/narrow_gauge","railway/light_rail","railway/monorail","railway/funicular"]},"category-roads-restriction":{name:"Restriction Features",members:["type/restriction/no_left_turn","type/restriction/no_right_turn","type/restriction/no_straight_on","type/restriction/no_u_turn","type/restriction/only_left_turn","type/restriction/only_right_turn","type/restriction/only_straight_on","type/restriction/only_u_turn","type/restriction"]},"category-roads-major":{name:"Major Roads",members:["highway/motorway","highway/trunk","highway/primary","highway/secondary","highway/tertiary","highway/motorway_link","highway/trunk_link","highway/primary_link","highway/secondary_link","highway/tertiary_link"]},"category-roads-minor":{name:"Minor Roads",members:["highway/unclassified","highway/residential","highway/living_street","highway/service","highway/track"]},"category-roads-service":{name:"Service Roads",members:["highway/service","highway/service/parking_aisle","highway/service/driveway","highway/service/alley","highway/service/emergency_access","highway/service/drive-through"]},"category-roads-route":{name:"Route Features",members:["type/route/road","type/route/bicycle","type/route/foot","type/route/hiking","type/route/horse","type/route/piste","type/route/bus","type/route/train","type/route/light_rail","type/route/tram","type/route/subway","type/route/ferry","type/route/power","type/route/pipeline","type/route/detour","type/route_master","type/route"]},"category-other-utility":{name:"Utility Features",members:["power/line","power/minor_line","man_made/pipeline","power/cable/underground"]},"category-water":{name:"Water Bodies",members:["natural/water","natural/water/pond","natural/water/basin","natural/water/lake","natural/water/reservoir"]},"category-waterway":{name:"Waterways",members:["waterway/stream","waterway/drain","waterway/river","waterway/canal","waterway/ditch","natural/water/stream","natural/water/river","natural/water/canal"]},"category-places":{name:"Places",members:["place","place/locality","place/isolated_dwelling","place/hamlet","place/village","place/neighbourhood","place/suburb","place/town"]},"category-others":{name:"Others",members:["ford"]}};var I=r(1941);const D=()=>{const{projectInfo:e,setProjectInfo:t}=Object(n.useContext)(Ce),[r,a]=Object(n.useState)([]),i=Object(s.d)((e=>e.auth.userDetails)),o=Object(s.d)((e=>e.auth.token)),[c,u]=Object(n.useState)([]),[h,p]=Object(n.useState)([]);Object(n.useEffect)((()=>{if(i&&i.id){const e="ADMIN"===i.role?"":"&manager_user_id=".concat(i.id);Object(S.b)("organisations/?omitManagerList=true".concat(e),o).then((e=>u(e.organisations))).catch((e=>console.log(e)))}Object(S.b)("campaigns/").then((e=>p(e.campaigns))).catch((e=>console.log(e)))}),[i,o]);const m=r=>{t({...e,mappingTypes:r})};Object(n.useEffect)((()=>{0===r.length&&Object(S.b)("interests/").then((e=>{a(e.interests)}))}),[r.length]);let g=[];const y=Object.keys(N).map((t=>({label:N[t].name,options:N[t].members.map((t=>{const r={label:t,value:t};return e.idPresets&&!0===e.idPresets.includes(t)&&g.push(r),r}))})));return Object(f.jsxs)("div",{className:"w-100",children:[Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.difficulty})}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.difficultyDescription})}),["EASY","MODERATE","CHALLENGING"].map((r=>Object(f.jsxs)("label",{className:"dib pr5",children:[Object(f.jsx)("input",{value:r,checked:e.difficulty===r,onChange:()=>t({...e,difficulty:r}),type:"radio",className:"radio-input input-reset pointer v-mid dib h2 w2 mr2 br-100 ba b--blue-light"}),Object(f.jsx)(l.a,{...d.a["difficulty".concat(r)]})]},r)))]}),Object(f.jsxs)("div",{className:Ee.divClass+" cf",children:[Object(f.jsxs)("div",{className:"w-50 fl",children:[Object(f.jsxs)("label",{className:Ee.labelClass,children:[Object(f.jsx)(l.a,{...d.a.mappingTypes}),"*"]}),[{item:"ROADS",messageId:"roads"},{item:"BUILDINGS",messageId:"buildings"},{item:"WATERWAYS",messageId:"waterways"},{item:"LAND_USE",messageId:"landUse"},{item:"OTHER",messageId:"other"}].map((t=>Object(f.jsxs)("div",{className:"pv3 pr3","aria-label":"mapping_types",children:[Object(f.jsx)("div",{className:"ph0 pt1 fl","aria-labelledby":t.messageId,children:Object(f.jsx)(O.a,{activeItems:e.mappingTypes,toggleFn:m,itemId:t.item})}),Object(f.jsx)("span",{className:"fl pt2 mr1 ph2",id:t.messageId,children:Object(f.jsx)(l.a,{...M.a[t.messageId]})})]},t.messageId)))]}),Object(f.jsxs)("div",{className:"w-50 fl",children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.idPresets})}),Object(f.jsx)(x.a,{classNamePrefix:"react-select",isClearable:!0,isMulti:!0,options:y,className:"z-9999",onChange:e=>{if(null===e)return void t((e=>({...e,idPresets:[]})));const r=e.map((e=>e.value));t((e=>({...e,idPresets:r})))},defaultValue:g})]})]}),Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.extraIdParams})}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.extraIdParamsDescription,values:{text:Object(f.jsx)(E,{children:"disabled_features=buildings&offset=-10,5"})}})}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.extraIdParamsDescriptionLink,values:{link:Object(f.jsx)(T,{})}})}),Object(f.jsx)(C,{value:e.extraIdParams?e.extraIdParams:"",setProjectInfo:t})]}),Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsxs)("label",{className:Ee.labelClass,children:[Object(f.jsx)(l.a,{...d.a.organisation}),"*"]}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.organisationDescription})}),Object(f.jsx)(x.a,{classNamePrefix:"react-select",isClearable:!1,getOptionLabel:e=>e.name,getOptionValue:e=>e.organisationId,options:c,defaultValue:e.organisation&&{name:e.organisationName,value:e.organisation},placeholder:Object(f.jsx)(l.a,{...d.a.selectOrganisation}),onChange:r=>t({...e,organisation:r.organisationId||""}),className:"z-5"})]}),Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.campaign})}),Object(f.jsx)(x.a,{classNamePrefix:"react-select",isClearable:!1,getOptionLabel:e=>e.name,getOptionValue:e=>e.id,isMulti:!0,options:h,placeholder:Object(f.jsx)(l.a,{...d.a.selectCampaign}),className:"z-4",defaultValue:e.campaigns,isSearchable:!0,onChange:r=>t({...e,campaigns:r})})]}),Object(f.jsxs)("div",{className:Ee.divClass.replace("w-70","w-80"),children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.categories})}),Object(f.jsx)(k,{interests:r,projectInterests:e.interests,setProjectInfo:t,setInterests:a})]}),Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.osmchaFilterId})}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.osmchaFilterIdDescription})}),Object(f.jsx)("input",{className:Ee.inputClass,type:"text",name:"osmchaFilterId",value:e.osmchaFilterId||"",onChange:r=>{t({...e,osmchaFilterId:Object(I.b)(r.target.value)})}})]})]})},T=()=>Object(f.jsx)("a",{href:"https://github.com/openstreetmap/iD/blob/develop/API.md#url-parameters",className:"red underline link",target:"_blank",rel:"noopener noreferrer",children:Object(f.jsx)(l.a,{...d.a.iDAPIDocs})});var A=r(1943),P=r.n(A),L=(r(1972),r(2071),r(2072)),R=r.n(L),F=r(2139),B=r.n(F),U=r(1954),z=r.n(U),Y=r(1922),G=r(1965),W=r(32),V=r(13),q=r(9),H=r(2073),K=r(2074),Z=r(2098),J=r(1914),Q=r(1928);P.a.accessToken=q.r;try{P.a.setRTLTextPlugin(q.q)}catch{console.log("RTLTextPlugin is loaded")}const X=()=>{const{projectInfo:e,setProjectInfo:t}=Object(n.useContext)(Ce),r=Object(s.d)((e=>e.preferences.locale)),i=a.a.createRef(),[o,c]=Object(n.useState)({error:!1,message:null}),u=R.a.modes;u.draw_rectangle=B.a;const h={displayControlsDefault:!1,modes:u,styles:[{id:"gl-draw-polygon-fill-inactive",type:"fill",paint:{"fill-color":"#d73f3f","fill-opacity":.3}},{id:"gl-draw-polygon-line-inactive",type:"line",paint:{"line-color":"#d73f3f","line-dasharray":[2,2],"line-width":2,"line-opacity":.7}}]},[p,m]=Object(n.useState)({map:null,draw:new R.a(h)}),[g,y]=Object(n.useState)(null);let b=e.priorityAreas?e.priorityAreas:[];const v=b.map((e=>({type:"Feature",properties:{},geometry:e}))),_=r=>{const n=["Polygon"];try{let a=Object(K.d)(r,n);b=a.features.map((e=>e.geometry)),t({...e,priorityAreas:b}),p.map.getSource("priority_areas").setData(a)}catch(a){c({error:!0,message:Object(Z.a)(a.message)||a.message})}},{getRootProps:w,getInputProps:j,open:x}=Object(G.a)({onDrop:e=>{const t=e[0];if(t)try{c({error:!1,message:null}),Object(K.c)(t),Object(K.b)(t),Object(K.a)(t).then((e=>{_(e)})).catch((e=>c({error:!0,message:Object(Z.a)(e.message)||e.message})))}catch(r){c({error:!0,message:Object(Z.a)(r.message)||r.message})}},noClick:!0,noKeyboard:!0});Object(n.useLayoutEffect)((()=>{const e=P.a.supported()&&new P.a.Map({container:i.current,style:q.s,center:[0,0],zoom:1,attributionControl:!1}).addControl(new P.a.AttributionControl({compact:!1})).addControl(new z.a({defaultLanguage:r.substr(0,2)||"en"})).addControl(new P.a.NavigationControl);return m({...p,map:e}),()=>e&&e.remove()}),[]);const M=t=>{void 0===t.getSource("aoi")&&(t.addSource("aoi",{type:"geojson",data:e.areaOfInterest}),t.addLayer({id:"aoi",source:"aoi",type:"fill",paint:{"fill-color":q.d.orange,"fill-outline-color":"#929db3","fill-opacity":.4}})),void 0===t.getSource("priority_areas")&&(t.addSource("priority_areas",{type:"geojson",data:{type:"FeatureCollection",features:v}}),t.addLayer({id:"priority_area_border",type:"line",source:"priority_areas",paint:{"line-color":"#d73f3f","line-dasharray":[2,2],"line-width":2,"line-opacity":.7},layout:{visibility:"visible"}}),t.addLayer({id:"priority_areas",type:"fill",source:"priority_areas",paint:{"fill-color":"#d73f3f","fill-opacity":.3},layout:{visibility:"visible"}}))},O=r=>{b.push(r.features[0].geometry),t({...e,priorityAreas:b}),y(null)},k=()=>{if("draw_polygon"===g)return y(null),void p.draw.changeMode("simple_select");y("draw_polygon"),p.map.on("draw.update",O),p.map.once("draw.create",O),p.draw.changeMode("draw_polygon")},C=()=>{if("draw_rectangle"===g)return y(null),void p.draw.changeMode("simple_select");y("draw_rectangle"),p.map.on("draw.update",O),p.map.once("draw.create",O),p.draw.changeMode("draw_rectangle")};Object(n.useLayoutEffect)((()=>{null!==p.map&&P.a.supported()&&(p.map.on("load",(()=>{p.map.addControl(p.draw),M(p.map),p.map.fitBounds(e.aoiBBOX,{duration:0,padding:100})})),p.map.on("styledata",(()=>{M(p.map),void 0!==p.map.getSource("priority_areas")&&p.map.getSource("priority_areas").setData({type:"FeatureCollection",features:v})})))}),[p.map,p.draw,e,t,v]);const E=()=>{const r=p.draw.getMode();p.draw.deleteAll(),p.draw.changeMode(r),p.map.getSource("priority_areas").setData(Object(Y.e)([])),t({...e,priorityAreas:[]})};return P.a.supported()?Object(f.jsx)("div",{className:"w-100",...w(),children:Object(f.jsxs)("div",{className:"relative",children:[Object(f.jsxs)("div",{className:"cf absolute bg-white o-90 top-1 left-1 pa3 mw6 z-4 br1",children:[Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.priorityAreasDescription})}),Object(f.jsxs)("div",{children:[Object(f.jsxs)(W.c,{className:"bg-white ph3 pv2 mr2 ba ".concat("draw_polygon"===g?"red b--red":"blue-dark b--grey-light"),onClick:k,children:[Object(f.jsx)(V.Q,{className:"h1 w1 pb1 v-mid mr2"}),Object(f.jsx)(l.a,{...d.a.drawPolygon})]}),Object(f.jsxs)(W.c,{className:"bg-white ph3 pv2 mr2 ba ".concat("draw_rectangle"===g?"red b--red":"blue-dark b--grey-light"),onClick:C,children:[Object(f.jsx)(V.R,{className:"h1 w1 pb1 v-mid mr2"}),Object(f.jsx)(l.a,{...d.a.drawRectangle})]}),Object(f.jsxs)(W.c,{className:"bg-white blue-dark ba b--grey-light ph3 pv2",onClick:x,children:[Object(f.jsx)(V.x,{className:"h1 w1 v-mid mr2"}),Object(f.jsx)(l.a,{...d.a.selectFile})]}),Object(f.jsx)("input",{...j()}),Object(f.jsx)("p",{className:"f6 blue-grey lh-title mt3",children:Object(f.jsx)(l.a,{...d.a.importDescription})}),Object(f.jsx)("p",{className:"f5 mb0",children:Object(f.jsxs)(W.c,{onClick:E,className:"bg-white ph3 pv2 mr2 blue-dark ba b--grey-light",children:[Object(f.jsx)(V.sb,{className:"h1 w1 pb1 v-mid mr2"}),Object(f.jsx)(l.a,{...d.a.clearAll})]})})]}),!0===o.error&&Object(f.jsx)(J.a,{type:"error",children:o.message})]}),Object(f.jsx)("div",{className:"absolute top-0 right-0 z-5 mr2",children:Object(f.jsx)(H.a,{map:p.map})}),Object(f.jsx)("div",{id:"priority-area-map",ref:i,className:"vh-75 w-100 bg-white"})]})}):Object(f.jsx)(Q.a,{className:"vh-75 w-100 bg-white"})};var $=r(2034);const ee=()=>{const{projectInfo:e,setProjectInfo:t}=Object(n.useContext)(Ce),[r,a]=Object(n.useState)(null);Object(n.useLayoutEffect)((()=>{(async()=>{Object(S.b)("licenses/").then((e=>a(e.licenses))).catch((e=>console.log(e)))})()}),[a]);let s=null;return null!==r&&null!==e.licenseId&&(s=r.filter((t=>t.licenseId===e.licenseId))[0]),Object(f.jsxs)("div",{className:"w-100",children:[Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.imagery})}),Object(f.jsx)(te,{imagery:e.imagery,setProjectInfo:t})]}),Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.license})}),Object(f.jsx)(x.a,{classNamePrefix:"react-select",isClearable:!0,getOptionLabel:e=>e.name,getOptionValue:e=>e.licenseId,value:s,options:r,placeholder:Object(f.jsx)(l.a,{...d.a.selectLicense}),onChange:e=>{let r=null;null!==e&&(r=e.licenseId),t((e=>({...e,licenseId:r})))},className:"w-50 z-1"})]})]})},te=e=>{let{imagery:t,setProjectInfo:r}=e;const a=Object($.b)(t),[s,i]=Object(n.useState)(!(!a||"custom"!==a.value));return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(x.a,{classNamePrefix:"react-select",isClearable:!0,value:a,options:$.a,placeholder:Object(f.jsx)(l.a,{...d.a.selectImagery}),onChange:e=>{e?"custom"===e.value?(i(!0),r((e=>({...e,imagery:"https://..."})))):(i(!1),r((t=>({...t,imagery:e.value})))):(i(!1),r((e=>({...e,imagery:null}))))},className:"w-50 z-2"}),s&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("input",{className:Ee.inputClass,onChange:e=>r((t=>({...t,imagery:e.target.value}))),type:"text",name:"imagery",value:t}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.imageryURLNote,values:{exampleUrl:Object(f.jsx)("span",{className:"db",children:Object(f.jsx)(E,{children:"tms[22]:https://hiu-maps.net/hot/1.0.0/kathmandu_flipped/{zoom}/{x}/{y}.png"})})}})})]})]})};var re=r(50),ne=r(120);const ae=()=>{var e;const t=Object(re.a)(),r={team:{name:null,teamId:null},role:{value:null,label:null},edit:!1},{projectInfo:a,setProjectInfo:s}=Object(n.useContext)(Ce),[i,o]=Object(n.useState)(r),[c,u]=Object(n.useState)(null),[,h,p]=Object(ne.b)("organisations/?omitManagerList=true"),[,m,g]=Object(ne.b)("teams/?omitMemberList=true"),y=[{value:"MAPPER",label:"Mapper"},{value:"VALIDATOR",label:"Validator"},{value:"PROJECT_MANAGER",label:"Project Manager"}],b=()=>({teamId:i.team.teamId,name:i.team.name,role:i.role.value}),v=(e,t)=>{o((r=>({...r,[t]:e})))},_=a.teams.map((e=>e.teamId));let w=null===g||void 0===g||null===(e=g.teams)||void 0===e?void 0:e.filter((e=>!_.includes(e.teamId)));var j,O;null!==c&&(w=[{label:c.name,options:null===(j=w)||void 0===j?void 0:j.filter((e=>e.organisationId===c.organisationId))},{label:"Others",options:null===(O=w)||void 0===O?void 0:O.filter((e=>e.organisationId!==c.organisationId))}]);return Object(f.jsxs)("div",{className:"w-80",children:[Object(f.jsx)("div",{className:"mb4",children:a.teams.map((e=>{return Object(f.jsxs)("div",{className:"w-100 cf pa2 bg-white blue-dark mb2",children:[Object(f.jsxs)("div",{className:"w-50 fl fw5",children:[Object(f.jsx)("span",{className:"pr1",children:e.name}),Object(f.jsx)("a",{className:"link blue-light",href:"/teams/".concat(e.teamId,"/membership/"),target:"_blank",rel:"noreferrer noopener",children:Object(f.jsx)(V.u,{})})]}),Object(f.jsx)("div",{className:"w-30 fl",children:(t=e.role,y.filter((e=>e.value===t))[0].label)}),Object(f.jsxs)("div",{className:"w-20 fl pl3 tr",children:[Object(f.jsx)("span",{className:"pa2 br-100 pointer bg-grey-light",onClick:()=>(e=>{const t=a.teams.filter((t=>t.teamId===e))[0],r=y.filter((e=>t.role===e.value))[0];o((e=>({...e,edit:!0,team:t,role:r})))})(e.teamId),children:Object(f.jsx)(V.W,{className:"h1 w1 blue-dark"})}),Object(f.jsx)("span",{className:" ml1 pa2 br-100 pointer bg-grey-light red",onClick:()=>(e=>{const t=a.teams.filter((t=>t.teamId!==e));s({...a,teams:t})})(e.teamId),children:Object(f.jsx)(V.sb,{className:"h1 w1"})})]})]},e.teamId);var t}))}),Object(f.jsx)(x.a,{classNamePrefix:"react-select",isClearable:!0,getOptionLabel:e=>e.name,getOptionValue:e=>e.organisationId,placeholder:Object(f.jsx)(l.a,{...d.a.filterByOrg}),options:h?[]:p.organisations,value:c,onChange:e=>u(e),className:"mb2 z-4",isLoading:h,loadingMessage:()=>t.formatMessage(M.a.loading)}),Object(f.jsxs)("div",{className:"cf pb3 flex justify-between",children:[Object(f.jsx)(x.a,{classNamePrefix:"react-select",getOptionLabel:e=>e.name,getOptionValue:e=>e.teamId,options:m?[]:w,onChange:e=>v(e,"team"),className:"w-40 fl pr2 z-3",value:null!==i.team.name?i.team:null,placeholder:Object(f.jsx)(l.a,{...d.a.selectTeam}),isDisabled:i.edit,isLoading:m,loadingMessage:()=>t.formatMessage(M.a.loading)}),Object(f.jsx)(x.a,{classNamePrefix:"react-select",getOptionLabel:e=>e.label,getOptionValue:e=>e.value,options:y,onChange:e=>v(e,"role"),className:"w-40 fl mr2 z-3",isDisabled:null===i.team.name,value:null!==i.role.value?i.role:null,placeholder:Object(f.jsx)(l.a,{...d.a.selectRole})}),Object(f.jsx)(W.b,{onClick:!1===i.edit?()=>{const e=a.teams;e.push(b()),s({...a,teams:e}),o(r)}:()=>{const e=a.teams.map((e=>{let t=e;return e.teamId===i.team.teamId&&(t=b()),t}));s({...a,teams:e}),o(r)},className:"bg-blue-dark white fl mr2 f6",disabled:null===i.team.name||null===i.role.value,children:!1===i.edit?Object(f.jsx)(l.a,{...d.a.add}):Object(f.jsx)(l.a,{...d.a.update})}),Object(f.jsx)(W.b,{onClick:()=>o(r),className:"bg-red white fl mr2 f6",disabled:!i.edit,children:Object(f.jsx)(l.a,{...d.a.cancel})})]})]})},se=e=>{let{permissions:t,type:r}=e;const{projectInfo:a,setProjectInfo:s}=Object(n.useContext)(Ce);return Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:"mappingPermission"===r?Object(f.jsx)(l.a,{...d.a.mappingPermission}):Object(f.jsx)(l.a,{...d.a.validationPermission})}),Object(f.jsx)("p",{className:Ee.pClass,children:"mappingPermission"===r?Object(f.jsx)(l.a,{...d.a.mappingPermissionDescription}):Object(f.jsx)(l.a,{...d.a.validationPermissionDescription})}),t.map((e=>Object(f.jsxs)("label",{className:"db pv2",children:[Object(f.jsx)("input",{value:e.value,checked:a[r]===e.value,onChange:()=>s({...a,[r]:e.value}),type:"radio",className:"radio-input input-reset pointer v-mid dib h2 w2 mr2 br-100 ba b--blue-light"}),e.label]},e.label.props.id)))]})},ie=()=>{const{projectInfo:e,setProjectInfo:t}=Object(n.useContext)(Ce),r=[{label:Object(f.jsx)(l.a,{...d.a.permissions_ANY}),value:"ANY"},{label:Object(f.jsx)(l.a,{...d.a.permissions_LEVEL}),value:"LEVEL"},{label:Object(f.jsx)(l.a,{...d.a.permissions_TEAMS}),value:"TEAMS"},{label:Object(f.jsx)(l.a,{...d.a.permissions_TEAMS_LEVEL}),value:"TEAMS_LEVEL"}];return Object(f.jsxs)("div",{className:"w-100",children:[Object(f.jsx)(se,{permissions:r,type:"mappingPermission"}),Object(f.jsx)(se,{permissions:r,type:"validationPermission"}),Object(f.jsxs)("div",{className:Ee.divClass.replace("w-70","w-90"),children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.teams})}),Object(f.jsx)(ae,{}),Object(f.jsx)("p",{className:"f6 blue-grey w-80 mt2",children:Object(f.jsx)(l.a,{...d.a.teamsPermissionNote})})]}),Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.privacy})}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.privacyDescription})}),Object(f.jsx)(O.h,{label:Object(f.jsx)(l.a,{...d.a.privateProject}),labelPosition:"right",isChecked:e.private,onChange:()=>t({...e,private:!e.private})})]})]})};var oe=r(1976);const ce=e=>{let{languages:t,defaultLocale:r}=e;const{projectInfo:a,setProjectInfo:s}=Object(n.useContext)(Ce),i=e=>{s({...a,mappingEditors:e})},o=e=>{s({...a,validationEditors:e})},c=Object(oe.a)();return Object(f.jsxs)("div",{className:"w-100",children:[Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.language})}),Object(f.jsx)("select",{name:"defaultLocale",onChange:e=>{s({...a,defaultLocale:e.target.value})},className:"pa2 bg-white ba ba--grey-light",value:r,children:t.map((e=>Object(f.jsxs)("option",{value:e.code,children:[e.language," (",e.code,")"]},e.code)))})]}),Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.mappingEditors})}),c.map((e=>Object(f.jsxs)("div",{className:"pv3 pr3","aria-label":"mapping editor",children:[Object(f.jsx)("div",{className:"ph0 pt1 fl","aria-labelledby":e.value,children:Object(f.jsx)(O.a,{activeItems:a.mappingEditors,toggleFn:i,itemId:e.value})}),Object(f.jsx)("span",{className:"fl pt2 mr1 ph2",id:e.value,children:e.label})]},e.value))),a.hasOwnProperty("customEditor")&&a.customEditor&&Object(f.jsxs)("div",{className:"pv3 pr3","aria-label":"mapping editor",children:[Object(f.jsx)("div",{className:"ph0 pt1 fl","aria-labelledby":"Custom",children:Object(f.jsx)(O.a,{activeItems:a.mappingEditors,toggleFn:i,itemId:"CUSTOM"})}),Object(f.jsxs)("span",{className:"fl dib pt2 mr1 ph2",id:"Custom",children:[Object(f.jsx)(l.a,{...d.a.customEditor}),Object(f.jsxs)("span",{className:"",children:[": ",a.customEditor.name]})]})]})]}),Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.validationEditors})}),c.map((e=>Object(f.jsxs)("div",{className:"pv3 pr3","aria-label":"validation editor",children:[Object(f.jsx)("div",{className:"ph0 pt1 fl","aria-labelledby":e.value,children:Object(f.jsx)(O.a,{activeItems:a.validationEditors,toggleFn:o,itemId:e.value})}),Object(f.jsx)("span",{className:"fl pt2 mr1 ph2",id:e.value,children:e.label})]},e.value))),a.hasOwnProperty("customEditor")&&a.customEditor&&Object(f.jsxs)("div",{className:"pv3 pr3","aria-label":"validation editor",children:[Object(f.jsx)("div",{className:"ph0 pt1 fl","aria-labelledby":"Custom",children:Object(f.jsx)(O.a,{activeItems:a.validationEditors,toggleFn:o,itemId:"CUSTOM"})}),Object(f.jsxs)("span",{className:"fl dib pt2 mr1 ph2",id:"Custom",children:[Object(f.jsx)(l.a,{...d.a.customEditor}),Object(f.jsxs)("span",{className:"",children:[": ",a.customEditor.name]})]})]})]}),Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.randomTaskSelection})}),Object(f.jsx)(O.h,{label:Object(f.jsx)(l.a,{...d.a.randomTaskSelectionMapping}),labelPosition:"right",isChecked:a.enforceRandomTaskSelection,onChange:()=>s({...a,enforceRandomTaskSelection:!a.enforceRandomTaskSelection})}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.randomTaskSelectionDescription})})]}),(a.mappingEditors.includes("RAPID")||a.validationEditors.includes("RAPID"))&&Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsxs)("label",{className:Ee.labelClass,children:[Object(f.jsx)(l.a,{...d.a.rapidPowerUser}),Object(f.jsx)("div",{className:"rapid-beta"})]}),Object(f.jsx)(O.h,{isChecked:a.rapidPowerUser,label:Object(f.jsx)(l.a,{...d.a.rapidPowerUser}),labelPosition:"right",onChange:()=>s({...a,rapidPowerUser:!a.rapidPowerUser})}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.rapidPowerUserDescription})})]})]})};var le=r(82),ue=r(1944),de=r(1964);const he=e=>{let{status:t,action:r}=e,n="",a="";switch(r){case"MESSAGE_CONTRIBUTORS":n="messageContributorsSuccess",a="messageContributorsError";break;case"MAP_ALL_TASKS":n="mapAllSuccess",a="mapAllError";break;case"INVALIDATE_ALL_TASKS":n="invalidateAllSuccess",a="invalidateAllError";break;case"VALIDATE_ALL_TASKS":n="validateAllSuccess",a="validateAllError";break;case"RESET_BAD_IMAGERY":n="resetBadImagerySuccess",a="resetBadImageryError";break;case"RESET_ALL":n="resetAllSuccess",a="resetAllError";break;case"REVERT_VALIDATED_TASKS":n="revertVALIDATEDTasksSuccess",a="revertTasksError";break;case"REVERT_BADIMAGERY_TASKS":n="revertBADIMAGERYTasksSuccess",a="revertTasksError";break;case"TRANSFER_PROJECT":n="transferProjectSuccess",a="transferProjectError";break;case"DELETE_PROJECT":n="deleteProjectSuccess",a="deleteProjectError";break;default:return null}return Object(f.jsxs)(f.Fragment,{children:["success"===t&&Object(f.jsx)(J.a,{type:"success",children:Object(f.jsx)(l.a,{...d.a[n]})}),"error"===t&&Object(f.jsx)(J.a,{type:"error",children:Object(f.jsx)(l.a,{...d.a[a]})})]})},pe=e=>{let{projectId:t,close:r}=e;const n=Object(s.d)((e=>e.auth.token)),a=Object(de.a)((()=>Object(S.b)("projects/".concat(t,"/tasks/actions/reset-all/"),n,"POST")));return Object(f.jsxs)("div",{className:Ee.modalClass,children:[Object(f.jsx)("h2",{className:Ee.modalTitleClass,children:Object(f.jsx)(l.a,{...d.a.taskReset})}),Object(f.jsx)("p",{className:"".concat(Ee.pClass," pb3 "),children:Object(f.jsx)(l.a,{...d.a.taskResetConfirmation})}),Object(f.jsx)(he,{status:a.status,action:"RESET_ALL"}),Object(f.jsxs)("p",{className:"tr",children:[Object(f.jsx)(W.b,{className:Ee.whiteButtonClass,onClick:r,children:Object(f.jsx)(l.a,{...d.a.cancel})}),Object(f.jsx)(W.b,{className:Ee.redButtonClass,onClick:()=>a.execute(),loading:"pending"===a.status,disabled:"pending"===a.status,children:Object(f.jsx)(l.a,{...d.a.taskResetButton})})]})]})},fe=e=>{let{projectId:t,close:r}=e;const n=Object(s.d)((e=>e.auth.token)),a=Object(de.a)((()=>Object(S.b)("projects/".concat(t,"/tasks/actions/reset-all-badimagery/"),n,"POST")));return Object(f.jsxs)("div",{className:Ee.modalClass,children:[Object(f.jsx)("h2",{className:Ee.modalTitleClass,children:Object(f.jsx)(l.a,{...d.a.resetBadImagery})}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.resetBadImageryConfirmation})}),Object(f.jsx)("p",{className:"".concat(Ee.pClass," pb2"),children:Object(f.jsx)(l.a,{...d.a.resetBadImageryDescription})}),Object(f.jsx)(he,{status:a.status,action:"RESET_BAD_IMAGERY"}),Object(f.jsxs)("p",{children:[Object(f.jsx)(W.b,{className:Ee.whiteButtonClass,onClick:r,children:Object(f.jsx)(l.a,{...d.a.cancel})}),Object(f.jsx)(W.b,{className:Ee.redButtonClass,onClick:()=>a.execute(),loading:"pending"===a.status,disabled:"pending"===a.status,children:Object(f.jsx)(l.a,{...d.a.resetBadImageryButton})})]})]})},me=e=>{let{projectId:t,close:r}=e;const n=Object(s.d)((e=>e.auth.token)),a=Object(de.a)((()=>Object(S.b)("projects/".concat(t,"/tasks/actions/validate-all/"),n,"POST")));return Object(f.jsxs)("div",{className:Ee.modalClass,children:[Object(f.jsx)("h2",{className:Ee.modalTitleClass,children:Object(f.jsx)(l.a,{...d.a.validateAllTasks})}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.validateAllTasksConfirmation})}),Object(f.jsx)("p",{className:"".concat(Ee.pClass," pb2"),children:Object(f.jsx)(l.a,{...d.a.validateAllTasksDescription})}),Object(f.jsx)(he,{status:a.status,action:"VALIDATE_ALL_TASKS"}),Object(f.jsxs)("p",{children:[Object(f.jsx)(W.b,{className:Ee.whiteButtonClass,onClick:r,children:Object(f.jsx)(l.a,{...d.a.cancel})}),Object(f.jsx)(W.b,{className:Ee.redButtonClass,onClick:()=>a.execute(),loading:"pending"===a.status,disabled:"pending"===a.status,children:Object(f.jsx)(l.a,{...d.a.validateAllTasks})})]})]})},ge=e=>{let{projectId:t,close:r}=e;const n=Object(s.d)((e=>e.auth.token)),a=Object(de.a)((()=>Object(S.b)("projects/".concat(t,"/tasks/actions/invalidate-all/"),n,"POST")));return Object(f.jsxs)("div",{className:Ee.modalClass,children:[Object(f.jsx)("h2",{className:Ee.modalTitleClass,children:Object(f.jsx)(l.a,{...d.a.invalidateAll})}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.invalidateAllConfirmation})}),Object(f.jsx)("p",{className:"".concat(Ee.pClass," pb2"),children:Object(f.jsx)(l.a,{...d.a.invalidateAllDescription})}),Object(f.jsx)(he,{status:a.status,action:"INVALIDATE_ALL_TASKS"}),Object(f.jsxs)("p",{children:[Object(f.jsx)(W.b,{className:Ee.whiteButtonClass,onClick:r,children:Object(f.jsx)(l.a,{...d.a.cancel})}),Object(f.jsx)(W.b,{className:Ee.redButtonClass,onClick:()=>a.execute(),loading:"pending"===a.status,disabled:"pending"===a.status,children:Object(f.jsx)(l.a,{...d.a.invalidateAll})})]})]})},ye=e=>{let{projectId:t,close:r}=e;const n=Object(s.d)((e=>e.auth.token)),a=Object(de.a)((()=>Object(S.b)("projects/".concat(t,"/tasks/actions/map-all/"),n,"POST")));return Object(f.jsxs)("div",{className:Ee.modalClass,children:[Object(f.jsx)("h2",{className:Ee.modalTitleClass,children:Object(f.jsx)(l.a,{...d.a.mapAll})}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.mapAllConfirmation})}),Object(f.jsx)("p",{className:"".concat(Ee.pClass," pb2"),children:Object(f.jsx)(l.a,{...d.a.mapAllDescription})}),Object(f.jsx)(he,{status:a.status,action:"MAP_ALL_TASKS"}),Object(f.jsxs)("p",{children:[Object(f.jsx)(W.b,{className:Ee.whiteButtonClass,onClick:r,children:Object(f.jsx)(l.a,{...d.a.cancel})}),Object(f.jsx)(W.b,{className:Ee.redButtonClass,onClick:()=>a.execute(),loading:"pending"===a.status,disabled:"pending"===a.status,children:Object(f.jsx)(l.a,{...d.a.mapAll})})]})]})},be=e=>{let{projectId:t,close:r}=e;const[a,i]=Object(n.useState)(""),[o,c]=Object(n.useState)(""),u=Object(s.d)((e=>e.auth.token)),h=Object(de.a)((()=>Object(S.d)("projects/".concat(t,"/actions/message-contributors/"),JSON.stringify({subject:a,message:o}),u,"POST"))),p=e=>{i(e.target.value)};return Object(f.jsxs)("div",{className:Ee.modalClass,children:[Object(f.jsx)("h2",{className:Ee.modalTitleClass,children:Object(f.jsx)(l.a,{...d.a.messageContributors})}),Object(f.jsx)("p",{className:Ee.pClass+" pb3",children:Object(f.jsx)(l.a,{...d.a.messageContributorsDescription})}),Object(f.jsx)(l.a,{...d.a.subjectPlaceholder,children:e=>Object(f.jsx)("input",{value:a,onChange:p,name:"subject",className:"db center pa2 w-100 fl mb3",type:"text",placeholder:e})}),Object(f.jsx)(l.a,{...d.a.messagePlaceholder,children:e=>Object(f.jsx)("div",{className:"dib w-100 mt-3",children:Object(f.jsx)(g.a,{comment:o,setComment:c,enableHashtagPaste:!1,contributors:[],isShowTabNavs:!0})})}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.messageContributorsTranslationAlert})}),Object(f.jsx)(he,{status:h.status,action:"MESSAGE_CONTRIBUTORS"}),Object(f.jsxs)("p",{children:[Object(f.jsx)(W.b,{className:Ee.whiteButtonClass,onClick:r,children:Object(f.jsx)(l.a,{...d.a.cancel})}),Object(f.jsx)(W.b,{className:Ee.redButtonClass,onClick:()=>h.execute(),loading:"pending"===h.status,disabled:"pending"===h.status,children:Object(f.jsx)(l.a,{...d.a.messageContributors})})]})]})},ve=e=>{var t;let{projectId:r,action:a}=e;const i=Object(s.d)((e=>e.auth.token)),[o,c]=Object(n.useState)(null),[,u,h]=Object(ne.a)("projects/".concat(r,"/contributions/")),p={VALIDATED:"validated",BADIMAGERY:"badImagery"},m=null===(t=h.userContributions)||void 0===t?void 0:t.filter((e=>e[p[a]]>0)),g=Object(de.a)((()=>Object(S.d)("projects/".concat(r,"/tasks/actions/reset-by-user/?username=").concat(o.username,"&action=").concat(a),null,i,"POST")));return Object(f.jsxs)("div",{children:[Object(f.jsx)(x.a,{classNamePrefix:"react-select",className:"w-40 fl pr2 z-3",getOptionLabel:e=>{let{username:t}=e;return t},getOptionValue:e=>{let{username:t}=e;return t},onChange:e=>{c(e)},value:o,options:m,isLoading:u}),Object(f.jsx)(W.b,{onClick:()=>g.execute(),loading:"pending"===g.status,disabled:"pending"===g.status||!o,className:Ee.buttonClass,children:Object(f.jsx)(l.a,{...d.a["revert".concat(a,"Tasks")]})}),Object(f.jsx)("div",{className:"pt1",children:Object(f.jsx)(he,{status:g.status,action:"REVERT_".concat(a,"_TASKS")})})]})},_e=e=>{let{projectId:t,orgId:r}=e;const a=Object(s.d)((e=>e.auth.token)),{projectInfo:i}=Object(n.useContext)(Ce),[o,c]=Object(n.useState)(""),[u,h]=Object(n.useState)([]),[p,m]=Object(n.useState)([]),[g,y]=Object(n.useState)(!0);Object(n.useEffect)((()=>{Object(S.b)("organisations/".concat(r,"/?omitManagerList=false"),a).then((e=>h(e.managers.map((e=>e.username))))).then((()=>y(!1))),Object(S.b)("users/?pagination=false&role=ADMIN",a).then((e=>m(e.users.map((e=>e.username)))))}),[a,r]);const b=[{label:i.organisationName,options:null===u||void 0===u?void 0:u.map((e=>({label:e,value:e})))},{label:Object(f.jsx)(l.a,{...d.a.admins}),options:null===p||void 0===p?void 0:p.filter((e=>!(null!==u&&void 0!==u&&u.includes(e)))).map((e=>({label:e,value:e})))}],{username:v,role:_}=Object(s.d)((e=>e.auth.userDetails)),w=(null===u||void 0===u?void 0:u.includes(v))||"ADMIN"===_||v===i.author,j=Object(de.a)((()=>Object(S.d)("projects/".concat(t,"/actions/transfer-ownership/"),JSON.stringify({username:o}),a,"POST")));return Object(f.jsxs)("div",{children:[Object(f.jsx)(x.a,{classNamePrefix:"react-select",className:"w-40 fl pr2 z-3",getOptionLabel:e=>{let{label:t}=e;return t},getOptionValue:e=>{let{value:t}=e;return t},onChange:e=>{return t=null===e||void 0===e?void 0:e.value,void c(t);var t},value:null===b||void 0===b?void 0:b.find((e=>e.value===o)),options:b,isLoading:g}),Object(f.jsx)(W.b,{onClick:()=>j.execute(),loading:"pending"===j.status,disabled:"pending"===j.status||!o||!w,className:Ee.buttonClass,children:Object(f.jsx)(l.a,{...d.a.transferProject})}),Object(f.jsx)("div",{className:"pt1",children:Object(f.jsx)(he,{status:j.status,action:"TRANSFER_PROJECT"})})]})},we=e=>{let{projectId:t,projectName:r,orgId:n}=e;const a=Object(i.q)();return Object(f.jsxs)("div",{className:"w-100",children:[Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.messageContributors})}),Object(f.jsx)(le.a,{trigger:Object(f.jsx)(W.b,{className:Ee.actionClass,children:Object(f.jsx)(l.a,{...d.a.messageContributors})}),modal:!0,closeOnDocumentClick:!0,nested:!0,children:e=>Object(f.jsx)(be,{projectId:t,close:e})})]}),Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.mappingValidationSection})}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.mappingValidationSectionDescription})}),Object(f.jsxs)("p",{className:Ee.pClass,children:[Object(f.jsxs)("span",{className:"fw6",children:[Object(f.jsx)(l.a,{...d.a.warning}),":"," "]}),Object(f.jsx)(l.a,{...d.a.canNotUndo})]}),Object(f.jsx)(le.a,{trigger:Object(f.jsx)(W.b,{className:Ee.actionClass,children:Object(f.jsx)(l.a,{...d.a.mapAll})}),modal:!0,closeOnDocumentClick:!0,children:e=>Object(f.jsx)(ye,{projectId:t,close:e})}),Object(f.jsx)(le.a,{trigger:Object(f.jsx)(W.b,{className:Ee.actionClass,children:Object(f.jsx)(l.a,{...d.a.invalidateAll})}),modal:!0,closeOnDocumentClick:!0,children:e=>Object(f.jsx)(ge,{projectId:t,close:e})}),Object(f.jsx)(le.a,{trigger:Object(f.jsx)(W.b,{className:Ee.actionClass,children:Object(f.jsx)(l.a,{...d.a.validateAllTasks})}),modal:!0,closeOnDocumentClick:!0,children:e=>Object(f.jsx)(me,{projectId:t,close:e})})]}),Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.resetAll})}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.resetAllDescription})}),Object(f.jsxs)("p",{className:Ee.pClass,children:[Object(f.jsxs)("span",{className:"fw6",children:[Object(f.jsx)(l.a,{...d.a.warning}),":"," "]}),Object(f.jsx)(l.a,{...d.a.canNotUndo})]}),Object(f.jsx)(le.a,{trigger:Object(f.jsx)(W.b,{className:Ee.actionClass,children:Object(f.jsx)(l.a,{...d.a.resetAllButton})}),modal:!0,closeOnDocumentClick:!0,children:e=>Object(f.jsx)(pe,{projectId:t,close:e})}),Object(f.jsx)(le.a,{trigger:Object(f.jsx)(W.b,{className:Ee.actionClass,children:Object(f.jsx)(l.a,{...d.a.resetBadImageryButton})}),modal:!0,closeOnDocumentClick:!0,children:e=>Object(f.jsx)(fe,{projectId:t,close:e})})]}),["VALIDATED","BADIMAGERY"].map((e=>Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a["revert".concat(e,"TasksTitle")]})}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a["revert".concat(e,"TasksDescription")]})}),Object(f.jsx)(ve,{projectId:t,action:e})]},e))),Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.transferProjectTitle})}),Object(f.jsxs)("p",{className:Ee.pClass,children:[Object(f.jsxs)("span",{className:"fw6",children:[Object(f.jsx)(l.a,{...d.a.warning}),":"," "]}),Object(f.jsx)(l.a,{...d.a.canNotUndo})]}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.transferProjectAlert})}),Object(f.jsx)(_e,{projectId:t,orgId:n})]}),Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.cloneProject})}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.cloneProjectDescription})}),Object(f.jsx)(W.b,{onClick:()=>a("/manage/projects/new/?cloneFrom=".concat(t)),className:Ee.actionClass,children:Object(f.jsx)(l.a,{...d.a.cloneProject})})]}),Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.deleteProject})}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.deleteProjectAlert})}),Object(f.jsxs)("p",{className:Ee.pClass,children:[Object(f.jsxs)("span",{className:"fw6",children:[Object(f.jsx)(l.a,{...d.a.warning}),":"," "]}),Object(f.jsx)(l.a,{...d.a.canNotUndo})]}),Object(f.jsx)(ue.a,{id:t,name:r,type:"projects",className:"pointer bg-red white"})]})]})},je=e=>{let{name:t,value:r,handleChange:n}=e;return Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:"name"===t?Object(f.jsx)(l.a,{...d.a.customEditorName}):Object(f.jsx)(l.a,{...d.a.customEditorUrl})}),Object(f.jsx)("input",{className:Ee.inputClass,onChange:n,name:t,type:"text",value:r})]})},xe=e=>{let{languages:t}=e;const{projectInfo:r,setProjectInfo:a}=Object(n.useContext)(Ce),s=e=>{var t={...r.customEditor,[e.target.name]:"checkbox"===e.target.type?e.target.checked:e.target.value};a({...r,customEditor:t})};return Object(f.jsxs)("div",{className:"w-100",children:[Object(f.jsx)(je,{name:"name",value:r.customEditor?r.customEditor.name:"",handleChange:s}),Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.customEditorDescription})}),Object(f.jsx)("textarea",{className:Ee.inputClass,onChange:s,rows:Ee.numRows,name:"description",type:"text",value:r.customEditor?r.customEditor.description:""})]}),Object(f.jsx)(je,{name:"url",value:r.customEditor?r.customEditor.url:"",handleChange:s}),r.customEditor&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:"db pb3",children:Object(f.jsx)(O.h,{label:Object(f.jsx)(l.a,{...d.a.customEditorEnabledForMapping}),labelPosition:"right",isChecked:r.mappingEditors.includes("CUSTOM"),onChange:()=>{let e=r.mappingEditors;e.includes("CUSTOM")?e=e.filter((e=>"CUSTOM"!==e)):e.push("CUSTOM"),a({...r,mappingEditors:e})}})}),Object(f.jsx)("label",{className:"db pt1",children:Object(f.jsx)(O.h,{label:Object(f.jsx)(l.a,{...d.a.customEditorEnabledForValidation}),labelPosition:"right",isChecked:r.validationEditors.includes("CUSTOM"),onChange:()=>{let e=r.validationEditors;e.includes("CUSTOM")?e=e.filter((e=>"CUSTOM"!==e)):e.push("CUSTOM"),a({...r,validationEditors:e})}})})]}),Object(f.jsxs)("div",{className:Ee.divClass,children:[Object(f.jsx)("label",{className:Ee.labelClass,children:Object(f.jsx)(l.a,{...d.a.deleteCustomEditor})}),Object(f.jsx)("p",{className:Ee.pClass,children:Object(f.jsx)(l.a,{...d.a.confirmDeleteCustomEditor})}),Object(f.jsxs)(W.c,{className:"red bg-white pv2 ph3 ba b--red",onClick:e=>{a({...r,customEditor:null})},children:[Object(f.jsx)(V.sb,{className:"pr2 v-top"}),Object(f.jsx)(l.a,{...d.a.removeCustomEditor})]})]})]})]})};var Me=r(121),Oe=r(164),ke=r(1919);const Ce=a.a.createContext(),Ee={divClass:"w-70-l w-100 pb4 mb3",labelClass:"f4 fw6 db mb3",pClass:"db mb3 f5",inputClass:"w-80 pa2 db mb2 ba b--grey-light",numRows:"4",buttonClass:"bg-blue-dark dib white",modalTitleClass:"f3 pb3 mv0 bb",drawButtonClass:"bg-blue-dark white mr2",redButtonClass:"bg-red white",whiteButtonClass:"bg-white blue-dark mr2",modalClass:"pa4",actionClass:"bg-blue-dark white dib mr2 mt2 pointer"},Se=(e,t)=>(!0===e.target.checked?t.push(e.target.value):t=t.filter((t=>t!==e.target.value)),t),Ne=(e,t)=>["TEAMS","TEAMS_LEVEL"].includes(t)&&0===e.filter((e=>"MAPPER"===e.role)).length&&0===e.filter((e=>"VALIDATOR"===e.role)).length&&0===e.filter((e=>"PROJECT_MANAGER"===e.role)).length,Ie=(e,t)=>["TEAMS","TEAMS_LEVEL"].includes(t)&&0===e.filter((e=>"VALIDATOR"===e.role)).length&&0===e.filter((e=>"PROJECT_MANAGER"===e.role)).length;function De(){const{id:e}=Object(i.s)();Object(Oe.b)("Edit project #".concat(e));const[t,r,a]=Object(ne.a)("system/languages/"),o=["name","shortDescription","description","instructions"],d=Object(s.d)((e=>e.auth.token)),[h,p]=Object(n.useState)(null),[m,g]=Object(n.useState)(!1),[y,b]=Object(n.useState)("description"),[_,w]=Object(n.useState)({mappingTypes:[],mappingEditors:[],validationEditors:[],organisation:"",teams:[],projectInfoLocales:[{locale:"",name:"",shortDescription:"",description:"",instructions:"",perTaskInstructions:""}],rapidPowerUser:!1}),[x]=Object(ke.b)(_),M=t||r?[]:a.supportedLanguages;Object(n.useLayoutEffect)((()=>{g(!1),p(null)}),[_,y]),Object(n.useLayoutEffect)((()=>{!async function(){try{const t=await Object(S.b)("projects/".concat(e,"/"),d,"GET");w(t)}catch(t){}}()}),[e,d]);const O=Object(de.a)(((t,r)=>{const[n]=_.projectInfoLocales.filter((e=>e.locale===_.defaultLocale));let a=[];if(void 0===n)a.push({locale:_.defaultLocale,fields:o});else{const e=o.filter((e=>!1===Object.keys(n).includes(e)||""===n[e]));e.length&&a.push({locale:n.locale,fields:e})}const s=[];0===_.mappingTypes.length&&s.push("mappingTypes");const{mappingEditors:i,validationEditors:c,customEditor:l}=_;(0===i.filter((e=>"CUSTOM"!==e)).length&&i.includes("CUSTOM")&&void 0===l||0===i.length)&&s.push("noMappingEditor"),(0===c.filter((e=>"CUSTOM"!==e)).length&&c.includes("CUSTOM")&&void 0===l||0===c.length)&&s.push("noValidationEditor"),_.organisation||s.push("organisation"),s.length&&a.push({locale:null,fields:s});const{teams:u,mappingPermission:h,validationPermission:f}=_;return(Ne(u,h)||Ie(u,f))&&a.push({type:"noTeamsAssigned"}),a.length>0?(p(a),new Promise(((e,t)=>t()))):Object(S.d)("projects/".concat(e,"/"),JSON.stringify(_),d,"PATCH").then((e=>{g(!0),p(null)})).catch((e=>p("SERVER")))}));if(_.projectId&&!x)return Object(f.jsx)("div",{className:"cf w-100 pv5",children:Object(f.jsx)("div",{className:"tc",children:Object(f.jsx)("h3",{className:"f3 fw8 mb4 barlow-condensed",children:Object(f.jsx)(l.a,{...u.a.projectEditNotAllowed})})})});return Object(f.jsxs)("div",{className:"cf pv3 blue-dark",children:[Object(f.jsx)("h2",{className:"pb2 f2 fw6 mt2 mb3 ttu barlow-condensed blue-dark",children:Object(f.jsx)(l.a,{...u.a.editProject})}),Object(f.jsx)("div",{className:"fl w-30-l w-100 ph0-ns ph4-m ph2 pb4 sticky-top-l",children:Object(f.jsxs)(c.a,{showLoadingAnimation:!0,rows:8,ready:_&&_.projectInfo,className:"pr3",children:[(()=>{const e=e=>{let t="w-90 link barlow-condensed f4 fw5 pv3 pl2 pointer";return y===e&&(t=t.concat(" fw6 bg-grey-light")),t};return Object(f.jsx)("div",{children:Object(f.jsx)("ul",{className:"list pl0 mt0 ttu",children:[{value:"description",required:!0},{value:"instructions",required:!0},{value:"metadata",required:!0},{value:"priority_areas"},{value:"imagery"},{value:"permissions"},{value:"settings"},{value:"actions"},{value:"custom_editor"}].map(((t,r)=>Object(f.jsxs)("li",{className:e(t.value),onClick:()=>b(t.value),children:[Object(f.jsx)(l.a,{...u.a["projectEditSection_".concat(t.value)]}),t.required&&" *"]},r)))})})})(),Object(f.jsx)(W.b,{onClick:()=>O.execute(),className:"db bg-red white pa3 bn",loading:"pending"===O.status,children:Object(f.jsx)(l.a,{...u.a.save})}),Object(f.jsx)("div",{style:{minHeight:"3rem"},children:(h||m)&&Object(f.jsx)(Pe,{error:h,success:m,projectInfo:_})}),Object(f.jsx)("span",{className:"db",children:Object(f.jsx)(Me.a,{value:null,options:[{label:Object(f.jsx)(l.a,{...u.a.projectPage}),href:"/projects/".concat(_.projectId,"/"),internalLink:!0},{label:Object(f.jsx)(l.a,{...u.a.tasksPage}),href:"/projects/".concat(_.projectId,"/tasks/"),internalLink:!0},{label:Object(f.jsx)(l.a,{...u.a.projectStats}),href:"/projects/".concat(_.projectId,"/stats/"),internalLink:!0}],display:Object(f.jsx)(l.a,{...u.a.accessProject}),className:"ba b--grey-light bg-white mr1 f5 v-mid pv2 ph3"})})]})}),Object(f.jsx)(c.a,{showLoadingAnimation:!0,type:"media",rows:26,delay:200,ready:_&&_.projectInfo,children:Object(f.jsx)(Ce.Provider,{value:{projectInfo:_,setProjectInfo:w,success:m,setSuccess:g,error:h,setError:p},children:Object(f.jsx)("div",{className:"fl w-70-l w-100 ph0-l ph4-m ph2",children:(e=>{switch(e){case"description":return Object(f.jsx)(v,{languages:M});case"instructions":return Object(f.jsx)(j,{languages:M});case"metadata":return Object(f.jsx)(D,{});case"imagery":return Object(f.jsx)(ee,{});case"permissions":return Object(f.jsx)(ie,{});case"settings":return Object(f.jsx)(ce,{languages:M,defaultLocale:_.defaultLocale});case"priority_areas":return Object(f.jsx)(X,{});case"actions":return Object(f.jsx)(we,{projectId:_.projectId,projectName:_.projectInfo.name,orgId:_.organisation});case"custom_editor":return Object(f.jsx)(xe,{languages:M,defaultLocale:_.defaultLocale});default:return null}})(y)})})})]})}const Te=e=>{let{locale:t,numberOfMissingFields:r,type:n,projectInfo:a}=e;if("noTeamsAssigned"===n){const{teams:e,mappingPermission:t,validationPermission:r}=a;return Object(f.jsx)(l.a,{...u.a.noTeamsAssigned,values:{mapping:Ne(e,t),validation:Ie(e,r)}})}return null===t?Object(f.jsx)(l.a,{...u.a.missingFields,values:{number:r}}):Object(f.jsx)(l.a,{...u.a.missingFieldsForLocale,values:{locale:t}})},Ae=e=>{let{errors:t,projectInfo:r}=e;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("span",{className:"fw6",children:Object(f.jsx)(l.a,{...u.a.saveProjectError})}),t.map(((e,t)=>{var n,a;return Object(f.jsxs)("div",{className:"cf w-100 pt2 ml3 pl2",children:[Object(f.jsx)("span",{children:Object(f.jsx)(Te,{locale:e.locale,numberOfMissingFields:(null===(n=e.fields)||void 0===n?void 0:n.length)||0,type:e.type,projectInfo:r})}),Object(f.jsx)("ul",{className:"mt2 mb0",children:null===(a=e.fields)||void 0===a?void 0:a.map(((t,r)=>Object(f.jsxs)("li",{children:[Object(f.jsx)(l.a,{...d.a[t]}),r===e.fields.length-1?"":","]},r)))})]},t)}))]})},Pe=e=>{let{error:t,success:r,projectInfo:n}=e,a=null;return!0===r&&(a=Object(f.jsx)(l.a,{...u.a.updateSuccess})),null!==t&&"SERVER"!==t&&(a=Object(f.jsx)(Ae,{errors:t,projectInfo:n})),null!==t&&"SERVER"===t&&(a=Object(f.jsx)(l.a,{...u.a.serverError})),Object(f.jsx)("div",{className:"pv3 pr3",children:Object(f.jsx)(J.a,{type:r?"success":"error",children:a})})}}}]);
//# sourceMappingURL=projectEdit.fdcd7442.chunk.js.map