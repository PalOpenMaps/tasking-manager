(this["webpackJsonpTaskingManager-frontend"]=this["webpackJsonpTaskingManager-frontend"]||[]).push([[814],{1914:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return n}));var s=a(30),i=a(13),r=a(62),o=a(0);const c=e=>{let{type:t="info",compact:a=!1,inline:s=!1,iconClassName:r,children:c}=e;const n={info:i.I,success:i.g,warning:i.a,error:i.c}[t];return Object(o.jsxs)("div",{className:"".concat(s?"di":"db"," blue-dark bl bw2 br2 ").concat(a?"pa2":"pa3"," ").concat({info:"b--blue bg-lightest-blue",success:"b--dark-green bg-washed-green",warning:"b--gold bg-washed-yellow",error:"b--dark-red bg-washed-red"}[t]),children:[Object(o.jsx)(n,{className:"h1 w1 v-top mr2 ".concat({info:"blue",success:"dark-green",warning:"gold",error:"dark-red"}[t]," ").concat(r||"")}),c]})};function n(e){let{entity:t,action:a="creation"}=e;const i="updation"===a?"entityInfoUpdationFailure":"entityCreationFailure";return Object(o.jsx)(c,{type:"error",children:Object(o.jsx)(s.a,{...r.a[i],values:{entity:t}})})}},1915:function(e,t,a){"use strict";var s=a(20);t.a=Object(s.b)({noProjectTeams:{id:"project.detail.teams.empty",defaultMessage:"This project doesn't have any teams associated with."},coordination:{id:"project.detail.coordination",defaultMessage:"Coordination"},projectCoordination:{id:"project.detail.coordination.description",defaultMessage:"This project is coordinated by {organisation} and was created by {user}."},createdBy:{id:"project.detail.createdBy",defaultMessage:"Project created by {user}."},noProjectContributors:{id:"project.detail.contributorCount.zero",defaultMessage:"No contributors yet"},projectTotalContributors:{id:"project.detail.contributorCount",defaultMessage:"{number, plural, one {<b>#</b> contributor} other {<b>#</b> contributors}}"},projectLastContribution:{id:"project.detail.lastContribution",defaultMessage:"Last contribution"},percentMapped:{id:"project.detail.percentMapped",defaultMessage:"Mapped"},percentValidated:{id:"project.detail.percentValidated",defaultMessage:"Validated"},projectPriorityURGENT:{id:"project.detail.projectPriorityUrgent",defaultMessage:"Urgent"},projectPriorityHIGH:{id:"project.detail.projectPriorityHigh",defaultMessage:"High"},projectPriorityMEDIUM:{id:"project.detail.projectPriorityMedium",defaultMessage:"Medium"},projectPriorityLOW:{id:"project.detail.projectPriorityLow",defaultMessage:"Low"},dueDateRelativeRemainingDays:{id:"project.detail.dueDateLeft",defaultMessage:"{daysLeftHumanize} left"},typesOfMapping:{id:"project.detail.typesOfMapping",defaultMessage:"Types of Mapping"},private:{id:"project.detail.private",defaultMessage:"Private"},editProject:{id:"project.detail.editProject",defaultMessage:"Edit project"},editor:{id:"project.detail.editor",defaultMessage:"Editor"},selectEditor:{id:"project.detail.editor.select",defaultMessage:"Select editor"},tasks:{id:"project.detail.tasks",defaultMessage:"Tasks"},instructions:{id:"project.detail.instructions",defaultMessage:"Instructions"},imagery:{id:"project.detail.imagery",defaultMessage:"Imagery"},customTMSLayer:{id:"project.detail.imagery.tms",defaultMessage:"Custom TMS Layer"},customWMSLayer:{id:"project.detail.imagery.wms",defaultMessage:"Custom WMS Layer"},customWMTSLayer:{id:"project.detail.imagery.wmts",defaultMessage:"Custom WMTS Layer"},contribute:{id:"project.selectTask.footer.button.contribute",defaultMessage:"Contribute"},readMore:{id:"project.readMoreButton",defaultMessage:"Read more"},readLess:{id:"project.readLessButton",defaultMessage:"Read less"},addToFavorites:{id:"project.detail.addToFavorites",defaultMessage:"Add to Favorites"},removeFromFavorites:{id:"project.detail.removeFromFavorites",defaultMessage:"Remove from Favorites"},noComments:{id:"project.detail.questionsAndComments.none",defaultMessage:"There are currently no questions or comments on this project. Be the first to post one!"},loginTocomment:{id:"project.detail.questionsAndComments.login",defaultMessage:"Log in to be able to post comments."},errorLoadingComments:{id:"project.detail.questionsAndComments.fetching.error",defaultMessage:"An error occured while loading questions and comments."},post:{id:"project.detail.questionsAndComments.button",defaultMessage:"Post"},share:{id:"project.detail.share",defaultMessage:"Share"},team:{id:"project.detail.team",defaultMessage:"Team"},validationTeam:{id:"project.detail.validation_team",defaultMessage:"Validation team"},teamsAndPermissions:{id:"project.detail.teams_permissions",defaultMessage:"Teams & Permissions"},author:{id:"project.detail.author",defaultMessage:"Author"},whoCanMap:{id:"project.detail.mapping_permissions",defaultMessage:"Who can map?"},whoCanValidate:{id:"project.detail.validation_permissions",defaultMessage:"Who can validate?"},zoomToTasks:{id:"project.detail.zoomToTasks",defaultMessage:"Zoom to tasks"},selectATaskCardTitle:{id:"project.detail.cards.selectATask.title",defaultMessage:"1. Select a task"},mapThroughOSMCardTitle:{id:"project.detail.cards.mapthroughosm.title",defaultMessage:"2. Map with OpenStreetMap"},submitYourWorkCardTitle:{id:"project.detail.cards.submityourwork.title",defaultMessage:"3. Submit your work"},selectATaskCardDescription:{id:"project.detail.cards.selectATask.description",defaultMessage:"Projects are divided into sets of smaller tasks and adapted to fit your skill level."},mapThroughOSMCardDescription:{id:"project.detail.cards.mapthroughosm.description",defaultMessage:"If you are new to mapping, we recommend checking the Learn page for instructions before you begin."},submitYourWorkCardDescription:{id:"project.detail.cards.submityourwork.description",defaultMessage:"Submitting your work is crucial to make sure your data is saved."},overview:{id:"project.detail.sections.overview",defaultMessage:"Overview"},dueDateTooltip:{id:"project.detail.sections.overview.dueDate",defaultMessage:"Ideal date to complete the project"},description:{id:"project.detail.sections.description",defaultMessage:"Description"},questionsAndComments:{id:"project.detail.sections.questionsAndComments",defaultMessage:"Questions and comments"},contributions:{id:"project.detail.sections.contributions",defaultMessage:"Contributions"},contributionsTimeline:{id:"project.detail.sections.contributionsTimeline",defaultMessage:"Contributions timeline"},downloadOsmData:{id:"project.detail.sections.downloadOsmData",defaultMessage:"Download OSM Data"},errorDownloadOsmData:{id:"project.detail.sections.errorDownloadOsmData",defaultMessage:"Data Extraction Unavailable"},errorDownloadOsmDataDescription:{id:"project.detail.sections.errorDownloadOsmDataDescription",defaultMessage:"The data extract you are attempting to download is currently inactive or unavailable. Please ensure that the extract is active and try again later."},viewInOsmcha:{id:"project.detail.sections.contributions.osmcha",defaultMessage:"Changesets in OSMCha"},changesets:{id:"project.detail.sections.contributions.changesets",defaultMessage:"Changesets"},contributors:{id:"project.detail.sections.contributors",defaultMessage:"Contributors"},similarProjects:{id:"project.detail.sections.similarProjects",defaultMessage:"Similar projects"},contributorsError:{id:"project.detail.sections.contributors.error",defaultMessage:"An error occured while loading contributors"},timelineNotAvailable:{id:"project.detail.sections.contributions.timelineError",defaultMessage:"A timeline is going to be available after the first task has been mapped."},status_DRAFT:{id:"project.status.draft",defaultMessage:"Draft"},status_ARCHIVED:{id:"project.status.archived",defaultMessage:"Archived"},status_PUBLISHED:{id:"project.status.published",defaultMessage:"Published"},permissions_ANY:{id:"project.permissions.any",defaultMessage:"All users"},permissions_LEVEL:{id:"project.permissions.level",defaultMessage:"Users with intermediate or advanced level"},permissions_TEAMS:{id:"project.permissions.teams",defaultMessage:"{team} members"},permissions_TEAMS_LEVEL:{id:"project.permissions.teamsAndLevel",defaultMessage:"Intermediate and advanced {team} members"},downloadProjectAOI:{id:"projects.data.download.aoi",defaultMessage:"Download AOI"},downloadTaskGrid:{id:"projects.data.download.taskGrid",defaultMessage:"Download Tasks Grid"},moreStats:{id:"projects.link.stats",defaultMessage:"More statistics"},mappedTasks:{id:"projects.stats.mapped",defaultMessage:"Mapped tasks"},validatedTasks:{id:"projects.stats.validated",defaultMessage:"Validated tasks"},shareMessage:{id:"project.share.twitter",defaultMessage:"Contribute mapping the project #{id} on {site}"},postOnFacebook:{id:"project.share.facebook",defaultMessage:"Post on Facebook"},shareOnLinkedIn:{id:"project.share.linkedin",defaultMessage:"Share on LinkedIn"},inaccessibleProjectTitle:{id:"project.inaccessible.title",defaultMessage:"You don't have permission to access this project"},inaccessibleProjectDescription:{id:"project.inaccessible.description",defaultMessage:"Please contact the project manager to request access."},exploreOtherProjects:{id:"project.inaccessible.exploreOtherProjects",defaultMessage:"Explore other projects"},noSimilarProjectsFound:{id:"project.noSimilarProjectsFound",defaultMessage:"Could not find any similar projects for this project"}})},1916:function(e,t,a){"use strict";var s=a(20);t.a=Object(s.b)({projectTotalContributors:{id:"project.card.contributorCount",defaultMessage:"{number} total contributors"},projectLastContribution:{id:"project.card.lastContribution",defaultMessage:"Last contribution"},percentMapped:{id:"project.card.percentMapped",defaultMessage:"{n}% mapped"},percentValidated:{id:"project.card.percentValidated",defaultMessage:"{n}% validated"},percentBadImagery:{id:"project.card.percentBadImagery",defaultMessage:"{n}% bad imagery"},projectPriorityURGENT:{id:"project.card.projectPriorityUrgent",defaultMessage:"Urgent"},projectPriorityHIGH:{id:"project.card.projectPriorityHigh",defaultMessage:"High"},projectPriorityMEDIUM:{id:"project.card.projectPriorityMedium",defaultMessage:"Medium"},projectPriorityLOW:{id:"project.card.projectPriorityLow",defaultMessage:"Low"},priorityDescriptionURGENT:{id:"project.card.projectPriorityUrgent.description",defaultMessage:"Urgent priority"},priorityDescriptionHIGH:{id:"project.card.projectPriorityHigh.description",defaultMessage:"High priority"},priorityDescriptionMEDIUM:{id:"project.card.projectPriorityMedium.description",defaultMessage:"Medium priority"},priorityDescriptionLOW:{id:"project.card.projectPriorityLow.description",defaultMessage:"Low priority"},dueDateRelativeRemainingDays:{id:"project.card.dueDateLeft",defaultMessage:"{daysLeftHumanize} left"},editProject:{id:"project.card.edit_project.button",defaultMessage:"Edit"},projectPage:{id:"project.card.project_page.button",defaultMessage:"Project Page"},projectTasks:{id:"project.card.project_tasks.button",defaultMessage:"Tasks"},noDueDate:{id:"project.detail.noDueDate",defaultMessage:"No due date specified"},dueDateExpired:{id:"project.detail.dueDateExpired",defaultMessage:"Due date expired"}})},1919:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return c}));var s=a(1),i=a(10);function r(e){const t=Object(i.d)((e=>e.auth.userDetails)),a=Object(i.d)((e=>e.auth.organisations)),r=Object(i.d)((e=>e.auth.pmTeams)),[o,c]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{"ADMIN"===t.role&&c(!0),e&&e.author&&t.username===e.author&&c(!0),a&&a.includes(e.organisation)&&c(!0);const s=e.teams?e.teams.filter((e=>"PROJECT_MANAGER"===e.role)).map((e=>e.teamId)):[];r&&r.some((e=>s.includes(e)))&&c(!0)}),[r,t.role,t.username,a,e]),[o]}function o(e){const t=Object(i.d)((e=>e.auth.userDetails)),a=Object(i.d)((e=>e.auth.organisations)),r=Object(i.d)((e=>e.auth.pmTeams)),[o,c]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{if("ADMIN"===t.role&&c(!0),a&&a.includes(e.organisation_id)&&c(!0),r&&r.includes(e.teamId)&&c(!0),e.members){const a=e.members.filter((e=>e.active&&"MANAGER"===e.function)).map((e=>e.username));t.username&&a.includes(t.username)&&c(!0)}}),[r,t.role,t.username,a,e]),[o]}function c(e){const t=Object(i.d)((e=>e.auth.userDetails)),a=Object(i.d)((e=>e.auth.organisations)),[r,o]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{"ADMIN"===t.role&&o(!0),e&&e.organisationId&&a&&a.includes(e.organisationId)&&o(!0),e&&e.managers&&e.managers.map((e=>e.username)).includes(t.username)&&o(!0)}),[e,a,t.username,t.role]),[r]}},1923:function(e,t,a){"use strict";var s=a(20);t.a=Object(s.b)({loading:{id:"users.detail.loading",defaultMessage:"loading"},contributionTimelineTitle:{id:"users.detail.contributionTimelineTitle",defaultMessage:"Contribution Timeline"},projectsTitle:{id:"users.detail.projectsTitle",defaultMessage:"Projects"},countries:{id:"users.detail.countries",defaultMessage:"Countries"},timeSpentMapping:{id:"users.detail.timeSpentMapping",defaultMessage:"Time spent mapping"},buildingsMapped:{id:"users.detail.buildingsMapped",defaultMessage:"Buildings mapped"},roadMapped:{id:"users.detail.roadMapped",defaultMessage:"Km road mapped"},poiMapped:{id:"users.detail.poiMapped",defaultMessage:"Points of interests mapped"},waterwaysMapped:{id:"users.detail.waterwaysMapped",defaultMessage:"Km waterways mapped"},userMapped:{id:"users.detail.tasksMapped",defaultMessage:"{user} mapped"},you:{id:"users.detail.you",defaultMessage:"You"},userValidated:{id:"users.detail.tasksValidated",defaultMessage:"{user} validated"},invalidated:{id:"users.detail.invalidated",defaultMessage:"Needed more mapping"},validated:{id:"users.detail.validated",defaultMessage:"Validated"},finished:{id:"users.detail.finished",defaultMessage:"Finished"},topProjectsMappedTitle:{id:"users.detail.topProjectsMappedTitle",defaultMessage:"Top 5 projects contributed"},noTopProjectsData:{id:"users.detail.topProjectsMapped.error",defaultMessage:"No projects mapped until now."},topCausesTitle:{id:"users.detail.topCausesTitle",defaultMessage:"Top causes contributed to"},others:{id:"users.detail.others",defaultMessage:"Others"},noProjectsData:{id:"users.detail.projects.noData",defaultMessage:"Information is not available because no projects were mapped until now."},editsTitle:{id:"users.detail.editsTitle",defaultMessage:"Edits by numbers"},noEditsData:{id:"users.detail.edits.error",defaultMessage:"No data to show yet. OpenStreetMap edits stats are updated with a delay of one hour."},topCountriesTitle:{id:"users.detail.topCountriesTitle",defaultMessage:"Top 5 countries most mapped"},tasks:{id:"users.detail.tasks",defaultMessage:"tasks"},heatmapNoContribution:{id:"users.detail.heatmapNoContribution",defaultMessage:"No contribution"},heatmapContribution:{id:"users.detail.heatmapContribution",defaultMessage:"contribution"},heatmapContributions:{id:"users.detail.heatmapContributions",defaultMessage:"contributions"},heatmapLegendMore:{id:"users.detail.heatmapLegendMore",defaultMessage:"more"},heatmapLegendLess:{id:"users.detail.heatmapLegendLess",defaultMessage:"less"},teams:{id:"users.detail.teams",defaultMessage:"Teams"},userOrganisationsError:{id:"users.header.organisations.error",defaultMessage:"Couldn't load organisations at this time"}})},1925:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));a(1);var s=a(30),i=a(1916),r=a(13),o=a(0);function c(e){let{priority:t,extraClasses:a,showIcon:c}=e,n="blue-grey b--blue-grey";return"URGENT"===t&&(n="red b--red"),"HIGH"===t&&(n="orange b--orange"),Object(o.jsx)(s.a,{...i.a["priorityDescription".concat(t)],children:e=>Object(o.jsxs)("div",{className:"tc br1 f8 ttu ba ".concat(n," ").concat(a),title:e,children:[c&&Object(o.jsx)(r.m,{className:"".concat(n," v-mid mr1"),style:{height:"13px"}}),t?Object(o.jsx)("span",{className:"v-mid fw5",children:Object(o.jsx)(s.a,{...i.a["projectPriority".concat(t)]})}):""]})})}},1926:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a(1);var s=a(30),i=a(1915),r=a(0);const o=e=>{let{status:t,className:a}=e;const o="DRAFT"===t?"orange":"blue-grey";return Object(r.jsx)("div",{className:"tc br1 f7 ttu ba b--".concat(o," ").concat(o," ").concat(a),children:Object(r.jsx)(s.a,{...i.a["status_".concat(t)]})})}},1932:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o}));a(1);var s=a(20),i=a(0);const r=e=>{let{icon:t,description:a,value:r,className:c,invertColors:n=!1}=e;return Object(i.jsxs)("div",{className:"cf pt3 pb3 ph3 br1 ".concat(n?"bg-red white":"bg-white red shadow-6"," flex items-center ").concat(c||""),children:[Object(i.jsx)("div",{className:"w-30 fl ml2",children:t}),Object(i.jsx)(o,{value:Number(r)||0===r?Object(i.jsx)(s.a,{value:Math.trunc(r)}):r,label:a,className:"w-70 pt3-m mb1 fl",invertColors:n})]})},o=e=>{let{value:t,label:a,className:s,invertColors:r=!1}=e;return Object(i.jsxs)("div",{className:s,children:[Object(i.jsx)("h3",{className:"ma0 mb1 barlow-condensed f2 fw5 ".concat(r?"white":"red"),children:t}),Object(i.jsx)("span",{className:"ma0 h2 f7 fw5 ".concat(r?"white":"blue-grey"),children:a})]})}},1934:function(e,t,a){"use strict";a.d(t,"l",(function(){return d})),a.d(t,"i",(function(){return l})),a.d(t,"j",(function(){return u})),a.d(t,"h",(function(){return p})),a.d(t,"f",(function(){return j})),a.d(t,"n",(function(){return m})),a.d(t,"g",(function(){return b})),a.d(t,"k",(function(){return g})),a.d(t,"m",(function(){return f})),a.d(t,"b",(function(){return h})),a.d(t,"a",(function(){return O})),a.d(t,"d",(function(){return M})),a.d(t,"c",(function(){return y})),a.d(t,"e",(function(){return v}));var s=a(2116),i=a(2109),r=a(246),o=a(10),c=a(122),n=a(138);const d=(e,t)=>{const a=Object(o.d)((e=>e.auth.token)),d=Object(o.d)((e=>e.preferences.locale));return Object(r.a)({queryKey:["projects",e,t],queryFn:e=>{let{signal:t,queryKey:r}=e;return((e,t)=>{const[,r,o]=t,l=Object(c.a)(r,x);return void 0===l.action&&o&&(l.action=o),l.lastUpdatedTo&&(l.lastUpdatedTo=Object(s.default)(Object(i.default)(Date.now(),6),"yyyy-MM-dd")),Object(n.a)(a,d).get("projects/",{signal:e,params:l}).then((e=>e.data))})(t,r)},keepPreviousData:!0})},l=e=>{const t=Object(o.d)((e=>e.auth.token)),a=Object(o.d)((e=>e.preferences.locale));return Object(r.a)({queryKey:["project",e],queryFn:s=>{let{signal:i}=s;return Object(n.a)(t,a).get("projects/".concat(e,"/"),{signal:i})}})},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)({queryKey:["project-summary",e],queryFn:t=>{let{signal:a}=t;return Object(n.a)().get("projects/".concat(e,"/queries/summary/"),{signal:a})},select:e=>e.data,...t})},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)({queryKey:["project-contributions",e],queryFn:t=>{let{signal:a}=t;return Object(n.a)().get("projects/".concat(e,"/contributions/"),{signal:a})},select:e=>e.data.userContributions,...t})},j=e=>Object(r.a)({queryKey:["project-activities",e],queryFn:t=>{let{signal:a}=t;return Object(n.a)().get("projects/".concat(e,"/activities/latest/"),{signal:a})},select:e=>e.data,refetchIntervalInBackground:!1,refetchInterval:6e4,refetchOnWindowFocus:!0,useErrorBoundary:!0}),m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)({queryKey:["project-tasks",e],queryFn:t=>{let{signal:a}=t;return Object(n.a)().get("projects/".concat(e,"/tasks/"),{signal:a})},select:e=>e.data,...t})},b=e=>Object(r.a)({queryKey:["project-priority-area",e],queryFn:t=>{let{signal:a}=t;return(t=>Object(n.a)().get("projects/".concat(e,"/queries/priority-areas/"),{signal:t}))(a)},select:e=>e.data}),g=e=>Object(r.a)({queryKey:["project-timeline",e],queryFn:t=>{let{signal:a}=t;return(t=>Object(n.a)().get("projects/".concat(e,"/contributions/queries/day/"),{signal:t}))(a)},select:e=>e.data.stats}),f=(e,t,a)=>{const s=Object(o.d)((e=>e.auth.token));return Object(r.a)({queryKey:["task-detail",e,t],queryFn:a=>{let{signal:i}=a;return Object(n.a)(s).get("projects/".concat(e,"/tasks/").concat(t,"/"),{signal:i})},select:e=>e.data,enabled:!(!e||!t),refetchInterval:!!a&&6e4})},h=function(e,t,a,s){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"en";return Object(n.a)(s,i).post("projects/".concat(e,"/tasks/actions/stop-mapping/").concat(t,"/"),{comment:a})},O=(e,t,a,s)=>Object(n.a)(a,s).post("projects/".concat(e,"/tasks/actions/split/").concat(t,"/")),M=(e,t,a,s)=>Object(n.a)(a,s).post(e,t),y=function(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"en";return Object(n.a)(a,s).post("projects/".concat(e,"/tasks/actions/stop-validation/"),t)},v=(e,t,a,s)=>Object(n.a)(a,s).post("projects/".concat(e,"/tasks/actions/unlock-after-validation/"),t),x={difficulty:"difficulty",campaign:"campaign",team:"teamId",organisation:"organisationName",location:"country",types:"mappingTypes",exactTypes:"mappingTypesExact",interests:"interests",text:"textSearch",page:"page",orderBy:"orderBy",orderByType:"orderByType",createdByMe:"createdByMe",managedByMe:"managedByMe",favoritedByMe:"favoritedByMe",mappedByMe:"mappedByMe",status:"projectStatuses",action:"action",stale:"lastUpdatedTo",createdFrom:"createdFrom",basedOnMyInterests:"basedOnMyInterests"}},1966:function(e,t,a){"use strict";var s=a(1),i=a(50),r=a(81),o=a(29),c=a(9),n=a(13),d=a(20),l=Object(d.b)({generic:{id:"stats.ohsome.timestamp.generic",defaultMessage:"These statistics come from ohsomeNow Stats and were last updated at {formattedDate} ({timeZone}). Missing fields will be made available soon!"},project:{id:"stats.ohsome.timestamp.project",defaultMessage:"These stats were retrieved using the default changeset comment of the project and were last updated at {formattedDate} ({timeZone})."}}),u=a(0);t.a=function(e){let{messageType:t}=e;const a=Object(i.a)(),[d,p]=Object(s.useState)(null);return Object(s.useEffect)((()=>{Object(o.a)("".concat(c.w,"/metadata")).then((e=>{p(e.result.max_timestamp)})).catch((e=>console.error(e)))}),[]),Object(u.jsxs)("div",{children:[Object(u.jsx)(n.I,{className:"blue-grey h1 w1 v-mid ml2 pointer","data-tip":a.formatMessage(l[t],{formattedDate:a.formatDate(d,{year:"numeric",month:"short",day:"2-digit",hour:"numeric",minute:"numeric"}),timeZone:a.timeZone}),"data-for":"ohsome-timestamp"}),Object(u.jsx)(r.a,{id:"ohsome-timestamp",place:"top",className:"mw6",effect:"solid"})]})}},2044:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return g}));a(1);var s=a(10),i=a(23),r=a(30),o=a(1915),c=a(1925),n=a(169),d=a(13),l=a(0);const u=e=>{let{className:t}=e;return Object(l.jsxs)("div",{className:"tc br1 f7 ttu ba b--red red ".concat(t),children:[Object(l.jsx)(d.O,{title:"lock",className:"red v-mid mr1",style:{height:"13px",width:"13px"}}),Object(l.jsx)(r.a,{...o.a.private})]})};var p=a(1926),j=a(32),m=a(1919);function b(e){let{author:t,projectId:a,priority:s,showEditLink:n,organisation:d}=e;const u=Object(l.jsx)(i.a,{to:"/projects/".concat(a),className:"no-underline pointer",children:Object(l.jsxs)("span",{className:"blue-light",children:["#",a]})});return Object(l.jsxs)("div",{className:"flex flex-column flex-row-ns justify-start justify-between-ns items-start items-center-ns flex-wrap",children:[Object(l.jsxs)("div",{className:"pv2",children:[Object(l.jsx)("span",{className:"blue-light",children:u}),d?Object(l.jsxs)("span",{className:"blue-dark",children:[" | ",d]}):null]}),Object(l.jsxs)("div",{className:"tr",children:[n&&Object(l.jsx)(j.d,{url:"/manage/projects/".concat(a),className:"mh0 mv0",children:Object(l.jsx)(r.a,{...o.a.editProject})}),s&&Object(l.jsx)("div",{className:"mw4 dib",children:Object(l.jsx)(c.a,{priority:s,extraClasses:"pv2 ph3 ml2",showIcon:!0})})]})]})}const g=e=>{let{project:t,showEditLink:a}=e;const i=Object(s.d)((e=>e.preferences.locale)),[r]=Object(m.b)(t);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(b,{author:t.author,projectId:t.projectId,priority:t.projectPriority,organisation:t.organisationName,showEditLink:a&&r}),Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{className:"f2 fw5 mt3 mt2-ns mb3 ttu barlow-condensed blue-dark dib mr3",lang:t.projectInfo.locale,children:t.projectInfo&&t.projectInfo.name}),t.private&&Object(l.jsx)(u,{className:"pv2 ph3 mb3 mr3 v-mid dib"}),["DRAFT","ARCHIVED"].includes(t.status)&&Object(l.jsx)(p.a,{status:t.status,className:"pv2 ph3 mb3 v-mid dib mr3"})]}),Object(l.jsx)(f,{campaigns:t.campaigns,interests:t.interests,countries:i.includes("en")?t.countryTag:Object(n.c)(t.countryTag,i)})]})};function f(e){let{campaigns:t=[],countries:a=[],interests:i=[]}=e;const r=Object(s.d)((e=>e.preferences.locale)),o=[t.map((e=>e.name)).join(", "),r.includes("en")?a.join(", "):a,i.map((e=>e.name)).join(", ")].filter((e=>e));return Object(l.jsx)("span",{className:"blue-light",children:o.map(((e,t)=>Object(l.jsxs)("span",{children:[0!==t&&Object(l.jsx)("span",{className:"ph2",children:"\xb7"}),e]},e)))})}},2064:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var s=a(1);function i(e){const[t,a]=Object(s.useState)(0),[i,o]=Object(s.useState)(0),[c,n]=Object(s.useState)(0);return Object(s.useEffect)((()=>{if(e&&e.features){const t=e.features.length,s=e.features.filter((e=>["MAPPED","LOCKED_FOR_VALIDATION"].includes(e.properties.taskStatus))).length,i=r(e,"VALIDATED"),c=r(e,"BADIMAGERY");a(parseInt((s+i)/(t-c)*100)),o(parseInt(i/(t-c)*100)),n(parseInt(c/t*100))}}),[e,a,o,n]),{percentMapped:t,percentValidated:i,percentBadImagery:c}}function r(e,t){return e.features.filter((e=>e.properties.taskStatus===t)).length}function o(e){const[t,a]=Object(s.useState)({ready:0,badImagery:0,lockedForMapping:0,mapped:0,lockedForValidation:0,validated:0,invalidated:0,totalTasks:0});return Object(s.useEffect)((()=>{if(e&&e.features){const t=e.features.length,s=r(e,"READY"),i=r(e,"MAPPED"),o=r(e,"VALIDATED"),c=r(e,"INVALIDATED"),n=r(e,"BADIMAGERY"),d=r(e,"LOCKED_FOR_MAPPING"),l=r(e,"LOCKED_FOR_VALIDATION");a({ready:s,badImagery:n,lockedForMapping:d,mapped:i,lockedForValidation:l,validated:o,invalidated:c,totalTasks:t})}}),[e]),t}},2067:function(e,t,a){"use strict";var s=a(20);t.a=Object(s.b)({projectStatsTitle:{id:"projects.stats.title",defaultMessage:"Time statistics"},projectStatsError:{id:"project.stats.timeline.fetching.error",defaultMessage:"An error occured while loading project stats"},averageMappingTime:{id:"projects.stats.average_mapping_time",defaultMessage:"Average mapping time per Task"},averageValidationTime:{id:"projects.stats.average_validation_time",defaultMessage:"Average validation time per Task"},timeToFinishMapping:{id:"projects.stats.time_finish_mapping",defaultMessage:"Estimated time to finish mapping"},timeToFinishValidating:{id:"projects.stats.time_finish_validation",defaultMessage:"Estimated time to finish validation"},status:{id:"project.stats.tasks.tatus",defaultMessage:"Tasks by status"},tasksToMap:{id:"project.stats.tasks.needs_mapping",defaultMessage:"Tasks to map"},tasksToValidate:{id:"project.stats.tasks.needs_validation",defaultMessage:"Tasks to validate"},contributors:{id:"project.stats.contributors.title",defaultMessage:"Contributors"},totalContributors:{id:"project.stats.contributors.total",defaultMessage:"Total contributors"},usersExperience:{id:"project.stats.experience.title",defaultMessage:"Users by experience on Tasking Manager"},usersLevel:{id:"project.stats.level.title",defaultMessage:"Users by level"},mappers:{id:"project.stats.contributors.mappers",defaultMessage:"Mappers"},validators:{id:"project.stats.contributors.validators",defaultMessage:"Validators"},lessThan1MonthExp:{id:"project.stats.contributors.experience.1",defaultMessage:"Less than 1 month"},lessThan3MonthExp:{id:"project.stats.contributors.experience.3",defaultMessage:"1 to 3 months"},lessThan6MonthExp:{id:"project.stats.contributors.experience.6",defaultMessage:"3 to 6 months"},lessThan12MonthExp:{id:"project.stats.contributors.experience.12",defaultMessage:"6 to 12 months"},moreThan1YearExp:{id:"project.stats.contributors.experience.year",defaultMessage:"More than 1 year"},totalEdits:{id:"project.stats.totalEdits",defaultMessage:"Total map edits"},changesets:{id:"project.stats.changesets",defaultMessage:"Changesets"},edits:{id:"project.stats.edits",defaultMessage:"Edits"}})},2068:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return p})),a.d(t,"a",(function(){return j}));a(1);var s=a(1955),i=a.n(s),r=a(30),o=a(1923),c=a(13),n=a(1932),d=a(1966),l=a(0);const u=e=>{let{userStats:t,username:a}=e;const{tasksMapped:s,tasksValidatedByOthers:i,tasksInvalidatedByOthers:n,tasksValidated:d,tasksInvalidated:u}=t,p=[{icon:Object(l.jsx)(c.Q,{className:"v-mid h-100 w-50-ns w-25"}),title:o.a.userMapped,items:[{label:o.a.tasks,value:s},{label:o.a.validated,value:i},{label:o.a.invalidated,value:n}]},{icon:Object(l.jsx)(c.qb,{className:"v-mid h-100 w-30-ns w-25"}),title:o.a.userValidated,items:[{label:o.a.tasks,value:d+u||0},{label:o.a.finished,value:d},{label:o.a.invalidated,value:u}]}];return Object(l.jsx)("div",{className:"relative base-font blue-grey task-stats-ctr",children:p.map(((e,t)=>Object(l.jsxs)("article",{className:"shadow-6 pv3 ph2 bg-white flex flex-column flex-row-ns items-center",children:[Object(l.jsx)("div",{className:"w-75 w-25-ns h-100 pa2 pa0-m red tc",children:e.icon}),Object(l.jsxs)("div",{className:"w-75 mt3 tc f6 b",children:[Object(l.jsxs)("div",{className:" w-100",children:[Object(l.jsx)("p",{className:"mb1 mt3 mt1-ns f3 fw6",style:{letterSpacing:"1.25px"},children:Object(l.jsx)(r.a,{...e.title,values:{user:a||Object(l.jsx)(r.a,{...o.a.you})}})}),Object(l.jsx)("hr",{className:"w-50"})]}),Object(l.jsx)("div",{className:"w-100 pt4 flex",children:e.items.map(((e,t)=>Object(l.jsxs)("div",{className:" w-33 tc",children:[Object(l.jsx)("p",{className:"ma0 mb0 barlow-condensed f2 fw5 red",children:e.value}),Object(l.jsx)("p",{className:"mb3 ttl fw6",children:Object(l.jsx)(r.a,{...e.label})})]},t)))})]})]},t)))})},p=i.a.humanizer({language:"shortEn",languages:{shortEn:{y:()=>"y",mo:()=>"mo",w:()=>"w",d:()=>"d",h:()=>"h",m:()=>"m",s:()=>"s",ms:()=>"ms"}}}),j=e=>{let{userStats:t,osmStats:a}=e;const s=p(1e3*t.timeSpentMapping,{round:!0,delimiter:" ",units:["h","m"],spacer:""}),i="h-50 w-50",u={height:"45px"};return Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:"w-100 relative stats-cards-container",children:[Object(l.jsx)(n.a,{invertColors:!0,icon:Object(l.jsx)(c.m,{className:i,style:u}),description:Object(l.jsx)(r.a,{...o.a.timeSpentMapping}),value:s}),Object(l.jsx)(n.a,{icon:Object(l.jsx)(c.G,{className:i,style:u}),description:Object(l.jsx)(r.a,{...o.a.buildingsMapped}),value:a.buildings||0}),Object(l.jsx)(n.a,{icon:Object(l.jsx)(c.eb,{className:i,style:u}),description:Object(l.jsx)(r.a,{...o.a.roadMapped}),value:a.roads||0}),Object(l.jsx)(n.a,{icon:Object(l.jsx)(c.T,{className:i,style:u}),description:Object(l.jsx)(r.a,{...o.a.poiMapped}),value:a.total_poi_count_add||"-"}),Object(l.jsx)(n.a,{icon:Object(l.jsx)(c.tb,{className:i,style:u}),description:Object(l.jsx)(r.a,{...o.a.waterwaysMapped}),value:a.total_waterway_km_add||"-"})]}),Object(l.jsx)("div",{className:"cf w-100 relative tr pt3 pr3",children:Object(l.jsx)(d.a,{messageType:"generic"})})]})}},2069:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a(9);const i=(e,t)=>{const a=new RegExp("".concat(s.T,"-").concat(t));return e.split(" ").filter((e=>null!==e.match(a)))}},2104:function(e,t,a){"use strict";a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return d}));var s=a(246),i=a(138),r=a(9);const o=()=>Object(s.a)({queryKey:["tm-stats"],queryFn:e=>{let{signal:t}=e;return Object(i.a)().get("system/statistics/",{signal:t})},useErrorBoundary:!0}),c=e=>Object(s.a)({queryKey:["project-stats"],queryFn:t=>{let{signal:a}=t;return Object(i.a)().get("projects/".concat(e,"/statistics/"),{signal:a})},select:e=>e.data}),n=()=>Object(s.a)({queryKey:["osm-stats"],queryFn:e=>{let{signal:t}=e;return Object(i.a)().get("".concat(r.w,"/stats/hotosm-project-%2A"),{signal:t})},useErrorBoundary:!0,select:e=>e.data.result}),d=e=>Object(s.a)({queryKey:["osm-hashtag-stats"],queryFn:t=>{let{signal:a}=t;return Object(i.a)().get("".concat(r.w,"/stats/").concat(e[0].replace("#","")),{signal:a})},useErrorBoundary:!0,enabled:Boolean(null===e||void 0===e?void 0:e[0]),select:e=>e.data.result})},2358:function(e,t,a){"use strict";a.r(t),a.d(t,"ProjectStats",(function(){return L}));var s=a(1),i=a.n(s),r=a(6),o=a(92),c=a.n(o),n=a(30),d=a(62),l=a(2064),u=a(164),p=a(2044),j=a(2067),m=a(2068),b=a(1932),g=a(13),f=a(2104),h=a(1914),O=a(0);const M=e=>{let{stats:t}=e;const a={units:["h","m","s"],round:!0,spacer:""};return Object(O.jsx)("div",{className:"cf center",children:["averageMappingTime","averageValidationTime","timeToFinishMapping","timeToFinishValidating"].map(((e,s)=>Object(O.jsx)("div",{className:"ph2 w-25-l w-50-m w-100 fl mv1",children:Object(O.jsxs)("div",{className:"cf pa3 bg-white shadow-4",children:[Object(O.jsx)("div",{className:"w-30 fl red",children:-1!==e.indexOf("Mapping")?Object(O.jsx)(g.Q,{className:"v-mid w-50-ns w-25"}):Object(O.jsx)(g.qb,{className:"v-mid w-50-ns w-25"})}),Object(O.jsx)("div",{className:"w-70 fl",children:Object(O.jsx)(b.b,{className:"tc",value:Object(m.c)(1e3*t[e],a).replace(/,/g,""),label:Object(O.jsx)(n.a,{...j.a[e]})})})]})},s)))})},y=e=>{let{stats:t}=e;return Object(O.jsxs)("div",{className:"ph2 ph4-ns pb4",children:[Object(O.jsx)("h3",{className:"f3 ttu barlow-condensed",children:Object(O.jsx)(n.a,{...j.a.projectStatsTitle})}),Object(O.jsx)(M,{stats:t})]})},v=e=>{let{id:t}=e;const{data:a,status:s}=Object(f.c)(t);return"loading"===s?Object(O.jsx)(c.a,{showLoadingAnimation:!0,rows:26,ready:!1,className:"pr3"}):"error"===s?Object(O.jsx)(h.a,{type:"error",children:Object(O.jsx)(n.a,{...j.a.projectStatsError})}):Object(O.jsx)(y,{stats:a})};var x=a(20);const w=e=>{let{tasksByStatus:t}=e;const a=t.invalidated+t.ready,s=t.totalTasks-t.validated-t.lockedForValidation-t.badImagery;return Object(O.jsxs)("div",{className:"w-100 fl tc",children:[Object(O.jsxs)("div",{className:"w-100-l w-50 fl pv4",children:[Object(O.jsxs)("h3",{className:"ma0 mb2 barlow-condensed f1 b red",children:[Object(O.jsx)(x.a,{value:a}),Object(O.jsxs)("span",{className:"dib f3 pl2 blue-grey",children:["/ ",t.totalTasks]})]}),Object(O.jsx)("span",{className:"ma0 h2 f4 fw6 blue-grey ttl",children:Object(O.jsx)(n.a,{...j.a.tasksToMap})})]}),Object(O.jsxs)("div",{className:"w-100-l w-50 fl pv4",children:[Object(O.jsx)("h3",{className:"ma0 mb2 barlow-condensed f1 b red",children:Object(O.jsx)(x.a,{value:s})}),Object(O.jsx)("span",{className:"ma0 h2 f4 fw6 blue-grey ttl",children:Object(O.jsx)(n.a,{...j.a.tasksToValidate})})]})]})};var T=a(1923),N=a(1966);const k=e=>{let{data:t}=e;const{changesets:a,buildings:s,roads:i,edits:r}=t,o="h-50 w-50",c={height:"45px"};return Object(O.jsxs)("div",{className:"cf w-100 pb4 ph2 ph4-ns blue-dark",children:[Object(O.jsxs)("div",{className:"flex items-center",children:[Object(O.jsx)("h3",{className:"barlow-condensed ttu f3",children:Object(O.jsx)(n.a,{...j.a.edits})}),Object(O.jsx)(N.a,{messageType:"project"})]}),Object(O.jsxs)("div",{className:"db pb2 project-edit-stats",children:[Object(O.jsx)(b.a,{field:"changesets",icon:Object(O.jsx)(g.S,{className:o,style:c}),description:Object(O.jsx)(n.a,{...j.a.changesets}),value:a||0}),Object(O.jsx)(b.a,{icon:Object(O.jsx)(g.t,{className:o,style:c}),description:Object(O.jsx)(n.a,{...j.a.totalEdits}),value:r||0}),Object(O.jsx)(b.a,{icon:Object(O.jsx)(g.G,{className:o,style:c}),description:Object(O.jsx)(n.a,{...T.a.buildingsMapped}),value:s||0}),Object(O.jsx)(b.a,{icon:Object(O.jsx)(g.eb,{className:o,style:c}),description:Object(O.jsx)(n.a,{...T.a.roadMapped}),value:i||0})]})]})};var D=a(2069),E=a(1934);const C=i.a.lazy((()=>Promise.all([a.e(3),a.e(834)]).then(a.bind(null,2368)))),P=i.a.lazy((()=>Promise.all([a.e(3),a.e(841)]).then(a.bind(null,2343)))),I=i.a.lazy((()=>Promise.all([a.e(3),a.e(5),a.e(6),a.e(839)]).then(a.bind(null,2257))));function L(){const{id:e}=Object(r.s)();Object(u.b)("Project #".concat(e," Stats"));const{data:t,status:a}=Object(E.j)(e,{useErrorBoundary:!0}),{data:s,status:o}=Object(E.n)(e),j=Object(l.b)(s),{data:m,status:b}=Object(E.h)(e),{data:g,status:M}=Object(E.k)(e),y=t&&Object(D.a)(t.changesetComment,e),{data:x,status:T}=Object(f.a)(y);return Object(O.jsx)(c.a,{showLoadingAnimation:!0,rows:26,ready:"success"===a,className:"pa4-ns",children:Object(O.jsxs)("div",{className:"cf bg-tan",children:[Object(O.jsx)("div",{className:"w-100 fl pv3 ph2 ph4-ns bg-white blue-dark",children:Object(O.jsx)(p.b,{project:t,showEditLink:!0})}),Object(O.jsxs)("div",{className:"w-100 fl",children:["loading"===o&&Object(O.jsx)(c.a,{showLoadingAnimation:!0,rows:5,delay:500,ready:!1}),"error"===o&&Object(O.jsx)(h.a,{type:"error",children:Object(O.jsx)(n.a,{...d.a.tasksStatsError})}),"success"===o&&Object(O.jsx)(i.a.Suspense,{fallback:Object(O.jsx)("div",{className:"w7 h5",children:"Loading..."}),children:Object(O.jsx)(P,{stats:j})})]}),(null===y||void 0===y?void 0:y[0])&&Object(O.jsxs)("div",{className:"w-100 fl",children:["loading"===T&&Object(O.jsx)(c.a,{showLoadingAnimation:!0,rows:5,delay:500,ready:!1}),"error"===T&&Object(O.jsx)(h.a,{type:"error",children:Object(O.jsx)(n.a,{...d.a.editsStatsError})}),"success"===T&&Object(O.jsx)(i.a.Suspense,{fallback:Object(O.jsx)("div",{className:"w7 h5",children:"Loading..."}),children:Object(O.jsx)(k,{data:x})})]}),Object(O.jsxs)("div",{className:"w-100 fl pb4",children:["error"===b&&Object(O.jsx)(h.a,{type:"error",children:Object(O.jsx)(n.a,{...d.a.contributionsStatsError})}),"loading"===b&&Object(O.jsx)(c.a,{showLoadingAnimation:!0,rows:7,delay:500,ready:!1}),"success"===b&&Object(O.jsx)(i.a.Suspense,{fallback:Object(O.jsx)("div",{className:"w7 h5",children:"Loading..."}),children:Object(O.jsx)(C,{contributors:m})})]}),Object(O.jsxs)("div",{className:"w-100 mb2 fl ph2 ph4-ns",children:[Object(O.jsx)("h3",{className:"barlow-condensed ttu f3",children:Object(O.jsx)(n.a,{...d.a.projectTimeline})}),Object(O.jsxs)("div",{className:"bg-white pv3 ph2 fl w-100 shadow-4",children:[Object(O.jsxs)("div",{className:"w-100 w-50-l fl",children:["loading"===M&&Object(O.jsx)(c.a,{showLoadingAnimation:!0,rows:3,delay:500,ready:"success"===M}),"error"===M&&Object(O.jsx)(h.a,{type:"error",children:Object(O.jsx)(n.a,{...d.a.timelineDataError})}),"success"===M&&Object(O.jsx)(i.a.Suspense,{fallback:Object(O.jsx)("div",{className:"w7 h5",children:"Loading..."}),children:Object(O.jsx)(I,{tasksByDay:g})})]}),Object(O.jsxs)("div",{className:"w-100 w-50-l fl",children:["error"===o&&Object(O.jsx)(h.a,{type:"error",children:Object(O.jsx)(n.a,{...d.a.tasksStatsError})}),"loading"===o&&Object(O.jsx)(c.a,{showLoadingAnimation:!0,rows:5,delay:500,ready:!1}),"success"===o&&Object(O.jsx)(w,{tasksByStatus:j})]})]})]}),Object(O.jsx)("div",{className:"w-100 fl bg-tan pb3 mb4",children:Object(O.jsx)(v,{id:e})})]})})}t.default=L}}]);
//# sourceMappingURL=projectStats.a1d877ce.chunk.js.map