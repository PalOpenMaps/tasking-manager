{"version":3,"sources":["components/alert/index.js","components/projectDetail/messages.js","components/projectCard/messages.js","hooks/UsePermissions.js","components/mappingLevel.js","components/projectCard/priorityBox.js","components/projectDetail/statusBox.js","components/progressBar.js","hooks/UseHover.js","components/projectCard/projectProgressBar.js","components/svgIcons/timer.js","components/projectCard/dueDateBox.js","components/teamsAndOrgs/teamsPlaceholder.js","components/teamsAndOrgs/teams.js","components/projectCard/projectCard.js","components/projectCard/nCardPlaceholder.js","components/deleteModal/index.js","utils/slugifyFileName.js","hooks/UseUploadImage.js","components/teamsAndOrgs/projects.js","../node_modules/slug/slug.js","utils/management.js","hooks/UseOrganisationLevel.js","hooks/UseModifyMembers.js","../node_modules/react-select/dist/useAsync-ba7c6b77.esm.js","../node_modules/react-select/async/dist/react-select-async.esm.js","components/teamsAndOrgs/editMode.js","components/teamsAndOrgs/members.js","components/teamsAndOrgs/organisationsPlaceholder.js","components/teamsAndOrgs/organisations.js","views/organisationManagement.js"],"names":["Alert","_ref","type","compact","inline","iconClassName","children","Icon","info","InfoIcon","success","CheckIcon","warning","AlertIcon","error","BanIcon","_jsxs","className","concat","_jsx","EntityError","_ref2","entity","action","messageType","FormattedMessage","messages","values","defineMessages","noProjectTeams","id","defaultMessage","coordination","projectCoordination","createdBy","noProjectContributors","projectTotalContributors","projectLastContribution","percentMapped","percentValidated","projectPriorityURGENT","projectPriorityHIGH","projectPriorityMEDIUM","projectPriorityLOW","dueDateRelativeRemainingDays","typesOfMapping","private","editProject","editor","selectEditor","tasks","instructions","imagery","customTMSLayer","customWMSLayer","customWMTSLayer","contribute","readMore","readLess","addToFavorites","removeFromFavorites","noComments","loginTocomment","errorLoadingComments","post","share","team","validationTeam","teamsAndPermissions","author","whoCanMap","whoCanValidate","zoomToTasks","selectATaskCardTitle","mapThroughOSMCardTitle","submitYourWorkCardTitle","selectATaskCardDescription","mapThroughOSMCardDescription","submitYourWorkCardDescription","overview","dueDateTooltip","description","questionsAndComments","contributions","contributionsTimeline","downloadOsmData","errorDownloadOsmData","errorDownloadOsmDataDescription","viewInOsmcha","changesets","contributors","similarProjects","contributorsError","timelineNotAvailable","status_DRAFT","status_ARCHIVED","status_PUBLISHED","permissions_ANY","permissions_LEVEL","permissions_TEAMS","permissions_TEAMS_LEVEL","downloadProjectAOI","downloadTaskGrid","moreStats","mappedTasks","validatedTasks","shareMessage","postOnFacebook","shareOnLinkedIn","inaccessibleProjectTitle","inaccessibleProjectDescription","exploreOtherProjects","noSimilarProjectsFound","percentBadImagery","priorityDescriptionURGENT","priorityDescriptionHIGH","priorityDescriptionMEDIUM","priorityDescriptionLOW","projectPage","projectTasks","noDueDate","dueDateExpired","useEditProjectAllowed","project","userDetails","useSelector","state","auth","organisations","pmTeams","isAllowed","setIsAllowed","useState","useEffect","role","username","includes","organisation","teams","filter","map","teamId","some","item","useEditTeamAllowed","organisation_id","members","managers","member","active","function","useEditOrgAllowed","org","organisationId","i","MappingLevelMessage","props","level","otherProps","message","DifficultyMessage","PriorityBox","priority","extraClasses","showIcon","color","msg","title","ClockIcon","style","height","ProjectStatusBox","status","colour","ProgressBar","small","firstBarValue","secondBarValue","hoverRef","isHovered","position","value","setValue","setPosition","x","y","handleMouseOver","useCallback","e","clientX","ref","current","offsetLeft","clientY","handleMouseOut","useRef","node","removeEventListener","addEventListener","useHover","heightClassname","width","left","bottom","ProjectProgressBar","_Fragment","n","undefined","TimerIcon","React","PureComponent","render","xmlns","fill","viewBox","this","fillRule","d","clipRule","DueDateBox","dueDate","intervalMili","tooltipMsg","isTaskStatusPage","isProjectDetailPage","intl","useIntl","timer","setTimer","Date","now","interval","setInterval","clearInterval","options","language","locale","slice","fallbacks","largest","units","round","milliDifference","paddingTop","paddingBottom","daysLeftHumanize","humanizeDuration","ReactTooltip","place","nCardPlaceholders","N","Array","keys","_n","TextRow","RectShape","_","Fragment","RoundShape","TextBlock","rows","TeamsManagement","managementView","userTeamsOnly","setUserTeamsOnly","teamsStatus","query","setQuery","isOrgManager","length","Management","manage","myTeams","isAdmin","showAddButton","userOnly","setUserOnly","userOnlyLabel","TextField","searchQuery","placeholderMsg","searchTeams","onChange","target","page","onCloseIconClick","clearSearchQuery","ReactPlaceholder","showLoadingAnimation","customPlaceholder","delay","ready","errorLoadingTeams","TeamCard","noTeams","Teams","viewAllQuery","isReady","border","Link","to","AddButton","ViewAllLink","link","noTeamsFound","_ref3","name","src","logo","alt","UserAvatarList","size","textColor","users","user","maxLength","totalCount","managersCount","teamMembers","membersCount","VisibilityBox","visibility","JoinMethodBox","joinMethod","TeamInformation","labelClasses","fieldClasses","formState","useFormState","joinMethods","ANY","BY_REQUEST","BY_INVITE","Field","component","required","OrganisationSelectInput","Object","method","RadioField","formatMessage","effect","public","TeamForm","Form","onSubmit","updateTeam","initialValues","mutators","_ref4","handleSubmit","dirty","submitSucceeded","dirtySinceLastSubmit","form","submitting","dirtyForm","teamInfo","disabled","Button","onClick","restart","cancel","disabledClassName","save","TeamSideBar","_ref5","requestedToJoin","isUserTeamManager","setSearchQuery","EditButton","url","editTeam","organisationSlug","noManagers","UserAvatar","picture","pictureUrl","colorClasses","noMembers","searchMembers","_ref6","toLowerCase","waitingApproval","TeamsBoxList","_ref7","mappingTeams","validationTeams","TeamBox","_ref8","ProjectTeaser","lastUpdated","totalContributors","littleFont","bigFont","outerDivStyles","PROJECTCARD_CONTRIBUTION_SHOWN_THRESHOLD","RelativeTimeWithUnit","date","number","ProjectCard","projectId","shortDescription","organisationName","organisationLogo","difficulty","campaignTag","showBottomButtons","setHovered","linkCombo","showBottomButtonsHovered","bottomButtonSpacer","bottomButtonMargin","bottomButtons","onMouseEnter","onMouseLeave","DeleteModal","endpointURL","onDelete","navigate","useNavigate","modalRef","token","deleteStatus","setDeleteStatus","setErrorMessage","deleteURL","Popup","trigger","DeleteButton","showText","modal","closeOnDocumentClick","nested","onClose","close","preventDefault","stopPropagation","fetchLocalJSONAPI","then","setTimeout","catch","delete","processing","useUploadImage","uploading","setUploading","uploadError","setUploadError","file","updateFn","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","Error","payload","JSON","stringify","mime","data","split","filename","mimetype","lastIndexOf","slug","substr","slugifyFileName","pushToLocalJSONAPI","res","err","useOnDrop","appendImgToComment","uploadImg","acceptedFiles","forEach","async","Projects","_projects$results","_projects$results2","projects","viewAllEndpoint","ownerEntity","showManageButtons","results","card","noProjectsFound","root","base64","getWholeCharAndI","str","code","charCodeAt","isNaN","RangeError","charAt","next","prev","string","opts","slugify","fallback","defaults","input","charAndI","window","btoa","unescape","encodeURIComponent","output","block","charCode","idx","Buffer","from","toString","locales","bg","Й","й","X","Ц","ц","Щ","щ","Ъ","ъ","Ь","ь","de","Ä","ä","Ö","ö","Ü","ü","sr","đ","Đ","uk","И","и","Х","х","Г","г","defaultLocale","replacement","assign","mode","modes","key","l","localeMap","lengths","multicharmap","prototype","hasOwnProperty","call","len","indexOf","push","sort","a","b","disallowedChars","char","matchedMultichar","j","charmap","replace","remove","trim","lower","initialMulticharmap","फ़","ग़","ख़","क़","ड़","ढ़","य़","ज़","בִי","בֵ","בֵי","בֶ","בַ","בָ","בֹ","וֹ","בֻ","וּ","בּ","כּ","ךּ","פּ","שׁ","שׂ","בְ","חֱ","חֲ","חֳ","בִ","initialCharmap","À","Á","Â","Ã","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð","Ñ","Ò","Ó","Ô","Õ","Ő","Ø","Ō","Ù","Ú","Û","Ű","Ý","Þ","ß","à","á","â","ã","å","æ","ç","è","é","ê","ë","ì","í","î","ï","ð","ñ","ò","ó","ô","õ","ő","ø","ō","Œ","œ","ù","ú","û","ű","ý","þ","ÿ","ẞ","α","β","γ","δ","ε","ζ","η","θ","ι","κ","λ","μ","ν","ξ","ο","π","ρ","σ","τ","υ","φ","χ","ψ","ω","ά","έ","ί","ό","ύ","ή","ώ","ς","ϊ","ΰ","ϋ","ΐ","Α","Β","Γ","Δ","Ε","Ζ","Η","Θ","Ι","Κ","Λ","Μ","Ν","Ξ","Ο","Π","Ρ","Σ","Τ","Υ","Φ","Χ","Ψ","Ω","Ά","Έ","Ί","Ό","Ύ","Ή","Ώ","Ϊ","Ϋ","ş","Ş","ı","İ","ğ","Ğ","а","б","в","д","е","ё","ж","з","к","л","м","н","о","п","р","с","т","у","ф","ч","ш","ы","э","ю","я","А","Б","В","Д","Е","Ё","Ж","З","К","Л","М","Н","О","П","Р","С","Т","У","Ф","Ч","Ш","Ы","Э","Ю","Я","Є","І","Ї","Ґ","є","і","ї","ґ","č","ď","ě","ň","ř","š","ť","ů","ž","Č","Ď","Ě","Ň","Ř","Š","Ť","Ů","Ž","ľ","ĺ","ŕ","Ľ","Ĺ","Ŕ","ą","ć","ę","ł","ń","ś","ź","ż","Ą","Ć","Ę","Ł","Ń","Ś","Ź","Ż","ā","ē","ģ","ī","ķ","ļ","ņ","ū","Ā","Ē","Ģ","Ī","Ķ","Ļ","Ņ","Ū","أ","إ","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي","ء","ة","آ","ا","پ","ژ","گ","چ","ک","ی","ė","į","ų","Ė","Į","Ų","ț","Ț","ţ","Ţ","ș","Ș","ă","Ă","Ạ","Ả","Ầ","Ấ","Ậ","Ẩ","Ẫ","Ằ","Ắ","Ặ","Ẳ","Ẵ","Ẹ","Ẻ","Ẽ","Ề","Ế","Ệ","Ể","Ễ","Ị","Ỉ","Ĩ","Ọ","Ỏ","Ồ","Ố","Ộ","Ổ","Ỗ","Ơ","Ờ","Ớ","Ợ","Ở","Ỡ","Ụ","Ủ","Ũ","Ư","Ừ","Ứ","Ự","Ử","Ữ","Ỳ","Ỵ","Ỷ","Ỹ","ạ","ả","ầ","ấ","ậ","ẩ","ẫ","ằ","ắ","ặ","ẳ","ẵ","ẹ","ẻ","ẽ","ề","ế","ệ","ể","ễ","ị","ỉ","ĩ","ọ","ỏ","ồ","ố","ộ","ổ","ỗ","ơ","ờ","ớ","ợ","ở","ỡ","ụ","ủ","ũ","ư","ừ","ứ","ự","ử","ữ","ỳ","ỵ","ỷ","ỹ","Ә","ә","Ғ","ғ","Қ","қ","Ң","ң","Ү","ү","Ұ","ұ","Һ","һ","Ө","ө","ђ","ј","љ","њ","ћ","џ","Ђ","Ј","Љ","Њ","Ћ","Џ","ǌ","ǉ","ǋ","ǈ","अ","आ","ए","ई","ऍ","ऎ","ऐ","इ","ओ","ऑ","ऒ","ऊ","औ","उ","ब","भ","च","छ","ड","ढ","फ","ग","घ","ह","ज","झ","क","ख","ल","ळ","ऌ","ऴ","ॡ","म","न","ङ","ञ","ण","ऩ","ॐ","प","र","ऋ","ॠ","ऱ","स","श","ष","ट","त","ठ","द","थ","ध","व","य","ə","Ə","ა","ბ","გ","დ","ე","ვ","ზ","თ","ი","კ","ლ","მ","ნ","ო","პ","ჟ","რ","ს","ტ","უ","ფ","ქ","ღ","ყ","შ","ჩ","ც","ძ","წ","ჭ","ხ","ჯ","ჰ","ב","גּ","ג","ד","דּ","ה","ו","ז","ח","ט","י","כ","ך","ל","מ","ם","נ","ן","ס","פ","ף","ץ","צ","ק","ר","תּ","ת","rfc3986","pretty","reset","extend","customMap","multi","single","setLocale","module","exports","updateEntity","endpoint","onSuccess","onFailure","toast","entityInfoUpdationSuccess","levels","tier","minActions","fee","useOrganisationLevel","completedActions","currentLevel","useGetLevel","nextLevelThreshold","setNextLevelThreshold","actions","setCurrentLevel","usePredictLevel","newLevel","predictedLevel","setPredictedLevel","cost","useModifyMembers","initialMembers","setMembers","addMember","newValues","newUser","removeMember","_excluded","AsyncSelect$1","forwardRef","stateManagedProps","_ref$defaultOptions","defaultOptions","propsDefaultOptions","_ref$cacheOptions","cacheOptions","propsLoadOptions","loadOptions","_ref$isLoading","isLoading","propsIsLoading","propsOnInputChange","onInputChange","_ref$filterOption","filterOption","restSelectProps","_objectWithoutProperties","propsInputValue","inputValue","lastRequest","mounted","_useState","isArray","_useState2","_slicedToArray","setDefaultOptions","_useState3","_useState4","stateInputValue","setStateInputValue","_useState5","_useState6","setIsLoading","_useState7","_useState8","loadedInputValue","setLoadedInputValue","_useState9","_useState10","loadedOptions","setLoadedOptions","_useState11","_useState12","passEmptyOptions","setPassEmptyOptions","_useState13","_useState14","optionsCache","setOptionsCache","_useState15","_useState16","prevDefaultOptions","setPrevDefaultOptions","_useState17","_useState18","prevCacheOptions","setPrevCacheOptions","callback","loader","newValue","actionMeta","handleInputChange","request","_objectSpread","_defineProperty","useAsync","selectProps","useStateManager","Select","_extends","EditModeControl","editMode","switchModeFn","CustomButton","edit","Members","addMembers","removeMembers","saveMembersFn","resetMembersFn","memberJoinTeamError","setMemberJoinTeamError","managerJoinTeamError","setManagerJoinTeamError","setEditMode","membersBackup","setMembersBackup","selectPlaceHolder","searchUsers","errorRef","useOnClickOutside","doesMemberExistInTeam","AsyncSelect","classNamePrefix","autoFocus","isMulti","placeholder","isClearable","isOptionDisabled","option","formatOptionLabel","menu","context","alreadyInTeam","getOptionLabel","getOptionValue","noOptionsMessage","noOptions","removeFn","done","JoinRequests","requests","updateRequests","loggedInUsername","showJoinRequestSwitch","manager","isChecked","setIsChecked","_managers$find","isJoinRequestEnabled","find","joinRequestNotifications","acceptRejectRequest","joinRequests","newJoinRequestNotification","SwitchToggle","checked","handleJoinRequestNotificationsChange","labelPosition","accept","noRequests","OrgsManagement","userOrgsOnly","setUserOrgsOnly","isOrganisationsFetched","filteredOrganisations","myOrganisations","searchOrganisations","OrganisationCard","details","noOrganisationsFound","notAllowed","lang","OrganisationForm","updateOrg","orgInfo","OrgInformation","hasSlug","errorMessage","viewsMessages","TYPE_OPTIONS","label","free","discounted","defaultFee","TIER_OPTIONS","getTypePlaceholder","selected","selectType","getTierPlaceholder","selectTier","validateRequired","requiredField","publicUrl","InternalLinkIcon","copyPublicUrl","ClipboardIcon","handleCopyToClipboard","text","location","origin","navigator","clipboard","writeText","website","validate","meta","touched","subscribedTier","image","IMAGE_UPLOAD_SERVICE","fieldProps","multiple","files","imageUploadFailed","CreateOrgInfo","ListOrganisations","useSetTitleTag","setOrganisations","loading","setLoading","setError","useQueryParams","showAll","BooleanParam","Boolean","queryParam","orgs","CreateOrganisation","setManagers","addManagers","removeManagers","createOrg","entityCreationSuccess","pristine","newOrganisation","entityCreationFailure","creationMode","FormSubmitButton","createOrganisation","EditOrganisation","useParams","initManagers","setInitManagers","addManager","removeManager","useFetch","isUserAllowed","projectsError","projectsLoading","manageOrganisation","icon","ChartLineIcon","statistics","subscriptionTier","disabledForm","updateManagers","affiliationUpdationSuccess","affiliation","affiliationUpdationFailure","editOrgNotAllowed"],"mappings":"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,SAAG,IACHC,SAAG,KACHC,SAAG,IAEHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,KACHC,SAAG,IACHC,SAAG,KACHC,SAAG,IACHC,SAAG,IAEHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IAEHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IAEHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHta,SAAG,IACHua,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACHC,SAAG,IACH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","file":"static/js/organisationManagement.b17c83fc.chunk.js","sourcesContent":["import { FormattedMessage } from 'react-intl';\n\nimport { BanIcon, CheckIcon, InfoIcon, AlertIcon } from '../svgIcons';\nimport messages from '../../views/messages';\n\nexport const Alert = ({\n  type = 'info',\n  compact = false,\n  inline = false,\n  iconClassName,\n  children,\n}) => {\n  const icons = {\n    info: InfoIcon,\n    success: CheckIcon,\n    warning: AlertIcon,\n    error: BanIcon,\n  };\n  const Icon = icons[type];\n\n  const color = {\n    info: 'b--blue bg-lightest-blue',\n    success: 'b--dark-green bg-washed-green',\n    warning: 'b--gold bg-washed-yellow',\n    error: 'b--dark-red bg-washed-red',\n  };\n  const iconColor = {\n    info: 'blue',\n    success: 'dark-green',\n    warning: 'gold',\n    error: 'dark-red',\n  };\n\n  return (\n    <div\n      className={`${inline ? 'di' : 'db'} blue-dark bl bw2 br2 ${compact ? 'pa2' : 'pa3'} ${\n        color[type]\n      }`}\n    >\n      <Icon className={`h1 w1 v-top mr2 ${iconColor[type]} ${iconClassName || ''}`} />\n      {children}\n    </div>\n  );\n};\n\nexport function EntityError({ entity, action = 'creation' }) {\n  const messageType = action === 'updation' ? 'entityInfoUpdationFailure' : 'entityCreationFailure';\n\n  return (\n    <Alert type=\"error\">\n      <FormattedMessage\n        {...messages[messageType]}\n        values={{\n          entity: entity,\n        }}\n      />\n    </Alert>\n  );\n}\n","import { defineMessages } from 'react-intl';\n\n/**\n * Internationalized messages for use on project cards.\n */\nexport default defineMessages({\n  noProjectTeams: {\n    id: 'project.detail.teams.empty',\n    defaultMessage: \"This project doesn't have any teams associated with.\",\n  },\n  coordination: {\n    id: 'project.detail.coordination',\n    defaultMessage: 'Coordination',\n  },\n  projectCoordination: {\n    id: 'project.detail.coordination.description',\n    defaultMessage: 'This project is coordinated by {organisation} and was created by {user}.',\n  },\n  createdBy: {\n    id: 'project.detail.createdBy',\n    defaultMessage: 'Project created by {user}.',\n  },\n  noProjectContributors: {\n    id: 'project.detail.contributorCount.zero',\n    defaultMessage: 'No contributors yet',\n  },\n  projectTotalContributors: {\n    id: 'project.detail.contributorCount',\n    defaultMessage: '{number, plural, one {<b>#</b> contributor} other {<b>#</b> contributors}}',\n  },\n  projectLastContribution: {\n    id: 'project.detail.lastContribution',\n    defaultMessage: 'Last contribution',\n  },\n  percentMapped: {\n    id: 'project.detail.percentMapped',\n    defaultMessage: 'Mapped',\n  },\n  percentValidated: {\n    id: 'project.detail.percentValidated',\n    defaultMessage: 'Validated',\n  },\n  projectPriorityURGENT: {\n    id: 'project.detail.projectPriorityUrgent',\n    defaultMessage: 'Urgent',\n  },\n  projectPriorityHIGH: {\n    id: 'project.detail.projectPriorityHigh',\n    defaultMessage: 'High',\n  },\n  projectPriorityMEDIUM: {\n    id: 'project.detail.projectPriorityMedium',\n    defaultMessage: 'Medium',\n  },\n  projectPriorityLOW: {\n    id: 'project.detail.projectPriorityLow',\n    defaultMessage: 'Low',\n  },\n  dueDateRelativeRemainingDays: {\n    id: 'project.detail.dueDateLeft',\n    defaultMessage: '{daysLeftHumanize} left',\n  },\n  typesOfMapping: {\n    id: 'project.detail.typesOfMapping',\n    defaultMessage: 'Types of Mapping',\n  },\n  private: {\n    id: 'project.detail.private',\n    defaultMessage: 'Private',\n  },\n  editProject: {\n    id: 'project.detail.editProject',\n    defaultMessage: 'Edit project',\n  },\n  editor: {\n    id: 'project.detail.editor',\n    defaultMessage: 'Editor',\n  },\n  selectEditor: {\n    id: 'project.detail.editor.select',\n    defaultMessage: 'Select editor',\n  },\n  tasks: {\n    id: 'project.detail.tasks',\n    defaultMessage: 'Tasks',\n  },\n  instructions: {\n    id: 'project.detail.instructions',\n    defaultMessage: 'Instructions',\n  },\n  imagery: {\n    id: 'project.detail.imagery',\n    defaultMessage: 'Imagery',\n  },\n  customTMSLayer: {\n    id: 'project.detail.imagery.tms',\n    defaultMessage: 'Custom TMS Layer',\n  },\n  customWMSLayer: {\n    id: 'project.detail.imagery.wms',\n    defaultMessage: 'Custom WMS Layer',\n  },\n  customWMTSLayer: {\n    id: 'project.detail.imagery.wmts',\n    defaultMessage: 'Custom WMTS Layer',\n  },\n  contribute: {\n    id: 'project.selectTask.footer.button.contribute',\n    defaultMessage: 'Contribute',\n  },\n  readMore: {\n    id: 'project.readMoreButton',\n    defaultMessage: 'Read more',\n  },\n  readLess: {\n    id: 'project.readLessButton',\n    defaultMessage: 'Read less',\n  },\n  addToFavorites: {\n    id: 'project.detail.addToFavorites',\n    defaultMessage: 'Add to Favorites',\n  },\n  removeFromFavorites: {\n    id: 'project.detail.removeFromFavorites',\n    defaultMessage: 'Remove from Favorites',\n  },\n  noComments: {\n    id: 'project.detail.questionsAndComments.none',\n    defaultMessage:\n      'There are currently no questions or comments on this project. Be the first to post one!',\n  },\n  loginTocomment: {\n    id: 'project.detail.questionsAndComments.login',\n    defaultMessage: 'Log in to be able to post comments.',\n  },\n  errorLoadingComments: {\n    id: 'project.detail.questionsAndComments.fetching.error',\n    defaultMessage: 'An error occured while loading questions and comments.',\n  },\n  post: {\n    id: 'project.detail.questionsAndComments.button',\n    defaultMessage: 'Post',\n  },\n  share: {\n    id: 'project.detail.share',\n    defaultMessage: 'Share',\n  },\n  team: {\n    id: 'project.detail.team',\n    defaultMessage: 'Team',\n  },\n  validationTeam: {\n    id: 'project.detail.validation_team',\n    defaultMessage: 'Validation team',\n  },\n  teamsAndPermissions: {\n    id: 'project.detail.teams_permissions',\n    defaultMessage: 'Teams & Permissions',\n  },\n  author: {\n    id: 'project.detail.author',\n    defaultMessage: 'Author',\n  },\n  whoCanMap: {\n    id: 'project.detail.mapping_permissions',\n    defaultMessage: 'Who can map?',\n  },\n  whoCanValidate: {\n    id: 'project.detail.validation_permissions',\n    defaultMessage: 'Who can validate?',\n  },\n  zoomToTasks: {\n    id: 'project.detail.zoomToTasks',\n    defaultMessage: 'Zoom to tasks',\n  },\n  selectATaskCardTitle: {\n    id: 'project.detail.cards.selectATask.title',\n    defaultMessage: '1. Select a task',\n  },\n  mapThroughOSMCardTitle: {\n    id: 'project.detail.cards.mapthroughosm.title',\n    defaultMessage: '2. Map with OpenStreetMap',\n  },\n  submitYourWorkCardTitle: {\n    id: 'project.detail.cards.submityourwork.title',\n    defaultMessage: '3. Submit your work',\n  },\n  selectATaskCardDescription: {\n    id: 'project.detail.cards.selectATask.description',\n    defaultMessage:\n      'Projects are divided into sets of smaller tasks and adapted to fit your skill level.',\n  },\n  mapThroughOSMCardDescription: {\n    id: 'project.detail.cards.mapthroughosm.description',\n    defaultMessage:\n      'If you are new to mapping, we recommend checking the Learn page for instructions before you begin.',\n  },\n  submitYourWorkCardDescription: {\n    id: 'project.detail.cards.submityourwork.description',\n    defaultMessage: 'Submitting your work is crucial to make sure your data is saved.',\n  },\n  overview: {\n    id: 'project.detail.sections.overview',\n    defaultMessage: 'Overview',\n  },\n  dueDateTooltip: {\n    id: 'project.detail.sections.overview.dueDate',\n    defaultMessage: 'Ideal date to complete the project',\n  },\n  description: {\n    id: 'project.detail.sections.description',\n    defaultMessage: 'Description',\n  },\n  questionsAndComments: {\n    id: 'project.detail.sections.questionsAndComments',\n    defaultMessage: 'Questions and comments',\n  },\n  contributions: {\n    id: 'project.detail.sections.contributions',\n    defaultMessage: 'Contributions',\n  },\n  contributionsTimeline: {\n    id: 'project.detail.sections.contributionsTimeline',\n    defaultMessage: 'Contributions timeline',\n  },\n  downloadOsmData: {\n    id: 'project.detail.sections.downloadOsmData',\n    defaultMessage: 'Download OSM Data',\n  },\n  errorDownloadOsmData: {\n    id: 'project.detail.sections.errorDownloadOsmData',\n    defaultMessage: 'Data Extraction Unavailable',\n  },\n  errorDownloadOsmDataDescription: {\n    id: 'project.detail.sections.errorDownloadOsmDataDescription',\n    defaultMessage:\n      'The data extract you are attempting to download is currently inactive or unavailable. Please ensure that the extract is active and try again later.',\n  },\n  viewInOsmcha: {\n    id: 'project.detail.sections.contributions.osmcha',\n    defaultMessage: 'Changesets in OSMCha',\n  },\n  changesets: {\n    id: 'project.detail.sections.contributions.changesets',\n    defaultMessage: 'Changesets',\n  },\n  contributors: {\n    id: 'project.detail.sections.contributors',\n    defaultMessage: 'Contributors',\n  },\n  similarProjects: {\n    id: 'project.detail.sections.similarProjects',\n    defaultMessage: 'Similar projects',\n  },\n  contributorsError: {\n    id: 'project.detail.sections.contributors.error',\n    defaultMessage: 'An error occured while loading contributors',\n  },\n  timelineNotAvailable: {\n    id: 'project.detail.sections.contributions.timelineError',\n    defaultMessage: 'A timeline is going to be available after the first task has been mapped.',\n  },\n  status_DRAFT: {\n    id: 'project.status.draft',\n    defaultMessage: 'Draft',\n  },\n  status_ARCHIVED: {\n    id: 'project.status.archived',\n    defaultMessage: 'Archived',\n  },\n  status_PUBLISHED: {\n    id: 'project.status.published',\n    defaultMessage: 'Published',\n  },\n  permissions_ANY: {\n    id: 'project.permissions.any',\n    defaultMessage: 'All users',\n  },\n  permissions_LEVEL: {\n    id: 'project.permissions.level',\n    defaultMessage: 'Users with intermediate or advanced level',\n  },\n  permissions_TEAMS: {\n    id: 'project.permissions.teams',\n    defaultMessage: '{team} members',\n  },\n  permissions_TEAMS_LEVEL: {\n    id: 'project.permissions.teamsAndLevel',\n    defaultMessage: 'Intermediate and advanced {team} members',\n  },\n  downloadProjectAOI: {\n    id: 'projects.data.download.aoi',\n    defaultMessage: 'Download AOI',\n  },\n  downloadTaskGrid: {\n    id: 'projects.data.download.taskGrid',\n    defaultMessage: 'Download Tasks Grid',\n  },\n  moreStats: {\n    id: 'projects.link.stats',\n    defaultMessage: 'More statistics',\n  },\n  mappedTasks: {\n    id: 'projects.stats.mapped',\n    defaultMessage: 'Mapped tasks',\n  },\n  validatedTasks: {\n    id: 'projects.stats.validated',\n    defaultMessage: 'Validated tasks',\n  },\n  shareMessage: {\n    id: 'project.share.twitter',\n    defaultMessage: 'Contribute mapping the project #{id} on {site}',\n  },\n  postOnFacebook: {\n    id: 'project.share.facebook',\n    defaultMessage: 'Post on Facebook',\n  },\n  shareOnLinkedIn: {\n    id: 'project.share.linkedin',\n    defaultMessage: 'Share on LinkedIn',\n  },\n  inaccessibleProjectTitle: {\n    id: 'project.inaccessible.title',\n    defaultMessage: \"You don't have permission to access this project\",\n  },\n  inaccessibleProjectDescription: {\n    id: 'project.inaccessible.description',\n    defaultMessage: 'Please contact the project manager to request access.',\n  },\n  exploreOtherProjects: {\n    id: 'project.inaccessible.exploreOtherProjects',\n    defaultMessage: 'Explore other projects',\n  },\n  noSimilarProjectsFound: {\n    id: 'project.noSimilarProjectsFound',\n    defaultMessage: 'Could not find any similar projects for this project',\n  },\n});\n","import { defineMessages } from 'react-intl';\n\n/**\n * Internationalized messages for use on project cards.\n */\nexport default defineMessages({\n  projectTotalContributors: {\n    id: 'project.card.contributorCount',\n    defaultMessage: '{number} total contributors',\n  },\n  projectLastContribution: {\n    id: 'project.card.lastContribution',\n    defaultMessage: 'Last contribution',\n  },\n  percentMapped: {\n    id: 'project.card.percentMapped',\n    defaultMessage: '{n}% mapped',\n  },\n  percentValidated: {\n    id: 'project.card.percentValidated',\n    defaultMessage: '{n}% validated',\n  },\n  percentBadImagery: {\n    id: 'project.card.percentBadImagery',\n    defaultMessage: '{n}% bad imagery',\n  },\n  projectPriorityURGENT: {\n    id: 'project.card.projectPriorityUrgent',\n    defaultMessage: 'Urgent',\n  },\n  projectPriorityHIGH: {\n    id: 'project.card.projectPriorityHigh',\n    defaultMessage: 'High',\n  },\n  projectPriorityMEDIUM: {\n    id: 'project.card.projectPriorityMedium',\n    defaultMessage: 'Medium',\n  },\n  projectPriorityLOW: {\n    id: 'project.card.projectPriorityLow',\n    defaultMessage: 'Low',\n  },\n  priorityDescriptionURGENT: {\n    id: 'project.card.projectPriorityUrgent.description',\n    defaultMessage: 'Urgent priority',\n  },\n  priorityDescriptionHIGH: {\n    id: 'project.card.projectPriorityHigh.description',\n    defaultMessage: 'High priority',\n  },\n  priorityDescriptionMEDIUM: {\n    id: 'project.card.projectPriorityMedium.description',\n    defaultMessage: 'Medium priority',\n  },\n  priorityDescriptionLOW: {\n    id: 'project.card.projectPriorityLow.description',\n    defaultMessage: 'Low priority',\n  },\n  dueDateRelativeRemainingDays: {\n    id: 'project.card.dueDateLeft',\n    defaultMessage: '{daysLeftHumanize} left',\n  },\n  editProject: {\n    id: 'project.card.edit_project.button',\n    defaultMessage: 'Edit',\n  },\n  projectPage: {\n    id: 'project.card.project_page.button',\n    defaultMessage: 'Project Page',\n  },\n  projectTasks: {\n    id: 'project.card.project_tasks.button',\n    defaultMessage: 'Tasks',\n  },\n  noDueDate: {\n    id: 'project.detail.noDueDate',\n    defaultMessage: 'No due date specified',\n  },\n  dueDateExpired: {\n    id: 'project.detail.dueDateExpired',\n    defaultMessage: 'Due date expired',\n  },\n});\n","import { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nexport function useEditProjectAllowed(project) {\n  const userDetails = useSelector((state) => state.auth.userDetails);\n  const organisations = useSelector((state) => state.auth.organisations);\n  const pmTeams = useSelector((state) => state.auth.pmTeams);\n  const [isAllowed, setIsAllowed] = useState(false);\n\n  useEffect(() => {\n    // admin users can edit any project\n    if (userDetails.role === 'ADMIN') setIsAllowed(true);\n    // owners can edit their projects\n    // project and project.author check are needed to avoid `null === null` case while data is loading\n    if (project && project.author && userDetails.username === project.author) setIsAllowed(true);\n    // managers of the organisation related to the project can edit it\n    if (organisations && organisations.includes(project.organisation)) setIsAllowed(true);\n    // users that are member of a PROJECT_MANAGER team associated with the project can edit it\n    const teams = project.teams\n      ? project.teams.filter((team) => team.role === 'PROJECT_MANAGER').map((team) => team.teamId)\n      : [];\n    if (pmTeams && pmTeams.some((item) => teams.includes(item))) {\n      setIsAllowed(true);\n    }\n  }, [pmTeams, userDetails.role, userDetails.username, organisations, project]);\n  return [isAllowed];\n}\n\nexport function useEditTeamAllowed(team) {\n  const userDetails = useSelector((state) => state.auth.userDetails);\n  const organisations = useSelector((state) => state.auth.organisations);\n  const pmTeams = useSelector((state) => state.auth.pmTeams);\n  const [isAllowed, setIsAllowed] = useState(false);\n\n  useEffect(() => {\n    // admin users can edit any team\n    if (userDetails.role === 'ADMIN') setIsAllowed(true);\n    // managers of the organisation related to the team can edit it\n    if (organisations && organisations.includes(team.organisation_id)) setIsAllowed(true);\n    // team managers can edit it\n    // verify from the redux store\n    if (pmTeams && pmTeams.includes(team.teamId)) setIsAllowed(true);\n    // and verify based on the team members list\n    if (team.members) {\n      const managers = team.members\n        .filter((member) => member.active && member.function === 'MANAGER')\n        .map((member) => member.username);\n      if (userDetails.username && managers.includes(userDetails.username)) {\n        setIsAllowed(true);\n      }\n    }\n  }, [pmTeams, userDetails.role, userDetails.username, organisations, team]);\n  return [isAllowed];\n}\n\nexport function useEditOrgAllowed(org) {\n  const userDetails = useSelector((state) => state.auth.userDetails);\n  const organisations = useSelector((state) => state.auth.organisations);\n  const [isAllowed, setIsAllowed] = useState(false);\n\n  useEffect(() => {\n    // admin users can edit any organisation\n    if (userDetails.role === 'ADMIN') setIsAllowed(true);\n    // check if user is a organisation manager\n    // based on the redux store data\n    if (org && org.organisationId && organisations && organisations.includes(org.organisationId)) {\n      setIsAllowed(true);\n    }\n    // and based on the organisation data\n    if (org && org.managers && org.managers.map((i) => i.username).includes(userDetails.username)) {\n      setIsAllowed(true);\n    }\n  }, [org, organisations, userDetails.username, userDetails.role]);\n  return [isAllowed];\n}\n","import React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\n\nexport const MappingLevelMessage = (props) => {\n  const { level, ...otherProps } = props;\n  const message = ['ALL', 'BEGINNER', 'INTERMEDIATE', 'ADVANCED'].includes(level) ? (\n    <FormattedMessage {...messages[`mappingLevel${level}`]} />\n  ) : (\n    level\n  );\n  return <span {...otherProps}>{message}</span>;\n};\n\nexport const DifficultyMessage = (props) => {\n  const { level, ...otherProps } = props;\n  const message = ['ALL', 'EASY', 'MODERATE', 'CHALLENGING'].includes(level) ? (\n    <FormattedMessage {...messages[`difficulty${level}`]} />\n  ) : (\n    level\n  );\n  return <span {...otherProps}>{message}</span>;\n};\n","import React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\nimport { ClockIcon } from '../svgIcons';\n\nexport function PriorityBox({ priority, extraClasses, showIcon }: Object) {\n  let color = 'blue-grey b--blue-grey';\n  if (priority === 'URGENT') color = 'red b--red';\n  if (priority === 'HIGH') color = 'orange b--orange';\n\n  return (\n    <FormattedMessage {...messages[`priorityDescription${priority}`]}>\n      {(msg) => (\n        <div className={`tc br1 f8 ttu ba ${color} ${extraClasses}`} title={msg}>\n          {showIcon && <ClockIcon className={`${color} v-mid mr1`} style={{ height: '13px' }} />}\n          {priority ? (\n            <span className=\"v-mid fw5\">\n              <FormattedMessage {...messages[`projectPriority${priority}`]} />\n            </span>\n          ) : (\n            ''\n          )}\n        </div>\n      )}\n    </FormattedMessage>\n  );\n}\n","import React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\n\nexport const ProjectStatusBox = ({ status, className }: Object) => {\n  const colour = status === 'DRAFT' ? 'orange' : 'blue-grey';\n  return (\n    <div className={`tc br1 f7 ttu ba b--${colour} ${colour} ${className}`}>\n      <FormattedMessage {...messages[`status_${status}`]} />\n    </div>\n  );\n};\n","import React from 'react';\n\nimport { useHover } from '../hooks/UseHover';\n\nexport const ProgressBar = ({\n  className,\n  small,\n  height,\n  firstBarValue,\n  secondBarValue = 0,\n  children,\n}) => {\n  const [hoverRef, isHovered, position] = useHover();\n  const heightClassname = `h${height}`;\n\n  /* tooltip component credit: https://codepen.io/syndicatefx/pen/QVPbJg */\n  return (\n    <div className={`cf db ${className || ''}`}>\n      <div className=\"relative\" ref={hoverRef}>\n        <div\n          className={`absolute bg-blue-grey br-pill ${\n            small ? heightClassname : 'h-pill'\n          } hide-child`}\n          style={{ width: `${firstBarValue > 100 ? 100 : firstBarValue}%` }}\n          role=\"progressbar\"\n          aria-valuenow={firstBarValue}\n          aria-valuemin=\"0\"\n          aria-valuemax=\"100\"\n        />\n        <div\n          className={`absolute bg-red br-pill ${small ? heightClassname : 'h-pill'} hide-child`}\n          style={{ width: `${secondBarValue > 100 ? 100 : secondBarValue}%` }}\n          role=\"progressbar\"\n          aria-valuenow={secondBarValue}\n          aria-valuemin=\"0\"\n          aria-valuemax=\"100\"\n        />\n        <div className={`bg-tan br-pill ${small ? heightClassname : 'h-pill'} overflow-y-hidden`} />\n        {isHovered && (\n          <span\n            className={`db absolute z-1 dib bg-blue-dark ba br2 b--blue-dark pa2 shadow-5 bottom-${\n              height === 'half' ? '2' : height\n            }`}\n            style={{ left: position.x }}\n          >\n            {children}\n            <span\n              className=\"absolute left-2 nt2 w1 h1 bg-blue-dark bl bt b--blue-dark rotate-45\"\n              style={{ bottom: '-0.5rem', left: 'calc(50% - 10px)' }}\n            />\n          </span>\n        )}\n      </div>\n    </div>\n  );\n};\n","import { useState, useCallback, useRef } from 'react';\n\nexport function useHover() {\n  const [value, setValue] = useState(false);\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n\n  // Wrap in useCallback so we can use in dependencies below\n  const handleMouseOver = useCallback((e) => {\n    setPosition({ x: e.clientX - ref.current.offsetLeft - 35, y: e.clientY });\n    setValue(true);\n  }, []);\n  const handleMouseOut = useCallback(() => setValue(false), []);\n\n  // Keep track of the last node passed to callbackRef\n  // so we can remove its event listeners.\n  const ref = useRef();\n\n  // Use a callback ref instead of useEffect so that event listeners\n  // get changed in the case that the returned ref gets added to\n  // a different element later. With useEffect, changes to ref.current\n  // wouldn't cause a rerender and thus the effect would run again.\n  const callbackRef = useCallback(\n    (node) => {\n      if (ref.current) {\n        ref.current.removeEventListener('mouseover', handleMouseOver);\n        ref.current.removeEventListener('mouseout', handleMouseOut);\n      }\n\n      ref.current = node;\n\n      if (ref.current) {\n        ref.current.addEventListener('mouseover', handleMouseOver);\n        ref.current.addEventListener('mouseout', handleMouseOut);\n      }\n    },\n    [handleMouseOver, handleMouseOut],\n  );\n\n  return [callbackRef, value, position];\n}\n","import React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\nimport { ProgressBar } from '../progressBar';\n\nexport default function ProjectProgressBar({\n  percentMapped,\n  percentValidated,\n  percentBadImagery,\n  className,\n  small = true,\n}: Object) {\n  return (\n    <>\n      <ProgressBar\n        className={className}\n        firstBarValue={percentMapped}\n        secondBarValue={percentValidated}\n        height=\"half\"\n        small={small}\n      >\n        <p className=\"f6 lh-copy ma0 white f7 fw4\">\n          <FormattedMessage\n            {...messages['percentMapped']}\n            values={{ n: <span className=\"fw8\">{percentMapped}</span> }}\n          />\n        </p>\n        <p className=\"f6 lh-copy ma0 white f7 fw4\">\n          <FormattedMessage\n            {...messages['percentValidated']}\n            values={{ n: <span className=\"fw8\">{percentValidated}</span> }}\n          />\n        </p>\n        {![null, undefined].includes(percentBadImagery) && (\n          <p className=\"f6 lh-copy ma0 white f7 fw4\">\n            <FormattedMessage\n              {...messages['percentBadImagery']}\n              values={{ n: <span className=\"fw8\">{percentBadImagery}</span> }}\n            />\n          </p>\n        )}\n      </ProgressBar>\n    </>\n  );\n}\n","import React from 'react';\n\nexport class TimerIcon extends React.PureComponent {\n  render() {\n    return (\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"10\"\n        height=\"12\"\n        fill=\"none\"\n        viewBox=\"0 0 10 12\"\n        role=\"img\"\n        {...this.props}\n      >\n        <title>Timer</title>\n        <path\n          fill=\"#68707F\"\n          fillRule=\"evenodd\"\n          d=\"M5.77 1.013v.932C8.164 2.32 10 4.419 10 6.942 10 9.732 7.757 12 5 12S0 9.731 0 6.942c0-2.524 1.837-4.621 4.23-4.997v-.932h-.421a.504.504 0 01-.501-.507c0-.28.224-.506.5-.506h2.383c.277 0 .501.227.501.506 0 .28-.224.507-.5.507H5.77zm3.306 5.909a.344.344 0 00.09-.264c-.182-1.99-1.783-3.58-3.787-3.76A.344.344 0 005 3.24V6.69c0 .19.155.344.347.344H8.82c.098 0 .191-.04.257-.112z\"\n          clipRule=\"evenodd\"\n        ></path>\n      </svg>\n    );\n  }\n}\n","import React, { useState, useEffect } from 'react';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport humanizeDuration from 'humanize-duration';\nimport ReactTooltip from 'react-tooltip';\n\nimport { ClockIcon } from '../svgIcons';\nimport messages from './messages';\nimport { TimerIcon } from '../svgIcons/timer';\n\nexport function DueDateBox({\n  dueDate,\n  intervalMili,\n  tooltipMsg,\n  isTaskStatusPage = false,\n  isProjectDetailPage = false,\n}: Object) {\n  const intl = useIntl();\n  const [timer, setTimer] = useState(Date.now());\n  useEffect(() => {\n    let interval;\n    if (intervalMili) {\n      interval = setInterval(() => {\n        setTimer(Date.now());\n      }, intervalMili); // 1 minute\n    }\n    return () => {\n      clearInterval(interval);\n    };\n  }, [intervalMili]);\n\n  if (dueDate === undefined || new Date(dueDate) === undefined) {\n    return null;\n  }\n\n  let options = { language: intl.locale.slice(0, 2), fallbacks: ['en'], largest: 1 };\n\n  if (intervalMili !== undefined) {\n    options = { units: ['h', 'm'], round: true };\n  }\n  const milliDifference = new Date(dueDate) - timer;\n\n  if (milliDifference > 0) {\n    return (\n      <>\n        <span\n          className={`inline-flex items-center lh-solid f8 br1 ph2 link ${\n            milliDifference < 60000 * 20 && intervalMili !== undefined\n              ? 'bg-red white'\n              : 'bg-tan blue-grey'\n          } ${intervalMili ? '' : 'mw4'}`}\n          data-tip={tooltipMsg}\n          style={{ paddingTop: '0.375rem', paddingBottom: '0.375rem' }}\n        >\n          {!isTaskStatusPage ? (\n            <ClockIcon height=\"12px\" width=\"12px\" />\n          ) : (\n            <TimerIcon height=\"12px\" width=\"12px\" />\n          )}\n          <span className=\"pl1\">\n            <FormattedMessage\n              className=\"indent\"\n              {...messages['dueDateRelativeRemainingDays']}\n              values={{\n                daysLeftHumanize: humanizeDuration(milliDifference, options),\n              }}\n            />\n          </span>\n        </span>\n        {tooltipMsg && <ReactTooltip place=\"bottom\" />}\n      </>\n    );\n  } else {\n    return (\n      isProjectDetailPage && (\n        <span\n          className=\"inline-flex items-center lh-solid f8 br1 ph2 link bg-tan blue-grey\"\n          style={{ paddingTop: '0.375rem', paddingBottom: '0.375rem' }}\n        >\n          <ClockIcon height=\"12px\" width=\"12px\" />\n          <span className=\"pl1\">\n            {dueDate ? (\n              <FormattedMessage {...messages.dueDateExpired} />\n            ) : (\n              <FormattedMessage {...messages.noDueDate} />\n            )}\n          </span>\n        </span>\n      )\n    );\n  }\n}\n","import React, { Fragment } from 'react';\n\nimport { TextRow, TextBlock, RoundShape, RectShape } from 'react-placeholder/lib/placeholders';\n\nexport const teamCardPlaceholderTemplate = () => (_n, i) =>\n  (\n    <article\n      className=\"base-font blue-dark h-100 bg-white ph3 pb3 ba br1 b--card shadow-hover h-100 flex flex-column justify-between\"\n      key={i}\n    >\n      <div className=\"mt3\">\n        <TextRow\n          className=\"show-loading-animation mb3\"\n          color=\"#CCC\"\n          style={{ width: 200, height: 24 }}\n        />\n        <RectShape\n          className=\"show-loading-animation mb4\"\n          style={{ width: 80, height: 50 }}\n          color=\"#DDD\"\n        />\n        {[...Array(2)].map((_, i) => (\n          <Fragment key={i}>\n            <TextRow className=\"show-loading-animation\" color=\"#CCC\" style={{ width: '45%' }} />\n            {[...Array(2)].map((_, i) => (\n              <RoundShape\n                key={i}\n                className=\"show-loading-animation dib mt1\"\n                style={{ width: 25, height: 25 }}\n                color=\"#DDD\"\n              />\n            ))}\n          </Fragment>\n        ))}\n      </div>\n      <TextBlock\n        rows={2}\n        className=\"show-loading-animation mt2\"\n        color=\"#CCC\"\n        style={{ width: 80, height: 50 }}\n      />\n    </article>\n  );\n\nexport const nCardPlaceholders = (N) => {\n  return [...Array(N).keys()].map(teamCardPlaceholderTemplate());\n};\n","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport ReactPlaceholder from 'react-placeholder';\nimport { Form, Field, useFormState } from 'react-final-form';\nimport ReactTooltip from 'react-tooltip';\n\nimport messages from './messages';\nimport { InfoIcon } from '../svgIcons';\nimport { useEditTeamAllowed } from '../../hooks/UsePermissions';\nimport { UserAvatar, UserAvatarList } from '../user/avatar';\nimport { AddButton, ViewAllLink, Management, VisibilityBox, JoinMethodBox } from './management';\nimport { RadioField, OrganisationSelectInput, TextField } from '../formInputs';\nimport { Button, EditButton } from '../button';\nimport { nCardPlaceholders } from './teamsPlaceholder';\nimport { Alert } from '../alert';\n\nexport function TeamsManagement({\n  teams,\n  userDetails,\n  managementView,\n  userTeamsOnly,\n  setUserTeamsOnly,\n  teamsStatus,\n  query,\n  setQuery,\n}: Object) {\n  const isOrgManager = useSelector(\n    (state) => state.auth.organisations && state.auth.organisations.length > 0,\n  );\n\n  const onSearchInputChange = (e) =>\n    setQuery({ ...query, searchQuery: e.target.value || undefined, page: 1 }, 'pushIn');\n\n  const clearSearchQuery = () => setQuery({ ...query, searchQuery: undefined, page: 1 }, 'pushIn');\n\n  return (\n    <Management\n      title={\n        managementView ? (\n          <FormattedMessage\n            {...messages.manage}\n            values={{ entity: <FormattedMessage {...messages.teams} /> }}\n          />\n        ) : (\n          <FormattedMessage {...messages.myTeams} />\n        )\n      }\n      isAdmin={userDetails.role === 'ADMIN' && managementView}\n      showAddButton={(userDetails.role === 'ADMIN' || isOrgManager) && managementView}\n      managementView={managementView}\n      userOnly={userTeamsOnly}\n      setUserOnly={setUserTeamsOnly}\n      userOnlyLabel={<FormattedMessage {...messages.myTeams} />}\n    >\n      <div className=\"w-20-l w-25-m\">\n        <TextField\n          value={query.searchQuery || ''}\n          placeholderMsg={messages.searchTeams}\n          onChange={onSearchInputChange}\n          onCloseIconClick={clearSearchQuery}\n        />\n      </div>\n      <div className={`${teamsStatus !== 'error' ? 'cards-container' : ''} mt2`}>\n        {teamsStatus === 'loading' && (\n          <ReactPlaceholder\n            showLoadingAnimation={true}\n            customPlaceholder={nCardPlaceholders(4)}\n            delay={10}\n            ready={false}\n          />\n        )}\n        {teamsStatus === 'error' && (\n          <Alert type=\"error\">\n            <FormattedMessage {...messages.errorLoadingTeams} />\n          </Alert>\n        )}\n        {teamsStatus === 'success' && (\n          <>\n            {teams?.length ? (\n              teams.map((team) => <TeamCard team={team} key={team.teamId} />)\n            ) : (\n              <div className=\"pb3 pt2\">\n                <FormattedMessage {...messages.noTeams} />\n              </div>\n            )}\n          </>\n        )}\n      </div>\n    </Management>\n  );\n}\n\nexport function Teams({ teams, viewAllQuery, showAddButton = false, isReady, border = true }) {\n  return (\n    <div className={`bg-white ${border ? 'b--grey-light ba pa4' : ''}`}>\n      <div className=\"cf db\">\n        <h3 className=\"f3 barlow-condensed ttu blue-dark mv0 fw6 dib v-mid\">\n          <FormattedMessage {...messages.teams} />\n        </h3>\n        {showAddButton && (\n          <Link to={'/manage/teams/new/'} className=\"dib ml4\">\n            <AddButton />\n          </Link>\n        )}\n        {viewAllQuery && <ViewAllLink link={`/manage/teams/${viewAllQuery ? viewAllQuery : ''}`} />}\n        <div className=\"cards-container pt4\">\n          <ReactPlaceholder customPlaceholder={nCardPlaceholders(4)} delay={10} ready={isReady}>\n            {teams?.slice(0, 6).map((team) => (\n              <TeamCard key={team.teamId} team={team} />\n            ))}\n            {teams?.length === 0 && (\n              <span className=\"blue-grey\">\n                <FormattedMessage {...messages.noTeamsFound} />\n              </span>\n            )}\n          </ReactPlaceholder>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function TeamCard({ team }: Object) {\n  return (\n    <Link to={`/teams/${team.teamId}/membership/`} className=\"no-underline\">\n      <article className=\"base-font blue-dark h-100 bg-white ph3 pb3 ba br1 shadow-hover h-100 flex flex-column justify-between b--card\">\n        <div className=\"\">\n          <h3 className=\"f4 fw6 h3 lh-title mt3 mb2 overflow-y-hidden\" title={team.name}>\n            {team.name}\n          </h3>\n          <div className=\"db h2\" title={team.organisation}>\n            <img src={team.logo} alt={team.organisation} className=\"h2\" />\n          </div>\n          <h4 className=\"f6 fw5 mb2 mt3 ttu blue-light\">\n            <FormattedMessage {...messages.managers} />\n          </h4>\n          <div className=\"db h2\">\n            <UserAvatarList\n              size=\"small\"\n              textColor=\"white\"\n              users={team.members.filter((user) => user.function === 'MANAGER' && user.active)}\n              maxLength={8}\n              totalCount={team.managersCount}\n            />\n          </div>\n          <h4 className=\"f6 fw5 mv2 ttu blue-light\">\n            <FormattedMessage {...messages.teamMembers} />\n          </h4>\n          <div className=\"db h2\">\n            <UserAvatarList\n              size=\"small\"\n              textColor=\"white\"\n              users={team.members.filter((user) => user.function !== 'MANAGER' && user.active)}\n              maxLength={8}\n              totalCount={team.membersCount}\n            />\n          </div>\n        </div>\n        <div className=\"pt3\">\n          <VisibilityBox visibility={team.visibility} extraClasses=\"pv1 ph2 dib\" />\n          <div className=\"pt2 h2\">\n            <JoinMethodBox className=\"pv1 ph2 dib\" joinMethod={team.joinMethod} />\n          </div>\n        </div>\n      </article>\n    </Link>\n  );\n}\n\nexport function TeamInformation(props) {\n  const intl = useIntl();\n  const labelClasses = 'db pt3 pb2';\n  const fieldClasses = 'blue-grey w-100 pv3 ph2 input-reset ba b--grey-light bg-transparent';\n  const formState = useFormState();\n  const joinMethods = {\n    ANY: 'anyoneCanJoin',\n    BY_REQUEST: 'byRequest',\n    BY_INVITE: 'byInvite',\n  };\n\n  return (\n    <>\n      <div className=\"cf\">\n        <label className={labelClasses}>\n          <FormattedMessage {...messages.name} />\n        </label>\n        <Field name=\"name\" component=\"input\" type=\"text\" className={fieldClasses} required />\n      </div>\n      <div className=\"cf\">\n        <label className={labelClasses}>\n          <FormattedMessage {...messages.description} />\n        </label>\n        <Field name=\"description\" component=\"textarea\" type=\"text\" className={fieldClasses} />\n      </div>\n      <div className=\"cf\">\n        <label className={labelClasses}>\n          <FormattedMessage {...messages.organisation} />\n        </label>\n        <OrganisationSelectInput name=\"organisation_id\" />\n      </div>\n      <div className=\"cf pt1\">\n        <label className={labelClasses}>\n          <FormattedMessage {...messages.joinMethod} />\n        </label>\n        {Object.keys(joinMethods).map((method) => (\n          <div className=\"pv2\" key={method}>\n            <RadioField name=\"joinMethod\" value={method} required />\n            <span className=\"f5\">\n              <FormattedMessage {...messages[joinMethods[method]]} />\n            </span>\n            <InfoIcon\n              width={12}\n              height={12}\n              className=\"blue-grey v-mid pb1 ml2\"\n              data-tip={intl.formatMessage(messages[`${joinMethods[method]}Description`])}\n            />\n            <ReactTooltip place=\"bottom\" className=\"mw6\" effect=\"solid\" />\n          </div>\n        ))}\n      </div>\n      {formState.values.joinMethod === 'BY_INVITE' && (\n        <div className=\"cf pt1\">\n          <label className={labelClasses}>\n            <FormattedMessage {...messages.visibility} />\n          </label>\n          <div className=\"pv2\">\n            <RadioField name=\"visibility\" value=\"PUBLIC\" />\n            <span className=\" f5\">\n              <FormattedMessage {...messages.public} />\n            </span>\n            <InfoIcon\n              width={12}\n              height={12}\n              className=\"blue-grey v-mid pb1 ml2\"\n              data-tip={intl.formatMessage(messages['publicDescription'])}\n            />\n          </div>\n          <div className=\"pv2\">\n            <RadioField name=\"visibility\" value=\"PRIVATE\" />\n            <span className=\"f5\">\n              <FormattedMessage {...messages.private} />\n            </span>\n            <InfoIcon\n              width={12}\n              height={12}\n              className=\"blue-grey v-mid pb1 ml2\"\n              data-tip={intl.formatMessage(messages['privateDescription'])}\n            />\n            <ReactTooltip place=\"bottom\" className=\"mw6\" effect=\"solid\" />\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n\nexport function TeamForm(props) {\n  return (\n    <Form\n      onSubmit={(values) => props.updateTeam(values)}\n      initialValues={props.team}\n      mutators={{\n        setValue: [],\n      }}\n      render={({\n        handleSubmit,\n        dirty,\n        submitSucceeded,\n        dirtySinceLastSubmit,\n        form,\n        submitting,\n        values,\n      }) => {\n        const dirtyForm = submitSucceeded ? dirtySinceLastSubmit && dirty : dirty;\n        return (\n          <div className=\"blue-grey mb3\">\n            <div className={`bg-white b--grey-light pa4 ${dirtyForm ? 'bt bl br' : 'ba'}`}>\n              <h3 className=\"f3 fw6 dib blue-dark mv0\">\n                <FormattedMessage {...messages.teamInfo} />\n              </h3>\n              <form id=\"team-form\" onSubmit={handleSubmit}>\n                <fieldset className=\"bn pa0\" disabled={submitting}>\n                  <TeamInformation joinMethod={props.team.joinMethod} />\n                </fieldset>\n              </form>\n            </div>\n            {dirtyForm && (\n              <div className=\"cf pt0 h3\">\n                <div className=\"w-70-l w-50 fl tr dib bg-grey-light\">\n                  <Button className=\"blue-dark bg-grey-light h3\" onClick={() => form.restart()}>\n                    <FormattedMessage {...messages.cancel} />\n                  </Button>\n                </div>\n                <div className=\"w-30-l w-50 h-100 fr dib\">\n                  <Button\n                    onClick={() => handleSubmit()}\n                    className=\"w-100 h-100 bg-red white\"\n                    disabledClassName=\"bg-red o-50 white w-100 h-100\"\n                  >\n                    <FormattedMessage {...messages.save} />\n                  </Button>\n                </div>\n              </div>\n            )}\n          </div>\n        );\n      }}\n    ></Form>\n  );\n}\n\nexport function TeamSideBar({ team, members, managers, requestedToJoin }: Object) {\n  const [isUserTeamManager] = useEditTeamAllowed(team);\n  const [searchQuery, setSearchQuery] = useState('');\n\n  const searchMembers = () =>\n    searchQuery !== ''\n      ? members.filter((member) => {\n          return member.username.toLowerCase().includes(searchQuery.toLowerCase());\n        })\n      : members;\n\n  return (\n    <ReactPlaceholder\n      showLoadingAnimation={true}\n      type=\"media\"\n      rows={20}\n      ready={typeof team.teamId === 'number'}\n    >\n      <div className=\"cf pb2\">\n        <div className=\"w-20 pv2 dib fl\">\n          <span className=\"blue-grey v-mid\">\n            <FormattedMessage {...messages.team} /> #{team.teamId}\n          </span>\n        </div>\n        <div className=\"w-80 dib fr tr\">\n          {isUserTeamManager && (\n            <EditButton url={`/manage/teams/${team.teamId}`}>\n              <FormattedMessage {...messages.editTeam} />\n            </EditButton>\n          )}\n          <JoinMethodBox className=\"pv2 ph3 mh1 mv1 dib\" joinMethod={team.joinMethod} />\n          <VisibilityBox visibility={team.visibility} extraClasses=\"pv2 ph3 mh1 mv1 dib\" />\n        </div>\n      </div>\n      <h3 className=\"f2 ttu blue-dark fw7 barlow-condensed v-mid ma0 dib ttu\">{team.name}</h3>\n      <p className=\"blue-grey\">{team.description}</p>\n      <div className=\"cf\">\n        <div className=\"w-100 w-50-m fl\">\n          <h4>\n            <FormattedMessage {...messages.organisation} />\n          </h4>\n          <Link\n            className=\"link blue-dark fw5 mr2 underline dib\"\n            to={`/organisations/${team.organisationSlug}`}\n          >\n            <p>\n              {typeof team.logo === 'string' && (\n                <img src={team.logo} alt=\"organisation logo\" className=\"mw4\" />\n              )}\n            </p>\n            {team.organisation}\n          </Link>\n        </div>\n        <div className=\"w-100 w-50-m fl\">\n          <h4>\n            <FormattedMessage {...messages.managers} />\n          </h4>\n          {managers.length === 0 ? (\n            <span className=\"f6 blue-grey\">\n              <FormattedMessage {...messages.noManagers} />\n            </span>\n          ) : (\n            <div className=\"cf db mt3\">\n              {managers.map((user) => (\n                <UserAvatar\n                  key={user.username}\n                  username={user.username}\n                  picture={user.pictureUrl}\n                  size=\"large\"\n                  colorClasses=\"white bg-blue-grey mv1\"\n                />\n              ))}\n            </div>\n          )}\n          <h4>\n            <FormattedMessage {...messages.members} />\n          </h4>\n          {members.length === 0 ? (\n            <span className=\"f6 blue-grey\">\n              <FormattedMessage {...messages.noMembers} />\n            </span>\n          ) : (\n            <>\n              <div className=\"cf db mt3\">\n                <div className=\"mb3 w5\">\n                  <TextField\n                    value={searchQuery}\n                    placeholderMsg={messages.searchMembers}\n                    onChange={({ target: { value } }) => setSearchQuery(value)}\n                    onCloseIconClick={() => setSearchQuery('')}\n                  />\n                </div>\n                {searchMembers().map((user) => (\n                  <UserAvatar\n                    key={user.username}\n                    username={user.username}\n                    picture={user.pictureUrl}\n                    colorClasses=\"white bg-blue-grey mv1\"\n                  />\n                ))}\n              </div>\n            </>\n          )}\n          <div className=\"cf db mt3\">\n            {requestedToJoin && (\n              <span className=\"red pr5-ns\">\n                <FormattedMessage {...messages.waitingApproval} />\n              </span>\n            )}\n          </div>\n        </div>\n      </div>\n    </ReactPlaceholder>\n  );\n}\n\nexport function TeamsBoxList({ teams }: Object) {\n  const mappingTeams = teams.filter((team) => team.role === 'MAPPER');\n  const validationTeams = teams.filter((team) => team.role === 'VALIDATOR');\n  return (\n    <div className=\"flex flex-column flex-row-l gap-1\">\n      {mappingTeams.length > 0 && (\n        <div className=\"w-100 w-30-l\">\n          <h4 className=\"mb1 fw6 mt0\">\n            <FormattedMessage {...messages.mappingTeams} />\n          </h4>\n          <div>\n            {mappingTeams.map((team) => (\n              <TeamBox key={team.teamId} team={team} className=\"dib pv2 ph3 mt2 ba f6 tc\" />\n            ))}\n          </div>\n        </div>\n      )}\n      {validationTeams.length > 0 && (\n        <div className=\"w-100 w-30-l\">\n          <h4 className=\"mb1 fw6 mt0\">\n            <FormattedMessage {...messages.validationTeams} />\n          </h4>\n          {validationTeams.map((team) => (\n            <TeamBox key={team.teamId} team={team} className=\"dib pv2 ph3 mt2 ba f6 tc\" />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport const TeamBox = ({ team, className }: Object) => (\n  <Link className=\"link blue-grey mr2\" to={`/teams/${team.teamId}/membership/`}>\n    <div className={`br1 ${className}`}>\n      {team.logo && (\n        <img alt={team.organisation} src={team.logo} className=\"object-fit-contain h2 pr2 v-mid\" />\n      )}\n      {team.name}\n    </div>\n  </Link>\n);\n","import React, { useState } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from 'react-router-dom';\n\nimport messages from './messages';\nimport { RelativeTimeWithUnit } from '../../utils/formattedRelativeTime';\nimport ProjectProgressBar from './projectProgressBar';\nimport { DifficultyMessage } from '../mappingLevel';\nimport { ProjectStatusBox } from '../projectDetail/statusBox';\nimport { PROJECTCARD_CONTRIBUTION_SHOWN_THRESHOLD } from '../../config/index';\nimport { PriorityBox } from './priorityBox';\nimport { DueDateBox } from './dueDateBox';\nimport './styles.scss';\n\nexport function ProjectTeaser({\n  lastUpdated,\n  totalContributors,\n  className,\n  littleFont = 'f7',\n  bigFont = 'f6',\n}: Object) {\n  /* outerDivStyles must have f6 even if sub-divs have f7 to fix grid issues*/\n  const outerDivStyles = 'f6 tl blue-grey truncate mb2';\n\n  if (totalContributors < PROJECTCARD_CONTRIBUTION_SHOWN_THRESHOLD) {\n    return (\n      <div title={lastUpdated} className={`${outerDivStyles} ${className || ''}`}>\n        <span className={littleFont}>\n          <FormattedMessage {...messages['projectLastContribution']} />{' '}\n          <RelativeTimeWithUnit date={lastUpdated} />\n        </span>\n      </div>\n    );\n  } else {\n    return (\n      <div title={lastUpdated} className={`${outerDivStyles} ${className || ''}`}>\n        <span className={`${littleFont}`}>\n          <FormattedMessage\n            {...messages['projectTotalContributors']}\n            values={{\n              number: <span className={`blue-grey b ${bigFont}`}>{totalContributors || 0}</span>,\n            }}\n          />\n        </span>\n      </div>\n    );\n  }\n}\n\nexport function ProjectCard({\n  projectId,\n  name,\n  shortDescription,\n  organisationName,\n  organisationLogo,\n  lastUpdated,\n  dueDate,\n  priority,\n  status,\n  difficulty,\n  campaignTag,\n  percentMapped,\n  percentValidated,\n  totalContributors,\n  showBottomButtons = false,\n}: Object) {\n  const [isHovered, setHovered] = useState(false);\n  const linkCombo = 'link pa2 f6 ba b--grey-light di w-50 truncate tc';\n\n  const showBottomButtonsHovered = showBottomButtons === true ? isHovered : false;\n  const bottomButtonSpacer = showBottomButtons ? 'pt3 pb4' : 'pv3';\n  const bottomButtonMargin = showBottomButtons ? 'project-card-with-btn' : 'project-card';\n\n  const bottomButtons = (\n    <div className=\"absolute bottom-0 w-100\">\n      <Link\n        to={`/manage/projects/${projectId}`}\n        className={`fl bg-grey-light blue-grey bn ${linkCombo}`}\n      >\n        <FormattedMessage {...messages.editProject} />\n      </Link>\n      <Link to={`/projects/${projectId}/tasks`} className={`fr bg-red white bn ${linkCombo}`}>\n        <FormattedMessage {...messages.projectTasks} />\n      </Link>\n    </div>\n  );\n\n  return (\n    <article\n      onMouseEnter={() => setHovered(true)}\n      onMouseLeave={() => setHovered(false)}\n      className={`relative blue-dark`}\n    >\n      <Link className=\"no-underline color-inherit\" to={`/projects/${projectId}`}>\n        <div\n          className={`${bottomButtonSpacer} ba br1 bg-white shadow-hover h-100 flex flex-column justify-between b--card ${bottomButtonMargin}`}\n        >\n          <div>\n            <div className=\"flex justify-between items-center\">\n              <div className=\"red\">\n                <img\n                  className=\"h2\"\n                  src={organisationLogo}\n                  alt={organisationLogo ? organisationName : ''}\n                />\n              </div>\n              <div className=\"\">\n                {['DRAFT', 'ARCHIVED'].includes(status) ? (\n                  <ProjectStatusBox status={status} className={'pv1 ph1 dib'} />\n                ) : (\n                  <PriorityBox\n                    priority={priority}\n                    extraClasses={'pv1 ph2 dib'}\n                    showIcon={!['URGENT', 'MEDIUM'].includes(priority)} // inside the cards, don't show the icon for urgent or medium, due to the space required\n                  />\n                )}\n              </div>\n            </div>\n            <div className=\"mt4 w-100\">\n              <div className=\"f7 blue-grey\">#{projectId}</div>\n              <h3\n                title={name}\n                className=\"mt3 f125 fw7 lh-title overflow-y-hidden pr4 project-title\"\n              >\n                {name}\n              </h3>\n              <div className=\"tc f6\">\n                <div className=\"w-100 tl pr2 f7 blue-grey dib mb2 project-desc\">\n                  {shortDescription} {campaignTag ? ' · ' + campaignTag : ''}\n                </div>\n              </div>\n            </div>\n          </div>\n          <div>\n            <ProjectTeaser totalContributors={totalContributors} lastUpdated={lastUpdated} />\n            <ProjectProgressBar percentMapped={percentMapped} percentValidated={percentValidated} />\n            <div className=\"pt2 truncate flex justify-between items-center\">\n              <DifficultyMessage\n                level={difficulty}\n                className=\"fl f7 pv2 ttc fw5 blue-grey truncate\"\n              />\n              <DueDateBox dueDate={dueDate} />\n            </div>\n          </div>\n        </div>\n      </Link>\n      {showBottomButtonsHovered && bottomButtons}\n    </article>\n  );\n}\n","import React from 'react';\nimport { TextBlock, RoundShape } from 'react-placeholder/lib/placeholders';\n\nexport const projectCardPlaceholderTemplate = () => (_, i) =>\n  (\n    <div\n      className={`ph3 ba br1 b--grey-light bg-white shadow-hover h-100 flex flex-column justify-between project-card`}\n      key={i}\n    >\n      <div className=\"\">\n        <div className=\"flex justify-between items-center mb4\">\n          <RoundShape\n            className=\"show-loading-animation\"\n            color=\"#DDD\"\n            style={{ width: 50, height: 50 }}\n          />\n          <TextBlock\n            rows={1}\n            className=\"show-loading-animation\"\n            color=\"#CCC\"\n            style={{ width: 60 }}\n          />\n        </div>\n        <TextBlock rows={3} className=\"show-loading-animation mb4\" color=\"#CCC\" />\n        <TextBlock\n          rows={2}\n          className=\"show-loading-animation\"\n          color=\"#CCC\"\n          style={{ height: 35 }}\n        />\n      </div>\n      <TextBlock rows={2} className=\"show-loading-animation mb4\" color=\"#CCC\" />\n    </div>\n  );\n\nexport const nCardPlaceholders = (N) => {\n  return [...Array(N).keys()].map(projectCardPlaceholderTemplate());\n};\n","import React, { useState, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\nimport { FormattedMessage } from 'react-intl';\nimport Popup from 'reactjs-popup';\n\nimport messages from './messages';\nimport { fetchLocalJSONAPI } from '../../network/genericJSONRequest';\nimport { DeleteButton } from '../teamsAndOrgs/management';\nimport { Button } from '../button';\nimport { AlertIcon } from '../svgIcons';\n\nexport function DeleteModal({ id, name, type, className, endpointURL, onDelete }: Object) {\n  const navigate = useNavigate();\n  const modalRef = useRef();\n  const token = useSelector((state) => state.auth.token);\n  const [deleteStatus, setDeleteStatus] = useState(null);\n  const [error, setErrorMessage] = useState(null);\n\n  const deleteURL = endpointURL ? endpointURL : `${type}/${id}/`;\n\n  const deleteEntity = () => {\n    setDeleteStatus('started');\n    fetchLocalJSONAPI(deleteURL, token, 'DELETE')\n      .then((success) => {\n        setDeleteStatus('success');\n        if (type === 'notifications') {\n          setTimeout(() => navigate(`/inbox`), 750);\n        } else if (type === 'comments') {\n          setTimeout(() => {\n            onDelete();\n            modalRef.current.close();\n          }, 750);\n          return;\n        } else {\n          setTimeout(() => navigate(`/manage/${type !== 'interests' ? type : 'categories'}`), 750);\n        }\n      })\n      .catch((e) => {\n        setDeleteStatus('failure');\n        setErrorMessage(e.message);\n      });\n  };\n\n  return (\n    <Popup\n      ref={modalRef}\n      trigger={\n        <DeleteButton className={`${className || ''} dib ml3`} showText={type !== 'comments'} />\n      }\n      modal\n      closeOnDocumentClick\n      nested\n      onClose={() => {\n        setDeleteStatus(null);\n        setErrorMessage(null);\n      }}\n    >\n      {(close) => (\n        <div\n          className=\"pv4\"\n          onClick={(e) => {\n            e.preventDefault();\n            e.stopPropagation();\n          }}\n        >\n          <div className=\"cf tc red\">\n            <AlertIcon height=\"50px\" width=\"50px\" />\n          </div>\n          <div className=\"cf blue-dark tc\">\n            {!deleteStatus && (\n              <>\n                <h3 className=\"barlow-condensed f3\">\n                  <FormattedMessage {...messages[`confirmDeleteTitle_${type}`]} />\n                </h3>\n                <div className=\"pt3\">\n                  <Button\n                    className=\"bg-white blue-dark mr3\"\n                    onClick={() => {\n                      setDeleteStatus(false);\n                      close();\n                    }}\n                  >\n                    <FormattedMessage {...messages.cancel} />\n                  </Button>\n                  <Button className=\"bg-red white\" onClick={() => deleteEntity()}>\n                    <FormattedMessage {...messages.delete} />\n                  </Button>\n                </div>\n              </>\n            )}\n            {deleteStatus && (\n              <h3 className=\"barlow-condensed f3\">\n                {deleteStatus === 'started' && (\n                  <>\n                    <FormattedMessage {...messages.processing} />\n                    &hellip;\n                  </>\n                )}\n                {deleteStatus === 'success' && (\n                  <FormattedMessage {...messages[`success_${type}`]} />\n                )}\n                {deleteStatus === 'failure' && (\n                  <FormattedMessage {...messages[`failure_${type}`]} />\n                )}\n              </h3>\n            )}\n            {deleteStatus === 'failure' && (\n              <p>\n                {(error && messages[`${error}Error`] && (\n                  <FormattedMessage {...messages[`${error}Error`]} />\n                )) ||\n                  error}\n              </p>\n            )}\n          </div>\n        </div>\n      )}\n    </Popup>\n  );\n}\n","import slug from 'slug';\n\nexport const slugifyFileName = (name, mimetype) => {\n  // slugify file names in order to avoid problems on the markdown\n  if (name.lastIndexOf('.') === -1) {\n    name = `${name}.${mimetype.split('/')[1]}`;\n  }\n  return `${slug(name.substr(0, name.lastIndexOf('.')))}${name.substr(name.lastIndexOf('.'))}`;\n};\n","import { useState, useCallback } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { pushToLocalJSONAPI } from '../network/genericJSONRequest';\nimport { slugifyFileName } from '../utils/slugifyFileName';\n\nexport const useUploadImage = () => {\n  const [uploading, setUploading] = useState(false);\n  const [uploadError, setUploadError] = useState(null);\n\n  const uploadImg = useCallback((file, updateFn, token) => {\n    if (file && updateFn && token) {\n      const promise = new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onload = () => {\n          if (!!reader.result) {\n            resolve(reader.result);\n          } else {\n            reject(Error('Failed converting to base64'));\n          }\n        };\n      });\n      promise.then(\n        (result) => {\n          const payload = JSON.stringify({\n            mime: file.type,\n            data: result.split('base64,')[1],\n            filename: slugifyFileName(file.name, file.type),\n          });\n          setUploading(true);\n          pushToLocalJSONAPI('system/image-upload/', payload, token)\n            .then((res) => {\n              updateFn(res.url);\n              setUploading(false);\n              setUploadError(null);\n            })\n            .catch((e) => {\n              setUploadError(e);\n              setUploading(false);\n            });\n        },\n        (err) => {\n          setUploadError(err);\n        },\n      );\n    }\n  }, []);\n  return [uploadError, uploading, uploadImg];\n};\n\nexport const useOnDrop = (appendImgToComment) => {\n  const token = useSelector((state) => state.auth.token);\n  const [uploadError, uploading, uploadImg] = useUploadImage();\n\n  const onDrop = useCallback(\n    (acceptedFiles) => {\n      acceptedFiles.forEach(async (file) => await uploadImg(file, appendImgToComment, token));\n    },\n    [token, uploadImg, appendImgToComment],\n  );\n  return [uploadError, uploading, onDrop];\n};\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { FormattedMessage } from 'react-intl';\nimport ReactPlaceholder from 'react-placeholder';\n\nimport messages from './messages';\nimport { ProjectCard } from '../projectCard/projectCard';\nimport { AddButton, ViewAllLink } from './management';\nimport { nCardPlaceholders } from '../projectCard/nCardPlaceholder';\n\nexport function Projects({\n  projects,\n  viewAllEndpoint,\n  ownerEntity,\n  showAddButton = false,\n  showManageButtons = true,\n  border = true,\n}: Object) {\n  return (\n    <div className={`bg-white mb3 ${border ? 'b--grey-light ba pa4' : ''}`}>\n      <h3 className=\"f3 barlow-condensed ttu blue-dark mv0 fw6 dib v-mid\">\n        <FormattedMessage {...messages.projects} />\n      </h3>\n      {showAddButton && (\n        <Link to={'/manage/projects/new/'} className=\"dib ml4\">\n          <AddButton />\n        </Link>\n      )}\n      <ViewAllLink link={viewAllEndpoint} />\n      <div className=\"pt4 cards-container\">\n        <ReactPlaceholder\n          customPlaceholder={nCardPlaceholders(4)}\n          showLoadingAnimation={true}\n          delay={10}\n          ready={projects?.results}\n        >\n          {projects?.results?.slice(0, 6).map((card) => (\n            <ProjectCard key={card.projectId} showBottomButtons={showManageButtons} {...card} />\n          ))}\n          {projects?.results?.length === 0 && (\n            <span className=\"blue-grey\">\n              <FormattedMessage\n                {...messages.noProjectsFound}\n                values={{\n                  entity: (\n                    <span className=\"ttl\">\n                      <FormattedMessage {...messages[ownerEntity]} />\n                    </span>\n                  ),\n                }}\n              />\n            </span>\n          )}\n        </ReactPlaceholder>\n      </div>\n    </div>\n  );\n}\n","/* global btoa */\n(function (root) {\n  let base64\n\n  // This function's sole purpose is to help us ignore lone surrogates so that\n  // malformed strings don't throw in the browser while being processed\n  // permissively in Node.js. If we didn't care about parity, we could get rid\n  // of it.\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charAt\n  function getWholeCharAndI (str, i) {\n    const code = str.charCodeAt(i)\n\n    // This is a coherence check. `code` should never be `NaN`.\n    /* istanbul ignore if */\n    if (isNaN(code)) {\n      throw new RangeError('Index ' + i + ' out of range for string \"' + str + '\"; please open an issue at https://github.com/Trott/slug/issues/new')\n    }\n    if (code < 0xD800 || code > 0xDFFF) {\n      return [str.charAt(i), i] // Non-surrogate character, keeping 'i' the same\n    }\n\n    // High surrogate\n    if (code >= 0xD800 && code <= 0xDBFF) {\n      if (str.length <= (i + 1)) {\n        // High surrogate without following low surrogate\n        return [' ', i]\n      }\n      const next = str.charCodeAt(i + 1)\n      if (next < 0xDC00 || next > 0xDFFF) {\n        // High surrogate without following low surrogate\n        return [' ', i]\n      }\n      return [str.charAt(i) + str.charAt(i + 1), i + 1]\n    }\n\n    // Low surrogate (0xDC00 <= code && code <= 0xDFFF)\n    if (i === 0) {\n      // Low surrogate without preceding high surrogate\n      return [' ', i]\n    }\n\n    const prev = str.charCodeAt(i - 1)\n\n    /* istanbul ignore else */\n    if (prev < 0xD800 || prev > 0xDBFF) {\n      // Low surrogate without preceding high surrogate\n      return [' ', i]\n    }\n\n    /* istanbul ignore next */\n    throw new Error('String \"' + str + '\" reaches code believed to be unreachable; please open an issue at https://github.com/Trott/slug/issues/new')\n  }\n\n  if (typeof window !== 'undefined') {\n    if (window.btoa) {\n      base64 = function (input) {\n        return btoa(unescape(encodeURIComponent(input)))\n      }\n    } else {\n      // Polyfill for environments that don't have btoa or Buffer class (notably, React Native).\n      // Based on https://github.com/davidchambers/Base64.js/blob/a121f75bb10c8dd5d557886c4b1069b31258d230/base64.js\n      base64 = function (input) {\n        const str = unescape(encodeURIComponent(input + ''))\n        let output = ''\n        for (\n          let block, charCode, idx = 0, map = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n          str.charAt(idx | 0) || (map = '=', idx % 1);\n          output += map.charAt(63 & block >> 8 - idx % 1 * 8)\n        ) {\n          charCode = str.charCodeAt(idx += 3 / 4)\n          // This is a coherence check. The result of unescape(encodeURIComponent()) should always be\n          // characters with code points that fit into two bytes.\n          /* istanbul ignore next */\n          if (charCode > 0xFF) {\n            throw new Error(\"'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.\")\n          }\n          block = block << 8 | charCode\n        }\n        return output\n      }\n    }\n  } else {\n    base64 = function (input) {\n      return Buffer.from(input).toString('base64')\n    }\n  }\n\n  function slug (string, opts) {\n    let result = slugify(string, opts)\n    const fallback = opts && opts.fallback !== undefined ? opts.fallback : slug.defaults.fallback\n    // If output is an empty string, try slug for base64 of string.\n    if (fallback === true && result === '') {\n      // Get rid of lone surrogates.\n      let input = ''\n      for (let i = 0; i < string.length; i++) {\n        const charAndI = getWholeCharAndI(string, i)\n        i = charAndI[1]\n        input += charAndI[0]\n      }\n      result = slugify(base64(input), opts)\n    }\n    return result\n  }\n\n  const locales = {\n    // http://www.eki.ee/wgrs/rom1_bg.pdf\n    bg: { Й: 'Y', й: 'y', X: 'H', x: 'h', Ц: 'Ts', ц: 'ts', Щ: 'Sht', щ: 'sht', Ъ: 'A', ъ: 'a', Ь: 'Y', ь: 'y' },\n    // Need a reference URL for German, although this is pretty well-known.\n    de: { Ä: 'AE', ä: 'ae', Ö: 'OE', ö: 'oe', Ü: 'UE', ü: 'ue' },\n    // Need a reference URL for Serbian.\n    sr: { đ: 'dj', Đ: 'DJ' },\n    // https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/864314/ROMANIZATION_OF_UKRAINIAN.pdf\n    uk: { И: 'Y', и: 'y', Й: 'Y', й: 'y', Ц: 'Ts', ц: 'ts', Х: 'Kh', х: 'kh', Щ: 'Shch', щ: 'shch', Г: 'H', г: 'h' }\n  }\n\n  let defaultLocale = {}\n\n  function slugify (string, opts) {\n    if (typeof string !== 'string') {\n      throw new Error('slug() requires a string argument, received ' + typeof string)\n    }\n    if (typeof opts === 'string') { opts = { replacement: opts } }\n    opts = opts ? Object.assign({}, opts) : {}\n    opts.mode = opts.mode || slug.defaults.mode\n    const defaults = slug.defaults.modes[opts.mode]\n    const keys = ['replacement', 'multicharmap', 'charmap', 'remove', 'lower', 'trim']\n    for (let key, i = 0, l = keys.length; i < l; i++) {\n      key = keys[i]\n      opts[key] = (key in opts) ? opts[key] : defaults[key]\n    }\n    const localeMap = locales[opts.locale] || defaultLocale\n\n    let lengths = []\n    for (const key in opts.multicharmap) {\n      if (!Object.prototype.hasOwnProperty.call(opts.multicharmap, key)) { continue }\n\n      const len = key.length\n      if (lengths.indexOf(len) === -1) { lengths.push(len) }\n    }\n\n    // We want to match the longest string if there are multiple matches, so\n    // sort lengths in descending order.\n    lengths = lengths.sort(function (a, b) { return b - a })\n\n    const disallowedChars = opts.mode === 'rfc3986' ? /[^\\w\\s\\-.~]/ : /[^A-Za-z0-9\\s]/\n\n    let result = ''\n    for (let char, i = 0, l = string.length; i < l; i++) {\n      char = string[i]\n      let matchedMultichar = false\n      for (let j = 0; j < lengths.length; j++) {\n        const len = lengths[j]\n        const str = string.substr(i, len)\n        if (opts.multicharmap[str]) {\n          i += len - 1\n          char = opts.multicharmap[str]\n          matchedMultichar = true\n          break\n        }\n      }\n      if (!matchedMultichar) {\n        if (localeMap[char]) {\n          char = localeMap[char]\n        } else if (opts.charmap[char]) {\n          char = opts.charmap[char].replace(opts.replacement, ' ')\n        } else if (char.includes(opts.replacement)) {\n          // preserve the replacement character in case it is excluded by disallowedChars\n          char = char.replace(opts.replacement, ' ')\n        } else {\n          char = char.replace(disallowedChars, '')\n        }\n      }\n      result += char\n    }\n\n    if (opts.remove) {\n      result = result.replace(opts.remove, '')\n    }\n    if (opts.trim) {\n      result = result.trim()\n    }\n    result = result.replace(/\\s+/g, opts.replacement) // convert spaces\n    if (opts.lower) {\n      result = result.toLowerCase()\n    }\n    return result\n  }\n\n  const initialMulticharmap = {\n    // multibyte devanagari characters (hindi, sanskrit, etc.)\n    फ़: 'Fi',\n    ग़: 'Ghi',\n    ख़: 'Khi',\n    क़: 'Qi',\n    ड़: 'ugDha',\n    ढ़: 'ugDhha',\n    य़: 'Yi',\n    ज़: 'Za',\n    // hebrew\n    // Refs: http://www.eki.ee/wgrs/rom1_he.pdf\n    // Refs: https://en.wikipedia.org/wiki/Niqqud\n    בִי: 'i',\n    בֵ: 'e',\n    בֵי: 'e',\n    בֶ: 'e',\n    בַ: 'a',\n    בָ: 'a',\n    בֹ: 'o',\n    וֹ: 'o',\n    בֻ: 'u',\n    וּ: 'u',\n    בּ: 'b',\n    כּ: 'k',\n    ךּ: 'k',\n    פּ: 'p',\n    שׁ: 'sh',\n    שׂ: 's',\n    בְ: 'e',\n    חֱ: 'e',\n    חֲ: 'a',\n    חֳ: 'o',\n    בִ: 'i'\n  }\n\n  // https://github.com/django/django/blob/master/django/contrib/admin/static/admin/js/urlify.js\n  const initialCharmap = {\n    // latin\n    À: 'A',\n    Á: 'A',\n    Â: 'A',\n    Ã: 'A',\n    Ä: 'A',\n    Å: 'A',\n    Æ: 'AE',\n    Ç: 'C',\n    È: 'E',\n    É: 'E',\n    Ê: 'E',\n    Ë: 'E',\n    Ì: 'I',\n    Í: 'I',\n    Î: 'I',\n    Ï: 'I',\n    Ð: 'D',\n    Ñ: 'N',\n    Ò: 'O',\n    Ó: 'O',\n    Ô: 'O',\n    Õ: 'O',\n    Ö: 'O',\n    Ő: 'O',\n    Ø: 'O',\n    Ō: 'O',\n    Ù: 'U',\n    Ú: 'U',\n    Û: 'U',\n    Ü: 'U',\n    Ű: 'U',\n    Ý: 'Y',\n    Þ: 'TH',\n    ß: 'ss',\n    à: 'a',\n    á: 'a',\n    â: 'a',\n    ã: 'a',\n    ä: 'a',\n    å: 'a',\n    æ: 'ae',\n    ç: 'c',\n    è: 'e',\n    é: 'e',\n    ê: 'e',\n    ë: 'e',\n    ì: 'i',\n    í: 'i',\n    î: 'i',\n    ï: 'i',\n    ð: 'd',\n    ñ: 'n',\n    ò: 'o',\n    ó: 'o',\n    ô: 'o',\n    õ: 'o',\n    ö: 'o',\n    ő: 'o',\n    ø: 'o',\n    ō: 'o',\n    Œ: 'OE',\n    œ: 'oe',\n    ù: 'u',\n    ú: 'u',\n    û: 'u',\n    ü: 'u',\n    ű: 'u',\n    ý: 'y',\n    þ: 'th',\n    ÿ: 'y',\n    ẞ: 'SS',\n    // greek\n    α: 'a',\n    β: 'b',\n    γ: 'g',\n    δ: 'd',\n    ε: 'e',\n    ζ: 'z',\n    η: 'h',\n    θ: 'th',\n    ι: 'i',\n    κ: 'k',\n    λ: 'l',\n    μ: 'm',\n    ν: 'n',\n    ξ: '3',\n    ο: 'o',\n    π: 'p',\n    ρ: 'r',\n    σ: 's',\n    τ: 't',\n    υ: 'y',\n    φ: 'f',\n    χ: 'x',\n    ψ: 'ps',\n    ω: 'w',\n    ά: 'a',\n    έ: 'e',\n    ί: 'i',\n    ό: 'o',\n    ύ: 'y',\n    ή: 'h',\n    ώ: 'w',\n    ς: 's',\n    ϊ: 'i',\n    ΰ: 'y',\n    ϋ: 'y',\n    ΐ: 'i',\n    Α: 'A',\n    Β: 'B',\n    Γ: 'G',\n    Δ: 'D',\n    Ε: 'E',\n    Ζ: 'Z',\n    Η: 'H',\n    Θ: 'Th',\n    Ι: 'I',\n    Κ: 'K',\n    Λ: 'L',\n    Μ: 'M',\n    Ν: 'N',\n    Ξ: '3',\n    Ο: 'O',\n    Π: 'P',\n    Ρ: 'R',\n    Σ: 'S',\n    Τ: 'T',\n    Υ: 'Y',\n    Φ: 'F',\n    Χ: 'X',\n    Ψ: 'PS',\n    Ω: 'W',\n    Ά: 'A',\n    Έ: 'E',\n    Ί: 'I',\n    Ό: 'O',\n    Ύ: 'Y',\n    Ή: 'H',\n    Ώ: 'W',\n    Ϊ: 'I',\n    Ϋ: 'Y',\n    // turkish\n    ş: 's',\n    Ş: 'S',\n    ı: 'i',\n    İ: 'I',\n    ğ: 'g',\n    Ğ: 'G',\n    // russian\n    а: 'a',\n    б: 'b',\n    в: 'v',\n    г: 'g',\n    д: 'd',\n    е: 'e',\n    ё: 'yo',\n    ж: 'zh',\n    з: 'z',\n    и: 'i',\n    й: 'j',\n    к: 'k',\n    л: 'l',\n    м: 'm',\n    н: 'n',\n    о: 'o',\n    п: 'p',\n    р: 'r',\n    с: 's',\n    т: 't',\n    у: 'u',\n    ф: 'f',\n    х: 'h',\n    ц: 'c',\n    ч: 'ch',\n    ш: 'sh',\n    щ: 'sh',\n    ъ: 'u',\n    ы: 'y',\n    ь: '',\n    э: 'e',\n    ю: 'yu',\n    я: 'ya',\n    А: 'A',\n    Б: 'B',\n    В: 'V',\n    Г: 'G',\n    Д: 'D',\n    Е: 'E',\n    Ё: 'Yo',\n    Ж: 'Zh',\n    З: 'Z',\n    И: 'I',\n    Й: 'J',\n    К: 'K',\n    Л: 'L',\n    М: 'M',\n    Н: 'N',\n    О: 'O',\n    П: 'P',\n    Р: 'R',\n    С: 'S',\n    Т: 'T',\n    У: 'U',\n    Ф: 'F',\n    Х: 'H',\n    Ц: 'C',\n    Ч: 'Ch',\n    Ш: 'Sh',\n    Щ: 'Sh',\n    Ъ: 'U',\n    Ы: 'Y',\n    Ь: '',\n    Э: 'E',\n    Ю: 'Yu',\n    Я: 'Ya',\n    // ukranian\n    Є: 'Ye',\n    І: 'I',\n    Ї: 'Yi',\n    Ґ: 'G',\n    є: 'ye',\n    і: 'i',\n    ї: 'yi',\n    ґ: 'g',\n    // czech\n    č: 'c',\n    ď: 'd',\n    ě: 'e',\n    ň: 'n',\n    ř: 'r',\n    š: 's',\n    ť: 't',\n    ů: 'u',\n    ž: 'z',\n    Č: 'C',\n    Ď: 'D',\n    Ě: 'E',\n    Ň: 'N',\n    Ř: 'R',\n    Š: 'S',\n    Ť: 'T',\n    Ů: 'U',\n    Ž: 'Z',\n    // slovak\n    ľ: 'l',\n    ĺ: 'l',\n    ŕ: 'r',\n    Ľ: 'L',\n    Ĺ: 'L',\n    Ŕ: 'R',\n    // polish\n    ą: 'a',\n    ć: 'c',\n    ę: 'e',\n    ł: 'l',\n    ń: 'n',\n    ś: 's',\n    ź: 'z',\n    ż: 'z',\n    Ą: 'A',\n    Ć: 'C',\n    Ę: 'E',\n    Ł: 'L',\n    Ń: 'N',\n    Ś: 'S',\n    Ź: 'Z',\n    Ż: 'Z',\n    // latvian\n    ā: 'a',\n    ē: 'e',\n    ģ: 'g',\n    ī: 'i',\n    ķ: 'k',\n    ļ: 'l',\n    ņ: 'n',\n    ū: 'u',\n    Ā: 'A',\n    Ē: 'E',\n    Ģ: 'G',\n    Ī: 'I',\n    Ķ: 'K',\n    Ļ: 'L',\n    Ņ: 'N',\n    Ū: 'U',\n    // arabic\n    أ: 'a',\n    إ: 'i',\n    ب: 'b',\n    ت: 't',\n    ث: 'th',\n    ج: 'g',\n    ح: 'h',\n    خ: 'kh',\n    د: 'd',\n    ذ: 'th',\n    ر: 'r',\n    ز: 'z',\n    س: 's',\n    ش: 'sh',\n    ص: 's',\n    ض: 'd',\n    ط: 't',\n    ظ: 'th',\n    ع: 'aa',\n    غ: 'gh',\n    ف: 'f',\n    ق: 'k',\n    ك: 'k',\n    ل: 'l',\n    م: 'm',\n    ن: 'n',\n    ه: 'h',\n    و: 'o',\n    ي: 'y',\n    ء: 'aa',\n    ة: 'a',\n    // farsi\n    آ: 'a',\n    ا: 'a',\n    پ: 'p',\n    ژ: 'zh',\n    گ: 'g',\n    چ: 'ch',\n    ک: 'k',\n    ی: 'i',\n    // lithuanian\n    ė: 'e',\n    į: 'i',\n    ų: 'u',\n    Ė: 'E',\n    Į: 'I',\n    Ų: 'U',\n    // romanian\n    ț: 't',\n    Ț: 'T',\n    ţ: 't',\n    Ţ: 'T',\n    ș: 's',\n    Ș: 'S',\n    ă: 'a',\n    Ă: 'A',\n    // vietnamese\n    Ạ: 'A',\n    Ả: 'A',\n    Ầ: 'A',\n    Ấ: 'A',\n    Ậ: 'A',\n    Ẩ: 'A',\n    Ẫ: 'A',\n    Ằ: 'A',\n    Ắ: 'A',\n    Ặ: 'A',\n    Ẳ: 'A',\n    Ẵ: 'A',\n    Ẹ: 'E',\n    Ẻ: 'E',\n    Ẽ: 'E',\n    Ề: 'E',\n    Ế: 'E',\n    Ệ: 'E',\n    Ể: 'E',\n    Ễ: 'E',\n    Ị: 'I',\n    Ỉ: 'I',\n    Ĩ: 'I',\n    Ọ: 'O',\n    Ỏ: 'O',\n    Ồ: 'O',\n    Ố: 'O',\n    Ộ: 'O',\n    Ổ: 'O',\n    Ỗ: 'O',\n    Ơ: 'O',\n    Ờ: 'O',\n    Ớ: 'O',\n    Ợ: 'O',\n    Ở: 'O',\n    Ỡ: 'O',\n    Ụ: 'U',\n    Ủ: 'U',\n    Ũ: 'U',\n    Ư: 'U',\n    Ừ: 'U',\n    Ứ: 'U',\n    Ự: 'U',\n    Ử: 'U',\n    Ữ: 'U',\n    Ỳ: 'Y',\n    Ỵ: 'Y',\n    Ỷ: 'Y',\n    Ỹ: 'Y',\n    Đ: 'D',\n    ạ: 'a',\n    ả: 'a',\n    ầ: 'a',\n    ấ: 'a',\n    ậ: 'a',\n    ẩ: 'a',\n    ẫ: 'a',\n    ằ: 'a',\n    ắ: 'a',\n    ặ: 'a',\n    ẳ: 'a',\n    ẵ: 'a',\n    ẹ: 'e',\n    ẻ: 'e',\n    ẽ: 'e',\n    ề: 'e',\n    ế: 'e',\n    ệ: 'e',\n    ể: 'e',\n    ễ: 'e',\n    ị: 'i',\n    ỉ: 'i',\n    ĩ: 'i',\n    ọ: 'o',\n    ỏ: 'o',\n    ồ: 'o',\n    ố: 'o',\n    ộ: 'o',\n    ổ: 'o',\n    ỗ: 'o',\n    ơ: 'o',\n    ờ: 'o',\n    ớ: 'o',\n    ợ: 'o',\n    ở: 'o',\n    ỡ: 'o',\n    ụ: 'u',\n    ủ: 'u',\n    ũ: 'u',\n    ư: 'u',\n    ừ: 'u',\n    ứ: 'u',\n    ự: 'u',\n    ử: 'u',\n    ữ: 'u',\n    ỳ: 'y',\n    ỵ: 'y',\n    ỷ: 'y',\n    ỹ: 'y',\n    đ: 'd',\n    // kazakh\n    Ә: 'AE',\n    ә: 'ae',\n    Ғ: 'GH',\n    ғ: 'gh',\n    Қ: 'KH',\n    қ: 'kh',\n    Ң: 'NG',\n    ң: 'ng',\n    Ү: 'UE',\n    ү: 'ue',\n    Ұ: 'U',\n    ұ: 'u',\n    Һ: 'H',\n    һ: 'h',\n    Ө: 'OE',\n    ө: 'oe',\n    // serbian\n    ђ: 'dj',\n    ј: 'j',\n    љ: 'lj',\n    њ: 'nj',\n    ћ: 'c',\n    џ: 'dz',\n    Ђ: 'Dj',\n    Ј: 'j',\n    Љ: 'Lj',\n    Њ: 'Nj',\n    Ћ: 'C',\n    Џ: 'Dz',\n    ǌ: 'nj',\n    ǉ: 'lj',\n    ǋ: 'NJ',\n    ǈ: 'LJ',\n    // hindi\n    अ: 'a',\n    आ: 'aa',\n    ए: 'e',\n    ई: 'ii',\n    ऍ: 'ei',\n    ऎ: 'ae',\n    ऐ: 'ai',\n    इ: 'i',\n    ओ: 'o',\n    ऑ: 'oi',\n    ऒ: 'oii',\n    ऊ: 'uu',\n    औ: 'ou',\n    उ: 'u',\n    ब: 'B',\n    भ: 'Bha',\n    च: 'Ca',\n    छ: 'Chha',\n    ड: 'Da',\n    ढ: 'Dha',\n    फ: 'Fa',\n    ग: 'Ga',\n    घ: 'Gha',\n    ग़: 'Ghi',\n    ह: 'Ha',\n    ज: 'Ja',\n    झ: 'Jha',\n    क: 'Ka',\n    ख: 'Kha',\n    ख़: 'Khi',\n    ल: 'L',\n    ळ: 'Li',\n    ऌ: 'Li',\n    ऴ: 'Lii',\n    ॡ: 'Lii',\n    म: 'Ma',\n    न: 'Na',\n    ङ: 'Na',\n    ञ: 'Nia',\n    ण: 'Nae',\n    ऩ: 'Ni',\n    ॐ: 'oms',\n    प: 'Pa',\n    क़: 'Qi',\n    र: 'Ra',\n    ऋ: 'Ri',\n    ॠ: 'Ri',\n    ऱ: 'Ri',\n    स: 'Sa',\n    श: 'Sha',\n    ष: 'Shha',\n    ट: 'Ta',\n    त: 'Ta',\n    ठ: 'Tha',\n    द: 'Tha',\n    थ: 'Tha',\n    ध: 'Thha',\n    ड़: 'ugDha',\n    ढ़: 'ugDhha',\n    व: 'Va',\n    य: 'Ya',\n    य़: 'Yi',\n    ज़: 'Za',\n    // azerbaijani\n    ə: 'e',\n    Ə: 'E',\n    // georgian\n    ა: 'a',\n    ბ: 'b',\n    გ: 'g',\n    დ: 'd',\n    ე: 'e',\n    ვ: 'v',\n    ზ: 'z',\n    თ: 't',\n    ი: 'i',\n    კ: 'k',\n    ლ: 'l',\n    მ: 'm',\n    ნ: 'n',\n    ო: 'o',\n    პ: 'p',\n    ჟ: 'zh',\n    რ: 'r',\n    ს: 's',\n    ტ: 't',\n    უ: 'u',\n    ფ: 'p',\n    ქ: 'k',\n    ღ: 'gh',\n    ყ: 'q',\n    შ: 'sh',\n    ჩ: 'ch',\n    ც: 'ts',\n    ძ: 'dz',\n    წ: 'ts',\n    ჭ: 'ch',\n    ხ: 'kh',\n    ჯ: 'j',\n    ჰ: 'h',\n    // hebrew\n    ב: 'v',\n    גּ: 'g',\n    ג: 'g',\n    ד: 'd',\n    דּ: 'd',\n    ה: 'h',\n    ו: 'v',\n    ז: 'z',\n    ח: 'h',\n    ט: 't',\n    י: 'y',\n    כ: 'kh',\n    ך: 'kh',\n    ל: 'l',\n    מ: 'm',\n    ם: 'm',\n    נ: 'n',\n    ן: 'n',\n    ס: 's',\n    פ: 'f',\n    ף: 'f',\n    ץ: 'ts',\n    צ: 'ts',\n    ק: 'k',\n    ר: 'r',\n    תּ: 't',\n    ת: 't'\n  }\n\n  slug.charmap = Object.assign({}, initialCharmap)\n  slug.multicharmap = Object.assign({}, initialMulticharmap)\n  slug.defaults = {\n    charmap: slug.charmap,\n    mode: 'pretty',\n    modes: {\n      rfc3986: {\n        replacement: '-',\n        remove: null,\n        lower: true,\n        charmap: slug.charmap,\n        multicharmap: slug.multicharmap,\n        trim: true\n      },\n      pretty: {\n        replacement: '-',\n        remove: null,\n        lower: true,\n        charmap: slug.charmap,\n        multicharmap: slug.multicharmap,\n        trim: true\n      }\n    },\n    multicharmap: slug.multicharmap,\n    fallback: true\n  }\n\n  slug.reset = function () {\n    slug.defaults.modes.rfc3986.charmap = slug.defaults.modes.pretty.charmap = slug.charmap = slug.defaults.charmap = Object.assign({}, initialCharmap)\n    slug.defaults.modes.rfc3986.multicharmap = slug.defaults.modes.pretty.multicharmap = slug.multicharmap = slug.defaults.multicharmap = Object.assign({}, initialMulticharmap)\n    defaultLocale = ''\n  }\n\n  slug.extend = function (customMap) {\n    const keys = Object.keys(customMap)\n    const multi = {}\n    const single = {}\n    for (let i = 0; i < keys.length; i++) {\n      if (keys[i].length > 1) {\n        multi[keys[i]] = customMap[keys[i]]\n      } else {\n        single[keys[i]] = customMap[keys[i]]\n      }\n    }\n    Object.assign(slug.charmap, single)\n    Object.assign(slug.multicharmap, multi)\n  }\n\n  slug.setLocale = function (locale) {\n    defaultLocale = locales[locale] || {}\n  }\n\n  if (typeof module !== 'undefined' && module.exports) { // CommonJS\n    module.exports = slug\n  } else { // Script tag\n    root.slug = slug\n  }\n}(this))\n","import { pushToLocalJSONAPI } from '../network/genericJSONRequest';\nimport toast from 'react-hot-toast';\nimport { FormattedMessage } from 'react-intl';\n\nimport messages from '../views/messages';\n\nexport const updateEntity = (endpoint, entity, payload, token, onSuccess, onFailure) =>\n  pushToLocalJSONAPI(endpoint, JSON.stringify(payload), token, 'PATCH')\n    .then(() => {\n      toast.success(\n        <FormattedMessage\n          {...messages.entityInfoUpdationSuccess}\n          values={{\n            entity,\n          }}\n        />,\n      );\n      onSuccess?.();\n    })\n    .catch((error) => {\n      onFailure?.(error);\n    });\n","import { useEffect, useState } from 'react';\n\nexport const levels = [\n  { level: 5, tier: 'veryHigh', minActions: 50000, fee: 35000 },\n  { level: 4, tier: 'high', minActions: 25000, fee: 20000 },\n  { level: 3, tier: 'medium', minActions: 10000, fee: 7500 },\n  { level: 2, tier: 'low', minActions: 1000, fee: 2500 },\n  { level: 1, tier: 'free', minActions: 0, fee: 0 },\n];\n\nexport function useOrganisationLevel(completedActions) {\n  const currentLevel = useGetLevel(completedActions);\n  const [nextLevelThreshold, setNextLevelThreshold] = useState(1000);\n  useEffect(() => {\n    setNextLevelThreshold(\n      currentLevel && currentLevel.level < 5\n        ? levels.filter((item) => item.level === currentLevel.level + 1)[0].minActions\n        : null,\n    );\n  }, [currentLevel]);\n  return [currentLevel, nextLevelThreshold];\n}\n\nexport function useGetLevel(actions) {\n  const [currentLevel, setCurrentLevel] = useState(levels[levels.length - 1]);\n  useEffect(() => {\n    if (actions) {\n      setCurrentLevel(levels.filter((level) => actions >= level.minActions)[0]);\n    } else {\n      setCurrentLevel(levels[levels.length - 1]);\n    }\n  }, [actions]);\n  return currentLevel;\n}\n\nexport function usePredictLevel(actions, type) {\n  const newLevel = useGetLevel(actions);\n  const [predictedLevel, setPredictedLevel] = useState(newLevel);\n\n  useEffect(() => {\n    if (type === 'DISCOUNTED') {\n      const cost =\n        newLevel.level > 1 ? levels.filter((item) => item.level === newLevel.level - 1)[0].fee : 0;\n      setPredictedLevel({ ...newLevel, fee: cost });\n    } else {\n      setPredictedLevel(newLevel);\n    }\n  }, [type, newLevel]);\n  return predictedLevel;\n}\n","import { useState } from 'react';\n\nexport const useModifyMembers = (initialMembers) => {\n  const [members, setMembers] = useState(initialMembers);\n\n  const addMember = (values) => {\n    const newValues = values.filter(\n      (newUser) => !members.map((i) => i.username).includes(newUser.username),\n    );\n    setMembers(members.concat(newValues));\n  };\n\n  const removeMember = (username) => {\n    setMembers(members.filter((i) => i.username !== username));\n  };\n\n  return {\n    members,\n    setMembers,\n    addMember,\n    removeMember,\n  };\n};\n","import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport _objectSpread from '@babel/runtime/helpers/esm/objectSpread2';\nimport _slicedToArray from '@babel/runtime/helpers/esm/slicedToArray';\nimport _objectWithoutProperties from '@babel/runtime/helpers/esm/objectWithoutProperties';\nimport { useRef, useState, useEffect, useCallback } from 'react';\nimport { L as handleInputChange } from './index-a301f526.esm.js';\n\nvar _excluded = [\"defaultOptions\", \"cacheOptions\", \"loadOptions\", \"options\", \"isLoading\", \"onInputChange\", \"filterOption\"];\nfunction useAsync(_ref) {\n  var _ref$defaultOptions = _ref.defaultOptions,\n    propsDefaultOptions = _ref$defaultOptions === void 0 ? false : _ref$defaultOptions,\n    _ref$cacheOptions = _ref.cacheOptions,\n    cacheOptions = _ref$cacheOptions === void 0 ? false : _ref$cacheOptions,\n    propsLoadOptions = _ref.loadOptions;\n    _ref.options;\n    var _ref$isLoading = _ref.isLoading,\n    propsIsLoading = _ref$isLoading === void 0 ? false : _ref$isLoading,\n    propsOnInputChange = _ref.onInputChange,\n    _ref$filterOption = _ref.filterOption,\n    filterOption = _ref$filterOption === void 0 ? null : _ref$filterOption,\n    restSelectProps = _objectWithoutProperties(_ref, _excluded);\n  var propsInputValue = restSelectProps.inputValue;\n  var lastRequest = useRef(undefined);\n  var mounted = useRef(false);\n  var _useState = useState(Array.isArray(propsDefaultOptions) ? propsDefaultOptions : undefined),\n    _useState2 = _slicedToArray(_useState, 2),\n    defaultOptions = _useState2[0],\n    setDefaultOptions = _useState2[1];\n  var _useState3 = useState(typeof propsInputValue !== 'undefined' ? propsInputValue : ''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    stateInputValue = _useState4[0],\n    setStateInputValue = _useState4[1];\n  var _useState5 = useState(propsDefaultOptions === true),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isLoading = _useState6[0],\n    setIsLoading = _useState6[1];\n  var _useState7 = useState(undefined),\n    _useState8 = _slicedToArray(_useState7, 2),\n    loadedInputValue = _useState8[0],\n    setLoadedInputValue = _useState8[1];\n  var _useState9 = useState([]),\n    _useState10 = _slicedToArray(_useState9, 2),\n    loadedOptions = _useState10[0],\n    setLoadedOptions = _useState10[1];\n  var _useState11 = useState(false),\n    _useState12 = _slicedToArray(_useState11, 2),\n    passEmptyOptions = _useState12[0],\n    setPassEmptyOptions = _useState12[1];\n  var _useState13 = useState({}),\n    _useState14 = _slicedToArray(_useState13, 2),\n    optionsCache = _useState14[0],\n    setOptionsCache = _useState14[1];\n  var _useState15 = useState(undefined),\n    _useState16 = _slicedToArray(_useState15, 2),\n    prevDefaultOptions = _useState16[0],\n    setPrevDefaultOptions = _useState16[1];\n  var _useState17 = useState(undefined),\n    _useState18 = _slicedToArray(_useState17, 2),\n    prevCacheOptions = _useState18[0],\n    setPrevCacheOptions = _useState18[1];\n  if (cacheOptions !== prevCacheOptions) {\n    setOptionsCache({});\n    setPrevCacheOptions(cacheOptions);\n  }\n  if (propsDefaultOptions !== prevDefaultOptions) {\n    setDefaultOptions(Array.isArray(propsDefaultOptions) ? propsDefaultOptions : undefined);\n    setPrevDefaultOptions(propsDefaultOptions);\n  }\n  useEffect(function () {\n    mounted.current = true;\n    return function () {\n      mounted.current = false;\n    };\n  }, []);\n  var loadOptions = useCallback(function (inputValue, callback) {\n    if (!propsLoadOptions) return callback();\n    var loader = propsLoadOptions(inputValue, callback);\n    if (loader && typeof loader.then === 'function') {\n      loader.then(callback, function () {\n        return callback();\n      });\n    }\n  }, [propsLoadOptions]);\n  useEffect(function () {\n    if (propsDefaultOptions === true) {\n      loadOptions(stateInputValue, function (options) {\n        if (!mounted.current) return;\n        setDefaultOptions(options || []);\n        setIsLoading(!!lastRequest.current);\n      });\n    }\n    // NOTE: this effect is designed to only run when the component mounts,\n    // so we don't want to include any hook dependencies\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var onInputChange = useCallback(function (newValue, actionMeta) {\n    var inputValue = handleInputChange(newValue, actionMeta, propsOnInputChange);\n    if (!inputValue) {\n      lastRequest.current = undefined;\n      setStateInputValue('');\n      setLoadedInputValue('');\n      setLoadedOptions([]);\n      setIsLoading(false);\n      setPassEmptyOptions(false);\n      return;\n    }\n    if (cacheOptions && optionsCache[inputValue]) {\n      setStateInputValue(inputValue);\n      setLoadedInputValue(inputValue);\n      setLoadedOptions(optionsCache[inputValue]);\n      setIsLoading(false);\n      setPassEmptyOptions(false);\n    } else {\n      var request = lastRequest.current = {};\n      setStateInputValue(inputValue);\n      setIsLoading(true);\n      setPassEmptyOptions(!loadedInputValue);\n      loadOptions(inputValue, function (options) {\n        if (!mounted) return;\n        if (request !== lastRequest.current) return;\n        lastRequest.current = undefined;\n        setIsLoading(false);\n        setLoadedInputValue(inputValue);\n        setLoadedOptions(options || []);\n        setPassEmptyOptions(false);\n        setOptionsCache(options ? _objectSpread(_objectSpread({}, optionsCache), {}, _defineProperty({}, inputValue, options)) : optionsCache);\n      });\n    }\n  }, [cacheOptions, loadOptions, loadedInputValue, optionsCache, propsOnInputChange]);\n  var options = passEmptyOptions ? [] : stateInputValue && loadedInputValue ? loadedOptions : defaultOptions || [];\n  return _objectSpread(_objectSpread({}, restSelectProps), {}, {\n    options: options,\n    isLoading: isLoading || propsIsLoading,\n    onInputChange: onInputChange,\n    filterOption: filterOption\n  });\n}\n\nexport { useAsync as u };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { forwardRef } from 'react';\nimport { S as Select } from '../../dist/Select-49a62830.esm.js';\nimport { u as useStateManager } from '../../dist/useStateManager-7e1e8489.esm.js';\nimport { u as useAsync } from '../../dist/useAsync-ba7c6b77.esm.js';\nexport { u as useAsync } from '../../dist/useAsync-ba7c6b77.esm.js';\nimport '@babel/runtime/helpers/objectSpread2';\nimport '@babel/runtime/helpers/classCallCheck';\nimport '@babel/runtime/helpers/createClass';\nimport '@babel/runtime/helpers/inherits';\nimport '@babel/runtime/helpers/createSuper';\nimport '@babel/runtime/helpers/toConsumableArray';\nimport '../../dist/index-a301f526.esm.js';\nimport '@emotion/react';\nimport '@babel/runtime/helpers/slicedToArray';\nimport '@babel/runtime/helpers/objectWithoutProperties';\nimport '@babel/runtime/helpers/typeof';\nimport '@babel/runtime/helpers/taggedTemplateLiteral';\nimport '@babel/runtime/helpers/defineProperty';\nimport 'react-dom';\nimport '@floating-ui/dom';\nimport 'use-isomorphic-layout-effect';\nimport 'memoize-one';\n\nvar AsyncSelect = /*#__PURE__*/forwardRef(function (props, ref) {\n  var stateManagedProps = useAsync(props);\n  var selectProps = useStateManager(stateManagedProps);\n  return /*#__PURE__*/React.createElement(Select, _extends({\n    ref: ref\n  }, selectProps));\n});\nvar AsyncSelect$1 = AsyncSelect;\n\nexport { AsyncSelect$1 as default };\n","import React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\nimport { CustomButton } from '../button';\n\nexport function EditModeControl({ editMode, switchModeFn }: Object) {\n  if (!editMode) {\n    return (\n      <CustomButton\n        className=\"pv2 ph3 ba b--red white bg-red fr mv1\"\n        onClick={() => switchModeFn(!editMode)}\n      >\n        <FormattedMessage {...messages.edit} />\n      </CustomButton>\n    );\n  } else {\n    return <></>;\n  }\n}\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { FormattedMessage } from 'react-intl';\nimport AsyncSelect from 'react-select/async';\n\nimport messages from './messages';\nimport { UserAvatar } from '../user/avatar';\nimport { EditModeControl } from './editMode';\nimport { Button } from '../button';\nimport { SwitchToggle } from '../formInputs';\nimport { fetchLocalJSONAPI, pushToLocalJSONAPI } from '../../network/genericJSONRequest';\nimport { Alert } from '../alert';\nimport { useOnClickOutside } from '../../hooks/UseOnClickOutside';\n\nexport function Members({\n  addMembers,\n  removeMembers,\n  saveMembersFn,\n  resetMembersFn,\n  members,\n  type,\n  memberJoinTeamError,\n  setMemberJoinTeamError,\n  managerJoinTeamError,\n  setManagerJoinTeamError,\n}: Object) {\n  const token = useSelector((state) => state.auth.token);\n  const [editMode, setEditMode] = useState(false);\n  const [membersBackup, setMembersBackup] = useState(null);\n  const selectPlaceHolder = <FormattedMessage {...messages.searchUsers} />;\n  let title = <FormattedMessage {...messages.managers} />;\n  if (type === 'members') {\n    title = <FormattedMessage {...messages.members} />;\n  }\n  const errorRef = useRef(null);\n  useOnClickOutside(errorRef, () => {\n    setMemberJoinTeamError?.(null) || setManagerJoinTeamError?.(null);\n  });\n\n  // store the first array of members in order to restore it if the user cancels an\n  // add and remove members operation\n  useEffect(() => {\n    if (membersBackup === null && editMode) {\n      setMembersBackup(members);\n    }\n  }, [members, editMode, setMembersBackup, membersBackup]);\n\n  const submitMembers = () => {\n    if (saveMembersFn) {\n      saveMembersFn();\n    }\n    setMembersBackup(members);\n    setEditMode(false);\n  };\n  const promiseOptions = (inputValue) =>\n    new Promise((resolve) => {\n      setTimeout(async () => {\n        const result = await fetchLocalJSONAPI(`users/?username=${inputValue}`, token);\n        resolve(result.users);\n      }, 1000);\n    });\n\n  const doesMemberExistInTeam = (username) =>\n    members.some((member) => member.username === username);\n\n  const formatOptionLabel = (member, menu) => (\n    <div className=\"flex justify-between\">\n      <div>{member.username}</div>\n      {doesMemberExistInTeam(member.username) && menu.context === 'menu' ? (\n        <div className=\"f7 lh-copy gray\">\n          <FormattedMessage {...messages.alreadyInTeam} />\n        </div>\n      ) : (\n        menu.context !== 'value' && <button className=\"bg-red white br2 pointer bn f7\">Add</button>\n      )}\n    </div>\n  );\n\n  return (\n    <>\n      <div className={`bg-white b--grey-light pa4 ${editMode ? 'bt bl br' : 'ba'}`}>\n        <div className=\"cf db\">\n          <h3 className=\"f3 blue-dark mv2 fw6 fl\">{title}</h3>\n          <EditModeControl editMode={editMode} switchModeFn={setEditMode} />\n        </div>\n        <div className=\"cf mb1\">\n          {editMode && (\n            <AsyncSelect\n              classNamePrefix=\"react-select\"\n              autoFocus\n              isMulti\n              cacheOptions\n              placeholder={selectPlaceHolder}\n              isClearable={false}\n              isOptionDisabled={(option) => doesMemberExistInTeam(option.username)}\n              formatOptionLabel={(option, menu) => formatOptionLabel(option, menu)}\n              getOptionLabel={(option) => option.username}\n              getOptionValue={(option) => option.username}\n              noOptionsMessage={({ inputValue }) =>\n                inputValue ? <FormattedMessage {...messages.noOptions} /> : null\n              }\n              loadOptions={promiseOptions}\n              onChange={(values) => addMembers(values || [])}\n              className=\"z-2\"\n            />\n          )}\n        </div>\n        <div className=\"cf db mt3\">\n          {members.map((user) => (\n            <UserAvatar\n              key={user.username}\n              username={user.username}\n              picture={user.pictureUrl}\n              size=\"large\"\n              colorClasses=\"white bg-blue-grey mv1\"\n              removeFn={members.length > 1 && removeMembers}\n              editMode={members.length > 1 && editMode}\n            />\n          ))}\n          {members.length === 0 && (\n            <div className=\"tc mt3\">\n              <FormattedMessage {...messages.noMembers} />\n            </div>\n          )}\n          {(memberJoinTeamError || managerJoinTeamError) && (\n            <div className=\"cf pv2\" ref={errorRef}>\n              <Alert type=\"error\">\n                <FormattedMessage\n                  {...messages[`${memberJoinTeamError || managerJoinTeamError}Error`]}\n                />\n              </Alert>\n            </div>\n          )}\n        </div>\n      </div>\n      {editMode && (\n        <div className=\"cf pt0\">\n          <div className=\"w-70-l w-50 fl tr dib bg-grey-light\">\n            <Button\n              className=\"blue-dark bg-grey-light h3\"\n              onClick={() => {\n                resetMembersFn(membersBackup || []);\n                setEditMode(false);\n              }}\n            >\n              <FormattedMessage {...messages.cancel} />\n            </Button>\n          </div>\n          <div className=\"w-30-l w-50 fr dib\">\n            <Button className=\"white bg-red h3 w-100\" onClick={() => submitMembers()}>\n              <FormattedMessage {...messages.done} />\n            </Button>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n\nexport function JoinRequests({\n  requests,\n  teamId,\n  addMembers,\n  updateRequests,\n  managers,\n  updateTeam,\n  joinMethod,\n  members,\n}: Object) {\n  const token = useSelector((state) => state.auth.token);\n  const { username: loggedInUsername } = useSelector((state) => state.auth.userDetails);\n  const showJoinRequestSwitch =\n    joinMethod === 'BY_REQUEST' &&\n    managers?.filter(\n      (manager) => manager.username === loggedInUsername && manager.function === 'MANAGER',\n    ).length > 0;\n  const [isChecked, setIsChecked] = useState(false);\n\n  useEffect(() => {\n    const isJoinRequestEnabled = managers.find(\n      (manager) => manager.username === loggedInUsername,\n    )?.joinRequestNotifications;\n    setIsChecked(isJoinRequestEnabled);\n  }, [loggedInUsername, managers]);\n\n  const acceptRejectRequest = useCallback(\n    (user, action) => {\n      const payload = JSON.stringify({\n        username: user.username,\n        role: 'MEMBER',\n        type: 'join-response',\n        action: action,\n      });\n      pushToLocalJSONAPI(`teams/${teamId}/actions/join/`, payload, token, 'PATCH').then((res) => {\n        if (action === 'accept') {\n          addMembers([user]);\n        }\n        updateRequests(requests.filter((i) => i.username !== user.username));\n      });\n    },\n    [teamId, requests, updateRequests, addMembers, token],\n  );\n\n  const handleJoinRequestNotificationsChange = (e) => {\n    const { checked } = e.target;\n    setIsChecked(checked);\n    let member = managers.find((member) => member.username === loggedInUsername);\n    Object.assign(member, {\n      joinRequestNotifications: checked,\n      active: checked,\n    });\n    updateTeam({\n      members: [member, ...members.filter((member) => member.username !== loggedInUsername)],\n    });\n  };\n\n  return (\n    <div className=\"bg-white b--grey-light pa4 ba blue-dark\">\n      <div className=\"cf db\">\n        <h3 className=\"f3 blue-dark mt0 fw6 fl\">\n          <FormattedMessage {...messages.joinRequests} />\n        </h3>\n      </div>\n      {showJoinRequestSwitch && (\n        <div className=\"flex justify-between blue-grey\">\n          <FormattedMessage {...messages.newJoinRequestNotification} />\n          <div className=\"fl ml5\">\n            <SwitchToggle\n              isChecked={isChecked}\n              onChange={(e) => handleJoinRequestNotificationsChange(e)}\n              labelPosition=\"right\"\n            />\n          </div>\n        </div>\n      )}\n      <div className=\"cf db mt3\">\n        {requests.map((user) => (\n          <div className=\"cf db pt2\" key={user.username}>\n            <div className=\"fl pt1\">\n              <UserAvatar\n                username={user.username}\n                picture={user.pictureUrl}\n                colorClasses=\"white bg-blue-grey\"\n              />\n              <Link to={`/users/${user.username}`} className=\"v-mid link blue-dark\">\n                <span>{user.username}</span>\n              </Link>\n            </div>\n            <div className=\"fr\">\n              <Button\n                className=\"pr2 blue-dark bg-white\"\n                onClick={() => acceptRejectRequest(user, 'reject')}\n              >\n                <FormattedMessage {...messages.reject} />\n              </Button>\n              <Button\n                className=\"pr2 bg-red white\"\n                onClick={() => acceptRejectRequest(user, 'accept')}\n              >\n                <FormattedMessage {...messages.accept} />\n              </Button>\n            </div>\n          </div>\n        ))}\n        {requests.length === 0 && (\n          <div className=\"tc mt3\">\n            <FormattedMessage {...messages.noRequests} />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { TextRow, RoundShape, RectShape } from 'react-placeholder/lib/placeholders';\n\nexport const organisationCardPlaceholderTemplate = () => (_n, i) =>\n  (\n    <div className=\"w-50-l w-100 fl pr3\" key={i}>\n      <div className=\"bg-white blue-dark mv2 pb4 dib w-100 ba br1 b--grey-light shadow-hover\">\n        <div className=\"w-25 h4 fl pa3\">\n          <RectShape\n            className=\"show-loading-animation\"\n            style={{ width: '100%', height: 100 }}\n            color=\"#DDD\"\n          />\n        </div>\n        <div className=\"w-75 fl pl3\">\n          <TextRow className=\"show-loading-animation mb4\" color=\"#CCC\" style={{ width: '50%' }} />\n          <TextRow className=\"show-loading-animation mb2\" color=\"#CCC\" style={{ width: '50%' }} />\n          <div className=\"dib\">\n            {[...Array(2)].map((_, i) => (\n              <RoundShape\n                key={i}\n                className=\"show-loading-animation dib mt1\"\n                style={{ width: 25, height: 25 }}\n                color=\"#DDD\"\n              />\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\nexport const nCardPlaceholders = (N) => {\n  return [...Array(N).keys()].map(organisationCardPlaceholderTemplate());\n};\n","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { Form, Field } from 'react-final-form';\nimport Select from 'react-select';\nimport ReactPlaceholder from 'react-placeholder';\nimport { FormattedMessage, useIntl } from 'react-intl';\n\nimport messages from './messages';\nimport viewsMessages from '../../views/messages';\nimport { IMAGE_UPLOAD_SERVICE } from '../../config';\nimport { useUploadImage } from '../../hooks/UseUploadImage';\nimport { levels } from '../../hooks/UseOrganisationLevel';\nimport { Management } from './management';\nimport { InternalLinkIcon, ClipboardIcon } from '../svgIcons';\nimport { Button } from '../button';\nimport { UserAvatarList } from '../user/avatar';\nimport { nCardPlaceholders } from './organisationsPlaceholder';\nimport { Alert } from '../alert';\nimport { TextField } from '../formInputs';\n\nexport function OrgsManagement({\n  organisations,\n  isOrgManager,\n  isAdmin,\n  userOrgsOnly,\n  setUserOrgsOnly,\n  isOrganisationsFetched,\n}: Object) {\n  const [searchQuery, setSearchQuery] = useState('');\n\n  const onSearchInputChange = (e) => setSearchQuery(e.target.value);\n\n  const filteredOrganisations = organisations?.filter((organisation) =>\n    organisation.name.toLowerCase().includes(searchQuery.toLowerCase()),\n  );\n\n  return (\n    <Management\n      title={\n        <FormattedMessage\n          {...messages.manage}\n          values={{ entity: <FormattedMessage {...messages.organisations} /> }}\n        />\n      }\n      showAddButton={isAdmin}\n      managementView={true}\n      userOnlyLabel={<FormattedMessage {...messages.myOrganisations} />}\n      userOnly={userOrgsOnly}\n      setUserOnly={setUserOrgsOnly}\n      isAdmin={isAdmin}\n    >\n      <ReactPlaceholder\n        showLoadingAnimation={true}\n        customPlaceholder={nCardPlaceholders(4)}\n        delay={10}\n        ready={isOrganisationsFetched}\n      >\n        <div className=\"w-20-l w-25-m\">\n          <TextField\n            value={searchQuery}\n            placeholderMsg={messages.searchOrganisations}\n            onChange={onSearchInputChange}\n            onCloseIconClick={() => setSearchQuery('')}\n          />\n        </div>\n        {isOrgManager ? (\n          filteredOrganisations?.length ? (\n            filteredOrganisations.map((org, n) => <OrganisationCard details={org} key={n} />)\n          ) : (\n            <div className=\"pb5\">\n              <FormattedMessage {...messages.noOrganisationsFound} />\n            </div>\n          )\n        ) : (\n          <div>\n            <FormattedMessage {...messages.notAllowed} />\n          </div>\n        )}\n      </ReactPlaceholder>\n    </Management>\n  );\n}\n\nexport function OrganisationCard({ details }: Object) {\n  return (\n    <Link to={`${details.organisationId}/`} className=\"w-50-l w-100 fl pr3\">\n      <div className=\"bg-white blue-dark mv2 pb4 dib w-100 ba br1 b--grey-light shadow-hover\">\n        <div className=\"w-25 h4 fl pa3\">\n          {details.logo && <img src={details.logo} alt={`${details.name} logo`} className=\"w-70\" />}\n        </div>\n        <div className=\"w-75 fl pl3\">\n          <div className=\"w-100 dib\">\n            <h3 className=\"barlow-condensed ttu f3 mb2 mt2 truncate\" lang=\"en\">\n              {details.name}\n            </h3>\n          </div>\n          <div className=\"w-100 dib pt2 fl\">\n            <h4 className=\"ttu blue-grey f6\">\n              <FormattedMessage {...messages.managers} />\n            </h4>\n            <div className=\"dib\">\n              <UserAvatarList\n                size=\"small\"\n                textColor=\"white\"\n                users={details.managers}\n                maxLength={12}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </Link>\n  );\n}\n\nexport function OrganisationForm(props) {\n  return (\n    <Form\n      onSubmit={(values) => props.updateOrg(values)}\n      initialValues={props.organisation}\n      render={({\n        handleSubmit,\n        dirty,\n        submitSucceeded,\n        dirtySinceLastSubmit,\n        form,\n        submitting,\n        values,\n      }) => {\n        const dirtyForm = submitSucceeded ? dirtySinceLastSubmit && dirty : dirty;\n        return (\n          <div className=\"blue-grey mb3\">\n            <div className={`bg-white b--grey-light pa4 ${dirtyForm ? 'bt bl br' : 'ba'}`}>\n              <h3 className=\"f3 fw6 dib blue-dark mv0\">\n                <FormattedMessage {...messages.orgInfo} />\n              </h3>\n              <form id=\"org-form\" onSubmit={handleSubmit}>\n                <fieldset className=\"bn pa0\" disabled={submitting}>\n                  <OrgInformation\n                    hasSlug={props.organisation && props.organisation.slug}\n                    formState={values}\n                  />\n                </fieldset>\n              </form>\n              {props.errorMessage && (\n                <div className=\"mt2\">\n                  <Alert type=\"error\" compact>\n                    {viewsMessages[`orgCreation${props.errorMessage}Error`] ? (\n                      <FormattedMessage\n                        {...viewsMessages[`orgCreation${props.errorMessage}Error`]}\n                      />\n                    ) : (\n                      <FormattedMessage {...viewsMessages[`errorFallback`]} />\n                    )}\n                  </Alert>\n                </div>\n              )}\n            </div>\n            {dirtyForm && (\n              <div className=\"cf pt0 h3\">\n                <div className=\"w-70-l w-50 fl tr dib bg-grey-light\">\n                  <Button className=\"blue-dark bg-grey-light h3\" onClick={() => form.restart()}>\n                    <FormattedMessage {...messages.cancel} />\n                  </Button>\n                </div>\n                <div className=\"w-30-l w-50 h-100 fr dib\">\n                  <Button\n                    onClick={() => handleSubmit()}\n                    className=\"w-100 h-100 bg-red white\"\n                    disabledClassName=\"bg-red o-50 white w-100 h-100\"\n                  >\n                    <FormattedMessage {...messages.save} />\n                  </Button>\n                </div>\n              </div>\n            )}\n          </div>\n        );\n      }}\n    ></Form>\n  );\n}\n\nconst TYPE_OPTIONS = [\n  { label: <FormattedMessage {...messages.free} />, value: 'FREE' },\n  { label: <FormattedMessage {...messages.discounted} />, value: 'DISCOUNTED' },\n  { label: <FormattedMessage {...messages.defaultFee} />, value: 'FULL_FEE' },\n];\nconst TIER_OPTIONS = levels.map((level) => ({\n  label: <FormattedMessage {...messages[`${level.tier}Tier`]} />,\n  value: level.level,\n}));\n\nexport function OrgInformation({ hasSlug, formState }) {\n  const token = useSelector((state) => state.auth.token);\n  const userDetails = useSelector((state) => state.auth.userDetails);\n  const [uploadError, uploading, uploadImg] = useUploadImage();\n  const intl = useIntl();\n  //eslint-disable-next-line\n  const labelClasses = 'db pt3 pb2';\n  const fieldClasses = 'blue-grey w-100 pv3 ph2 input-reset ba b--grey-light bg-transparent';\n\n  const getTypePlaceholder = (value) => {\n    const selected = TYPE_OPTIONS.filter((type) => value === type.value);\n    return selected.length ? selected[0].label : <FormattedMessage {...messages.selectType} />;\n  };\n\n  const getTierPlaceholder = (value) => {\n    const selected = TIER_OPTIONS.filter((tier) => value === tier.value);\n    return selected.length ? selected[0].label : <FormattedMessage {...messages.selectTier} />;\n  };\n\n  const validateRequired = (value) =>\n    value ? undefined : <FormattedMessage {...messages.requiredField} />;\n\n  const handleCopyToClipboard = (text) => navigator.clipboard.writeText(text);\n\n  return (\n    <>\n      <div className=\"cf\">\n        <label className={labelClasses}>\n          <FormattedMessage {...messages.name} />\n        </label>\n        <Field name=\"name\" component=\"input\" type=\"text\" className={fieldClasses} required />\n      </div>\n      {hasSlug ? (\n        <div className=\"cf\">\n          <label className={labelClasses}>\n            <FormattedMessage {...messages.publicUrl} />\n          </label>\n          <Field name=\"slug\" component=\"input\" className={fieldClasses} required>\n            {(props) => (\n              <>\n                <pre className=\"f6 di bg-tan blue-grey pa2\">/organisations/{props.input.value}</pre>\n                <Link\n                  to={`/organisations/${props.input.value}/`}\n                  className=\"link blue-light ph2 hover-blue-dark\"\n                >\n                  <InternalLinkIcon className=\"h1 w1 v-mid\" />\n                </Link>\n                <span\n                  className=\"pointer blue-light hover-blue-dark\"\n                  title={intl.formatMessage(messages.copyPublicUrl)}\n                >\n                  <ClipboardIcon\n                    role=\"button\"\n                    className=\"h1 w1 ph1 v-mid\"\n                    onClick={() =>\n                      handleCopyToClipboard(\n                        `${window.location.origin}/organisations/${props.input.value}/`,\n                      )\n                    }\n                  />\n                </span>\n              </>\n            )}\n          </Field>\n        </div>\n      ) : (\n        <></>\n      )}\n      <div className=\"cf\">\n        <label className={labelClasses}>\n          <FormattedMessage {...messages.website} />\n        </label>\n        <Field name=\"url\" component=\"input\" type=\"text\" className={fieldClasses} />\n      </div>\n      <div className=\"cf\">\n        <label className={labelClasses}>\n          <FormattedMessage {...messages.description} />\n        </label>\n        <Field name=\"description\" component=\"textarea\" className={fieldClasses} />\n      </div>\n      {userDetails &&\n        userDetails.role === 'ADMIN' && ( // only admin users can edit the org type and subscribed tier\n          <>\n            <div className=\"cf\">\n              <label className={labelClasses}>\n                <FormattedMessage {...messages.type} />\n              </label>\n              <Field name=\"type\" className={fieldClasses} validate={validateRequired}>\n                {(props) => (\n                  <>\n                    <Select\n                      classNamePrefix=\"react-select\"\n                      isClearable={false}\n                      options={TYPE_OPTIONS}\n                      placeholder={getTypePlaceholder(props.input.value)}\n                      onChange={(value) => props.input.onChange(value.value)}\n                      className=\"z-5\"\n                    />\n                    {props.meta.error && props.meta.touched && (\n                      <span className=\"mt3 red\">{props.meta.error}</span>\n                    )}\n                  </>\n                )}\n              </Field>\n            </div>\n            {['DISCOUNTED', 'FULL_FEE'].includes(formState.type) && (\n              <div className=\"cf\">\n                <label className={labelClasses}>\n                  <FormattedMessage {...messages.subscribedTier} />\n                </label>\n                <Field name=\"subscriptionTier\" className={fieldClasses} validate={validateRequired}>\n                  {(props) => (\n                    <>\n                      <Select\n                        classNamePrefix=\"react-select\"\n                        isClearable={false}\n                        options={TIER_OPTIONS}\n                        placeholder={getTierPlaceholder(props.input.value)}\n                        onChange={(value) => props.input.onChange(value.value)}\n                        className=\"z-4\"\n                      />\n                      {props.meta.error && props.meta.touched && (\n                        <span className=\"mt3 red\">{props.meta.error}</span>\n                      )}\n                    </>\n                  )}\n                </Field>\n              </div>\n            )}\n          </>\n        )}\n      <div className=\"cf\">\n        <label className={labelClasses}>\n          <FormattedMessage {...messages.image} />\n        </label>\n        {IMAGE_UPLOAD_SERVICE ? (\n          <Field name=\"logo\" className={fieldClasses}>\n            {(fieldProps) => (\n              <>\n                <input\n                  type=\"file\"\n                  multiple={false}\n                  accept=\"image/png, image/jpeg, image/webp\"\n                  onChange={(e) => uploadImg(e.target.files[0], fieldProps.input.onChange, token)}\n                />\n                <ReactPlaceholder\n                  type=\"media\"\n                  className=\"pt2\"\n                  rows={0}\n                  showLoadingAnimation={true}\n                  ready={!uploading}\n                >\n                  <img\n                    src={fieldProps.input.value}\n                    alt={fieldProps.input.value}\n                    className=\"h3 db pt2\"\n                  />\n                  {uploadError && <FormattedMessage {...messages.imageUploadFailed} />}\n                </ReactPlaceholder>\n              </>\n            )}\n          </Field>\n        ) : (\n          <Field name=\"logo\" component=\"input\" type=\"text\" className={fieldClasses} />\n        )}\n      </div>\n    </>\n  );\n}\n\nexport function CreateOrgInfo({ formState }) {\n  return (\n    <div className=\"bg-white b--grey-light ba pa4 mb3\">\n      <h3 className=\"f3 blue-dark mv0 fw6\">\n        <FormattedMessage {...messages.orgInfo} />\n      </h3>\n      <OrgInformation hasSlug={false} formState={formState} />\n    </div>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Link, useNavigate, useParams } from 'react-router-dom';\nimport ReactPlaceholder from 'react-placeholder';\nimport { FormattedMessage } from 'react-intl';\nimport { Form } from 'react-final-form';\nimport toast from 'react-hot-toast';\nimport { useQueryParams, BooleanParam } from 'use-query-params';\n\nimport messages from './messages';\nimport { useFetch } from '../hooks/UseFetch';\nimport { useModifyMembers } from '../hooks/UseModifyMembers';\nimport { useEditOrgAllowed } from '../hooks/UsePermissions';\nimport { pushToLocalJSONAPI, fetchLocalJSONAPI } from '../network/genericJSONRequest';\nimport { Members } from '../components/teamsAndOrgs/members';\nimport { Teams } from '../components/teamsAndOrgs/teams';\nimport { Projects } from '../components/teamsAndOrgs/projects';\nimport {\n  OrganisationForm,\n  CreateOrgInfo,\n  OrgsManagement,\n} from '../components/teamsAndOrgs/organisations';\nimport { FormSubmitButton, CustomButton } from '../components/button';\nimport { ChartLineIcon } from '../components/svgIcons';\nimport { DeleteModal } from '../components/deleteModal';\nimport { useSetTitleTag } from '../hooks/UseMetaTags';\nimport { Alert } from '../components/alert';\nimport { updateEntity } from '../utils/management';\n\nexport function ListOrganisations() {\n  useSetTitleTag('Manage organizations');\n  const token = useSelector((state) => state.auth.token);\n  const userDetails = useSelector((state) => state.auth.userDetails);\n  const isOrgManager = useSelector(\n    (state) => state.auth.organisations && state.auth.organisations.length > 0,\n  );\n  const [organisations, setOrganisations] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [query, setQuery] = useQueryParams({\n    showAll: BooleanParam,\n  });\n  const [userOrgsOnly, setUserOrgsOnly] = useState(Boolean(!query.showAll));\n\n  useEffect(() => {\n    setQuery({ ...query, showAll: userOrgsOnly === false ? true : undefined });\n    //eslint-disable-next-line\n  }, [userOrgsOnly]);\n\n  useEffect(() => {\n    if (token && userDetails?.id) {\n      setLoading(true);\n      const queryParam = `${userOrgsOnly ? `?manager_user_id=${userDetails.id}` : ''}`;\n      fetchLocalJSONAPI(`organisations/${queryParam}`, token)\n        .then((orgs) => {\n          setOrganisations(orgs.organisations);\n          setLoading(false);\n        })\n        .catch((err) => setError(err));\n    }\n  }, [userDetails, token, userOrgsOnly]);\n\n  return (\n    <OrgsManagement\n      organisations={organisations}\n      userOrgsOnly={userOrgsOnly}\n      setUserOrgsOnly={setUserOrgsOnly}\n      isOrgManager={userDetails.role === 'ADMIN' || isOrgManager}\n      isAdmin={userDetails.role === 'ADMIN'}\n      isOrganisationsFetched={!loading && !error}\n    />\n  );\n}\n\nexport function CreateOrganisation() {\n  useSetTitleTag('Create new organization');\n  const navigate = useNavigate();\n  const userDetails = useSelector((state) => state.auth.userDetails);\n  const token = useSelector((state) => state.auth.token);\n  const {\n    members: managers,\n    setMembers: setManagers,\n    addMember: addManagers,\n    removeMember: removeManagers,\n  } = useModifyMembers([{ username: userDetails.username, pictureUrl: userDetails.pictureUrl }]);\n  const [error, setError] = useState(null);\n\n  const createOrg = (payload) => {\n    payload.managers = managers.map((user) => user.username);\n    pushToLocalJSONAPI('organisations/', JSON.stringify(payload), token, 'POST')\n      .then((result) => {\n        toast.success(\n          <FormattedMessage\n            {...messages.entityCreationSuccess}\n            values={{\n              entity: 'organization',\n            }}\n          />,\n        );\n        navigate(`/manage/organisations/${result.organisationId}`);\n      })\n      .catch((err) => {\n        setError(err.message);\n      });\n  };\n\n  return (\n    <Form\n      onSubmit={(values) => createOrg(values)}\n      render={({ handleSubmit, pristine, form, submitting, values }) => {\n        return (\n          <form onSubmit={handleSubmit} className=\"blue-grey\">\n            <div className=\"cf pv4 pb5\">\n              <h3 className=\"f2 mb3 ttu blue-dark fw7 ma0 barlow-condensed\">\n                <FormattedMessage {...messages.newOrganisation} />\n              </h3>\n              <div className=\"w-40-l w-100\">\n                <CreateOrgInfo formState={values} />\n                <div className=\"cf pv2 ml2\">\n                  {error && (\n                    <Alert type=\"error\" compact>\n                      {messages[`orgCreation${error}Error`] ? (\n                        <FormattedMessage {...messages[`orgCreation${error}Error`]} />\n                      ) : (\n                        <FormattedMessage\n                          {...messages.entityCreationFailure}\n                          values={{\n                            entity: 'organization',\n                          }}\n                        />\n                      )}\n                    </Alert>\n                  )}\n                </div>\n                <Members\n                  addMembers={addManagers}\n                  removeMembers={removeManagers}\n                  members={managers}\n                  resetMembersFn={setManagers}\n                  creationMode={true}\n                />\n              </div>\n            </div>\n            <div className=\"bottom-0 right-0 left-0 cf bg-white h3 fixed\">\n              <div className=\"w-80-ns w-60-m w-50 h-100 fl tr\">\n                <Link to={'../'}>\n                  <CustomButton className=\"bg-white mr5 pr2 h-100 bn bg-white blue-dark\">\n                    <FormattedMessage {...messages.cancel} />\n                  </CustomButton>\n                </Link>\n              </div>\n              <div className=\"w-20-l w-40-m w-50 h-100 fr\">\n                <FormSubmitButton\n                  disabled={submitting || pristine}\n                  className=\"w-100 h-100 bg-red white\"\n                  disabledClassName=\"bg-red o-50 white w-100 h-100\"\n                >\n                  <FormattedMessage {...messages.createOrganisation} />\n                </FormSubmitButton>\n              </div>\n            </div>\n          </form>\n        );\n      }}\n    ></Form>\n  );\n}\n\nexport function EditOrganisation() {\n  const { id } = useParams();\n  const userDetails = useSelector((state) => state.auth.userDetails);\n  const token = useSelector((state) => state.auth.token);\n  const [initManagers, setInitManagers] = useState(false);\n  const {\n    members: managers,\n    setMembers: setManagers,\n    addMember: addManager,\n    removeMember: removeManager,\n  } = useModifyMembers([{ username: userDetails.username, pictureUrl: userDetails.pictureUrl }]);\n  const [error, loading, organisation] = useFetch(`organisations/${id}/`, id);\n  const [isUserAllowed] = useEditOrgAllowed(organisation);\n  const [projectsError, projectsLoading, projects] = useFetch(\n    `projects/?organisationId=${id}&omitMapResults=true&projectStatuses=PUBLISHED,DRAFT,ARCHIVED`,\n    id,\n  );\n  const [errorMessage, setErrorMessage] = useState(null);\n  useSetTitleTag(`Edit ${organisation.name}`);\n\n  useEffect(() => {\n    if (!initManagers && organisation && organisation.managers) {\n      setManagers(organisation.managers);\n      setInitManagers(true);\n    }\n  }, [organisation, managers, initManagers, setManagers]);\n\n  const updateManagers = () => {\n    let payload = JSON.stringify({ managers: managers.map((i) => i.username) });\n    pushToLocalJSONAPI(`organisations/${id}/`, payload, token, 'PATCH')\n      .then(() =>\n        toast.success(\n          <FormattedMessage\n            {...messages.affiliationUpdationSuccess}\n            values={{\n              affiliation: 'managers',\n            }}\n          />,\n        ),\n      )\n      .catch(() =>\n        toast.error(\n          <FormattedMessage\n            {...messages.affiliationUpdationFailure}\n            values={{\n              affiliation: 'managers',\n            }}\n          />,\n        ),\n      );\n  };\n\n  const updateOrg = (payload) => {\n    const onSuccess = () => setErrorMessage(null);\n    const onFailure = (error) => setErrorMessage(error.message);\n    updateEntity(`organisations/${id}/`, 'organization', payload, token, onSuccess, onFailure);\n  };\n\n  return (\n    <ReactPlaceholder\n      showLoadingAnimation={true}\n      type={'media'}\n      rows={26}\n      delay={100}\n      ready={!error && loading === false && typeof organisation === 'object'}\n    >\n      {isUserAllowed ? (\n        <div className=\"cf\">\n          <div className=\"cf pv4 w-100\">\n            <div className=\"w-auto fl\">\n              <h3 className=\"f2 ttu blue-dark fw7 ma0 barlow-condensed v-mid dib\">\n                <FormattedMessage {...messages.manageOrganisation} />\n              </h3>\n              <DeleteModal\n                id={organisation.organisationId}\n                name={organisation.name}\n                type=\"organisations\"\n              />\n            </div>\n            <div className=\"w-auto fr\">\n              <Link to={`/organisations/${organisation.organisationId}/stats/`}>\n                <CustomButton\n                  className=\"bg-red ba b--red white pv2 ph3\"\n                  icon={<ChartLineIcon className=\"h1 v-mid\" />}\n                >\n                  <FormattedMessage {...messages.statistics} />\n                </CustomButton>\n              </Link>\n            </div>\n          </div>\n          <div className=\"w-40-l w-100 mt4 fl\">\n            <OrganisationForm\n              userDetails={userDetails}\n              organisation={{\n                name: organisation.name,\n                url: organisation.url,\n                slug: organisation.slug,\n                logo: organisation.logo,\n                description: organisation.description,\n                type: organisation.type,\n                subscriptionTier: organisation.subscriptionTier,\n              }}\n              updateOrg={updateOrg}\n              disabledForm={error || loading}\n              errorMessage={errorMessage}\n            />\n            <Members\n              addMembers={addManager}\n              removeMembers={removeManager}\n              saveMembersFn={updateManagers}\n              resetMembersFn={setManagers}\n              members={managers}\n            />\n          </div>\n          <div className=\"w-60-l w-100 mt4 pl5-l pl0 fr\">\n            <Projects\n              projects={!projectsLoading && !projectsError && projects}\n              viewAllEndpoint={`/manage/projects/?organisation=${organisation.name}`}\n              ownerEntity=\"organisation\"\n            />\n            <Teams\n              teams={organisation.teams}\n              viewAllQuery={`?organisationId=${id}`}\n              isReady={!error && !loading}\n            />\n          </div>\n        </div>\n      ) : (\n        <div className=\"cf w-100 pv5\">\n          <div className=\"tc\">\n            <h3 className=\"f3 fw8 mb4 barlow-condensed\">\n              <FormattedMessage {...messages.editOrgNotAllowed} />\n            </h3>\n          </div>\n        </div>\n      )}\n    </ReactPlaceholder>\n  );\n}\n"],"sourceRoot":""}