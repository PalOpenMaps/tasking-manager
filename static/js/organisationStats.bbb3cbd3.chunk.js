(this["webpackJsonpTaskingManager-frontend"]=this["webpackJsonpTaskingManager-frontend"]||[]).push([[810],{1918:function(e,t,a){"use strict";var s=a(20);t.a=Object(s.b)({privacy:{id:"projects.formInputs.privacy.title",defaultMessage:"Privacy"},privateProject:{id:"projects.formInputs.privacy.field",defaultMessage:"Private project"},privacyDescription:{id:"projects.formInputs.privacy.description",defaultMessage:"Private means that only the users that are project team members can access, map or validate this project. This option overrides the mapping and validation permissions."},teams:{id:"projects.formInputs.teams.title",defaultMessage:"Teams"},teamsPermissionNote:{id:"projects.teams.teamsPermissionNote",defaultMessage:"Note: Mappers have mapping permissions. Validators have mapping and validation permissions. Project managers have mapping and validation permissions as well as the access to the management sections."},organisation:{id:"projects.formInputs.organisation.title",defaultMessage:"Organization"},campaign:{id:"projects.formInputs.campaign.title",defaultMessage:"Campaign"},categories:{id:"projects.formInputs.categories.title",defaultMessage:"Categories"},organisationDescription:{id:"projects.formInputs.organisation.description",defaultMessage:"Organization that is coordinating the project, if there is any. The managers of that organization will have administration rights over the project."},admins:{id:"projects.formInputs.admins.title",defaultMessage:"TM Admins"},selectImagery:{id:"projects.formInputs.imagery.select",defaultMessage:"Select imagery"},selectLicense:{id:"projects.formInputs.license.select",defaultMessage:"Select license"},selectOrganisation:{id:"projects.formInputs.organisation.select",defaultMessage:"Select organization"},selectCampaign:{id:"projects.formInputs.campaign.select",defaultMessage:"Select campaigns"},permissions_ANY:{id:"projects.formInputs.permissions.any",defaultMessage:"Any user"},permissions_LEVEL:{id:"projects.formInputs.permissions.level",defaultMessage:"Only users with intermediate or advanced level"},permissions_TEAMS:{id:"projects.formInputs.permissions.teams",defaultMessage:"Only team members"},permissions_TEAMS_LEVEL:{id:"projects.formInputs.permissions.teamsAndLevel",defaultMessage:"Only intermediate and advanced team members"},mappingPermissionDescription:{id:"projects.formInputs.permissions.mapping.description",defaultMessage:"Define which users can map this project."},validationPermissionDescription:{id:"projects.formInputs.permissions.validation.description",defaultMessage:"Define which users can validate this project."},mappingPermission:{id:"projects.formInputs.permissions.mapping.title",defaultMessage:"Mapping permissions"},validationPermission:{id:"projects.formInputs.permissions.validation.title",defaultMessage:"Validation permissions"},mappingValidationSection:{id:"projects.sections.mapping_validation.title",defaultMessage:"Mapping, validation and invalidation"},mappingValidationSectionDescription:{id:"projects.sections.mapping_validation.description",defaultMessage:"Use this if for some reason you need to map, validate or invalidate all tasks in this project in a single step."},messageContributors:{id:"projects.actions.message_contributors.title",defaultMessage:"Message all contributors"},messageContributorsDescription:{id:"projects.actions.message_contributors.description",defaultMessage:"This will send a message to every contributor of the current project. Please use this feature carefully."},messageContributorsTranslationAlert:{id:"projects.actions.message_contributors.translation_alert",defaultMessage:"This message will not be translated to the different languages of the users, so you may want to include your own translations."},messageContributorsSuccess:{id:"projects.actions.message_contributors.success",defaultMessage:"Contributors were messaged successfully."},messageContributorsError:{id:"projects.actions.message_contributors.error",defaultMessage:"Failed to message all contributors for an unknown reason."},mapAll:{id:"projects.actions.map_all_tasks.title",defaultMessage:"Map all tasks"},mapAllConfirmation:{id:"projects.actions.map_all_tasks.confirmation",defaultMessage:"Are you sure you want to mark all tasks in this project as mapped? You cannot undo this."},mapAllDescription:{id:"projects.actions.map_all_tasks.description",defaultMessage:"This will mark all tasks (except 'unavailable' ones) as mapped. Please use this only if you are sure of what you are doing."},mapAllSuccess:{id:"projects.actions.map_all_tasks.success",defaultMessage:"The tasks were mapped successfully."},mapAllError:{id:"projects.actions.map_all_tasks.error",defaultMessage:"Mapping all the tasks failed for an unknown reason."},invalidateAll:{id:"projects.actions.invalidate_all_tasks.title",defaultMessage:"Invalidate all validated tasks"},invalidateAllConfirmation:{id:"projects.actions.invalidate_all_tasks.confirmation",defaultMessage:"Are you sure you want to invalidate all validated tasks in this project? You cannot undo this."},invalidateAllDescription:{id:"projects.actions.invalidate_all_tasks.description",defaultMessage:"This will mark all validated tasks as 'more mapping needed'. Please use this only if you are sure of what you are doing."},invalidateAllSuccess:{id:"projects.actions.invalidate_all_tasks.success",defaultMessage:"The tasks were set as 'more mapping needed' successfully."},invalidateAllError:{id:"projects.actions.invalidate_all_tasks.error",defaultMessage:"Invalidating all the tasks failed for an unknown reason."},validateAllTasks:{id:"projects.actions.validate_all_tasks.title",defaultMessage:"Validate all mapped tasks"},validateAllTasksConfirmation:{id:"projects.actions.validate_all_tasks.confirmation",defaultMessage:"Are you sure you want to validate all mapped tasks? You cannot undo this."},validateAllTasksDescription:{id:"projects.actions.validate_all_tasks.description",defaultMessage:"This will change the status of all mapped tasks to 'finished'. Please use this only if you are sure of what you are doing."},validateAllSuccess:{id:"projects.actions.validate_all_tasks.success",defaultMessage:"The tasks were validated successfully."},validateAllError:{id:"projects.actions.validate_all_tasks.error",defaultMessage:"Validating all the tasks failed for an unknown reason."},resetBadImagery:{id:"projects.actions.reset_bad_imagery_tasks.title",defaultMessage:"Reset tasks marked as unavailable"},resetBadImageryConfirmation:{id:"projects.actions.reset_bad_imagery_tasks.confirmation",defaultMessage:"Are you sure you want to reset all tasks marked as unavailable in this project? You cannot undo this."},resetBadImageryDescription:{id:"projects.actions.reset_bad_imagery_tasks.description",defaultMessage:"This will change the status of those tasks to 'ready for mapping'. Please use this only if you are sure of what you are doing."},resetBadImageryButton:{id:"projects.actions.reset_bad_imagery_tasks.button",defaultMessage:"Reset all unavailable tasks"},resetBadImagerySuccess:{id:"projects.actions.reset_bad_imagery_tasks.success",defaultMessage:"The tasks marked as unavailable were reset successfully."},resetBadImageryError:{id:"projects.actions.reset_bad_imagery_tasks.error",defaultMessage:"Resetting the tasks failed for an unknown reason."},resetAll:{id:"projects.actions.reset_all_tasks.title",defaultMessage:"Reset tasks"},resetAllButton:{id:"projects.actions.reset_all_tasks.button",defaultMessage:"Reset all tasks"},resetAllDescription:{id:"projects.actions.reset_all_tasks.description",defaultMessage:"Reset all tasks in the project to ready to map, preserving history."},resetAllSuccess:{id:"projects.actions.reset_all_tasks.success",defaultMessage:"All tasks were reset successfully."},resetAllError:{id:"projects.actions.reset_all_tasks.error",defaultMessage:"Resetting all the tasks failed for an unknown reason."},cloneProject:{id:"projects.actions.clone_project.button",defaultMessage:"Clone project"},cloneProjectDescription:{id:"projects.actions.clone_project.description",defaultMessage:"This will copy all descriptions, instructions, metadata etc to a new project. The Area of Interest, tasks and the priority areas will not be copied. You will have to redraw/import these. Your newly cloned project will be in draft status."},revertVALIDATEDTasks:{id:"projects.actions.revert_validated_tasks.button",defaultMessage:"Revert validated tasks"},revertVALIDATEDTasksTitle:{id:"projects.actions.revert_validated_tasks.title",defaultMessage:"Revert validated tasks"},revertVALIDATEDTasksDescription:{id:"projects.actions.revert_validated_tasks.description",defaultMessage:"Revert all validated tasks by a specified user and mark it as mapped"},revertVALIDATEDTasksSuccess:{id:"projects.actions.revert_validated_tasks.success",defaultMessage:"The tasks were reverted successfully."},revertBADIMAGERYTasks:{id:"projects.actions.revert_unavailable_tasks.button",defaultMessage:"Revert unavailable tasks"},revertBADIMAGERYTasksTitle:{id:"projects.actions.revert_unavailable_tasks.title",defaultMessage:"Revert unavailable tasks"},revertBADIMAGERYTasksDescription:{id:"projects.actions.revert_unavailable_tasks.description",defaultMessage:"Revert all tasks marked as unavailable by a specified user and mark it as ready to map"},revertBADIMAGERYTasksSuccess:{id:"projects.actions.revert_unavailable_tasks.success",defaultMessage:"The tasks were reverted successfully."},revertTasksError:{id:"projects.actions.revert_validated_tasks.error",defaultMessage:"The tasks reversion failed."},transferProject:{id:"projects.actions.transfer_project.button",defaultMessage:"Transfer project"},transferProjectTitle:{id:"projects.actions.transfer_project.title",defaultMessage:"Transfer project ownership"},transferProjectAlert:{id:"projects.actions.transfer_project.alert",defaultMessage:"This feature is only available to the project author, organisation manager and TM admin."},transferProjectSuccess:{id:"projects.actions.transfer_project.success",defaultMessage:"The project was transferred successfully."},transferProjectError:{id:"projects.actions.transfer_project.error",defaultMessage:"The project transfer failed."},deleteProject:{id:"projects.actions.delete_project.title",defaultMessage:"Delete project"},deleteProjectAlert:{id:"projects.actions.delete_project.alert",defaultMessage:"You can only delete projects that has no received contributions."},deleteProjectSuccess:{id:"projects.actions.delete_project.success",defaultMessage:"The project was deleted successfully."},deleteProjectError:{id:"projects.actions.delete_project.error",defaultMessage:"The project deletion failed. If this project has received some contributions, you should archive it instead."},taskReset:{id:"projects.actions.task_reset.title",defaultMessage:"Task reset"},taskResetButton:{id:"projects.actions.task_reset.button",defaultMessage:"Reset all tasks"},cancel:{id:"projects.actions.modal.cancel.button",defaultMessage:"Cancel"},canNotUndo:{id:"projects.actions.alerts.can_not_undo",defaultMessage:"This cannot be undone."},warning:{id:"projects.actions.alerts.warning",defaultMessage:"Warning"},taskResetConfirmation:{id:"projects.actions.task_reset.confirmation",defaultMessage:"Are you sure you want to reset all tasks? You cannot undo this."},status:{id:"projects.formInputs.status",defaultMessage:"Status"},priority:{id:"projects.formInputs.priority",defaultMessage:"Priority"},license:{id:"projects.formInputs.license",defaultMessage:"Required license"},language:{id:"projects.formInputs.language",defaultMessage:"Default language"},typeHere:{id:"projects.formInputs.type",defaultMessage:"Type here..."},translations:{id:"projects.formInputs.language.translations",defaultMessage:"Translations"},selectLanguage:{id:"projects.formInputs.language.select",defaultMessage:"Select a language above to translate."},mappingEditors:{id:"projects.formInputs.mapping_editors",defaultMessage:"Editors for mapping"},validationEditors:{id:"projects.formInputs.validation_editors",defaultMessage:"Editors for validation"},customEditor:{id:"projects.formInputs.editors.options.custom",defaultMessage:"Custom editor"},randomTaskSelection:{id:"projects.formInputs.random_task_selection",defaultMessage:"Enforce random task selection"},randomTaskSelectionMapping:{id:"projects.formInputs.random_task_selection.mapping",defaultMessage:"Enforce random task selection on mapping"},randomTaskSelectionDescription:{id:"projects.formInputs.random_task_selection.description",defaultMessage:"If checked, users must edit tasks at random for the initial editing stage (managers and admins are exempt)."},rapidPowerUser:{id:"projects.formInputs.rapid_power_user",defaultMessage:"Enable RapiD Power User Features"},rapidPowerUserDescription:{id:"projects.formInputs.rapid_power_user.description",defaultMessage:"If checked, RapiD will load with the power user dialog enabled."},imagery:{id:"projects.formInputs.imagery",defaultMessage:"Imagery"},imageryURLNote:{id:"projects.formInputs.imagery.note",defaultMessage:"Follow this format for TMS URLs: {exampleUrl}"},drawPolygon:{id:"projects.formInputs.priority_areas.options.polygon",defaultMessage:"Draw polygon"},drawRectangle:{id:"projects.formInputs.priority_areas.options.rectangle",defaultMessage:"Draw rectangle"},clearAll:{id:"projects.formInputs.priority_areas.action.clear",defaultMessage:"Clear all"},selectFile:{id:"projects.formInputs.priority_areas.action.selectFile",defaultMessage:"Select File"},importDescription:{id:"projects.formInputs.priority_areas.upload.description",defaultMessage:"The supported file formats are: GeoJSON, KML, OSM or zipped Shapefile. You can drag and drop a file over the map to import it."},name:{id:"projects.formInputs.name",defaultMessage:"Name of the project"},dueDate:{id:"projects.formInputs.dueDate",defaultMessage:"Due date"},dueDateDescription:{id:"projects.formInputs.dueDate.description",defaultMessage:"Define the ideal date to have the project finished. The date format is day/month/year."},description:{id:"projects.formInputs.description",defaultMessage:"Description"},shortDescription:{id:"projects.formInputs.shortDescription",defaultMessage:"Short description"},instructions:{id:"projects.formInputs.instructions",defaultMessage:"Detailed instructions"},osmchaFilterId:{id:"projects.formInputs.osmcha_filter_id",defaultMessage:"OSMCha filter ID"},osmchaFilterIdDescription:{id:"projects.formInputs.osmcha_filter_id.description",defaultMessage:"Optional id of a saved OSMCha filter to apply when viewing the project in OSMCha, if you desire custom filtering. Note that this replaces all standard filters. Example: 095e8b31-b3cb-4b36-a106-02826fb6a109 (for convenience, you can also paste an OSMCha URL here that uses a saved filter and the filter id will be extracted for you)."},priorityAreasDescription:{id:"projects.formInputs.priority_areas.description",defaultMessage:"If you want mappers to work on the highest priority areas first, draw one or more polygons within the project area or import a file."},mappingTypes:{id:"projects.formInputs.mapping_types",defaultMessage:"Types of mapping"},idPresets:{id:"projects.formInputs.id_presets",defaultMessage:"iD editor presets"},userRole:{id:"projects.formInputs.user_role",defaultMessage:"User role"},difficulty:{id:"projects.formInputs.difficulty",defaultMessage:"Difficulty"},difficultyDescription:{id:"projects.formInputs.difficulty.description",defaultMessage:"Setting the difficulty will help mappers to find suitable projects to work on."},perTaskInstructions:{id:"projects.formInputs.per_task_instructions",defaultMessage:"Per task instructions"},perTaskInstructionsDescription:{id:"projects.formInputs.per_task_instructions.descriptions",defaultMessage:'Add any information that can be useful to users while mapping a task. "{x}", "{y}" and "{z}" will be replaced by the corresponding parameters for each task. "{x}", "{y}" and "{z}" parameters can only be be used on tasks generated in the Tasking Manager and not on imported tasks.'},perTaskInstructionsExample:{id:"projects.formInputs.per_task_instructions.example",defaultMessage:"Example: This task involves loading extra data. Click [here](http://localhost:8111/import?new_layer=true&amp;url=http://www.domain.com/data/{x}/{y}/{z}/routes_2009.osm) to load the data into JOSM."},changesetComment:{id:"projects.formInputs.changesetComment",defaultMessage:"Changeset comment"},changesetCommentExample:{id:"projects.formInputs.changesetComment.example",defaultMessage:"Example: #hotosm-project-470 #missingmaps Buildings mapping."},changesetCommentDescription:{id:"projects.formInputs.changesetComment.description",defaultMessage:"Default comments added to uploaded changeset comment field. Users should also be encouraged to add text describing what they mapped. Hashtags are sometimes used for analysis later, but should be human informative and not overused, #group #event for example."},nonEditableComment:{id:"projects.formInputs.non_editable_comment",defaultMessage:"This default comment is not editable."},projectPriorityURGENT:{id:"project.formInputs.priority.options.urgent",defaultMessage:"Urgent"},projectPriorityHIGH:{id:"project.formInputs.priority.options.high",defaultMessage:"High"},projectPriorityMEDIUM:{id:"project.formInputs.priority.options.medium",defaultMessage:"Medium"},projectPriorityLOW:{id:"project.formInputs.priority.options.low",defaultMessage:"Low"},statusDRAFT:{id:"project.formInputs.status.options.draft",defaultMessage:"Draft"},statusARCHIVED:{id:"project.formInputs.status.options.archived",defaultMessage:"Archived"},statusPUBLISHED:{id:"project.formInputs.status.options.published",defaultMessage:"Published"},userRoleALL:{id:"project.formInputs.user_role.options.all",defaultMessage:"All roles"},userRoleMAPPER:{id:"project.formInputs.user_role.options.mapper",defaultMessage:"Mapper"},subjectPlaceholder:{id:"project.formInputs.placeholders.subject",defaultMessage:"Subject *"},messagePlaceholder:{id:"project.formInputs.placeholders.message",defaultMessage:"Message *"},difficultyALL:{id:"project.formInputs.mapper_level.options.all",defaultMessage:"All levels"},difficultyCHALLENGING:{id:"project.formInputs.mapper_level.options.challenging",defaultMessage:"Challenging"},difficultyMODERATE:{id:"project.formInputs.mapper_level.options.moderate",defaultMessage:"Moderate"},difficultyEASY:{id:"project.formInputs.mapper_level.options.easy",defaultMessage:"Easy"},filterByOrg:{id:"project.formInputs.teams.actions.filter.organisations",defaultMessage:"Filter teams by organizations"},selectTeam:{id:"project.formInputs.teams.actions.select",defaultMessage:"Select a team..."},selectRole:{id:"project.formInputs.teams.actions.select.role",defaultMessage:"Select a role..."},add:{id:"project.formInputs.teams.actions.add",defaultMessage:"Add"},update:{id:"project.formInputs.teams.actions.update",defaultMessage:"Update"},preview:{id:"project.messages.preview",defaultMessage:"Preview"},customEditorName:{id:"projects.formInputs.custom_editor.name",defaultMessage:"Name"},customEditorDescription:{id:"projects.formInputs.custom_editor.description",defaultMessage:"Description"},customEditorUrl:{id:"projects.formInputs.custom_editor.url",defaultMessage:"URL"},customEditorEnabledForMapping:{id:"projects.formInputs.custom_editor.enabled.mapping",defaultMessage:"Enabled for mapping"},customEditorEnabledForValidation:{id:"projects.formInputs.custom_editor.enabled.validation",defaultMessage:"Enabled for validation"},deleteCustomEditor:{id:"projects.formInputs.custom_editor.delete",defaultMessage:"Delete Custom Editor"},removeCustomEditor:{id:"projects.formInputs.custom_editor.remove",defaultMessage:"Remove Custom Editor"},confirmDeleteCustomEditor:{id:"projects.formInputs.custom_editor.delete.confirm",defaultMessage:'This will remove the custom editor from the project. Are you sure you don\'t want to disable the custom editor by toggling the "Enabled" checkbox above?'},noMappingEditor:{id:"projects.formInputs.noMappingEditor",defaultMessage:"At least one editor must be enabled for mapping"},noValidationEditor:{id:"projects.formInputs.noValidationEditor",defaultMessage:"At least one editor must be enabled for validation"},extraIdParams:{id:"projects.formInputs.extraIdParams",defaultMessage:"Additional iD URL parameters"},extraIdParamsDescription:{id:"projects.formInputs.extraIdParams.description",defaultMessage:"Any additional URL parameters that you want include when loading iD editor (both the embedded and the external ones). Use & to separate different parameters. Example: {text}."},extraIdParamsDescriptionLink:{id:"projects.formInputs.extraIdParams.description.link",defaultMessage:"Check the {link} for more information."},iDAPIDocs:{id:"projects.formInputs.extraIdParams.iDAPIDocs",defaultMessage:"iD editor documentation"}})},1923:function(e,t,a){"use strict";var s=a(20);t.a=Object(s.b)({loading:{id:"users.detail.loading",defaultMessage:"loading"},contributionTimelineTitle:{id:"users.detail.contributionTimelineTitle",defaultMessage:"Contribution Timeline"},projectsTitle:{id:"users.detail.projectsTitle",defaultMessage:"Projects"},countries:{id:"users.detail.countries",defaultMessage:"Countries"},timeSpentMapping:{id:"users.detail.timeSpentMapping",defaultMessage:"Time spent mapping"},buildingsMapped:{id:"users.detail.buildingsMapped",defaultMessage:"Buildings mapped"},roadMapped:{id:"users.detail.roadMapped",defaultMessage:"Km road mapped"},poiMapped:{id:"users.detail.poiMapped",defaultMessage:"Points of interests mapped"},waterwaysMapped:{id:"users.detail.waterwaysMapped",defaultMessage:"Km waterways mapped"},userMapped:{id:"users.detail.tasksMapped",defaultMessage:"{user} mapped"},you:{id:"users.detail.you",defaultMessage:"You"},userValidated:{id:"users.detail.tasksValidated",defaultMessage:"{user} validated"},invalidated:{id:"users.detail.invalidated",defaultMessage:"Needed more mapping"},validated:{id:"users.detail.validated",defaultMessage:"Validated"},finished:{id:"users.detail.finished",defaultMessage:"Finished"},topProjectsMappedTitle:{id:"users.detail.topProjectsMappedTitle",defaultMessage:"Top 5 projects contributed"},noTopProjectsData:{id:"users.detail.topProjectsMapped.error",defaultMessage:"No projects mapped until now."},topCausesTitle:{id:"users.detail.topCausesTitle",defaultMessage:"Top causes contributed to"},others:{id:"users.detail.others",defaultMessage:"Others"},noProjectsData:{id:"users.detail.projects.noData",defaultMessage:"Information is not available because no projects were mapped until now."},editsTitle:{id:"users.detail.editsTitle",defaultMessage:"Edits by numbers"},noEditsData:{id:"users.detail.edits.error",defaultMessage:"No data to show yet. OpenStreetMap edits stats are updated with a delay of one hour."},topCountriesTitle:{id:"users.detail.topCountriesTitle",defaultMessage:"Top 5 countries most mapped"},tasks:{id:"users.detail.tasks",defaultMessage:"tasks"},heatmapNoContribution:{id:"users.detail.heatmapNoContribution",defaultMessage:"No contribution"},heatmapContribution:{id:"users.detail.heatmapContribution",defaultMessage:"contribution"},heatmapContributions:{id:"users.detail.heatmapContributions",defaultMessage:"contributions"},heatmapLegendMore:{id:"users.detail.heatmapLegendMore",defaultMessage:"more"},heatmapLegendLess:{id:"users.detail.heatmapLegendLess",defaultMessage:"less"},teams:{id:"users.detail.teams",defaultMessage:"Teams"},userOrganisationsError:{id:"users.header.organisations.error",defaultMessage:"Couldn't load organisations at this time"}})},1929:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a(1);var r=a(0);const i=e=>{let{className:t,small:a,height:i,firstBarValue:o,secondBarValue:l=0,children:n}=e;const[c,d,u]=function(){const[e,t]=Object(s.useState)(!1),[a,r]=Object(s.useState)({x:0,y:0}),i=Object(s.useCallback)((e=>{r({x:e.clientX-l.current.offsetLeft-35,y:e.clientY}),t(!0)}),[]),o=Object(s.useCallback)((()=>t(!1)),[]),l=Object(s.useRef)();return[Object(s.useCallback)((e=>{l.current&&(l.current.removeEventListener("mouseover",i),l.current.removeEventListener("mouseout",o)),l.current=e,l.current&&(l.current.addEventListener("mouseover",i),l.current.addEventListener("mouseout",o))}),[i,o]),e,a]}(),p="h".concat(i);return Object(r.jsx)("div",{className:"cf db ".concat(t||""),children:Object(r.jsxs)("div",{className:"relative",ref:c,children:[Object(r.jsx)("div",{className:"absolute bg-blue-grey br-pill ".concat(a?p:"h-pill"," hide-child"),style:{width:"".concat(o>100?100:o,"%")},role:"progressbar","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"}),Object(r.jsx)("div",{className:"absolute bg-red br-pill ".concat(a?p:"h-pill"," hide-child"),style:{width:"".concat(l>100?100:l,"%")},role:"progressbar","aria-valuenow":l,"aria-valuemin":"0","aria-valuemax":"100"}),Object(r.jsx)("div",{className:"bg-tan br-pill ".concat(a?p:"h-pill"," overflow-y-hidden")}),d&&Object(r.jsxs)("span",{className:"db absolute z-1 dib bg-blue-dark ba br2 b--blue-dark pa2 shadow-5 bottom-".concat("half"===i?"2":i),style:{left:u.x},children:[n,Object(r.jsx)("span",{className:"absolute left-2 nt2 w1 h1 bg-blue-dark bl bt b--blue-dark rotate-45",style:{bottom:"-0.5rem",left:"calc(50% - 10px)"}})]})]})})}},1932:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));a(1);var s=a(20),r=a(0);const i=e=>{let{icon:t,description:a,value:i,className:l,invertColors:n=!1}=e;return Object(r.jsxs)("div",{className:"cf pt3 pb3 ph3 br1 ".concat(n?"bg-red white":"bg-white red shadow-6"," flex items-center ").concat(l||""),children:[Object(r.jsx)("div",{className:"w-30 fl ml2",children:t}),Object(r.jsx)(o,{value:Number(i)||0===i?Object(r.jsx)(s.a,{value:Math.trunc(i)}):i,label:a,className:"w-70 pt3-m mb1 fl",invertColors:n})]})},o=e=>{let{value:t,label:a,className:s,invertColors:i=!1}=e;return Object(r.jsxs)("div",{className:s,children:[Object(r.jsx)("h3",{className:"ma0 mb1 barlow-condensed f2 fw5 ".concat(i?"white":"red"),children:t}),Object(r.jsx)("span",{className:"ma0 h2 f7 fw5 ".concat(i?"white":"blue-grey"),children:a})]})}},1948:function(e,t,a){"use strict";var s=a(20);t.a=Object(s.b)({projectTitle:{id:"project.mainSection.title",defaultMessage:"Generic project"},mappingDifficulty:{id:"project.nav.mappingDifficulty",defaultMessage:"Difficulty level"},moreFilters:{id:"project.nav.moreFilters",defaultMessage:"More filters"},campaign:{id:"project.nav.campaign",defaultMessage:"Campaign"},startDate:{id:"navFilters.startDate",defaultMessage:"From"},startDatePlaceholder:{id:"navFilters.startDate.placeholder",defaultMessage:"Click to select a start date"},endDate:{id:"navFilters.endDate",defaultMessage:"To"},endDatePlaceholder:{id:"navFilters.endDatePlace.placeholder",defaultMessage:"Click to select an end date"},dateRange:{id:"navFilters.dateRange",defaultMessage:"Date Range"},thisWeek:{id:"navFilters.thisWeek",defaultMessage:"This week"},thisMonth:{id:"navFilters.thisMonth",defaultMessage:"This month"},thisYear:{id:"navFilters.thisYear",defaultMessage:"This year"},lastWeek:{id:"navFilters.lastWeek",defaultMessage:"Last week"},lastMonth:{id:"navFilters.lastMonth",defaultMessage:"Last month"},lastYear:{id:"navFilters.lastYear",defaultMessage:"Last year"},customRange:{id:"navFilters.customRange",defaultMessage:"Custom range"},showMapToggle:{id:"project.nav.showMapToggle",defaultMessage:"Show map"},listViewToggle:{id:"project.nav.listViewToggle",defaultMessage:"List view"},typesOfMapping:{id:"project.navFilters.typesOfMapping",defaultMessage:"Types of mapping"},projectsToMap:{id:"project.navFilters.action.map",defaultMessage:"Projects to map"},projectsToValidate:{id:"project.navFilters.action.validate",defaultMessage:"Projects to validate"},anyProject:{id:"project.navFilters.action.any",defaultMessage:"Any project"},exactMatch:{id:"project.navFilters.typesOfMapping.exactMatch",defaultMessage:"Exact match"},campaigns:{id:"project.navFilters.campaigns",defaultMessage:"All campaigns"},showAllXTags:{id:"project.navFilters.showAllXTags",defaultMessage:"Show {typeOfTag}"},searchPlaceholder:{id:"project.inputs.placeholders.search",defaultMessage:"Search project"},organisation:{id:"project.navFilters.organisation",defaultMessage:"Organization"},organisations:{id:"project.navFilters.organisations",defaultMessage:"All Organizations"},location:{id:"project.navFilters.location",defaultMessage:"Location"},locations:{id:"project.navFilters.locations",defaultMessage:"Locations"},interest:{id:"project.navFilters.interest",defaultMessage:"Interest"},interests:{id:"project.navFilters.interests",defaultMessage:"Interests"},filterByMyInterests:{id:"project.navFilters.filterByMyInterests",defaultMessage:"Filter by my interests"},errorLoadingTheXForY:{id:"project.navFilters.error",defaultMessage:"Error loading the {xWord} for {yWord}"},filters:{id:"project.nav.filters",defaultMessage:"Filters"},projects:{id:"project.nav.projects",defaultMessage:"Projects"},myProjects:{id:"project.nav.myprojects",defaultMessage:"My Projects"},manageProjects:{id:"project.nav.manageProjects",defaultMessage:"Manage Projects"},favorited:{id:"project.nav.favorited",defaultMessage:"Favorited"},contributed:{id:"project.nav.contributed",defaultMessage:"Contributed"},allprojects:{id:"project.nav.allprojects",defaultMessage:"All"},active:{id:"project.nav.active",defaultMessage:"Active"},stale:{id:"project.nav.stale",defaultMessage:"Stale"},managed:{id:"project.nav.managed",defaultMessage:"Managed by me"},created:{id:"project.nav.created",defaultMessage:"Created by me"},draft:{id:"project.nav.draft",defaultMessage:"Draft"},archived:{id:"project.nav.archived",defaultMessage:"Archived"},paginationCount:{id:"project.pagination.count",defaultMessage:"Showing {number} of {total} projects"},clearFilters:{id:"project.nav.clearFilters",defaultMessage:"Clear filters"},sortBy:{id:"project.sortby",defaultMessage:"Sort by"},sortByIdDesc:{id:"project.sortby.id.descending",defaultMessage:"New projects"},sortByIdAsc:{id:"project.sortby.id.ascending",defaultMessage:"Old projects"},sortByPriority:{id:"project.sortby.priority",defaultMessage:"Urgent projects"},sortByEasy:{id:"project.sortby.difficulty.easy",defaultMessage:"Easy projects"},sortByChallenging:{id:"project.sortby.difficulty.challenging",defaultMessage:"Challenging projects"},sortByMoreActive:{id:"project.sortby.more_active",defaultMessage:"Active projects"},apply:{id:"project.nav.apply",defaultMessage:"Apply"},clear:{id:"project.nav.clear",defaultMessage:"Clear"},retry:{id:"project.results.retry",defaultMessage:"Retry"}})},1969:function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return j}));var s=a(2116),r=a(1949),i=a(1982),o=a(1970),l=a(1983),n=a(1971),c=a(1984);function d(e){let t=new Date;return t.setMonth(t.getMonth()-e)}const u=new Date,p="yyyy-MM-dd",j={thisWeek:{start:Object(s.default)(Object(r.default)(u),p),end:Object(s.default)(u,p)},thisMonth:{start:Object(s.default)(Object(i.default)(u),p),end:Object(s.default)(u,p)},thisYear:{start:Object(s.default)(Object(o.default)(u),p),end:Object(s.default)(u,p)},lastWeek:{start:Object(s.default)(Object(r.default)((new Date).setDate(u.getDate()-7)),p),end:Object(s.default)(Object(l.default)((new Date).setDate(u.getDate()-7)),p)},lastMonth:{start:Object(s.default)(Object(i.default)((new Date).setMonth(u.getMonth()-1)),p),end:Object(s.default)(Object(n.default)((new Date).setMonth(u.getMonth()-1)),p)},lastYear:{start:Object(s.default)(Object(o.default)((new Date).setFullYear(u.getFullYear()-1)),p),end:Object(s.default)(Object(c.default)((new Date).setFullYear(u.getFullYear()-1)),p)}}},1975:function(e,t,a){"use strict";function s(e,t){return e.properties.taskId>t.properties.taskId?1:t.properties.taskId>e.properties.taskId?-1:0}function r(e,t){return new Date(t.properties.actionDate)-new Date(e.properties.actionDate)}function i(e,t){return new Date(t.actionDate)-new Date(e.actionDate)}function o(e,t,a){return e[a]>t[a]?-1:t[a]>e[a]?1:0}a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return o}))},1977:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return c}));a(1);var s=a(23),r=a(30),i=a(1923),o=a(0);const l=e=>{let{percent:t}=e;return Object(o.jsx)("div",{className:"w-100 relative mt2",children:Object(o.jsx)("div",{style:{height:"0.5em",width:"".concat(100*t,"%")},className:"bg-red br-pill absolute"})})},n=e=>{let{name:t,link:a,percentValue:r,number:i,numberUnit:n}=e;return Object(o.jsxs)("li",{className:"w-100 cf list pv3",children:[Object(o.jsxs)("div",{className:"w-100 cf mr4",children:[Object(o.jsx)("div",{className:"di ma0 f7 b fl",children:a?Object(o.jsx)(s.a,{className:"link blue-dark",to:a,children:t}):t}),Object(o.jsxs)("div",{className:"di ma0 f7 fr",children:[Object(o.jsx)("span",{className:"b mr1",children:i}),n&&Object(o.jsx)("span",{className:"blue-grey",children:n})]})]}),Object(o.jsx)("div",{className:"w-100 cf",children:Object(o.jsx)(l,{percent:r})})]})},c=e=>{let{data:t,valueField:a,nameField:s,linkBase:l,linkField:c}=e;return Object(o.jsx)("ol",{className:"pa0 mt1 mb0",children:t.map(((e,t)=>Object(o.jsx)(n,{name:e[s],link:l?"".concat(l).concat(e[c]):null,percentValue:e.percent,number:e[a],numberUnit:Object(o.jsx)(r.a,{...i.a.tasks})},t)))})}},2046:function(e,t,a){"use strict";a.d(t,"c",(function(){return m})),a.d(t,"b",(function(){return g})),a.d(t,"a",(function(){return b}));var s=a(1),r=a(107),i=a(2058),o=a(2116),l=a(1985),n=a.n(l),c=a(30),d=a(50),u=(a(170),a(1981),a(1969)),p=a(1948),j=a(13),f=a(0);const m=e=>{let{fieldsetName:t,fieldsetStyle:a,titleStyle:s,selectedTag:r,setQueryForChild:i,allQueryParamsForChild:o,options:l,payloadKey:n}=e;const d=Object(f.jsx)(c.a,{...p.a[t]}),u=Object(f.jsx)(c.a,{...p.a["".concat(t,"s")]});return Object(f.jsxs)("fieldset",{id:t,className:a,children:[Object(f.jsx)("legend",{className:s,children:d}),l.isError?Object(f.jsx)("div",{className:"bg-tan pa4",children:Object(f.jsx)(c.a,{...p.a.errorLoadingTheXForY,values:{xWord:Object(f.jsx)(c.a,{...p.a.filters}),yWord:u}})}):Object(f.jsx)(h,{fieldsetTitle:d,defaultSelectedItem:u,fieldsetName:t,payloadKey:n,queryParamSelectedItem:r||d,tagOptionsFromAPI:l,setQuery:i,allQueryParams:o})]})},g=e=>{let{fieldsetName:t,fieldsetStyle:a,titleStyle:i,setQueryForChild:o,allQueryParamsForChild:l,isCustomDateRange:n,setIsCustomDateRange:d,startDateInQuery:j,endDateInQuery:m}=e;const[g,b]=Object(s.useState)("thisYear"),h=[{value:"thisWeek",label:Object(f.jsx)(c.a,{...p.a.thisWeek})},{value:"thisMonth",label:Object(f.jsx)(c.a,{...p.a.thisMonth})},{value:"thisYear",label:Object(f.jsx)(c.a,{...p.a.thisYear})},{value:"lastWeek",label:Object(f.jsx)(c.a,{...p.a.lastWeek})},{value:"lastMonth",label:Object(f.jsx)(c.a,{...p.a.lastMonth})},{value:"lastYear",label:Object(f.jsx)(c.a,{...p.a.lastYear})},(n||"custom"===g)&&{value:"custom",label:Object(f.jsx)(c.a,{...p.a.customRange}),isOptionDisabled:!0}].filter((e=>e));return Object(s.useEffect)((()=>{if(!m&&j===u.a.thisYear.start)return void b("thisYear");const e=Object.keys(u.a).find((e=>u.a[e].start===j&&u.a[e].end===m));b(e||"custom")}),[j,m]),Object(f.jsxs)("fieldset",{id:t,className:a,children:[Object(f.jsx)("legend",{className:i,children:Object(f.jsx)(c.a,{...p.a.dateRange})}),Object(f.jsx)(r.a,{onChange:e=>{let{value:t}=e;o({...l,page:void 0,startDate:u.a[t].start,endDate:u.a[t].end},"pushIn"),d(!1),b(t)},classNamePrefix:"react-select",options:h,value:n?h.filter((e=>"custom"===e.value)):h.filter((e=>e.value===g)),isOptionDisabled:e=>e.isOptionDisabled})]})},b=e=>{let{fieldsetName:t,fieldsetStyle:a,titleStyle:s,selectedValue:r,setQueryForChild:l,allQueryParamsForChild:u,setIsCustomDateRange:m}=e;const g=Object(d.a)(),b="yyyy-MM-dd";return Object(f.jsxs)("fieldset",{id:t,className:a,children:[Object(f.jsx)("legend",{className:s,children:Object(f.jsx)(c.a,{...p.a[t]})}),Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsx)(j.e,{className:"blue-grey dib w1 pr2 v-mid"}),Object(f.jsx)(n.a,{selected:r?Object(i.default)(r,b,new Date):null,onChange:e=>{l({...u,page:void 0,[t]:e?Object(o.default)(e,b):null},"pushIn"),m(!0)},dateFormat:b,className:"w-auto pv2 ph1 ba b--grey-light",placeholderText:g.formatMessage(p.a["".concat(t,"Placeholder")]),showYearDropdown:!0,scrollableYearDropdown:!0})]})]})},h=e=>{let{tagOptionsFromAPI:{tags:t},fieldsetTitle:a,fieldsetName:s,queryParamSelectedItem:i,defaultSelectedItem:o,allQueryParams:l,setQuery:n,payloadKey:c="name"}=e;const d=e=>e&&e[c]?e[c]:e,u=t.find((e=>e[c]===i));return Object(f.jsx)(r.a,{isLoading:t.isLoading,onChange:e=>{const t=d(e),a=e&&t===o?void 0:t;n({...l,page:void 0,[s]:a||void 0},"pushIn")},classNamePrefix:"react-select",getOptionLabel:e=>e.name||e,getOptionValue:d,placeholder:l[s]||a,options:t,value:u||null,isClearable:!0,isDisabled:"interests"===s&&l.basedOnMyInterests,styles:{menu:e=>({...e,zIndex:6})}})}},2063:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a(1),r=a(10),i=a(158),o=a(9);const l=(e,t)=>{switch(t.type){case"FETCH_INIT":return{...e,isLoading:!0,isError:!1};case"FETCH_SUCCESS":return{...e,isLoading:!1,isError:!1,tags:t.payload&&t.payload[Object.keys(t.payload)[0]]};case"FETCH_FAILURE":return{...e,isLoading:!1,isError:!0};default:throw console.log(t),new Error}},n=(e,t,a)=>{const n=Object(r.d)((e=>e.auth.token)),c=Object(r.d)((e=>e.preferences.locale)),[d,u]=Object(s.useReducer)(l,{isLoading:!0,isError:!1,tags:e});return Object(s.useEffect)((()=>{let e=!1;return(async()=>{const s={organisations:"?omitManagerList=true"};u({type:"FETCH_INIT"});try{let r;r=n?await Object(i.a)({url:"".concat(o.b).concat(t,"/").concat(s[t]?s[t]:""),method:"GET",headers:{Authorization:"Token ".concat(n)}}):await Object(i.a)("".concat(o.b).concat(t,"/")),e||(r&&r.headers&&-1!==r.headers["content-type"].indexOf("json")?(a&&(r.data.tags=a(r.data.tags,c)),u({type:"FETCH_SUCCESS",payload:r.data})):(console.error("Invalid return content-type for organisation tags"),u({type:"FETCH_FAILURE"})))}catch(r){e||u({type:"FETCH_FAILURE"})}})(),()=>{e=!0}}),[t,n,a,c]),[d]}},2112:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a(1);function r(e,t){return e.reduce(((e,a)=>e+a[t]),0)}function i(e){const[t,a]=Object(s.useState)({mapped:0,validated:0});return Object(s.useEffect)((()=>{e&&e.length&&a({mapped:r(e,"mapped"),validated:r(e,"validated")})}),[e]),t}},2133:function(e,t,a){"use strict";a.d(t,"b",(function(){return f})),a.d(t,"a",(function(){return h}));var s=a(1),r=a(10),i=a(46),o=(a(174),a(158)),l=a(2116),n=a(1970),c=a(175),d=a(123),u=a(122),p=a(9);const j={startDate:Object(i.withDefault)(i.StringParam,Object(l.default)(Object(n.default)(Date.now()),"yyyy-MM-dd")),endDate:i.StringParam,campaign:i.StringParam,location:i.StringParam,project:c.a,organisationName:i.StringParam,organisationId:i.NumberParam},f=()=>Object(i.useQueryParams)(j),m={startDate:"startDate",endDate:"endDate",campaign:"campaign",location:"country",project:"projectId",organisationName:"organisationName",organisationId:"organisationId"},g={taskStats:[]},b=(e,t)=>{switch(t.type){case"FETCH_INIT":return{...e,isLoading:!0,isError:!1};case"FETCH_SUCCESS":return{...e,isLoading:!1,isError:!1,stats:t.payload.taskStats};case"FETCH_FAILURE":return{...e,isLoading:!1,isError:!0};default:throw console.log(t),new Error}},h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const i=Object(d.b)(t,1500),l=Object(r.d)((e=>e.auth.token)),n=new AbortController,[c,j]=Object(s.useReducer)(b,{isLoading:!0,isError:!1,stats:e.taskStats,queryParamsState:t[0]}),f=async()=>{j({type:"FETCH_INIT"});let e={"Content-Type":"application/json",Authorization:"Token ".concat(l)};const t=Object(u.a)(i,m);a.split(",").forEach((e=>{const[a,s]=e.trim().split("=");t[a]=s})),await Object(o.a)({url:"".concat(p.b,"tasks/statistics/"),method:"GET",headers:e,params:t,signal:n.signal}).then((e=>{null!==e&&void 0!==e&&e.headers&&-1!==e.headers["content-type"].indexOf("json")?j({type:"FETCH_SUCCESS",payload:e.data}):j({type:"FETCH_FAILURE"})})).catch((e=>{var t,a;if(o.a.isCancel(e)||j({type:"FETCH_FAILURE"}),"No statistics found"===(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.Error)){const e=Object.assign(g,{pagination:{total:0}});j({type:"FETCH_SUCCESS",payload:e})}}))};return Object(s.useEffect)((()=>(f(),()=>{n.abort()})),[i,l,a]),[c,f]}},2134:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return l}));var s=a(1);const r=[{level:5,tier:"veryHigh",minActions:5e4,fee:35e3},{level:4,tier:"high",minActions:25e3,fee:2e4},{level:3,tier:"medium",minActions:1e4,fee:7500},{level:2,tier:"low",minActions:1e3,fee:2500},{level:1,tier:"free",minActions:0,fee:0}];function i(e){const t=o(e),[a,i]=Object(s.useState)(1e3);return Object(s.useEffect)((()=>{i(t&&t.level<5?r.filter((e=>e.level===t.level+1))[0].minActions:null)}),[t]),[t,a]}function o(e){const[t,a]=Object(s.useState)(r[r.length-1]);return Object(s.useEffect)((()=>{a(e?r.filter((t=>e>=t.minActions))[0]:r[r.length-1])}),[e]),t}function l(e,t){const a=o(e),[i,l]=Object(s.useState)(a);return Object(s.useEffect)((()=>{if("DISCOUNTED"===t){const e=a.level>1?r.filter((e=>e.level===a.level-1))[0].fee:0;l({...a,fee:e})}else l(a)}),[t,a]),i}},2145:function(e,t,a){"use strict";a.d(t,"a",(function(){return M}));var s=a(1),r=a.n(s),i=a(92),o=a.n(i),l=a(30),n=a(70),c=a(2063),d=a(2058),u=a(2329),p=a(2330),j=a(2135);var f=a(169),m=a(2046),g=a(20),b=a(1932),h=a(2112),v=a(0);function y(e){let{stats:t}=e;const a=Object(h.a)(t);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"pa2 w-25-l w-50-m w-100 fl",children:Object(v.jsx)("div",{className:"cf pa3 bg-white shadow-4",children:Object(v.jsx)(b.b,{label:Object(v.jsx)(l.a,{...n.a.tasksMapped}),className:"tc",value:Object(v.jsx)(g.a,{value:a.mapped})})})}),Object(v.jsx)("div",{className:"pa2 w-25-l w-50-m w-100 fl",children:Object(v.jsx)("div",{className:"cf pa3 bg-white shadow-4",children:Object(v.jsx)(b.b,{label:Object(v.jsx)(l.a,{...n.a.tasksValidated}),className:"tc",value:Object(v.jsx)(g.a,{value:a.validated})})})}),Object(v.jsx)("div",{className:"pa2 w-25-l w-100 fl",children:Object(v.jsx)("div",{className:"cf pa3 bg-white shadow-4",children:Object(v.jsx)(b.b,{label:Object(v.jsx)(l.a,{...n.a.completedActions}),className:"tc",value:Object(v.jsx)(g.a,{value:a.mapped+a.validated})})})})]})}const O=r.a.lazy((()=>Promise.all([a.e(3),a.e(6),a.e(822)]).then(a.bind(null,2344)))),M=e=>{let{query:t,setQuery:a,stats:r,error:i,loading:g,retryFn:b}=e;const[h]=Object(c.a)([],"campaigns"),[M]=Object(c.a)([],"countries",f.b),{startDate:w,endDate:x,campaign:k,location:I}=t,[D,N]=Object(s.useState)(!1),_=function(e){const[t,a]=Object(s.useState)();return Object(s.useEffect)((()=>{if(a({error:!1,detail:""}),e.startDate){const t=Object(d.default)(e.startDate,"yyyy-MM-dd",new Date),s=e.endDate?Object(d.default)(e.endDate,"yyyy-MM-dd",new Date):Object(u.a)();(t>Object(p.a)()||t>s)&&a({error:!0,detail:"badStartDate"}),Object(j.a)(s,t)>366&&a({error:!0,detail:"longDateRange"})}}),[e.startDate,e.endDate]),t}(t),T="bn dib pv0-ns pv2 ph2-ns ph1 mh0 mb1",E="dib ttu fw5 blue-grey mb1";return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"w-100 cf flex flex-wrap",children:[Object(v.jsx)(m.a,{fieldsetName:"startDate",fieldsetStyle:"".concat(T," fl"),titleStyle:E,selectedValue:w,setQueryForChild:a,allQueryParamsForChild:t,setIsCustomDateRange:N}),Object(v.jsx)(m.a,{fieldsetName:"endDate",fieldsetStyle:"".concat(T," fl"),titleStyle:E,selectedValue:x,setQueryForChild:a,allQueryParamsForChild:t,setIsCustomDateRange:N}),Object(v.jsxs)("div",{className:"w-60-l w-100 fl",children:[Object(v.jsx)(m.b,{fieldsetName:"dateRange",fieldsetStyle:"".concat(T," w-20-ns w-100"),titleStyle:E,selectedValue:w,setQueryForChild:a,allQueryParamsForChild:t,isCustomDateRange:D,setIsCustomDateRange:N,startDateInQuery:w,endDateInQuery:x}),Object(v.jsx)(m.c,{fieldsetName:"campaign",fieldsetStyle:"".concat(T," w-30-ns w-100"),titleStyle:E,selectedTag:k,options:h,setQueryForChild:a,allQueryParamsForChild:t}),Object(v.jsx)(m.c,{fieldsetName:"location",fieldsetStyle:"".concat(T," w-30-ns w-100"),titleStyle:E,selectedTag:I,options:M,setQueryForChild:a,allQueryParamsForChild:t,payloadKey:"value"})]})]}),Object(v.jsx)(o.a,{showLoadingAnimation:!0,rows:26,ready:!g,className:"pv3 ph2 ph4-ns",children:!g&&i?Object(v.jsxs)("div",{className:"bg-tan pa4",children:[Object(v.jsx)(l.a,{...n.a.errorLoadingStats}),Object(v.jsx)("div",{className:"pv3",children:_&&_.detail?Object(v.jsx)(l.a,{...n.a[_.detail]}):Object(v.jsx)("button",{className:"pa1 pointer",onClick:()=>b(),children:Object(v.jsx)(l.a,{...n.a.retry})})})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"pt3 pb3 ph2 cf mr2 w-100 w-two-thirds-l",children:Object(v.jsx)(s.Suspense,{fallback:Object(v.jsx)("div",{children:"loading..."}),children:Object(v.jsx)(O,{stats:r})})}),Object(v.jsx)("div",{className:"cf w-100",children:Object(v.jsx)(y,{stats:r})})]})})]})}},2352:function(e,t,a){"use strict";a.r(t),a.d(t,"OrganisationStats",(function(){return Q}));var s=a(1),r=a(10),i=a(6),o=a(92),l=a.n(o),n=a(30),c=a(62),d=a(2133),u=a(2112),p=a(2116),j=a(1970),f=a(2058),m=a(2329),g=a(29);function b(e,t,a){const i=function(e){const[t,a]=Object(s.useState)(!0);return Object(s.useEffect)((()=>{e&&(e.startDate!==Object(p.default)(Object(j.default)(new Date),"yyyy-MM-dd")||e.endDate&&Object(f.default)(e.endDate,"yyyy-MM-dd",new Date)<Object(m.a)()||e.location||e.campaign)&&a(!1)}),[e]),t}(t),[o,l]=Object(s.useState)([]),n=Object(r.d)((e=>e.auth.token));return Object(s.useEffect)((()=>{if(!i){const t=Object(p.default)(Object(j.default)(new Date),"yyyy-MM-dd");Object(g.b)("tasks/statistics/?startDate=".concat(t,"&organisationId=").concat(e),n).then((e=>l(e.taskStats))).catch((e=>console.log(e)))}}),[i,e,n]),Object(s.useEffect)((()=>{i&&l(a)}),[i,a]),o}var h=a(120),v=a(164),y=a(81),O=a(50),M=a(20),w=a(70),x=a(1932),k=a(13),I=a(0);const D=()=>{const e=Object(O.a)();return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("span",{"data-tip":e.formatMessage(w.a.actionsNeededHelp),children:[Object(I.jsx)(n.a,{...w.a.actionsNeeded}),Object(I.jsx)(k.I,{className:"blue-grey h1 w1 v-mid pb1 ml2"})]}),Object(I.jsx)(y.a,{place:"bottom",className:"mw6",effect:"solid"})]})};function N(e){let{tasks:t}=e;const a=t.ready+t.invalidated+t.lockedForMapping,s=t.mapped+t.lockedForValidation;return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{className:"pa2 w-25-l w-50-m w-100 fl",children:Object(I.jsx)("div",{className:"cf pa3 bg-white shadow-4",children:Object(I.jsx)(x.b,{label:Object(I.jsx)(n.a,{...w.a.toBeMapped}),className:"tc",value:Object(I.jsx)(M.a,{value:a})})})}),Object(I.jsx)("div",{className:"pa2 w-25-l w-50-m w-100 fl",children:Object(I.jsx)("div",{className:"cf pa3 bg-white shadow-4",children:Object(I.jsx)(x.b,{label:Object(I.jsx)(n.a,{...w.a.readyForValidation}),className:"tc",value:Object(I.jsx)(M.a,{value:s})})})}),Object(I.jsx)("div",{className:"pa2 w-25-l w-100 fl",children:Object(I.jsx)("div",{className:"cf pa3 bg-white shadow-4",children:Object(I.jsx)(x.b,{label:Object(I.jsx)(D,{}),className:"tc",value:Object(I.jsx)(M.a,{value:2*a+s})})})})]})}var _=a(2009),T=a(1929),E=a(1912),C=a(1959),S=a(1911);function A(e,t){const a=Object(s.useCallback)((()=>{const a=function(e){Object(S.a)(1,arguments);var t=Object(E.default)(e);return Object(C.default)(t,Object(j.default)(t))+1}(t),s=function(e){Object(S.a)(1,arguments);var t=Object(E.default)(e).getFullYear();return t%400===0||t%4===0&&t%100!==0}(t)?366:365;return Math.round(e*s/a)}),[e,t]);return a()}var F=a(2134);function P(e){let{completedActions:t,orgName:a}=e;const[s,r]=Object(F.c)(t),i=parseInt(t/r*100),o=A(t,new Date),l=Object(F.d)(o,"FREE"),c=Object(_.default)(new Date);return Object(I.jsx)("div",{className:"w-100 cf pb2",children:Object(I.jsxs)("div",{className:"cf ph2 bg-white",children:[Object(I.jsx)("div",{className:"w-10-l w-20-m w-100 fl",children:Object(I.jsx)("h1",{className:"relative tc w-100 dib red barlow-condensed ma0 ph4 v-mid top--1",style:{fontSize:"8rem"},children:s.level})}),Object(I.jsx)("div",{className:"w-60-ns w-100 fl pl2-ns",children:r&&Object(I.jsx)(T.a,{height:2,className:"pt3 mt4 bg-white",secondBarValue:i,children:Object(I.jsx)("p",{className:"f6 lh-copy ma0 white f7 fw4",children:Object(I.jsx)(n.a,{...w.a.levelTooltip,values:{n:Object(I.jsx)(M.a,{value:t}),total:Object(I.jsx)(M.a,{value:r}),percent:i,nextLevel:Object(I.jsx)("strong",{children:s.level+1})}})})})}),Object(I.jsxs)("div",{className:"w-100 fl mt3",children:[r&&Object(I.jsx)("div",{className:"pa2 w-25-l w-50-m w-100 fl",children:Object(I.jsx)("div",{className:"cf pa3 bg-white shadow-4",children:Object(I.jsx)(x.b,{label:Object(I.jsx)(n.a,{...w.a.estimatedLevel,values:{year:c}}),className:"tc",value:Object(I.jsx)(M.a,{value:l.level})})})}),r&&Object(I.jsx)("div",{className:"pa2 w-25-l w-50-m w-100 fl",children:Object(I.jsx)("div",{className:"cf pa3 bg-white shadow-4",children:Object(I.jsx)(x.b,{label:Object(I.jsx)(n.a,{...w.a.actionsToNextLevel,values:{n:s.level+1}}),className:"tc",value:Object(I.jsx)(M.a,{value:r-t})})})})]}),!r&&Object(I.jsx)("div",{className:"w-100 fl pv2",children:Object(I.jsxs)("div",{children:[Object(I.jsx)(n.a,{...w.a.levelInfo,values:{org:Object(I.jsx)("strong",{children:a}),level:s.level}})," ",Object(I.jsx)(n.a,{...w.a.topLevelInfo})]})})]})})}function L(e){let{completedActions:t,type:a,subscriptionTier:s}=e;const r=A(t,new Date),i=Object(F.d)(r,a),o=s?F.a.filter((e=>e.level===s))[0]:null,l=o&&o.level<5?F.a.filter((e=>e.level===o.level+1))[0].minActions:null,c=Object(F.b)(l),d=parseInt(t/l*100),u="free"!==i.tier&&"DISCOUNTED"===a,p=Object(_.default)(new Date);return Object(I.jsx)("div",{className:"w-100 cf pb2",children:Object(I.jsxs)("div",{className:"cf ph2 bg-white",children:[Object(I.jsxs)("div",{className:"w-20-l w-third-m w-100 fl tc",children:[Object(I.jsx)("h1",{className:"relative f1 tc w-100 dib ttu red barlow-condensed ma0 pt2 mt3",children:o&&Object(I.jsx)(n.a,{...w.a["".concat(o.tier,"Tier")]})}),Object(I.jsx)("span",{className:"ma0 h2 f7 b blue-grey",children:Object(I.jsx)(n.a,{...w.a.subscribedTier})})]}),Object(I.jsx)("div",{className:"w-50-l w-two-thirds-m w-100 fl pl2-ns",children:l&&Object(I.jsx)(T.a,{height:2,className:"pt1 mt4 bg-white",secondBarValue:d,children:Object(I.jsx)("p",{className:"f6 lh-copy ma0 white f7 fw4",children:Object(I.jsx)(n.a,{...w.a.tierTooltip,values:{n:Object(I.jsx)(M.a,{value:t}),total:Object(I.jsx)(M.a,{value:l}),percent:d,nextTier:Object(I.jsx)("strong",{children:Object(I.jsx)(n.a,{...w.a["".concat(c.tier,"Tier")]})})}})})})}),Object(I.jsxs)("div",{className:"w-100 fl mt3",children:[Object(I.jsx)("div",{className:"pa2 w-25-l w-50-m w-100 fl",children:Object(I.jsx)("div",{className:"cf pa3 bg-white shadow-4",children:Object(I.jsx)(x.b,{label:Object(I.jsx)(n.a,{...w.a.estimatedTier,values:{year:p}}),className:"tc",value:Object(I.jsx)("span",{className:"ttu",children:Object(I.jsx)(n.a,{...w.a["".concat(i.tier,"Tier")]})})})})}),Object(I.jsx)("div",{className:"pa2 w-25-l w-50-m w-100 fl",children:Object(I.jsx)("div",{className:"cf pa3 bg-white shadow-4",children:Object(I.jsx)(x.b,{label:Object(I.jsx)(n.a,{...w.a.estimatedCost,values:{year:p}}),className:"tc",value:Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(M.a,{value:i.fee,style:"currency",currency:"USD"}),u?Object(I.jsxs)("span",{className:"f4 ttl",children:[" ","(",Object(I.jsx)(n.a,{...w.a.discounted}),")"]}):""]})})})}),l&&Object(I.jsx)("div",{className:"pa2 w-25-l w-50-m w-100 fl",children:Object(I.jsx)("div",{className:"cf pa3 bg-white shadow-4",children:Object(I.jsx)(x.b,{label:Object(I.jsx)(n.a,{...w.a.actionsRemaining,values:{name:Object(I.jsx)(n.a,{...w.a["".concat(o.tier,"Tier")]})}}),className:"tc",value:Object(I.jsx)(M.a,{value:t<l?l-t:0})})})})]})]})})}var R=a(2145),U=a(1913);var Y=a(1918),V=a(1977),B=a(1975);const H=e=>{let{projects:t,orgName:a}=e;const s=t?t.draft+t.published+t.archived:0,r=Object(p.default)(function(e,t){Object(S.a)(2,arguments);var a=Object(E.default)(e),s=Object(U.a)(t);return a.setMonth(0),a.setDate(s),a}(new Date,1),"yyyy-MM-dd"),i=[{name:Object(I.jsx)(n.a,{...Y.a.statusPUBLISHED}),value:t?t.published:0,link:"/manage/projects/?managedByMe=1&status=PUBLISHED&organisation=".concat(a)},{name:Object(I.jsx)(n.a,{...Y.a.statusDRAFT}),value:t?t.draft:0,link:"/manage/projects/?status=DRAFT&organisation=".concat(a)},{name:Object(I.jsx)(n.a,{...w.a.stale}),value:t?t.stale:0,link:"/manage/projects/?stale=1&organisation=".concat(a)},{name:Object(I.jsx)(n.a,{...w.a.createdThisYear}),value:t?t.recent:0,link:"/manage/projects/?createdFrom=".concat(r,"&status=ARCHIVED,PUBLISHED&organisation=").concat(a)}].sort(((e,t)=>Object(B.a)(e,t,"value")));return Object(I.jsx)("div",{className:"pv2 ph3 bg-white blue-dark shadow-4",children:t&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("h3",{className:"f4 mv0 fw6 pt3",children:Object(I.jsx)(n.a,{...w.a.projectsCreated,values:{number:s}})}),Object(I.jsx)("ol",{className:"pa0 mt1 mb2",children:i.map(((e,t)=>Object(I.jsx)(V.a,{name:e.name,link:e.link,percentValue:e.value/i[0].value,number:Object(I.jsx)(n.a,{...w.a.numberOfProjects,values:{number:e.value}})},t)))})]})})},Q=()=>{const e=Object(i.q)(),{id:t}=Object(i.s)(),a=Object(r.d)((e=>e.auth.token)),o=Object(r.d)((e=>{var a;return"ADMIN"===e.auth.userDetails.role||(null===(a=e.auth.organisations)||void 0===a?void 0:a.includes(Number(t)))})),[p,j]=Object(d.b)(),[f,m]=Object(d.a)({taskStats:[]},p,"organisationId=".concat(t)),[g,y,O]=Object(h.a)("organisations/".concat(t,"/?omitManagerList=true"),t),[M,w,x]=Object(h.a)("organisations/".concat(t,"/statistics/"),t),k=b(t,p,f.stats),D=Object(u.a)(k),_=D.mapped+D.validated,T=["DISCOUNTED","FULL_FEE"].includes(O.type)&&O.subscriptionTier&&o;return Object(v.b)("".concat(O.name||"Organization"," stats")),Object(s.useEffect)((()=>{a||e("/login")})),a?Object(I.jsx)(l.a,{showLoadingAnimation:!0,rows:26,ready:!g&&!y,className:"pv3 ph2 ph4-ns",children:Object(I.jsxs)("div",{className:"w-100 cf pv3 ph2 ph4-ns bg-white blue-dark",children:[Object(I.jsx)("img",{src:O.logo,className:"w3 dib v-mid mr3",alt:O.name}),Object(I.jsx)("h3",{className:"f2 fw6 mv2 ttu barlow-condensed blue-dark dib v-mid",children:O.name}),Object(I.jsxs)("div",{className:"w-100 fl cf",children:[Object(I.jsx)("h4",{className:"f3 fw6 ttu barlow-condensed blue-dark mt0 pt4 mb3",children:Object(I.jsx)(n.a,{...c.a.tasksStatistics})}),Object(I.jsx)(R.a,{query:p,setQuery:j,stats:f.stats,error:f.isError,loading:f.isLoading,retryFn:m})]}),Object(I.jsxs)("div",{className:"w-100 fl cf",children:[Object(I.jsx)("h4",{className:"f3 fw6 ttu barlow-condensed blue-dark mt0 pt4 mb2",children:Object(I.jsx)(n.a,{...c.a.remainingTasks})}),Object(I.jsx)(l.a,{showLoadingAnimation:!0,rows:5,delay:500,ready:!M&&!w,children:Object(I.jsx)(N,{tasks:x&&x.activeTasks})})]}),Object(I.jsxs)("div",{className:"w-100 fl cf",children:[Object(I.jsx)("h4",{className:"f3 fw6 ttu barlow-condensed blue-dark mt0 pt4 mb2",children:T?Object(I.jsx)(n.a,{...c.a.tier}):Object(I.jsx)(n.a,{...c.a.usageLevel})}),Object(I.jsx)(l.a,{showLoadingAnimation:!0,rows:5,delay:500,ready:D,children:T?Object(I.jsx)(L,{type:O.type,subscriptionTier:O.subscriptionTier,completedActions:_}):Object(I.jsx)(P,{orgName:O.name,completedActions:_})})]}),Object(I.jsxs)("div",{className:"w-40-l w-100 fl cf",children:[Object(I.jsx)("h4",{className:"f3 fw6 ttu barlow-condensed blue-dark mt0 pt4 mb2",children:Object(I.jsx)(n.a,{...c.a.orgProjectStats})}),Object(I.jsx)("div",{className:"pa2",children:Object(I.jsx)(H,{projects:x&&x.projects,orgName:O.name})})]})]})}):null}}}]);
//# sourceMappingURL=organisationStats.bbb3cbd3.chunk.js.map