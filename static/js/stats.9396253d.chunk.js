(this["webpackJsonpTaskingManager-frontend"]=this["webpackJsonpTaskingManager-frontend"]||[]).push([[818],{1923:function(e,t,a){"use strict";var s=a(20);t.a=Object(s.b)({loading:{id:"users.detail.loading",defaultMessage:"loading"},contributionTimelineTitle:{id:"users.detail.contributionTimelineTitle",defaultMessage:"Contribution Timeline"},projectsTitle:{id:"users.detail.projectsTitle",defaultMessage:"Projects"},countries:{id:"users.detail.countries",defaultMessage:"Countries"},timeSpentMapping:{id:"users.detail.timeSpentMapping",defaultMessage:"Time spent mapping"},buildingsMapped:{id:"users.detail.buildingsMapped",defaultMessage:"Buildings mapped"},roadMapped:{id:"users.detail.roadMapped",defaultMessage:"Km road mapped"},poiMapped:{id:"users.detail.poiMapped",defaultMessage:"Points of interests mapped"},waterwaysMapped:{id:"users.detail.waterwaysMapped",defaultMessage:"Km waterways mapped"},userMapped:{id:"users.detail.tasksMapped",defaultMessage:"{user} mapped"},you:{id:"users.detail.you",defaultMessage:"You"},userValidated:{id:"users.detail.tasksValidated",defaultMessage:"{user} validated"},invalidated:{id:"users.detail.invalidated",defaultMessage:"Needed more mapping"},validated:{id:"users.detail.validated",defaultMessage:"Validated"},finished:{id:"users.detail.finished",defaultMessage:"Finished"},topProjectsMappedTitle:{id:"users.detail.topProjectsMappedTitle",defaultMessage:"Top 5 projects contributed"},noTopProjectsData:{id:"users.detail.topProjectsMapped.error",defaultMessage:"No projects mapped until now."},topCausesTitle:{id:"users.detail.topCausesTitle",defaultMessage:"Top causes contributed to"},others:{id:"users.detail.others",defaultMessage:"Others"},noProjectsData:{id:"users.detail.projects.noData",defaultMessage:"Information is not available because no projects were mapped until now."},editsTitle:{id:"users.detail.editsTitle",defaultMessage:"Edits by numbers"},noEditsData:{id:"users.detail.edits.error",defaultMessage:"No data to show yet. OpenStreetMap edits stats are updated with a delay of one hour."},topCountriesTitle:{id:"users.detail.topCountriesTitle",defaultMessage:"Top 5 countries most mapped"},tasks:{id:"users.detail.tasks",defaultMessage:"tasks"},heatmapNoContribution:{id:"users.detail.heatmapNoContribution",defaultMessage:"No contribution"},heatmapContribution:{id:"users.detail.heatmapContribution",defaultMessage:"contribution"},heatmapContributions:{id:"users.detail.heatmapContributions",defaultMessage:"contributions"},heatmapLegendMore:{id:"users.detail.heatmapLegendMore",defaultMessage:"more"},heatmapLegendLess:{id:"users.detail.heatmapLegendLess",defaultMessage:"less"},teams:{id:"users.detail.teams",defaultMessage:"Teams"},userOrganisationsError:{id:"users.header.organisations.error",defaultMessage:"Couldn't load organisations at this time"}})},1932:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return l}));a(1);var s=a(20),r=a(0);const i=e=>{let{icon:t,description:a,value:i,className:c,invertColors:n=!1}=e;return Object(r.jsxs)("div",{className:"cf pt3 pb3 ph3 br1 ".concat(n?"bg-red white":"bg-white red shadow-6"," flex items-center ").concat(c||""),children:[Object(r.jsx)("div",{className:"w-30 fl ml2",children:t}),Object(r.jsx)(l,{value:Number(i)||0===i?Object(r.jsx)(s.a,{value:Math.trunc(i)}):i,label:a,className:"w-70 pt3-m mb1 fl",invertColors:n})]})},l=e=>{let{value:t,label:a,className:s,invertColors:i=!1}=e;return Object(r.jsxs)("div",{className:s,children:[Object(r.jsx)("h3",{className:"ma0 mb1 barlow-condensed f2 fw5 ".concat(i?"white":"red"),children:t}),Object(r.jsx)("span",{className:"ma0 h2 f7 fw5 ".concat(i?"white":"blue-grey"),children:a})]})}},1948:function(e,t,a){"use strict";var s=a(20);t.a=Object(s.b)({projectTitle:{id:"project.mainSection.title",defaultMessage:"Generic project"},mappingDifficulty:{id:"project.nav.mappingDifficulty",defaultMessage:"Difficulty level"},moreFilters:{id:"project.nav.moreFilters",defaultMessage:"More filters"},campaign:{id:"project.nav.campaign",defaultMessage:"Campaign"},startDate:{id:"navFilters.startDate",defaultMessage:"From"},startDatePlaceholder:{id:"navFilters.startDate.placeholder",defaultMessage:"Click to select a start date"},endDate:{id:"navFilters.endDate",defaultMessage:"To"},endDatePlaceholder:{id:"navFilters.endDatePlace.placeholder",defaultMessage:"Click to select an end date"},dateRange:{id:"navFilters.dateRange",defaultMessage:"Date Range"},thisWeek:{id:"navFilters.thisWeek",defaultMessage:"This week"},thisMonth:{id:"navFilters.thisMonth",defaultMessage:"This month"},thisYear:{id:"navFilters.thisYear",defaultMessage:"This year"},lastWeek:{id:"navFilters.lastWeek",defaultMessage:"Last week"},lastMonth:{id:"navFilters.lastMonth",defaultMessage:"Last month"},lastYear:{id:"navFilters.lastYear",defaultMessage:"Last year"},customRange:{id:"navFilters.customRange",defaultMessage:"Custom range"},showMapToggle:{id:"project.nav.showMapToggle",defaultMessage:"Show map"},listViewToggle:{id:"project.nav.listViewToggle",defaultMessage:"List view"},typesOfMapping:{id:"project.navFilters.typesOfMapping",defaultMessage:"Types of mapping"},projectsToMap:{id:"project.navFilters.action.map",defaultMessage:"Projects to map"},projectsToValidate:{id:"project.navFilters.action.validate",defaultMessage:"Projects to validate"},anyProject:{id:"project.navFilters.action.any",defaultMessage:"Any project"},exactMatch:{id:"project.navFilters.typesOfMapping.exactMatch",defaultMessage:"Exact match"},campaigns:{id:"project.navFilters.campaigns",defaultMessage:"All campaigns"},showAllXTags:{id:"project.navFilters.showAllXTags",defaultMessage:"Show {typeOfTag}"},searchPlaceholder:{id:"project.inputs.placeholders.search",defaultMessage:"Search project"},organisation:{id:"project.navFilters.organisation",defaultMessage:"Organization"},organisations:{id:"project.navFilters.organisations",defaultMessage:"All Organizations"},location:{id:"project.navFilters.location",defaultMessage:"Location"},locations:{id:"project.navFilters.locations",defaultMessage:"Locations"},interest:{id:"project.navFilters.interest",defaultMessage:"Interest"},interests:{id:"project.navFilters.interests",defaultMessage:"Interests"},filterByMyInterests:{id:"project.navFilters.filterByMyInterests",defaultMessage:"Filter by my interests"},errorLoadingTheXForY:{id:"project.navFilters.error",defaultMessage:"Error loading the {xWord} for {yWord}"},filters:{id:"project.nav.filters",defaultMessage:"Filters"},projects:{id:"project.nav.projects",defaultMessage:"Projects"},myProjects:{id:"project.nav.myprojects",defaultMessage:"My Projects"},manageProjects:{id:"project.nav.manageProjects",defaultMessage:"Manage Projects"},favorited:{id:"project.nav.favorited",defaultMessage:"Favorited"},contributed:{id:"project.nav.contributed",defaultMessage:"Contributed"},allprojects:{id:"project.nav.allprojects",defaultMessage:"All"},active:{id:"project.nav.active",defaultMessage:"Active"},stale:{id:"project.nav.stale",defaultMessage:"Stale"},managed:{id:"project.nav.managed",defaultMessage:"Managed by me"},created:{id:"project.nav.created",defaultMessage:"Created by me"},draft:{id:"project.nav.draft",defaultMessage:"Draft"},archived:{id:"project.nav.archived",defaultMessage:"Archived"},paginationCount:{id:"project.pagination.count",defaultMessage:"Showing {number} of {total} projects"},clearFilters:{id:"project.nav.clearFilters",defaultMessage:"Clear filters"},sortBy:{id:"project.sortby",defaultMessage:"Sort by"},sortByIdDesc:{id:"project.sortby.id.descending",defaultMessage:"New projects"},sortByIdAsc:{id:"project.sortby.id.ascending",defaultMessage:"Old projects"},sortByPriority:{id:"project.sortby.priority",defaultMessage:"Urgent projects"},sortByEasy:{id:"project.sortby.difficulty.easy",defaultMessage:"Easy projects"},sortByChallenging:{id:"project.sortby.difficulty.challenging",defaultMessage:"Challenging projects"},sortByMoreActive:{id:"project.sortby.more_active",defaultMessage:"Active projects"},apply:{id:"project.nav.apply",defaultMessage:"Apply"},clear:{id:"project.nav.clear",defaultMessage:"Clear"},retry:{id:"project.results.retry",defaultMessage:"Retry"}})},1966:function(e,t,a){"use strict";var s=a(1),r=a(50),i=a(81),l=a(29),c=a(9),n=a(13),d=a(20),o=Object(d.b)({generic:{id:"stats.ohsome.timestamp.generic",defaultMessage:"These statistics come from ohsomeNow Stats and were last updated at {formattedDate} ({timeZone}). Missing fields will be made available soon!"},project:{id:"stats.ohsome.timestamp.project",defaultMessage:"These stats were retrieved using the default changeset comment of the project and were last updated at {formattedDate} ({timeZone})."}}),u=a(0);t.a=function(e){let{messageType:t}=e;const a=Object(r.a)(),[d,j]=Object(s.useState)(null);return Object(s.useEffect)((()=>{Object(l.a)("".concat(c.w,"/metadata")).then((e=>{j(e.result.max_timestamp)})).catch((e=>console.error(e)))}),[]),Object(u.jsxs)("div",{children:[Object(u.jsx)(n.I,{className:"blue-grey h1 w1 v-mid ml2 pointer","data-tip":a.formatMessage(o[t],{formattedDate:a.formatDate(d,{year:"numeric",month:"short",day:"2-digit",hour:"numeric",minute:"numeric"}),timeZone:a.timeZone}),"data-for":"ohsome-timestamp"}),Object(u.jsx)(i.a,{id:"ohsome-timestamp",place:"top",className:"mw6",effect:"solid"})]})}},1969:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return p}));var s=a(2116),r=a(1949),i=a(1982),l=a(1970),c=a(1983),n=a(1971),d=a(1984);function o(e){let t=new Date;return t.setMonth(t.getMonth()-e)}const u=new Date,j="yyyy-MM-dd",p={thisWeek:{start:Object(s.default)(Object(r.default)(u),j),end:Object(s.default)(u,j)},thisMonth:{start:Object(s.default)(Object(i.default)(u),j),end:Object(s.default)(u,j)},thisYear:{start:Object(s.default)(Object(l.default)(u),j),end:Object(s.default)(u,j)},lastWeek:{start:Object(s.default)(Object(r.default)((new Date).setDate(u.getDate()-7)),j),end:Object(s.default)(Object(c.default)((new Date).setDate(u.getDate()-7)),j)},lastMonth:{start:Object(s.default)(Object(i.default)((new Date).setMonth(u.getMonth()-1)),j),end:Object(s.default)(Object(n.default)((new Date).setMonth(u.getMonth()-1)),j)},lastYear:{start:Object(s.default)(Object(l.default)((new Date).setFullYear(u.getFullYear()-1)),j),end:Object(s.default)(Object(d.default)((new Date).setFullYear(u.getFullYear()-1)),j)}}},1977:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return d}));a(1);var s=a(23),r=a(30),i=a(1923),l=a(0);const c=e=>{let{percent:t}=e;return Object(l.jsx)("div",{className:"w-100 relative mt2",children:Object(l.jsx)("div",{style:{height:"0.5em",width:"".concat(100*t,"%")},className:"bg-red br-pill absolute"})})},n=e=>{let{name:t,link:a,percentValue:r,number:i,numberUnit:n}=e;return Object(l.jsxs)("li",{className:"w-100 cf list pv3",children:[Object(l.jsxs)("div",{className:"w-100 cf mr4",children:[Object(l.jsx)("div",{className:"di ma0 f7 b fl",children:a?Object(l.jsx)(s.a,{className:"link blue-dark",to:a,children:t}):t}),Object(l.jsxs)("div",{className:"di ma0 f7 fr",children:[Object(l.jsx)("span",{className:"b mr1",children:i}),n&&Object(l.jsx)("span",{className:"blue-grey",children:n})]})]}),Object(l.jsx)("div",{className:"w-100 cf",children:Object(l.jsx)(c,{percent:r})})]})},d=e=>{let{data:t,valueField:a,nameField:s,linkBase:c,linkField:d}=e;return Object(l.jsx)("ol",{className:"pa0 mt1 mb0",children:t.map(((e,t)=>Object(l.jsx)(n,{name:e[s],link:c?"".concat(c).concat(e[d]):null,percentValue:e.percent,number:e[a],numberUnit:Object(l.jsx)(r.a,{...i.a.tasks})},t)))})}},2046:function(e,t,a){"use strict";a.d(t,"c",(function(){return m})),a.d(t,"b",(function(){return f})),a.d(t,"a",(function(){return g}));var s=a(1),r=a(107),i=a(2058),l=a(2116),c=a(1985),n=a.n(c),d=a(30),o=a(50),u=(a(170),a(1981),a(1969)),j=a(1948),p=a(13),b=a(0);const m=e=>{let{fieldsetName:t,fieldsetStyle:a,titleStyle:s,selectedTag:r,setQueryForChild:i,allQueryParamsForChild:l,options:c,payloadKey:n}=e;const o=Object(b.jsx)(d.a,{...j.a[t]}),u=Object(b.jsx)(d.a,{...j.a["".concat(t,"s")]});return Object(b.jsxs)("fieldset",{id:t,className:a,children:[Object(b.jsx)("legend",{className:s,children:o}),c.isError?Object(b.jsx)("div",{className:"bg-tan pa4",children:Object(b.jsx)(d.a,{...j.a.errorLoadingTheXForY,values:{xWord:Object(b.jsx)(d.a,{...j.a.filters}),yWord:u}})}):Object(b.jsx)(h,{fieldsetTitle:o,defaultSelectedItem:u,fieldsetName:t,payloadKey:n,queryParamSelectedItem:r||o,tagOptionsFromAPI:c,setQuery:i,allQueryParams:l})]})},f=e=>{let{fieldsetName:t,fieldsetStyle:a,titleStyle:i,setQueryForChild:l,allQueryParamsForChild:c,isCustomDateRange:n,setIsCustomDateRange:o,startDateInQuery:p,endDateInQuery:m}=e;const[f,g]=Object(s.useState)("thisYear"),h=[{value:"thisWeek",label:Object(b.jsx)(d.a,{...j.a.thisWeek})},{value:"thisMonth",label:Object(b.jsx)(d.a,{...j.a.thisMonth})},{value:"thisYear",label:Object(b.jsx)(d.a,{...j.a.thisYear})},{value:"lastWeek",label:Object(b.jsx)(d.a,{...j.a.lastWeek})},{value:"lastMonth",label:Object(b.jsx)(d.a,{...j.a.lastMonth})},{value:"lastYear",label:Object(b.jsx)(d.a,{...j.a.lastYear})},(n||"custom"===f)&&{value:"custom",label:Object(b.jsx)(d.a,{...j.a.customRange}),isOptionDisabled:!0}].filter((e=>e));return Object(s.useEffect)((()=>{if(!m&&p===u.a.thisYear.start)return void g("thisYear");const e=Object.keys(u.a).find((e=>u.a[e].start===p&&u.a[e].end===m));g(e||"custom")}),[p,m]),Object(b.jsxs)("fieldset",{id:t,className:a,children:[Object(b.jsx)("legend",{className:i,children:Object(b.jsx)(d.a,{...j.a.dateRange})}),Object(b.jsx)(r.a,{onChange:e=>{let{value:t}=e;l({...c,page:void 0,startDate:u.a[t].start,endDate:u.a[t].end},"pushIn"),o(!1),g(t)},classNamePrefix:"react-select",options:h,value:n?h.filter((e=>"custom"===e.value)):h.filter((e=>e.value===f)),isOptionDisabled:e=>e.isOptionDisabled})]})},g=e=>{let{fieldsetName:t,fieldsetStyle:a,titleStyle:s,selectedValue:r,setQueryForChild:c,allQueryParamsForChild:u,setIsCustomDateRange:m}=e;const f=Object(o.a)(),g="yyyy-MM-dd";return Object(b.jsxs)("fieldset",{id:t,className:a,children:[Object(b.jsx)("legend",{className:s,children:Object(b.jsx)(d.a,{...j.a[t]})}),Object(b.jsxs)("div",{className:"flex",children:[Object(b.jsx)(p.e,{className:"blue-grey dib w1 pr2 v-mid"}),Object(b.jsx)(n.a,{selected:r?Object(i.default)(r,g,new Date):null,onChange:e=>{c({...u,page:void 0,[t]:e?Object(l.default)(e,g):null},"pushIn"),m(!0)},dateFormat:g,className:"w-auto pv2 ph1 ba b--grey-light",placeholderText:f.formatMessage(j.a["".concat(t,"Placeholder")]),showYearDropdown:!0,scrollableYearDropdown:!0})]})]})},h=e=>{let{tagOptionsFromAPI:{tags:t},fieldsetTitle:a,fieldsetName:s,queryParamSelectedItem:i,defaultSelectedItem:l,allQueryParams:c,setQuery:n,payloadKey:d="name"}=e;const o=e=>e&&e[d]?e[d]:e,u=t.find((e=>e[d]===i));return Object(b.jsx)(r.a,{isLoading:t.isLoading,onChange:e=>{const t=o(e),a=e&&t===l?void 0:t;n({...c,page:void 0,[s]:a||void 0},"pushIn")},classNamePrefix:"react-select",getOptionLabel:e=>e.name||e,getOptionValue:o,placeholder:c[s]||a,options:t,value:u||null,isClearable:!0,isDisabled:"interests"===s&&c.basedOnMyInterests,styles:{menu:e=>({...e,zIndex:6})}})}},2063:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a(1),r=a(10),i=a(158),l=a(9);const c=(e,t)=>{switch(t.type){case"FETCH_INIT":return{...e,isLoading:!0,isError:!1};case"FETCH_SUCCESS":return{...e,isLoading:!1,isError:!1,tags:t.payload&&t.payload[Object.keys(t.payload)[0]]};case"FETCH_FAILURE":return{...e,isLoading:!1,isError:!0};default:throw console.log(t),new Error}},n=(e,t,a)=>{const n=Object(r.d)((e=>e.auth.token)),d=Object(r.d)((e=>e.preferences.locale)),[o,u]=Object(s.useReducer)(c,{isLoading:!0,isError:!1,tags:e});return Object(s.useEffect)((()=>{let e=!1;return(async()=>{const s={organisations:"?omitManagerList=true"};u({type:"FETCH_INIT"});try{let r;r=n?await Object(i.a)({url:"".concat(l.b).concat(t,"/").concat(s[t]?s[t]:""),method:"GET",headers:{Authorization:"Token ".concat(n)}}):await Object(i.a)("".concat(l.b).concat(t,"/")),e||(r&&r.headers&&-1!==r.headers["content-type"].indexOf("json")?(a&&(r.data.tags=a(r.data.tags,d)),u({type:"FETCH_SUCCESS",payload:r.data})):(console.error("Invalid return content-type for organisation tags"),u({type:"FETCH_FAILURE"})))}catch(r){e||u({type:"FETCH_FAILURE"})}})(),()=>{e=!0}}),[t,n,a,d]),[o]}},2112:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a(1);function r(e,t){return e.reduce(((e,a)=>e+a[t]),0)}function i(e){const[t,a]=Object(s.useState)({mapped:0,validated:0});return Object(s.useEffect)((()=>{e&&e.length&&a({mapped:r(e,"mapped"),validated:r(e,"validated")})}),[e]),t}},2133:function(e,t,a){"use strict";a.d(t,"b",(function(){return b})),a.d(t,"a",(function(){return h}));var s=a(1),r=a(10),i=a(46),l=(a(174),a(158)),c=a(2116),n=a(1970),d=a(175),o=a(123),u=a(122),j=a(9);const p={startDate:Object(i.withDefault)(i.StringParam,Object(c.default)(Object(n.default)(Date.now()),"yyyy-MM-dd")),endDate:i.StringParam,campaign:i.StringParam,location:i.StringParam,project:d.a,organisationName:i.StringParam,organisationId:i.NumberParam},b=()=>Object(i.useQueryParams)(p),m={startDate:"startDate",endDate:"endDate",campaign:"campaign",location:"country",project:"projectId",organisationName:"organisationName",organisationId:"organisationId"},f={taskStats:[]},g=(e,t)=>{switch(t.type){case"FETCH_INIT":return{...e,isLoading:!0,isError:!1};case"FETCH_SUCCESS":return{...e,isLoading:!1,isError:!1,stats:t.payload.taskStats};case"FETCH_FAILURE":return{...e,isLoading:!1,isError:!0};default:throw console.log(t),new Error}},h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const i=Object(o.b)(t,1500),c=Object(r.d)((e=>e.auth.token)),n=new AbortController,[d,p]=Object(s.useReducer)(g,{isLoading:!0,isError:!1,stats:e.taskStats,queryParamsState:t[0]}),b=async()=>{p({type:"FETCH_INIT"});let e={"Content-Type":"application/json",Authorization:"Token ".concat(c)};const t=Object(u.a)(i,m);a.split(",").forEach((e=>{const[a,s]=e.trim().split("=");t[a]=s})),await Object(l.a)({url:"".concat(j.b,"tasks/statistics/"),method:"GET",headers:e,params:t,signal:n.signal}).then((e=>{null!==e&&void 0!==e&&e.headers&&-1!==e.headers["content-type"].indexOf("json")?p({type:"FETCH_SUCCESS",payload:e.data}):p({type:"FETCH_FAILURE"})})).catch((e=>{var t,a;if(l.a.isCancel(e)||p({type:"FETCH_FAILURE"}),"No statistics found"===(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.Error)){const e=Object.assign(f,{pagination:{total:0}});p({type:"FETCH_SUCCESS",payload:e})}}))};return Object(s.useEffect)((()=>(b(),()=>{n.abort()})),[i,c,a]),[d,b]}},2145:function(e,t,a){"use strict";a.d(t,"a",(function(){return M}));var s=a(1),r=a.n(s),i=a(92),l=a.n(i),c=a(30),n=a(70),d=a(2063),o=a(2058),u=a(2329),j=a(2330),p=a(2135);var b=a(169),m=a(2046),f=a(20),g=a(1932),h=a(2112),O=a(0);function y(e){let{stats:t}=e;const a=Object(h.a)(t);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"pa2 w-25-l w-50-m w-100 fl",children:Object(O.jsx)("div",{className:"cf pa3 bg-white shadow-4",children:Object(O.jsx)(g.b,{label:Object(O.jsx)(c.a,{...n.a.tasksMapped}),className:"tc",value:Object(O.jsx)(f.a,{value:a.mapped})})})}),Object(O.jsx)("div",{className:"pa2 w-25-l w-50-m w-100 fl",children:Object(O.jsx)("div",{className:"cf pa3 bg-white shadow-4",children:Object(O.jsx)(g.b,{label:Object(O.jsx)(c.a,{...n.a.tasksValidated}),className:"tc",value:Object(O.jsx)(f.a,{value:a.validated})})})}),Object(O.jsx)("div",{className:"pa2 w-25-l w-100 fl",children:Object(O.jsx)("div",{className:"cf pa3 bg-white shadow-4",children:Object(O.jsx)(g.b,{label:Object(O.jsx)(c.a,{...n.a.completedActions}),className:"tc",value:Object(O.jsx)(f.a,{value:a.mapped+a.validated})})})})]})}const v=r.a.lazy((()=>Promise.all([a.e(3),a.e(6),a.e(822)]).then(a.bind(null,2344)))),M=e=>{let{query:t,setQuery:a,stats:r,error:i,loading:f,retryFn:g}=e;const[h]=Object(d.a)([],"campaigns"),[M]=Object(d.a)([],"countries",b.b),{startDate:w,endDate:x,campaign:N,location:F}=t,[C,D]=Object(s.useState)(!1),T=function(e){const[t,a]=Object(s.useState)();return Object(s.useEffect)((()=>{if(a({error:!1,detail:""}),e.startDate){const t=Object(o.default)(e.startDate,"yyyy-MM-dd",new Date),s=e.endDate?Object(o.default)(e.endDate,"yyyy-MM-dd",new Date):Object(u.a)();(t>Object(j.a)()||t>s)&&a({error:!0,detail:"badStartDate"}),Object(p.a)(s,t)>366&&a({error:!0,detail:"longDateRange"})}}),[e.startDate,e.endDate]),t}(t),S="bn dib pv0-ns pv2 ph2-ns ph1 mh0 mb1",k="dib ttu fw5 blue-grey mb1";return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"w-100 cf flex flex-wrap",children:[Object(O.jsx)(m.a,{fieldsetName:"startDate",fieldsetStyle:"".concat(S," fl"),titleStyle:k,selectedValue:w,setQueryForChild:a,allQueryParamsForChild:t,setIsCustomDateRange:D}),Object(O.jsx)(m.a,{fieldsetName:"endDate",fieldsetStyle:"".concat(S," fl"),titleStyle:k,selectedValue:x,setQueryForChild:a,allQueryParamsForChild:t,setIsCustomDateRange:D}),Object(O.jsxs)("div",{className:"w-60-l w-100 fl",children:[Object(O.jsx)(m.b,{fieldsetName:"dateRange",fieldsetStyle:"".concat(S," w-20-ns w-100"),titleStyle:k,selectedValue:w,setQueryForChild:a,allQueryParamsForChild:t,isCustomDateRange:C,setIsCustomDateRange:D,startDateInQuery:w,endDateInQuery:x}),Object(O.jsx)(m.c,{fieldsetName:"campaign",fieldsetStyle:"".concat(S," w-30-ns w-100"),titleStyle:k,selectedTag:N,options:h,setQueryForChild:a,allQueryParamsForChild:t}),Object(O.jsx)(m.c,{fieldsetName:"location",fieldsetStyle:"".concat(S," w-30-ns w-100"),titleStyle:k,selectedTag:F,options:M,setQueryForChild:a,allQueryParamsForChild:t,payloadKey:"value"})]})]}),Object(O.jsx)(l.a,{showLoadingAnimation:!0,rows:26,ready:!f,className:"pv3 ph2 ph4-ns",children:!f&&i?Object(O.jsxs)("div",{className:"bg-tan pa4",children:[Object(O.jsx)(c.a,{...n.a.errorLoadingStats}),Object(O.jsx)("div",{className:"pv3",children:T&&T.detail?Object(O.jsx)(c.a,{...n.a[T.detail]}):Object(O.jsx)("button",{className:"pa1 pointer",onClick:()=>g(),children:Object(O.jsx)(c.a,{...n.a.retry})})})]}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"pt3 pb3 ph2 cf mr2 w-100 w-two-thirds-l",children:Object(O.jsx)(s.Suspense,{fallback:Object(O.jsx)("div",{children:"loading..."}),children:Object(O.jsx)(v,{stats:r})})}),Object(O.jsx)("div",{className:"cf w-100",children:Object(O.jsx)(y,{stats:r})})]})})]})}},2357:function(e,t,a){"use strict";a.r(t),a.d(t,"Stats",(function(){return D}));var s=a(1),r=a(30),i=a(62),l=a(2133),c=a(164),n=a(2145),d=a(92),o=a.n(d),u=a(70),j=a(1977),p=a(2116),b=a(2109),m=a(1986);function f(){return Object(m.default)(Date.now())}var g=a(1999);var h=a(120),O=a(0);const y=e=>{let{datePeriod:t}=e;const a=((e,t,a)=>{const[r,i]=Object(s.useState)(null);return Object(s.useEffect)((()=>{let s=t;"month"===e&&(s=Object(p.default)(Object(b.default)(f(),1),"yyyy-MM-dd")),"week"===e&&(s=Object(p.default)(Object(g.default)(f(),1),"yyyy-MM-dd")),i("startDate=".concat(s).concat(a&&"custom"===e?"&endDate=".concat(a):""))}),[t,e,a]),r})(t),[i,l,c]=Object(h.a)("users/statistics/?".concat(a),a),n=c.total>0?c.contributed/c.total:0,d=c.total>0?c.emailVerified/c.total:0;return Object(O.jsx)("div",{className:"pv2 ph3 bg-white blue-dark shadow-4",children:Object(O.jsxs)(o.a,{showLoadingAnimation:!0,rows:6,ready:!i&&!l,className:"pv3 ph2 ph4-ns",children:[Object(O.jsxs)("h3",{className:"f4 mv0 fw6 pt3",children:["month"===t&&Object(O.jsx)(r.a,{...u.a.newUsersOnLastMonth,values:{number:c.total}}),"week"===t&&Object(O.jsx)(r.a,{...u.a.newUsersOnLastWeek,values:{number:c.total}})]}),Object(O.jsxs)("ol",{className:"pa0 mt1 mb2",children:[Object(O.jsx)(j.a,{name:Object(O.jsx)(r.a,{...u.a.activeNewUsers}),percentValue:n,number:"".concat(Math.round(100*n),"%")}),Object(O.jsx)(j.a,{name:Object(O.jsx)(r.a,{...u.a.emailVerified}),percentValue:d,number:"".concat(Math.round(100*d),"%")})]})]})})};var v=a(158),M=a(1923),w=a(9),x=a(13),N=a(1932),F=a(1966);const C=()=>{const[e,t]=Object(s.useState)({edits:0,buildings:0,roads:0,pois:0,waterways:0});Object(s.useEffect)((()=>{(async()=>{try{const e=await v.a.get("".concat(w.w,"/stats/hotosm-project-%2A")),{edits:a,buildings:s,roads:r}=e.data.result;t({edits:a,buildings:s,roads:r,pois:e.data.poi_count_add,waterways:e.data.waterway_km_add})}catch(e){console.error(e)}})()}),[]);const a="h-50 w-50",i={height:"45px"};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"flex items-center",children:[Object(O.jsx)("h4",{className:"f3 fw6 ttu barlow-condensed blue-dark",children:Object(O.jsx)(r.a,{...u.a.totalFeatures})}),Object(O.jsx)(F.a,{messageType:"generic"})]}),Object(O.jsxs)("div",{className:"w-100 cf",children:[Object(O.jsx)(N.a,{icon:Object(O.jsx)(x.G,{className:a,style:i}),description:Object(O.jsx)(r.a,{...M.a.buildingsMapped}),value:e.buildings||0,className:"w-25-l w-50-m w-100 mv1"}),Object(O.jsx)(N.a,{icon:Object(O.jsx)(x.eb,{className:a,style:i}),description:Object(O.jsx)(r.a,{...M.a.roadMapped}),value:e.roads||0,className:"w-25-l w-50-m w-100 mv1"}),Object(O.jsx)(N.a,{icon:Object(O.jsx)(x.T,{className:a,style:i}),description:Object(O.jsx)(r.a,{...M.a.poiMapped}),value:e.pois||0,className:"w-25-l w-50-m w-100 mv1"}),Object(O.jsx)(N.a,{icon:Object(O.jsx)(x.tb,{className:a,style:i}),description:Object(O.jsx)(r.a,{...M.a.waterwaysMapped}),value:e.waterways||0,className:"w-25-l w-50-m w-100 mv1"})]})]})},D=()=>{Object(c.b)("Stats");const[e,t]=Object(l.b)(),[a,s]=Object(l.a)({taskStats:[]},e);return Object(O.jsxs)("div",{className:"w-100 cf pv4",children:[Object(O.jsxs)("div",{className:"w-100 fl cf",children:[Object(O.jsx)("h3",{className:"f2 ma0 ttu barlow-condensed blue-dark dib v-mid",children:Object(O.jsx)(r.a,{...i.a.statistics})}),Object(O.jsx)("h4",{className:"f3 fw6 ttu barlow-condensed blue-dark mt0 pt4 mb3",children:Object(O.jsx)(r.a,{...i.a.tasksStatistics})}),Object(O.jsx)("div",{className:"pv3 ph2 bg-white blue-dark",children:Object(O.jsx)(n.a,{query:e,setQuery:t,stats:a.stats,error:a.isError,loading:a.isLoading,retryFn:s})})]}),Object(O.jsxs)("div",{className:"w-100 fl cf mt3",children:[Object(O.jsx)("h4",{className:"f3 fw6 ttu barlow-condensed blue-dark mt0 pt4 mb3",children:Object(O.jsx)(r.a,{...i.a.newUsers})}),Object(O.jsx)("div",{className:"w-third-l w-50-m w-100 dib ph2",children:Object(O.jsx)(y,{datePeriod:"week"})}),Object(O.jsx)("div",{className:"w-third-l w-50-m w-100 dib ph2",children:Object(O.jsx)(y,{datePeriod:"month"})})]}),Object(O.jsx)("div",{className:"w-100 fl cf mt3 pb3",children:Object(O.jsx)(C,{})})]})}}}]);
//# sourceMappingURL=stats.9396253d.chunk.js.map