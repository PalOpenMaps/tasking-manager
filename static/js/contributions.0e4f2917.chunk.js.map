{"version":3,"sources":["components/alert/index.js","components/taskSelection/messages.js","hooks/UsePermissions.js","components/comments/messages.js","components/userDetail/messages.js","components/mappingLevel.js","components/webglUnsupported.js","components/statsCard.js","api/projects.js","components/comments/hashtagPaste.js","components/comments/fileRejections.js","components/comments/uploadStatus.js","components/comments/editorIconConfig.js","components/comments/commentInput.js","components/teamsAndOrgs/teamsPlaceholder.js","components/teamsAndOrgs/teams.js","utils/osmchaLink.js","utils/slugifyFileName.js","hooks/UseUploadImage.js","components/statsTimestamp/messages.js","components/statsTimestamp/index.js","components/comments/status.js","utils/sorting.js","components/userDetail/barListChart.js","../../lib/sphericalmercator.ts","../../lib/index.ts","components/user/completeness.js","api/questionsAndComments.js","utils/getTaskContributors.js","api/teams.js","components/user/topBar.js","hooks/UseFirstTaskActionDate.js","hooks/UseGetContributors.js","utils/overpassLink.js","components/taskSelection/taskActivity.js","utils/tasksGeometry.js","utils/openEditor.js","components/projects/projectsMap.js","assets/img/mapMarker.png","components/userDetail/elementsMapped.js","components/menu.js","components/userDetail/userTeamsOrgs.js","api/organisations.js","assets/img/osm_logo.png","components/userDetail/headerProfile.js","assets/img/icons/osm-cha.png","assets/img/icons/hdyc-neis-one.png","assets/img/icons/slack.png","components/taskSelection/taskList.js","hooks/UseCloseOnDocumentClick.js","components/projects/projectCardPaginator.js","hooks/UseForceUpdate.js","../node_modules/react-calendar-heatmap/dist/react-calendar-heatmap.umd.js","../../../src/mutationObserver.ts","../../../src/useMutation.ts","components/userDetail/countriesMapped.js","components/userDetail/topProjects.js","components/userDetail/contributionTimeline.js","views/userDetail.js","hooks/UseTaskContributionAPI.js","components/contributions/myTasksOrderDropdown.js","components/contributions/myProjectsDropdown.js","components/contributions/myTasksNav.js","components/contributions/taskCard.js","components/contributions/taskResults.js","views/contributions.js"],"names":["Alert","_ref","type","compact","inline","iconClassName","children","Icon","info","InfoIcon","success","CheckIcon","warning","AlertIcon","error","BanIcon","_jsxs","className","concat","_jsx","EntityError","_ref2","entity","action","messageType","FormattedMessage","messages","values","defineMessages","unsavedChanges","id","defaultMessage","unsavedChangesToSplit","unsavedChangesToUnlock","unsavedChangesToReloadEditor","unsavedChangesTooltip","closeModal","deselectAndValidate","cantValidateMappedTask","priorityAreasLoadingError","noMappedTasksSelectedError","noMappedTasksSelectedErrorDescription","InvalidTaskStateError","InvalidTaskStateErrorDescription","UserNotAllowedError","UserNotAllowedErrorDescription","ProjectNotPublishedError","ProjectNotPublishedErrorDescription","TaskNotOwnedError","TaskNotOwnedErrorDescription","NotReadyForValidationError","NotReadyForValidationErrorDescription","CannotValidateMappedTaskError","CannotValidateMappedTaskErrorDescription","JOSMError","JOSMErrorDescription","lockError","lockErrorDescription","lockErrorLicense","lockErrorLicenseDescription","acceptLicense","cancel","anotherLockedTask","anotherProjectLockTextSingular","anotherProjectLockTextPlural","currentProjectLockTextSingular","currentProjectLockTextPlural","goToProject","workOnTasksSingular","workOnTasksPlural","legend","typesOfMapping","editor","selectEditor","filterPlaceholder","reloadEditor","openEditor","showSidebar","sessionAboutToExpireTitle","sessionAboutToExpireDescription","extendTime","sessionExtended","sessionExtensionError","sessionExpiredTitle","sessionExpiredDescription","relockTask","taskRelocked","taskRelockError","hideSidebar","timeToUnlock","task","tasks","taskId","instructions","projectIsArchived","enforcedRandomTaskSelection","changesetComment","contributions","registered","imagery","customTMSLayer","customWMSLayer","customWMTSLayer","customLayer","noImageryDefined","copyImageryURL","mapATask","mapSelectedTask","mapAnotherTask","validateATask","validateSelectedTask","validateAnotherTask","selectAnotherProject","resumeMapping","resumeValidation","taskLastUpdate","seeTaskHistory","zoomToTask","copyTaskLink","taskLinkCopied","taskStatus_PRIORITY_AREAS","taskStatus_READY","taskStatus_MAPPED","taskStatus_LOCKED","taskStatus_LOCKED_FOR_MAPPING","taskStatus_LOCKED_FOR_VALIDATION","taskStatus_VALIDATED","taskStatus_INVALIDATED","taskStatus_BADIMAGERY","taskStatus_SPLIT","sortById","sortByMostRecentlyUpdate","sortByLeastRecentlyUpdate","filterAll","filterReadyToValidate","filterReadyToMap","noTasksFound","readTaskComments","completion","history","taskHistoryComments","taskHistoryActivities","taskHistoryAll","copyComment","copyCommentToAll","copyCommentToINVALIDATED","copyCommentToVALIDATED","resources","finishMappingTitle","instructionsSelect","writeComment","instructionsComment","instructionsSubmit","comment","redirectToPreviousProject","commentPlaceholder","editStatus","revertVALIDATED","confirmRevertVALIDATED","revertBADIMAGERY","confirmRevertBADIMAGERY","proceed","yes","no","mappedQuestion","validatedQuestion","complete","incomplete","badImagery","splitTask","splitTaskError","splitTaskErrorDescription","splitTaskGenericError","selectAnotherTask","stopMappingError","stopValidation","stopValidationError","tasksMap","submitTask","submitTasks","submitTaskError","taskActivity","taskUnavailable","taskSplitDescription","taskData","projectId","overpassDownload","overpassVisualization","projectData","changesets","selectTask","entireProject","seeTaskChangesets","taskOnOSMCha","taskHistoryComment","taskDetailFetchError","noCommentsYet","noActivitiesToDisplay","taskHistoryLockedMapping","taskHistoryLockedValidation","taskHistoryAutoUnlockedMapping","taskHistoryAutoUnlockedValidation","taskHistoryExtendedForMapping","taskHistoryExtendedForValidation","taskHistoryBadImagery","taskHistoryMapped","taskHistoryValidated","taskHistoryInvalidated","taskHistorySplit","taskHistoryReady","map","mapped","validate","validated","total","lockedBy","taskExtraInfo","userFilterDefaultLabel","mappingLevelALL","mappingLevelADVANCED","mappingLevelINTERMEDIATE","mappingLevelBEGINNER","mappingLevelNEWUSER","statistics","mappedByUser","validatedByUser","allUserTasks","permissionErrorTitle","permissionError_userLevelToValidate","permissionError_userLevelToMap","permissionError_userIsNotValidationTeamMember","permissionError_userIsNotMappingTeamMember","useEditProjectAllowed","project","userDetails","useSelector","state","auth","organisations","pmTeams","isAllowed","setIsAllowed","useState","useEffect","role","author","username","includes","organisation","teams","filter","team","teamId","some","item","useEditTeamAllowed","organisation_id","members","managers","member","active","function","useEditOrgAllowed","org","organisationId","i","imageUploadFailed","imageUploadOnProgress","sendingMessage","messageSent","messageError","managersHashtagTip","authorHashtagTip","contributorsHashtagTip","nothingToPreview","leaveAComment","write","preview","attachImage","markdownSupported","loading","contributionTimelineTitle","projectsTitle","countries","timeSpentMapping","buildingsMapped","roadMapped","poiMapped","waterwaysMapped","userMapped","you","userValidated","invalidated","finished","topProjectsMappedTitle","noTopProjectsData","topCausesTitle","others","noProjectsData","editsTitle","noEditsData","topCountriesTitle","heatmapNoContribution","heatmapContribution","heatmapContributions","heatmapLegendMore","heatmapLegendLess","userOrganisationsError","MappingLevelMessage","props","level","otherProps","message","DifficultyMessage","WebglUnsupported","webglUnsupportedTitle","webglUnsupportedDescription","a","msg","target","rel","href","StatsCard","icon","description","value","invertColors","StatsCardContent","Number","FormattedNumber","Math","trunc","label","useProjectsQuery","fullProjectsQuery","token","locale","preferences","useQuery","queryKey","queryFn","signal","fetchProjects","paramsRemapped","remapParamsToAPI","backendToQueryConversion","undefined","lastUpdatedTo","format","subMonths","Date","now","api","get","params","then","res","data","keepPreviousData","useProjectQuery","useProjectSummaryQuery","otherOptions","arguments","length","_ref3","select","useProjectContributionsQuery","_ref4","userContributions","useActivitiesQuery","_ref5","refetchIntervalInBackground","refetchInterval","refetchOnWindowFocus","useErrorBoundary","useTasksQuery","_ref6","usePriorityAreasQuery","_ref7","fetchProjectPriorityArea","useProjectTimelineQuery","_ref8","fetchTimelineData","stats","useTaskDetail","shouldRefetch","_ref9","enabled","stopMapping","post","submitMappingTask","url","payload","submitValidationTask","difficulty","campaign","location","types","exactTypes","interests","text","page","orderBy","orderByType","createdByMe","managedByMe","favoritedByMe","mappedByMe","status","stale","createdFrom","basedOnMyInterests","HashtagPaste","setFn","hashtag","intl","useIntl","style","borderBottomStyle","onClick","title","formatMessage","replace","FileRejections","files","file","errors","path","e","code","DropzoneUploadStatus","uploadError","uploading","_Fragment","ICON_SIZE","iconConfig","bold","commands","width","height","viewBox","fill","d","italic","quote","link","unorderedListCommand","orderedListCommand","mention","name","keyCommand","buttonProps","stroke","strokeWidth","strokeLinecap","strokeLinejoin","cx","cy","r","execute","newSelectionRange","selectWord","selection","state1","setSelectionRange","state2","replaceSelection","selectedText","start","end","upload","x","y","document","getElementById","click","CommentInputField","setComment","contributors","enableHashtagPaste","isShowTabNavs","isShowFooter","enableContributorsHashtag","isShowUserPicture","placeholderMsg","markdownTextareaProps","textareaRef","useRef","isBundle","isShowPreview","setIsShowPreview","appendImgToComment","onDrop","useOnDrop","fileRejections","getRootProps","getInputProps","useDropzone","DROPZONE_SETTINGS","fileuploadError","fileuploading","uploadImg","useUploadImage","tribute","Tribute","trigger","async","query","cb","fetchLocalJSONAPI","usernames","lookup","fillAttr","selectTemplate","original","itemClass","requireLeadingSpace","noMatchTemplate","allowSpaces","searchOpts","skip","current","textarea","Array","isArray","attach","addEventListener","CurrentUserAvatar","val","MDEditor","ref","Object","keys","key","extraCommands","onChange","textareaProps","spellCheck","placeholder","defaultTabEnable","accept","event","minHeight","borderColor","wordWrap","dangerouslySetInnerHTML","htmlFromMarkdown","formatUserNamesToLink","nCardPlaceholders","N","_n","TextRow","color","RectShape","_","Fragment","RoundShape","TextBlock","rows","TeamsManagement","managementView","userTeamsOnly","setUserTeamsOnly","teamsStatus","setQuery","isOrgManager","Management","manage","myTeams","isAdmin","showAddButton","userOnly","setUserOnly","userOnlyLabel","TextField","searchQuery","searchTeams","onCloseIconClick","clearSearchQuery","ReactPlaceholder","showLoadingAnimation","customPlaceholder","delay","ready","errorLoadingTeams","TeamCard","noTeams","Teams","viewAllQuery","isReady","border","Link","to","AddButton","ViewAllLink","slice","noTeamsFound","src","logo","alt","UserAvatarList","size","textColor","users","user","maxLength","totalCount","managersCount","teamMembers","membersCount","VisibilityBox","visibility","extraClasses","JoinMethodBox","joinMethod","TeamInformation","labelClasses","fieldClasses","formState","useFormState","joinMethods","ANY","BY_REQUEST","BY_INVITE","Field","component","required","OrganisationSelectInput","method","RadioField","ReactTooltip","place","effect","public","private","TeamForm","Form","onSubmit","updateTeam","initialValues","mutators","setValue","render","handleSubmit","dirty","submitSucceeded","dirtySinceLastSubmit","form","submitting","dirtyForm","teamInfo","disabled","Button","restart","disabledClassName","save","TeamSideBar","requestedToJoin","isUserTeamManager","setSearchQuery","EditButton","editTeam","organisationSlug","noManagers","UserAvatar","picture","pictureUrl","colorClasses","noMembers","searchMembers","toLowerCase","waitingApproval","TeamsBoxList","mappingTeams","validationTeams","TeamBox","formatOSMChaLink","infoObj","baseURL","osmchaFilterId","encodeURIComponent","filterParams","aoiBBOX","buildFilter","join","created","split","JSON","stringify","buildFilterValue","getFilterId","startsWith","search","setUploading","setUploadError","useCallback","updateFn","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","Error","mime","filename","mimetype","lastIndexOf","slug","substr","slugifyFileName","pushToLocalJSONAPI","catch","err","acceptedFiles","forEach","generic","StatsTimestamp","lastUpdated","setLastUpdated","fetchExternalJSONAPI","OHSOME_STATS_BASE_URL","max_timestamp","console","formattedDate","formatDate","year","month","day","hour","minute","timeZone","MessageStatus","compareTaskId","b","properties","compareLastUpdate","actionDate","compareHistoryLastUpdate","compareByPropertyDescending","property","ProgressBar","percent","BarChartItem","percentValue","number","numberUnit","BarListChart","valueField","nameField","linkBase","linkField","p","n","D2R","PI","R2D","cache","SphericalMercator","constructor","antimeridian","this","expansion","c","Bc","Cc","zc","Ac","push","px","ll","zoom","isInteger","f","min","max","sin","round","log","pow","bc","cc","ac","g","atan","exp","center","dimensions","tileSize","lon","lat","merc","tl","br","bounds","minzoom","maxzoom","allowFloat","allowAntiMeridian","base","bl","tr","centerPixelX","centerPixelY","adjusted","ratios","floor","CompletenessProgressBar","completeness","toPrecision","maximumFractionDigits","calculateCompleteness","PROFILE_RELEVANT_FIELDS","k","ProfileCompleteness","completenessTitle","completenessLead0","completenessLead1","completenessLead2","useCommentsQuery","perPage","postProjectComment","postTaskComment","getTaskContributors","taskHistory","usernameToExclude","reduce","acc","actionBy","sort","useTeamsQuery","NextMappingLevel","nextLevelThreshold","nextLevel","changesetsCount","INTERMEDIATE_LEVEL_COUNT","ADVANCED_LEVEL_COUNT","UserTopBar","osmUserInfo","osm","mappingLevel","changesetCount","useFirstTaskActionDate","firstDate","setFirstDate","fistTaskAction","useGetContributors","formatOverpassLink","bbox","baseUrl","swneBbox","usersQuery","formatUserQuery","PostComment","setCommentPayload","mutation","useMutation","mutationFn","onSuccess","mutate","isLoading","TaskHistory","_groupBySession","historyOption","setHistoryOption","commentPayload","taskComments","t","taskChanges","shownHistory","option","checked","groupBySession","grouped","marginTop","getTaskActionMessage","actionText","RelativeTimeWithUnit","date","historyId","TaskDataDropdown","_history$taskHistory","osmchaLink","useMemo","Dropdown","options","display","TaskActivity","_project$projectInfo","close","updateActivities","userCanValidate","resetSuccess","setResetSuccess","queryClient","useQueryClient","uniqueContributors","setQueryData","CloseIcon","projectInfo","EditorDropdown","UndoLastTaskAction","resetFn","resetTask","arr","windowObjectReference","window","open","viewport","innerWidth","innerHeight","getIdUrl","ID_EDITOR_URL","sendJosmCommands","showConfirmation","setShowConfirmation","CustomButton","getSelectedTasksBBox","selectedTaskIds","selectedTasksGeom","featureCollection","features","selectedTasks","windowSize","getCentroidAndZoomFromSelectedTasks","closed","centroid","zoomLevel","POTLATCH2_EDITOR_URL","roundToDecimals","getFieldPapersUrl","customUrl","customEditor","formatImageryUrl","imageryURL","substring","indexOf","getTaskGpxUrl","URL","API_URL","getTaskXmlUrl","formatCustomUrl","extraIdParams","extraParams","formatExtraParams","idPresets","term","taskBbox","layerName","tmTaskLayerParams","new_layer","layer_name","layer_locked","download_policy","upload_policy","callJosmRemoteControl","formatJosmUrl","loadTasksBoundaries","minZoom","maxZoom","getImageryInfo","imageryParams","min_zoom","max_zoom","loadImageryonJosm","newLayer","loadAndZoomParams","left","bottom","right","top","changeset_comment","changeset_source","loadOsmDataToTasks","endpoint","urlParams","formatUrlParams","input","decimals","safariWindowReference","uri","safari","setTimeout","fetch","response","markerIcon","Image","mapboxgl","accessToken","MAPBOX_TOKEN","setRTLTextPlugin","MAPBOX_RTL_PLUGIN_URL","licensedFonts","mapboxLayerDefn","mapResults","clickOnProjectID","disablePoiClick","addImage","addSource","cluster","clusterRadius","addLayer","source","layout","paint","on","getCanvas","cursor","ProjectsMap","mapRef","React","createRef","setMapObj","projectIdSearch","useLayoutEffect","supported","Map","container","MAP_STYLE","attributionControl","addControl","AttributionControl","MapboxLanguage","defaultLanguage","remove","someResultsReady","mapReadyProjectsReady","isStyleLoaded","getSource","projectsReadyMapLoading","setData","TaskStats","userStats","tasksMapped","tasksValidatedByOthers","tasksInvalidatedByOthers","tasksValidated","tasksInvalidated","taskStats","MappedIcon","items","ValidatedIcon","stat","index","letterSpacing","shortEnglishHumanizer","humanizeDuration","humanizer","language","languages","shortEn","mo","w","h","m","s","ms","ElementsMapped","osmStats","duration","delimiter","units","spacer","iconClass","iconStyle","ClockIcon","HomeIcon","buildings","RoadIcon","roads","MarkerIcon","total_poi_count_add","WavesIcon","total_waterway_km_add","SectionMenu","useLocation","linkCombo","pathname","UserTeams","userId","omitMemberList","hasOwnProperty","UserOrganisations","orgs","manager_user_id","omitManagerList","useUserOrganisationsQuery","SocialMedia","getSocialIcon","field","TwitterIconNoBg","FacebookIcon","LinkedinIcon","createLink","urls","twitterId","facebookId","linkedinId","OSM_SERVER_URL","missingmaps","osmcha","hdycNeisOne","OsmLogo","osmChaUsername","slackId","slackUsername","ORG_CODE","MyContributionsNav","authUser","myStats","myProjects","myTasks","HeaderProfile","selfProfile","authDetails","setUser","ProfilePictureIcon","TaskStatus","lockHolder","isReadyOrLockedForMapping","dotSize","isLockedStatus","backgroundColor","TASK_COLOURS","LockIcon","paddingTop","lockStatus","TaskItem","setZoomedTaskId","selected","isCopied","setIsCopied","unit","selectUnit","closeOnDocumentClick","setCloseOnDocumentClick","handleMouseDown","querySelector","handleMouseUp","removeEventListener","useCloseOnDocumentClick","handleCopyToClipboard","navigator","clipboard","writeText","origin","taskStatus","FormattedRelativeTime","formattedTime","Popup","modal","nested","ListIcon","TaskActivityDetail","ZoomPlusIcon","InternalLinkIcon","TaskFilter","statusFilter","setStatusFn","TaskList","activeFilter","textSearch","setTextSearch","readyTasks","setTasks","sortBy","setSortingOption","useQueryParam","StringParam","setStatusFilter","orderedTasks","criteria","reverse","tasksSortOrder","getItem","newTasks","getTasksByStatus","usersTaskIds","taskIds","flat","sortingOptions","gap","flexGrow","setItem","PaginatedList","pageSize","ItemComponent","setActiveTaskData","filteredTasks","geometry","setPage","NumberParam","lastPage","howManyPages","latestItems","newPage","findIndex","ceil","PaginatorLine","activePage","setPageFn","ProjectCardPaginator","pagination","setQueryParam","apiIsFetched","maxPage","pages","useForceUpdate","forced","dispatch","create","module","exports","_classCallCheck","instance","Constructor","TypeError","_defineProperties","descriptor","enumerable","configurable","writable","defineProperty","_createClass","protoProps","staticProps","prototype","_defineProperty","obj","_extends","assign","call","apply","_inherits","subClass","superClass","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","Symbol","iterator","toString","_arr","_d","_e","_s","_i","next","done","createCommonjsModule","fn","ReactPropTypesSecret_1","emptyFunction","emptyFunctionWithReset","resetWarningCache","factoryWithThrowingShims","shim","propName","componentName","propFullName","secret","getShim","isRequired","ReactPropTypes","array","bool","func","object","string","symbol","any","arrayOf","element","elementType","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","propTypes","areInputsEqual","newInputs","lastInputs","memoizeOne","resultFn","isEqual","lastThis","lastResult","lastArgs","calledOnce","memoized","newArgs","MILLISECONDS_IN_ONE_DAY","DAYS_IN_WEEK","MONTH_LABELS","DAY_LABELS","shiftDate","numDays","newDate","setDate","getDate","getBeginningTimeForDate","getFullYear","getMonth","convertToDate","dateNDaysAgo","numDaysAgo","getRange","count","idx","SQUARE_SIZE","MONTH_LABEL_GUTTER_SIZE","CSS_PSEDUO_NAMESPACE","CalendarHeatmap","_React$Component","_getPrototypeOf2","_this","_len","args","_key","memo","getStartDateWithEmptyDays","classForValue","titleForValue","tooltipDataAttrs","getTooltipDataAttrsForValue","_this$props","startDate","warn","timeDiff","getEndDate","gutterSize","showMonthLabels","horizontal","showWeekdayLabels","getDateDifferenceInDays","endDate","getStartDate","getNumEmptyDaysAtStart","getDay","numDaysRoundedToWeek","getNumEmptyDaysAtEnd","getSquareSizeWithGutter","getWeekCount","getWeekdayLabelSize","getWeekWidth","getMonthLabelSize","valueCache","weekIndex","getWidth","getHeight","dayIndex","verticalOffset","onMouseOver","onMouseLeave","_this2","showOutOfRangeDays","_this$getSquareCoordi2","getSquareCoordinates","getValueForIndex","rect","createElement","getClassNameForIndex","handleClick","handleMouseOver","handleMouseLeave","getTooltipDataAttrsForIndex","getTitleForIndex","transformDayElement","_this3","transform","getTransformForWeek","renderSquare","_this4","renderWeek","_this5","endOfWeek","_this5$getMonthLabelC2","getMonthLabelCoordinates","monthLabels","_this6","weekdayLabels","weekdayLabel","_this6$getWeekdayLabe2","getWeekdayLabelCoordinates","cssClasses","getValueCache","getViewBox","getTransformForMonthLabels","renderMonthLabels","getTransformForAllWeeks","renderAllWeeks","getTransformForWeekdayLabels","renderWeekdayLabels","Component","defaultProps","factory","require","MutationObserver","Subscribable","client","super","setOptions","bindMethods","updateResult","bind","reset","prevOptions","defaultMutationOptions","shallowEqualObjects","getMutationCache","notify","currentMutation","observer","onUnsubscribe","hasListeners","removeObserver","onMutationUpdate","notifyOptions","listeners","onError","getCurrentResult","currentResult","variables","mutateOptions","build","addObserver","getDefaultState","isSuccess","isError","isIdle","notifyManager","batch","context","onSettled","listener","noop","UserCountriesMap","projects","navigate","useNavigate","setMap","mappedProjects","geojson","resize","CountriesMapped","countriesContributed","tasksNo","maxTaskNo","countriesPercent","TopProjects","compare","tasksPercent","HeatmapLegend","legendFontStyle","ContributionTimeline","today","countValues","contributionsByDay","maxValue","v","rate","getHeatmapClass","TopCauses","lazy","EditsByNumbers","UserDetail","_userOsmDetails$chang","withHeader","loggedInUsername","usernameParam","useParams","useSetTitleTag","currentUser","setOsmStats","userOsmDetails","setUserOsmDetails","errorDetails","loadingDetails","useFetch","errorStats","loadingStats","projectsError","projectsLoading","userProjects","titleClass","NotFound","Suspense","fallback","contributionsQueryAllSpecification","CommaArrayParam","minDate","maxDate","projectStatus","useTaskContributionQueryParams","useQueryParams","dataFetchReducer","defaultInitialData","hasNext","hasPrev","nextNum","prevNum","stringifyUQP","MyTasksOrderDropdown","allQueryParams","recentlyEdited","MyProjectsDropdown","_projects$mappedProje","Select","classNamePrefix","getOptionLabel","noOptionsMessage","noMatchingProjectId","onSortSelect","searchProject","find","isActiveButton","buttonName","contributionQuery","isActive","MyTasksNav","contributionsQuery","setContributionsQuery","notAnyFilter","clearFilters","all","archived","TaskCard","taskAnnotation","isUndoable","autoUnlockSeconds","lastUpdatedBy","numberOfComments","isHovered","setHovered","taskLink","timeToAutoUnlock","onMouseEnter","projectTask","lastUpdatedByUser","time","unlock","commentsNumber","CommentIcon","ResumeIcon","resumeTask","TaskResults","paginationCount","errorLoadingTasks","retryFn","retry","TaskCards","pageOfCards","noContributed","card","_createElement","ContributionsPage","userToken","forceUpdated","forceUpdate","initialData","ExternalQueryParamsState","throttledExternalQueryParamsState","useThrottle","user_id","useReducer","results","queryParamsState","didCancel","CancelToken","axios","remappedParams","headers","Authorization","cancelToken","zeroPayload","errorResPayload","request","errorReqPayload","fetchData","useTaskContributionAPI","from","projectAPIstate","ContributionsPageIndex","background","Outlet","UserStats"],"mappings":"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","file":"static/js/contributions.0e4f2917.chunk.js","sourcesContent":["import { FormattedMessage } from 'react-intl';\n\nimport { BanIcon, CheckIcon, InfoIcon, AlertIcon } from '../svgIcons';\nimport messages from '../../views/messages';\n\nexport const Alert = ({\n  type = 'info',\n  compact = false,\n  inline = false,\n  iconClassName,\n  children,\n}) => {\n  const icons = {\n    info: InfoIcon,\n    success: CheckIcon,\n    warning: AlertIcon,\n    error: BanIcon,\n  };\n  const Icon = icons[type];\n\n  const color = {\n    info: 'b--blue bg-lightest-blue',\n    success: 'b--dark-green bg-washed-green',\n    warning: 'b--gold bg-washed-yellow',\n    error: 'b--dark-red bg-washed-red',\n  };\n  const iconColor = {\n    info: 'blue',\n    success: 'dark-green',\n    warning: 'gold',\n    error: 'dark-red',\n  };\n\n  return (\n    <div\n      className={`${inline ? 'di' : 'db'} blue-dark bl bw2 br2 ${compact ? 'pa2' : 'pa3'} ${\n        color[type]\n      }`}\n    >\n      <Icon className={`h1 w1 v-top mr2 ${iconColor[type]} ${iconClassName || ''}`} />\n      {children}\n    </div>\n  );\n};\n\nexport function EntityError({ entity, action = 'creation' }) {\n  const messageType = action === 'updation' ? 'entityInfoUpdationFailure' : 'entityCreationFailure';\n\n  return (\n    <Alert type=\"error\">\n      <FormattedMessage\n        {...messages[messageType]}\n        values={{\n          entity: entity,\n        }}\n      />\n    </Alert>\n  );\n}\n","import { defineMessages } from 'react-intl';\n\n/**\n * Internationalized messages for use on task selection.\n */\nexport default defineMessages({\n  unsavedChanges: {\n    id: 'project.tasks.unsaved_map_changes.title',\n    defaultMessage: 'You have some unsaved map changes',\n  },\n  unsavedChangesToSplit: {\n    id: 'project.tasks.unsaved_map_changes.split',\n    defaultMessage: 'Save or undo it to be able to split the task',\n  },\n  unsavedChangesToUnlock: {\n    id: 'project.tasks.unsaved_map_changes.unlock',\n    defaultMessage: 'Save or undo it to be able to select another task',\n  },\n  unsavedChangesToReloadEditor: {\n    id: 'project.tasks.unsaved_map_changes.reload_editor',\n    defaultMessage: 'Save or undo it to be able to switch editors',\n  },\n  unsavedChangesTooltip: {\n    id: 'project.tasks.unsaved_map_changes.tooltip',\n    defaultMessage: 'You have unsaved edits. Save or undo them to submit this task.',\n  },\n  closeModal: {\n    id: 'project.tasks.unsaved_map_changes.actions.close_modal',\n    defaultMessage: 'Close',\n  },\n  deselectAndValidate: {\n    id: 'project.tasks.validation.cannot_validate_mapped_tasks.deselect_and_validate',\n    defaultMessage: 'Deselect and validate',\n  },\n  cantValidateMappedTask: {\n    id: 'project.tasks.select.cantValidateMappedTask',\n    defaultMessage: 'This task was mapped by you',\n  },\n  priorityAreasLoadingError: {\n    id: 'project.tasks.selection.map.priorityAreas.loading.error',\n    defaultMessage: 'An error occured while loading the priority areas for the project',\n  },\n  noMappedTasksSelectedError: {\n    id: 'project.tasks.no_mapped_tasks_selected',\n    defaultMessage: 'No mapped tasks selected',\n  },\n  noMappedTasksSelectedErrorDescription: {\n    id: 'project.tasks.no_mapped_tasks_selected.description',\n    defaultMessage:\n      'It was not possible to lock the selected tasks, as none of them are on the mapped status.',\n  },\n  InvalidTaskStateError: {\n    id: 'project.tasks.invalid_task_state_errortitle',\n    defaultMessage: 'Invalid Task State',\n  },\n  InvalidTaskStateErrorDescription: {\n    id: 'project.tasks.invalid_task_state_error.description',\n    defaultMessage: 'Task in invalid state for mapping',\n  },\n  UserNotAllowedError: {\n    id: 'project.tasks.user_not_allowed_error.title',\n    defaultMessage: 'User Not Allowed Error',\n  },\n  UserNotAllowedErrorDescription: {\n    id: 'project.tasks.user_not_allowed_error.description',\n    defaultMessage: 'Mapping not allowed because user not on allowed list',\n  },\n  ProjectNotPublishedError: {\n    id: 'project.tasks.project_not_published_error.title',\n    defaultMessage: 'Project Not Published',\n  },\n  ProjectNotPublishedErrorDescription: {\n    id: 'project.tasks.project_not_published_error.description',\n    defaultMessage: 'Mapping not allowed because project not published',\n  },\n  TaskNotOwnedError: {\n    id: 'project.tasks.task_not_owned_error.title',\n    defaultMessage: 'Task Not Owned',\n  },\n  TaskNotOwnedErrorDescription: {\n    id: 'project.tasks.task_not_owned_error.description',\n    defaultMessage: 'Attempting to unlock a task owned by another user',\n  },\n  NotReadyForValidationError: {\n    id: 'project.tasks.not_ready_for_validation_error.title',\n    defaultMessage: 'Not Ready for Validation',\n  },\n  NotReadyForValidationErrorDescription: {\n    id: 'project.tasks.not_ready_for_validation_error.description',\n    defaultMessage: 'Task is not MAPPED, BADIMAGERY or INVALIDATED',\n  },\n  CannotValidateMappedTaskError: {\n    id: 'project.tasks.cannot_validate_mapped_task_error.title',\n    defaultMessage: 'Cannot Validate Mapped Task',\n  },\n  CannotValidateMappedTaskErrorDescription: {\n    id: 'project.tasks.cannot_validate_mapped_task_error.description',\n    defaultMessage:\n      'Tasks cannot be validated by the same user who marked task as mapped or badimagery',\n  },\n  JOSMError: {\n    id: 'project.tasks.josm_error',\n    defaultMessage: 'Connection with JOSM failed',\n  },\n  JOSMErrorDescription: {\n    id: 'project.tasks.josm_error.description',\n    defaultMessage:\n      'Please verify if JOSM is running on your computer and the remote control is enabled.',\n  },\n  lockError: {\n    id: 'project.tasks.lock_error.generic',\n    defaultMessage: \"It wasn't possible to lock this task for you...\",\n  },\n  lockErrorDescription: {\n    id: 'project.tasks.lock_error.generic.description',\n    defaultMessage:\n      'Some error occurred when trying to lock this task. Check if your user matches the level, role and permissions required by this project.',\n  },\n  lockErrorLicense: {\n    id: 'project.tasks.lock_error.license.title',\n    defaultMessage: 'This project has a required license.',\n  },\n  lockErrorLicenseDescription: {\n    id: 'project.tasks.lock_error.license.description',\n    defaultMessage: 'Please accept this license in order to collaborate in this project. ',\n  },\n  acceptLicense: {\n    id: 'project.tasks.lock_error.license.accept',\n    defaultMessage: 'Accept',\n  },\n  cancel: {\n    id: 'project.tasks.lock_error.cancel',\n    defaultMessage: 'Cancel',\n  },\n  anotherLockedTask: {\n    id: 'project.tasks.lock_error.another_project',\n    defaultMessage: 'We found another mapping task already locked by you',\n  },\n  anotherProjectLockTextSingular: {\n    id: 'project.tasks.lock_error.another_project.description.singular',\n    defaultMessage:\n      'It is on the Project #{project}. You will need to update the status of that task before you can map another task.',\n  },\n  anotherProjectLockTextPlural: {\n    id: 'project.tasks.lock_error.another_project.description.plural',\n    defaultMessage:\n      'It is on the Project #{project}. You will need to update the status of that task before you can map another task.',\n  },\n  currentProjectLockTextSingular: {\n    id: 'project.tasks.lock_error.current_project.description.singular',\n    defaultMessage:\n      'The task #{taskId} was previously locked by you. You will need to update the status of that task before you can map another task.',\n  },\n  currentProjectLockTextPlural: {\n    id: 'project.tasks.lock_error.current_project.description.plural',\n    defaultMessage:\n      'Some tasks were previously locked by you on this project. You will need to update the status of those tasks before you can map another task.',\n  },\n  goToProject: {\n    id: 'project.tasks.lock_error.go_to_project.button',\n    defaultMessage: 'Go to Project #{project}',\n  },\n  workOnTasksSingular: {\n    id: 'project.tasks.lock_error.work_on_tasks.singular.button',\n    defaultMessage: '{mapOrValidate} that task',\n  },\n  workOnTasksPlural: {\n    id: 'project.tasks.lock_error.work_on_tasks.plural.button',\n    defaultMessage: '{mapOrValidate} those tasks',\n  },\n  legend: {\n    id: 'project.tasks.map.legend',\n    defaultMessage: 'Legend',\n  },\n  typesOfMapping: {\n    id: 'project.typesOfMapping',\n    defaultMessage: 'Types of Mapping',\n  },\n  editor: {\n    id: 'project.editor',\n    defaultMessage: 'Editor',\n  },\n  selectEditor: {\n    id: 'project.editor.select',\n    defaultMessage: 'Select editor',\n  },\n  filterPlaceholder: {\n    id: 'project.input.placeholders.filter',\n    defaultMessage: 'Filter tasks by id or username',\n  },\n  reloadEditor: {\n    id: 'project.editor.reload_editor',\n    defaultMessage: 'Reload editor',\n  },\n  openEditor: {\n    id: 'project.editor.open_editor',\n    defaultMessage: 'Open editor',\n  },\n  showSidebar: {\n    id: 'project.sidebar.show',\n    defaultMessage: 'Show sidebar',\n  },\n  sessionAboutToExpireTitle: {\n    id: 'project.sidebar.lockTimeAboutToExpire.title',\n    defaultMessage: 'Extend session for this task',\n  },\n  sessionAboutToExpireDescription: {\n    id: 'project.sidebar.lockTimeAboutToExpire.description',\n    defaultMessage:\n      'Your session of two hours is about to expire. Do you want to extend your time for this session to continue working on this task?',\n  },\n  extendTime: {\n    id: 'project.sidebar.extendTime',\n    defaultMessage: 'Extend session',\n  },\n  sessionExtended: {\n    id: 'project.sidebar.sessionExtended',\n    defaultMessage: 'Your session has been extended',\n  },\n  sessionExtensionError: {\n    id: 'project.sidebar.sessionExtensionError',\n    defaultMessage: 'An error occurred while extending your session.',\n  },\n  sessionExpiredTitle: {\n    id: 'project.sidebar.sessionExpired.title',\n    defaultMessage: 'Your session has expired',\n  },\n  sessionExpiredDescription: {\n    id: 'project.sidebar.sessionExpired.description',\n    defaultMessage:\n      'Do you want to relock the tasks to extend the session so that you can update the status of the {count, plural, =1 {task} other{tasks}}?',\n  },\n  relockTask: {\n    id: 'project.sidebar.relockTask',\n    defaultMessage: 'Relock {count, plural, =1 {task} other{tasks}}',\n  },\n  taskRelocked: {\n    id: 'project.sidebar.taskRelocked',\n    defaultMessage: 'Your {count, plural, =1 {task has} other{tasks have}} been relocked.',\n  },\n  taskRelockError: {\n    id: 'project.sidebar.taskRelockError',\n    defaultMessage:\n      'An error occurred while relocking your {count, plural, =1 {task} other{tasks}}.',\n  },\n  hideSidebar: {\n    id: 'project.sidebar.hide',\n    defaultMessage: 'Hide sidebar',\n  },\n  timeToUnlock: {\n    id: 'project.sidebar.timeToUnlock',\n    defaultMessage: 'Time available for you to complete work on this task',\n  },\n  task: {\n    id: 'project.task',\n    defaultMessage: 'Task',\n  },\n  tasks: {\n    id: 'project.tasks',\n    defaultMessage: 'Tasks',\n  },\n  taskId: {\n    id: 'project.taskId',\n    defaultMessage: 'Task #{id}',\n  },\n  instructions: {\n    id: 'project.instructions',\n    defaultMessage: 'Instructions',\n  },\n  projectIsArchived: {\n    id: 'project.isArchived',\n    defaultMessage:\n      'This project is archived and read-only. You can view the project, but you cannot update tasks.',\n  },\n  enforcedRandomTaskSelection: {\n    id: 'project.enforcedRandomTaskSelection',\n    defaultMessage:\n      \"This project has enforced random task selection for mapping. When you click the 'Map a task' button, a random task will be presented for mapping.\",\n  },\n  changesetComment: {\n    id: 'project.changesetComment',\n    defaultMessage: 'Changeset comment',\n  },\n  contributions: {\n    id: 'project.contributions',\n    defaultMessage: 'contributions',\n  },\n  registered: {\n    id: 'project.contributions.registered',\n    defaultMessage: 'Registered on',\n  },\n  imagery: {\n    id: 'project.imagery',\n    defaultMessage: 'Imagery',\n  },\n  customTMSLayer: {\n    id: 'project.imagery.tms',\n    defaultMessage: 'Custom TMS Layer',\n  },\n  customWMSLayer: {\n    id: 'project.imagery.wms',\n    defaultMessage: 'Custom WMS Layer',\n  },\n  customWMTSLayer: {\n    id: 'project.imagery.wmts',\n    defaultMessage: 'Custom WMTS Layer',\n  },\n  customLayer: {\n    id: 'project.imagery.customLayer',\n    defaultMessage: 'Custom Layer',\n  },\n  noImageryDefined: {\n    id: 'project.imagery.noDefined',\n    defaultMessage: 'Any available source',\n  },\n  copyImageryURL: {\n    id: 'project.imagery.copy',\n    defaultMessage: 'Copy imagery URL',\n  },\n  mapATask: {\n    id: 'project.selectTask.footer.button.mapRandomTask',\n    defaultMessage: 'Map a task',\n  },\n  mapSelectedTask: {\n    id: 'project.selectTask.footer.button.mapSelectedTask',\n    defaultMessage: 'Map selected task',\n  },\n  mapAnotherTask: {\n    id: 'project.selectTask.footer.button.mapAnotherTask',\n    defaultMessage: 'Map another task',\n  },\n  validateATask: {\n    id: 'project.selectTask.footer.button.validateRandomTask',\n    defaultMessage: 'Validate a task',\n  },\n  validateSelectedTask: {\n    id: 'project.selectTask.footer.button.validateSelectedTask',\n    defaultMessage:\n      '{number, plural, one {Validate selected task} other {Validate # selected tasks}}',\n  },\n  validateAnotherTask: {\n    id: 'project.selectTask.footer.button.validateAnotherTask',\n    defaultMessage: 'Validate another task',\n  },\n  selectAnotherProject: {\n    id: 'project.selectTask.footer.button.selectAnotherProject',\n    defaultMessage: 'Select another project',\n  },\n  resumeMapping: {\n    id: 'project.selectTask.footer.button.resumeMapping',\n    defaultMessage: 'Resume mapping',\n  },\n  resumeValidation: {\n    id: 'project.selectTask.footer.button.resumeValidation',\n    defaultMessage: 'Resume validation',\n  },\n  taskLastUpdate: {\n    id: 'project.tasks.list.lastUpdate',\n    defaultMessage: 'Last updated by {user}',\n  },\n  seeTaskHistory: {\n    id: 'project.tasks.list.details',\n    defaultMessage: 'See task history',\n  },\n  zoomToTask: {\n    id: 'project.tasks.list.zoom',\n    defaultMessage: 'Zoom map to task',\n  },\n  copyTaskLink: {\n    id: 'project.tasks.list.copyLink',\n    defaultMessage: 'Copy task link',\n  },\n  taskLinkCopied: {\n    id: 'project.tasks.list.linkCopied',\n    defaultMessage: 'Task link copied to the clipboard',\n  },\n  taskStatus_PRIORITY_AREAS: {\n    id: 'project.tasks.priority_areas',\n    defaultMessage: 'Priority areas',\n  },\n  taskStatus_READY: {\n    id: 'project.tasks.status.ready',\n    defaultMessage: 'Available for mapping',\n  },\n  taskStatus_MAPPED: {\n    id: 'project.tasks.status.mapped',\n    defaultMessage: 'Ready for validation',\n  },\n  taskStatus_LOCKED: {\n    id: 'project.tasks.status.locked',\n    defaultMessage: 'Locked',\n  },\n  taskStatus_LOCKED_FOR_MAPPING: {\n    id: 'project.tasks.status.lockedForMapping',\n    defaultMessage: 'Locked for mapping',\n  },\n  taskStatus_LOCKED_FOR_VALIDATION: {\n    id: 'project.tasks.status.lockedForValidation',\n    defaultMessage: 'Locked for validation',\n  },\n  taskStatus_VALIDATED: {\n    id: 'project.tasks.status.validated',\n    defaultMessage: 'Finished',\n  },\n  taskStatus_INVALIDATED: {\n    id: 'project.tasks.status.invalidated',\n    defaultMessage: 'More mapping needed',\n  },\n  taskStatus_BADIMAGERY: {\n    id: 'project.tasks.status.badImagery',\n    defaultMessage: 'Unavailable',\n  },\n  taskStatus_SPLIT: {\n    id: 'project.tasks.status.split',\n    defaultMessage: 'Split',\n  },\n  sortById: {\n    id: 'project.tasks.sorting.id',\n    defaultMessage: 'Sort by task number',\n  },\n  sortByMostRecentlyUpdate: {\n    id: 'project.tasks.sorting.date',\n    defaultMessage: 'Most recently updated',\n  },\n  sortByLeastRecentlyUpdate: {\n    id: 'project.tasks.sorting.date.reverse',\n    defaultMessage: 'Least recently updated',\n  },\n  filterAll: {\n    id: 'project.tasks.filter.all',\n    defaultMessage: 'All',\n  },\n  filterReadyToValidate: {\n    id: 'project.tasks.filter.readyToValidate',\n    defaultMessage: 'Ready for validation',\n  },\n  filterReadyToMap: {\n    id: 'project.tasks.filter.readyToMap',\n    defaultMessage: 'Available for mapping',\n  },\n  noTasksFound: {\n    id: 'project.tasks.filter.noTasksFound',\n    defaultMessage: 'No tasks were found.',\n  },\n  readTaskComments: {\n    id: 'project.tasks.readComments',\n    defaultMessage: 'Please check the history tab for relevant comments.',\n  },\n  completion: {\n    id: 'project.tasks.action.completion',\n    defaultMessage: 'Completion',\n  },\n  history: {\n    id: 'project.tasks.action.history',\n    defaultMessage: 'History',\n  },\n  taskHistoryComments: {\n    id: 'project.tasks.history.comments',\n    defaultMessage: 'Comments',\n  },\n  taskHistoryActivities: {\n    id: 'project.tasks.history.activities',\n    defaultMessage: 'Activities',\n  },\n  taskHistoryAll: {\n    id: 'project.tasks.history.all',\n    defaultMessage: 'All',\n  },\n  copyComment: {\n    id: 'project.tasks.action.comments.copy',\n    defaultMessage: 'Copy comment',\n  },\n  copyCommentToAll: {\n    id: 'project.tasks.action.comments.copy_to_all',\n    defaultMessage: 'To all tasks',\n  },\n  copyCommentToINVALIDATED: {\n    id: 'project.tasks.action.comments.copy_to_invalidated',\n    defaultMessage: 'To tasks marked as \"No\"',\n  },\n  copyCommentToVALIDATED: {\n    id: 'project.tasks.action.comments.copy_to_validated',\n    defaultMessage: 'To tasks marked as \"Yes\"',\n  },\n  resources: {\n    id: 'project.tasks.action.resources',\n    defaultMessage: 'Resources',\n  },\n  finishMappingTitle: {\n    id: 'project.tasks.action.finish_mapping.title',\n    defaultMessage: 'Once you have finished mapping',\n  },\n  instructionsSelect: {\n    id: 'project.tasks.action.instructions.select_task',\n    defaultMessage: 'Select one of the options below that matches your edit status',\n  },\n  writeComment: {\n    id: 'project.input.placeholder.write_comment',\n    defaultMessage: 'Write a comment',\n  },\n  instructionsComment: {\n    id: 'project.tasks.action.instructions.leave_comment',\n    defaultMessage: 'Leave a comment (optional)',\n  },\n  instructionsSubmit: {\n    id: 'project.tasks.action.instructions.submit_task',\n    defaultMessage: 'Submit your work',\n  },\n  comment: {\n    id: 'project.tasks.action.comment.title',\n    defaultMessage: 'Comment',\n  },\n  redirectToPreviousProject: {\n    id: 'project.tasks.action.redirectToPreviousProject',\n    defaultMessage: 'Redirect to previous project #{projectId}',\n  },\n  commentPlaceholder: {\n    id: 'project.tasks.action.comment.input.placeholder',\n    defaultMessage: 'Write a comment on this task',\n  },\n  editStatus: {\n    id: 'project.tasks.action.selection.title',\n    defaultMessage: 'Task status',\n  },\n  revertVALIDATED: {\n    id: 'project.tasks.action.invalidate',\n    defaultMessage: 'Request revalidation',\n  },\n  confirmRevertVALIDATED: {\n    id: 'project.tasks.action.invalidate.confirmation',\n    defaultMessage: 'Task status will be changed to \"Ready for validation\".',\n  },\n  revertBADIMAGERY: {\n    id: 'project.tasks.action.set_as_ready',\n    defaultMessage: 'Request mapping',\n  },\n  confirmRevertBADIMAGERY: {\n    id: 'project.tasks.action.set_as_ready.confirmation',\n    defaultMessage: 'Task status will be changed to \"Available for mapping\".',\n  },\n  proceed: {\n    id: 'project.tasks.action.proceed.confirmation',\n    defaultMessage: 'Do want to proceed?',\n  },\n  yes: {\n    id: 'project.tasks.action.confirmation.yes',\n    defaultMessage: 'Yes',\n  },\n  no: {\n    id: 'project.tasks.action.confirmation.no',\n    defaultMessage: 'No',\n  },\n  mappedQuestion: {\n    id: 'project.tasks.action.options.mapped_question',\n    defaultMessage: 'Is this task completely mapped?',\n  },\n  validatedQuestion: {\n    id: 'project.tasks.action.options.validated_question',\n    defaultMessage:\n      '{number, plural, one {Is this task well mapped?} other {Are these tasks well mapped?}}',\n  },\n  complete: {\n    id: 'project.tasks.action.options.complete',\n    defaultMessage: 'Yes',\n  },\n  incomplete: {\n    id: 'project.tasks.action.options.incomplete',\n    defaultMessage: 'No',\n  },\n  badImagery: {\n    id: 'project.tasks.action.options.bad_imagery',\n    defaultMessage: 'The imagery is bad',\n  },\n  splitTask: {\n    id: 'project.tasks.action.split_task',\n    defaultMessage: 'Split task',\n  },\n  splitTaskError: {\n    id: 'project.tasks.action.split_task.error',\n    defaultMessage: 'It was not possible to split the task',\n  },\n  splitTaskErrorDescription: {\n    id: 'project.tasks.action.split_task.error.description',\n    defaultMessage: 'This task is already too small and can not be split.',\n  },\n  splitTaskGenericError: {\n    id: 'project.tasks.action.split_task.error.generic',\n    defaultMessage: 'An error occured while splitting the task.',\n  },\n  selectAnotherTask: {\n    id: 'project.tasks.action.select_another_task',\n    defaultMessage: 'Select another task',\n  },\n  stopMappingError: {\n    id: 'project.tasks.action.stop_mapping.error',\n    defaultMessage: 'An error occured while stopping mapping.',\n  },\n  stopValidation: {\n    id: 'project.tasks.action.stop_validation',\n    defaultMessage: 'Stop validation',\n  },\n  stopValidationError: {\n    id: 'project.tasks.action.stop_validation.error',\n    defaultMessage: 'An error occured while stopping validation.',\n  },\n  tasksMap: {\n    id: 'project.tasks.action.tasks_map',\n    defaultMessage: 'Tasks map',\n  },\n  submitTask: {\n    id: 'project.tasks.action.submit_task',\n    defaultMessage: 'Submit task',\n  },\n  submitTasks: {\n    id: 'project.tasks.action.submit_tasks',\n    defaultMessage: 'Submit tasks',\n  },\n  submitTaskError: {\n    id: 'project.tasks.action.submit_task.error',\n    defaultMessage:\n      'An error occured while submitting your {numTasks, plural, =1 {task} other {tasks}}.',\n  },\n  taskActivity: {\n    id: 'project.tasks.history.title',\n    defaultMessage: 'Task {n}',\n  },\n  taskUnavailable: {\n    id: 'project.tasks.history.unavailable',\n    defaultMessage: 'Task unavailable',\n  },\n  taskSplitDescription: {\n    id: 'project.tasks.history.split.description',\n    defaultMessage: 'The task {id} was split and its history is not available anymore',\n  },\n  taskData: {\n    id: 'project.tasks.activity.data.links',\n    defaultMessage: 'Task data',\n  },\n  projectId: {\n    id: 'project.tasks.activity.project_id',\n    defaultMessage: 'Project #{id}',\n  },\n  overpassDownload: {\n    id: 'project.tasks.activity.overpass.download',\n    defaultMessage: 'Download from Overpass',\n  },\n  overpassVisualization: {\n    id: 'project.tasks.activity.overpass.visualization',\n    defaultMessage: 'Visualize with Overpass',\n  },\n  projectData: {\n    id: 'project.resources.data',\n    defaultMessage: \"Project's data\",\n  },\n  changesets: {\n    id: 'project.resources.changesets',\n    defaultMessage: 'Changesets',\n  },\n  selectTask: {\n    id: 'project.resources.changesets.select_task',\n    defaultMessage: 'Select task',\n  },\n  entireProject: {\n    id: 'project.resources.changesets.entire_project',\n    defaultMessage: 'Entire project',\n  },\n  seeTaskChangesets: {\n    id: 'project.resources.changesets.task',\n    defaultMessage: \"See task's changesets\",\n  },\n  taskOnOSMCha: {\n    id: 'project.tasks.activity.osmcha',\n    defaultMessage: 'View changesets in OSMCha',\n  },\n  taskHistoryComment: {\n    id: 'project.tasks.history.comment',\n    defaultMessage: 'commented',\n  },\n  taskDetailFetchError: {\n    id: 'project.tasks.history.taskDetailFetchError',\n    defaultMessage: 'An error occured while fetching the task details.',\n  },\n  noCommentsYet: {\n    id: 'project.tasks.history.noCommentsYet',\n    defaultMessage: 'No comments have been made on the task yet.',\n  },\n  noActivitiesToDisplay: {\n    id: 'project.tasks.history.nothingToDisplay',\n    defaultMessage: 'No comments/activities have been made on this task yet.',\n  },\n  taskHistoryLockedMapping: {\n    id: 'project.tasks.history.lockedmapping',\n    defaultMessage: 'locked for mapping',\n  },\n  taskHistoryLockedValidation: {\n    id: 'project.tasks.history.lockedvalidation',\n    defaultMessage: 'locked for validation',\n  },\n  taskHistoryAutoUnlockedMapping: {\n    id: 'project.tasks.history.autounlockedmapping',\n    defaultMessage: 'automatically unlocked for mapping',\n  },\n  taskHistoryAutoUnlockedValidation: {\n    id: 'project.tasks.history.autounlockedvalidation',\n    defaultMessage: 'automatically unlocked for validation',\n  },\n  taskHistoryExtendedForMapping: {\n    id: 'project.tasks.history.extendedForMapping',\n    defaultMessage: 'extended the lock session for mapping',\n  },\n  taskHistoryExtendedForValidation: {\n    id: 'project.tasks.history.extendedForValidation',\n    defaultMessage: 'extended the lock session for validation',\n  },\n  taskHistoryBadImagery: {\n    id: 'project.tasks.history.badimagery',\n    defaultMessage: 'marked as unavailable',\n  },\n  taskHistoryMapped: {\n    id: 'project.tasks.history.mapped',\n    defaultMessage: 'marked as mapped',\n  },\n  taskHistoryValidated: {\n    id: 'project.tasks.history.validated',\n    defaultMessage: 'marked as validated',\n  },\n  taskHistoryInvalidated: {\n    id: 'project.tasks.history.invalidated',\n    defaultMessage: 'marked as more mapping needed',\n  },\n  taskHistorySplit: {\n    id: 'project.tasks.history.split',\n    defaultMessage: 'split a task',\n  },\n  taskHistoryReady: {\n    id: 'project.tasks.history.ready',\n    defaultMessage: 'marked as ready for mapping',\n  },\n  map: {\n    id: 'project.tasks.action.map',\n    defaultMessage: 'Map',\n  },\n  mapped: {\n    id: 'project.tasks.action.mapped',\n    defaultMessage: 'Mapped',\n  },\n  validate: {\n    id: 'project.tasks.action.validate',\n    defaultMessage: 'Validate',\n  },\n  validated: {\n    id: 'project.tasks.action.validated',\n    defaultMessage: 'Validated',\n  },\n  total: {\n    id: 'project.tasks.number.total',\n    defaultMessage: 'Total',\n  },\n  lockedBy: {\n    id: 'project.tasks.locked_by_user',\n    defaultMessage: '{lockStatus} by {user}',\n  },\n  taskExtraInfo: {\n    id: 'project.tasks.extra_information.title',\n    defaultMessage: 'Specific task information',\n  },\n  userFilterDefaultLabel: {\n    id: 'project.users.all',\n    defaultMessage: 'All users',\n  },\n  mappingLevelALL: {\n    id: 'project.level.all',\n    defaultMessage: 'All levels',\n  },\n  mappingLevelADVANCED: {\n    id: 'project.level.advanced',\n    defaultMessage: 'Advanced',\n  },\n  mappingLevelINTERMEDIATE: {\n    id: 'project.level.intermediate',\n    defaultMessage: 'Intermediate',\n  },\n  mappingLevelBEGINNER: {\n    id: 'project.level.beginner',\n    defaultMessage: 'Beginner',\n  },\n  mappingLevelNEWUSER: {\n    id: 'project.level.new_users',\n    defaultMessage: 'New users',\n  },\n  statistics: {\n    id: 'project.contributions.stats',\n    defaultMessage: 'Statistics',\n  },\n  mappedByUser: {\n    id: 'project.contributions.user.select.mapped',\n    defaultMessage: 'Select tasks mapped by {username}',\n  },\n  validatedByUser: {\n    id: 'project.contributions.user.select.validated',\n    defaultMessage: 'Select tasks validated by {username}',\n  },\n  allUserTasks: {\n    id: 'project.contributions.user.select.all',\n    defaultMessage: 'Select all tasks mapped or validated by {username}',\n  },\n  permissionErrorTitle: {\n    id: 'project.permissions.error.title',\n    defaultMessage: 'You are not ready to work on this project...',\n  },\n  permissionError_userLevelToValidate: {\n    id: 'project.permissions.error.userLevelToValidate',\n    defaultMessage:\n      'Only users with intermediate or advanced experience level can validate this project.',\n  },\n  permissionError_userLevelToMap: {\n    id: 'project.permissions.error.userLevelToMap',\n    defaultMessage:\n      'Only users with intermediate or advanced experience level can map this project.',\n  },\n  permissionError_userIsNotValidationTeamMember: {\n    id: 'project.permissions.error.userIsNotValidationTeamMember',\n    defaultMessage:\n      'You need to be member of one of the validation teams to be able to validate this project.',\n  },\n  permissionError_userIsNotMappingTeamMember: {\n    id: 'project.permissions.error.userIsNotMappingTeamMember',\n    defaultMessage:\n      'You need to be member of one of the mapping teams to be able to map this project.',\n  },\n});\n","import { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nexport function useEditProjectAllowed(project) {\n  const userDetails = useSelector((state) => state.auth.userDetails);\n  const organisations = useSelector((state) => state.auth.organisations);\n  const pmTeams = useSelector((state) => state.auth.pmTeams);\n  const [isAllowed, setIsAllowed] = useState(false);\n\n  useEffect(() => {\n    // admin users can edit any project\n    if (userDetails.role === 'ADMIN') setIsAllowed(true);\n    // owners can edit their projects\n    // project and project.author check are needed to avoid `null === null` case while data is loading\n    if (project && project.author && userDetails.username === project.author) setIsAllowed(true);\n    // managers of the organisation related to the project can edit it\n    if (organisations && organisations.includes(project.organisation)) setIsAllowed(true);\n    // users that are member of a PROJECT_MANAGER team associated with the project can edit it\n    const teams = project.teams\n      ? project.teams.filter((team) => team.role === 'PROJECT_MANAGER').map((team) => team.teamId)\n      : [];\n    if (pmTeams && pmTeams.some((item) => teams.includes(item))) {\n      setIsAllowed(true);\n    }\n  }, [pmTeams, userDetails.role, userDetails.username, organisations, project]);\n  return [isAllowed];\n}\n\nexport function useEditTeamAllowed(team) {\n  const userDetails = useSelector((state) => state.auth.userDetails);\n  const organisations = useSelector((state) => state.auth.organisations);\n  const pmTeams = useSelector((state) => state.auth.pmTeams);\n  const [isAllowed, setIsAllowed] = useState(false);\n\n  useEffect(() => {\n    // admin users can edit any team\n    if (userDetails.role === 'ADMIN') setIsAllowed(true);\n    // managers of the organisation related to the team can edit it\n    if (organisations && organisations.includes(team.organisation_id)) setIsAllowed(true);\n    // team managers can edit it\n    // verify from the redux store\n    if (pmTeams && pmTeams.includes(team.teamId)) setIsAllowed(true);\n    // and verify based on the team members list\n    if (team.members) {\n      const managers = team.members\n        .filter((member) => member.active && member.function === 'MANAGER')\n        .map((member) => member.username);\n      if (userDetails.username && managers.includes(userDetails.username)) {\n        setIsAllowed(true);\n      }\n    }\n  }, [pmTeams, userDetails.role, userDetails.username, organisations, team]);\n  return [isAllowed];\n}\n\nexport function useEditOrgAllowed(org) {\n  const userDetails = useSelector((state) => state.auth.userDetails);\n  const organisations = useSelector((state) => state.auth.organisations);\n  const [isAllowed, setIsAllowed] = useState(false);\n\n  useEffect(() => {\n    // admin users can edit any organisation\n    if (userDetails.role === 'ADMIN') setIsAllowed(true);\n    // check if user is a organisation manager\n    // based on the redux store data\n    if (org && org.organisationId && organisations && organisations.includes(org.organisationId)) {\n      setIsAllowed(true);\n    }\n    // and based on the organisation data\n    if (org && org.managers && org.managers.map((i) => i.username).includes(userDetails.username)) {\n      setIsAllowed(true);\n    }\n  }, [org, organisations, userDetails.username, userDetails.role]);\n  return [isAllowed];\n}\n","import { defineMessages } from 'react-intl';\n\n/**\n * Internationalized messages for use on comment input field.\n */\nexport default defineMessages({\n  imageUploadFailed: {\n    id: 'comment.input.imageUpload.error',\n    defaultMessage: 'The image upload failed.',\n  },\n  imageUploadOnProgress: {\n    id: 'comment.input.imageUpload.progress',\n    defaultMessage: 'Uploading file...',\n  },\n  sendingMessage: {\n    id: 'comment.input.sending.progress',\n    defaultMessage: 'Sending message...',\n  },\n  messageSent: {\n    id: 'comment.input.sending.success',\n    defaultMessage: 'Message sent.',\n  },\n  messageError: {\n    id: 'comment.input.sending.error',\n    defaultMessage: 'An error occurred while sending message.',\n  },\n  managersHashtagTip: {\n    id: 'comment.hashtags.help.managers',\n    defaultMessage: 'Add \"{hashtag}\" to notify the project managers about your comment.',\n  },\n  authorHashtagTip: {\n    id: 'comment.hashtags.help.author',\n    defaultMessage: 'Add \"{hashtag}\" to notify the project author about your comment.',\n  },\n  contributorsHashtagTip: {\n    id: 'comment.hashtags.help.contributors',\n    defaultMessage: 'Add \"{hashtag}\" to notify the task contributors about your comment.',\n  },\n  nothingToPreview: {\n    id: 'comment.preview.nothingToPreview',\n    defaultMessage: 'Nothing to preview',\n  },\n  leaveAComment: {\n    id: 'comment.preview.leaveAComment',\n    defaultMessage: 'Leave a comment...',\n  },\n  write: {\n    id: 'textarea.write',\n    defaultMessage: 'Write',\n  },\n  preview: {\n    id: 'textarea.preview',\n    defaultMessage: 'Preview',\n  },\n  attachImage: {\n    id: 'comment.write.attachImage',\n    defaultMessage: 'Attach image by dragging and dropping',\n  },\n  markdownSupported: {\n    id: 'comment.write.markdownSupported',\n    defaultMessage: 'Markdown supported',\n  },\n});\n","import { defineMessages } from 'react-intl';\n\n/**\n * Internationalized messages for use on user components.\n */\nexport default defineMessages({\n  loading: {\n    id: 'users.detail.loading',\n    defaultMessage: 'loading',\n  },\n  contributionTimelineTitle: {\n    id: 'users.detail.contributionTimelineTitle',\n    defaultMessage: 'Contribution Timeline',\n  },\n  projectsTitle: {\n    id: 'users.detail.projectsTitle',\n    defaultMessage: 'Projects',\n  },\n  countries: {\n    id: 'users.detail.countries',\n    defaultMessage: 'Countries',\n  },\n  timeSpentMapping: {\n    id: 'users.detail.timeSpentMapping',\n    defaultMessage: 'Time spent mapping',\n  },\n  buildingsMapped: {\n    id: 'users.detail.buildingsMapped',\n    defaultMessage: 'Buildings mapped',\n  },\n  roadMapped: {\n    id: 'users.detail.roadMapped',\n    defaultMessage: 'Km road mapped',\n  },\n  poiMapped: {\n    id: 'users.detail.poiMapped',\n    defaultMessage: 'Points of interests mapped',\n  },\n  waterwaysMapped: {\n    id: 'users.detail.waterwaysMapped',\n    defaultMessage: 'Km waterways mapped',\n  },\n  userMapped: {\n    id: 'users.detail.tasksMapped',\n    defaultMessage: '{user} mapped',\n  },\n  you: {\n    id: 'users.detail.you',\n    defaultMessage: 'You',\n  },\n  userValidated: {\n    id: 'users.detail.tasksValidated',\n    defaultMessage: '{user} validated',\n  },\n  invalidated: {\n    id: 'users.detail.invalidated',\n    defaultMessage: 'Needed more mapping',\n  },\n  validated: {\n    id: 'users.detail.validated',\n    defaultMessage: 'Validated',\n  },\n  finished: {\n    id: 'users.detail.finished',\n    defaultMessage: 'Finished',\n  },\n  topProjectsMappedTitle: {\n    id: 'users.detail.topProjectsMappedTitle',\n    defaultMessage: 'Top 5 projects contributed',\n  },\n  noTopProjectsData: {\n    id: 'users.detail.topProjectsMapped.error',\n    defaultMessage: 'No projects mapped until now.',\n  },\n  topCausesTitle: {\n    id: 'users.detail.topCausesTitle',\n    defaultMessage: 'Top causes contributed to',\n  },\n  others: {\n    id: 'users.detail.others',\n    defaultMessage: 'Others',\n  },\n  noProjectsData: {\n    id: 'users.detail.projects.noData',\n    defaultMessage: 'Information is not available because no projects were mapped until now.',\n  },\n  editsTitle: {\n    id: 'users.detail.editsTitle',\n    defaultMessage: 'Edits by numbers',\n  },\n  noEditsData: {\n    id: 'users.detail.edits.error',\n    defaultMessage:\n      'No data to show yet. OpenStreetMap edits stats are updated with a delay of one hour.',\n  },\n  topCountriesTitle: {\n    id: 'users.detail.topCountriesTitle',\n    defaultMessage: 'Top 5 countries most mapped',\n  },\n  tasks: {\n    id: 'users.detail.tasks',\n    defaultMessage: 'tasks',\n  },\n  heatmapNoContribution: {\n    id: 'users.detail.heatmapNoContribution',\n    defaultMessage: 'No contribution',\n  },\n  heatmapContribution: {\n    id: 'users.detail.heatmapContribution',\n    defaultMessage: 'contribution',\n  },\n  heatmapContributions: {\n    id: 'users.detail.heatmapContributions',\n    defaultMessage: 'contributions',\n  },\n  heatmapLegendMore: {\n    id: 'users.detail.heatmapLegendMore',\n    defaultMessage: 'more',\n  },\n  heatmapLegendLess: {\n    id: 'users.detail.heatmapLegendLess',\n    defaultMessage: 'less',\n  },\n  teams: {\n    id: 'users.detail.teams',\n    defaultMessage: 'Teams',\n  },\n  userOrganisationsError: {\n    id: 'users.header.organisations.error',\n    defaultMessage: \"Couldn't load organisations at this time\",\n  },\n});\n","import React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\n\nexport const MappingLevelMessage = (props) => {\n  const { level, ...otherProps } = props;\n  const message = ['ALL', 'BEGINNER', 'INTERMEDIATE', 'ADVANCED'].includes(level) ? (\n    <FormattedMessage {...messages[`mappingLevel${level}`]} />\n  ) : (\n    level\n  );\n  return <span {...otherProps}>{message}</span>;\n};\n\nexport const DifficultyMessage = (props) => {\n  const { level, ...otherProps } = props;\n  const message = ['ALL', 'EASY', 'MODERATE', 'CHALLENGING'].includes(level) ? (\n    <FormattedMessage {...messages[`difficulty${level}`]} />\n  ) : (\n    level\n  );\n  return <span {...otherProps}>{message}</span>;\n};\n","import React from 'react';\nimport { Alert } from './alert';\nimport { FormattedMessage } from 'react-intl';\nimport messages from './messages';\n\nexport default function WebglUnsupported({ className }) {\n  return (\n    <div className={className}>\n      <Alert type=\"warning\" iconClassName=\"h2 w2\">\n        <h3 className=\"barlow-condensed f3 fw6 mv0 dib\">\n          <FormattedMessage {...messages.webglUnsupportedTitle} />\n        </h3>\n        <div className=\"mv4 lh-title\">\n          <FormattedMessage\n            {...messages.webglUnsupportedDescription}\n            values={{\n              a: (msg) => (\n                <a target=\"_blank\" rel=\"noreferrer\" href=\"https://get.webgl.org/\">\n                  {msg}\n                </a>\n              ),\n            }}\n          />\n        </div>\n      </Alert>\n    </div>\n  );\n}\n","import React from 'react';\nimport { FormattedNumber } from 'react-intl';\n\nexport const StatsCard = ({ icon, description, value, className, invertColors = false }) => {\n  return (\n    <div\n      className={`cf pt3 pb3 ph3 br1 ${\n        invertColors ? 'bg-red white' : 'bg-white red shadow-6'\n      } flex items-center ${className || ''}`}\n    >\n      <div className=\"w-30 fl ml2\">{icon}</div>\n      <StatsCardContent\n        value={Number(value) || value === 0 ? <FormattedNumber value={Math.trunc(value)} /> : value}\n        label={description}\n        className=\"w-70 pt3-m mb1 fl\"\n        invertColors={invertColors}\n      />\n    </div>\n  );\n};\n\nexport const StatsCardContent = ({ value, label, className, invertColors = false }: Object) => (\n  <div className={className}>\n    <h3 className={`ma0 mb1 barlow-condensed f2 fw5 ${invertColors ? 'white' : 'red'}`}>{value}</h3>\n    <span className={`ma0 h2 f7 fw5 ${invertColors ? 'white' : 'blue-grey'}`}>{label}</span>\n  </div>\n);\n","import { subMonths, format } from 'date-fns';\nimport { useQuery } from '@tanstack/react-query';\nimport { useSelector } from 'react-redux';\n\nimport { remapParamsToAPI } from '../utils/remapParamsToAPI';\nimport api from './apiClient';\n\nexport const useProjectsQuery = (fullProjectsQuery, action) => {\n  const token = useSelector((state) => state.auth.token);\n  const locale = useSelector((state) => state.preferences['locale']);\n\n  const fetchProjects = (signal, queryKey) => {\n    const [, fullProjectsQuery, action] = queryKey;\n    const paramsRemapped = remapParamsToAPI(fullProjectsQuery, backendToQueryConversion);\n    // it's needed in order to query by action when the user goes to /explore page\n    if (paramsRemapped.action === undefined && action) {\n      paramsRemapped.action = action;\n    }\n\n    if (paramsRemapped.lastUpdatedTo) {\n      paramsRemapped.lastUpdatedTo = format(subMonths(Date.now(), 6), 'yyyy-MM-dd');\n    }\n\n    return api(token, locale)\n      .get('projects/', {\n        signal,\n        params: paramsRemapped,\n      })\n      .then((res) => res.data);\n  };\n\n  return useQuery({\n    queryKey: ['projects', fullProjectsQuery, action],\n    queryFn: ({ signal, queryKey }) => fetchProjects(signal, queryKey),\n    keepPreviousData: true,\n  });\n};\n\nexport const useProjectQuery = (projectId) => {\n  const token = useSelector((state) => state.auth.token);\n  const locale = useSelector((state) => state.preferences['locale']);\n  const fetchProject = ({ signal }) => {\n    return api(token, locale).get(`projects/${projectId}/`, {\n      signal,\n    });\n  };\n\n  return useQuery({\n    queryKey: ['project', projectId],\n    queryFn: fetchProject,\n  });\n};\nexport const useProjectSummaryQuery = (projectId, otherOptions = {}) => {\n  const fetchProjectSummary = ({ signal }) => {\n    return api().get(`projects/${projectId}/queries/summary/`, {\n      signal,\n    });\n  };\n\n  return useQuery({\n    queryKey: ['project-summary', projectId],\n    queryFn: fetchProjectSummary,\n    select: (data) => data.data,\n    ...otherOptions,\n  });\n};\n\nexport const useProjectContributionsQuery = (projectId, otherOptions = {}) => {\n  const fetchProjectContributions = ({ signal }) => {\n    return api().get(`projects/${projectId}/contributions/`, {\n      signal,\n    });\n  };\n\n  return useQuery({\n    queryKey: ['project-contributions', projectId],\n    queryFn: fetchProjectContributions,\n    select: (data) => data.data.userContributions,\n    ...otherOptions,\n  });\n};\n\nexport const useActivitiesQuery = (projectId) => {\n  const ACTIVITIES_REFETCH_INTERVAL = 1000 * 60;\n  const fetchProjectActivities = ({ signal }) => {\n    return api().get(`projects/${projectId}/activities/latest/`, {\n      signal,\n    });\n  };\n\n  return useQuery({\n    queryKey: ['project-activities', projectId],\n    queryFn: fetchProjectActivities,\n    select: (data) => data.data,\n    refetchIntervalInBackground: false,\n    refetchInterval: ACTIVITIES_REFETCH_INTERVAL,\n    refetchOnWindowFocus: true,\n    useErrorBoundary: true,\n  });\n};\n\nexport const useTasksQuery = (projectId, otherOptions = {}) => {\n  const fetchProjectTasks = ({ signal }) => {\n    return api().get(`projects/${projectId}/tasks/`, {\n      signal,\n    });\n  };\n\n  return useQuery({\n    queryKey: ['project-tasks', projectId],\n    queryFn: fetchProjectTasks,\n    select: (data) => data.data,\n    ...otherOptions,\n  });\n};\n\nexport const usePriorityAreasQuery = (projectId) => {\n  const fetchProjectPriorityArea = (signal) => {\n    return api().get(`projects/${projectId}/queries/priority-areas/`, {\n      signal,\n    });\n  };\n\n  return useQuery({\n    queryKey: ['project-priority-area', projectId],\n    queryFn: ({ signal }) => fetchProjectPriorityArea(signal),\n    select: (data) => data.data,\n  });\n};\n\nexport const useProjectTimelineQuery = (projectId) => {\n  const fetchTimelineData = (signal) => {\n    return api().get(`projects/${projectId}/contributions/queries/day/`, {\n      signal,\n    });\n  };\n\n  return useQuery({\n    queryKey: ['project-timeline', projectId],\n    queryFn: ({ signal }) => fetchTimelineData(signal),\n    select: (data) => data.data.stats,\n  });\n};\n\nexport const useTaskDetail = (projectId, taskId, shouldRefetch) => {\n  const token = useSelector((state) => state.auth.token);\n\n  const fetchTaskDetail = ({ signal }) => {\n    return api(token).get(`projects/${projectId}/tasks/${taskId}/`, {\n      signal,\n    });\n  };\n\n  return useQuery({\n    queryKey: ['task-detail', projectId, taskId],\n    queryFn: fetchTaskDetail,\n    select: (data) => data.data,\n    enabled: !!(projectId && taskId),\n    refetchInterval: shouldRefetch ? 1000 * 60 : false,\n  });\n};\n\n// MAPPING\nexport const stopMapping = (projectId, taskId, comment, token, locale = 'en') => {\n  return api(token, locale).post(`projects/${projectId}/tasks/actions/stop-mapping/${taskId}/`, {\n    comment,\n  });\n};\n\nexport const splitTask = (projectId, taskId, token, locale) => {\n  return api(token, locale).post(`projects/${projectId}/tasks/actions/split/${taskId}/`);\n};\n\nexport const submitMappingTask = (url, payload, token, locale) => {\n  return api(token, locale).post(url, payload);\n};\n\n// VALIDATION\nexport const stopValidation = (projectId, payload, token, locale = 'en') => {\n  return api(token, locale).post(`projects/${projectId}/tasks/actions/stop-validation/`, payload);\n};\n\nexport const submitValidationTask = (projectId, payload, token, locale) => {\n  return api(token, locale).post(\n    `projects/${projectId}/tasks/actions/unlock-after-validation/`,\n    payload,\n  );\n};\n\nconst backendToQueryConversion = {\n  difficulty: 'difficulty',\n  campaign: 'campaign',\n  team: 'teamId',\n  organisation: 'organisationName',\n  location: 'country',\n  types: 'mappingTypes',\n  exactTypes: 'mappingTypesExact',\n  interests: 'interests',\n  text: 'textSearch',\n  page: 'page',\n  orderBy: 'orderBy',\n  orderByType: 'orderByType',\n  createdByMe: 'createdByMe',\n  managedByMe: 'managedByMe',\n  favoritedByMe: 'favoritedByMe',\n  mappedByMe: 'mappedByMe',\n  status: 'projectStatuses',\n  action: 'action',\n  stale: 'lastUpdatedTo',\n  createdFrom: 'createdFrom',\n  basedOnMyInterests: 'basedOnMyInterests',\n};\n","import React from 'react';\nimport { useIntl } from 'react-intl';\n\nimport messages from './messages';\n\nexport default function HashtagPaste({ text, setFn, hashtag, className }: Object) {\n  const intl = useIntl();\n  return (\n    <span\n      className={`bb pointer ${className}`}\n      style={{ borderBottomStyle: 'dashed' }}\n      onClick={() => setFn(text ? `${text} ${hashtag}` : `${hashtag} `)}\n      title={intl.formatMessage(messages[`${hashtag.replace('#', '')}HashtagTip`], {\n        hashtag: hashtag,\n      })}\n    >\n      {hashtag}\n    </span>\n  );\n}\n","import React from 'react';\n\nconst FileRejections = ({ files }: Object) => {\n  // Component that receives the rejected files from Dropzone\n  return (\n    <ul>\n      {files.map(({ file, errors }) => (\n        <li key={file.path} className=\"red\">\n          {file.path} (\n          {errors.map((e) => (\n            <span key={e.code} className=\"dib pr2\">\n              {e.message},\n            </span>\n          ))}\n          )\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nexport default FileRejections;\n","import React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\n\nconst DropzoneUploadStatus = ({ uploadError, uploading }: Object) => {\n  return (\n    <>\n      {uploadError && (\n        <span className=\"red f6 pt3 db\">\n          <FormattedMessage {...messages.imageUploadFailed} />\n        </span>\n      )}\n      {uploading && (\n        <span className=\"blue-grey f6 pt3 db\">\n          <FormattedMessage {...messages.imageUploadOnProgress} />\n        </span>\n      )}\n    </>\n  );\n};\n\nexport default DropzoneUploadStatus;\n","import { commands, selectWord } from '@uiw/react-md-editor';\n\nconst ICON_SIZE = 14;\n\nexport const iconConfig = {\n  bold: {\n    ...commands.bold,\n    icon: (\n      <svg role=\"img\" width={ICON_SIZE} height={ICON_SIZE} viewBox=\"0 0 384 512\">\n        <path\n          fill=\"currentColor\"\n          d=\"M304.793 243.891c33.639-18.537 53.657-54.16 53.657-95.693 0-48.236-26.25-87.626-68.626-104.179C265.138 34.01 240.849 32 209.661 32H24c-8.837 0-16 7.163-16 16v33.049c0 8.837 7.163 16 16 16h33.113v318.53H24c-8.837 0-16 7.163-16 16V464c0 8.837 7.163 16 16 16h195.69c24.203 0 44.834-1.289 66.866-7.584C337.52 457.193 376 410.647 376 350.014c0-52.168-26.573-91.684-71.207-106.123zM142.217 100.809h67.444c16.294 0 27.536 2.019 37.525 6.717 15.828 8.479 24.906 26.502 24.906 49.446 0 35.029-20.32 56.79-53.029 56.79h-76.846V100.809zm112.642 305.475c-10.14 4.056-22.677 4.907-31.409 4.907h-81.233V281.943h84.367c39.645 0 63.057 25.38 63.057 63.057.001 28.425-13.66 52.483-34.782 61.284z\"\n        />\n      </svg>\n    ),\n  },\n  italic: {\n    ...commands.italic,\n    icon: (\n      <svg data-name=\"italic\" width={ICON_SIZE} height={ICON_SIZE} role=\"img\" viewBox=\"0 0 320 512\">\n        <path\n          fill=\"currentColor\"\n          d=\"M204.758 416h-33.849l62.092-320h40.725a16 16 0 0 0 15.704-12.937l6.242-32C297.599 41.184 290.034 32 279.968 32H120.235a16 16 0 0 0-15.704 12.937l-6.242 32C96.362 86.816 103.927 96 113.993 96h33.846l-62.09 320H46.278a16 16 0 0 0-15.704 12.935l-6.245 32C22.402 470.815 29.967 480 40.034 480h158.479a16 16 0 0 0 15.704-12.935l6.245-32c1.927-9.88-5.638-19.065-15.704-19.065z\"\n        />\n      </svg>\n    ),\n  },\n  quote: {\n    ...commands.quote,\n    icon: (\n      <svg width={ICON_SIZE} height={ICON_SIZE} viewBox=\"0 0 520 520\">\n        <path\n          fill=\"currentColor\"\n          d=\"M520,95.75 L520,225.75 C520,364.908906 457.127578,437.050625 325.040469,472.443125 C309.577578,476.586875 294.396016,464.889922 294.396016,448.881641 L294.396016,414.457031 C294.396016,404.242891 300.721328,395.025078 310.328125,391.554687 C377.356328,367.342187 414.375,349.711094 414.375,274.5 L341.25,274.5 C314.325781,274.5 292.5,252.674219 292.5,225.75 L292.5,95.75 C292.5,68.8257812 314.325781,47 341.25,47 L471.25,47 C498.174219,47 520,68.8257812 520,95.75 Z M178.75,47 L48.75,47 C21.8257813,47 0,68.8257812 0,95.75 L0,225.75 C0,252.674219 21.8257813,274.5 48.75,274.5 L121.875,274.5 C121.875,349.711094 84.8563281,367.342187 17.828125,391.554687 C8.22132813,395.025078 1.89601563,404.242891 1.89601563,414.457031 L1.89601563,448.881641 C1.89601563,464.889922 17.0775781,476.586875 32.5404687,472.443125 C164.627578,437.050625 227.5,364.908906 227.5,225.75 L227.5,95.75 C227.5,68.8257812 205.674219,47 178.75,47 Z\"\n        />\n      </svg>\n    ),\n  },\n  link: {\n    ...commands.link,\n    icon: (\n      <svg data-name=\"italic\" width={ICON_SIZE} height={ICON_SIZE} role=\"img\" viewBox=\"0 0 520 520\">\n        <path\n          fill=\"currentColor\"\n          d=\"M331.751196,182.121107 C392.438214,241.974735 391.605313,337.935283 332.11686,396.871226 C332.005129,396.991316 331.873084,397.121413 331.751196,397.241503 L263.493918,464.491645 C203.291404,523.80587 105.345257,523.797864 45.151885,464.491645 C-15.0506283,405.187427 -15.0506283,308.675467 45.151885,249.371249 L82.8416853,212.237562 C92.836501,202.39022 110.049118,208.9351 110.56511,222.851476 C111.223305,240.5867 114.451306,258.404985 120.407566,275.611815 C122.424812,281.438159 120.983487,287.882964 116.565047,292.23621 L103.272145,305.332975 C74.8052033,333.379887 73.9123737,379.047937 102.098973,407.369054 C130.563883,435.969378 177.350591,436.139505 206.033884,407.879434 L274.291163,340.6393 C302.9257,312.427264 302.805844,266.827265 274.291163,238.733318 C270.531934,235.036561 266.74528,232.16442 263.787465,230.157924 C259.544542,227.2873 256.928256,222.609848 256.731165,217.542518 C256.328935,206.967633 260.13184,196.070508 268.613213,187.714278 L289.998463,166.643567 C295.606326,161.118448 304.403592,160.439942 310.906317,164.911276 C318.353355,170.034591 325.328531,175.793397 331.751196,182.121107 Z M240.704978,55.4828366 L172.447607,122.733236 C172.325719,122.853326 172.193674,122.983423 172.081943,123.103513 C117.703294,179.334654 129.953294,261.569283 185.365841,328.828764 C191.044403,335.721376 198.762988,340.914712 206.209732,346.037661 C212.712465,350.509012 221.510759,349.829503 227.117615,344.305363 L248.502893,323.234572 C256.984277,314.87831 260.787188,303.981143 260.384957,293.406218 C260.187865,288.338869 257.571576,283.661398 253.328648,280.790763 C250.370829,278.78426 246.58417,275.912107 242.824936,272.215337 C214.310216,244.121282 206.209732,204.825874 229.906702,179.334654 L298.164073,112.094263 C326.847404,83.8340838 373.633159,84.0042113 402.099123,112.604645 C430.285761,140.92587 429.393946,186.594095 400.92595,214.641114 L387.63303,227.737929 C383.214584,232.091191 381.773257,238.536021 383.790506,244.362388 C389.746774,261.569283 392.974779,279.387637 393.632975,297.122928 C394.149984,311.039357 411.361608,317.584262 421.356437,307.736882 L459.046288,270.603053 C519.249898,211.29961 519.249898,114.787281 459.047304,55.4828366 C398.853851,-3.82360914 300.907572,-3.83161514 240.704978,55.4828366 Z\"\n        />\n      </svg>\n    ),\n  },\n  unorderedListCommand: {\n    ...commands.unorderedListCommand,\n    icon: (\n      <svg data-name=\"unordered-list\" width={ICON_SIZE} height={ICON_SIZE} viewBox=\"0 0 512 512\">\n        <path\n          fill=\"currentColor\"\n          d=\"M96 96c0 26.51-21.49 48-48 48S0 122.51 0 96s21.49-48 48-48 48 21.49 48 48zM48 208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm0 160c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm96-236h352c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z\"\n        />\n      </svg>\n    ),\n  },\n  orderedListCommand: {\n    ...commands.orderedListCommand,\n    icon: (\n      <svg\n        data-name=\"ordered-list\"\n        width={ICON_SIZE}\n        height={ICON_SIZE}\n        role=\"img\"\n        viewBox=\"0 0 512 512\"\n      >\n        <path\n          fill=\"currentColor\"\n          d=\"M3.263 139.527c0-7.477 3.917-11.572 11.573-11.572h15.131V88.078c0-5.163.534-10.503.534-10.503h-.356s-1.779 2.67-2.848 3.738c-4.451 4.273-10.504 4.451-15.666-1.068l-5.518-6.231c-5.342-5.341-4.984-11.216.534-16.379l21.72-19.938C32.815 33.602 36.732 32 42.785 32H54.89c7.656 0 11.749 3.916 11.749 11.572v84.384h15.488c7.655 0 11.572 4.094 11.572 11.572v8.901c0 7.477-3.917 11.572-11.572 11.572H14.836c-7.656 0-11.573-4.095-11.573-11.572v-8.902zM2.211 304.591c0-47.278 50.955-56.383 50.955-69.165 0-7.18-5.954-8.755-9.28-8.755-3.153 0-6.479 1.051-9.455 3.852-5.079 4.903-10.507 7.004-16.111 2.451l-8.579-6.829c-5.779-4.553-7.18-9.805-2.803-15.409C13.592 201.981 26.025 192 47.387 192c19.437 0 44.476 10.506 44.476 39.573 0 38.347-46.753 46.402-48.679 56.909h39.049c7.529 0 11.557 4.027 11.557 11.382v8.755c0 7.354-4.028 11.382-11.557 11.382h-67.94c-7.005 0-12.083-4.028-12.083-11.382v-4.028zM5.654 454.61l5.603-9.28c3.853-6.654 9.105-7.004 15.584-3.152 4.903 2.101 9.63 3.152 14.359 3.152 10.155 0 14.358-3.502 14.358-8.23 0-6.654-5.604-9.106-15.934-9.106h-4.728c-5.954 0-9.28-2.101-12.258-7.88l-1.05-1.926c-2.451-4.728-1.226-9.806 2.801-14.884l5.604-7.004c6.829-8.405 12.257-13.483 12.257-13.483v-.35s-4.203 1.051-12.608 1.051H16.685c-7.53 0-11.383-4.028-11.383-11.382v-8.755c0-7.53 3.853-11.382 11.383-11.382h58.484c7.529 0 11.382 4.027 11.382 11.382v3.327c0 5.778-1.401 9.806-5.079 14.183l-17.509 20.137c19.611 5.078 28.716 20.487 28.716 34.845 0 21.363-14.358 44.126-48.503 44.126-16.636 0-28.192-4.728-35.896-9.455-5.779-4.202-6.304-9.805-2.626-15.934zM144 132h352c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z\"\n        />\n      </svg>\n    ),\n  },\n  mention: {\n    name: 'mention',\n    keyCommand: 'mention',\n    value: '@',\n    buttonProps: { 'aria-label': 'Mention user', title: 'Mention user' },\n    icon: (\n      <svg\n        width={ICON_SIZE}\n        height={ICON_SIZE}\n        viewBox=\"0 0 24 24\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      >\n        <circle cx=\"12\" cy=\"12\" r=\"4\"></circle>\n        <path d=\"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94\"></path>\n      </svg>\n    ),\n    execute: (state, api) => {\n      const newSelectionRange = selectWord({ text: state.text, selection: state.selection });\n      const state1 = api.setSelectionRange(newSelectionRange);\n      const state2 = api.replaceSelection(`@${state1.selectedText}`);\n      api.setSelectionRange({\n        start: state2.selection.end - state1.selectedText.length,\n        end: state2.selection.end,\n      });\n    },\n  },\n  upload: {\n    name: 'upload',\n    keyCommand: 'upload',\n    buttonProps: { 'aria-label': 'Upload user', title: 'Upload image' },\n    icon: (\n      <svg width={ICON_SIZE} height={ICON_SIZE} x=\"0\" y=\"0\" viewBox=\"0 0 24 24\" className=\"\">\n        <g>\n          <path\n            id=\"image-upload\"\n            d=\"m21.75 11v6a3.383 3.383 0 0 1 -3.75 3.75h-12a3.383 3.383 0 0 1 -3.75-3.75v-10a3.383 3.383 0 0 1 3.75-3.75h8a.75.75 0 0 1 0 1.5h-8c-1.577 0-2.25.673-2.25 2.25v9.25l2.54-2.54a1.008 1.008 0 0 1 1.42 0l.94.94a.5.5 0 0 0 .7 0l4.94-4.94a1.008 1.008 0 0 1 1.42 0l4.54 4.54v-3.25a.75.75 0 0 1 1.5 0zm-13.757-3.25a1.253 1.253 0 1 0 .007 0zm10.537-2.72.22-.219v2.189a.75.75 0 0 0 1.5 0v-2.189l.22.219a.75.75 0 0 0 1.06-1.06l-1.5-1.5a.751.751 0 0 0 -1.06 0l-1.5 1.5a.75.75 0 0 0 1.06 1.06z\"\n            fill=\"#000000\"\n            data-original=\"#000000\"\n            className=\"\"\n          ></path>\n        </g>\n      </svg>\n    ),\n    execute: () => {\n      document.getElementById('image_picker').click();\n    },\n  },\n  // The backend converts markdown into HTML, so youtube embed iframe works on the preview mode,\n  // uncomment this when backend has support for converting our custom youtube markdown into iframes\n  // youtube: {\n  //   name: 'youtube',\n  //   keyCommand: 'youtube',\n  //   value: '::youtube[]',\n  //   buttonProps: { 'aria-label': 'Add YouTube video', title: 'Add YouTube video' },\n  //   icon: (\n  //     <svg\n  //       xmlns=\"http://www.w3.org/2000/svg\"\n  //       x=\"0px\"\n  //       y=\"0px\"\n  //       width=\"14\"\n  //       height=\"14\"\n  //       viewBox=\"0 0 48 48\"\n  //       style={{ fill: '#7950F2' }}\n  //     >\n  //       <path\n  //         fill=\"#FF3D00\"\n  //         d=\"M43.2,33.9c-0.4,2.1-2.1,3.7-4.2,4c-3.3,0.5-8.8,1.1-15,1.1c-6.1,0-11.6-0.6-15-1.1c-2.1-0.3-3.8-1.9-4.2-4C4.4,31.6,4,28.2,4,24c0-4.2,0.4-7.6,0.8-9.9c0.4-2.1,2.1-3.7,4.2-4C12.3,9.6,17.8,9,24,9c6.2,0,11.6,0.6,15,1.1c2.1,0.3,3.8,1.9,4.2,4c0.4,2.3,0.9,5.7,0.9,9.9C44,28.2,43.6,31.6,43.2,33.9z\"\n  //       ></path>\n  //       <path fill=\"#FFF\" d=\"M20 31L20 17 32 24z\"></path>\n  //     </svg>\n  //   ),\n  //   execute: (state, api) => {\n  //     const newSelectionRange = selectWord({ text: state.text, selection: state.selection });\n  //     const state1 = api.setSelectionRange(newSelectionRange);\n  //     const state2 = api.replaceSelection(`::youtube[${state1.selectedText}]`);\n  //     api.setSelectionRange({\n  //       start: state2.selection.end - 1,\n  //       end: state2.selection.end - 1,\n  //     });\n  //   },\n  // },\n};\n","import React, { useRef, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport MDEditor from '@uiw/react-md-editor';\nimport Tribute from 'tributejs';\nimport { FormattedMessage } from 'react-intl';\nimport { useDropzone } from 'react-dropzone';\n\nimport 'tributejs/tribute.css';\n\nimport { useOnDrop, useUploadImage } from '../../hooks/UseUploadImage';\nimport { fetchLocalJSONAPI } from '../../network/genericJSONRequest';\nimport HashtagPaste from './hashtagPaste';\nimport FileRejections from './fileRejections';\nimport DropzoneUploadStatus from './uploadStatus';\nimport { DROPZONE_SETTINGS } from '../../config';\nimport { htmlFromMarkdown, formatUserNamesToLink } from '../../utils/htmlFromMarkdown';\nimport { iconConfig } from './editorIconConfig';\nimport messages from './messages';\nimport { CurrentUserAvatar } from '../user/avatar';\n\nexport const CommentInputField = ({\n  comment,\n  setComment,\n  contributors,\n  enableHashtagPaste = false,\n  isShowTabNavs = false,\n  isShowFooter = false,\n  enableContributorsHashtag = false,\n  isShowUserPicture = false,\n  placeholderMsg = messages.leaveAComment,\n  markdownTextareaProps = {},\n}: Object) => {\n  const token = useSelector((state) => state.auth.token);\n  const textareaRef = useRef();\n  const isBundle = useRef(false);\n  const [isShowPreview, setIsShowPreview] = useState(false);\n\n  const appendImgToComment = (url) => setComment(`${comment}\\n![image](${url})\\n`);\n  const [uploadError, uploading, onDrop] = useOnDrop(appendImgToComment);\n  const { fileRejections, getRootProps, getInputProps } = useDropzone({\n    onDrop,\n    ...DROPZONE_SETTINGS,\n  });\n  const [fileuploadError, fileuploading, uploadImg] = useUploadImage();\n\n  const tribute = new Tribute({\n    trigger: '@',\n    values: async (query, cb) => {\n      try {\n        if (!query) return cb(contributors.map((username) => ({ username })));\n        const res = await fetchLocalJSONAPI(`users/queries/filter/${query}/`, token);\n        cb(res.usernames.map((username) => ({ username })));\n      } catch (e) {\n        return [];\n      }\n    },\n    lookup: 'username',\n    fillAttr: 'username',\n    selectTemplate: (item) => `@[${item.original.username}]`,\n    itemClass: 'w-100 pv2 ph3 bg-tan hover-bg-blue-grey blue-grey hover-white pointer base-font',\n    requireLeadingSpace: true,\n    noMatchTemplate: null,\n    allowSpaces: true,\n    searchOpts: {\n      skip: true,\n    },\n  });\n\n  useEffect(() => {\n    // Make sure the type of contributors is not an array until the attachment happens\n    if (textareaRef.current.textarea && !isBundle.current && Array.isArray(contributors)) {\n      isBundle.current = true;\n      tribute.attach(textareaRef.current.textarea);\n      textareaRef.current.textarea.addEventListener('tribute-replaced', (e) => {\n        setComment(e.target.value);\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [textareaRef.current, contributors]);\n\n  const handleImagePick = async (event) =>\n    await uploadImg(event.target.files[0], appendImgToComment, token);\n\n  return (\n    <div {...getRootProps()}>\n      {isShowTabNavs && (\n        <div className={`flex items-center gap-1 ${isShowUserPicture ? 'mb3' : ''}`}>\n          {isShowUserPicture && <CurrentUserAvatar className=\"w3 h3\" />}\n          <div className=\"pv3-ns ph3 ph3-m bg-grey-light dib\">\n            <span\n              role=\"button\"\n              className={`pointer db dib-ns pb1 bb bw1 ${\n                !isShowPreview ? 'b--blue-dark' : 'b--grey-light'\n              }`}\n              onClick={() => setIsShowPreview(false)}\n            >\n              <FormattedMessage {...messages.write} />\n            </span>\n            <span\n              role=\"button\"\n              className={`pointer ml3 db dib-ns pb1 bb bw1 ${\n                isShowPreview ? 'b--blue-dark' : 'b--grey-light'\n              }`}\n              onClick={() => setIsShowPreview(true)}\n            >\n              <FormattedMessage {...messages.preview} />\n            </span>\n          </div>\n        </div>\n      )}\n      <div className={`${isShowPreview ? 'dn' : ''} bg-white`} data-color-mode=\"light\">\n        <FormattedMessage {...placeholderMsg}>\n          {(val) => (\n            <MDEditor\n              ref={textareaRef}\n              preview=\"edit\"\n              commands={Object.keys(iconConfig).map((key) => iconConfig[key])}\n              extraCommands={[]}\n              height={200}\n              value={comment}\n              onChange={setComment}\n              textareaProps={{\n                ...getInputProps(),\n                spellCheck: 'true',\n                placeholder: val,\n                ...markdownTextareaProps,\n              }}\n              defaultTabEnable\n            />\n          )}\n        </FormattedMessage>\n        <input\n          type=\"file\"\n          id=\"image_picker\"\n          className=\"dn\"\n          accept=\"image/*\"\n          onChange={handleImagePick}\n        />\n        {isShowFooter && (\n          <div className=\"dn flex-ns justify-between ba bt-0 w-100 ph2 pv1 relative b--blue-grey textareaDetail\">\n            <span className=\"f7 lh-copy gray\">\n              <FormattedMessage {...messages.attachImage} />\n            </span>\n            <span className=\"f7 lh-copy gray\">\n              <FormattedMessage {...messages.markdownSupported} />\n            </span>\n          </div>\n        )}\n      </div>\n      {isShowPreview && (\n        <div className=\"db ba ph3\" style={{ minHeight: 200, borderColor: '#F0EEEE' }}>\n          {comment && (\n            <div\n              style={{ wordWrap: 'break-word' }}\n              className=\"blue-grey f5 lh-title markdown-content\"\n              dangerouslySetInnerHTML={htmlFromMarkdown(formatUserNamesToLink(comment))}\n            />\n          )}\n          {!comment && (\n            <span className=\"db mt3\">\n              <FormattedMessage {...messages.nothingToPreview} />\n            </span>\n          )}\n        </div>\n      )}\n      {enableHashtagPaste && !isShowPreview && (\n        <span className=\"db blue-grey f6 pt2\">\n          <HashtagPaste text={comment} setFn={setComment} hashtag=\"#managers\" />\n          <span>, </span>\n          <HashtagPaste text={comment} setFn={setComment} hashtag=\"#author\" />\n          {enableContributorsHashtag && (\n            <>\n              <span>, </span>\n              <HashtagPaste text={comment} setFn={setComment} hashtag=\"#contributors\" />\n            </>\n          )}\n        </span>\n      )}\n      <DropzoneUploadStatus\n        uploading={uploading || fileuploading}\n        uploadError={uploadError || fileuploadError}\n      />\n      <FileRejections files={fileRejections} />\n    </div>\n  );\n};\n","import React, { Fragment } from 'react';\n\nimport { TextRow, TextBlock, RoundShape, RectShape } from 'react-placeholder/lib/placeholders';\n\nexport const teamCardPlaceholderTemplate = () => (_n, i) =>\n  (\n    <article\n      className=\"base-font blue-dark h-100 bg-white ph3 pb3 ba br1 b--card shadow-hover h-100 flex flex-column justify-between\"\n      key={i}\n    >\n      <div className=\"mt3\">\n        <TextRow\n          className=\"show-loading-animation mb3\"\n          color=\"#CCC\"\n          style={{ width: 200, height: 24 }}\n        />\n        <RectShape\n          className=\"show-loading-animation mb4\"\n          style={{ width: 80, height: 50 }}\n          color=\"#DDD\"\n        />\n        {[...Array(2)].map((_, i) => (\n          <Fragment key={i}>\n            <TextRow className=\"show-loading-animation\" color=\"#CCC\" style={{ width: '45%' }} />\n            {[...Array(2)].map((_, i) => (\n              <RoundShape\n                key={i}\n                className=\"show-loading-animation dib mt1\"\n                style={{ width: 25, height: 25 }}\n                color=\"#DDD\"\n              />\n            ))}\n          </Fragment>\n        ))}\n      </div>\n      <TextBlock\n        rows={2}\n        className=\"show-loading-animation mt2\"\n        color=\"#CCC\"\n        style={{ width: 80, height: 50 }}\n      />\n    </article>\n  );\n\nexport const nCardPlaceholders = (N) => {\n  return [...Array(N).keys()].map(teamCardPlaceholderTemplate());\n};\n","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport ReactPlaceholder from 'react-placeholder';\nimport { Form, Field, useFormState } from 'react-final-form';\nimport ReactTooltip from 'react-tooltip';\n\nimport messages from './messages';\nimport { InfoIcon } from '../svgIcons';\nimport { useEditTeamAllowed } from '../../hooks/UsePermissions';\nimport { UserAvatar, UserAvatarList } from '../user/avatar';\nimport { AddButton, ViewAllLink, Management, VisibilityBox, JoinMethodBox } from './management';\nimport { RadioField, OrganisationSelectInput, TextField } from '../formInputs';\nimport { Button, EditButton } from '../button';\nimport { nCardPlaceholders } from './teamsPlaceholder';\nimport { Alert } from '../alert';\n\nexport function TeamsManagement({\n  teams,\n  userDetails,\n  managementView,\n  userTeamsOnly,\n  setUserTeamsOnly,\n  teamsStatus,\n  query,\n  setQuery,\n}: Object) {\n  const isOrgManager = useSelector(\n    (state) => state.auth.organisations && state.auth.organisations.length > 0,\n  );\n\n  const onSearchInputChange = (e) =>\n    setQuery({ ...query, searchQuery: e.target.value || undefined, page: 1 }, 'pushIn');\n\n  const clearSearchQuery = () => setQuery({ ...query, searchQuery: undefined, page: 1 }, 'pushIn');\n\n  return (\n    <Management\n      title={\n        managementView ? (\n          <FormattedMessage\n            {...messages.manage}\n            values={{ entity: <FormattedMessage {...messages.teams} /> }}\n          />\n        ) : (\n          <FormattedMessage {...messages.myTeams} />\n        )\n      }\n      isAdmin={userDetails.role === 'ADMIN' && managementView}\n      showAddButton={(userDetails.role === 'ADMIN' || isOrgManager) && managementView}\n      managementView={managementView}\n      userOnly={userTeamsOnly}\n      setUserOnly={setUserTeamsOnly}\n      userOnlyLabel={<FormattedMessage {...messages.myTeams} />}\n    >\n      <div className=\"w-20-l w-25-m\">\n        <TextField\n          value={query.searchQuery || ''}\n          placeholderMsg={messages.searchTeams}\n          onChange={onSearchInputChange}\n          onCloseIconClick={clearSearchQuery}\n        />\n      </div>\n      <div className={`${teamsStatus !== 'error' ? 'cards-container' : ''} mt2`}>\n        {teamsStatus === 'loading' && (\n          <ReactPlaceholder\n            showLoadingAnimation={true}\n            customPlaceholder={nCardPlaceholders(4)}\n            delay={10}\n            ready={false}\n          />\n        )}\n        {teamsStatus === 'error' && (\n          <Alert type=\"error\">\n            <FormattedMessage {...messages.errorLoadingTeams} />\n          </Alert>\n        )}\n        {teamsStatus === 'success' && (\n          <>\n            {teams?.length ? (\n              teams.map((team) => <TeamCard team={team} key={team.teamId} />)\n            ) : (\n              <div className=\"pb3 pt2\">\n                <FormattedMessage {...messages.noTeams} />\n              </div>\n            )}\n          </>\n        )}\n      </div>\n    </Management>\n  );\n}\n\nexport function Teams({ teams, viewAllQuery, showAddButton = false, isReady, border = true }) {\n  return (\n    <div className={`bg-white ${border ? 'b--grey-light ba pa4' : ''}`}>\n      <div className=\"cf db\">\n        <h3 className=\"f3 barlow-condensed ttu blue-dark mv0 fw6 dib v-mid\">\n          <FormattedMessage {...messages.teams} />\n        </h3>\n        {showAddButton && (\n          <Link to={'/manage/teams/new/'} className=\"dib ml4\">\n            <AddButton />\n          </Link>\n        )}\n        {viewAllQuery && <ViewAllLink link={`/manage/teams/${viewAllQuery ? viewAllQuery : ''}`} />}\n        <div className=\"cards-container pt4\">\n          <ReactPlaceholder customPlaceholder={nCardPlaceholders(4)} delay={10} ready={isReady}>\n            {teams?.slice(0, 6).map((team) => (\n              <TeamCard key={team.teamId} team={team} />\n            ))}\n            {teams?.length === 0 && (\n              <span className=\"blue-grey\">\n                <FormattedMessage {...messages.noTeamsFound} />\n              </span>\n            )}\n          </ReactPlaceholder>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport function TeamCard({ team }: Object) {\n  return (\n    <Link to={`/teams/${team.teamId}/membership/`} className=\"no-underline\">\n      <article className=\"base-font blue-dark h-100 bg-white ph3 pb3 ba br1 shadow-hover h-100 flex flex-column justify-between b--card\">\n        <div className=\"\">\n          <h3 className=\"f4 fw6 h3 lh-title mt3 mb2 overflow-y-hidden\" title={team.name}>\n            {team.name}\n          </h3>\n          <div className=\"db h2\" title={team.organisation}>\n            <img src={team.logo} alt={team.organisation} className=\"h2\" />\n          </div>\n          <h4 className=\"f6 fw5 mb2 mt3 ttu blue-light\">\n            <FormattedMessage {...messages.managers} />\n          </h4>\n          <div className=\"db h2\">\n            <UserAvatarList\n              size=\"small\"\n              textColor=\"white\"\n              users={team.members.filter((user) => user.function === 'MANAGER' && user.active)}\n              maxLength={8}\n              totalCount={team.managersCount}\n            />\n          </div>\n          <h4 className=\"f6 fw5 mv2 ttu blue-light\">\n            <FormattedMessage {...messages.teamMembers} />\n          </h4>\n          <div className=\"db h2\">\n            <UserAvatarList\n              size=\"small\"\n              textColor=\"white\"\n              users={team.members.filter((user) => user.function !== 'MANAGER' && user.active)}\n              maxLength={8}\n              totalCount={team.membersCount}\n            />\n          </div>\n        </div>\n        <div className=\"pt3\">\n          <VisibilityBox visibility={team.visibility} extraClasses=\"pv1 ph2 dib\" />\n          <div className=\"pt2 h2\">\n            <JoinMethodBox className=\"pv1 ph2 dib\" joinMethod={team.joinMethod} />\n          </div>\n        </div>\n      </article>\n    </Link>\n  );\n}\n\nexport function TeamInformation(props) {\n  const intl = useIntl();\n  const labelClasses = 'db pt3 pb2';\n  const fieldClasses = 'blue-grey w-100 pv3 ph2 input-reset ba b--grey-light bg-transparent';\n  const formState = useFormState();\n  const joinMethods = {\n    ANY: 'anyoneCanJoin',\n    BY_REQUEST: 'byRequest',\n    BY_INVITE: 'byInvite',\n  };\n\n  return (\n    <>\n      <div className=\"cf\">\n        <label className={labelClasses}>\n          <FormattedMessage {...messages.name} />\n        </label>\n        <Field name=\"name\" component=\"input\" type=\"text\" className={fieldClasses} required />\n      </div>\n      <div className=\"cf\">\n        <label className={labelClasses}>\n          <FormattedMessage {...messages.description} />\n        </label>\n        <Field name=\"description\" component=\"textarea\" type=\"text\" className={fieldClasses} />\n      </div>\n      <div className=\"cf\">\n        <label className={labelClasses}>\n          <FormattedMessage {...messages.organisation} />\n        </label>\n        <OrganisationSelectInput name=\"organisation_id\" />\n      </div>\n      <div className=\"cf pt1\">\n        <label className={labelClasses}>\n          <FormattedMessage {...messages.joinMethod} />\n        </label>\n        {Object.keys(joinMethods).map((method) => (\n          <div className=\"pv2\" key={method}>\n            <RadioField name=\"joinMethod\" value={method} required />\n            <span className=\"f5\">\n              <FormattedMessage {...messages[joinMethods[method]]} />\n            </span>\n            <InfoIcon\n              width={12}\n              height={12}\n              className=\"blue-grey v-mid pb1 ml2\"\n              data-tip={intl.formatMessage(messages[`${joinMethods[method]}Description`])}\n            />\n            <ReactTooltip place=\"bottom\" className=\"mw6\" effect=\"solid\" />\n          </div>\n        ))}\n      </div>\n      {formState.values.joinMethod === 'BY_INVITE' && (\n        <div className=\"cf pt1\">\n          <label className={labelClasses}>\n            <FormattedMessage {...messages.visibility} />\n          </label>\n          <div className=\"pv2\">\n            <RadioField name=\"visibility\" value=\"PUBLIC\" />\n            <span className=\" f5\">\n              <FormattedMessage {...messages.public} />\n            </span>\n            <InfoIcon\n              width={12}\n              height={12}\n              className=\"blue-grey v-mid pb1 ml2\"\n              data-tip={intl.formatMessage(messages['publicDescription'])}\n            />\n          </div>\n          <div className=\"pv2\">\n            <RadioField name=\"visibility\" value=\"PRIVATE\" />\n            <span className=\"f5\">\n              <FormattedMessage {...messages.private} />\n            </span>\n            <InfoIcon\n              width={12}\n              height={12}\n              className=\"blue-grey v-mid pb1 ml2\"\n              data-tip={intl.formatMessage(messages['privateDescription'])}\n            />\n            <ReactTooltip place=\"bottom\" className=\"mw6\" effect=\"solid\" />\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n\nexport function TeamForm(props) {\n  return (\n    <Form\n      onSubmit={(values) => props.updateTeam(values)}\n      initialValues={props.team}\n      mutators={{\n        setValue: [],\n      }}\n      render={({\n        handleSubmit,\n        dirty,\n        submitSucceeded,\n        dirtySinceLastSubmit,\n        form,\n        submitting,\n        values,\n      }) => {\n        const dirtyForm = submitSucceeded ? dirtySinceLastSubmit && dirty : dirty;\n        return (\n          <div className=\"blue-grey mb3\">\n            <div className={`bg-white b--grey-light pa4 ${dirtyForm ? 'bt bl br' : 'ba'}`}>\n              <h3 className=\"f3 fw6 dib blue-dark mv0\">\n                <FormattedMessage {...messages.teamInfo} />\n              </h3>\n              <form id=\"team-form\" onSubmit={handleSubmit}>\n                <fieldset className=\"bn pa0\" disabled={submitting}>\n                  <TeamInformation joinMethod={props.team.joinMethod} />\n                </fieldset>\n              </form>\n            </div>\n            {dirtyForm && (\n              <div className=\"cf pt0 h3\">\n                <div className=\"w-70-l w-50 fl tr dib bg-grey-light\">\n                  <Button className=\"blue-dark bg-grey-light h3\" onClick={() => form.restart()}>\n                    <FormattedMessage {...messages.cancel} />\n                  </Button>\n                </div>\n                <div className=\"w-30-l w-50 h-100 fr dib\">\n                  <Button\n                    onClick={() => handleSubmit()}\n                    className=\"w-100 h-100 bg-red white\"\n                    disabledClassName=\"bg-red o-50 white w-100 h-100\"\n                  >\n                    <FormattedMessage {...messages.save} />\n                  </Button>\n                </div>\n              </div>\n            )}\n          </div>\n        );\n      }}\n    ></Form>\n  );\n}\n\nexport function TeamSideBar({ team, members, managers, requestedToJoin }: Object) {\n  const [isUserTeamManager] = useEditTeamAllowed(team);\n  const [searchQuery, setSearchQuery] = useState('');\n\n  const searchMembers = () =>\n    searchQuery !== ''\n      ? members.filter((member) => {\n          return member.username.toLowerCase().includes(searchQuery.toLowerCase());\n        })\n      : members;\n\n  return (\n    <ReactPlaceholder\n      showLoadingAnimation={true}\n      type=\"media\"\n      rows={20}\n      ready={typeof team.teamId === 'number'}\n    >\n      <div className=\"cf pb2\">\n        <div className=\"w-20 pv2 dib fl\">\n          <span className=\"blue-grey v-mid\">\n            <FormattedMessage {...messages.team} /> #{team.teamId}\n          </span>\n        </div>\n        <div className=\"w-80 dib fr tr\">\n          {isUserTeamManager && (\n            <EditButton url={`/manage/teams/${team.teamId}`}>\n              <FormattedMessage {...messages.editTeam} />\n            </EditButton>\n          )}\n          <JoinMethodBox className=\"pv2 ph3 mh1 mv1 dib\" joinMethod={team.joinMethod} />\n          <VisibilityBox visibility={team.visibility} extraClasses=\"pv2 ph3 mh1 mv1 dib\" />\n        </div>\n      </div>\n      <h3 className=\"f2 ttu blue-dark fw7 barlow-condensed v-mid ma0 dib ttu\">{team.name}</h3>\n      <p className=\"blue-grey\">{team.description}</p>\n      <div className=\"cf\">\n        <div className=\"w-100 w-50-m fl\">\n          <h4>\n            <FormattedMessage {...messages.organisation} />\n          </h4>\n          <Link\n            className=\"link blue-dark fw5 mr2 underline dib\"\n            to={`/organisations/${team.organisationSlug}`}\n          >\n            <p>\n              {typeof team.logo === 'string' && (\n                <img src={team.logo} alt=\"organisation logo\" className=\"mw4\" />\n              )}\n            </p>\n            {team.organisation}\n          </Link>\n        </div>\n        <div className=\"w-100 w-50-m fl\">\n          <h4>\n            <FormattedMessage {...messages.managers} />\n          </h4>\n          {managers.length === 0 ? (\n            <span className=\"f6 blue-grey\">\n              <FormattedMessage {...messages.noManagers} />\n            </span>\n          ) : (\n            <div className=\"cf db mt3\">\n              {managers.map((user) => (\n                <UserAvatar\n                  key={user.username}\n                  username={user.username}\n                  picture={user.pictureUrl}\n                  size=\"large\"\n                  colorClasses=\"white bg-blue-grey mv1\"\n                />\n              ))}\n            </div>\n          )}\n          <h4>\n            <FormattedMessage {...messages.members} />\n          </h4>\n          {members.length === 0 ? (\n            <span className=\"f6 blue-grey\">\n              <FormattedMessage {...messages.noMembers} />\n            </span>\n          ) : (\n            <>\n              <div className=\"cf db mt3\">\n                <div className=\"mb3 w5\">\n                  <TextField\n                    value={searchQuery}\n                    placeholderMsg={messages.searchMembers}\n                    onChange={({ target: { value } }) => setSearchQuery(value)}\n                    onCloseIconClick={() => setSearchQuery('')}\n                  />\n                </div>\n                {searchMembers().map((user) => (\n                  <UserAvatar\n                    key={user.username}\n                    username={user.username}\n                    picture={user.pictureUrl}\n                    colorClasses=\"white bg-blue-grey mv1\"\n                  />\n                ))}\n              </div>\n            </>\n          )}\n          <div className=\"cf db mt3\">\n            {requestedToJoin && (\n              <span className=\"red pr5-ns\">\n                <FormattedMessage {...messages.waitingApproval} />\n              </span>\n            )}\n          </div>\n        </div>\n      </div>\n    </ReactPlaceholder>\n  );\n}\n\nexport function TeamsBoxList({ teams }: Object) {\n  const mappingTeams = teams.filter((team) => team.role === 'MAPPER');\n  const validationTeams = teams.filter((team) => team.role === 'VALIDATOR');\n  return (\n    <div className=\"flex flex-column flex-row-l gap-1\">\n      {mappingTeams.length > 0 && (\n        <div className=\"w-100 w-30-l\">\n          <h4 className=\"mb1 fw6 mt0\">\n            <FormattedMessage {...messages.mappingTeams} />\n          </h4>\n          <div>\n            {mappingTeams.map((team) => (\n              <TeamBox key={team.teamId} team={team} className=\"dib pv2 ph3 mt2 ba f6 tc\" />\n            ))}\n          </div>\n        </div>\n      )}\n      {validationTeams.length > 0 && (\n        <div className=\"w-100 w-30-l\">\n          <h4 className=\"mb1 fw6 mt0\">\n            <FormattedMessage {...messages.validationTeams} />\n          </h4>\n          {validationTeams.map((team) => (\n            <TeamBox key={team.teamId} team={team} className=\"dib pv2 ph3 mt2 ba f6 tc\" />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport const TeamBox = ({ team, className }: Object) => (\n  <Link className=\"link blue-grey mr2\" to={`/teams/${team.teamId}/membership/`}>\n    <div className={`br1 ${className}`}>\n      {team.logo && (\n        <img alt={team.organisation} src={team.logo} className=\"object-fit-contain h2 pr2 v-mid\" />\n      )}\n      {team.name}\n    </div>\n  </Link>\n);\n","export function formatOSMChaLink(infoObj) {\n  const baseURL = 'https://osmcha.org/';\n  // If a custom filter id is given, ignores everything else\n  if (infoObj.osmchaFilterId) {\n    return `${baseURL}?aoi=${encodeURIComponent(infoObj.osmchaFilterId)}`;\n  }\n\n  let filterParams = {};\n  if (infoObj.aoiBBOX) {\n    filterParams['in_bbox'] = buildFilter(\n      typeof infoObj.aoiBBOX === 'string' ? infoObj.aoiBBOX : infoObj.aoiBBOX.join(','),\n    );\n    // add the area_lt only if we are filtering changesets of the entire project\n    // on that case, we don't have usernames information\n    if (!infoObj.usernames) {\n      filterParams['area_lt'] = buildFilter(2);\n    }\n  }\n\n  if (typeof infoObj.created === 'string') {\n    filterParams['date__gte'] = buildFilter(infoObj.created.split('T')[0]);\n  }\n\n  if (infoObj.mappingTeams) {\n    filterParams['mapping_teams'] = buildFilter(infoObj.mappingTeams);\n  }\n\n  if (infoObj.changesetComment) {\n    filterParams['comment'] = buildFilter(infoObj.changesetComment);\n  }\n\n  if (typeof infoObj.usernames === 'object') {\n    filterParams['users'] = buildFilter(infoObj.usernames);\n  }\n\n  return `${baseURL}?filters=${encodeURIComponent(JSON.stringify(filterParams))}`;\n}\n\nfunction buildFilterValue(value) {\n  return { label: value, value: value };\n}\n\nfunction buildFilter(values) {\n  const valuesArray = Array.isArray(values) ? values : [values];\n  return valuesArray.map((values) => buildFilterValue(values));\n}\n\nexport const getFilterId = (value) => {\n  if (value.startsWith('https://osmcha.org/') && value.search('aoi=') !== -1) {\n    return value.split('aoi=')[1];\n  }\n  return value;\n};\n","import slug from 'slug';\n\nexport const slugifyFileName = (name, mimetype) => {\n  // slugify file names in order to avoid problems on the markdown\n  if (name.lastIndexOf('.') === -1) {\n    name = `${name}.${mimetype.split('/')[1]}`;\n  }\n  return `${slug(name.substr(0, name.lastIndexOf('.')))}${name.substr(name.lastIndexOf('.'))}`;\n};\n","import { useState, useCallback } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { pushToLocalJSONAPI } from '../network/genericJSONRequest';\nimport { slugifyFileName } from '../utils/slugifyFileName';\n\nexport const useUploadImage = () => {\n  const [uploading, setUploading] = useState(false);\n  const [uploadError, setUploadError] = useState(null);\n\n  const uploadImg = useCallback((file, updateFn, token) => {\n    if (file && updateFn && token) {\n      const promise = new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onload = () => {\n          if (!!reader.result) {\n            resolve(reader.result);\n          } else {\n            reject(Error('Failed converting to base64'));\n          }\n        };\n      });\n      promise.then(\n        (result) => {\n          const payload = JSON.stringify({\n            mime: file.type,\n            data: result.split('base64,')[1],\n            filename: slugifyFileName(file.name, file.type),\n          });\n          setUploading(true);\n          pushToLocalJSONAPI('system/image-upload/', payload, token)\n            .then((res) => {\n              updateFn(res.url);\n              setUploading(false);\n              setUploadError(null);\n            })\n            .catch((e) => {\n              setUploadError(e);\n              setUploading(false);\n            });\n        },\n        (err) => {\n          setUploadError(err);\n        },\n      );\n    }\n  }, []);\n  return [uploadError, uploading, uploadImg];\n};\n\nexport const useOnDrop = (appendImgToComment) => {\n  const token = useSelector((state) => state.auth.token);\n  const [uploadError, uploading, uploadImg] = useUploadImage();\n\n  const onDrop = useCallback(\n    (acceptedFiles) => {\n      acceptedFiles.forEach(async (file) => await uploadImg(file, appendImgToComment, token));\n    },\n    [token, uploadImg, appendImgToComment],\n  );\n  return [uploadError, uploading, onDrop];\n};\n","import { defineMessages } from 'react-intl';\n\nexport default defineMessages({\n  generic: {\n    id: 'stats.ohsome.timestamp.generic',\n    defaultMessage:\n      'These statistics come from ohsomeNow Stats and were last updated at {formattedDate} ({timeZone}). Missing fields will be made available soon!',\n  },\n  project: {\n    id: 'stats.ohsome.timestamp.project',\n    defaultMessage:\n      'These stats were retrieved using the default changeset comment of the project and were last updated at {formattedDate} ({timeZone}).',\n  },\n});\n","import { useState, useEffect } from 'react';\nimport { useIntl } from 'react-intl';\nimport ReactTooltip from 'react-tooltip';\n\nimport { fetchExternalJSONAPI } from '../../network/genericJSONRequest';\nimport { OHSOME_STATS_BASE_URL } from '../../config';\nimport { InfoIcon } from '../svgIcons';\nimport messages from './messages';\n\nfunction StatsTimestamp({ messageType }) {\n  const intl = useIntl();\n  const [lastUpdated, setLastUpdated] = useState(null);\n\n  useEffect(() => {\n    fetchExternalJSONAPI(`${OHSOME_STATS_BASE_URL}/metadata`)\n      .then((res) => {\n        setLastUpdated(res.result.max_timestamp);\n      })\n      .catch((error) => console.error(error));\n  }, []);\n\n  const dateOptions = {\n    year: 'numeric',\n    month: 'short',\n    day: '2-digit',\n    hour: 'numeric',\n    minute: 'numeric',\n  };\n\n  return (\n    <div>\n      <InfoIcon\n        className=\"blue-grey h1 w1 v-mid ml2 pointer\"\n        data-tip={intl.formatMessage(messages[messageType], {\n          formattedDate: intl.formatDate(lastUpdated, dateOptions),\n          timeZone: intl.timeZone,\n        })}\n        data-for=\"ohsome-timestamp\"\n      />\n      <ReactTooltip id=\"ohsome-timestamp\" place=\"top\" className=\"mw6\" effect=\"solid\" />\n    </div>\n  );\n}\n\nexport default StatsTimestamp;\n","import { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\nimport { Alert } from '../alert';\n\nexport const MessageStatus = ({ status, comment }) => {\n  if (status === 'success' && !comment) {\n    return (\n      <Alert type=\"success\" inline={true} compact={true}>\n        <FormattedMessage {...messages.messageSent} />\n      </Alert>\n    );\n  }\n  if (status === 'error') {\n    return (\n      <Alert type=\"error\" inline={true} compact={true}>\n        <FormattedMessage {...messages.messageError} />\n      </Alert>\n    );\n  }\n  return null;\n};\n","export function compareTaskId(a, b) {\n  if (a.properties.taskId > b.properties.taskId) return 1;\n  if (b.properties.taskId > a.properties.taskId) return -1;\n  return 0;\n}\n\nexport function compareLastUpdate(a, b) {\n  return new Date(b.properties.actionDate) - new Date(a.properties.actionDate);\n}\n\nexport function compareHistoryLastUpdate(a, b) {\n  return new Date(b.actionDate) - new Date(a.actionDate);\n}\n\nexport function compareByPropertyDescending(a, b, property) {\n  if (a[property] > b[property]) return -1;\n  if (b[property] > a[property]) return 1;\n  return 0;\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\n\nconst ProgressBar = ({ percent }) => (\n  <div className=\"w-100 relative mt2\">\n    <div\n      style={{ height: '0.5em', width: `${percent * 100}%` }}\n      className=\"bg-red br-pill absolute\"\n    ></div>\n  </div>\n);\n\nexport const BarChartItem = ({ name, link, percentValue, number, numberUnit }: Object) => (\n  <li className=\"w-100 cf list pv3\">\n    <div className=\"w-100 cf mr4\">\n      <div className=\"di ma0 f7 b fl\">\n        {link ? (\n          <Link className=\"link blue-dark\" to={link}>\n            {name}\n          </Link>\n        ) : (\n          name\n        )}\n      </div>\n      <div className=\"di ma0 f7 fr\">\n        <span className=\"b mr1\">{number}</span>\n        {numberUnit && <span className=\"blue-grey\">{numberUnit}</span>}\n      </div>\n    </div>\n    <div className=\"w-100 cf\">\n      <ProgressBar percent={percentValue} />\n    </div>\n  </li>\n);\n\nexport const BarListChart = ({ data, valueField, nameField, linkBase, linkField }) => {\n  return (\n    <ol className=\"pa0 mt1 mb0\">\n      {data.map((p, n) => (\n        <BarChartItem\n          key={n}\n          name={p[nameField]}\n          link={linkBase ? `${linkBase}${p[linkField]}` : null}\n          percentValue={p.percent}\n          number={p[valueField]}\n          numberUnit={<FormattedMessage {...messages.tasks} />}\n        />\n      ))}\n    </ol>\n  );\n};\n","import { Position } from \"./types\";\n\nconst D2R = Math.PI / 180;\nconst R2D = 180 / Math.PI;\n\ninterface ZoomParams {\n  Bc: number[];\n  Cc: number[];\n  zc: number[];\n  Ac: number[];\n}\n\nconst cache: Record<number, ZoomParams> = {};\n\n// SphericalMercator constructor: precaches calculations\n// for fast tile lookups.\nexport class SphericalMercator {\n  size: number;\n  expansion: number;\n  Bc: number[];\n  Cc: number[];\n  zc: number[];\n  Ac: number[];\n\n  constructor({\n    size = 256,\n    antimeridian = false,\n  }: {\n    size?: number;\n    antimeridian?: boolean;\n  } = {}) {\n    this.size = size;\n    this.expansion = antimeridian === true ? 2 : 1;\n    if (!cache[this.size]) {\n      let size = this.size;\n      let c: ZoomParams = {\n        Bc: [],\n        Cc: [],\n        zc: [],\n        Ac: [],\n      };\n      cache[this.size] = c;\n\n      for (let d = 0; d < 30; d++) {\n        c.Bc.push(size / 360);\n        c.Cc.push(size / (2 * Math.PI));\n        c.zc.push(size / 2);\n        c.Ac.push(size);\n        size *= 2;\n      }\n    }\n    this.Bc = cache[this.size].Bc;\n    this.Cc = cache[this.size].Cc;\n    this.zc = cache[this.size].zc;\n    this.Ac = cache[this.size].Ac;\n  }\n\n  // Convert lon lat to screen pixel value\n  //\n  // - `ll` {Array} `[lon, lat]` array of geographic coordinates.\n  // - `zoom` {Number} zoom level.\n  px(ll: Position, zoom: number): Position {\n    if (!Number.isInteger(zoom)) {\n      let size = this.size * Math.pow(2, zoom);\n      let d = size / 2;\n      let bc = size / 360;\n      let cc = size / (2 * Math.PI);\n      let ac = size;\n      let f = Math.min(Math.max(Math.sin(D2R * ll[1]), -0.9999), 0.9999);\n      let x = d + ll[0] * bc;\n      let y = d + 0.5 * Math.log((1 + f) / (1 - f)) * -cc;\n      x > ac * this.expansion && (x = ac * this.expansion);\n      y > ac && (y = ac);\n      //(x < 0) && (x = 0);\n      //(y < 0) && (y = 0);\n      return [x, y];\n    } else {\n      let d = this.zc[zoom];\n      let f = Math.min(Math.max(Math.sin(D2R * ll[1]), -0.9999), 0.9999);\n      let x = Math.round(d + ll[0] * this.Bc[zoom]);\n      let y = Math.round(\n        d + 0.5 * Math.log((1 + f) / (1 - f)) * -this.Cc[zoom]\n      );\n      x > this.Ac[zoom] * this.expansion &&\n        (x = this.Ac[zoom] * this.expansion);\n      y > this.Ac[zoom] && (y = this.Ac[zoom]);\n      //(x < 0) && (x = 0);\n      //(y < 0) && (y = 0);\n      return [x, y];\n    }\n  }\n\n  // Convert screen pixel value to lon lat\n  //\n  // - `px` {Array} `[x, y]` array of geographic coordinates.\n  // - `zoom` {Number} zoom level.\n  ll(px: Position, zoom: number): Position {\n    if (!Number.isInteger(zoom)) {\n      let size = this.size * Math.pow(2, zoom);\n      let bc = size / 360;\n      let cc = size / (2 * Math.PI);\n      let zc = size / 2;\n      let g = (px[1] - zc) / -cc;\n      let lon = (px[0] - zc) / bc;\n      let lat = R2D * (2 * Math.atan(Math.exp(g)) - 0.5 * Math.PI);\n      return [lon, lat];\n    } else {\n      let g = (px[1] - this.zc[zoom]) / -this.Cc[zoom];\n      let lon = (px[0] - this.zc[zoom]) / this.Bc[zoom];\n      let lat = R2D * (2 * Math.atan(Math.exp(g)) - 0.5 * Math.PI);\n      return [lon, lat];\n    }\n  }\n}\n","import { SphericalMercator } from \"./sphericalmercator\";\nimport {\n  Ratios,\n  Viewport,\n  Position,\n  Bounds,\n  Dimensions,\n  LongitudeLatitude,\n} from \"./types\";\n\nfunction getAdjusted(base: number, ratios: Ratios, allowFloat: boolean) {\n  const adjusted = Math.min(\n    base - Math.log(ratios[0]) / Math.log(2),\n    base - Math.log(ratios[1]) / Math.log(2)\n  );\n\n  return allowFloat ? adjusted : Math.floor(adjusted);\n}\n\n/**\n * Given bounds in WSEN order and pixel dimensions,\n * figure out what center and zoom will produce a map\n * view with the same bounds and dimensions.\n */\nexport function viewport(\n  bounds: Bounds,\n  dimensions: Dimensions,\n  {\n    minzoom = 0,\n    maxzoom = 20,\n    tileSize = 256,\n    allowFloat = false,\n    allowAntiMeridian = false,\n  }: {\n    /**\n     * Given a minimum or maximum zoom, the output zoom will\n     * be clamped between those numbers.\n     */\n    minzoom?: number;\n    maxzoom?: number;\n    /**\n     * Tile size. By default, this is 256.\n     */\n    tileSize?: number;\n    /**\n     * Allow floating-point zoom levels. By default,\n     * only integer zoom levels are output.\n     */\n    allowFloat?: boolean;\n    allowAntiMeridian?: boolean;\n  } = {}\n): Viewport {\n  const merc = new SphericalMercator({\n    size: tileSize,\n    antimeridian: allowAntiMeridian,\n  });\n  const base = maxzoom;\n  const bl = merc.px([bounds[0], bounds[1]], base);\n  const tr = merc.px([bounds[2], bounds[3]], base);\n  const width = tr[0] - bl[0];\n  const height = bl[1] - tr[1];\n  const centerPixelX = bl[0] + width / 2;\n  const centerPixelY = tr[1] + height / 2;\n  const ratios: Ratios = [width / dimensions[0], height / dimensions[1]];\n  const adjusted = getAdjusted(base, ratios, allowFloat);\n\n  const center = merc.ll([centerPixelX, centerPixelY], base);\n  const zoom = Math.max(minzoom, Math.min(maxzoom, adjusted));\n\n  return { center, zoom };\n}\n\n/**\n * The inverse of viewport: given center, zoom,\n * dimensions, and tileSize, return the bounds that will be produced\n * when you configure a map with those parameters.\n */\nexport function bounds(\n  center: LongitudeLatitude,\n  zoom: number,\n  dimensions: Dimensions,\n  tileSize: number = 256\n): Bounds {\n  if (!Array.isArray(center)) {\n    center = [center.lon, center.lat];\n  }\n\n  const merc = new SphericalMercator({\n    size: tileSize,\n  });\n  const px = merc.px(center, zoom);\n  const tl = merc.ll(\n    [px[0] - dimensions[0] / 2, px[1] - dimensions[1] / 2],\n    zoom\n  );\n  const br = merc.ll(\n    [px[0] + dimensions[0] / 2, px[1] + dimensions[1] / 2],\n    zoom\n  );\n  return [tl[0], br[1], br[0], tl[1]];\n}\n\nexport { Dimensions, LongitudeLatitude, Bounds, Position, Viewport };\n","import React from 'react';\nimport { FormattedMessage, FormattedNumber } from 'react-intl';\n\nimport messages from './messages';\nimport { PROFILE_RELEVANT_FIELDS } from './forms/personalInformation';\n\nfunction CompletenessProgressBar({ completeness }: Object) {\n  return (\n    <>\n      <div className=\"cf db pt1 flex items-center\">\n        <div className=\"w-90 pr3 fl relative\">\n          <div\n            className={'absolute bg-red br-pill hhalf hide-child'}\n            style={{ width: `${completeness.toPrecision(3) * 100}%` }}\n          ></div>\n          <div className={'bg-tan br-pill hhalf hide-child overflow-y-hidden'}></div>\n        </div>\n        <div className=\"w-10 fl pl1 fw7\">\n          <FormattedNumber\n            value={completeness}\n            maximumFractionDigits={0}\n            style=\"percent\" // eslint-disable-line react/style-prop-object\n          />\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport function calculateCompleteness(userDetails) {\n  return (\n    PROFILE_RELEVANT_FIELDS.filter((k) => userDetails[k]).length / PROFILE_RELEVANT_FIELDS.length\n  );\n}\n\nexport function ProfileCompleteness({ userDetails }: Object) {\n  const completeness = calculateCompleteness(userDetails);\n  return (\n    <div className=\"bg-white ph3 pv3 mr4\">\n      <h3 className=\"blue-dark f4 ma0 fw7\">\n        <FormattedMessage {...messages.completenessTitle} />\n      </h3>\n      <p className=\"blue-grey mt2\">\n        {completeness === 0 && <FormattedMessage {...messages.completenessLead0} />}\n        {completeness > 0 && completeness < 1 && (\n          <FormattedMessage {...messages.completenessLead1} />\n        )}\n        {completeness === 1 && <FormattedMessage {...messages.completenessLead2} />}\n      </p>\n      <CompletenessProgressBar completeness={completeness} />\n    </div>\n  );\n}\n","import { useQuery } from '@tanstack/react-query';\nimport { useSelector } from 'react-redux';\n\nimport api from './apiClient';\n\nexport const useCommentsQuery = (projectId, page) => {\n  const token = useSelector((state) => state.auth.token);\n  const locale = useSelector((state) => state.preferences['locale']);\n\n  const getComments = ({ signal }) => {\n    return api(token, locale).get(`projects/${projectId}/comments/`, {\n      signal,\n      params: {\n        perPage: 5,\n        page,\n      },\n    });\n  };\n\n  return useQuery({\n    queryKey: ['questions-and-comments', projectId, page],\n    queryFn: getComments,\n    select: (data) => data.data,\n  });\n};\n\nexport const postProjectComment = (projectId, comment, token, locale = 'en') => {\n  return api(token, locale).post(`projects/${projectId}/comments/`, { message: comment });\n};\n\nexport const postTaskComment = (projectId, taskId, comment, token, locale = 'en') => {\n  return api(token, locale).post(`projects/${projectId}/comments/tasks/${taskId}/`, {\n    comment,\n  });\n};\n","export const getTaskContributors = (taskHistory, usernameToExclude) =>\n  taskHistory.reduce((acc, history) => {\n    if (!acc.includes(history.actionBy) && history.actionBy !== usernameToExclude) {\n      acc.push(history.actionBy);\n    }\n    return acc.sort();\n  }, []);\n","import { useSelector } from 'react-redux';\nimport { useQuery } from '@tanstack/react-query';\n\nimport api from './apiClient';\n\nexport const useTeamsQuery = (params, otherOptions) => {\n  const token = useSelector((state) => state.auth.token);\n\n  const fetchUserTeams = ({ signal }) => {\n    return api(token).get(`teams/`, {\n      signal,\n      params: params,\n    });\n  };\n\n  return useQuery({\n    queryKey: ['user-teams', params],\n    queryFn: fetchUserTeams,\n    select: (data) => data.data,\n    ...otherOptions,\n  });\n};\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { FormattedMessage, FormattedNumber } from 'react-intl';\nimport ReactPlaceholder from 'react-placeholder';\nimport { TextRow } from 'react-placeholder/lib/placeholders';\n\nimport messages from './messages';\nimport { CurrentUserAvatar } from './avatar';\nimport { ProfileCompleteness } from './completeness';\nimport { MappingLevelMessage } from '../mappingLevel';\nimport { INTERMEDIATE_LEVEL_COUNT, ADVANCED_LEVEL_COUNT } from '../../config';\n\nexport function NextMappingLevel({ changesetsCount }: Object) {\n  changesetsCount = Number(changesetsCount);\n  let nextLevelThreshold, nextLevel;\n  if (changesetsCount < INTERMEDIATE_LEVEL_COUNT) {\n    nextLevelThreshold = <FormattedNumber value={INTERMEDIATE_LEVEL_COUNT} />;\n    nextLevel = <MappingLevelMessage level=\"INTERMEDIATE\" className=\"ttl \" />;\n  } else if (changesetsCount < ADVANCED_LEVEL_COUNT) {\n    nextLevelThreshold = <FormattedNumber value={ADVANCED_LEVEL_COUNT} />;\n    nextLevel = <MappingLevelMessage level=\"ADVANCED\" className=\"ttl\" />;\n  }\n  if (nextLevel) {\n    return (\n      <span className=\"blue-grey\">\n        <FormattedMessage\n          {...messages.nextLevel}\n          className=\"blue-grey\"\n          values={{\n            changesets: (\n              <span className=\"blue-dark f4 fw6\">\n                <FormattedNumber value={changesetsCount} />\n              </span>\n            ),\n            nextLevelThreshold: <span className=\"blue-dark f4\">{nextLevelThreshold}</span>,\n            level: nextLevel,\n          }}\n        />\n      </span>\n    );\n  }\n  return '';\n}\n\nexport function UserTopBar() {\n  const user = useSelector((state) => state.auth.userDetails);\n  const osmUserInfo = useSelector((state) => state.auth.osm);\n\n  const placeholder = (\n    <div className=\"pl2 dib\">\n      <TextRow style={{ width: 150, height: '2.3em' }} color=\"#eee\" />\n      <TextRow style={{ width: 150, height: '1em' }} color=\"#eee\" />\n      <TextRow style={{ width: 150, height: '1em' }} color=\"#eee\" />\n    </div>\n  );\n\n  return (\n    <div className=\"cf ph4 pv4 mb2\">\n      <div className=\"w-100 w-75-l fl flex flex-column flex-row-ns items-center tc tl-ns\">\n        <div className=\"fl dib mr3\">\n          <CurrentUserAvatar className=\"h4 w4 br-100 pa1 ba b--grey-light bw3 red\" />\n        </div>\n        <ReactPlaceholder\n          showLoadingAnimation={true}\n          customPlaceholder={placeholder}\n          delay={500}\n          ready={user !== undefined && osmUserInfo !== undefined}\n        >\n          <div className=\"pl2 dib lh-solid mt3 mt0-ns\">\n            <h3 className=\"ttu fw5 mv0 barlow-condensed username-heading\">\n              {user.name || user.username}\n            </h3>\n            <p className=\"f4 blue-dark mv3 fw5\">\n              <MappingLevelMessage level={user.mappingLevel} />\n            </p>\n            <NextMappingLevel changesetsCount={osmUserInfo ? osmUserInfo.changesetCount : 0} />\n          </div>\n        </ReactPlaceholder>\n      </div>\n      <div className=\"w-100 w-25-l fl dn db-ns\">\n        <ProfileCompleteness userDetails={user} />\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\n\nimport { compareHistoryLastUpdate } from '../utils/sorting';\n\nconst useFirstTaskActionDate = (history) => {\n  const [firstDate, setFirstDate] = useState(null);\n  useEffect(() => {\n    if (history && history.taskHistory && history.taskHistory.length) {\n      const fistTaskAction =\n        history.taskHistory.sort(compareHistoryLastUpdate)[history.taskHistory.length - 1];\n      if (fistTaskAction.actionDate) setFirstDate(fistTaskAction.actionDate);\n    }\n  }, [history]);\n  return firstDate;\n};\n\nexport default useFirstTaskActionDate;\n","import { useCallback } from 'react';\n\nconst useGetContributors = (history) => {\n  const getContributors = useCallback(() => {\n    if (history && history.taskHistory && history.taskHistory.length) {\n      return history.taskHistory.reduce((usernames, item) => {\n        if (!usernames.includes(item.actionBy)) {\n          usernames.push(item.actionBy);\n        }\n        return usernames;\n      }, []);\n    } else {\n      return [];\n    }\n  }, [history]);\n  return getContributors;\n};\n\nexport default useGetContributors;\n","export function formatOverpassLink(users, bbox, download = false) {\n  let baseUrl = 'https://overpass-turbo.eu/map.html?Q=';\n  let format = 'json';\n  if (download) {\n    baseUrl = 'https://overpass-api.de/api/interpreter?data=';\n    format = 'xml';\n  }\n  const swneBbox = [bbox[1], bbox[0], bbox[3], bbox[2]];\n  const usersQuery = users.map((user) => formatUserQuery(user, swneBbox)).join('');\n  const query = `[out:${format}][timeout:250];(${usersQuery});out body;>;out skel qt;`;\n\n  return `${baseUrl}${encodeURIComponent(query)}`;\n}\n\nexport function formatUserQuery(user, bbox) {\n  return `node(user:\"${user}\")(${bbox});way(user:\"${user}\")(${bbox});relation(user:\"${user}\")(${bbox});`;\n}\n","import { useState, useMemo } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { viewport } from '@placemarkio/geo-viewport';\nimport { FormattedMessage } from 'react-intl';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport ReactPlaceholder from 'react-placeholder';\n\nimport messages from './messages';\nimport useFirstTaskActionDate from '../../hooks/UseFirstTaskActionDate';\nimport useGetContributors from '../../hooks/UseGetContributors';\nimport { RelativeTimeWithUnit } from '../../utils/formattedRelativeTime';\nimport { formatOSMChaLink } from '../../utils/osmchaLink';\nimport { htmlFromMarkdown, formatUserNamesToLink } from '../../utils/htmlFromMarkdown';\nimport { getTaskContributors } from '../../utils/getTaskContributors';\nimport { getIdUrl, sendJosmCommands } from '../../utils/openEditor';\nimport { formatOverpassLink } from '../../utils/overpassLink';\nimport { pushToLocalJSONAPI } from '../../network/genericJSONRequest';\nimport { UserAvatar } from '../user/avatar';\nimport { CloseIcon } from '../svgIcons';\nimport { ID_EDITOR_URL } from '../../config';\nimport { Button, CustomButton } from '../button';\nimport { Dropdown } from '../dropdown';\nimport { CommentInputField } from '../comments/commentInput';\nimport { useTaskDetail } from '../../api/projects';\nimport { Alert } from '../alert';\nimport { MessageStatus } from '../comments/status';\nimport { postTaskComment } from '../../api/questionsAndComments';\n\nimport './styles.scss';\n\nconst PostComment = ({ projectId, taskId, contributors, setCommentPayload }) => {\n  const token = useSelector((state) => state.auth.token);\n  const locale = useSelector((state) => state.preferences['locale']);\n  const [comment, setComment] = useState('');\n\n  const saveComment = () => {\n    if (comment) {\n      mutation.mutate({ message: comment });\n    }\n  };\n\n  const mutation = useMutation({\n    mutationFn: () => postTaskComment(projectId, taskId, comment, token, locale),\n    onSuccess: (res) => {\n      setCommentPayload(res.data);\n      setComment('');\n    },\n  });\n\n  return (\n    <div className=\"w-100 pt3 ph3-ns ph1 flex flex-column\">\n      <CommentInputField\n        comment={comment}\n        setComment={setComment}\n        enableHashtagPaste\n        contributors={contributors}\n        enableContributorsHashtag\n        isShowUserPicture\n        isShowTabNavs\n      />\n      <div className=\"ml-auto mb5 flex flex-column gap-1 items-end\">\n        <Button\n          onClick={() => saveComment()}\n          className=\"bg-red white f6\"\n          loading={mutation.isLoading}\n          disabled={!comment}\n        >\n          <FormattedMessage {...messages.comment} />\n        </Button>\n        <MessageStatus status={mutation.status} comment={comment} />\n      </div>\n    </div>\n  );\n};\n\nexport const TaskHistory = ({ projectId, taskId }) => {\n  const [historyOption, setHistoryOption] = useState('Comments');\n  const { data: commentPayload, status } = useTaskDetail(projectId, taskId);\n\n  const history = commentPayload?.taskHistory;\n  const taskComments = commentPayload?.taskHistory.filter((t) => t.action === 'COMMENT');\n  const taskChanges = commentPayload?.taskHistory.filter((t) => t.action !== 'COMMENT');\n\n  let shownHistory;\n  if (historyOption === 'Comments') {\n    shownHistory = taskComments;\n  } else if (historyOption === 'Activities') {\n    shownHistory = taskChanges;\n  } else {\n    shownHistory = history;\n  }\n\n  const taskHistoryOptions = [\n    { value: 'Comments', label: 'Comments' },\n    { value: 'Activities', label: 'Activities' },\n    { value: 'All', label: 'All' },\n  ];\n\n  const groupBySession = () => {\n    if (shownHistory.length === 0) return;\n    let res = [];\n    let username = shownHistory[0].actionBy;\n\n    shownHistory.forEach((history) => {\n      if (history.actionBy === username) {\n        res.length === 0 ? res.push([history]) : res[res.length - 1].push(history);\n      } else {\n        username = history.actionBy;\n        res.push([history]);\n      }\n    });\n    return res;\n  };\n\n  if (status === 'loading') {\n    return (\n      <div className=\"ma4\">\n        <ReactPlaceholder type=\"media\" showLoadingAnimation delay={300} />\n      </div>\n    );\n  }\n\n  if (status === 'error') {\n    return (\n      <div className=\"ma4 gray\">\n        <Alert type=\"error\">\n          <FormattedMessage {...messages.taskDetailFetchError} />\n        </Alert>\n      </div>\n    );\n  }\n\n  if (history.length === 0) {\n    return (\n      <div className=\"ma4 dark-gray tc\">\n        <FormattedMessage {...messages.noActivitiesToDisplay} />\n      </div>\n    );\n  }\n  return (\n    <>\n      <div className=\"ml3 pl1 pv2 blue-dark flex flex-wrap\" aria-label=\"view task history options\">\n        {taskHistoryOptions.map((option) => (\n          <label className=\"pt1 pr3 fl w-15\" key={option.value}>\n            <input\n              value={option.value}\n              checked={historyOption === option.value}\n              onChange={() => setHistoryOption(option.value)}\n              type=\"radio\"\n              className={`radio-input input-reset pointer v-mid dib h2 w2 mr2 br-100 ba b--blue-light`}\n            />\n            <FormattedMessage {...messages[`taskHistory${option.label}`]} />\n          </label>\n        ))}\n      </div>\n      <div className=\"timeline-container\">\n        {/* This can handle displaying a messaage for the no comments section \n        because no activities will be handled earlier */}\n        {shownHistory.length === 0 ? (\n          <div className=\"ma4 dark-gray tc\">\n            <FormattedMessage {...messages.noCommentsYet} />\n          </div>\n        ) : (\n          groupBySession()?.map((grouped, n) => (\n            <div\n              key={grouped[0].historyId}\n              className={`grouped-ctr session ph3 mt4 bb b--grey-light`}\n            >\n              {grouped.map((history, n) => (\n                <div className=\"flex activity relative\" key={history.historyId}>\n                  <div className=\"flex justify-center\">\n                    {n === 0 ? (\n                      <UserAvatar\n                        username={grouped[0].actionBy}\n                        picture={grouped[0].pictureUrl}\n                        colorClasses=\"white bg-blue-grey z-1 relative\"\n                      />\n                    ) : (\n                      <div className=\"oval z-1\" />\n                    )}\n                  </div>\n                  <div className=\"mh2 f6 blue-dark\" style={{ marginTop: '-2px' }}>\n                    <p className=\"ma0 blue-grey\">\n                      {n === 0 && (\n                        <div className=\"mt2 dib\">\n                          <a\n                            href={'/users/' + history.actionBy}\n                            className=\"blue-dark b no-underline underline-hover\"\n                          >\n                            {history.actionBy}\n                          </a>\n                          &nbsp;\n                        </div>\n                      )}\n                      {getTaskActionMessage(history.action, history.actionText)}{' '}\n                      <RelativeTimeWithUnit date={history.actionDate} />\n                    </p>\n                    {history.action === 'COMMENT' && (\n                      <div\n                        className=\"ma0 comment\"\n                        dangerouslySetInnerHTML={htmlFromMarkdown(\n                          formatUserNamesToLink(history.actionText),\n                        )}\n                      />\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          ))\n        )}\n      </div>\n    </>\n  );\n};\n\nexport const TaskDataDropdown = ({ history, changesetComment, bbox }: Object) => {\n  const firstDate = useFirstTaskActionDate(history);\n  const contributors = useGetContributors(history);\n  const osmchaLink = useMemo(\n    () =>\n      formatOSMChaLink({\n        aoiBBOX: bbox,\n        created: firstDate,\n        usernames: contributors(),\n        changesetComment: changesetComment,\n      }),\n    [bbox, firstDate, contributors, changesetComment],\n  );\n\n  if (history?.taskHistory?.length > 0) {\n    return (\n      <Dropdown\n        value={null}\n        options={[\n          { label: <FormattedMessage {...messages.taskOnOSMCha} />, href: osmchaLink },\n          {\n            label: <FormattedMessage {...messages.overpassVisualization} />,\n            href: formatOverpassLink(contributors(), bbox),\n          },\n          {\n            label: <FormattedMessage {...messages.overpassDownload} />,\n            href: formatOverpassLink(contributors(), bbox, true),\n          },\n        ]}\n        display={<FormattedMessage {...messages.taskData} />}\n        className=\"blue-dark bg-white v-mid pv2 ph2 ba b--grey-light link\"\n      />\n    );\n  } else {\n    return <></>;\n  }\n};\n\nexport const TaskActivity = ({\n  taskId,\n  status,\n  project,\n  bbox,\n  close,\n  updateActivities,\n  userCanValidate,\n}: Object) => {\n  const token = useSelector((state) => state.auth.token);\n  const userDetails = useSelector((state) => state.auth.userDetails);\n  // use it to hide the reset task action button\n  const [resetSuccess, setResetSuccess] = useState(false);\n  const queryClient = useQueryClient();\n\n  const { data: commentPayload } = useTaskDetail(project.projectId, taskId, true);\n\n  const uniqueContributors =\n    commentPayload?.taskHistory &&\n    getTaskContributors(commentPayload.taskHistory, userDetails.username);\n\n  const setCommentPayload = (payload) => {\n    queryClient.setQueryData(['task-detail', project.projectId, taskId], { data: payload });\n  };\n\n  const resetTask = () => {\n    pushToLocalJSONAPI(\n      `projects/${project.projectId}/tasks/actions/undo-last-action/${taskId}/`,\n      {},\n      token,\n    ).then((res) => {\n      setCommentPayload(res);\n      if (updateActivities !== undefined) updateActivities(project.projectId);\n      setResetSuccess(true);\n    });\n  };\n\n  return (\n    <div className=\"h-100 bg-white\">\n      <div className=\"w-100 pt2 pb3 pl4 pr2 blue-dark bg-tan relative\">\n        <CloseIcon className=\"h1 w1 fr pointer\" onClick={() => close()} />\n        <div className=\"f5 pa0 ma0 cf\">\n          <div className=\"w-40-l w-100 fl pt2\">\n            <p className=\"ttu f3 pa0 ma0 barlow-condensed b mb2\">\n              <FormattedMessage {...messages.taskActivity} values={{ n: taskId }} />\n            </p>\n            {project.projectInfo?.name ? (\n              <span>\n                <b>#{project.projectId}</b>: {project.projectInfo.name}\n              </span>\n            ) : (\n              <FormattedMessage {...messages.projectId} values={{ id: project.projectId }} />\n            )}\n          </div>\n          <div className=\"w-60-l w-100 fl tr pr3 pt2\">\n            {userCanValidate && (\n              <div className=\"ph1 dib\">\n                {['VALIDATED', 'BADIMAGERY'].includes(status) && (\n                  <EditorDropdown bbox={bbox} taskId={taskId} project={project} />\n                )}\n              </div>\n            )}\n            <div className=\"ph1 dib\">\n              {bbox && project.changesetComment && (\n                <TaskDataDropdown\n                  history={commentPayload}\n                  bbox={bbox}\n                  changesetComment={project.changesetComment}\n                />\n              )}\n            </div>\n          </div>\n          <div className=\"fl tr w-100 pt2 pr3\">\n            {userCanValidate && ['VALIDATED', 'BADIMAGERY'].includes(status) && !resetSuccess && (\n              <UndoLastTaskAction resetFn={resetTask} status={status} />\n            )}\n          </div>\n        </div>\n      </div>\n      <div className=\"blue-dark overflow-y-auto vh-50\">\n        <TaskHistory projectId={project.projectId} taskId={taskId} />\n      </div>\n      <PostComment\n        projectId={project.projectId}\n        taskId={taskId}\n        setCommentPayload={setCommentPayload}\n        contributors={uniqueContributors}\n      />\n    </div>\n  );\n};\n\nfunction EditorDropdown({ project, taskId, bbox }: Object) {\n  const loadTaskOnEditor = (arr) => {\n    if (arr[0].value === 'ID') {\n      let windowObjectReference = window.open('', `iD-${project.projectId}-${taskId}`);\n      const { center, zoom } = viewport(bbox, [window.innerWidth, window.innerHeight]);\n      windowObjectReference.location.href = getIdUrl(\n        project,\n        center,\n        zoom,\n        [taskId],\n        ID_EDITOR_URL,\n      );\n    }\n    if (arr[0].value === 'JOSM') {\n      sendJosmCommands(project, {}, [taskId], [window.innerWidth, window.innerHeight], bbox);\n    }\n  };\n\n  return (\n    <Dropdown\n      options={[\n        { label: 'iD Editor', value: 'ID' },\n        { label: 'JOSM', value: 'JOSM' },\n      ]}\n      value={[]}\n      display={<FormattedMessage {...messages.openEditor} />}\n      className=\"bg-white b--grey-light ba pa2 dib v-mid\"\n      onChange={loadTaskOnEditor}\n    />\n  );\n}\n\nfunction UndoLastTaskAction({ status, resetFn }: Object) {\n  const [showConfirmation, setShowConfirmation] = useState(false);\n\n  return (\n    <>\n      {showConfirmation ? (\n        <>\n          <span className=\"dib pb2\">\n            <FormattedMessage {...messages[`confirmRevert${status}`]} />\n            <span className=\"fw6\">\n              {' '}\n              <FormattedMessage {...messages.proceed} />\n            </span>\n          </span>\n          <CustomButton\n            className=\"mh1 dib link ph3 f6 pv2 bg-white blue-dark ba b--white\"\n            onClick={() => setShowConfirmation(false)}\n          >\n            <FormattedMessage {...messages.no} />\n          </CustomButton>\n          <CustomButton\n            className=\"mh1 dib link ph3 f6 pv2 bg-red white ba b--red\"\n            onClick={() => {\n              resetFn();\n              setShowConfirmation(false);\n            }}\n          >\n            <FormattedMessage {...messages.yes} />\n          </CustomButton>\n        </>\n      ) : (\n        <CustomButton\n          className=\"mh1 link ph3 f6 pv2 bg-red white ba b--red\"\n          onClick={() => setShowConfirmation(true)}\n        >\n          <FormattedMessage {...messages[`revert${status}`]} />\n        </CustomButton>\n      )}\n    </>\n  );\n}\n\nconst getTaskActionMessage = (action, actionText) => {\n  let message = '';\n  switch (action) {\n    case 'COMMENT':\n      message = messages.taskHistoryComment;\n      break;\n    case 'LOCKED_FOR_MAPPING':\n      message = messages.taskHistoryLockedMapping;\n      break;\n    case 'LOCKED_FOR_VALIDATION':\n      message = messages.taskHistoryLockedValidation;\n      break;\n    case 'AUTO_UNLOCKED_FOR_MAPPING':\n      message = messages.taskHistoryAutoUnlockedMapping;\n      break;\n    case 'AUTO_UNLOCKED_FOR_VALIDATION':\n      message = messages.taskHistoryAutoUnlockedValidation;\n      break;\n    case 'EXTENDED_FOR_MAPPING':\n      message = messages.taskHistoryExtendedForMapping;\n      break;\n    case 'EXTENDED_FOR_VALIDATION':\n      message = messages.taskHistoryExtendedForValidation;\n      break;\n    case 'STATE_CHANGE':\n      switch (actionText) {\n        case 'BADIMAGERY':\n          message = messages.taskHistoryBadImagery;\n          break;\n        case 'MAPPED':\n          message = messages.taskHistoryMapped;\n          break;\n        case 'VALIDATED':\n          message = messages.taskHistoryValidated;\n          break;\n\n        case 'INVALIDATED':\n          message = messages.taskHistoryInvalidated;\n          break;\n        case 'SPLIT':\n          message = messages.taskHistorySplit;\n          break;\n        case 'READY':\n          message = messages.taskHistoryReady;\n          break;\n        default:\n          break;\n      }\n      break;\n    default:\n      break;\n  }\n  if (message) {\n    return <FormattedMessage {...message} />;\n  }\n};\n","import { featureCollection } from '@turf/helpers';\nimport bbox from '@turf/bbox';\nimport { viewport } from '@placemarkio/geo-viewport';\n\nexport function getCentroidAndZoomFromSelectedTasks(tasks, selectedTaskIds, windowSize) {\n  return viewport(getSelectedTasksBBox(tasks, selectedTaskIds), windowSize);\n}\n\nexport function getSelectedTasksBBox(tasks, selectedTaskIds) {\n  const selectedTasksGeom = selectedTaskIds\n    ? featureCollection(\n        tasks.features.filter((task) => selectedTaskIds.includes(task.properties.taskId)),\n      )\n    : tasks;\n  return bbox(selectedTasksGeom);\n}\n","import { API_URL, ID_EDITOR_URL, POTLATCH2_EDITOR_URL } from '../config';\nimport { getCentroidAndZoomFromSelectedTasks, getSelectedTasksBBox } from './tasksGeometry';\n\nexport function openEditor(\n  editor,\n  project,\n  tasks,\n  selectedTasks,\n  windowSize,\n  windowObjectReference,\n) {\n  if (editor === 'JOSM') {\n    sendJosmCommands(project, tasks, selectedTasks, windowSize);\n    return '?editor=JOSM';\n  }\n  const { center, zoom } = getCentroidAndZoomFromSelectedTasks(tasks, selectedTasks, windowSize);\n  if (['ID', 'RAPID'].includes(editor)) {\n    return getIdUrl(project, center, zoom, selectedTasks, '?editor=' + editor);\n  }\n  if (windowObjectReference == null || windowObjectReference.closed) {\n    windowObjectReference = window.open('', `iD-${project}-${selectedTasks}`);\n  }\n  if (editor === 'POTLATCH_2') {\n    windowObjectReference.location.href = getPotlatch2Url(center, zoom);\n    return '?editor=POTLATCH_2';\n  }\n  if (editor === 'FIELD_PAPERS') {\n    windowObjectReference.location.href = getFieldPapersUrl(center, zoom);\n    return '?editor=FIELD_PAPERS';\n  }\n  if (editor === 'CUSTOM') {\n    const customUrl = project.customEditor.url;\n    windowObjectReference.location.href = getIdUrl(project, center, zoom, selectedTasks, customUrl);\n    return '?editor=CUSTOM';\n  }\n}\n\nexport function formatImageryUrl(imageryURL) {\n  // url is supposed to look like tms[22]:http://hiu...\n  if (imageryURL) {\n    return imageryURL.substring(imageryURL.indexOf('http')).replace('zoom', 'z');\n  }\n}\n\nexport function getTaskGpxUrl(projectId, selectedTasks) {\n  return new URL(\n    `projects/${projectId}/tasks/queries/gpx/?tasks=${selectedTasks.join(',')}`,\n    API_URL,\n  ).href;\n}\n\nexport function getTaskXmlUrl(projectId, selectedTasks) {\n  return new URL(\n    `projects/${projectId}/tasks/queries/xml/?tasks=${selectedTasks.join(',')}`,\n    API_URL,\n  );\n}\n\nexport function getFieldPapersUrl(centroid, zoomLevel) {\n  return `http://fieldpapers.org/compose#${[\n    zoomLevel,\n    roundToDecimals(centroid[1], 5),\n    roundToDecimals(centroid[0], 5),\n  ].join('/')}`;\n}\n\nexport function getPotlatch2Url(centroid, zoomLevel) {\n  return `${POTLATCH2_EDITOR_URL}#map=${[\n    zoomLevel,\n    roundToDecimals(centroid[1], 5),\n    roundToDecimals(centroid[0], 5),\n  ].join('/')}`;\n}\n\nexport function getIdUrl(project, centroid, zoomLevel, selectedTasks, customUrl) {\n  const base = customUrl ? formatCustomUrl(customUrl) : `${ID_EDITOR_URL}`;\n  let url = base + '#map=' + [zoomLevel, centroid[1], centroid[0]].join('/');\n  // add the extraParams\n  if (project.extraIdParams) {\n    let extraParams = formatExtraParams(project.extraIdParams);\n    if (!extraParams.startsWith('&')) extraParams = `&${extraParams}`;\n    url += extraParams;\n  }\n  // the other URL params are only needed by external iD editors\n  if (!['?editor=ID', '?editor=RAPID'].includes(customUrl)) {\n    if (project.changesetComment) {\n      url += '&comment=' + encodeURIComponent(project.changesetComment);\n    }\n    if (project.imagery) {\n      if (project.imagery.includes('http')) {\n        url += '&background=custom:' + encodeURIComponent(formatImageryUrl(project.imagery));\n      } else {\n        url += '&background=' + encodeURIComponent(formatImageryUrl(project.imagery));\n      }\n    }\n    // add GPX\n    if (project.projectId && selectedTasks) {\n      url += '&gpx=' + encodeURIComponent(getTaskGpxUrl(project.projectId, selectedTasks));\n    }\n    if (project.idPresets) {\n      url += '&presets=' + encodeURIComponent(project.idPresets.join(','));\n    }\n  }\n  return url;\n}\n\nexport const formatExtraParams = (values) => {\n  let extraParams = '';\n  values\n    .split('&')\n    .filter((term) => term)\n    .forEach((term) => {\n      const [key, value] = term.split('=');\n      extraParams += `&${key}=${encodeURIComponent(value)}`;\n    });\n  return extraParams;\n};\n\nexport const sendJosmCommands = async (project, tasks, selectedTasks, windowSize, taskBbox) => {\n  await loadTasksBoundaries(project, selectedTasks);\n  await loadImageryonJosm(project);\n  await selectedTasks.map(\n    async (task, n) =>\n      await loadOsmDataToTasks(\n        project,\n        taskBbox ? taskBbox : getSelectedTasksBBox(tasks, [task]),\n        n === 0 ? true : false,\n      ),\n  );\n  return true;\n};\n\n// creates a new layer on JOSM and then add the tasks boundaries\nfunction loadTasksBoundaries(project, selectedTasks) {\n  const layerName = `Boundary for task${selectedTasks.length > 1 ? 's:' : ':'} ${selectedTasks.join(\n    ',',\n  )} of TM Project #${project.projectId} - Do not edit or upload`;\n  const tmTaskLayerParams = {\n    new_layer: true,\n    layer_name: layerName,\n    layer_locked: true,\n    download_policy: \"never\",\n    upload_policy: \"never\",\n    url: getTaskXmlUrl(project.projectId, selectedTasks).href,\n  };\n\n  return callJosmRemoteControl(formatJosmUrl('import', tmTaskLayerParams));\n}\n\nexport function getImageryInfo(url) {\n  const type = url.toLowerCase().substr(0, 3) === 'wms' ? 'wms' : 'tms';\n  const zoom = url.substr(url.indexOf('[') + 1, url.indexOf(']') - url.indexOf('[') - 1);\n  const [minZoom, maxZoom] = zoom.length\n    ? zoom.indexOf(':') !== -1\n      ? zoom.split(':')\n      : [null, zoom]\n    : [null, null];\n  return [\n    type,\n    minZoom !== '' && minZoom !== null ? Number(minZoom) : null,\n    maxZoom !== '' && maxZoom !== null ? Number(maxZoom) : null,\n  ];\n}\n\nfunction loadImageryonJosm(project) {\n  if (project.imagery) {\n    if (project.imagery.includes('http')) {\n      const [type, minZoom, maxZoom] = getImageryInfo(project.imagery);\n      const imageryParams = {\n        title: project.imagery,\n        type: type,\n      };\n      if (minZoom) imageryParams.min_zoom = minZoom;\n      if (maxZoom) imageryParams.max_zoom = maxZoom;\n      imageryParams.url = project.imagery.substr(project.imagery.indexOf('http'));\n\n      return callJosmRemoteControl(formatJosmUrl('imagery', imageryParams));\n    } else {\n      return callJosmRemoteControl(formatJosmUrl('imagery', { id: project.imagery }));\n    }\n  }\n}\n\nfunction loadOsmDataToTasks(project, bbox, newLayer) {\n  const loadAndZoomParams = {\n    left: bbox[0],\n    bottom: bbox[1],\n    right: bbox[2],\n    top: bbox[3],\n    changeset_comment: project.changesetComment,\n    changeset_source: project.imagery ? project.imagery : '',\n    new_layer: newLayer,\n    layer_name: 'OSM Data',\n  };\n\n  return callJosmRemoteControl(formatJosmUrl('load_and_zoom', loadAndZoomParams));\n}\n\nexport function formatJosmUrl(endpoint, params) {\n  return new URL(formatUrlParams(params), `http://127.0.0.1:8111/${endpoint}`);\n}\n\nexport function formatCustomUrl(url) {\n  return url.includes('?') ? url : `${url}?`;\n}\n\nfunction roundToDecimals(input, decimals) {\n  const p = Math.pow(10, decimals);\n  return Math.round(input * p) / p;\n}\n\nexport function formatUrlParams(params) {\n  const urlParams = Object.keys(params)\n    .map((key) => `${key}=${encodeURIComponent(params[key])}`)\n    .join('&');\n  return `?${urlParams}`;\n}\n\nlet safariWindowReference = null;\nconst callJosmRemoteControl = function (uri) {\n  // Safari won't send AJAX commands to the default (insecure) JOSM port when\n  // on a secure site, and the secure JOSM port uses a self-signed certificate\n  // that requires the user to jump through a bunch of hoops to trust before\n  // communication can proceed. So for Safari only, fall back to sending JOSM\n  // requests via the opening of a separate window instead of AJAX.\n  // Source: https://github.com/osmlab/maproulette3\n  if (window.safari) {\n    return new Promise((resolve, reject) => {\n      if (safariWindowReference && !safariWindowReference.closed) {\n        safariWindowReference.close();\n      }\n\n      safariWindowReference = window.open(uri);\n\n      // Close the window after 1 second and resolve the promise\n      setTimeout(() => {\n        if (safariWindowReference && !safariWindowReference.closed) {\n          safariWindowReference.close();\n        }\n        resolve(true);\n      }, 1000);\n    });\n  }\n\n  return fetch(uri)\n    .then((response) => response.status === 200)\n    .catch((error) => {\n      console.log(error);\n      return false;\n    });\n};\n","import React, { useLayoutEffect, useState, useCallback } from 'react';\nimport { useSelector } from 'react-redux';\nimport mapboxgl from 'mapbox-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport MapboxLanguage from '@mapbox/mapbox-gl-language';\n\nimport WebglUnsupported from '../webglUnsupported';\nimport { MAPBOX_TOKEN, MAP_STYLE, MAPBOX_RTL_PLUGIN_URL } from '../../config';\nimport mapMarker from '../../assets/img/mapMarker.png';\n\nlet markerIcon = new Image(17, 20);\nmarkerIcon.src = mapMarker;\n\nmapboxgl.accessToken = MAPBOX_TOKEN;\ntry {\n  mapboxgl.setRTLTextPlugin(MAPBOX_RTL_PLUGIN_URL);\n} catch {\n  console.log('RTLTextPlugin is loaded');\n}\n\nconst licensedFonts = MAPBOX_TOKEN\n  ? ['DIN Offc Pro Medium', 'Arial Unicode MS Bold']\n  : ['Open Sans Semibold'];\n\nexport const mapboxLayerDefn = (map, mapResults, clickOnProjectID, disablePoiClick = false) => {\n  map.addImage('mapMarker', markerIcon, { width: 15, height: 15, data: markerIcon });\n  map.addSource('projects', {\n    type: 'geojson',\n    data: mapResults,\n    cluster: true,\n    clusterRadius: 35,\n  });\n\n  map.addLayer({\n    id: 'projectsClusters',\n    filter: ['has', 'point_count'],\n    type: 'circle',\n    source: 'projects',\n    layout: {},\n    paint: {\n      'circle-color': 'rgba(104,112,127,0.5)',\n      'circle-radius': ['step', ['get', 'point_count'], 14, 10, 22, 50, 30, 500, 37],\n    },\n  });\n\n  map.addLayer({\n    id: 'cluster-count',\n    type: 'symbol',\n    source: 'projects',\n    filter: ['has', 'point_count'],\n    layout: {\n      'text-field': '{point_count_abbreviated}',\n      'text-font': licensedFonts,\n      'text-size': 16,\n    },\n    paint: {\n      'text-color': '#FFF',\n      'text-halo-width': 10,\n      'text-halo-blur': 1,\n    },\n  });\n\n  map.addLayer({\n    id: 'projects-unclustered-points',\n    type: 'symbol',\n    source: 'projects',\n    filter: ['!', ['has', 'point_count']],\n    layout: {\n      'icon-image': 'mapMarker',\n      'text-field': '#{projectId}',\n      'text-font': licensedFonts,\n      'text-offset': [0, 0.6],\n      'text-anchor': 'top',\n    },\n    paint: {\n      'text-color': '#2c3038',\n      'text-halo-width': 1,\n      'text-halo-color': '#fff',\n    },\n  });\n  map.on('mouseenter', 'projects-unclustered-points', function (e) {\n    // Change the cursor style as a UI indicator.\n    if (!disablePoiClick) {\n      map.getCanvas().style.cursor = 'pointer';\n    }\n  });\n  map.on('mouseleave', 'projects-unclustered-points', function (e) {\n    // Change the cursor style as a UI indicator.\n    map.getCanvas().style.cursor = '';\n  });\n\n  map.on('click', 'projects-unclustered-points', (e) => {\n    const value = e.features && e.features[0].properties && e.features[0].properties.projectId;\n    clickOnProjectID(value);\n  });\n};\n\nexport const ProjectsMap = ({ mapResults, fullProjectsQuery, setQuery, className }) => {\n  const mapRef = React.createRef();\n  const locale = useSelector((state) => state.preferences['locale']);\n  const [map, setMapObj] = useState(null);\n\n  const clickOnProjectID = useCallback(\n    (projectIdSearch) =>\n      setQuery(\n        {\n          ...fullProjectsQuery,\n          page: undefined,\n          text: ['#', projectIdSearch].join(''),\n        },\n        'pushIn',\n      ),\n    [fullProjectsQuery, setQuery],\n  );\n\n  useLayoutEffect(() => {\n    /* May be able to refactor this to just take\n     * advantage of useRef instead inside other useLayoutEffect() */\n\n    /* List of non-mapbox Glyph names is at\n     https://github.com/openmaptiles/fonts/tree/gh-pages/Open%20Sans%20Regular */\n\n    /* I referenced this initially https://philipprost.com/how-to-use-mapbox-gl-with-react-functional-component/ */\n    mapboxgl.supported() &&\n      setMapObj(\n        new mapboxgl.Map({\n          container: mapRef.current,\n          style: MAP_STYLE,\n          center: [0, 0],\n          zoom: 0.5,\n          attributionControl: false,\n        })\n          .addControl(new mapboxgl.AttributionControl({ compact: false }))\n          .addControl(new MapboxLanguage({ defaultLanguage: locale.substr(0, 2) || 'en' })),\n      );\n\n    return () => {\n      map && map.remove();\n    };\n    // eslint-disable-next-line\n  }, []);\n\n  useLayoutEffect(() => {\n    /* docs: https://docs.mapbox.com/mapbox-gl-js/example/cluster/ */\n\n    const someResultsReady = mapResults && mapResults.features && mapResults.features.length > 0;\n\n    const mapReadyProjectsReady =\n      map !== null &&\n      map.isStyleLoaded() &&\n      map.getSource('projects') === undefined &&\n      someResultsReady;\n    const projectsReadyMapLoading =\n      map !== null &&\n      !map.isStyleLoaded() &&\n      map.getSource('projects') === undefined &&\n      someResultsReady;\n\n    /* set up style/sources for the map, either immediately or on base load */\n    if (mapReadyProjectsReady) {\n      mapboxLayerDefn(map, mapResults, clickOnProjectID);\n    } else if (projectsReadyMapLoading) {\n      map.on('load', () => mapboxLayerDefn(map, mapResults, clickOnProjectID));\n    }\n\n    /* refill the source on mapResults changes */\n    if (map !== null && map.getSource('projects') !== undefined && someResultsReady) {\n      map.getSource('projects').setData(mapResults);\n    }\n  }, [map, mapResults, clickOnProjectID]);\n\n  if (!mapboxgl.supported()) {\n    return <WebglUnsupported className={`h-100 w-100  ${className || ''}`} />;\n  } else {\n    return <div id=\"map\" className={`h-100 w-100 ${className || ''}`} ref={mapRef}></div>;\n  }\n};\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAACuSURBVCiRldE9igIxGAbgB4v1B8QTiJ0grpV32MZ6sfZMVjYW2ggexj2CoFdwQQTdwhlwZhIz+0IIhPeBLwnVTLDFGfds32Ac6BYyxxWPwLriOwYH+I3AfF3Qz0HjBS/QTkzWyXoVPE3ASu8Vf9TEzRA+1MQ/ocNPz69592D3rBfMPoH370Ya4haBN4xSd1pF8DIFoYdTCR7RrYNhpvhIX3VhnrV/jFtOBzu0YoU/z51CYvMRYc0AAAAASUVORK5CYII=\"","import React from 'react';\nimport humanizeDuration from 'humanize-duration';\nimport { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\nimport {\n  ClockIcon,\n  RoadIcon,\n  HomeIcon,\n  WavesIcon,\n  MarkerIcon,\n  MappedIcon,\n  ValidatedIcon,\n} from '../svgIcons';\nimport { StatsCard } from '../statsCard';\nimport StatsTimestamp from '../statsTimestamp';\n\nexport const TaskStats = ({ userStats, username }) => {\n  const {\n    tasksMapped,\n    tasksValidatedByOthers,\n    tasksInvalidatedByOthers,\n    tasksValidated,\n    tasksInvalidated,\n  } = userStats;\n  const taskStats = [\n    {\n      icon: <MappedIcon className=\"v-mid h-100 w-50-ns w-25\" />,\n      title: messages.userMapped,\n      items: [\n        {\n          label: messages.tasks,\n          value: tasksMapped,\n        },\n        {\n          label: messages.validated,\n          value: tasksValidatedByOthers,\n        },\n        {\n          label: messages.invalidated,\n          value: tasksInvalidatedByOthers,\n        },\n      ],\n    },\n    {\n      icon: <ValidatedIcon className=\"v-mid h-100 w-30-ns w-25\" />,\n      title: messages.userValidated,\n      items: [\n        {\n          label: messages.tasks,\n          value: tasksValidated + tasksInvalidated || 0,\n        },\n        {\n          label: messages.finished,\n          value: tasksValidated,\n        },\n        {\n          label: messages.invalidated,\n          value: tasksInvalidated,\n        },\n      ],\n    },\n  ];\n\n  return (\n    <div className=\"relative base-font blue-grey task-stats-ctr\">\n      {taskStats.map((stat, index) => (\n        <article\n          key={index}\n          className=\"shadow-6 pv3 ph2 bg-white flex flex-column flex-row-ns items-center\"\n        >\n          <div className=\"w-75 w-25-ns h-100 pa2 pa0-m red tc\">{stat.icon}</div>\n          <div className=\"w-75 mt3 tc f6 b\">\n            <div className=\" w-100\">\n              <p className=\"mb1 mt3 mt1-ns f3 fw6\" style={{ letterSpacing: '1.25px' }}>\n                <FormattedMessage\n                  {...stat.title}\n                  values={{ user: username ? username : <FormattedMessage {...messages.you} /> }}\n                />\n              </p>\n              <hr className=\"w-50\" />\n            </div>\n            <div className=\"w-100 pt4 flex\">\n              {stat.items.map((item, index) => (\n                <div key={index} className=\" w-33 tc\">\n                  <p className=\"ma0 mb0 barlow-condensed f2 fw5 red\">{item.value}</p>\n                  <p className=\"mb3 ttl fw6\">\n                    <FormattedMessage {...item.label} />\n                  </p>\n                </div>\n              ))}\n            </div>\n          </div>\n        </article>\n      ))}\n    </div>\n  );\n};\n\nexport const shortEnglishHumanizer = humanizeDuration.humanizer({\n  language: 'shortEn',\n  languages: {\n    shortEn: {\n      y: () => 'y',\n      mo: () => 'mo',\n      w: () => 'w',\n      d: () => 'd',\n      h: () => 'h',\n      m: () => 'm',\n      s: () => 's',\n      ms: () => 'ms',\n    },\n  },\n});\n\nexport const ElementsMapped = ({ userStats, osmStats }) => {\n  const duration = shortEnglishHumanizer(userStats.timeSpentMapping * 1000, {\n    round: true,\n    delimiter: ' ',\n    units: ['h', 'm'],\n    spacer: '',\n  });\n\n  const iconClass = 'h-50 w-50';\n  const iconStyle = { height: '45px' };\n\n  return (\n    <div>\n      <div className=\"w-100 relative stats-cards-container\">\n        <StatsCard\n          invertColors={true}\n          icon={<ClockIcon className={iconClass} style={iconStyle} />}\n          description={<FormattedMessage {...messages.timeSpentMapping} />}\n          value={duration}\n        />\n        <StatsCard\n          icon={<HomeIcon className={iconClass} style={iconStyle} />}\n          description={<FormattedMessage {...messages.buildingsMapped} />}\n          value={osmStats.buildings || 0}\n        />\n        <StatsCard\n          icon={<RoadIcon className={iconClass} style={iconStyle} />}\n          description={<FormattedMessage {...messages.roadMapped} />}\n          value={osmStats.roads || 0}\n        />\n        <StatsCard\n          icon={<MarkerIcon className={iconClass} style={iconStyle} />}\n          description={<FormattedMessage {...messages.poiMapped} />}\n          value={osmStats.total_poi_count_add || '-'}\n        />\n        <StatsCard\n          icon={<WavesIcon className={iconClass} style={iconStyle} />}\n          description={<FormattedMessage {...messages.waterwaysMapped} />}\n          value={osmStats.total_waterway_km_add || '-'}\n        />\n      </div>\n      <div className=\"cf w-100 relative tr pt3 pr3\">\n        <StatsTimestamp messageType=\"generic\" />\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport { useLocation, Link } from 'react-router-dom';\n\nexport function SectionMenu({ items }: Object) {\n  const location = useLocation();\n  const linkCombo = 'link mh2 blue-dark ttc';\n\n  const isActive = (href) => location.pathname === href.split('?')[0];\n\n  return (\n    <div className=\"cf mb2 pb3 pt3-ns ph4 ph2-m bg-grey-light dib\">\n      {items.map((item) => (\n        <Link\n          key={item.url}\n          to={item.url}\n          className={isActive(item.url) ? `${linkCombo} bb b--blue-dark bw1 pb1` : linkCombo}\n        >\n          <span className=\"db dib-ns\">{item.label}</span>\n        </Link>\n      ))}\n    </div>\n  );\n}\n","import React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport { TeamBox } from '../teamsAndOrgs/teams';\nimport { useUserOrganisationsQuery } from '../../api/organisations';\nimport { useTeamsQuery } from '../../api/teams';\nimport { Alert } from '../alert';\nimport messages from './messages';\n\nexport const UserTeams = ({ userId }) => {\n  const { data: teams } = useTeamsQuery({ member: userId, omitMemberList: true });\n\n  return (\n    <div className=\"cf db\">\n      {teams &&\n        teams.hasOwnProperty('teams') &&\n        teams.teams.map((team, n) => (\n          <div className=\"w-third-l w-50-m w-100 dib fl mv1 ph2\" key={n}>\n            <TeamBox team={team} className=\"f5 fw6 pv3 ph3 truncate shadow-4 bg-white blue-dark\" />\n          </div>\n        ))}\n    </div>\n  );\n};\n\nexport const UserOrganisations = ({ userId }) => {\n  const { data: orgs, status } = useUserOrganisationsQuery(userId);\n\n  return (\n    <>\n      {status === 'success' &&\n        orgs.organisations.map((org) => (\n          <div title={org.name} key={org.organisationId} className=\"cf ph2 pv1 tc dib\">\n            {org.logo ? (\n              <img alt={org.name} src={org.logo} className=\"object-fit-contain h2 v-mid\" />\n            ) : (\n              <span className=\"bg-red-light red truncate\">{org.name}</span>\n            )}\n          </div>\n        ))}\n      {status === 'error' && (\n        <Alert type=\"error\" compact inline>\n          <FormattedMessage {...messages.userOrganisationsError} />\n        </Alert>\n      )}\n    </>\n  );\n};\n","import { useQuery } from '@tanstack/react-query';\nimport { useSelector } from 'react-redux';\n\nimport api from './apiClient';\n\nexport const useUserOrganisationsQuery = (userId) => {\n  const token = useSelector((state) => state.auth.token);\n\n  const fetchOrganisations = ({ signal }) => {\n    return api(token).get(`organisations/`, {\n      signal,\n      params: {\n        manager_user_id: userId,\n        omitManagerList: true,\n      },\n    });\n  };\n\n  return useQuery({\n    queryKey: ['user-organisations', userId],\n    queryFn: fetchOrganisations,\n    select: (data) => data.data,\n  });\n};\n","export default __webpack_public_path__ + \"static/media/osm_logo.85cd0e72.png\";","import React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { FormattedMessage, useIntl } from 'react-intl';\n\nimport messages from '../user/messages';\nimport { TwitterIconNoBg, FacebookIcon, LinkedinIcon, ProfilePictureIcon } from '../svgIcons';\nimport { MappingLevelMessage } from '../mappingLevel';\nimport { NextMappingLevel } from '../user/topBar';\nimport { UserOrganisations } from './userTeamsOrgs';\nimport { SectionMenu } from '../menu';\nimport OsmLogo from '../../assets/img/osm_logo.png';\nimport SlackLogo from '../../assets/img/icons/slack.png';\nimport OsmChaLogo from '../../assets/img/icons/osm-cha.png';\nimport HdycNeisOneLogo from '../../assets/img/icons/hdyc-neis-one.png';\nimport { OSM_SERVER_URL, ORG_CODE } from '../../config';\n\nexport const SocialMedia = ({ data }) => {\n  const intl = useIntl();\n  const socialMediaItems = ['twitterId', 'facebookId', 'linkedinId'];\n\n  const getSocialIcon = (field) => {\n    const iconStyle = {\n      width: '1.4em',\n      height: '1.4em',\n    };\n\n    switch (field) {\n      case 'twitterId':\n        return <TwitterIconNoBg style={iconStyle} className=\"light-blue v-mid\" />;\n      case 'facebookId':\n        return <FacebookIcon style={iconStyle} className=\"dark-blue v-mid\" />;\n      case 'linkedinId':\n        return <LinkedinIcon style={iconStyle} className=\"blue v-mid\" />;\n      default:\n        return null;\n    }\n  };\n\n  const createLink = (field, value) => {\n    const urls = {\n      twitterId: `https://www.twitter.com/${value}`,\n      facebookId: `https://www.facebook.com/${value}`,\n      linkedinId: `https://www.linkedin.com/in/${value}`,\n      osm: `${OSM_SERVER_URL}/user/${value}`,\n      missingmaps: `https://www.missingmaps.org/users/#/${value}`,\n      osmcha: `https://osmcha.org/?filters={\"users\":[{\"label\":\"${value}\",\"value\":\"${value}\"}]}`,\n      hdycNeisOne: `https://hdyc.neis-one.org/?${value}`,\n    };\n\n    return (\n      <a\n        className=\"blue-grey no-underline\"\n        rel=\"noopener noreferrer\"\n        target=\"_blank\"\n        href={urls[field]}\n      >\n        {value}\n      </a>\n    );\n  };\n\n  return (\n    <ul className=\"list pa0 ma0 mt3\">\n      <li className=\"dib mr4-ns mr2 cf f7\">\n        <div className=\"mr2 h2\">\n          <img className=\"h1 v-mid\" src={OsmLogo} alt=\"OpenStreetMap\" />{' '}\n          {createLink('osm', data.username)}\n        </div>\n      </li>\n      <li className=\"dib mr4-ns mr2 cf f7\" title={intl.formatMessage(messages.osmChaUsername)}>\n        <div className=\"mr2 h2\">\n          <img className=\"h1 v-mid\" src={OsmChaLogo} alt=\"OSM Cha Logo\" />{' '}\n          {createLink('osmcha', data.username)}\n        </div>\n      </li>\n      <li className=\"dib mr4-ns mr2 cf f7\">\n        <div className=\"mr2 h2\">\n          <img className=\"h1 v-mid\" src={HdycNeisOneLogo} alt=\"HDYC Neis One Favicon\" />{' '}\n          {createLink('hdycNeisOne', data.username)}\n        </div>\n      </li>\n      {data.slackId && (\n        <li\n          className=\"dib mr4-ns mr2 cf f7\"\n          title={intl.formatMessage(messages.slackUsername, { org: ORG_CODE })}\n        >\n          <div className=\"mr2 h2 blue-grey\">\n            <img className=\"h1 v-mid\" src={SlackLogo} alt=\"Slack\" /> {data.slackId}\n          </div>\n        </li>\n      )}\n      {socialMediaItems.map((i) => {\n        if (!data[i]) {\n          return null;\n        }\n\n        return (\n          <li key={i} className=\"dib mr4-ns mr2 cf f7\">\n            <div className=\"mr2 h2\">\n              {getSocialIcon(i)} {createLink(i, data[i])}\n            </div>\n          </li>\n        );\n      })}\n    </ul>\n  );\n};\n\nexport const MyContributionsNav = ({ username, authUser }) => {\n  const items = [\n    { url: `/contributions`, label: <FormattedMessage {...messages.myStats} /> },\n    {\n      url: '/contributions/projects/?mappedByMe=1&action=any',\n      label: <FormattedMessage {...messages.myProjects} />,\n    },\n    { url: '/contributions/tasks', label: <FormattedMessage {...messages.myTasks} /> },\n    { url: '/contributions/teams', label: <FormattedMessage {...messages.myTeams} /> },\n  ];\n\n  return (\n    <div className=\"fl ph5-l ph2\">\n      <SectionMenu items={items} />\n    </div>\n  );\n};\n\nexport const HeaderProfile = ({ userDetails, changesets, selfProfile }) => {\n  const authDetails = useSelector((state) => state.auth.userDetails);\n  const [user, setUser] = useState({});\n\n  useEffect(() => {\n    if (selfProfile && authDetails) {\n      setUser(authDetails);\n    }\n  }, [selfProfile, authDetails, authDetails.username]);\n\n  useEffect(() => {\n    if (userDetails && userDetails.id) {\n      setUser(userDetails);\n    }\n  }, [userDetails]);\n\n  return (\n    <>\n      <div className=\"w-100 h-100 cf pv4 pl5-l ph2 bg-white blue-dark flex flex-column flex-row-ns items-center\">\n        <div className=\"fl dib pr3\">\n          {user.pictureUrl ? (\n            <img\n              className=\"h4 w4 br-100 pa1 ba b--grey-light bw3 red\"\n              src={user.pictureUrl}\n              alt={user.username}\n            />\n          ) : (\n            <ProfilePictureIcon className=\"red\" />\n          )}\n        </div>\n        <div className=\"w-70-ns w-100 fl dib tc tl-ns\">\n          <div className=\"pl2 dib w-50-l fl w-100\">\n            <p className=\"barlow-condensed f2 ttu fw5 ma0 mb3\" style={{ letterSpacing: '1.25px' }}>\n              {user.name || user.username}\n            </p>\n            <p className=\"f125 ma0 mb2 fw5\">\n              <MappingLevelMessage level={user.mappingLevel} />\n            </p>\n            <NextMappingLevel changesetsCount={changesets} />\n            <SocialMedia data={user} />\n          </div>\n          <div className=\"pt1 dib fl w-50-l w-100 v-btm\">\n            <UserOrganisations userId={user.id} />\n          </div>\n        </div>\n      </div>\n      {user.username === authDetails.username && <MyContributionsNav username={user.username} />}\n    </>\n  );\n};\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAABmJLR0QA/wD/AP+gvaeTAAAFZ0lEQVRogc2aaWwVVRTHf30tS5HiglZQi4CoiFiQagwaFE1AIgYMiYlbYlRiEBNU4hcSo19cYowm+sElxiBo/IAmGiGCuKUaUzFKcEkVxQp1K320gCwibd/zw+nY6XDfvXdmzkz5Jyfte/Pu+Z//zJ27nHuqgfsR/AWUyQ71wHigFjiQIY8TGxChu4GXgPnAMAW/E4H7gHeAP/s5ykAJuF3Bf2KsDAUTWBewGlgIjIjhaxrwCLDN4DNsNynFnggzKwQV2D5gLbAYqIu0LQCNwMPAdw4/gX1DvJuojgJQxC/YXuAHoBn4GrkZPu0C2w9cmI8sO9YRL/Akdhi4Ki9BLiwjW7H/AtfmpsaCmv6/H2XIUQbuBt6P0eZUYA7QAIxFZo0i0AF8CfyiEdhOsnm6Kz35TwQeBL5Fpi6bz9+AZ4BzE6sFXlUUGdiLHry1wBPA3wn8l4C3gAlJBN+hLLYNGO3gvBj4WYHrELAiruBJimL7gCsdfPNI9lRttgYYGUf0LiViV1duAg4qiw1sMzDcV/BaBcKjyDq6Ek5jYKOSlb3mK3ipAtlqB8cbGYsNbKmP4CYFoukW/5fnJLaMjA9nuwSPSkmyw+F/AzpifO1ll2CQIT4pwbMWv2fhXlBo21Eic3QhElQ1MYf1CDZari0BqlL4ToJhwM3hL6KCZxi+i4NWy7WrU/hNg8W2i0+TrvtUW3zvTOE7jfVRIeEwFkmuZTFg1ZD/+xu284NAwt13Be61rw2HLddOIv/3N4yG4J9A8AnAvSmd2gY7jSxoGvQG/wSClyFdOg1sgvcgXWuo8E/4QxXQTvr3ZL+DtFuBI6nVB0EUkCzi/308BcY4/PykwJEEbUBn8KEAnKHovNFy7UNFnjj4NPyhgHQ1LcywXPtAkScOXol+UYukUTXeFdtTrML/dELLWqkwHX6sRNCDfbS/LWfBN1QKZLkiyZ0WwTXAlpzEvm2Jg3HI5KxB9J6NCDgH/eRd1DqR7agVnyiR9SEZUBsWoTduRO0AcKlLLMjSUov0cQ++hcgKSFvsfB+xIN26T4m4iF8i4SLkvFiDczv2fJoRnyuRl4FbPTlrgUeRpWkSnoPAYyTc6ZnKH5La5pjcJwOrgK2e/n9EbtS4OCTRSXkKctaTFt3IUcrWhO0nAJchp4MNDOzqOpHFxDakEkEFu0n3ZLuAWVrB5IEWkovdi+eUkBNqkdmnGTn0NyYoky4zfZ7sFeRX1HILg+vDyoRyW2G0ko3Yeci8WwI2ITUfWeS5LkB2ZqY4z4z+uI74S0yfbnwNkuSLtv0euIt0yf8A9cBzSLrYFGcRww1eVOHHaZ7sXNzHN13A88BsU1AW1CClUK8DRxwc7wYNwrgxBtk+YAH2qWcOcoA2yuHrFOCefutGFkBfILm2duSGgRx0T0I2IE3IacYYz3iP2dQMR7qnz5MtIvUZNswm+12Rr5Uw7J6u92zcgayBXWKTLhWzsC2mINd4NNyFuzZqFkObkjXZA9EgR+IuFP0VmOwQewn+r0Ve1odhOlriaNQCnO4QO5OBE4bjydabgn3T0mAdskRzie06DsSZ7LposKMxz5O9SOG3a15sxL/eOm/7zBS/KXW6A7/a5unIlm2ohZlsL7LMPAbrQz9qAx7Cb6k3DZmihlqYyTqQjYoappKsmq6HdFVCLjsEvED6o99BOA/4I2YgzcjCJqiBnAo8ic4UdgTZfS1H0kSqmAL87hlICclrzbX4q0PyaL4+y8huqAWpsV5AujINKybjd3C+HXgKeYq+GIFUIZj24p3IOLMKKUl2bUSs8N2KTUS6ZbiqrQfJKLQjZftfIbuctEnA8ciZdbnf956U/gbhP/6k2jgH7g1nAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADJWlDQ1BJQ0MgUHJvZmlsZQAAeAGFlE1IFGEYx/+zjQSxBtGXCMXQwSRUJgtSAtP1K1O2ZdVMCWKdfXedHGenmd0tRSKE6Jh1jC5WRIeITuGhQ6c6RASZdYmgo0UQBV4itv87k7tjVL4wM795nv/7fL3DAFWPUo5jRTRgys67yd6Ydnp0TNv8GlWoRhRcKcNzOhKJAZ+plc/1a/UtFGlZapSx1vs2fKt2mRBQNCp3ZAM+LHk84OOSL+SdPDVnJBsTqTTZITe4Q8lO8i3y1myIx0OcFp4BVLVTkzMcl3EiO8gtRSMrYz4g63batMnvpT3tGVPUsN/INzkL2rjy/UDbHmDTi4ptzAMe3AN211Vs9TXAzhFg8VDF9j3pz0fZ9crLHGr2wynRGGv6UCp9rwM23wB+Xi+VftwulX7eYQ7W8dQyCm7R17Iw5SUQ1BvsZvzkGv2Lg558VQuwwDmObAH6rwA3PwL7HwLbHwOJamCoFZHLbDe48uIi5wJ05pxp18xO5LVmXT+idfBohdZnG00NWsqyNN/laa7whFsU6SZMWQXO2V/beI8Ke3iQT/YXuSS87t+szKVTXZwlmtjWp7To6iY3kO9nzJ4+cj2v9xm3Zzhg5YCZ7xsKOHLKtuI8F6mJ1Njj8ZNkxldUJx+T85A85xUHZUzffi51IkGupT05meuXml3c2z4zMcQzkqxYMxOd8d/8xi0kZd591Nx1LP+bZ22RZxiFBQETNu82NCTRixga4cBFDhl6TCpMWqVf0GrCw+RflRYS5V0WFb1Y4Z4Vf895FLhbxj+FWBxzDeUImv5O/6Iv6wv6Xf3zfG2hvuKZc8+axqtrXxlXZpbVyLhBjTK+rCmIb7DaDnotZGmd4hX05JX1jeHqMvZ8bdmjyRzianw11KUIZWrEOOPJrmX3RbLFN+HnW8v2r+lR+3z2SU0l17K6eGYp+nw2XA1r/7OrYNKyq/DkjZAuPGuh7lUPqn1qi9oKTT2mtqttahffjqoD5R3DnJWJC6zbZfUp9mBjmt7KSVdmi+Dfwi+G/6VeYQvXNDT5D024uYxpCd8R3DZwh5T/w1+zAw3eoYKLCAAAAAlwSFlzAAAXEgAAFxIBZ5/SUgAAAdlJREFUWAntlL0rxVEYx6/3yBVKZJGFhQxeShJlspHBf2CwmWRitFhtBossFrKIhZgYZEIiihCJvL9+vrdzfvc43evKIOX3rY/znOf3nHOe+zzniERChRUIKxBW4L9XIMMrQAHzBiiDY6iGXqiBM7iB76qOwG5ohmw4hJRqJeIdFNwHOlBzcQBKJJWyCBiDB7Br37CnIApfyiagxS+wA1tgN5rETqUhAmz8BfaJM59ItdgmoA3mIB/yYBnk2wS/bbgClWKpVYpdggooAR0sn36UWpxUbgKdTtQItjbYhRwohiYP3R/1XHFP0AhWSsImNmydGjPdiWNrk1NnfmvsNMZH6IJp47NDB0almeiwbfuB8RzUTiWiix0oPbA+G7o0z45Lc1eJ2iCfLqCkJN318t3rD9KLCJSsAgpQFRJJBx3BvPdRFbs0viJGtcQeqjV62pKqE+irBIIgz9AvWDF4n4JnpgR6YNwEtDPa0q8ZX2z4SQLuet9ex7EB9TAKehXXMABqzz74lcMVVxumSi9q4+7IoPGp9LmOP5HZglPv3+5jR11k92XF1qo3rtS3KtiDGbgCqRz09PRPaRZeIZmU5AIUQhTuYBX6YRF+VUpAiYQKKxBWIKzA363AB0+yaatSuh0sAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,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\"","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport Popup from 'reactjs-popup';\nimport { useQueryParam, NumberParam, StringParam } from 'use-query-params';\nimport ReactPlaceholder from 'react-placeholder';\nimport bbox from '@turf/bbox';\nimport { FormattedMessage, FormattedRelativeTime } from 'react-intl';\n\nimport messages from './messages';\nimport { TaskActivity } from './taskActivity';\nimport { compareTaskId, compareLastUpdate } from '../../utils/sorting';\nimport { getItem, setItem } from '../../utils/safe_storage';\nimport { selectUnit } from '../../utils/selectUnit';\nimport { TASK_COLOURS } from '../../config';\nimport { LockIcon, ListIcon, ZoomPlusIcon, CloseIcon, InternalLinkIcon } from '../svgIcons';\nimport { PaginatorLine, howManyPages } from '../paginator';\nimport { Dropdown } from '../dropdown';\nimport { TextField } from '../formInputs';\nimport useCloseOnDocumentClick from '../../hooks/UseCloseOnDocumentClick';\n\nexport function TaskStatus({ status, lockHolder }: Object) {\n  const isReadyOrLockedForMapping = ['READY', 'LOCKED_FOR_MAPPING'].includes(status);\n  const dotSize = isReadyOrLockedForMapping ? '0.875rem' : '1rem';\n  const isLockedStatus = ['LOCKED_FOR_VALIDATION', 'LOCKED_FOR_MAPPING'].includes(status);\n  return (\n    <>\n      <span\n        className={`${isReadyOrLockedForMapping ? 'ba bw1 b--grey-light' : ''} dib v-mid`}\n        style={{\n          height: dotSize,\n          width: dotSize,\n          backgroundColor: TASK_COLOURS[status],\n        }}\n      ></span>\n      {isLockedStatus && <LockIcon style={{ paddingTop: '1px' }} className=\"v-mid pl1 h1 w1\" />}\n      <span className=\"pl2 v-mid\">\n        {isLockedStatus && lockHolder ? (\n          <FormattedMessage\n            {...messages.lockedBy}\n            values={{\n              user: lockHolder,\n              lockStatus: <FormattedMessage {...messages[`taskStatus_${status}`]} />,\n            }}\n          />\n        ) : (\n          <FormattedMessage {...messages[`taskStatus_${status}`]} />\n        )}\n      </span>\n    </>\n  );\n}\n\nexport function TaskItem({\n  data,\n  project,\n  setZoomedTaskId,\n  selectTask,\n  tasks,\n  updateActivities,\n  userCanValidate,\n  selected = [],\n}: Object) {\n  const [isCopied, setIsCopied] = useState(false);\n  const location = useLocation();\n  const { value, unit } = selectUnit(new Date(data.actionDate));\n\n  const closeOnDocumentClick = useCloseOnDocumentClick();\n\n  const handleCopyToClipboard = () =>\n    navigator.clipboard\n      .writeText(`${window.location.origin}${location.pathname}?search=${data.taskId}`)\n      .then(() => setIsCopied(true));\n\n  return (\n    <div\n      className={`cf db br1 mt2 task-list ${\n        selected.includes(data.taskId) ? 'ba b--blue-dark bw1' : 'shadow-2 bw1'\n      }`}\n    >\n      <div\n        className=\"w-80 pv3 fl cf pointer\"\n        role=\"button\"\n        onClick={() => selectTask(data.taskId, data.taskStatus)}\n      >\n        <div className=\"w-70-l w-40 fl dib truncate\">\n          <span className=\"pl3 blue-dark fw7\">\n            <FormattedMessage {...messages.taskId} values={{ id: data.taskId }} />\n          </span>\n          <FormattedRelativeTime value={value} unit={unit}>\n            {(formattedTime) => (\n              <>\n                {data.actionDate && (\n                  <div title={`${data.actionBy}, ${formattedTime}`} className=\"dn di-l\">\n                    <span className=\"ph2 blue-grey\">&#183;</span>\n                    <span className=\"blue-grey\">\n                      <FormattedMessage\n                        {...messages.taskLastUpdate}\n                        values={{ user: <span className=\"b blue-dark fw5\">{data.actionBy}</span> }}\n                      />{' '}\n                      {formattedTime}\n                    </span>\n                  </div>\n                )}\n              </>\n            )}\n          </FormattedRelativeTime>\n        </div>\n        <div className=\"w-30-l w-60 fl blue-dark dib truncate\">\n          <TaskStatus status={data.taskStatus} />\n        </div>\n      </div>\n      <div className=\"w-20 pv3 fr tr dib blue-light truncate overflow-empty\">\n        <FormattedMessage {...messages.seeTaskHistory}>\n          {(msg) => (\n            <Popup\n              modal\n              nested\n              trigger={\n                <div className=\"pr2 dib v-mid\" title={msg}>\n                  <ListIcon width=\"18px\" height=\"18px\" className=\"pointer hover-blue-grey\" />\n                </div>\n              }\n              closeOnDocumentClick={closeOnDocumentClick}\n            >\n              {(close) => (\n                <TaskActivityDetail\n                  close={close}\n                  project={project}\n                  tasks={tasks}\n                  taskId={data.taskId}\n                  updateActivities={updateActivities}\n                  userCanValidate={userCanValidate}\n                />\n              )}\n            </Popup>\n          )}\n        </FormattedMessage>\n        <FormattedMessage {...messages.zoomToTask}>\n          {(msg) => (\n            <div className=\"pl2 pr1 dib v-mid\" title={msg}>\n              <ZoomPlusIcon\n                width=\"18px\"\n                height=\"18px\"\n                className=\"pointer hover-blue-grey\"\n                role=\"button\"\n                onClick={() => setZoomedTaskId(data.taskId)}\n              />\n            </div>\n          )}\n        </FormattedMessage>\n        <FormattedMessage {...messages[isCopied ? 'taskLinkCopied' : 'copyTaskLink']}>\n          {(msg) => (\n            <div className={`ph2 dib v-mid ${isCopied ? 'grey-light' : ''}`} title={msg}>\n              <InternalLinkIcon\n                role=\"button\"\n                width=\"18px\"\n                height=\"18px\"\n                className={`pointer ${isCopied ? '' : 'hover-blue-grey'}`}\n                onClick={handleCopyToClipboard}\n              />\n            </div>\n          )}\n        </FormattedMessage>\n      </div>\n    </div>\n  );\n}\n\nexport function TaskFilter({ userCanValidate, statusFilter, setStatusFn }: Object) {\n  const options = [\n    { label: <FormattedMessage {...messages.filterAll} />, value: 'ALL' },\n    { label: <FormattedMessage {...messages.filterReadyToMap} />, value: 'READY' },\n    ...(userCanValidate\n      ? [\n          {\n            label: <FormattedMessage {...messages.filterReadyToValidate} />,\n            value: 'MAPPED',\n          },\n        ]\n      : []),\n    {\n      label: <FormattedMessage {...messages.taskStatus_INVALIDATED} />,\n      value: 'INVALIDATED',\n    },\n    {\n      label: <FormattedMessage {...messages.taskStatus_VALIDATED} />,\n      value: 'VALIDATED',\n    },\n    { label: <FormattedMessage {...messages.taskStatus_BADIMAGERY} />, value: 'BADIMAGERY' },\n    { label: <FormattedMessage {...messages.taskStatus_LOCKED} />, value: 'LOCKED' },\n  ];\n\n  return (\n    <Dropdown\n      onChange={(e) => setStatusFn(e[0].value)}\n      value={statusFilter || 'ALL'}\n      options={options}\n      display={statusFilter || <FormattedMessage {...messages.filterAll} />}\n      className=\"blue-dark bg-white pv2 ph3 ba b--card\"\n    />\n  );\n}\n\nexport function TaskList({\n  project,\n  tasks,\n  userCanValidate,\n  activeFilter,\n  selectTask,\n  setZoomedTaskId,\n  selected,\n  userContributions,\n  updateActivities,\n  textSearch,\n  setTextSearch,\n}: Object) {\n  const [readyTasks, setTasks] = useState([]);\n  const [sortBy, setSortingOption] = useQueryParam('sortBy', StringParam);\n  const [statusFilter, setStatusFilter] = useQueryParam('filter', StringParam);\n\n  const orderedTasks = useCallback(\n    (criteria) => {\n      if (criteria === 'id') return readyTasks.sort(compareTaskId);\n      if (criteria === '-date') return readyTasks.sort(compareLastUpdate).reverse();\n      // default option is to order by date\n      return readyTasks.sort(compareLastUpdate);\n    },\n    [readyTasks],\n  );\n\n  useEffect(() => {\n    const tasksSortOrder = getItem('tasksSortOrder');\n    tasksSortOrder && setSortingOption(tasksSortOrder);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const getTasksByStatus = (tasks, filter) => {\n    switch (filter) {\n      case 'ALL':\n        return tasks;\n      case 'LOCKED':\n        return tasks.filter((task) =>\n          ['LOCKED_FOR_MAPPING', 'LOCKED_FOR_VALIDATION'].includes(task.properties.taskStatus),\n        );\n      default:\n        return tasks.filter((task) => task.properties.taskStatus === filter);\n    }\n  };\n\n  useEffect(() => {\n    if (tasks && tasks.features) {\n      let newTasks = tasks.features;\n      newTasks = getTasksByStatus(newTasks, statusFilter || 'ALL');\n\n      if (textSearch) {\n        if (Number(textSearch)) {\n          newTasks = newTasks.filter(\n            (task) =>\n              task.properties.taskId === Number(textSearch) ||\n              (task.properties.actionBy && task.properties.actionBy.includes(textSearch)),\n          );\n        } else {\n          const usersTaskIds = userContributions\n            .filter((user) => user.username.toLowerCase().includes(textSearch.toLowerCase()))\n            .map((user) => user.taskIds)\n            .flat();\n          newTasks = newTasks.filter(\n            (task) =>\n              usersTaskIds.includes(task.properties.taskId) ||\n              (task.properties.actionBy &&\n                task.properties.actionBy.toLowerCase().includes(textSearch.toLowerCase())),\n          );\n        }\n      }\n      setTasks(newTasks);\n    }\n  }, [textSearch, statusFilter, tasks, userContributions]);\n\n  function updateSortingOption(data: Object) {\n    if (data) {\n      setSortingOption(data[0].value);\n      setItem('tasksSortOrder', data[0].value);\n    }\n  }\n\n  const sortingOptions = [\n    { label: <FormattedMessage {...messages.sortById} />, value: 'id' },\n    { label: <FormattedMessage {...messages.sortByMostRecentlyUpdate} />, value: 'date' },\n    { label: <FormattedMessage {...messages.sortByLeastRecentlyUpdate} />, value: '-date' },\n  ];\n\n  return (\n    <div className=\"cf\">\n      <div className=\"flex items-center flex-wrap mb3\" style={{ gap: '1rem' }}>\n        <div style={{ flexGrow: 1 }}>\n          <TextField\n            placeholderMsg={messages.filterPlaceholder}\n            className=\"pa2 w-100 b--card\"\n            value={textSearch || ''}\n            onChange={(e) => setTextSearch(e.target.value)}\n            onCloseIconClick={() => setTextSearch('')}\n          />\n        </div>\n        <TaskFilter\n          userCanValidate={userCanValidate}\n          statusFilter={statusFilter}\n          setStatusFn={setStatusFilter}\n        />\n        <Dropdown\n          onChange={updateSortingOption}\n          value={sortBy || 'date'}\n          options={sortingOptions}\n          display={sortBy || <FormattedMessage {...messages.sortById} />}\n          className=\"blue-dark bg-white pv2 ph3 ba b--card\"\n        />\n      </div>\n      <ReactPlaceholder\n        showLoadingAnimation={true}\n        rows={6}\n        delay={50}\n        ready={tasks && tasks.features && tasks.features.length}\n      >\n        {readyTasks && (\n          <PaginatedList\n            pageSize={6}\n            items={orderedTasks(sortBy)}\n            ItemComponent={TaskItem}\n            setZoomedTaskId={setZoomedTaskId}\n            selected={selected}\n            selectTask={selectTask}\n            project={project}\n            tasks={readyTasks}\n            updateActivities={updateActivities}\n            userCanValidate={userCanValidate}\n          />\n        )}\n      </ReactPlaceholder>\n    </div>\n  );\n}\n\nfunction TaskActivityDetail({\n  taskId,\n  tasks,\n  project,\n  updateActivities,\n  userCanValidate,\n  close,\n}: Object) {\n  const [taskData, setActiveTaskData] = useState();\n\n  useEffect(() => {\n    const filteredTasks = tasks.filter((task) => task.properties.taskId === taskId);\n    setActiveTaskData(filteredTasks.length ? filteredTasks[0] : null);\n  }, [tasks, taskId]);\n\n  return (\n    <>\n      {taskData ? (\n        <TaskActivity\n          taskId={taskId}\n          project={project}\n          status={taskData ? taskData.properties.taskStatus : 'READY'}\n          bbox={taskData ? bbox(taskData.geometry) : ''}\n          close={close}\n          updateActivities={updateActivities}\n          userCanValidate={userCanValidate}\n        />\n      ) : (\n        <div className=\"w-100 pa4 blue-dark bg-white\">\n          <CloseIcon className=\"h1 w1 fr pointer\" onClick={close} />\n          <h3 className=\"ttu f3 pa0 ma0 barlow-condensed b mb4\">\n            <FormattedMessage {...messages.taskUnavailable} />\n          </h3>\n          <p className=\"pb0\">\n            <FormattedMessage\n              {...messages.taskSplitDescription}\n              values={{ id: <b>#{taskId}</b> }}\n            />\n          </p>\n        </div>\n      )}\n    </>\n  );\n}\n\nfunction PaginatedList({\n  items,\n  ItemComponent,\n  pageSize,\n  project,\n  setZoomedTaskId,\n  selectTask,\n  selected,\n  tasks,\n  updateActivities,\n  userCanValidate,\n}: Object) {\n  const [page, setPage] = useQueryParam('page', NumberParam);\n  const lastPage = howManyPages(items.length, pageSize);\n  // reset page number to 1 if it is not valid any more\n  useEffect(() => {\n    if (items && page > 1 && page > lastPage) {\n      setPage(1);\n    }\n  }, [items, page, lastPage, setPage]);\n\n  const latestItems = useRef(items);\n  useEffect(() => {\n    latestItems.current = items;\n  });\n  // the useEffect above avoids the next one to run every time the items change\n  useEffect(() => {\n    // switch the taskList page to always show the selected task.\n    // Only do it if there is only one task selected\n    if (selected.length === 1) {\n      const newPage =\n        (latestItems.current.findIndex((task) => task.properties.taskId === selected[0]) + 1) /\n        pageSize;\n      if (newPage) setPage(Math.ceil(newPage));\n    }\n  }, [selected, latestItems, setPage, pageSize]);\n\n  return (\n    <>\n      <div>\n        {(!items || !items.length) && (\n          <div className=\"tc mt5 mb3\">\n            <FormattedMessage {...messages.noTasksFound} />\n          </div>\n        )}\n        {items.slice(pageSize * ((page || 1) - 1), pageSize * (page || 1)).map((item) => (\n          <ItemComponent\n            key={item.properties.taskId}\n            data={item.properties}\n            project={project}\n            selectTask={selectTask}\n            selected={selected}\n            setZoomedTaskId={setZoomedTaskId}\n            tasks={tasks}\n            updateActivities={updateActivities}\n            userCanValidate={userCanValidate}\n          />\n        ))}\n      </div>\n      <div className=\"fr\">\n        <PaginatorLine\n          activePage={page || 1}\n          setPageFn={setPage}\n          lastPage={lastPage}\n          className=\"flex items-center pt2\"\n        />\n      </div>\n    </>\n  );\n}\n","// https://github.com/yjose/reactjs-popup/issues/174\nimport { useEffect, useState } from 'react';\n\n/**\n * This hook is a workaround for an issue in reactjs-popup\n *\n * What this hook does is:\n *\n * - on mouse down inside the popup, set closeOnDocumentClick to false\n * - on mouse up, set closeOnDocumentClick to true\n *\n * Usage:\n *\n *    const closeOnDocumentClick = useCloseOnDocumentClick()\n *\n *    return (\n *      <Popup ... closeOnDocumentClick={closeOnDocumentClick} >\n *        ...\n *      </Popup>\n *    )\n */\nexport default function useCloseOnDocumentClick() {\n  const [closeOnDocumentClick, setCloseOnDocumentClick] = useState(true);\n\n  useEffect(() => {\n    function insidePopupContents(target: any): boolean {\n      return target.querySelector('.popup-content') == null;\n    }\n\n    function handleMouseDown(event: MouseEvent) {\n      if (insidePopupContents(event.target)) {\n        setCloseOnDocumentClick(false);\n      }\n    }\n\n    function handleMouseUp() {\n      setTimeout(() => setCloseOnDocumentClick(true));\n    }\n\n    window.document.addEventListener('mousedown', handleMouseDown);\n    window.document.addEventListener('mouseup', handleMouseUp);\n\n    return () => {\n      window.document.removeEventListener('mousedown', handleMouseDown);\n      window.document.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, [setCloseOnDocumentClick]);\n\n  return closeOnDocumentClick;\n}\n","import React from 'react';\n\nimport { PaginatorLine } from '../paginator';\n\nexport const ProjectCardPaginator = ({ status, pagination, fullProjectsQuery, setQueryParam }) => {\n  const apiIsFetched = status === 'success';\n  const changeToPage = (value) => {\n    apiIsFetched &&\n      setQueryParam(\n        {\n          ...fullProjectsQuery,\n          page: value,\n        },\n        'pushIn',\n      );\n  };\n\n  // do not show pagination when the data is being fetched or it has zero results\n  if (!apiIsFetched || !pagination?.total) {\n    return null;\n  }\n  const activePage = (apiIsFetched && pagination?.page) || 1;\n  const maxPage = (apiIsFetched && pagination?.pages) || 1;\n\n  /* TODO(tdk): redo this logic once we figure out what happens with ...*/\n  return (\n    <PaginatorLine\n      activePage={activePage}\n      setPageFn={changeToPage}\n      lastPage={maxPage}\n      className=\"flex items-center justify-center pa4\"\n    />\n  );\n};\n","import { useState, useCallback } from 'react';\n\n/* inspired by https://github.com/CharlesStover/use-force-update */\nexport const useForceUpdate = () => {\n  const [forced, dispatch] = useState(Object.create(null));\n\n  /* Turn dispatch(required_parameter) into dispatch(). */\n  const memoizedDispatch = useCallback(() => {\n    dispatch(Object.create(null));\n  }, [dispatch]);\n  return [forced, memoizedDispatch];\n};\n\nexport default useForceUpdate;\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('react')) :\n  typeof define === 'function' && define.amd ? define(['react'], factory) :\n  (global = global || self, global.CalendarHeatmap = factory(global.React));\n}(this, (function (React) { 'use strict';\n\n  React = React && React.hasOwnProperty('default') ? React['default'] : React;\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _extends() {\n    _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n\n      return target;\n    };\n\n    return _extends.apply(this, arguments);\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _slicedToArray(arr, i) {\n    return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n  }\n\n  function _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) return arr;\n  }\n\n  function _iterableToArrayLimit(arr, i) {\n    if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n      return;\n    }\n\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  function _nonIterableRest() {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n  }\n\n  function createCommonjsModule(fn, module) {\n  \treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n  }\n\n  /**\n   * Copyright (c) 2013-present, Facebook, Inc.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   */\n\n  var ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\n  var ReactPropTypesSecret_1 = ReactPropTypesSecret;\n\n  function emptyFunction() {}\n  function emptyFunctionWithReset() {}\n  emptyFunctionWithReset.resetWarningCache = emptyFunction;\n\n  var factoryWithThrowingShims = function() {\n    function shim(props, propName, componentName, location, propFullName, secret) {\n      if (secret === ReactPropTypesSecret_1) {\n        // It is still safe when called from React.\n        return;\n      }\n      var err = new Error(\n        'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n        'Use PropTypes.checkPropTypes() to call them. ' +\n        'Read more at http://fb.me/use-check-prop-types'\n      );\n      err.name = 'Invariant Violation';\n      throw err;\n    }  shim.isRequired = shim;\n    function getShim() {\n      return shim;\n    }  // Important!\n    // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n    var ReactPropTypes = {\n      array: shim,\n      bool: shim,\n      func: shim,\n      number: shim,\n      object: shim,\n      string: shim,\n      symbol: shim,\n\n      any: shim,\n      arrayOf: getShim,\n      element: shim,\n      elementType: shim,\n      instanceOf: getShim,\n      node: shim,\n      objectOf: getShim,\n      oneOf: getShim,\n      oneOfType: getShim,\n      shape: getShim,\n      exact: getShim,\n\n      checkPropTypes: emptyFunctionWithReset,\n      resetWarningCache: emptyFunction\n    };\n\n    ReactPropTypes.PropTypes = ReactPropTypes;\n\n    return ReactPropTypes;\n  };\n\n  var propTypes = createCommonjsModule(function (module) {\n  /**\n   * Copyright (c) 2013-present, Facebook, Inc.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   */\n\n  {\n    // By explicitly using `prop-types` you are opting into new production behavior.\n    // http://fb.me/prop-types-in-prod\n    module.exports = factoryWithThrowingShims();\n  }\n  });\n\n  function areInputsEqual(newInputs, lastInputs) {\n      if (newInputs.length !== lastInputs.length) {\n          return false;\n      }\n      for (var i = 0; i < newInputs.length; i++) {\n          if (newInputs[i] !== lastInputs[i]) {\n              return false;\n          }\n      }\n      return true;\n  }\n\n  function memoizeOne(resultFn, isEqual) {\n      if (isEqual === void 0) { isEqual = areInputsEqual; }\n      var lastThis;\n      var lastArgs = [];\n      var lastResult;\n      var calledOnce = false;\n      function memoized() {\n          var newArgs = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n              newArgs[_i] = arguments[_i];\n          }\n          if (calledOnce && lastThis === this && isEqual(newArgs, lastArgs)) {\n              return lastResult;\n          }\n          lastResult = resultFn.apply(this, newArgs);\n          calledOnce = true;\n          lastThis = this;\n          lastArgs = newArgs;\n          return lastResult;\n      }\n      return memoized;\n  }\n\n  var MILLISECONDS_IN_ONE_DAY = 24 * 60 * 60 * 1000;\n  var DAYS_IN_WEEK = 7;\n  var MONTH_LABELS = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n  var DAY_LABELS = ['', 'Mon', '', 'Wed', '', 'Fri', ''];\n\n  // returns a new date shifted a certain number of days (can be negative)\n  function shiftDate(date, numDays) {\n    var newDate = new Date(date);\n    newDate.setDate(newDate.getDate() + numDays);\n    return newDate;\n  }\n  function getBeginningTimeForDate(date) {\n    return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n  } // obj can be a parseable string, a millisecond timestamp, or a Date object\n\n  function convertToDate(obj) {\n    return obj instanceof Date ? obj : new Date(obj);\n  }\n  function dateNDaysAgo(numDaysAgo) {\n    return shiftDate(new Date(), -numDaysAgo);\n  }\n  function getRange(count) {\n    var arr = [];\n\n    for (var idx = 0; idx < count; idx += 1) {\n      arr.push(idx);\n    }\n\n    return arr;\n  }\n\n  var SQUARE_SIZE = 10;\n  var MONTH_LABEL_GUTTER_SIZE = 4;\n  var CSS_PSEDUO_NAMESPACE = 'react-calendar-heatmap-';\n\n  var CalendarHeatmap =\n  /*#__PURE__*/\n  function (_React$Component) {\n    _inherits(CalendarHeatmap, _React$Component);\n\n    function CalendarHeatmap() {\n      var _getPrototypeOf2;\n\n      var _this;\n\n      _classCallCheck(this, CalendarHeatmap);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CalendarHeatmap)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n      _defineProperty(_assertThisInitialized(_this), \"getValueCache\", memoizeOne(function (props) {\n        return props.values.reduce(function (memo, value) {\n          var date = convertToDate(value.date);\n          var index = Math.floor((date - _this.getStartDateWithEmptyDays()) / MILLISECONDS_IN_ONE_DAY); // eslint-disable-next-line no-param-reassign\n\n          memo[index] = {\n            value: value,\n            className: _this.props.classForValue(value),\n            title: _this.props.titleForValue ? _this.props.titleForValue(value) : null,\n            tooltipDataAttrs: _this.getTooltipDataAttrsForValue(value)\n          };\n          return memo;\n        }, {});\n      }));\n\n      return _this;\n    }\n\n    _createClass(CalendarHeatmap, [{\n      key: \"getDateDifferenceInDays\",\n      value: function getDateDifferenceInDays() {\n        var _this$props = this.props,\n            startDate = _this$props.startDate,\n            numDays = _this$props.numDays;\n\n        if (numDays) {\n          // eslint-disable-next-line no-console\n          console.warn('numDays is a deprecated prop. It will be removed in the next release. Consider using the startDate prop instead.');\n          return numDays;\n        }\n\n        var timeDiff = this.getEndDate() - convertToDate(startDate);\n        return Math.ceil(timeDiff / MILLISECONDS_IN_ONE_DAY);\n      }\n    }, {\n      key: \"getSquareSizeWithGutter\",\n      value: function getSquareSizeWithGutter() {\n        return SQUARE_SIZE + this.props.gutterSize;\n      }\n    }, {\n      key: \"getMonthLabelSize\",\n      value: function getMonthLabelSize() {\n        if (!this.props.showMonthLabels) {\n          return 0;\n        }\n\n        if (this.props.horizontal) {\n          return SQUARE_SIZE + MONTH_LABEL_GUTTER_SIZE;\n        }\n\n        return 2 * (SQUARE_SIZE + MONTH_LABEL_GUTTER_SIZE);\n      }\n    }, {\n      key: \"getWeekdayLabelSize\",\n      value: function getWeekdayLabelSize() {\n        if (!this.props.showWeekdayLabels) {\n          return 0;\n        }\n\n        if (this.props.horizontal) {\n          return 30;\n        }\n\n        return SQUARE_SIZE * 1.5;\n      }\n    }, {\n      key: \"getStartDate\",\n      value: function getStartDate() {\n        return shiftDate(this.getEndDate(), -this.getDateDifferenceInDays() + 1); // +1 because endDate is inclusive\n      }\n    }, {\n      key: \"getEndDate\",\n      value: function getEndDate() {\n        return getBeginningTimeForDate(convertToDate(this.props.endDate));\n      }\n    }, {\n      key: \"getStartDateWithEmptyDays\",\n      value: function getStartDateWithEmptyDays() {\n        return shiftDate(this.getStartDate(), -this.getNumEmptyDaysAtStart());\n      }\n    }, {\n      key: \"getNumEmptyDaysAtStart\",\n      value: function getNumEmptyDaysAtStart() {\n        return this.getStartDate().getDay();\n      }\n    }, {\n      key: \"getNumEmptyDaysAtEnd\",\n      value: function getNumEmptyDaysAtEnd() {\n        return DAYS_IN_WEEK - 1 - this.getEndDate().getDay();\n      }\n    }, {\n      key: \"getWeekCount\",\n      value: function getWeekCount() {\n        var numDaysRoundedToWeek = this.getDateDifferenceInDays() + this.getNumEmptyDaysAtStart() + this.getNumEmptyDaysAtEnd();\n        return Math.ceil(numDaysRoundedToWeek / DAYS_IN_WEEK);\n      }\n    }, {\n      key: \"getWeekWidth\",\n      value: function getWeekWidth() {\n        return DAYS_IN_WEEK * this.getSquareSizeWithGutter();\n      }\n    }, {\n      key: \"getWidth\",\n      value: function getWidth() {\n        return this.getWeekCount() * this.getSquareSizeWithGutter() - (this.props.gutterSize - this.getWeekdayLabelSize());\n      }\n    }, {\n      key: \"getHeight\",\n      value: function getHeight() {\n        return this.getWeekWidth() + (this.getMonthLabelSize() - this.props.gutterSize) + this.getWeekdayLabelSize();\n      }\n    }, {\n      key: \"getValueForIndex\",\n      value: function getValueForIndex(index) {\n        if (this.valueCache[index]) {\n          return this.valueCache[index].value;\n        }\n\n        return null;\n      }\n    }, {\n      key: \"getClassNameForIndex\",\n      value: function getClassNameForIndex(index) {\n        if (this.valueCache[index]) {\n          return this.valueCache[index].className;\n        }\n\n        return this.props.classForValue(null);\n      }\n    }, {\n      key: \"getTitleForIndex\",\n      value: function getTitleForIndex(index) {\n        if (this.valueCache[index]) {\n          return this.valueCache[index].title;\n        }\n\n        return this.props.titleForValue ? this.props.titleForValue(null) : null;\n      }\n    }, {\n      key: \"getTooltipDataAttrsForIndex\",\n      value: function getTooltipDataAttrsForIndex(index) {\n        if (this.valueCache[index]) {\n          return this.valueCache[index].tooltipDataAttrs;\n        }\n\n        return this.getTooltipDataAttrsForValue({\n          date: null,\n          count: null\n        });\n      }\n    }, {\n      key: \"getTooltipDataAttrsForValue\",\n      value: function getTooltipDataAttrsForValue(value) {\n        var tooltipDataAttrs = this.props.tooltipDataAttrs;\n\n        if (typeof tooltipDataAttrs === 'function') {\n          return tooltipDataAttrs(value);\n        }\n\n        return tooltipDataAttrs;\n      }\n    }, {\n      key: \"getTransformForWeek\",\n      value: function getTransformForWeek(weekIndex) {\n        if (this.props.horizontal) {\n          return \"translate(\".concat(weekIndex * this.getSquareSizeWithGutter(), \", 0)\");\n        }\n\n        return \"translate(0, \".concat(weekIndex * this.getSquareSizeWithGutter(), \")\");\n      }\n    }, {\n      key: \"getTransformForWeekdayLabels\",\n      value: function getTransformForWeekdayLabels() {\n        if (this.props.horizontal) {\n          return \"translate(\".concat(SQUARE_SIZE, \", \").concat(this.getMonthLabelSize(), \")\");\n        }\n\n        return null;\n      }\n    }, {\n      key: \"getTransformForMonthLabels\",\n      value: function getTransformForMonthLabels() {\n        if (this.props.horizontal) {\n          return \"translate(\".concat(this.getWeekdayLabelSize(), \", 0)\");\n        }\n\n        return \"translate(\".concat(this.getWeekWidth() + MONTH_LABEL_GUTTER_SIZE, \", \").concat(this.getWeekdayLabelSize(), \")\");\n      }\n    }, {\n      key: \"getTransformForAllWeeks\",\n      value: function getTransformForAllWeeks() {\n        if (this.props.horizontal) {\n          return \"translate(\".concat(this.getWeekdayLabelSize(), \", \").concat(this.getMonthLabelSize(), \")\");\n        }\n\n        return \"translate(0, \".concat(this.getWeekdayLabelSize(), \")\");\n      }\n    }, {\n      key: \"getViewBox\",\n      value: function getViewBox() {\n        if (this.props.horizontal) {\n          return \"0 0 \".concat(this.getWidth(), \" \").concat(this.getHeight());\n        }\n\n        return \"0 0 \".concat(this.getHeight(), \" \").concat(this.getWidth());\n      }\n    }, {\n      key: \"getSquareCoordinates\",\n      value: function getSquareCoordinates(dayIndex) {\n        if (this.props.horizontal) {\n          return [0, dayIndex * this.getSquareSizeWithGutter()];\n        }\n\n        return [dayIndex * this.getSquareSizeWithGutter(), 0];\n      }\n    }, {\n      key: \"getWeekdayLabelCoordinates\",\n      value: function getWeekdayLabelCoordinates(dayIndex) {\n        if (this.props.horizontal) {\n          return [0, (dayIndex + 1) * SQUARE_SIZE + dayIndex * this.props.gutterSize];\n        }\n\n        return [dayIndex * SQUARE_SIZE + dayIndex * this.props.gutterSize, SQUARE_SIZE];\n      }\n    }, {\n      key: \"getMonthLabelCoordinates\",\n      value: function getMonthLabelCoordinates(weekIndex) {\n        if (this.props.horizontal) {\n          return [weekIndex * this.getSquareSizeWithGutter(), this.getMonthLabelSize() - MONTH_LABEL_GUTTER_SIZE];\n        }\n\n        var verticalOffset = -2;\n        return [0, (weekIndex + 1) * this.getSquareSizeWithGutter() + verticalOffset];\n      }\n    }, {\n      key: \"handleClick\",\n      value: function handleClick(value) {\n        if (this.props.onClick) {\n          this.props.onClick(value);\n        }\n      }\n    }, {\n      key: \"handleMouseOver\",\n      value: function handleMouseOver(e, value) {\n        if (this.props.onMouseOver) {\n          this.props.onMouseOver(e, value);\n        }\n      }\n    }, {\n      key: \"handleMouseLeave\",\n      value: function handleMouseLeave(e, value) {\n        if (this.props.onMouseLeave) {\n          this.props.onMouseLeave(e, value);\n        }\n      }\n    }, {\n      key: \"renderSquare\",\n      value: function renderSquare(dayIndex, index) {\n        var _this2 = this;\n\n        var indexOutOfRange = index < this.getNumEmptyDaysAtStart() || index >= this.getNumEmptyDaysAtStart() + this.getDateDifferenceInDays();\n\n        if (indexOutOfRange && !this.props.showOutOfRangeDays) {\n          return null;\n        }\n\n        var _this$getSquareCoordi = this.getSquareCoordinates(dayIndex),\n            _this$getSquareCoordi2 = _slicedToArray(_this$getSquareCoordi, 2),\n            x = _this$getSquareCoordi2[0],\n            y = _this$getSquareCoordi2[1];\n\n        var value = this.getValueForIndex(index);\n        var rect = // eslint-disable-next-line jsx-a11y/mouse-events-have-key-events\n        React.createElement(\"rect\", _extends({\n          key: index,\n          width: SQUARE_SIZE,\n          height: SQUARE_SIZE,\n          x: x,\n          y: y,\n          className: this.getClassNameForIndex(index),\n          onClick: function onClick() {\n            return _this2.handleClick(value);\n          },\n          onMouseOver: function onMouseOver(e) {\n            return _this2.handleMouseOver(e, value);\n          },\n          onMouseLeave: function onMouseLeave(e) {\n            return _this2.handleMouseLeave(e, value);\n          }\n        }, this.getTooltipDataAttrsForIndex(index)), React.createElement(\"title\", null, this.getTitleForIndex(index)));\n        var transformDayElement = this.props.transformDayElement;\n        return transformDayElement ? transformDayElement(rect, value, index) : rect;\n      }\n    }, {\n      key: \"renderWeek\",\n      value: function renderWeek(weekIndex) {\n        var _this3 = this;\n\n        return React.createElement(\"g\", {\n          key: weekIndex,\n          transform: this.getTransformForWeek(weekIndex),\n          className: \"\".concat(CSS_PSEDUO_NAMESPACE, \"week\")\n        }, getRange(DAYS_IN_WEEK).map(function (dayIndex) {\n          return _this3.renderSquare(dayIndex, weekIndex * DAYS_IN_WEEK + dayIndex);\n        }));\n      }\n    }, {\n      key: \"renderAllWeeks\",\n      value: function renderAllWeeks() {\n        var _this4 = this;\n\n        return getRange(this.getWeekCount()).map(function (weekIndex) {\n          return _this4.renderWeek(weekIndex);\n        });\n      }\n    }, {\n      key: \"renderMonthLabels\",\n      value: function renderMonthLabels() {\n        var _this5 = this;\n\n        if (!this.props.showMonthLabels) {\n          return null;\n        }\n\n        var weekRange = getRange(this.getWeekCount() - 1); // don't render for last week, because label will be cut off\n\n        return weekRange.map(function (weekIndex) {\n          var endOfWeek = shiftDate(_this5.getStartDateWithEmptyDays(), (weekIndex + 1) * DAYS_IN_WEEK);\n\n          var _this5$getMonthLabelC = _this5.getMonthLabelCoordinates(weekIndex),\n              _this5$getMonthLabelC2 = _slicedToArray(_this5$getMonthLabelC, 2),\n              x = _this5$getMonthLabelC2[0],\n              y = _this5$getMonthLabelC2[1];\n\n          return endOfWeek.getDate() >= 1 && endOfWeek.getDate() <= DAYS_IN_WEEK ? React.createElement(\"text\", {\n            key: weekIndex,\n            x: x,\n            y: y,\n            className: \"\".concat(CSS_PSEDUO_NAMESPACE, \"month-label\")\n          }, _this5.props.monthLabels[endOfWeek.getMonth()]) : null;\n        });\n      }\n    }, {\n      key: \"renderWeekdayLabels\",\n      value: function renderWeekdayLabels() {\n        var _this6 = this;\n\n        if (!this.props.showWeekdayLabels) {\n          return null;\n        }\n\n        return this.props.weekdayLabels.map(function (weekdayLabel, dayIndex) {\n          var _this6$getWeekdayLabe = _this6.getWeekdayLabelCoordinates(dayIndex),\n              _this6$getWeekdayLabe2 = _slicedToArray(_this6$getWeekdayLabe, 2),\n              x = _this6$getWeekdayLabe2[0],\n              y = _this6$getWeekdayLabe2[1];\n\n          var cssClasses = \"\".concat(_this6.props.horizontal ? '' : \"\".concat(CSS_PSEDUO_NAMESPACE, \"small-text\"), \" \").concat(CSS_PSEDUO_NAMESPACE, \"weekday-label\"); // eslint-disable-next-line no-bitwise\n\n          return dayIndex & 1 ? React.createElement(\"text\", {\n            key: \"\".concat(x).concat(y),\n            x: x,\n            y: y,\n            className: cssClasses\n          }, weekdayLabel) : null;\n        });\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        this.valueCache = this.getValueCache(this.props);\n        return React.createElement(\"svg\", {\n          className: \"react-calendar-heatmap\",\n          viewBox: this.getViewBox()\n        }, React.createElement(\"g\", {\n          transform: this.getTransformForMonthLabels(),\n          className: \"\".concat(CSS_PSEDUO_NAMESPACE, \"month-labels\")\n        }, this.renderMonthLabels()), React.createElement(\"g\", {\n          transform: this.getTransformForAllWeeks(),\n          className: \"\".concat(CSS_PSEDUO_NAMESPACE, \"all-weeks\")\n        }, this.renderAllWeeks()), React.createElement(\"g\", {\n          transform: this.getTransformForWeekdayLabels(),\n          className: \"\".concat(CSS_PSEDUO_NAMESPACE, \"weekday-labels\")\n        }, this.renderWeekdayLabels()));\n      }\n    }]);\n\n    return CalendarHeatmap;\n  }(React.Component);\n\n  CalendarHeatmap.propTypes = {\n    values: propTypes.arrayOf(propTypes.shape({\n      date: propTypes.oneOfType([propTypes.string, propTypes.number, propTypes.instanceOf(Date)]).isRequired\n    }).isRequired).isRequired,\n    // array of objects with date and arbitrary metadata\n    numDays: propTypes.number,\n    // number of days back from endDate to show\n    startDate: propTypes.oneOfType([propTypes.string, propTypes.number, propTypes.instanceOf(Date)]),\n    // start of date range\n    endDate: propTypes.oneOfType([propTypes.string, propTypes.number, propTypes.instanceOf(Date)]),\n    // end of date range\n    gutterSize: propTypes.number,\n    // size of space between squares\n    horizontal: propTypes.bool,\n    // whether to orient horizontally or vertically\n    showMonthLabels: propTypes.bool,\n    // whether to show month labels\n    showWeekdayLabels: propTypes.bool,\n    // whether to show weekday labels\n    showOutOfRangeDays: propTypes.bool,\n    // whether to render squares for extra days in week after endDate, and before start date\n    tooltipDataAttrs: propTypes.oneOfType([propTypes.object, propTypes.func]),\n    // data attributes to add to square for setting 3rd party tooltips, e.g. { 'data-toggle': 'tooltip' } for bootstrap tooltips\n    titleForValue: propTypes.func,\n    // function which returns title text for value\n    classForValue: propTypes.func,\n    // function which returns html class for value\n    monthLabels: propTypes.arrayOf(propTypes.string),\n    // An array with 12 strings representing the text from janurary to december\n    weekdayLabels: propTypes.arrayOf(propTypes.string),\n    // An array with 7 strings representing the text from Sun to Sat\n    onClick: propTypes.func,\n    // callback function when a square is clicked\n    onMouseOver: propTypes.func,\n    // callback function when mouse pointer is over a square\n    onMouseLeave: propTypes.func,\n    // callback function when mouse pointer is left a square\n    transformDayElement: propTypes.func // function to further transform the svg element for a single day\n\n  };\n  CalendarHeatmap.defaultProps = {\n    numDays: null,\n    startDate: dateNDaysAgo(200),\n    endDate: new Date(),\n    gutterSize: 1,\n    horizontal: true,\n    showMonthLabels: true,\n    showWeekdayLabels: false,\n    showOutOfRangeDays: false,\n    tooltipDataAttrs: null,\n    titleForValue: null,\n    classForValue: function classForValue(value) {\n      return value ? 'color-filled' : 'color-empty';\n    },\n    monthLabels: MONTH_LABELS,\n    weekdayLabels: DAY_LABELS,\n    onClick: null,\n    onMouseOver: null,\n    onMouseLeave: null,\n    transformDayElement: null\n  };\n\n  return CalendarHeatmap;\n\n})));\n","import { getDefaultState } from './mutation'\nimport { notifyManager } from './notifyManager'\nimport { Subscribable } from './subscribable'\nimport { shallowEqualObjects } from './utils'\nimport type { QueryClient } from './queryClient'\nimport type {\n  MutateOptions,\n  MutationObserverBaseResult,\n  MutationObserverOptions,\n  MutationObserverResult,\n} from './types'\nimport type { Action, Mutation } from './mutation'\n\n// TYPES\n\ntype MutationObserverListener<TData, TError, TVariables, TContext> = (\n  result: MutationObserverResult<TData, TError, TVariables, TContext>,\n) => void\n\ninterface NotifyOptions {\n  listeners?: boolean\n  onError?: boolean\n  onSuccess?: boolean\n}\n\n// CLASS\n\nexport class MutationObserver<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown,\n> extends Subscribable<\n  MutationObserverListener<TData, TError, TVariables, TContext>\n> {\n  options!: MutationObserverOptions<TData, TError, TVariables, TContext>\n\n  private client: QueryClient\n  private currentResult!: MutationObserverResult<\n    TData,\n    TError,\n    TVariables,\n    TContext\n  >\n  private currentMutation?: Mutation<TData, TError, TVariables, TContext>\n  private mutateOptions?: MutateOptions<TData, TError, TVariables, TContext>\n\n  constructor(\n    client: QueryClient,\n    options: MutationObserverOptions<TData, TError, TVariables, TContext>,\n  ) {\n    super()\n\n    this.client = client\n    this.setOptions(options)\n    this.bindMethods()\n    this.updateResult()\n  }\n\n  protected bindMethods(): void {\n    this.mutate = this.mutate.bind(this)\n    this.reset = this.reset.bind(this)\n  }\n\n  setOptions(\n    options?: MutationObserverOptions<TData, TError, TVariables, TContext>,\n  ) {\n    const prevOptions = this.options\n    this.options = this.client.defaultMutationOptions(options)\n    if (!shallowEqualObjects(prevOptions, this.options)) {\n      this.client.getMutationCache().notify({\n        type: 'observerOptionsUpdated',\n        mutation: this.currentMutation,\n        observer: this,\n      })\n    }\n    this.currentMutation?.setOptions(this.options)\n  }\n\n  protected onUnsubscribe(): void {\n    if (!this.hasListeners()) {\n      this.currentMutation?.removeObserver(this)\n    }\n  }\n\n  onMutationUpdate(action: Action<TData, TError, TVariables, TContext>): void {\n    this.updateResult()\n\n    // Determine which callbacks to trigger\n    const notifyOptions: NotifyOptions = {\n      listeners: true,\n    }\n\n    if (action.type === 'success') {\n      notifyOptions.onSuccess = true\n    } else if (action.type === 'error') {\n      notifyOptions.onError = true\n    }\n\n    this.notify(notifyOptions)\n  }\n\n  getCurrentResult(): MutationObserverResult<\n    TData,\n    TError,\n    TVariables,\n    TContext\n  > {\n    return this.currentResult\n  }\n\n  reset(): void {\n    this.currentMutation = undefined\n    this.updateResult()\n    this.notify({ listeners: true })\n  }\n\n  mutate(\n    variables?: TVariables,\n    options?: MutateOptions<TData, TError, TVariables, TContext>,\n  ): Promise<TData> {\n    this.mutateOptions = options\n\n    if (this.currentMutation) {\n      this.currentMutation.removeObserver(this)\n    }\n\n    this.currentMutation = this.client.getMutationCache().build(this.client, {\n      ...this.options,\n      variables:\n        typeof variables !== 'undefined' ? variables : this.options.variables,\n    })\n\n    this.currentMutation.addObserver(this)\n\n    return this.currentMutation.execute()\n  }\n\n  private updateResult(): void {\n    const state = this.currentMutation\n      ? this.currentMutation.state\n      : getDefaultState<TData, TError, TVariables, TContext>()\n\n    const result: MutationObserverBaseResult<\n      TData,\n      TError,\n      TVariables,\n      TContext\n    > = {\n      ...state,\n      isLoading: state.status === 'loading',\n      isSuccess: state.status === 'success',\n      isError: state.status === 'error',\n      isIdle: state.status === 'idle',\n      mutate: this.mutate,\n      reset: this.reset,\n    }\n\n    this.currentResult = result as MutationObserverResult<\n      TData,\n      TError,\n      TVariables,\n      TContext\n    >\n  }\n\n  private notify(options: NotifyOptions) {\n    notifyManager.batch(() => {\n      // First trigger the mutate callbacks\n      if (this.mutateOptions && this.hasListeners()) {\n        if (options.onSuccess) {\n          this.mutateOptions.onSuccess?.(\n            this.currentResult.data!,\n            this.currentResult.variables!,\n            this.currentResult.context!,\n          )\n          this.mutateOptions.onSettled?.(\n            this.currentResult.data!,\n            null,\n            this.currentResult.variables!,\n            this.currentResult.context,\n          )\n        } else if (options.onError) {\n          this.mutateOptions.onError?.(\n            this.currentResult.error!,\n            this.currentResult.variables!,\n            this.currentResult.context,\n          )\n          this.mutateOptions.onSettled?.(\n            undefined,\n            this.currentResult.error,\n            this.currentResult.variables!,\n            this.currentResult.context,\n          )\n        }\n      }\n\n      // Then trigger the listeners\n      if (options.listeners) {\n        this.listeners.forEach(({ listener }) => {\n          listener(this.currentResult)\n        })\n      }\n    })\n  }\n}\n","'use client'\nimport * as React from 'react'\nimport {\n  MutationObserver,\n  notifyManager,\n  parseMutationArgs,\n} from '@tanstack/query-core'\nimport { useSyncExternalStore } from './useSyncExternalStore'\n\nimport { useQueryClient } from './QueryClientProvider'\nimport { shouldThrowError } from './utils'\nimport type { MutationFunction, MutationKey } from '@tanstack/query-core'\nimport type {\n  UseMutateFunction,\n  UseMutationOptions,\n  UseMutationResult,\n} from './types'\n\n// HOOK\n\nexport function useMutation<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown,\n>(\n  options: UseMutationOptions<TData, TError, TVariables, TContext>,\n): UseMutationResult<TData, TError, TVariables, TContext>\nexport function useMutation<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown,\n>(\n  mutationFn: MutationFunction<TData, TVariables>,\n  options?: Omit<\n    UseMutationOptions<TData, TError, TVariables, TContext>,\n    'mutationFn'\n  >,\n): UseMutationResult<TData, TError, TVariables, TContext>\nexport function useMutation<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown,\n>(\n  mutationKey: MutationKey,\n  options?: Omit<\n    UseMutationOptions<TData, TError, TVariables, TContext>,\n    'mutationKey'\n  >,\n): UseMutationResult<TData, TError, TVariables, TContext>\nexport function useMutation<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown,\n>(\n  mutationKey: MutationKey,\n  mutationFn?: MutationFunction<TData, TVariables>,\n  options?: Omit<\n    UseMutationOptions<TData, TError, TVariables, TContext>,\n    'mutationKey' | 'mutationFn'\n  >,\n): UseMutationResult<TData, TError, TVariables, TContext>\nexport function useMutation<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown,\n>(\n  arg1:\n    | MutationKey\n    | MutationFunction<TData, TVariables>\n    | UseMutationOptions<TData, TError, TVariables, TContext>,\n  arg2?:\n    | MutationFunction<TData, TVariables>\n    | UseMutationOptions<TData, TError, TVariables, TContext>,\n  arg3?: UseMutationOptions<TData, TError, TVariables, TContext>,\n): UseMutationResult<TData, TError, TVariables, TContext> {\n  const options = parseMutationArgs(arg1, arg2, arg3)\n  const queryClient = useQueryClient({ context: options.context })\n\n  const [observer] = React.useState(\n    () =>\n      new MutationObserver<TData, TError, TVariables, TContext>(\n        queryClient,\n        options,\n      ),\n  )\n\n  React.useEffect(() => {\n    observer.setOptions(options)\n  }, [observer, options])\n\n  const result = useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) =>\n        observer.subscribe(notifyManager.batchCalls(onStoreChange)),\n      [observer],\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult(),\n  )\n\n  const mutate = React.useCallback<\n    UseMutateFunction<TData, TError, TVariables, TContext>\n  >(\n    (variables, mutateOptions) => {\n      observer.mutate(variables, mutateOptions).catch(noop)\n    },\n    [observer],\n  )\n\n  if (\n    result.error &&\n    shouldThrowError(observer.options.useErrorBoundary, [result.error])\n  ) {\n    throw result.error\n  }\n\n  return { ...result, mutate, mutateAsync: result.mutate }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nfunction noop() {}\n","import React, { useLayoutEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\nimport mapboxgl from 'mapbox-gl';\nimport MapboxLanguage from '@mapbox/mapbox-gl-language';\nimport { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\nimport { MAPBOX_TOKEN, MAP_STYLE, MAPBOX_RTL_PLUGIN_URL } from '../../config';\nimport { mapboxLayerDefn } from '../projects/projectsMap';\nimport { BarListChart } from './barListChart';\nimport WebglUnsupported from '../webglUnsupported';\n\nmapboxgl.accessToken = MAPBOX_TOKEN;\ntry {\n  mapboxgl.setRTLTextPlugin(MAPBOX_RTL_PLUGIN_URL);\n} catch {\n  console.log('RTLTextPlugin is loaded');\n}\n\nconst UserCountriesMap = ({ projects }) => {\n  const navigate = useNavigate();\n  const locale = useSelector((state) => state.preferences['locale']);\n\n  const [map, setMap] = useState(null);\n  const mapRef = React.createRef();\n\n  useLayoutEffect(() => {\n    mapboxgl.supported() &&\n      setMap(\n        new mapboxgl.Map({\n          container: mapRef.current,\n          style: MAP_STYLE,\n          center: [0, 0],\n          zoom: 0.5,\n          attributionControl: false,\n        })\n          .addControl(new mapboxgl.AttributionControl({ compact: false }))\n          .addControl(new MapboxLanguage({ defaultLanguage: locale.substr(0, 2) || 'en' })),\n      );\n\n    return () => {\n      map && map.remove();\n    };\n    // eslint-disable-next-line\n  }, []);\n\n  useLayoutEffect(() => {\n    if (map && projects.mappedProjects) {\n      const geojson = {\n        type: 'FeatureCollection',\n        features: projects.mappedProjects.map((f) => {\n          return { type: 'Feature', geometry: f.centroid, properties: { projectId: f.projectId } };\n        }),\n      };\n      map.resize(); //https://docs.mapbox.com/help/troubleshooting/blank-tiles/\n      map.on('load', () => mapboxLayerDefn(map, geojson, (id) => navigate(`/projects/${id}/`)));\n    }\n  }, [map, navigate, projects.mappedProjects]);\n\n  if (!mapboxgl.supported()) {\n    return <WebglUnsupported className=\"w-two-thirds-l w-100 h-100 fl\" />;\n  } else {\n    return <div id=\"map\" className=\"w-two-thirds-l w-100 h-100 fl\" ref={mapRef}></div>;\n  }\n};\n\nexport const CountriesMapped = ({ projects, userStats }) => {\n  const countries = userStats.countriesContributed.countries.slice(0, 5);\n  const tasksNo = countries.map((c) => c.total);\n  const maxTaskNo = Math.max(...tasksNo);\n\n  const countriesPercent = countries.map((c) => {\n    return { ...c, percent: c.total / maxTaskNo };\n  });\n\n  return (\n    <div className=\"bg-white blue-dark shadow-4 w-100 cf\" style={{ height: '23rem' }}>\n      <div className=\"w-third-l w-100 fl pt2 ph3\">\n        <h3 className=\"f4 mt0 fw6 pt3\">\n          <FormattedMessage {...messages.topCountriesTitle} />\n        </h3>\n        {countriesPercent.length > 0 ? (\n          <BarListChart\n            data={countriesPercent}\n            valueField={'total'}\n            nameField={'name'}\n            linkBase={'/explore/?location='}\n            linkField={'name'}\n          />\n        ) : (\n          <div className=\"h-100 tc pv5 blue-grey\">\n            <FormattedMessage {...messages.noProjectsData} />\n          </div>\n        )}\n      </div>\n      <UserCountriesMap projects={projects} />\n    </div>\n  );\n};\n","import React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\nimport { BarListChart } from './barListChart';\n\nexport const TopProjects = ({ projects }) => {\n  const compare = (a, b) => {\n    if (a.total < b.total) {\n      return 1;\n    }\n    if (a.total > b.total) {\n      return -1;\n    }\n    return 0;\n  };\n\n  const data = projects.mappedProjects\n    .map((p) => {\n      return {\n        id: p.projectId,\n        name: p.name,\n        mapped: p.tasksMapped,\n        validated: p.tasksValidated,\n        total: p.tasksMapped + p.tasksValidated,\n      };\n    })\n    .sort(compare)\n    .slice(0, 5);\n\n  const tasksNo = data.map((d) => d.total);\n  const maxTaskNo = Math.max(...tasksNo);\n\n  const tasksPercent = data.map((d) => {\n    return { ...d, percent: d.total / maxTaskNo };\n  });\n\n  return (\n    <div className=\"pv2 ph3 bg-white blue-dark shadow-6 h-100\">\n      <div className=\"ml2 mt1 mb4\">\n        <h3 className=\"f125 mv0 fw6 pt3\">\n          <FormattedMessage {...messages.topProjectsMappedTitle} />\n        </h3>\n        {data.length > 0 ? (\n          <BarListChart\n            data={tasksPercent}\n            valueField={'total'}\n            nameField={'name'}\n            linkBase={'/projects/'}\n            linkField={'id'}\n          />\n        ) : (\n          <div className=\"h-100 tc pv5 mt3 blue-grey\">\n            <FormattedMessage {...messages.noTopProjectsData} />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport CalendarHeatmap from 'react-calendar-heatmap';\nimport ReactTooltip from 'react-tooltip';\nimport { FormattedMessage, useIntl } from 'react-intl';\n\nimport messages from './messages';\n\nconst HeatmapLegend = () => {\n  const indexes = [30, 50, 70, 100];\n  const legendFontStyle = 'ph2 f7 blue-grey ttc';\n\n  return (\n    <div className=\"nt4-ns w-100 tr fr flex items-center justify-end\">\n      <span className={legendFontStyle}>\n        <FormattedMessage {...messages.heatmapLegendLess} />\n      </span>\n      <div className={`dib h1 w1 bg-tan`}></div>\n      {indexes.map((i) => (\n        <div key={i} className={`dib h1 w1 bg-red o-${i}`}></div>\n      ))}\n      <span className={legendFontStyle}>\n        <FormattedMessage {...messages.heatmapLegendMore} />\n      </span>\n    </div>\n  );\n};\n\nexport const ContributionTimeline = ({ userStats }) => {\n  const intl = useIntl();\n  const today = new Date();\n\n  const shiftDate = (date, numDays) => {\n    const newDate = new Date(date);\n    newDate.setDate(newDate.getDate() + numDays);\n    return newDate;\n  };\n\n  const countValues = userStats.contributionsByDay.map((r) => r.count);\n  const maxValue = Math.max(...countValues);\n\n  const getHeatmapClass = (v) => {\n    const rate = v.count / maxValue;\n\n    if (0.0 <= rate && rate < 0.25) {\n      return 'fill-red o-30';\n    }\n\n    if (0.25 <= rate && rate < 0.5) {\n      return 'fill-red o-50';\n    }\n\n    if (0.5 <= rate && rate < 0.75) {\n      return 'fill-red o-70';\n    }\n\n    if (0.75 <= rate && rate <= 1) {\n      return 'fill-red o-100';\n    }\n  };\n\n  return (\n    <div className=\"w-100 cf bg-white pv3 pr3 shadow-6\">\n      <div className=\"w-100 fl cf center\">\n        <CalendarHeatmap\n          startDate={shiftDate(today, -365)}\n          endDate={today}\n          values={userStats.contributionsByDay}\n          classForValue={(value) => {\n            if (!value) return 'fill-tan';\n            return getHeatmapClass(value);\n          }}\n          showWeekdayLabels={true}\n          tooltipDataAttrs={(value) => {\n            let val = intl.formatMessage(messages.heatmapNoContribution);\n            if (value.count !== null) {\n              val = `${value.count} ${\n                value.count > 1\n                  ? intl.formatMessage(messages.heatmapContributions)\n                  : intl.formatMessage(messages.heatmapContribution)\n              }`;\n            }\n\n            return {\n              'data-tip': val,\n            };\n          }}\n        />\n        <ReactTooltip />\n      </div>\n      <HeatmapLegend />\n    </div>\n  );\n};\n","import React, { useEffect, useState, Suspense } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { FormattedMessage } from 'react-intl';\nimport ReactPlaceholder from 'react-placeholder';\n\nimport messages from '../components/userDetail/messages';\nimport { HeaderProfile } from '../components/userDetail/headerProfile';\nimport { ElementsMapped, TaskStats } from '../components/userDetail/elementsMapped';\nimport { UserTeams } from '../components/userDetail/userTeamsOrgs';\nimport { CountriesMapped } from '../components/userDetail/countriesMapped';\nimport { TopProjects } from '../components/userDetail/topProjects';\nimport { ContributionTimeline } from '../components/userDetail/contributionTimeline';\nimport { NotFound } from './notFound';\nimport { OHSOME_STATS_BASE_URL, OSM_SERVER_URL } from '../config';\nimport { fetchExternalJSONAPI } from '../network/genericJSONRequest';\nimport { useFetch } from '../hooks/UseFetch';\nimport { useSetTitleTag } from '../hooks/UseMetaTags';\n\nconst TopCauses = React.lazy(() =>\n  import('../components/userDetail/topCauses' /* webpackChunkName: \"topCauses\" */),\n);\nconst EditsByNumbers = React.lazy(() =>\n  import('../components/userDetail/editsByNumbers' /* webpackChunkName: \"editsByNumbers\" */),\n);\n\nexport const UserDetail = ({ withHeader = true }) => {\n  const navigate = useNavigate();\n  const loggedInUsername = useSelector((state) => state.auth.userDetails.username);\n  const { username: usernameParam } = useParams();\n  const username = usernameParam || loggedInUsername;\n  useSetTitleTag(username);\n  const token = useSelector((state) => state.auth.token);\n  const currentUser = useSelector((state) => state.auth.userDetails);\n  const [osmStats, setOsmStats] = useState({});\n  const [userOsmDetails, setUserOsmDetails] = useState({});\n  const [errorDetails, loadingDetails, userDetails] = useFetch(\n    `users/queries/${username}/`,\n    username !== undefined,\n  );\n  const [errorStats, loadingStats, userStats] = useFetch(\n    `users/${username}/statistics/`,\n    username !== undefined,\n  );\n  const [projectsError, projectsLoading, userProjects] = useFetch(\n    `projects/queries/${username}/touched/`,\n    username !== undefined,\n  );\n\n  useEffect(() => {\n    if (!token) {\n      navigate('/login');\n    }\n  }, [navigate, token]);\n\n  useEffect(() => {\n    if (userDetails.id) {\n      fetchExternalJSONAPI(`${OSM_SERVER_URL}/api/0.6/user/${userDetails.id}.json`, false)\n        .then((res) => setUserOsmDetails(res?.user))\n        .catch((e) => console.log(e));\n      fetchExternalJSONAPI(`${OHSOME_STATS_BASE_URL}/hot-tm-user?userId=${userDetails.id}`, true)\n        .then((res) => setOsmStats(res.result))\n        .catch((e) => console.log(e));\n    }\n  }, [userDetails.id]);\n\n  const titleClass = 'contributions-titles fw5 ttu barlow-condensed blue-dark mt0';\n\n  return errorDetails ? (\n    <NotFound />\n  ) : (\n    <div className=\"w-100\">\n      {withHeader && (\n        <div className=\"w-100 cf pb3\">\n          <ReactPlaceholder\n            type=\"media\"\n            showLoadingAnimation={true}\n            rows={5}\n            ready={!errorDetails && !loadingDetails}\n          >\n            <HeaderProfile userDetails={userDetails} changesets={userOsmDetails?.changesets?.count} />\n          </ReactPlaceholder>\n        </div>\n      )}\n      <div className={withHeader ? 'w-100 ph4-l ph2 cf pb3 bg-washed-blue' : ''}>\n        <div className=\"mt4\">\n          <ElementsMapped userStats={userStats} osmStats={osmStats} />\n        </div>\n        <div>\n          <h3 className={titleClass}>\n            <FormattedMessage {...messages.contributionTimelineTitle} />\n          </h3>\n          <ReactPlaceholder\n            type=\"rect\"\n            showLoadingAnimation={true}\n            style={{ height: '20em' }}\n            ready={!errorStats && !loadingStats}\n          >\n            <ContributionTimeline userStats={userStats} />\n          </ReactPlaceholder>\n        </div>\n        <div className=\"mv4\">\n          <h3 className={titleClass}>\n            <FormattedMessage {...messages.projectsTitle} />\n          </h3>\n          <div className=\"user-projects-ctr\">\n            <div>\n              <ReactPlaceholder\n                type=\"rect\"\n                showLoadingAnimation={true}\n                style={{ height: '24em' }}\n                ready={!projectsError && !projectsLoading}\n              >\n                <TopProjects projects={userProjects} />\n              </ReactPlaceholder>\n            </div>\n            <div>\n              <ReactPlaceholder\n                type=\"rect\"\n                showLoadingAnimation={true}\n                style={{ height: '24em' }}\n                ready={!errorStats && !loadingStats}\n              >\n                <Suspense fallback={<div />}>\n                  <TopCauses userStats={userStats} />\n                </Suspense>\n              </ReactPlaceholder>\n            </div>\n            <div>\n              <Suspense fallback={<div />}>\n                <EditsByNumbers osmStats={osmStats} />\n              </Suspense>\n            </div>\n          </div>\n        </div>\n        <div className=\"mv4\">\n          <h3 className={titleClass}>\n            <FormattedMessage {...messages.tasks} />\n          </h3>\n          <TaskStats\n            userStats={userStats}\n            username={currentUser.username !== username ? username : null}\n          />\n        </div>\n        <div className=\"mv4\">\n          <h3 className={titleClass}>\n            <FormattedMessage {...messages.countries} />\n          </h3>\n          <ReactPlaceholder\n            type=\"rect\"\n            showLoadingAnimation={true}\n            style={{ height: '24em' }}\n            ready={!errorStats && !loadingStats && !projectsError && !projectsLoading}\n          >\n            <CountriesMapped projects={userProjects} userStats={userStats} />\n          </ReactPlaceholder>\n        </div>\n        {currentUser.username !== username && (\n          <div className=\"mv4\">\n            <h3 className={titleClass}>\n              <FormattedMessage {...messages.teams} />\n            </h3>\n            <ReactPlaceholder\n              type=\"rect\"\n              showLoadingAnimation={true}\n              style={{ height: '10em' }}\n              ready={!errorStats && !loadingStats}\n            >\n              <UserTeams userId={userDetails.id} />\n            </ReactPlaceholder>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n","import { useSelector } from 'react-redux';\nimport { useEffect, useReducer } from 'react';\nimport axios from 'axios';\n\nimport { useQueryParams, StringParam, NumberParam } from 'use-query-params';\nimport { stringify as stringifyUQP } from 'query-string';\nimport { CommaArrayParam } from '../utils/CommaArrayParam';\nimport { useThrottle } from '../hooks/UseThrottle';\nimport { remapParamsToAPI } from '../utils/remapParamsToAPI';\nimport { API_URL } from '../config';\n\nconst contributionsQueryAllSpecification = {\n  status: CommaArrayParam,\n  minDate: StringParam,\n  maxDate: StringParam,\n  projectStatus: StringParam,\n  page: StringParam,\n  orderBy: StringParam,\n  projectId: NumberParam,\n};\n\n/* This can be passed into project API or used independently */\nexport const useTaskContributionQueryParams = () => {\n  const uqp = useQueryParams(contributionsQueryAllSpecification);\n  return uqp;\n};\n\n/* The API uses slightly different JSON keys than the queryParams,\n   this fn takes an object with queryparam keys and outputs JSON keys\n   while maintaining the same values */\n/* TODO backendadd pagination:\n  orderByType: 'sortBy',\n  orderBy: 'sortDirection',\n  page: 'page',\n  pageSize: 'pageSize'\n  */\n/* TODO support full text search and change text=>project for that */\nconst backendToQueryConversion = {\n  status: 'status',\n  minDate: 'min_action_date',\n  maxDate: 'max_action_date',\n  projectStatus: 'project_status',\n  orderBy: 'sort_by',\n  projectId: 'project_id',\n};\n\nconst dataFetchReducer = (state, action) => {\n  switch (action.type) {\n    case 'FETCH_INIT':\n      return {\n        ...state,\n        isLoading: true,\n        isError: false,\n      };\n    case 'FETCH_MISSINGUSER':\n      return {\n        ...state,\n        isLoading: true,\n        isError: false,\n      };\n    case 'FETCH_SUCCESS':\n      return {\n        ...state,\n        isLoading: false,\n        isError: false,\n        tasks: action.payload.tasks,\n        pagination: action.payload.pagination,\n      };\n    case 'FETCH_FAILURE':\n      return {\n        ...state,\n        isLoading: false,\n        isError: true,\n      };\n    default:\n      console.log(action);\n      throw new Error();\n  }\n};\n\nconst defaultInitialData = {\n  tasks: [],\n  pagination: {\n    hasNext: false,\n    hasPrev: false,\n    nextNum: null,\n    page: 1,\n    pages: 1,\n    prevNum: null,\n    perPage: 100,\n    total: 0,\n  },\n};\n\n/* suggested URL /api/v2/users/{user_id}/tasks?status=READY&project_id=2&min_action_date=2019-04-9&max_action_date=2019-04-10 */\nexport const useTaskContributionAPI = (\n  initialData = defaultInitialData,\n  ExternalQueryParamsState,\n  forceUpdate = null,\n) => {\n  const throttledExternalQueryParamsState = useThrottle(ExternalQueryParamsState, 1500);\n\n  /* Get the user bearer token from the Redux store */\n  const token = useSelector((state) => state.auth.token);\n  const user_id = useSelector((state) => state.auth.userDetails && state.auth.userDetails.id);\n\n  const [state, dispatch] = useReducer(dataFetchReducer, {\n    isLoading: true,\n    isError: false,\n    tasks: initialData.results,\n    pagination: initialData.pagination,\n    queryParamsState: ExternalQueryParamsState[0],\n  });\n\n  useEffect(() => {\n    let didCancel = false;\n    let cancel;\n    const fetchData = async () => {\n      const CancelToken = axios.CancelToken;\n\n      dispatch({\n        type: 'FETCH_INIT',\n      });\n\n      try {\n        if (!token || !user_id) {\n          dispatch({ type: 'FETCH_MISSINGUSER' });\n          didCancel = true;\n        }\n        const remappedParams = remapParamsToAPI(\n          throttledExternalQueryParamsState,\n          backendToQueryConversion,\n        );\n        const result = await axios({\n          url: `${API_URL}users/${user_id}/tasks/`,\n          method: 'get',\n          params: remappedParams,\n          headers: { Authorization: `Token ${token}` },\n          cancelToken: new CancelToken(function executor(c) {\n            // An executor function receives a cancel function as a parameter\n            cancel = { end: c, params: throttledExternalQueryParamsState };\n          }),\n        });\n\n        if (!didCancel) {\n          if (result && result.headers && result.headers['content-type'].indexOf('json') !== -1) {\n            dispatch({ type: 'FETCH_SUCCESS', payload: result.data });\n          } else {\n            console.error('Invalid return type for contribution search');\n            dispatch({ type: 'FETCH_FAILURE' });\n          }\n        } else {\n          cancel.end();\n        }\n      } catch (error) {\n        /* if cancelled, this setting state of unmounted\n         * component with dispatch would be a memory leak */\n        if (\n          !didCancel &&\n          error &&\n          error.response &&\n          error.response.data &&\n          error.response.data.Error === 'No messages found'\n        ) {\n          const zeroPayload = Object.assign(defaultInitialData, { pagination: { total: 0 } });\n          /* TODO(tdk): when 404 and page > 1, re-request page 1 */\n          dispatch({ type: 'FETCH_SUCCESS', payload: zeroPayload });\n        } else if (!didCancel && error.response) {\n          const errorResPayload = Object.assign(defaultInitialData, { error: error.response });\n          // The request was made and the server responded with a status code\n          // that falls out of the range of 2xx\n          console.log(\n            'Res failure',\n            error.response.data,\n            error.response.status,\n            error.response.headers,\n            errorResPayload,\n          );\n          dispatch({ type: 'FETCH_FAILURE', payload: errorResPayload });\n        } else if (!didCancel && error.request) {\n          const errorReqPayload = Object.assign(defaultInitialData, { error: error.request });\n          // The request was made but no response was received\n          // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n          // http.ClientRequest in node.js\n          console.log('req failure', error.request, errorReqPayload);\n          dispatch({ type: 'FETCH_FAILURE', payload: errorReqPayload });\n        } else if (!didCancel) {\n          dispatch({ type: 'FETCH_FAILURE' });\n        } else {\n          // console.log(\"tried to cancel on failure\",cancel.params);\n          cancel && cancel.end();\n        }\n      }\n    };\n\n    fetchData();\n    return () => {\n      didCancel = true;\n      // console.log(\"tried to cancel on effect cleanup \",cancel.params)\n      cancel && cancel.end();\n    };\n  }, [throttledExternalQueryParamsState, forceUpdate, token, user_id]);\n\n  return [state, dispatch];\n};\n\nexport const stringify = stringifyUQP;\n","import React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Dropdown } from '../dropdown';\nimport messages from './messages';\n\nexport default function MyTasksOrderDropdown({ className, setQuery, allQueryParams }) {\n  const options = [\n    {\n      label: <FormattedMessage {...messages.recentlyEdited} />,\n      value: '-action_date',\n    },\n    {\n      label: <FormattedMessage {...messages.projectId} />,\n      value: '-project_id',\n    },\n  ];\n\n  const onSortSelect = (arr) =>\n    setQuery(\n      {\n        ...allQueryParams,\n        page: undefined,\n        orderBy: arr[0].value,\n      },\n      'pushIn',\n    );\n\n  return (\n    <Dropdown\n      onChange={onSortSelect}\n      options={options}\n      value={`${allQueryParams.orderBy}` || []}\n      display={<FormattedMessage {...messages.sortBy} />}\n      className={`ba b--grey-light bg-white mr1 v-mid pv2 ${className || ''}`}\n    />\n  );\n}\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport Select from 'react-select';\nimport { FormattedMessage } from 'react-intl';\nimport { useFetch } from '../../hooks/UseFetch';\nimport messages from './messages';\n\nexport default function MyProjectsDropdown({ className, setQuery, allQueryParams }) {\n  const username = useSelector((state) => state.auth.userDetails.username);\n  const [, , projects] = useFetch(`projects/queries/${username}/touched/`);\n\n  const onSortSelect = (projectId) => {\n    setQuery(\n      {\n        ...allQueryParams,\n        page: undefined,\n        projectId,\n      },\n      'pushIn',\n    );\n  };\n\n  const options = projects.mappedProjects?.map(({ projectId }) => ({\n    label: projectId,\n    value: projectId,\n  }));\n\n  return (\n    <div className={`w5 mr1 ${className}`}>\n      <Select\n        classNamePrefix=\"react-select\"\n        getOptionLabel={({ label }) => `#${label}`}\n        noOptionsMessage={() => <FormattedMessage {...messages.noMatchingProjectId} />}\n        onChange={(e) => onSortSelect(e.value)}\n        options={options}\n        placeholder={<FormattedMessage {...messages.searchProject} />}\n        value={options?.find(({ value }) => value === allQueryParams.projectId) || null}\n      />\n    </div>\n  );\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\nimport { useTaskContributionQueryParams, stringify } from '../../hooks/UseTaskContributionAPI';\nimport MyTasksOrderDropdown from './myTasksOrderDropdown';\nimport MyProjectsDropdown from './myProjectsDropdown';\n\nexport const isActiveButton = (buttonName, contributionQuery) => {\n  let isActive = false;\n  try {\n    if (contributionQuery.status.includes(buttonName)) {\n      isActive = true;\n    }\n  } catch {\n    if (contributionQuery.projectStatus === buttonName) {\n      isActive = true;\n    }\n    if (buttonName === 'All' && !contributionQuery.projectStatus && !contributionQuery.status) {\n      isActive = true;\n    }\n  }\n\n  if (isActive) {\n    return 'bg-blue-grey white fw5';\n  } else {\n    return 'bg-white blue-grey';\n  }\n};\n\nexport const MyTasksNav = (props) => {\n  const [contributionsQuery, setContributionsQuery] = useTaskContributionQueryParams();\n\n  const linkCombo = 'dib mh1 mb2 link ph3 f6 pv2 ba b--grey-light';\n  const notAnyFilter = !stringify(contributionsQuery);\n  return (\n    /* mb1 mb2-ns (removed for map, but now small gap for more-filters) */\n    <header className=\"w-100\">\n      <div className=\"cf\">\n        <div className=\"w-75-l w-60 fl mt4\">\n          <h3 className=\"barlow-condensed blue-dark f2 ma0 v-mid dib ttu pl2 pl0-l\">\n            <FormattedMessage {...messages.myTasks} />\n          </h3>\n        </div>\n      </div>\n      <div className=\"mt2 mb1 dib lh-copy w-100 cf\">\n        <div className=\"w-100 fl dib\">\n          <div className=\"dib\">\n            <MyProjectsDropdown\n              className={`fl f5 mt1 mt2-ns`}\n              setQuery={setContributionsQuery}\n              allQueryParams={contributionsQuery}\n            />\n            <MyTasksOrderDropdown\n              className={`fl f5 mt1 mt2-ns`}\n              setQuery={setContributionsQuery}\n              allQueryParams={contributionsQuery}\n            />\n            {!notAnyFilter && (\n              <Link to=\"./\" className=\"red link ph3 f6 v-mid dib pv2 mh1 mt1 mt2-ns fr\">\n                <FormattedMessage {...messages.clearFilters} />\n              </Link>\n            )}\n          </div>\n        </div>\n      </div>\n      <div className=\"mv2\">\n        <Link to=\"\" className={`${isActiveButton('All', contributionsQuery)} ${linkCombo}`}>\n          <FormattedMessage {...messages.all} />\n        </Link>\n        <Link\n          to=\"?status=MAPPED\"\n          className={`${isActiveButton('MAPPED', contributionsQuery)}  ${linkCombo}`}\n        >\n          <FormattedMessage {...messages.mapped} />\n        </Link>\n        <Link\n          to=\"?status=VALIDATED\"\n          className={`${isActiveButton('VALIDATED', contributionsQuery)}  ${linkCombo}`}\n        >\n          <FormattedMessage {...messages.validated} />\n        </Link>\n        <Link\n          to=\"?status=INVALIDATED\"\n          className={`${isActiveButton('INVALIDATED', contributionsQuery)}  ${linkCombo}`}\n        >\n          <FormattedMessage {...messages.invalidated} />\n        </Link>\n        <Link\n          to=\"?projectStatus=ARCHIVED\"\n          className={`${isActiveButton('ARCHIVED', contributionsQuery)}  ${linkCombo}`}\n        >\n          <FormattedMessage {...messages.archived} />\n        </Link>\n      </div>\n    </header>\n  );\n};\n","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport Popup from 'reactjs-popup';\nimport { FormattedMessage, useIntl } from 'react-intl';\n\nimport messages from './messages';\nimport { RelativeTimeWithUnit } from '../../utils/formattedRelativeTime';\nimport { ListIcon, ResumeIcon, ClockIcon, CommentIcon } from '../svgIcons';\nimport { TaskStatus } from '../taskSelection/taskList';\nimport { TaskActivity } from '../taskSelection/taskActivity';\n\nexport function TaskCard({\n  taskId,\n  projectId,\n  taskStatus,\n  lockHolder,\n  title,\n  taskHistory,\n  taskAnnotation,\n  isUndoable,\n  autoUnlockSeconds,\n  lastUpdated,\n  lastUpdatedBy,\n  numberOfComments,\n}: Object) {\n  const [isHovered, setHovered] = useState(false);\n  const taskLink = `/projects/${projectId}/tasks?search=${taskId}`;\n  const intl = useIntl();\n\n  const timeToAutoUnlock =\n    lastUpdated &&\n    autoUnlockSeconds &&\n    lockHolder &&\n    new Date(+new Date(lastUpdated) + autoUnlockSeconds * 1000);\n\n  return (\n    <article\n      className={`db base-font bg-white w-75-l w-100 mb1 mh2 blue-dark mw8 ${\n        isHovered ? 'shadow-4' : ''\n      }`}\n      onMouseEnter={() => setHovered(true)}\n      onMouseLeave={() => setHovered(false)}\n    >\n      <div className=\"pv3 ph3 ba br1 b--grey-light cf\">\n        <div className=\"w-third-ns w-100 fl\">\n          <Link to={taskLink} className=\"no-underline link blue-dark dib\">\n            <h4 className=\"mv0 fw6 f5\">\n              <FormattedMessage\n                {...messages.projectTask}\n                values={{ task: taskId, project: projectId }}\n              />\n            </h4>\n          </Link>\n          <div className={`pt2 blue-grey f6`} title={lastUpdated}>\n            <span>\n              <FormattedMessage\n                {...messages.lastUpdatedByUser}\n                values={{ time: <RelativeTimeWithUnit date={lastUpdated} /> }}\n              />\n            </span>\n          </div>\n        </div>\n        <div className=\"w-third-ns w-100 fl\">\n          <div className={lockHolder ? '' : 'pv2 mv1'}>\n            <div className=\"db\">\n              <TaskStatus status={taskStatus} lockHolder={lockHolder} />\n            </div>\n            {lockHolder && (\n              <div\n                className=\"dn dib-ns mv1 blue-grey bg-grey-light f7 pv1 ph2\"\n                title={timeToAutoUnlock}\n              >\n                <ClockIcon className=\"pr2 v-mid\" height=\"19px\" width=\"13px\" />\n                <span className=\"v-mid\">\n                  <FormattedMessage\n                    {...messages.unlock}\n                    values={{ time: <RelativeTimeWithUnit date={timeToAutoUnlock} /> }}\n                  />\n                </span>\n              </div>\n            )}\n          </div>\n        </div>\n        <div className=\"w-third-ns w-100 fr\">\n          {numberOfComments ? (\n            <span\n              className=\"w-auto tr fl mv1 pv2 f6 blue-grey\"\n              title={intl.formatMessage(messages.commentsNumber, { number: numberOfComments })}\n            >\n              <CommentIcon className=\"pr2 v-mid\" height=\"19px\" width=\"13px\" />\n              {numberOfComments}\n            </span>\n          ) : (\n            ''\n          )}\n          <Popup\n            trigger={\n              <ListIcon className=\"pointer fr h1 w1 mv1 pv2 v-mid pr3 blue-light hover-blue-grey\" />\n            }\n            modal\n            closeOnDocumentClick\n            nested\n          >\n            {(close) => (\n              <TaskActivity taskId={taskId} project={{ projectId: projectId }} close={close} />\n            )}\n          </Popup>\n          {isHovered &&\n            ['READY', 'LOCKED_FOR_MAPPING', 'LOCKED_FOR_VALIDATION', 'INVALIDATED'].includes(\n              taskStatus,\n            ) && (\n              <Link to={taskLink}>\n                <div className={`dn dib-l link pv2 ph3 mh3 mv1 bg-red white f7 fr`}>\n                  <ResumeIcon className={`ph1 dib-l dn`} />\n                  <FormattedMessage {...messages.resumeTask} />\n                </div>\n              </Link>\n            )}\n        </div>\n      </div>\n    </article>\n  );\n}\n","import React from 'react';\nimport { FormattedMessage, FormattedNumber } from 'react-intl';\nimport ReactPlaceholder from 'react-placeholder';\nimport 'react-placeholder/lib/reactPlaceholder.css';\n\nimport messages from './messages';\nimport { TaskCard } from './taskCard';\n\nexport const TaskResults = (props) => {\n  const state = props.state;\n\n  return (\n    <div className={props.className}>\n      {!state.isLoading && !state.isError && (\n        <p className=\"blue-grey ml3 pt2 f7\">\n          <FormattedMessage\n            {...messages.paginationCount}\n            values={{\n              number: state.tasks && state.tasks.length,\n              total: <FormattedNumber value={state.pagination && state.pagination.total} />,\n            }}\n          />\n        </p>\n      )}\n      {state.isError && (\n        <div className=\"bg-tan pa4 mt3\">\n          <FormattedMessage {...messages.errorLoadingTasks} />\n          <div className=\"pa2\">\n            <button className=\"pa1\" onClick={() => props.retryFn()}>\n              <FormattedMessage {...messages.retry} />\n            </button>\n          </div>\n        </div>\n      )}\n      <div className={`cf db`}>\n        <ReactPlaceholder showLoadingAnimation ready={!state.isLoading} type=\"media\" rows={10}>\n          <TaskCards pageOfCards={state.tasks} />\n        </ReactPlaceholder>\n      </div>\n    </div>\n  );\n};\n\nexport const TaskCards = ({ pageOfCards }) => {\n  if (pageOfCards?.length === 0) {\n    return (\n      <div className=\"mb3 blue-grey\">\n        <FormattedMessage {...messages.noContributed} />\n      </div>\n    );\n  }\n\n  return pageOfCards?.map((card) => <TaskCard {...card} key={`${card.projectId}${card.taskId}`} />);\n};\n","import React, { useEffect } from 'react';\nimport { Outlet, useLocation, useNavigate } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\n\nimport useForceUpdate from '../hooks/UseForceUpdate';\nimport {\n  useTaskContributionAPI,\n  useTaskContributionQueryParams,\n} from '../hooks/UseTaskContributionAPI';\nimport { MyTasksNav } from '../components/contributions/myTasksNav';\nimport { TaskResults } from '../components/contributions/taskResults';\nimport { ProjectCardPaginator } from '../components/projects/projectCardPaginator';\nimport { HeaderProfile } from '../components/userDetail/headerProfile';\nimport { UserDetail } from './userDetail';\nimport { useSetTitleTag } from '../hooks/UseMetaTags';\n\nexport const ContributionsPage = () => {\n  useSetTitleTag('My tasks');\n  const navigate = useNavigate();\n  const initialData = {\n    mapResults: {\n      features: [],\n      type: 'FeatureCollection',\n    },\n    results: [],\n    pagination: { hasNext: false, hasPrev: false, page: 1 },\n  };\n\n  const location = useLocation();\n  const userToken = useSelector((state) => state.auth.token);\n  //eslint-disable-next-line\n  const [contributionsQuery, setContributionsQuery] = useTaskContributionQueryParams();\n  const [forceUpdated, forceUpdate] = useForceUpdate();\n  const [state] = useTaskContributionAPI(initialData, contributionsQuery, forceUpdated);\n\n  useEffect(() => {\n    if (!userToken) {\n      navigate('/login', {\n        replace: true,\n        state: { from: location.pathname },\n      });\n    }\n  }, [location.pathname, navigate, userToken]);\n\n  return (\n    <section className=\"pb5 pt180 pull-center\">\n      <MyTasksNav />\n      <TaskResults retryFn={forceUpdate} state={state} />\n      <ProjectCardPaginator\n        projectAPIstate={state}\n        status={state.isLoading ? 'pending' : 'success'}\n        pagination={state?.pagination}\n        setQueryParam={setContributionsQuery}\n      />\n    </section>\n  );\n};\n\nexport const ContributionsPageIndex = (props) => {\n  return (\n    <div className=\"bg-blue-light 0-10 w-100 cf\" style={{ background: 'rgba(146, 157, 179,0.1)' }}>\n      <div className=\"w-100 cf\">\n        <HeaderProfile selfProfile={true} />\n      </div>\n      <div className=\"w-100 ph5-l ph2 cf pb6\">\n        <Outlet />\n      </div>\n    </div>\n  );\n};\n\nexport const UserStats = () => {\n  useSetTitleTag('My stats');\n  const userDetails = useSelector((state) => state.auth.userDetails);\n\n  return <UserDetail username={userDetails.username} withHeader={false} />;\n};\n"],"sourceRoot":""}