{"version":3,"sources":["components/projectDetail/messages.js","utils/formatChartJSData.js","hooks/UseTimeDiff.js","utils/chart.js","components/teamsAndOrgs/tasksStatsChart.js"],"names":["defineMessages","noProjectTeams","id","defaultMessage","coordination","projectCoordination","createdBy","noProjectContributors","projectTotalContributors","projectLastContribution","percentMapped","percentValidated","projectPriorityURGENT","projectPriorityHIGH","projectPriorityMEDIUM","projectPriorityLOW","dueDateRelativeRemainingDays","typesOfMapping","private","editProject","editor","selectEditor","tasks","instructions","imagery","customTMSLayer","customWMSLayer","customWMTSLayer","contribute","readMore","readLess","addToFavorites","removeFromFavorites","noComments","loginTocomment","errorLoadingComments","post","share","team","validationTeam","teamsAndPermissions","author","whoCanMap","whoCanValidate","zoomToTasks","selectATaskCardTitle","mapThroughOSMCardTitle","submitYourWorkCardTitle","selectATaskCardDescription","mapThroughOSMCardDescription","submitYourWorkCardDescription","overview","dueDateTooltip","description","questionsAndComments","contributions","contributionsTimeline","downloadOsmData","errorDownloadOsmData","errorDownloadOsmDataDescription","viewInOsmcha","changesets","contributors","similarProjects","contributorsError","timelineNotAvailable","status_DRAFT","status_ARCHIVED","status_PUBLISHED","permissions_ANY","permissions_LEVEL","permissions_TEAMS","permissions_TEAMS_LEVEL","downloadProjectAOI","downloadTaskGrid","moreStats","mappedTasks","validatedTasks","shareMessage","postOnFacebook","shareOnLinkedIn","inaccessibleProjectTitle","inaccessibleProjectDescription","exploreOtherProjects","noSimilarProjectsFound","formatChartData","reference","stats","data","datasets","backgroundColor","labels","map","f","field","total","reduce","a","b","v","Math","round","borderColor","label","formatTimelineData","mappedTasksConfig","validatedTasksConfig","mapped","color","fill","validated","entry","date","cumulative_mapped","total_tasks","cumulative_validated","formatTasksStatsData","formatTooltip","context","dataset","dataIndex","concat","formatTimelineTooltip","isPercent","useTimeDiff","tasksByDay","unit","setUnit","useState","useEffect","length","timeDiff","Date","xAxisTimeSeries","type","adapters","locale","enUS","time","tooltipFormat","formatLong","ticks","source","callback","value","index","formatISO","representation","ChartJS","register","CategoryScale","LinearScale","BarElement","Tooltip","Legend","TimeSeriesScale","TasksStatsChart","_ref","intl","useIntl","CHART_COLOURS","orange","formatMessage","messages","red","options","plugins","legend","position","align","boxWidth","tooltip","callbacks","scales","y","stacked","beginAtZero","x","_jsx","Bar"],"mappings":"6IAAA,YAKeA,gBAAe,CAC5BC,eAAgB,CACdC,GAAI,6BACJC,eAAgB,wDAElBC,aAAc,CACZF,GAAI,8BACJC,eAAgB,gBAElBE,oBAAqB,CACnBH,GAAI,0CACJC,eAAgB,4EAElBG,UAAW,CACTJ,GAAI,2BACJC,eAAgB,8BAElBI,sBAAuB,CACrBL,GAAI,uCACJC,eAAgB,uBAElBK,yBAA0B,CACxBN,GAAI,kCACJC,eAAgB,8EAElBM,wBAAyB,CACvBP,GAAI,kCACJC,eAAgB,qBAElBO,cAAe,CACbR,GAAI,+BACJC,eAAgB,UAElBQ,iBAAkB,CAChBT,GAAI,kCACJC,eAAgB,aAElBS,sBAAuB,CACrBV,GAAI,uCACJC,eAAgB,UAElBU,oBAAqB,CACnBX,GAAI,qCACJC,eAAgB,QAElBW,sBAAuB,CACrBZ,GAAI,uCACJC,eAAgB,UAElBY,mBAAoB,CAClBb,GAAI,oCACJC,eAAgB,OAElBa,6BAA8B,CAC5Bd,GAAI,6BACJC,eAAgB,2BAElBc,eAAgB,CACdf,GAAI,gCACJC,eAAgB,oBAElBe,QAAS,CACPhB,GAAI,yBACJC,eAAgB,WAElBgB,YAAa,CACXjB,GAAI,6BACJC,eAAgB,gBAElBiB,OAAQ,CACNlB,GAAI,wBACJC,eAAgB,UAElBkB,aAAc,CACZnB,GAAI,+BACJC,eAAgB,iBAElBmB,MAAO,CACLpB,GAAI,uBACJC,eAAgB,SAElBoB,aAAc,CACZrB,GAAI,8BACJC,eAAgB,gBAElBqB,QAAS,CACPtB,GAAI,yBACJC,eAAgB,WAElBsB,eAAgB,CACdvB,GAAI,6BACJC,eAAgB,oBAElBuB,eAAgB,CACdxB,GAAI,6BACJC,eAAgB,oBAElBwB,gBAAiB,CACfzB,GAAI,8BACJC,eAAgB,qBAElByB,WAAY,CACV1B,GAAI,8CACJC,eAAgB,cAElB0B,SAAU,CACR3B,GAAI,yBACJC,eAAgB,aAElB2B,SAAU,CACR5B,GAAI,yBACJC,eAAgB,aAElB4B,eAAgB,CACd7B,GAAI,gCACJC,eAAgB,oBAElB6B,oBAAqB,CACnB9B,GAAI,qCACJC,eAAgB,yBAElB8B,WAAY,CACV/B,GAAI,2CACJC,eACE,2FAEJ+B,eAAgB,CACdhC,GAAI,4CACJC,eAAgB,uCAElBgC,qBAAsB,CACpBjC,GAAI,qDACJC,eAAgB,0DAElBiC,KAAM,CACJlC,GAAI,6CACJC,eAAgB,QAElBkC,MAAO,CACLnC,GAAI,uBACJC,eAAgB,SAElBmC,KAAM,CACJpC,GAAI,sBACJC,eAAgB,QAElBoC,eAAgB,CACdrC,GAAI,iCACJC,eAAgB,mBAElBqC,oBAAqB,CACnBtC,GAAI,mCACJC,eAAgB,uBAElBsC,OAAQ,CACNvC,GAAI,wBACJC,eAAgB,UAElBuC,UAAW,CACTxC,GAAI,qCACJC,eAAgB,gBAElBwC,eAAgB,CACdzC,GAAI,wCACJC,eAAgB,qBAElByC,YAAa,CACX1C,GAAI,6BACJC,eAAgB,iBAElB0C,qBAAsB,CACpB3C,GAAI,yCACJC,eAAgB,oBAElB2C,uBAAwB,CACtB5C,GAAI,2CACJC,eAAgB,6BAElB4C,wBAAyB,CACvB7C,GAAI,4CACJC,eAAgB,uBAElB6C,2BAA4B,CAC1B9C,GAAI,+CACJC,eACE,wFAEJ8C,6BAA8B,CAC5B/C,GAAI,iDACJC,eACE,sGAEJ+C,8BAA+B,CAC7BhD,GAAI,kDACJC,eAAgB,oEAElBgD,SAAU,CACRjD,GAAI,mCACJC,eAAgB,YAElBiD,eAAgB,CACdlD,GAAI,2CACJC,eAAgB,sCAElBkD,YAAa,CACXnD,GAAI,sCACJC,eAAgB,eAElBmD,qBAAsB,CACpBpD,GAAI,+CACJC,eAAgB,0BAElBoD,cAAe,CACbrD,GAAI,wCACJC,eAAgB,iBAElBqD,sBAAuB,CACrBtD,GAAI,gDACJC,eAAgB,0BAElBsD,gBAAiB,CACfvD,GAAI,0CACJC,eAAgB,qBAElBuD,qBAAsB,CACpBxD,GAAI,+CACJC,eAAgB,+BAElBwD,gCAAiC,CAC/BzD,GAAI,0DACJC,eACE,uJAEJyD,aAAc,CACZ1D,GAAI,+CACJC,eAAgB,wBAElB0D,WAAY,CACV3D,GAAI,mDACJC,eAAgB,cAElB2D,aAAc,CACZ5D,GAAI,uCACJC,eAAgB,gBAElB4D,gBAAiB,CACf7D,GAAI,0CACJC,eAAgB,oBAElB6D,kBAAmB,CACjB9D,GAAI,6CACJC,eAAgB,+CAElB8D,qBAAsB,CACpB/D,GAAI,sDACJC,eAAgB,6EAElB+D,aAAc,CACZhE,GAAI,uBACJC,eAAgB,SAElBgE,gBAAiB,CACfjE,GAAI,0BACJC,eAAgB,YAElBiE,iBAAkB,CAChBlE,GAAI,2BACJC,eAAgB,aAElBkE,gBAAiB,CACfnE,GAAI,0BACJC,eAAgB,aAElBmE,kBAAmB,CACjBpE,GAAI,4BACJC,eAAgB,6CAElBoE,kBAAmB,CACjBrE,GAAI,4BACJC,eAAgB,kBAElBqE,wBAAyB,CACvBtE,GAAI,oCACJC,eAAgB,4CAElBsE,mBAAoB,CAClBvE,GAAI,6BACJC,eAAgB,gBAElBuE,iBAAkB,CAChBxE,GAAI,kCACJC,eAAgB,uBAElBwE,UAAW,CACTzE,GAAI,sBACJC,eAAgB,mBAElByE,YAAa,CACX1E,GAAI,wBACJC,eAAgB,gBAElB0E,eAAgB,CACd3E,GAAI,2BACJC,eAAgB,mBAElB2E,aAAc,CACZ5E,GAAI,wBACJC,eAAgB,kDAElB4E,eAAgB,CACd7E,GAAI,yBACJC,eAAgB,oBAElB6E,gBAAiB,CACf9E,GAAI,yBACJC,eAAgB,qBAElB8E,yBAA0B,CACxB/E,GAAI,6BACJC,eAAgB,oDAElB+E,+BAAgC,CAC9BhF,GAAI,mCACJC,eAAgB,yDAElBgF,qBAAsB,CACpBjF,GAAI,4CACJC,eAAgB,0BAElBiF,uBAAwB,CACtBlF,GAAI,iCACJC,eAAgB,yD,oCChVpB,0KAAO,MAAMkF,EAAkBA,CAACC,EAAWC,KACzC,IAAIC,EAAO,CAAEC,SAAU,CAAC,CAAED,KAAM,GAAIE,gBAAiB,KAAOC,OAAQ,IAEpEH,EAAKC,SAAS,GAAGD,KAAOF,EAAUM,KAAKC,GAAMN,EAAMM,EAAEC,SACrD,MAAMC,EAAQP,EAAKC,SAAS,GAAGD,KAAKQ,QAAO,CAACC,EAAGC,IAAMD,EAAIC,GAAG,GAM5D,OALAV,EAAKC,SAAS,GAAGD,KAAOA,EAAKC,SAAS,GAAGD,KAAKI,KAAKO,GAAMC,KAAKC,MAAOF,EAAIJ,EAAS,OAClFP,EAAKC,SAAS,GAAGC,gBAAkBJ,EAAUM,KAAKC,GAAMA,EAAEH,kBAC1DF,EAAKC,SAAS,GAAGa,YAAchB,EAAUM,KAAKC,GAAMA,EAAES,cACtDd,EAAKG,OAASL,EAAUM,KAAKC,GAAMA,EAAEU,QAE9Bf,CAAI,EAGAgB,EAAqBA,CAACjB,EAAOkB,EAAmBC,KAC3D,IAAIC,EAAS,CACXnB,KAAM,GACNE,gBAAiBe,EAAkBG,MACnCN,YAAaG,EAAkBG,MAC/BC,MAAM,EACNN,MAAOE,EAAkBF,OAEvBO,EAAY,CACdtB,KAAM,GACNE,gBAAiBgB,EAAqBE,MACtCN,YAAaI,EAAqBE,MAClCC,MAAM,EACNN,MAAOG,EAAqBH,OAG9B,MAAMZ,EAASJ,EAAMK,KAAKmB,GAAUA,EAAMC,OAQ1C,OAPAL,EAAOnB,KAAOD,EAAMK,KAAKmB,GACvBX,KAAKC,MAAOU,EAAME,kBAAoBF,EAAMG,YAAe,OAE7DJ,EAAUtB,KAAOD,EAAMK,KAAKmB,GAC1BX,KAAKC,MAAOU,EAAMI,qBAAuBJ,EAAMG,YAAe,OAGzD,CAAEzB,SAAU,CAACqB,EAAWH,GAAShB,OAAQA,EAAQ,EAG7CyB,EAAuBA,CAAC7B,EAAOkB,EAAmBC,KAC7D,IAAIC,EAAS,CACXnB,KAAM,GACNE,gBAAiBe,EAAkBG,MACnCL,MAAOE,EAAkBF,OAEvBO,EAAY,CACdtB,KAAM,GACNE,gBAAiBgB,EAAqBE,MACtCL,MAAOG,EAAqBH,OAG9B,MAAMZ,EAASJ,EAAMK,KAAKmB,GAAUA,EAAMC,OAI1C,OAHAL,EAAOnB,KAAOD,EAAMK,KAAKmB,GAAUA,EAAMJ,SACzCG,EAAUtB,KAAOD,EAAMK,KAAKmB,GAAUA,EAAMD,YAErC,CAAErB,SAAU,CAACkB,EAAQG,GAAYnB,OAAQA,EAAQ,EAG7C0B,EAAiBC,IAC5B,IAAIf,EAAQe,EAAQf,MAIpB,OAHIA,IAAOA,GAAS,MACpBA,GAASe,EAAQC,QAAQ/B,KAAK8B,EAAQE,WAEhC,GAANC,OAAUlB,EAAK,MAGJmB,EAAwBA,CAACJ,EAASK,KAC7C,IAAIpB,EAAQe,EAAQC,QAAQhB,OAAS,GAIrC,OAHIA,IAAOA,GAAS,MACpBA,GAASe,EAAQC,QAAQ/B,KAAK8B,EAAQE,WAEhC,GAANC,OAAUlB,GAAKkB,OAAGE,EAAY,IAAM,GAAE,C,oCCxExC,6CAEO,SAASC,EAAYC,GAC1B,MAAOC,EAAMC,GAAWC,mBAAS,OAajC,OAXAC,qBAAU,KACR,GAAIJ,GAAcA,EAAWK,QAAU,EAAG,CACxC,MAAMC,GACH,IAAIC,KAAKP,EAAWA,EAAWK,OAAS,GAAGlB,MAAQ,IAAIoB,KAAKP,EAAW,GAAGb,OAJrE,MAKJmB,EAAW,IACbJ,EAAQ,SACCI,EAAW,IACpBJ,EAAQ,OAEZ,IACC,CAACF,IACGC,CACT,C,oCCjBA,0DAQA,SAASO,EAAgBP,GACvB,MAAO,CACLQ,KAAM,aACNC,SAAU,CAAEvB,KAAM,CAAEwB,OAAQC,MAC5BC,KAAM,CACJZ,KAAMA,EACNa,cAAeF,IAAKG,WAAW5B,MAEjC6B,MAAO,CACLC,OAAQ,SACRC,SAAUA,CAACC,EAAOC,EAAOJ,IAAUK,YAAUL,EAAMI,GAAOD,MAAO,CAAEG,eAAgB,UAGzF,C,oCCrBA,4GAoBAC,IAAQC,SAASC,IAAeC,IAAaC,IAAYC,IAASC,IAAQC,KA0C3DC,UAxCSC,IAAgB,IAAf,MAAEtE,GAAOsE,EAChC,MAAMC,EAAOC,cACPjC,EAAOF,YAAYrC,GAEnBkB,EAAoB,CACxBG,MAAOoD,IAAcC,OACrB1D,MAAOuD,EAAKI,cAAcC,IAASvF,cAE/B8B,EAAuB,CAC3BE,MAAOoD,IAAcI,IACrB7D,MAAOuD,EAAKI,cAAcC,IAAStF,iBAE/BwF,EAAU,CACdC,QAAS,CACPC,OAAQ,CAAEC,SAAU,MAAOC,MAAO,MAAO9E,OAAQ,CAAE+E,SAAU,KAC7DC,QAAS,CACPC,UAAW,CAAErE,MAAQe,GAAYI,YAAsBJ,GAAS,MAGpEuD,OAAQ,CACNC,EAAG,CACDC,SAAS,EACTlC,MAAO,CACLmC,aAAa,IAGjBC,EAAG,CACDF,SAAS,KACN1C,YAAgBP,MAIzB,OACEoD,cAACC,IAAG,CACF3F,KAAM4B,YAAqB7B,EAAOkB,EAAmBC,GACrD2D,QAASA,GACT,C","file":"static/js/taskStatsChart.34964114.chunk.js","sourcesContent":["import { defineMessages } from 'react-intl';\n\n/**\n * Internationalized messages for use on project cards.\n */\nexport default defineMessages({\n  noProjectTeams: {\n    id: 'project.detail.teams.empty',\n    defaultMessage: \"This project doesn't have any teams associated with.\",\n  },\n  coordination: {\n    id: 'project.detail.coordination',\n    defaultMessage: 'Coordination',\n  },\n  projectCoordination: {\n    id: 'project.detail.coordination.description',\n    defaultMessage: 'This project is coordinated by {organisation} and was created by {user}.',\n  },\n  createdBy: {\n    id: 'project.detail.createdBy',\n    defaultMessage: 'Project created by {user}.',\n  },\n  noProjectContributors: {\n    id: 'project.detail.contributorCount.zero',\n    defaultMessage: 'No contributors yet',\n  },\n  projectTotalContributors: {\n    id: 'project.detail.contributorCount',\n    defaultMessage: '{number, plural, one {<b>#</b> contributor} other {<b>#</b> contributors}}',\n  },\n  projectLastContribution: {\n    id: 'project.detail.lastContribution',\n    defaultMessage: 'Last contribution',\n  },\n  percentMapped: {\n    id: 'project.detail.percentMapped',\n    defaultMessage: 'Mapped',\n  },\n  percentValidated: {\n    id: 'project.detail.percentValidated',\n    defaultMessage: 'Validated',\n  },\n  projectPriorityURGENT: {\n    id: 'project.detail.projectPriorityUrgent',\n    defaultMessage: 'Urgent',\n  },\n  projectPriorityHIGH: {\n    id: 'project.detail.projectPriorityHigh',\n    defaultMessage: 'High',\n  },\n  projectPriorityMEDIUM: {\n    id: 'project.detail.projectPriorityMedium',\n    defaultMessage: 'Medium',\n  },\n  projectPriorityLOW: {\n    id: 'project.detail.projectPriorityLow',\n    defaultMessage: 'Low',\n  },\n  dueDateRelativeRemainingDays: {\n    id: 'project.detail.dueDateLeft',\n    defaultMessage: '{daysLeftHumanize} left',\n  },\n  typesOfMapping: {\n    id: 'project.detail.typesOfMapping',\n    defaultMessage: 'Types of Mapping',\n  },\n  private: {\n    id: 'project.detail.private',\n    defaultMessage: 'Private',\n  },\n  editProject: {\n    id: 'project.detail.editProject',\n    defaultMessage: 'Edit project',\n  },\n  editor: {\n    id: 'project.detail.editor',\n    defaultMessage: 'Editor',\n  },\n  selectEditor: {\n    id: 'project.detail.editor.select',\n    defaultMessage: 'Select editor',\n  },\n  tasks: {\n    id: 'project.detail.tasks',\n    defaultMessage: 'Tasks',\n  },\n  instructions: {\n    id: 'project.detail.instructions',\n    defaultMessage: 'Instructions',\n  },\n  imagery: {\n    id: 'project.detail.imagery',\n    defaultMessage: 'Imagery',\n  },\n  customTMSLayer: {\n    id: 'project.detail.imagery.tms',\n    defaultMessage: 'Custom TMS Layer',\n  },\n  customWMSLayer: {\n    id: 'project.detail.imagery.wms',\n    defaultMessage: 'Custom WMS Layer',\n  },\n  customWMTSLayer: {\n    id: 'project.detail.imagery.wmts',\n    defaultMessage: 'Custom WMTS Layer',\n  },\n  contribute: {\n    id: 'project.selectTask.footer.button.contribute',\n    defaultMessage: 'Contribute',\n  },\n  readMore: {\n    id: 'project.readMoreButton',\n    defaultMessage: 'Read more',\n  },\n  readLess: {\n    id: 'project.readLessButton',\n    defaultMessage: 'Read less',\n  },\n  addToFavorites: {\n    id: 'project.detail.addToFavorites',\n    defaultMessage: 'Add to Favorites',\n  },\n  removeFromFavorites: {\n    id: 'project.detail.removeFromFavorites',\n    defaultMessage: 'Remove from Favorites',\n  },\n  noComments: {\n    id: 'project.detail.questionsAndComments.none',\n    defaultMessage:\n      'There are currently no questions or comments on this project. Be the first to post one!',\n  },\n  loginTocomment: {\n    id: 'project.detail.questionsAndComments.login',\n    defaultMessage: 'Log in to be able to post comments.',\n  },\n  errorLoadingComments: {\n    id: 'project.detail.questionsAndComments.fetching.error',\n    defaultMessage: 'An error occured while loading questions and comments.',\n  },\n  post: {\n    id: 'project.detail.questionsAndComments.button',\n    defaultMessage: 'Post',\n  },\n  share: {\n    id: 'project.detail.share',\n    defaultMessage: 'Share',\n  },\n  team: {\n    id: 'project.detail.team',\n    defaultMessage: 'Team',\n  },\n  validationTeam: {\n    id: 'project.detail.validation_team',\n    defaultMessage: 'Validation team',\n  },\n  teamsAndPermissions: {\n    id: 'project.detail.teams_permissions',\n    defaultMessage: 'Teams & Permissions',\n  },\n  author: {\n    id: 'project.detail.author',\n    defaultMessage: 'Author',\n  },\n  whoCanMap: {\n    id: 'project.detail.mapping_permissions',\n    defaultMessage: 'Who can map?',\n  },\n  whoCanValidate: {\n    id: 'project.detail.validation_permissions',\n    defaultMessage: 'Who can validate?',\n  },\n  zoomToTasks: {\n    id: 'project.detail.zoomToTasks',\n    defaultMessage: 'Zoom to tasks',\n  },\n  selectATaskCardTitle: {\n    id: 'project.detail.cards.selectATask.title',\n    defaultMessage: '1. Select a task',\n  },\n  mapThroughOSMCardTitle: {\n    id: 'project.detail.cards.mapthroughosm.title',\n    defaultMessage: '2. Map with OpenStreetMap',\n  },\n  submitYourWorkCardTitle: {\n    id: 'project.detail.cards.submityourwork.title',\n    defaultMessage: '3. Submit your work',\n  },\n  selectATaskCardDescription: {\n    id: 'project.detail.cards.selectATask.description',\n    defaultMessage:\n      'Projects are divided into sets of smaller tasks and adapted to fit your skill level.',\n  },\n  mapThroughOSMCardDescription: {\n    id: 'project.detail.cards.mapthroughosm.description',\n    defaultMessage:\n      'If you are new to mapping, we recommend checking the Learn page for instructions before you begin.',\n  },\n  submitYourWorkCardDescription: {\n    id: 'project.detail.cards.submityourwork.description',\n    defaultMessage: 'Submitting your work is crucial to make sure your data is saved.',\n  },\n  overview: {\n    id: 'project.detail.sections.overview',\n    defaultMessage: 'Overview',\n  },\n  dueDateTooltip: {\n    id: 'project.detail.sections.overview.dueDate',\n    defaultMessage: 'Ideal date to complete the project',\n  },\n  description: {\n    id: 'project.detail.sections.description',\n    defaultMessage: 'Description',\n  },\n  questionsAndComments: {\n    id: 'project.detail.sections.questionsAndComments',\n    defaultMessage: 'Questions and comments',\n  },\n  contributions: {\n    id: 'project.detail.sections.contributions',\n    defaultMessage: 'Contributions',\n  },\n  contributionsTimeline: {\n    id: 'project.detail.sections.contributionsTimeline',\n    defaultMessage: 'Contributions timeline',\n  },\n  downloadOsmData: {\n    id: 'project.detail.sections.downloadOsmData',\n    defaultMessage: 'Download OSM Data',\n  },\n  errorDownloadOsmData: {\n    id: 'project.detail.sections.errorDownloadOsmData',\n    defaultMessage: 'Data Extraction Unavailable',\n  },\n  errorDownloadOsmDataDescription: {\n    id: 'project.detail.sections.errorDownloadOsmDataDescription',\n    defaultMessage:\n      'The data extract you are attempting to download is currently inactive or unavailable. Please ensure that the extract is active and try again later.',\n  },\n  viewInOsmcha: {\n    id: 'project.detail.sections.contributions.osmcha',\n    defaultMessage: 'Changesets in OSMCha',\n  },\n  changesets: {\n    id: 'project.detail.sections.contributions.changesets',\n    defaultMessage: 'Changesets',\n  },\n  contributors: {\n    id: 'project.detail.sections.contributors',\n    defaultMessage: 'Contributors',\n  },\n  similarProjects: {\n    id: 'project.detail.sections.similarProjects',\n    defaultMessage: 'Similar projects',\n  },\n  contributorsError: {\n    id: 'project.detail.sections.contributors.error',\n    defaultMessage: 'An error occured while loading contributors',\n  },\n  timelineNotAvailable: {\n    id: 'project.detail.sections.contributions.timelineError',\n    defaultMessage: 'A timeline is going to be available after the first task has been mapped.',\n  },\n  status_DRAFT: {\n    id: 'project.status.draft',\n    defaultMessage: 'Draft',\n  },\n  status_ARCHIVED: {\n    id: 'project.status.archived',\n    defaultMessage: 'Archived',\n  },\n  status_PUBLISHED: {\n    id: 'project.status.published',\n    defaultMessage: 'Published',\n  },\n  permissions_ANY: {\n    id: 'project.permissions.any',\n    defaultMessage: 'All users',\n  },\n  permissions_LEVEL: {\n    id: 'project.permissions.level',\n    defaultMessage: 'Users with intermediate or advanced level',\n  },\n  permissions_TEAMS: {\n    id: 'project.permissions.teams',\n    defaultMessage: '{team} members',\n  },\n  permissions_TEAMS_LEVEL: {\n    id: 'project.permissions.teamsAndLevel',\n    defaultMessage: 'Intermediate and advanced {team} members',\n  },\n  downloadProjectAOI: {\n    id: 'projects.data.download.aoi',\n    defaultMessage: 'Download AOI',\n  },\n  downloadTaskGrid: {\n    id: 'projects.data.download.taskGrid',\n    defaultMessage: 'Download Tasks Grid',\n  },\n  moreStats: {\n    id: 'projects.link.stats',\n    defaultMessage: 'More statistics',\n  },\n  mappedTasks: {\n    id: 'projects.stats.mapped',\n    defaultMessage: 'Mapped tasks',\n  },\n  validatedTasks: {\n    id: 'projects.stats.validated',\n    defaultMessage: 'Validated tasks',\n  },\n  shareMessage: {\n    id: 'project.share.twitter',\n    defaultMessage: 'Contribute mapping the project #{id} on {site}',\n  },\n  postOnFacebook: {\n    id: 'project.share.facebook',\n    defaultMessage: 'Post on Facebook',\n  },\n  shareOnLinkedIn: {\n    id: 'project.share.linkedin',\n    defaultMessage: 'Share on LinkedIn',\n  },\n  inaccessibleProjectTitle: {\n    id: 'project.inaccessible.title',\n    defaultMessage: \"You don't have permission to access this project\",\n  },\n  inaccessibleProjectDescription: {\n    id: 'project.inaccessible.description',\n    defaultMessage: 'Please contact the project manager to request access.',\n  },\n  exploreOtherProjects: {\n    id: 'project.inaccessible.exploreOtherProjects',\n    defaultMessage: 'Explore other projects',\n  },\n  noSimilarProjectsFound: {\n    id: 'project.noSimilarProjectsFound',\n    defaultMessage: 'Could not find any similar projects for this project',\n  },\n});\n","export const formatChartData = (reference, stats) => {\n  let data = { datasets: [{ data: [], backgroundColor: [] }], labels: [] };\n\n  data.datasets[0].data = reference.map((f) => stats[f.field]);\n  const total = data.datasets[0].data.reduce((a, b) => a + b, 0);\n  data.datasets[0].data = data.datasets[0].data.map((v) => Math.round((v / total) * 100));\n  data.datasets[0].backgroundColor = reference.map((f) => f.backgroundColor);\n  data.datasets[0].borderColor = reference.map((f) => f.borderColor);\n  data.labels = reference.map((f) => f.label);\n\n  return data;\n};\n\nexport const formatTimelineData = (stats, mappedTasksConfig, validatedTasksConfig) => {\n  let mapped = {\n    data: [],\n    backgroundColor: mappedTasksConfig.color,\n    borderColor: mappedTasksConfig.color,\n    fill: false,\n    label: mappedTasksConfig.label,\n  };\n  let validated = {\n    data: [],\n    backgroundColor: validatedTasksConfig.color,\n    borderColor: validatedTasksConfig.color,\n    fill: false,\n    label: validatedTasksConfig.label,\n  };\n\n  const labels = stats.map((entry) => entry.date);\n  mapped.data = stats.map((entry) =>\n    Math.round((entry.cumulative_mapped / entry.total_tasks) * 100),\n  );\n  validated.data = stats.map((entry) =>\n    Math.round((entry.cumulative_validated / entry.total_tasks) * 100),\n  );\n\n  return { datasets: [validated, mapped], labels: labels };\n};\n\nexport const formatTasksStatsData = (stats, mappedTasksConfig, validatedTasksConfig) => {\n  let mapped = {\n    data: [],\n    backgroundColor: mappedTasksConfig.color,\n    label: mappedTasksConfig.label,\n  };\n  let validated = {\n    data: [],\n    backgroundColor: validatedTasksConfig.color,\n    label: validatedTasksConfig.label,\n  };\n\n  const labels = stats.map((entry) => entry.date);\n  mapped.data = stats.map((entry) => entry.mapped);\n  validated.data = stats.map((entry) => entry.validated);\n\n  return { datasets: [mapped, validated], labels: labels };\n};\n\nexport const formatTooltip = (context) => {\n  var label = context.label;\n  if (label) label += ': ';\n  label += context.dataset.data[context.dataIndex];\n\n  return `${label}%`;\n};\n\nexport const formatTimelineTooltip = (context, isPercent) => {\n  var label = context.dataset.label || '';\n  if (label) label += ': ';\n  label += context.dataset.data[context.dataIndex];\n\n  return `${label}${isPercent ? '%' : ''}`;\n};\n","import { useState, useEffect } from 'react';\n\nexport function useTimeDiff(tasksByDay) {\n  const [unit, setUnit] = useState('day');\n  const day = 86400000;\n  useEffect(() => {\n    if (tasksByDay && tasksByDay.length >= 2) {\n      const timeDiff =\n        (new Date(tasksByDay[tasksByDay.length - 1].date) - new Date(tasksByDay[0].date)) / day;\n      if (timeDiff > 16 * 7) {\n        setUnit('month');\n      } else if (timeDiff > 16) {\n        setUnit('week');\n      }\n    }\n  }, [tasksByDay]);\n  return unit;\n}\n","import { enUS } from 'date-fns/locale';\nimport { formatISO } from 'date-fns';\n/**\n * x axis configuration common between this and {@link ../projectDetail/timeline.js}\n * @param unit The base unit for the axis\n * @typedef {import('chart.js').ScaleOptionsByType} ScaleOptionsByType\n * @returns {ScaleOptionsByType} The options to use for x axis configuration\n */\nfunction xAxisTimeSeries(unit) {\n  return {\n    type: 'timeseries',\n    adapters: { date: { locale: enUS } },\n    time: {\n      unit: unit,\n      tooltipFormat: enUS.formatLong.date,\n    },\n    ticks: {\n      source: 'labels',\n      callback: (value, index, ticks) => formatISO(ticks[index].value, { representation: 'date' }),\n    },\n  };\n}\n\nexport { xAxisTimeSeries };\n","import React from 'react';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Tooltip,\n  Legend,\n  TimeSeriesScale,\n} from 'chart.js';\nimport { Bar } from 'react-chartjs-2';\nimport 'chartjs-adapter-date-fns';\nimport { useIntl } from 'react-intl';\n\nimport messages from '../projectDetail/messages';\nimport { CHART_COLOURS } from '../../config';\nimport { useTimeDiff } from '../../hooks/UseTimeDiff';\nimport { formatTasksStatsData, formatTimelineTooltip } from '../../utils/formatChartJSData';\nimport { xAxisTimeSeries } from '../../utils/chart';\n\nChartJS.register(CategoryScale, LinearScale, BarElement, Tooltip, Legend, TimeSeriesScale);\n\nconst TasksStatsChart = ({ stats }) => {\n  const intl = useIntl();\n  const unit = useTimeDiff(stats);\n\n  const mappedTasksConfig = {\n    color: CHART_COLOURS.orange,\n    label: intl.formatMessage(messages.mappedTasks),\n  };\n  const validatedTasksConfig = {\n    color: CHART_COLOURS.red,\n    label: intl.formatMessage(messages.validatedTasks),\n  };\n  const options = {\n    plugins: {\n      legend: { position: 'top', align: 'end', labels: { boxWidth: 12 } },\n      tooltip: {\n        callbacks: { label: (context) => formatTimelineTooltip(context, false) },\n      },\n    },\n    scales: {\n      y: {\n        stacked: true,\n        ticks: {\n          beginAtZero: true,\n        },\n      },\n      x: {\n        stacked: true,\n        ...xAxisTimeSeries(unit),\n      },\n    },\n  };\n  return (\n    <Bar\n      data={formatTasksStatsData(stats, mappedTasksConfig, validatedTasksConfig)}\n      options={options}\n    />\n  );\n};\n\nexport default TasksStatsChart;\n"],"sourceRoot":""}