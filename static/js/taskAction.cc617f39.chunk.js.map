{"version":3,"sources":["components/alert/index.js","components/projectDetail/messages.js","components/projectCard/messages.js","components/taskSelection/messages.js","hooks/UsePermissions.js","components/comments/messages.js","components/projectCard/priorityBox.js","components/projectDetail/statusBox.js","components/webglUnsupported.js","components/svgIcons/timer.js","components/projectCard/dueDateBox.js","api/projects.js","components/comments/hashtagPaste.js","components/comments/fileRejections.js","components/comments/uploadStatus.js","components/comments/editorIconConfig.js","components/comments/commentInput.js","utils/osmchaLink.js","utils/slugifyFileName.js","hooks/UseUploadImage.js","components/comments/status.js","utils/sorting.js","utils/editorsList.js","../../lib/sphericalmercator.ts","../../lib/index.ts","api/questionsAndComments.js","utils/getTaskContributors.js","hooks/UseFirstTaskActionDate.js","hooks/UseGetContributors.js","utils/overpassLink.js","components/taskSelection/taskActivity.js","components/projectDetail/visibilityBox.js","components/projectDetail/header.js","utils/tasksGeometry.js","utils/openEditor.js","components/mappingTypes.js","hooks/UseLockedTasks.js","components/projectDetail/osmchaButton.js","components/taskSelection/map.js","assets/img/lock.png","assets/img/red-lock.png","components/taskSelection/lockedTasks.js","components/projectDetail/downloadButtons.js","components/taskSelection/instructions.js","components/taskSelection/changesetComment.js","components/checkCircle.js","../../../src/mutationObserver.ts","../../../src/useMutation.ts","components/portal.js","hooks/UseReadTaskComments.js","hooks/UseDisableBadImagery.js","components/taskSelection/actionSidebars.js","../node_modules/react-accessible-accordion/dist/es/index.js","components/taskSelection/multipleTaskHistories.js","components/taskSelection/resourcesTab.js","hooks/UseTaskBbox.js","components/taskSelection/actionTabsNav.js","components/taskSelection/extendSession.js","components/taskSelection/action.js","api/user.js","views/taskAction.js"],"names":["Alert","_ref","type","compact","inline","iconClassName","children","Icon","info","InfoIcon","success","CheckIcon","warning","AlertIcon","error","BanIcon","_jsxs","className","concat","_jsx","EntityError","_ref2","entity","action","messageType","FormattedMessage","messages","values","defineMessages","noProjectTeams","id","defaultMessage","coordination","projectCoordination","createdBy","noProjectContributors","projectTotalContributors","projectLastContribution","percentMapped","percentValidated","projectPriorityURGENT","projectPriorityHIGH","projectPriorityMEDIUM","projectPriorityLOW","dueDateRelativeRemainingDays","typesOfMapping","private","editProject","editor","selectEditor","tasks","instructions","imagery","customTMSLayer","customWMSLayer","customWMTSLayer","contribute","readMore","readLess","addToFavorites","removeFromFavorites","noComments","loginTocomment","errorLoadingComments","post","share","team","validationTeam","teamsAndPermissions","author","whoCanMap","whoCanValidate","zoomToTasks","selectATaskCardTitle","mapThroughOSMCardTitle","submitYourWorkCardTitle","selectATaskCardDescription","mapThroughOSMCardDescription","submitYourWorkCardDescription","overview","dueDateTooltip","description","questionsAndComments","contributions","contributionsTimeline","downloadOsmData","errorDownloadOsmData","errorDownloadOsmDataDescription","viewInOsmcha","changesets","contributors","similarProjects","contributorsError","timelineNotAvailable","status_DRAFT","status_ARCHIVED","status_PUBLISHED","permissions_ANY","permissions_LEVEL","permissions_TEAMS","permissions_TEAMS_LEVEL","downloadProjectAOI","downloadTaskGrid","moreStats","mappedTasks","validatedTasks","shareMessage","postOnFacebook","shareOnLinkedIn","inaccessibleProjectTitle","inaccessibleProjectDescription","exploreOtherProjects","noSimilarProjectsFound","percentBadImagery","priorityDescriptionURGENT","priorityDescriptionHIGH","priorityDescriptionMEDIUM","priorityDescriptionLOW","projectPage","projectTasks","noDueDate","dueDateExpired","unsavedChanges","unsavedChangesToSplit","unsavedChangesToUnlock","unsavedChangesToReloadEditor","unsavedChangesTooltip","closeModal","deselectAndValidate","cantValidateMappedTask","priorityAreasLoadingError","noMappedTasksSelectedError","noMappedTasksSelectedErrorDescription","InvalidTaskStateError","InvalidTaskStateErrorDescription","UserNotAllowedError","UserNotAllowedErrorDescription","ProjectNotPublishedError","ProjectNotPublishedErrorDescription","TaskNotOwnedError","TaskNotOwnedErrorDescription","NotReadyForValidationError","NotReadyForValidationErrorDescription","CannotValidateMappedTaskError","CannotValidateMappedTaskErrorDescription","JOSMError","JOSMErrorDescription","lockError","lockErrorDescription","lockErrorLicense","lockErrorLicenseDescription","acceptLicense","cancel","anotherLockedTask","anotherProjectLockTextSingular","anotherProjectLockTextPlural","currentProjectLockTextSingular","currentProjectLockTextPlural","goToProject","workOnTasksSingular","workOnTasksPlural","legend","filterPlaceholder","reloadEditor","openEditor","showSidebar","sessionAboutToExpireTitle","sessionAboutToExpireDescription","extendTime","sessionExtended","sessionExtensionError","sessionExpiredTitle","sessionExpiredDescription","relockTask","taskRelocked","taskRelockError","hideSidebar","timeToUnlock","task","taskId","projectIsArchived","enforcedRandomTaskSelection","changesetComment","registered","customLayer","noImageryDefined","copyImageryURL","mapATask","mapSelectedTask","mapAnotherTask","validateATask","validateSelectedTask","validateAnotherTask","selectAnotherProject","resumeMapping","resumeValidation","taskLastUpdate","seeTaskHistory","zoomToTask","copyTaskLink","taskLinkCopied","taskStatus_PRIORITY_AREAS","taskStatus_READY","taskStatus_MAPPED","taskStatus_LOCKED","taskStatus_LOCKED_FOR_MAPPING","taskStatus_LOCKED_FOR_VALIDATION","taskStatus_VALIDATED","taskStatus_INVALIDATED","taskStatus_BADIMAGERY","taskStatus_SPLIT","sortById","sortByMostRecentlyUpdate","sortByLeastRecentlyUpdate","filterAll","filterReadyToValidate","filterReadyToMap","noTasksFound","readTaskComments","completion","history","taskHistoryComments","taskHistoryActivities","taskHistoryAll","copyComment","copyCommentToAll","copyCommentToINVALIDATED","copyCommentToVALIDATED","resources","finishMappingTitle","instructionsSelect","writeComment","instructionsComment","instructionsSubmit","comment","redirectToPreviousProject","commentPlaceholder","editStatus","revertVALIDATED","confirmRevertVALIDATED","revertBADIMAGERY","confirmRevertBADIMAGERY","proceed","yes","no","mappedQuestion","validatedQuestion","complete","incomplete","badImagery","splitTask","splitTaskError","splitTaskErrorDescription","splitTaskGenericError","selectAnotherTask","stopMappingError","stopValidation","stopValidationError","tasksMap","submitTask","submitTasks","submitTaskError","taskActivity","taskUnavailable","taskSplitDescription","taskData","projectId","overpassDownload","overpassVisualization","projectData","selectTask","entireProject","seeTaskChangesets","taskOnOSMCha","taskHistoryComment","taskDetailFetchError","noCommentsYet","noActivitiesToDisplay","taskHistoryLockedMapping","taskHistoryLockedValidation","taskHistoryAutoUnlockedMapping","taskHistoryAutoUnlockedValidation","taskHistoryExtendedForMapping","taskHistoryExtendedForValidation","taskHistoryBadImagery","taskHistoryMapped","taskHistoryValidated","taskHistoryInvalidated","taskHistorySplit","taskHistoryReady","map","mapped","validate","validated","total","lockedBy","taskExtraInfo","userFilterDefaultLabel","mappingLevelALL","mappingLevelADVANCED","mappingLevelINTERMEDIATE","mappingLevelBEGINNER","mappingLevelNEWUSER","statistics","mappedByUser","validatedByUser","allUserTasks","permissionErrorTitle","permissionError_userLevelToValidate","permissionError_userLevelToMap","permissionError_userIsNotValidationTeamMember","permissionError_userIsNotMappingTeamMember","useEditProjectAllowed","project","userDetails","useSelector","state","auth","organisations","pmTeams","isAllowed","setIsAllowed","useState","useEffect","role","username","includes","organisation","teams","filter","teamId","some","item","useEditTeamAllowed","organisation_id","members","managers","member","active","function","useEditOrgAllowed","org","organisationId","i","imageUploadFailed","imageUploadOnProgress","sendingMessage","messageSent","messageError","managersHashtagTip","authorHashtagTip","contributorsHashtagTip","nothingToPreview","leaveAComment","write","preview","attachImage","markdownSupported","PriorityBox","priority","extraClasses","showIcon","color","msg","title","ClockIcon","style","height","ProjectStatusBox","status","colour","WebglUnsupported","webglUnsupportedTitle","webglUnsupportedDescription","a","target","rel","href","TimerIcon","React","PureComponent","render","xmlns","width","fill","viewBox","this","props","fillRule","d","clipRule","DueDateBox","dueDate","intervalMili","tooltipMsg","isTaskStatusPage","isProjectDetailPage","intl","useIntl","timer","setTimer","Date","now","interval","setInterval","clearInterval","undefined","options","language","locale","slice","fallbacks","largest","units","round","milliDifference","_Fragment","paddingTop","paddingBottom","daysLeftHumanize","humanizeDuration","ReactTooltip","place","useProjectsQuery","fullProjectsQuery","token","preferences","useQuery","queryKey","queryFn","signal","fetchProjects","paramsRemapped","remapParamsToAPI","backendToQueryConversion","lastUpdatedTo","format","subMonths","api","get","params","then","res","data","keepPreviousData","useProjectQuery","useProjectSummaryQuery","otherOptions","arguments","length","_ref3","select","useProjectContributionsQuery","_ref4","userContributions","useActivitiesQuery","_ref5","refetchIntervalInBackground","refetchInterval","refetchOnWindowFocus","useErrorBoundary","useTasksQuery","_ref6","usePriorityAreasQuery","_ref7","fetchProjectPriorityArea","useProjectTimelineQuery","_ref8","fetchTimelineData","stats","useTaskDetail","shouldRefetch","_ref9","enabled","stopMapping","submitMappingTask","url","payload","submitValidationTask","difficulty","campaign","location","types","exactTypes","interests","text","page","orderBy","orderByType","createdByMe","managedByMe","favoritedByMe","mappedByMe","stale","createdFrom","basedOnMyInterests","HashtagPaste","setFn","hashtag","borderBottomStyle","onClick","formatMessage","replace","FileRejections","files","file","errors","path","e","message","code","DropzoneUploadStatus","uploadError","uploading","ICON_SIZE","iconConfig","bold","commands","icon","italic","quote","link","unorderedListCommand","orderedListCommand","mention","name","keyCommand","value","buttonProps","stroke","strokeWidth","strokeLinecap","strokeLinejoin","cx","cy","r","execute","newSelectionRange","selectWord","selection","state1","setSelectionRange","state2","replaceSelection","selectedText","start","end","upload","x","y","document","getElementById","click","CommentInputField","setComment","enableHashtagPaste","isShowTabNavs","isShowFooter","enableContributorsHashtag","isShowUserPicture","placeholderMsg","markdownTextareaProps","textareaRef","useRef","isBundle","isShowPreview","setIsShowPreview","appendImgToComment","onDrop","useOnDrop","fileRejections","getRootProps","getInputProps","useDropzone","DROPZONE_SETTINGS","fileuploadError","fileuploading","uploadImg","useUploadImage","tribute","Tribute","trigger","async","query","cb","fetchLocalJSONAPI","usernames","lookup","fillAttr","selectTemplate","original","itemClass","requireLeadingSpace","noMatchTemplate","allowSpaces","searchOpts","skip","current","textarea","Array","isArray","attach","addEventListener","CurrentUserAvatar","val","MDEditor","ref","Object","keys","key","extraCommands","onChange","textareaProps","spellCheck","placeholder","defaultTabEnable","accept","event","minHeight","borderColor","wordWrap","dangerouslySetInnerHTML","htmlFromMarkdown","formatUserNamesToLink","formatOSMChaLink","infoObj","baseURL","osmchaFilterId","encodeURIComponent","filterParams","aoiBBOX","buildFilter","join","created","split","mappingTeams","JSON","stringify","buildFilterValue","label","getFilterId","startsWith","search","setUploading","setUploadError","useCallback","updateFn","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","Error","mime","filename","mimetype","lastIndexOf","slug","substr","slugifyFileName","pushToLocalJSONAPI","catch","err","acceptedFiles","forEach","MessageStatus","compareTaskId","b","properties","compareLastUpdate","actionDate","compareHistoryLastUpdate","compareByPropertyDescending","property","getEditors","filterList","customEditor","editors","RAPID_EDITOR_URL","ID_EDITOR_URL","POTLATCH2_EDITOR_URL","push","D2R","Math","PI","R2D","cache","SphericalMercator","constructor","size","antimeridian","expansion","c","Bc","Cc","zc","Ac","px","ll","zoom","Number","isInteger","f","min","max","sin","log","pow","bc","cc","ac","g","atan","exp","center","dimensions","tileSize","lon","lat","merc","tl","br","bounds","minzoom","maxzoom","allowFloat","allowAntiMeridian","base","bl","tr","centerPixelX","centerPixelY","adjusted","ratios","floor","useCommentsQuery","perPage","postProjectComment","postTaskComment","getTaskContributors","taskHistory","usernameToExclude","reduce","acc","actionBy","sort","useFirstTaskActionDate","firstDate","setFirstDate","fistTaskAction","useGetContributors","formatOverpassLink","users","bbox","baseUrl","swneBbox","usersQuery","user","formatUserQuery","PostComment","setCommentPayload","mutation","useMutation","mutationFn","onSuccess","Button","mutate","loading","isLoading","disabled","TaskHistory","_groupBySession","historyOption","setHistoryOption","commentPayload","taskComments","t","taskChanges","shownHistory","ReactPlaceholder","showLoadingAnimation","delay","option","checked","groupBySession","grouped","n","UserAvatar","picture","pictureUrl","colorClasses","marginTop","getTaskActionMessage","actionText","RelativeTimeWithUnit","date","historyId","TaskDataDropdown","_history$taskHistory","osmchaLink","useMemo","Dropdown","display","TaskActivity","_project$projectInfo","close","updateActivities","userCanValidate","resetSuccess","setResetSuccess","queryClient","useQueryClient","uniqueContributors","setQueryData","CloseIcon","projectInfo","EditorDropdown","UndoLastTaskAction","resetFn","resetTask","arr","windowObjectReference","window","open","viewport","innerWidth","innerHeight","getIdUrl","sendJosmCommands","showConfirmation","setShowConfirmation","CustomButton","ProjectVisibilityBox","LockIcon","HeaderLine","showEditLink","projectIdLink","Link","to","EditButton","ProjectHeader","userCanEditProject","projectPriority","organisationName","lang","TagLine","campaigns","countries","countryTag","translateCountry","tags","interest","tag","index","getSelectedTasksBBox","selectedTaskIds","selectedTasksGeom","featureCollection","features","selectedTasks","windowSize","getCentroidAndZoomFromSelectedTasks","closed","centroid","zoomLevel","roundToDecimals","getFieldPapersUrl","customUrl","formatImageryUrl","imageryURL","substring","indexOf","getTaskGpxUrl","URL","API_URL","getTaskXmlUrl","formatCustomUrl","extraIdParams","extraParams","formatExtraParams","idPresets","term","taskBbox","layerName","tmTaskLayerParams","new_layer","layer_name","layer_locked","download_policy","upload_policy","callJosmRemoteControl","formatJosmUrl","loadTasksBoundaries","minZoom","maxZoom","toLowerCase","getImageryInfo","imageryParams","min_zoom","max_zoom","loadImageryonJosm","newLayer","loadAndZoomParams","left","bottom","right","top","changeset_comment","changeset_source","loadOsmDataToTasks","endpoint","urlParams","formatUrlParams","input","decimals","p","safariWindowReference","uri","safari","setTimeout","fetch","response","console","TITLED_ICONS","RoadIcon","HomeIcon","WavesIcon","TaskIcon","AsteriskIcon","MappingTypes","colorClass","Element","k","useGetLockedTasks","lockedTasks","useFetchLockedTasks","dispatch","useDispatch","taskStatus","useClearLockedTasks","OSMChaButton","ExternalLinkIcon","lockIcon","Image","src","redlockIcon","mapboxgl","accessToken","MAPBOX_TOKEN","setRTLTextPlugin","MAPBOX_RTL_PLUGIN_URL","TasksMap","mapResults","taskBordersMap","priorityAreas","taskBordersOnly","taskCentroidMap","disableScrollZoom","zoomedTaskId","navigate","animateZoom","showTaskIds","selected","selectedOnMap","mapRef","createRef","authDetails","hoveredTaskId","setHoveredTaskId","setMapObj","useLayoutEffect","supported","Map","container","MAP_STYLE","attributionControl","addControl","AttributionControl","MapboxLanguage","defaultLanguage","remove","taskGeom","geometry","fitBounds","padding","animate","onSelectTaskClick","_e$features","countryMapLayers","taskMapLayers","updateTMZoom","lastLockedTasksGeom","curr","geom","coordinates","screenWidth","mapboxLayerDefn","once","resize","getSource","addImage","addSource","NavigationControl","scrollZoom","disable","enable","locked","taskStatusCondition","all_condition","addLayer","source","layout","paint","TASK_COLOURS","READY","LOCKED_FOR_MAPPING","MAPPED","LOCKED_FOR_VALIDATION","VALIDATED","INVALIDATED","BADIMAGERY","stops","visibility","priorityFeatureCollection","poly","popup","Popup","closeButton","closeOnClick","offset","setHTML","trackPointer","on","mappedBy","addTo","getCanvas","cursor","isOpen","_canvasContainer","classList","someResultsReady","mapReadyTasksReady","isStyleLoaded","tasksReadyMapLoading","mapLayersAlreadyDefined","setData","lr","setLayoutProperty","setFilter","off","AnotherProjectLock","lockedTasksLength","useLocation","directedFrom","pathname","SameProjectLock","useNavigate","mapOrValidate","LicenseError","lockTasks","license","setLicense","fetchLicense","plainText","LockError","setSelectedTasks","shouldShowDeselectButton","LockErrorButtons","hasTasksChanged","setHasTasksChanged","handleDeselectAndValidate","userMappedTaskIds","feature","remainingSelectedTasks","selectedTask","LockedTaskModalContent","licenseError","licenseId","DownloadAOIButton","download","MappedIcon","DownloadTaskGridButton","NineCellsGridIcon","ProjectInstructions","isProjectArchived","htmlInstructions","__html","ChangesetCommentTags","CheckCircle","MutationObserver","Subscribable","client","super","setOptions","bindMethods","updateResult","bind","reset","prevOptions","defaultMutationOptions","shallowEqualObjects","getMutationCache","notify","currentMutation","observer","onUnsubscribe","hasListeners","removeObserver","onMutationUpdate","notifyOptions","listeners","onError","getCurrentResult","currentResult","variables","mutateOptions","build","addObserver","getDefaultState","isSuccess","isError","isIdle","notifyManager","batch","context","onSettled","listener","noop","portalRoot","createElement","setAttribute","body","appendChild","Portal","Component","el","componentDidMount","componentWillUnmount","removeChild","ReactDOM","createPortal","useReadTaskComments","setReadTaskComments","invalidatedTaskHistory","useDisableBadImagery","disableBadImagery","setDisableBadImagery","wasSetAsBadImagery","wasRevertedToReady","CompletionTabForMapping","tasksIds","showReadCommentsAlert","historyTabSwitch","taskInstructions","taskComment","setTaskComment","selectedStatus","setSelectedStatus","showHelp","setShowHelp","showMapChangesModal","setShowMapChangesModal","setSplitTaskError","setRedirectToPreviousProject","radioInput","fetchLockedTasks","clearLockedTasks","localStorage","getItem","splitTaskMutation","invalidateProjectData","navigateToTasksPage","_err$response","_err$response$data","SubCode","toast","stopMappingMutation","submitTaskMutation","formData","numTasks","invalidateQueries","taskIds","lastLockedTasksIds","lastLockedProjectId","modal","closeOnEscape","closeOnDocumentClick","onClose","UnsavedMapChangesModalContent","TaskSplitErrorModalContent","onKeyDown","TaskSpecificInstructions","QuestionCircleIcon","CompletionInstructions","setVisibility","htmlFor","CheckBoxInput","changeState","isActive","onSubmitTask","onSplitTask","onStopMapping","CompletionTabForValidation","validationStatus","setValidationStatus","validationComments","setValidationComments","stopValidationMutation","updateStatus","newStatus","updateComment","newComment","copyCommentToTasks","statusFilter","areAllTasksVerified","filterParam","number","every","tempObj","TaskValidationSelector","currentStatus","isValidatingMultipleTasks","onStopValidation","resetTasks","showCommentInput","setShowCommentInput","enableCopy","setEnableCopy","contributorsList","setContributorsList","CommentIcon","PlusIcon","ClipboardIcon","ReopenEditor","callEditor","editorOptions","mappingEditors","validationEditors","toTop","SidebarToggle","setShowSidebar","activeEditor","iDContext","SidebarIcon","ui","restart","_ref10","setIsOpen","ChevronDownIcon","ChevronRightIcon","_classCallCheck","instance","Constructor","TypeError","_defineProperties","descriptor","enumerable","configurable","writable","defineProperty","_createClass","protoProps","staticProps","prototype","_defineProperty","obj","_extends","assign","hasOwnProperty","call","apply","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","_objectSpread2","getOwnPropertyDescriptors","defineProperties","_inherits","subClass","superClass","create","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","_assertThisInitialized","self","ReferenceError","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","toString","_isNativeReflectConstruct","Super","NewTarget","_slicedToArray","_arrayWithHoles","Symbol","iterator","_arr","_n","_d","_e","_s","_i","next","done","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_toConsumableArray","_arrayLikeToArray","_arrayWithoutHoles","iter","from","_iterableToArray","_nonIterableSpread","minLen","test","len","arr2","AccordionStore","_this","_ref$expanded","expanded","_expanded","_ref$allowMultipleExp","allowMultipleExpanded","_ref$allowZeroExpande","allowZeroExpanded","uuid","isItemDisabled","isItemExpanded","augment","expandedUuid","isExpanded","isOnlyOneExpanded","Boolean","dangerouslySetExpanded","getButtonId","getPanelId","hidden","tabIndex","args","Context","createContext","Provider","_React$PureComponent","_super","_len","_key","preExpanded","setState","toggleExpanded","getPanelAttributes","getHeadingAttributes","getButtonAttributes","_this$state","DisplayName","Consumer","_React$PureComponent2","_super2","_this2","_len3","_key3","renderChildren","Accordion","_ref$className","rest","DisplayName$1","counter","idRegex","assertValidHtmlId","htmlId","Context$1","Provider$1","accordionContext","panelAttributes","headingAttributes","buttonAttributes","ProviderWrapper","Consumer$1","AccordionItem","customUuid","activeClassName","instanceUuid","nextUuid","itemContext","getClosestAccordion","matches","parentElement","getSiblingButtons","parentAccordion","querySelectorAll","displayName","keycodes","AccordionItemButton","evt","keyCode","preventDefault","HTMLElement","first","focus","focusFirstSiblingOf","siblings","last","focusLastSiblingOf","currentIndex","previous","focusPreviousSiblingOf","focusNextSiblingOf","AccordionItemButtonWrapper","AccordionItemHeading","VALIDATE","setRef","childElementCount","firstElementChild","getAttribute","AccordionItemHeadingWrapper","AccordionItemPanel","region","attrs","MultipleTaskHistoriesAccordion","n1","n2","ResourcesTab","tasksGeojson","activeTask","setActiveTask","geojson","filteredTasks","useTaskBbox","Select","classNamePrefix","isClearable","getOptionLabel","getOptionValue","isMulti","isSearchable","ActionTabsNav","activeSection","setActiveSection","activeTasks","taskHistoryLength","tabContainerRef","HorizontalScroll","menuItemsContainerRef","containerClass","SessionAboutToExpire","showSessionExpiringDialog","setShowSessionExpiryDialog","getTasks","expiredTimeoutRef","isSessionExtended","setIsSessionExtended","setIsError","handleTimeExtend","clearTimeout","handleClose","SessionExpired","showSessionExpiredDialog","setShowSessionExpiredDialog","isTaskRelocked","setIsTaskRelocked","count","Editor","lazy","RapiDEditor","MINUTES_BEFORE_DIALOG","TaskMapAction","_taskDetail$taskHisto","useSetProjectPageTitleTag","aboutToExpireTimeoutRef","setActiveEditor","isJosmError","setIsJosmError","setDisable","historyTabChecked","setHistoryTabChecked","setShowSessionExpiringDialog","setSessionTimeExpiredDialog","lastUpdated","setSeconds","getSeconds","autoUnlockSeconds","taskDetail","priorityArea","isPriorityAreaError","getTaskGpxUrlCallback","formatImageryUrlCallback","tempTimer","milliDifferenceForSessionExpire","milliDifferenceForAboutToSessionExpire","defaultEditor","editorToUse","_location$state","setItem","removeItem","Suspense","fallback","rows","ready","presets","gpxUrl","powerUser","rapidPowerUser","mappingTypes","mappingLevel","perTaskInstructions","jsonp","onOpen","useLockedTasksQuery","_data$data","cacheTime","MapTask","useParams","TaskAction","ValidateTask","setEditor","useQueryParam","StringParam","lockedTasksStatus","refetch","isVisible","noLockedTasksMessage","currentProject","goToProjectButton","TaskActionPossible","projectStatus","tasksStatus"],"mappings":"6IAAA,uGAKO,MAAMA,EAAQC,IAMd,IANe,KACpBC,EAAO,OAAM,QACbC,GAAU,EAAK,OACfC,GAAS,EAAK,cACdC,EAAa,SACbC,GACDL,EACC,MAMMM,EANQ,CACZC,KAAMC,IACNC,QAASC,IACTC,QAASC,IACTC,MAAOC,KAEUb,GAenB,OACEc,eAAA,OACEC,UAAS,GAAAC,OAAKd,EAAS,KAAO,KAAI,0BAAAc,OAAyBf,EAAU,MAAQ,MAAK,KAAAe,OAfxE,CACZV,KAAM,2BACNE,QAAS,gCACTE,QAAS,2BACTE,MAAO,6BAYGZ,IACLI,SAAA,CAEHa,cAACZ,EAAI,CAACU,UAAS,mBAAAC,OAbD,CAChBV,KAAM,OACNE,QAAS,aACTE,QAAS,OACTE,MAAO,YASyCZ,GAAK,KAAAgB,OAAIb,GAAiB,MACvEC,IACG,EAIH,SAASc,EAAWC,GAAmC,IAAlC,OAAEC,EAAM,OAAEC,EAAS,YAAYF,EACzD,MAAMG,EAAyB,aAAXD,EAAwB,4BAA8B,wBAE1E,OACEJ,cAACnB,EAAK,CAACE,KAAK,QAAOI,SACjBa,cAACM,IAAgB,IACXC,IAASF,GACbG,OAAQ,CACNL,OAAQA,MAKlB,C,oCC1DA,YAKeM,gBAAe,CAC5BC,eAAgB,CACdC,GAAI,6BACJC,eAAgB,wDAElBC,aAAc,CACZF,GAAI,8BACJC,eAAgB,gBAElBE,oBAAqB,CACnBH,GAAI,0CACJC,eAAgB,4EAElBG,UAAW,CACTJ,GAAI,2BACJC,eAAgB,8BAElBI,sBAAuB,CACrBL,GAAI,uCACJC,eAAgB,uBAElBK,yBAA0B,CACxBN,GAAI,kCACJC,eAAgB,8EAElBM,wBAAyB,CACvBP,GAAI,kCACJC,eAAgB,qBAElBO,cAAe,CACbR,GAAI,+BACJC,eAAgB,UAElBQ,iBAAkB,CAChBT,GAAI,kCACJC,eAAgB,aAElBS,sBAAuB,CACrBV,GAAI,uCACJC,eAAgB,UAElBU,oBAAqB,CACnBX,GAAI,qCACJC,eAAgB,QAElBW,sBAAuB,CACrBZ,GAAI,uCACJC,eAAgB,UAElBY,mBAAoB,CAClBb,GAAI,oCACJC,eAAgB,OAElBa,6BAA8B,CAC5Bd,GAAI,6BACJC,eAAgB,2BAElBc,eAAgB,CACdf,GAAI,gCACJC,eAAgB,oBAElBe,QAAS,CACPhB,GAAI,yBACJC,eAAgB,WAElBgB,YAAa,CACXjB,GAAI,6BACJC,eAAgB,gBAElBiB,OAAQ,CACNlB,GAAI,wBACJC,eAAgB,UAElBkB,aAAc,CACZnB,GAAI,+BACJC,eAAgB,iBAElBmB,MAAO,CACLpB,GAAI,uBACJC,eAAgB,SAElBoB,aAAc,CACZrB,GAAI,8BACJC,eAAgB,gBAElBqB,QAAS,CACPtB,GAAI,yBACJC,eAAgB,WAElBsB,eAAgB,CACdvB,GAAI,6BACJC,eAAgB,oBAElBuB,eAAgB,CACdxB,GAAI,6BACJC,eAAgB,oBAElBwB,gBAAiB,CACfzB,GAAI,8BACJC,eAAgB,qBAElByB,WAAY,CACV1B,GAAI,8CACJC,eAAgB,cAElB0B,SAAU,CACR3B,GAAI,yBACJC,eAAgB,aAElB2B,SAAU,CACR5B,GAAI,yBACJC,eAAgB,aAElB4B,eAAgB,CACd7B,GAAI,gCACJC,eAAgB,oBAElB6B,oBAAqB,CACnB9B,GAAI,qCACJC,eAAgB,yBAElB8B,WAAY,CACV/B,GAAI,2CACJC,eACE,2FAEJ+B,eAAgB,CACdhC,GAAI,4CACJC,eAAgB,uCAElBgC,qBAAsB,CACpBjC,GAAI,qDACJC,eAAgB,0DAElBiC,KAAM,CACJlC,GAAI,6CACJC,eAAgB,QAElBkC,MAAO,CACLnC,GAAI,uBACJC,eAAgB,SAElBmC,KAAM,CACJpC,GAAI,sBACJC,eAAgB,QAElBoC,eAAgB,CACdrC,GAAI,iCACJC,eAAgB,mBAElBqC,oBAAqB,CACnBtC,GAAI,mCACJC,eAAgB,uBAElBsC,OAAQ,CACNvC,GAAI,wBACJC,eAAgB,UAElBuC,UAAW,CACTxC,GAAI,qCACJC,eAAgB,gBAElBwC,eAAgB,CACdzC,GAAI,wCACJC,eAAgB,qBAElByC,YAAa,CACX1C,GAAI,6BACJC,eAAgB,iBAElB0C,qBAAsB,CACpB3C,GAAI,yCACJC,eAAgB,oBAElB2C,uBAAwB,CACtB5C,GAAI,2CACJC,eAAgB,6BAElB4C,wBAAyB,CACvB7C,GAAI,4CACJC,eAAgB,uBAElB6C,2BAA4B,CAC1B9C,GAAI,+CACJC,eACE,wFAEJ8C,6BAA8B,CAC5B/C,GAAI,iDACJC,eACE,sGAEJ+C,8BAA+B,CAC7BhD,GAAI,kDACJC,eAAgB,oEAElBgD,SAAU,CACRjD,GAAI,mCACJC,eAAgB,YAElBiD,eAAgB,CACdlD,GAAI,2CACJC,eAAgB,sCAElBkD,YAAa,CACXnD,GAAI,sCACJC,eAAgB,eAElBmD,qBAAsB,CACpBpD,GAAI,+CACJC,eAAgB,0BAElBoD,cAAe,CACbrD,GAAI,wCACJC,eAAgB,iBAElBqD,sBAAuB,CACrBtD,GAAI,gDACJC,eAAgB,0BAElBsD,gBAAiB,CACfvD,GAAI,0CACJC,eAAgB,qBAElBuD,qBAAsB,CACpBxD,GAAI,+CACJC,eAAgB,+BAElBwD,gCAAiC,CAC/BzD,GAAI,0DACJC,eACE,uJAEJyD,aAAc,CACZ1D,GAAI,+CACJC,eAAgB,wBAElB0D,WAAY,CACV3D,GAAI,mDACJC,eAAgB,cAElB2D,aAAc,CACZ5D,GAAI,uCACJC,eAAgB,gBAElB4D,gBAAiB,CACf7D,GAAI,0CACJC,eAAgB,oBAElB6D,kBAAmB,CACjB9D,GAAI,6CACJC,eAAgB,+CAElB8D,qBAAsB,CACpB/D,GAAI,sDACJC,eAAgB,6EAElB+D,aAAc,CACZhE,GAAI,uBACJC,eAAgB,SAElBgE,gBAAiB,CACfjE,GAAI,0BACJC,eAAgB,YAElBiE,iBAAkB,CAChBlE,GAAI,2BACJC,eAAgB,aAElBkE,gBAAiB,CACfnE,GAAI,0BACJC,eAAgB,aAElBmE,kBAAmB,CACjBpE,GAAI,4BACJC,eAAgB,6CAElBoE,kBAAmB,CACjBrE,GAAI,4BACJC,eAAgB,kBAElBqE,wBAAyB,CACvBtE,GAAI,oCACJC,eAAgB,4CAElBsE,mBAAoB,CAClBvE,GAAI,6BACJC,eAAgB,gBAElBuE,iBAAkB,CAChBxE,GAAI,kCACJC,eAAgB,uBAElBwE,UAAW,CACTzE,GAAI,sBACJC,eAAgB,mBAElByE,YAAa,CACX1E,GAAI,wBACJC,eAAgB,gBAElB0E,eAAgB,CACd3E,GAAI,2BACJC,eAAgB,mBAElB2E,aAAc,CACZ5E,GAAI,wBACJC,eAAgB,kDAElB4E,eAAgB,CACd7E,GAAI,yBACJC,eAAgB,oBAElB6E,gBAAiB,CACf9E,GAAI,yBACJC,eAAgB,qBAElB8E,yBAA0B,CACxB/E,GAAI,6BACJC,eAAgB,oDAElB+E,+BAAgC,CAC9BhF,GAAI,mCACJC,eAAgB,yDAElBgF,qBAAsB,CACpBjF,GAAI,4CACJC,eAAgB,0BAElBiF,uBAAwB,CACtBlF,GAAI,iCACJC,eAAgB,yD,oCChVpB,YAKeH,gBAAe,CAC5BQ,yBAA0B,CACxBN,GAAI,gCACJC,eAAgB,+BAElBM,wBAAyB,CACvBP,GAAI,gCACJC,eAAgB,qBAElBO,cAAe,CACbR,GAAI,6BACJC,eAAgB,eAElBQ,iBAAkB,CAChBT,GAAI,gCACJC,eAAgB,kBAElBkF,kBAAmB,CACjBnF,GAAI,iCACJC,eAAgB,oBAElBS,sBAAuB,CACrBV,GAAI,qCACJC,eAAgB,UAElBU,oBAAqB,CACnBX,GAAI,mCACJC,eAAgB,QAElBW,sBAAuB,CACrBZ,GAAI,qCACJC,eAAgB,UAElBY,mBAAoB,CAClBb,GAAI,kCACJC,eAAgB,OAElBmF,0BAA2B,CACzBpF,GAAI,iDACJC,eAAgB,mBAElBoF,wBAAyB,CACvBrF,GAAI,+CACJC,eAAgB,iBAElBqF,0BAA2B,CACzBtF,GAAI,iDACJC,eAAgB,mBAElBsF,uBAAwB,CACtBvF,GAAI,8CACJC,eAAgB,gBAElBa,6BAA8B,CAC5Bd,GAAI,2BACJC,eAAgB,2BAElBgB,YAAa,CACXjB,GAAI,mCACJC,eAAgB,QAElBuF,YAAa,CACXxF,GAAI,mCACJC,eAAgB,gBAElBwF,aAAc,CACZzF,GAAI,oCACJC,eAAgB,SAElByF,UAAW,CACT1F,GAAI,2BACJC,eAAgB,yBAElB0F,eAAgB,CACd3F,GAAI,gCACJC,eAAgB,qB,oCChFpB,YAKeH,gBAAe,CAC5B8F,eAAgB,CACd5F,GAAI,0CACJC,eAAgB,qCAElB4F,sBAAuB,CACrB7F,GAAI,0CACJC,eAAgB,gDAElB6F,uBAAwB,CACtB9F,GAAI,2CACJC,eAAgB,qDAElB8F,6BAA8B,CAC5B/F,GAAI,kDACJC,eAAgB,gDAElB+F,sBAAuB,CACrBhG,GAAI,4CACJC,eAAgB,kEAElBgG,WAAY,CACVjG,GAAI,wDACJC,eAAgB,SAElBiG,oBAAqB,CACnBlG,GAAI,8EACJC,eAAgB,yBAElBkG,uBAAwB,CACtBnG,GAAI,8CACJC,eAAgB,+BAElBmG,0BAA2B,CACzBpG,GAAI,0DACJC,eAAgB,qEAElBoG,2BAA4B,CAC1BrG,GAAI,yCACJC,eAAgB,4BAElBqG,sCAAuC,CACrCtG,GAAI,qDACJC,eACE,6FAEJsG,sBAAuB,CACrBvG,GAAI,8CACJC,eAAgB,sBAElBuG,iCAAkC,CAChCxG,GAAI,qDACJC,eAAgB,qCAElBwG,oBAAqB,CACnBzG,GAAI,6CACJC,eAAgB,0BAElByG,+BAAgC,CAC9B1G,GAAI,mDACJC,eAAgB,wDAElB0G,yBAA0B,CACxB3G,GAAI,kDACJC,eAAgB,yBAElB2G,oCAAqC,CACnC5G,GAAI,wDACJC,eAAgB,qDAElB4G,kBAAmB,CACjB7G,GAAI,2CACJC,eAAgB,kBAElB6G,6BAA8B,CAC5B9G,GAAI,iDACJC,eAAgB,qDAElB8G,2BAA4B,CAC1B/G,GAAI,qDACJC,eAAgB,4BAElB+G,sCAAuC,CACrChH,GAAI,2DACJC,eAAgB,iDAElBgH,8BAA+B,CAC7BjH,GAAI,wDACJC,eAAgB,+BAElBiH,yCAA0C,CACxClH,GAAI,8DACJC,eACE,sFAEJkH,UAAW,CACTnH,GAAI,2BACJC,eAAgB,+BAElBmH,qBAAsB,CACpBpH,GAAI,uCACJC,eACE,wFAEJoH,UAAW,CACTrH,GAAI,mCACJC,eAAgB,mDAElBqH,qBAAsB,CACpBtH,GAAI,+CACJC,eACE,2IAEJsH,iBAAkB,CAChBvH,GAAI,yCACJC,eAAgB,wCAElBuH,4BAA6B,CAC3BxH,GAAI,+CACJC,eAAgB,wEAElBwH,cAAe,CACbzH,GAAI,0CACJC,eAAgB,UAElByH,OAAQ,CACN1H,GAAI,kCACJC,eAAgB,UAElB0H,kBAAmB,CACjB3H,GAAI,2CACJC,eAAgB,uDAElB2H,+BAAgC,CAC9B5H,GAAI,gEACJC,eACE,qHAEJ4H,6BAA8B,CAC5B7H,GAAI,8DACJC,eACE,qHAEJ6H,+BAAgC,CAC9B9H,GAAI,gEACJC,eACE,qIAEJ8H,6BAA8B,CAC5B/H,GAAI,8DACJC,eACE,gJAEJ+H,YAAa,CACXhI,GAAI,gDACJC,eAAgB,4BAElBgI,oBAAqB,CACnBjI,GAAI,yDACJC,eAAgB,6BAElBiI,kBAAmB,CACjBlI,GAAI,uDACJC,eAAgB,+BAElBkI,OAAQ,CACNnI,GAAI,2BACJC,eAAgB,UAElBc,eAAgB,CACdf,GAAI,yBACJC,eAAgB,oBAElBiB,OAAQ,CACNlB,GAAI,iBACJC,eAAgB,UAElBkB,aAAc,CACZnB,GAAI,wBACJC,eAAgB,iBAElBmI,kBAAmB,CACjBpI,GAAI,oCACJC,eAAgB,kCAElBoI,aAAc,CACZrI,GAAI,+BACJC,eAAgB,iBAElBqI,WAAY,CACVtI,GAAI,6BACJC,eAAgB,eAElBsI,YAAa,CACXvI,GAAI,uBACJC,eAAgB,gBAElBuI,0BAA2B,CACzBxI,GAAI,8CACJC,eAAgB,gCAElBwI,gCAAiC,CAC/BzI,GAAI,oDACJC,eACE,oIAEJyI,WAAY,CACV1I,GAAI,6BACJC,eAAgB,kBAElB0I,gBAAiB,CACf3I,GAAI,kCACJC,eAAgB,kCAElB2I,sBAAuB,CACrB5I,GAAI,wCACJC,eAAgB,mDAElB4I,oBAAqB,CACnB7I,GAAI,uCACJC,eAAgB,4BAElB6I,0BAA2B,CACzB9I,GAAI,6CACJC,eACE,2IAEJ8I,WAAY,CACV/I,GAAI,6BACJC,eAAgB,kDAElB+I,aAAc,CACZhJ,GAAI,+BACJC,eAAgB,wEAElBgJ,gBAAiB,CACfjJ,GAAI,kCACJC,eACE,mFAEJiJ,YAAa,CACXlJ,GAAI,uBACJC,eAAgB,gBAElBkJ,aAAc,CACZnJ,GAAI,+BACJC,eAAgB,wDAElBmJ,KAAM,CACJpJ,GAAI,eACJC,eAAgB,QAElBmB,MAAO,CACLpB,GAAI,gBACJC,eAAgB,SAElBoJ,OAAQ,CACNrJ,GAAI,iBACJC,eAAgB,cAElBoB,aAAc,CACZrB,GAAI,uBACJC,eAAgB,gBAElBqJ,kBAAmB,CACjBtJ,GAAI,qBACJC,eACE,kGAEJsJ,4BAA6B,CAC3BvJ,GAAI,sCACJC,eACE,qJAEJuJ,iBAAkB,CAChBxJ,GAAI,2BACJC,eAAgB,qBAElBoD,cAAe,CACbrD,GAAI,wBACJC,eAAgB,iBAElBwJ,WAAY,CACVzJ,GAAI,mCACJC,eAAgB,iBAElBqB,QAAS,CACPtB,GAAI,kBACJC,eAAgB,WAElBsB,eAAgB,CACdvB,GAAI,sBACJC,eAAgB,oBAElBuB,eAAgB,CACdxB,GAAI,sBACJC,eAAgB,oBAElBwB,gBAAiB,CACfzB,GAAI,uBACJC,eAAgB,qBAElByJ,YAAa,CACX1J,GAAI,8BACJC,eAAgB,gBAElB0J,iBAAkB,CAChB3J,GAAI,4BACJC,eAAgB,wBAElB2J,eAAgB,CACd5J,GAAI,uBACJC,eAAgB,oBAElB4J,SAAU,CACR7J,GAAI,iDACJC,eAAgB,cAElB6J,gBAAiB,CACf9J,GAAI,mDACJC,eAAgB,qBAElB8J,eAAgB,CACd/J,GAAI,kDACJC,eAAgB,oBAElB+J,cAAe,CACbhK,GAAI,sDACJC,eAAgB,mBAElBgK,qBAAsB,CACpBjK,GAAI,wDACJC,eACE,oFAEJiK,oBAAqB,CACnBlK,GAAI,uDACJC,eAAgB,yBAElBkK,qBAAsB,CACpBnK,GAAI,wDACJC,eAAgB,0BAElBmK,cAAe,CACbpK,GAAI,iDACJC,eAAgB,kBAElBoK,iBAAkB,CAChBrK,GAAI,oDACJC,eAAgB,qBAElBqK,eAAgB,CACdtK,GAAI,gCACJC,eAAgB,0BAElBsK,eAAgB,CACdvK,GAAI,6BACJC,eAAgB,oBAElBuK,WAAY,CACVxK,GAAI,0BACJC,eAAgB,oBAElBwK,aAAc,CACZzK,GAAI,8BACJC,eAAgB,kBAElByK,eAAgB,CACd1K,GAAI,gCACJC,eAAgB,qCAElB0K,0BAA2B,CACzB3K,GAAI,+BACJC,eAAgB,kBAElB2K,iBAAkB,CAChB5K,GAAI,6BACJC,eAAgB,yBAElB4K,kBAAmB,CACjB7K,GAAI,8BACJC,eAAgB,wBAElB6K,kBAAmB,CACjB9K,GAAI,8BACJC,eAAgB,UAElB8K,8BAA+B,CAC7B/K,GAAI,wCACJC,eAAgB,sBAElB+K,iCAAkC,CAChChL,GAAI,2CACJC,eAAgB,yBAElBgL,qBAAsB,CACpBjL,GAAI,iCACJC,eAAgB,YAElBiL,uBAAwB,CACtBlL,GAAI,mCACJC,eAAgB,uBAElBkL,sBAAuB,CACrBnL,GAAI,kCACJC,eAAgB,eAElBmL,iBAAkB,CAChBpL,GAAI,6BACJC,eAAgB,SAElBoL,SAAU,CACRrL,GAAI,2BACJC,eAAgB,uBAElBqL,yBAA0B,CACxBtL,GAAI,6BACJC,eAAgB,yBAElBsL,0BAA2B,CACzBvL,GAAI,qCACJC,eAAgB,0BAElBuL,UAAW,CACTxL,GAAI,2BACJC,eAAgB,OAElBwL,sBAAuB,CACrBzL,GAAI,uCACJC,eAAgB,wBAElByL,iBAAkB,CAChB1L,GAAI,kCACJC,eAAgB,yBAElB0L,aAAc,CACZ3L,GAAI,oCACJC,eAAgB,wBAElB2L,iBAAkB,CAChB5L,GAAI,6BACJC,eAAgB,uDAElB4L,WAAY,CACV7L,GAAI,kCACJC,eAAgB,cAElB6L,QAAS,CACP9L,GAAI,+BACJC,eAAgB,WAElB8L,oBAAqB,CACnB/L,GAAI,iCACJC,eAAgB,YAElB+L,sBAAuB,CACrBhM,GAAI,mCACJC,eAAgB,cAElBgM,eAAgB,CACdjM,GAAI,4BACJC,eAAgB,OAElBiM,YAAa,CACXlM,GAAI,qCACJC,eAAgB,gBAElBkM,iBAAkB,CAChBnM,GAAI,4CACJC,eAAgB,gBAElBmM,yBAA0B,CACxBpM,GAAI,oDACJC,eAAgB,2BAElBoM,uBAAwB,CACtBrM,GAAI,kDACJC,eAAgB,4BAElBqM,UAAW,CACTtM,GAAI,iCACJC,eAAgB,aAElBsM,mBAAoB,CAClBvM,GAAI,4CACJC,eAAgB,kCAElBuM,mBAAoB,CAClBxM,GAAI,gDACJC,eAAgB,iEAElBwM,aAAc,CACZzM,GAAI,0CACJC,eAAgB,mBAElByM,oBAAqB,CACnB1M,GAAI,kDACJC,eAAgB,8BAElB0M,mBAAoB,CAClB3M,GAAI,gDACJC,eAAgB,oBAElB2M,QAAS,CACP5M,GAAI,qCACJC,eAAgB,WAElB4M,0BAA2B,CACzB7M,GAAI,iDACJC,eAAgB,6CAElB6M,mBAAoB,CAClB9M,GAAI,iDACJC,eAAgB,gCAElB8M,WAAY,CACV/M,GAAI,uCACJC,eAAgB,eAElB+M,gBAAiB,CACfhN,GAAI,kCACJC,eAAgB,wBAElBgN,uBAAwB,CACtBjN,GAAI,+CACJC,eAAgB,0DAElBiN,iBAAkB,CAChBlN,GAAI,oCACJC,eAAgB,mBAElBkN,wBAAyB,CACvBnN,GAAI,iDACJC,eAAgB,2DAElBmN,QAAS,CACPpN,GAAI,4CACJC,eAAgB,uBAElBoN,IAAK,CACHrN,GAAI,wCACJC,eAAgB,OAElBqN,GAAI,CACFtN,GAAI,uCACJC,eAAgB,MAElBsN,eAAgB,CACdvN,GAAI,+CACJC,eAAgB,mCAElBuN,kBAAmB,CACjBxN,GAAI,kDACJC,eACE,0FAEJwN,SAAU,CACRzN,GAAI,wCACJC,eAAgB,OAElByN,WAAY,CACV1N,GAAI,0CACJC,eAAgB,MAElB0N,WAAY,CACV3N,GAAI,2CACJC,eAAgB,sBAElB2N,UAAW,CACT5N,GAAI,kCACJC,eAAgB,cAElB4N,eAAgB,CACd7N,GAAI,wCACJC,eAAgB,yCAElB6N,0BAA2B,CACzB9N,GAAI,oDACJC,eAAgB,wDAElB8N,sBAAuB,CACrB/N,GAAI,gDACJC,eAAgB,8CAElB+N,kBAAmB,CACjBhO,GAAI,2CACJC,eAAgB,uBAElBgO,iBAAkB,CAChBjO,GAAI,0CACJC,eAAgB,4CAElBiO,eAAgB,CACdlO,GAAI,uCACJC,eAAgB,mBAElBkO,oBAAqB,CACnBnO,GAAI,6CACJC,eAAgB,+CAElBmO,SAAU,CACRpO,GAAI,iCACJC,eAAgB,aAElBoO,WAAY,CACVrO,GAAI,mCACJC,eAAgB,eAElBqO,YAAa,CACXtO,GAAI,oCACJC,eAAgB,gBAElBsO,gBAAiB,CACfvO,GAAI,yCACJC,eACE,uFAEJuO,aAAc,CACZxO,GAAI,8BACJC,eAAgB,YAElBwO,gBAAiB,CACfzO,GAAI,oCACJC,eAAgB,oBAElByO,qBAAsB,CACpB1O,GAAI,0CACJC,eAAgB,oEAElB0O,SAAU,CACR3O,GAAI,oCACJC,eAAgB,aAElB2O,UAAW,CACT5O,GAAI,oCACJC,eAAgB,iBAElB4O,iBAAkB,CAChB7O,GAAI,2CACJC,eAAgB,0BAElB6O,sBAAuB,CACrB9O,GAAI,gDACJC,eAAgB,2BAElB8O,YAAa,CACX/O,GAAI,yBACJC,eAAgB,kBAElB0D,WAAY,CACV3D,GAAI,+BACJC,eAAgB,cAElB+O,WAAY,CACVhP,GAAI,2CACJC,eAAgB,eAElBgP,cAAe,CACbjP,GAAI,8CACJC,eAAgB,kBAElBiP,kBAAmB,CACjBlP,GAAI,oCACJC,eAAgB,yBAElBkP,aAAc,CACZnP,GAAI,gCACJC,eAAgB,6BAElBmP,mBAAoB,CAClBpP,GAAI,gCACJC,eAAgB,aAElBoP,qBAAsB,CACpBrP,GAAI,6CACJC,eAAgB,qDAElBqP,cAAe,CACbtP,GAAI,sCACJC,eAAgB,+CAElBsP,sBAAuB,CACrBvP,GAAI,yCACJC,eAAgB,2DAElBuP,yBAA0B,CACxBxP,GAAI,sCACJC,eAAgB,sBAElBwP,4BAA6B,CAC3BzP,GAAI,yCACJC,eAAgB,yBAElByP,+BAAgC,CAC9B1P,GAAI,4CACJC,eAAgB,sCAElB0P,kCAAmC,CACjC3P,GAAI,+CACJC,eAAgB,yCAElB2P,8BAA+B,CAC7B5P,GAAI,2CACJC,eAAgB,yCAElB4P,iCAAkC,CAChC7P,GAAI,8CACJC,eAAgB,4CAElB6P,sBAAuB,CACrB9P,GAAI,mCACJC,eAAgB,yBAElB8P,kBAAmB,CACjB/P,GAAI,+BACJC,eAAgB,oBAElB+P,qBAAsB,CACpBhQ,GAAI,kCACJC,eAAgB,uBAElBgQ,uBAAwB,CACtBjQ,GAAI,oCACJC,eAAgB,iCAElBiQ,iBAAkB,CAChBlQ,GAAI,8BACJC,eAAgB,gBAElBkQ,iBAAkB,CAChBnQ,GAAI,8BACJC,eAAgB,+BAElBmQ,IAAK,CACHpQ,GAAI,2BACJC,eAAgB,OAElBoQ,OAAQ,CACNrQ,GAAI,8BACJC,eAAgB,UAElBqQ,SAAU,CACRtQ,GAAI,gCACJC,eAAgB,YAElBsQ,UAAW,CACTvQ,GAAI,iCACJC,eAAgB,aAElBuQ,MAAO,CACLxQ,GAAI,6BACJC,eAAgB,SAElBwQ,SAAU,CACRzQ,GAAI,+BACJC,eAAgB,0BAElByQ,cAAe,CACb1Q,GAAI,wCACJC,eAAgB,6BAElB0Q,uBAAwB,CACtB3Q,GAAI,oBACJC,eAAgB,aAElB2Q,gBAAiB,CACf5Q,GAAI,oBACJC,eAAgB,cAElB4Q,qBAAsB,CACpB7Q,GAAI,yBACJC,eAAgB,YAElB6Q,yBAA0B,CACxB9Q,GAAI,6BACJC,eAAgB,gBAElB8Q,qBAAsB,CACpB/Q,GAAI,yBACJC,eAAgB,YAElB+Q,oBAAqB,CACnBhR,GAAI,0BACJC,eAAgB,aAElBgR,WAAY,CACVjR,GAAI,8BACJC,eAAgB,cAElBiR,aAAc,CACZlR,GAAI,2CACJC,eAAgB,qCAElBkR,gBAAiB,CACfnR,GAAI,8CACJC,eAAgB,wCAElBmR,aAAc,CACZpR,GAAI,wCACJC,eAAgB,sDAElBoR,qBAAsB,CACpBrR,GAAI,kCACJC,eAAgB,gDAElBqR,oCAAqC,CACnCtR,GAAI,gDACJC,eACE,wFAEJsR,+BAAgC,CAC9BvR,GAAI,2CACJC,eACE,mFAEJuR,8CAA+C,CAC7CxR,GAAI,0DACJC,eACE,6FAEJwR,2CAA4C,CAC1CzR,GAAI,uDACJC,eACE,sF,oCC5zBN,yHAGO,SAASyR,EAAsBC,GACpC,MAAMC,EAAcC,aAAaC,GAAUA,EAAMC,KAAKH,cAChDI,EAAgBH,aAAaC,GAAUA,EAAMC,KAAKC,gBAClDC,EAAUJ,aAAaC,GAAUA,EAAMC,KAAKE,WAC3CC,EAAWC,GAAgBC,oBAAS,GAkB3C,OAhBAC,qBAAU,KAEiB,UAArBT,EAAYU,MAAkBH,GAAa,GAG3CR,GAAWA,EAAQpP,QAAUqP,EAAYW,WAAaZ,EAAQpP,QAAQ4P,GAAa,GAEnFH,GAAiBA,EAAcQ,SAASb,EAAQc,eAAeN,GAAa,GAEhF,MAAMO,EAAQf,EAAQe,MAClBf,EAAQe,MAAMC,QAAQvQ,GAAuB,oBAAdA,EAAKkQ,OAA4BlC,KAAKhO,GAASA,EAAKwQ,SACnF,GACAX,GAAWA,EAAQY,MAAMC,GAASJ,EAAMF,SAASM,MACnDX,GAAa,EACf,GACC,CAACF,EAASL,EAAYU,KAAMV,EAAYW,SAAUP,EAAeL,IAC7D,CAACO,EACV,CAEO,SAASa,EAAmB3Q,GACjC,MAAMwP,EAAcC,aAAaC,GAAUA,EAAMC,KAAKH,cAChDI,EAAgBH,aAAaC,GAAUA,EAAMC,KAAKC,gBAClDC,EAAUJ,aAAaC,GAAUA,EAAMC,KAAKE,WAC3CC,EAAWC,GAAgBC,oBAAS,GAoB3C,OAlBAC,qBAAU,KASR,GAPyB,UAArBT,EAAYU,MAAkBH,GAAa,GAE3CH,GAAiBA,EAAcQ,SAASpQ,EAAK4Q,kBAAkBb,GAAa,GAG5EF,GAAWA,EAAQO,SAASpQ,EAAKwQ,SAAST,GAAa,GAEvD/P,EAAK6Q,QAAS,CAChB,MAAMC,EAAW9Q,EAAK6Q,QACnBN,QAAQQ,GAAWA,EAAOC,QAA8B,YAApBD,EAAOE,WAC3CjD,KAAK+C,GAAWA,EAAOZ,WACtBX,EAAYW,UAAYW,EAASV,SAASZ,EAAYW,WACxDJ,GAAa,EAEjB,IACC,CAACF,EAASL,EAAYU,KAAMV,EAAYW,SAAUP,EAAe5P,IAC7D,CAAC8P,EACV,CAEO,SAASoB,EAAkBC,GAChC,MAAM3B,EAAcC,aAAaC,GAAUA,EAAMC,KAAKH,cAChDI,EAAgBH,aAAaC,GAAUA,EAAMC,KAAKC,iBACjDE,EAAWC,GAAgBC,oBAAS,GAe3C,OAbAC,qBAAU,KAEiB,UAArBT,EAAYU,MAAkBH,GAAa,GAG3CoB,GAAOA,EAAIC,gBAAkBxB,GAAiBA,EAAcQ,SAASe,EAAIC,iBAC3ErB,GAAa,GAGXoB,GAAOA,EAAIL,UAAYK,EAAIL,SAAS9C,KAAKqD,GAAMA,EAAElB,WAAUC,SAASZ,EAAYW,WAClFJ,GAAa,EACf,GACC,CAACoB,EAAKvB,EAAeJ,EAAYW,SAAUX,EAAYU,OACnD,CAACJ,EACV,C,oCC1EA,YAKepS,gBAAe,CAC5B4T,kBAAmB,CACjB1T,GAAI,kCACJC,eAAgB,4BAElB0T,sBAAuB,CACrB3T,GAAI,qCACJC,eAAgB,qBAElB2T,eAAgB,CACd5T,GAAI,iCACJC,eAAgB,sBAElB4T,YAAa,CACX7T,GAAI,gCACJC,eAAgB,iBAElB6T,aAAc,CACZ9T,GAAI,8BACJC,eAAgB,4CAElB8T,mBAAoB,CAClB/T,GAAI,iCACJC,eAAgB,sEAElB+T,iBAAkB,CAChBhU,GAAI,+BACJC,eAAgB,oEAElBgU,uBAAwB,CACtBjU,GAAI,qCACJC,eAAgB,uEAElBiU,iBAAkB,CAChBlU,GAAI,mCACJC,eAAgB,sBAElBkU,cAAe,CACbnU,GAAI,gCACJC,eAAgB,sBAElBmU,MAAO,CACLpU,GAAI,iBACJC,eAAgB,SAElBoU,QAAS,CACPrU,GAAI,mBACJC,eAAgB,WAElBqU,YAAa,CACXtU,GAAI,4BACJC,eAAgB,yCAElBsU,kBAAmB,CACjBvU,GAAI,kCACJC,eAAgB,uB,oCC5DpB,4EAMO,SAASuU,EAAWrW,GAAgD,IAA/C,SAAEsW,EAAQ,aAAEC,EAAY,SAAEC,GAAkBxW,EAClEyW,EAAQ,yBAIZ,MAHiB,WAAbH,IAAuBG,EAAQ,cAClB,SAAbH,IAAqBG,EAAQ,oBAG/BvV,cAACM,IAAgB,IAAKC,IAAS,sBAADR,OAAuBqV,IAAWjW,SAC5DqW,GACA3V,eAAA,OAAKC,UAAS,oBAAAC,OAAsBwV,EAAK,KAAAxV,OAAIsV,GAAgBI,MAAOD,EAAIrW,SAAA,CACrEmW,GAAYtV,cAAC0V,IAAS,CAAC5V,UAAS,GAAAC,OAAKwV,EAAK,cAAcI,MAAO,CAAEC,OAAQ,UACzER,EACCpV,cAAA,QAAMF,UAAU,YAAWX,SACzBa,cAACM,IAAgB,IAAKC,IAAS,kBAADR,OAAmBqV,QAGnD,OAMZ,C,oCC3BA,oEAKO,MAAMS,EAAmB/W,IAAoC,IAAnC,OAAEgX,EAAM,UAAEhW,GAAmBhB,EAC5D,MAAMiX,EAAoB,UAAXD,EAAqB,SAAW,YAC/C,OACE9V,cAAA,OAAKF,UAAS,uBAAAC,OAAyBgW,EAAM,KAAAhW,OAAIgW,EAAM,KAAAhW,OAAID,GAAYX,SACrEa,cAACM,IAAgB,IAAKC,IAAS,UAADR,OAAW+V,OACrC,C,oCCVV,4EAKe,SAASE,EAAgBlX,GAAiB,IAAhB,UAAEgB,GAAWhB,EACpD,OACEkB,cAAA,OAAKF,UAAWA,EAAUX,SACxBU,eAAChB,IAAK,CAACE,KAAK,UAAUG,cAAc,QAAOC,SAAA,CACzCa,cAAA,MAAIF,UAAU,kCAAiCX,SAC7Ca,cAACM,IAAgB,IAAKC,IAAS0V,0BAEjCjW,cAAA,OAAKF,UAAU,eAAcX,SAC3Ba,cAACM,IAAgB,IACXC,IAAS2V,4BACb1V,OAAQ,CACN2V,EAAIX,GACFxV,cAAA,KAAGoW,OAAO,SAASC,IAAI,aAAaC,KAAK,yBAAwBnX,SAC9DqW,aASnB,C,8JCzBO,MAAMe,UAAkBC,IAAMC,cACnCC,SACE,OACE7W,eAAA,OACE8W,MAAM,6BACNC,MAAM,KACNhB,OAAO,KACPiB,KAAK,OACLC,QAAQ,YACR7D,KAAK,SACD8D,KAAKC,MAAK7X,SAAA,CAEda,cAAA,SAAAb,SAAO,UACPa,cAAA,QACE6W,KAAK,UACLI,SAAS,UACTC,EAAE,2XACFC,SAAS,cAIjB,ECdK,SAASC,EAAUtY,GAMd,IANe,QACzBuY,EAAO,aACPC,EAAY,WACZC,EAAU,iBACVC,GAAmB,EAAK,oBACxBC,GAAsB,GACf3Y,EACP,MAAM4Y,EAAOC,eACNC,EAAOC,GAAY9E,mBAAS+E,KAAKC,OAaxC,GAZA/E,qBAAU,KACR,IAAIgF,EAMJ,OALIV,IACFU,EAAWC,aAAY,KACrBJ,EAASC,KAAKC,MAAM,GACnBT,IAEE,KACLY,cAAcF,EAAS,CACxB,GACA,CAACV,SAEYa,IAAZd,QAA+Cc,IAAtB,IAAIL,KAAKT,GACpC,OAAO,KAGT,IAAIe,EAAU,CAAEC,SAAUX,EAAKY,OAAOC,MAAM,EAAG,GAAIC,UAAW,CAAC,MAAOC,QAAS,QAE1DN,IAAjBb,IACFc,EAAU,CAAEM,MAAO,CAAC,IAAK,KAAMC,OAAO,IAExC,MAAMC,EAAkB,IAAId,KAAKT,GAAWO,EAE5C,OAAIgB,EAAkB,EAElB/Y,eAAAgZ,WAAA,CAAA1Z,SAAA,CACEU,eAAA,QACEC,UAAS,qDAAAC,OACP6Y,EAAkB,WAA+BT,IAAjBb,EAC5B,eACA,mBAAkB,KAAAvX,OACpBuX,EAAe,GAAK,OACxB,WAAUC,EACV5B,MAAO,CAAEmD,WAAY,WAAYC,cAAe,YAAa5Z,SAAA,CAE3DqY,EAGAxX,cAACuW,EAAS,CAACX,OAAO,OAAOgB,MAAM,SAF/B5W,cAAC0V,IAAS,CAACE,OAAO,OAAOgB,MAAM,SAIjC5W,cAAA,QAAMF,UAAU,MAAKX,SACnBa,cAACM,IAAgB,CACfR,UAAU,YACNS,IAAuC,6BAC3CC,OAAQ,CACNwY,iBAAkBC,IAAiBL,EAAiBR,WAK3Db,GAAcvX,cAACkZ,IAAY,CAACC,MAAM,cAKrC1B,GACE5X,eAAA,QACEC,UAAU,qEACV6V,MAAO,CAAEmD,WAAY,WAAYC,cAAe,YAAa5Z,SAAA,CAE7Da,cAAC0V,IAAS,CAACE,OAAO,OAAOgB,MAAM,SAC/B5W,cAAA,QAAMF,UAAU,MAAKX,SAClBkY,EACCrX,cAACM,IAAgB,IAAKC,IAAS+F,iBAE/BtG,cAACM,IAAgB,IAAKC,IAAS8F,gBAO7C,C,oCC1FA,uhBAOO,MAAM+S,EAAmBA,CAACC,EAAmBjZ,KAClD,MAAMkZ,EAAQ9G,aAAaC,GAAUA,EAAMC,KAAK4G,QAC1ChB,EAAS9F,aAAaC,GAAUA,EAAM8G,YAAoB,SAsBhE,OAAOC,YAAS,CACdC,SAAU,CAAC,WAAYJ,EAAmBjZ,GAC1CsZ,QAAS5a,IAAA,IAAC,OAAE6a,EAAM,SAAEF,GAAU3a,EAAA,MAtBV8a,EAACD,EAAQF,KAC7B,MAAO,CAAEJ,EAAmBjZ,GAAUqZ,EAChCI,EAAiBC,YAAiBT,EAAmBU,GAU3D,YAR8B5B,IAA1B0B,EAAezZ,QAAwBA,IACzCyZ,EAAezZ,OAASA,GAGtByZ,EAAeG,gBACjBH,EAAeG,cAAgBC,kBAAOC,kBAAUpC,KAAKC,MAAO,GAAI,eAG3DoC,YAAIb,EAAOhB,GACf8B,IAAI,YAAa,CAChBT,SACAU,OAAQR,IAETS,MAAMC,GAAQA,EAAIC,MAAK,EAKSZ,CAAcD,EAAQF,EAAS,EAClEgB,kBAAkB,GAClB,EAGSC,EAAmBnL,IAC9B,MAAM+J,EAAQ9G,aAAaC,GAAUA,EAAMC,KAAK4G,QAC1ChB,EAAS9F,aAAaC,GAAUA,EAAM8G,YAAoB,SAOhE,OAAOC,YAAS,CACdC,SAAU,CAAC,UAAWlK,GACtBmK,QARmBxZ,IAAiB,IAAhB,OAAEyZ,GAAQzZ,EAC9B,OAAOia,YAAIb,EAAOhB,GAAQ8B,IAAI,YAADra,OAAawP,EAAS,KAAK,CACtDoK,UACA,GAMF,EAESgB,EAAyB,SAACpL,GAAkC,IAAvBqL,EAAYC,UAAAC,OAAA,QAAA3C,IAAA0C,UAAA,GAAAA,UAAA,GAAG,CAAC,EAOhE,OAAOrB,YAAS,CACdC,SAAU,CAAC,kBAAmBlK,GAC9BmK,QAR0BqB,IAAiB,IAAhB,OAAEpB,GAAQoB,EACrC,OAAOZ,cAAMC,IAAI,YAADra,OAAawP,EAAS,qBAAqB,CACzDoK,UACA,EAMFqB,OAASR,GAASA,EAAKA,QACpBI,GAEP,EAEaK,EAA+B,SAAC1L,GAAkC,IAAvBqL,EAAYC,UAAAC,OAAA,QAAA3C,IAAA0C,UAAA,GAAAA,UAAA,GAAG,CAAC,EAOtE,OAAOrB,YAAS,CACdC,SAAU,CAAC,wBAAyBlK,GACpCmK,QARgCwB,IAAiB,IAAhB,OAAEvB,GAAQuB,EAC3C,OAAOf,cAAMC,IAAI,YAADra,OAAawP,EAAS,mBAAmB,CACvDoK,UACA,EAMFqB,OAASR,GAASA,EAAKA,KAAKW,qBACzBP,GAEP,EAEaQ,EAAsB7L,GAQ1BiK,YAAS,CACdC,SAAU,CAAC,qBAAsBlK,GACjCmK,QAR6B2B,IAAiB,IAAhB,OAAE1B,GAAQ0B,EACxC,OAAOlB,cAAMC,IAAI,YAADra,OAAawP,EAAS,uBAAuB,CAC3DoK,UACA,EAMFqB,OAASR,GAASA,EAAKA,KACvBc,6BAA6B,EAC7BC,gBAZkC,IAalCC,sBAAsB,EACtBC,kBAAkB,IAITC,EAAgB,SAACnM,GAAkC,IAAvBqL,EAAYC,UAAAC,OAAA,QAAA3C,IAAA0C,UAAA,GAAAA,UAAA,GAAG,CAAC,EAOvD,OAAOrB,YAAS,CACdC,SAAU,CAAC,gBAAiBlK,GAC5BmK,QARwBiC,IAAiB,IAAhB,OAAEhC,GAAQgC,EACnC,OAAOxB,cAAMC,IAAI,YAADra,OAAawP,EAAS,WAAW,CAC/CoK,UACA,EAMFqB,OAASR,GAASA,EAAKA,QACpBI,GAEP,EAEagB,EAAyBrM,GAO7BiK,YAAS,CACdC,SAAU,CAAC,wBAAyBlK,GACpCmK,QAASmC,IAAA,IAAC,OAAElC,GAAQkC,EAAA,MARYlC,IACzBQ,cAAMC,IAAI,YAADra,OAAawP,EAAS,4BAA4B,CAChEoK,WAMuBmC,CAAyBnC,EAAO,EACzDqB,OAASR,GAASA,EAAKA,OAIduB,EAA2BxM,GAO/BiK,YAAS,CACdC,SAAU,CAAC,mBAAoBlK,GAC/BmK,QAASsC,IAAA,IAAC,OAAErC,GAAQqC,EAAA,MARKrC,IAClBQ,cAAMC,IAAI,YAADra,OAAawP,EAAS,+BAA+B,CACnEoK,WAMuBsC,CAAkBtC,EAAO,EAClDqB,OAASR,GAASA,EAAKA,KAAK0B,QAInBC,EAAgBA,CAAC5M,EAAWvF,EAAQoS,KAC/C,MAAM9C,EAAQ9G,aAAaC,GAAUA,EAAMC,KAAK4G,QAQhD,OAAOE,YAAS,CACdC,SAAU,CAAC,cAAelK,EAAWvF,GACrC0P,QARsB2C,IAAiB,IAAhB,OAAE1C,GAAQ0C,EACjC,OAAOlC,YAAIb,GAAOc,IAAI,YAADra,OAAawP,EAAS,WAAAxP,OAAUiK,EAAM,KAAK,CAC9D2P,UACA,EAMFqB,OAASR,GAASA,EAAKA,KACvB8B,WAAY/M,IAAavF,GACzBuR,kBAAiBa,GAAgB,KACjC,EAISG,EAAc,SAAChN,EAAWvF,EAAQuD,EAAS+L,GAA0B,IAAnBhB,EAAMuC,UAAAC,OAAA,QAAA3C,IAAA0C,UAAA,GAAAA,UAAA,GAAG,KACtE,OAAOV,YAAIb,EAAOhB,GAAQzV,KAAK,YAAD9C,OAAawP,EAAS,gCAAAxP,OAA+BiK,EAAM,KAAK,CAC5FuD,WAEJ,EAEagB,EAAYA,CAACgB,EAAWvF,EAAQsP,EAAOhB,IAC3C6B,YAAIb,EAAOhB,GAAQzV,KAAK,YAAD9C,OAAawP,EAAS,yBAAAxP,OAAwBiK,EAAM,MAGvEwS,EAAoBA,CAACC,EAAKC,EAASpD,EAAOhB,IAC9C6B,YAAIb,EAAOhB,GAAQzV,KAAK4Z,EAAKC,GAIzB7N,EAAiB,SAACU,EAAWmN,EAASpD,GAA0B,IAAnBhB,EAAMuC,UAAAC,OAAA,QAAA3C,IAAA0C,UAAA,GAAAA,UAAA,GAAG,KACjE,OAAOV,YAAIb,EAAOhB,GAAQzV,KAAK,YAAD9C,OAAawP,EAAS,mCAAmCmN,EACzF,EAEaC,EAAuBA,CAACpN,EAAWmN,EAASpD,EAAOhB,IACvD6B,YAAIb,EAAOhB,GAAQzV,KAAK,YAAD9C,OAChBwP,EAAS,2CACrBmN,GAIE3C,EAA2B,CAC/B6C,WAAY,aACZC,SAAU,WACV9Z,KAAM,SACNqQ,aAAc,mBACd0J,SAAU,UACVC,MAAO,eACPC,WAAY,oBACZC,UAAW,YACXC,KAAM,aACNC,KAAM,OACNC,QAAS,UACTC,YAAa,cACbC,YAAa,cACbC,YAAa,cACbC,cAAe,gBACfC,WAAY,aACZ3H,OAAQ,kBACR1V,OAAQ,SACRsd,MAAO,gBACPC,YAAa,cACbC,mBAAoB,qB,6LC7MP,SAASC,EAAY/e,GAA+C,IAA9C,KAAEoe,EAAI,MAAEY,EAAK,QAAEC,EAAO,UAAEje,GAAmBhB,EAC9E,MAAM4Y,EAAOC,cACb,OACE3X,cAAA,QACEF,UAAS,cAAAC,OAAgBD,GACzB6V,MAAO,CAAEqI,kBAAmB,UAC5BC,QAASA,IAAMH,EAAMZ,EAAI,GAAAnd,OAAMmd,EAAI,KAAAnd,OAAIge,GAAO,GAAAhe,OAAQge,EAAO,MAC7DtI,MAAOiC,EAAKwG,cAAc3d,IAAS,GAADR,OAAIge,EAAQI,QAAQ,IAAK,IAAG,eAAe,CAC3EJ,QAASA,IACR5e,SAEF4e,GAGP,CCEeK,MAnBQtf,IAAwB,IAAvB,MAAEuf,GAAevf,EAEvC,OACEkB,cAAA,MAAAb,SACGkf,EAAMtN,KAAI7Q,IAAA,IAAC,KAAEoe,EAAI,OAAEC,GAAQre,EAAA,OAC1BL,eAAA,MAAoBC,UAAU,MAAKX,SAAA,CAChCmf,EAAKE,KAAK,KACVD,EAAOxN,KAAK0N,GACX5e,eAAA,QAAmBC,UAAU,UAASX,SAAA,CACnCsf,EAAEC,QAAQ,MADFD,EAAEE,QAGZ,MANIL,EAAKE,KAQT,KAEJ,ECKMI,MAjBc9f,IAAyC,IAAxC,YAAE+f,EAAW,UAAEC,GAAmBhgB,EAC9D,OACEe,eAAAgZ,WAAA,CAAA1Z,SAAA,CACG0f,GACC7e,cAAA,QAAMF,UAAU,gBAAeX,SAC7Ba,cAACM,IAAgB,IAAKC,IAAS8T,sBAGlCyK,GACC9e,cAAA,QAAMF,UAAU,sBAAqBX,SACnCa,cAACM,IAAgB,IAAKC,IAAS+T,4BAGlC,E,gBChBP,MAAMyK,EAAY,GAELC,EAAa,CACxBC,KAAM,IACDC,IAASD,KACZE,KACEnf,cAAA,OAAKiT,KAAK,MAAM2D,MAAOmI,EAAWnJ,OAAQmJ,EAAWjI,QAAQ,cAAa3X,SACxEa,cAAA,QACE6W,KAAK,eACLK,EAAE,8qBAKVkI,OAAQ,IACHF,IAASE,OACZD,KACEnf,cAAA,OAAK,YAAU,SAAS4W,MAAOmI,EAAWnJ,OAAQmJ,EAAW9L,KAAK,MAAM6D,QAAQ,cAAa3X,SAC3Fa,cAAA,QACE6W,KAAK,eACLK,EAAE,0XAKVmI,MAAO,IACFH,IAASG,MACZF,KACEnf,cAAA,OAAK4W,MAAOmI,EAAWnJ,OAAQmJ,EAAWjI,QAAQ,cAAa3X,SAC7Da,cAAA,QACE6W,KAAK,eACLK,EAAE,g6BAKVoI,KAAM,IACDJ,IAASI,KACZH,KACEnf,cAAA,OAAK,YAAU,SAAS4W,MAAOmI,EAAWnJ,OAAQmJ,EAAW9L,KAAK,MAAM6D,QAAQ,cAAa3X,SAC3Fa,cAAA,QACE6W,KAAK,eACLK,EAAE,iuEAKVqI,qBAAsB,IACjBL,IAASK,qBACZJ,KACEnf,cAAA,OAAK,YAAU,iBAAiB4W,MAAOmI,EAAWnJ,OAAQmJ,EAAWjI,QAAQ,cAAa3X,SACxFa,cAAA,QACE6W,KAAK,eACLK,EAAE,okBAKVsI,mBAAoB,IACfN,IAASM,mBACZL,KACEnf,cAAA,OACE,YAAU,eACV4W,MAAOmI,EACPnJ,OAAQmJ,EACR9L,KAAK,MACL6D,QAAQ,cAAa3X,SAErBa,cAAA,QACE6W,KAAK,eACLK,EAAE,m3DAKVuI,QAAS,CACPC,KAAM,UACNC,WAAY,UACZC,MAAO,IACPC,YAAa,CAAE,aAAc,eAAgBpK,MAAO,gBACpD0J,KACEtf,eAAA,OACE+W,MAAOmI,EACPnJ,OAAQmJ,EACRjI,QAAQ,YACRD,KAAK,OACLiJ,OAAO,eACPC,YAAY,IACZC,cAAc,QACdC,eAAe,QAAO9gB,SAAA,CAEtBa,cAAA,UAAQkgB,GAAG,KAAKC,GAAG,KAAKC,EAAE,MAC1BpgB,cAAA,QAAMkX,EAAE,sDAGZmJ,QAASA,CAAC5N,EAAO0H,KACf,MAAMmG,EAAoBC,YAAW,CAAErD,KAAMzK,EAAMyK,KAAMsD,UAAW/N,EAAM+N,YACpEC,EAAStG,EAAIuG,kBAAkBJ,GAC/BK,EAASxG,EAAIyG,iBAAiB,IAAD7gB,OAAK0gB,EAAOI,eAC/C1G,EAAIuG,kBAAkB,CACpBI,MAAOH,EAAOH,UAAUO,IAAMN,EAAOI,aAAa/F,OAClDiG,IAAKJ,EAAOH,UAAUO,KACtB,GAGNC,OAAQ,CACNtB,KAAM,SACNC,WAAY,SACZE,YAAa,CAAE,aAAc,cAAepK,MAAO,gBACnD0J,KACEnf,cAAA,OAAK4W,MAAOmI,EAAWnJ,OAAQmJ,EAAWkC,EAAE,IAAIC,EAAE,IAAIpK,QAAQ,YAAYhX,UAAU,GAAEX,SACpFa,cAAA,KAAAb,SACEa,cAAA,QACEW,GAAG,eACHuW,EAAE,ieACFL,KAAK,UACL,gBAAc,UACd/W,UAAU,SAKlBugB,QAASA,KACPc,SAASC,eAAe,gBAAgBC,OAAO,I,aCzG9C,MAAMC,EAAoBxiB,IAWlB,IAXmB,QAChCyO,EAAO,WACPgU,EAAU,aACVhd,EAAY,mBACZid,GAAqB,EAAK,cAC1BC,GAAgB,EAAK,aACrBC,GAAe,EAAK,0BACpBC,GAA4B,EAAK,kBACjCC,GAAoB,EAAK,eACzBC,EAAiBthB,IAASuU,cAAa,sBACvCgN,EAAwB,CAAC,GAClBhjB,EACP,MAAMwa,EAAQ9G,aAAaC,GAAUA,EAAMC,KAAK4G,QAC1CyI,EAAcC,mBACdC,EAAWD,kBAAO,IACjBE,EAAeC,GAAoBpP,oBAAS,GAE7CqP,EAAsB3F,GAAQ8E,EAAW,GAADxhB,OAAIwN,EAAO,eAAAxN,OAAc0c,EAAG,SACnEoC,EAAaC,EAAWuD,GAAUC,YAAUF,IAC7C,eAAEG,EAAc,aAAEC,EAAY,cAAEC,GAAkBC,YAAY,CAClEL,YACGM,OAEEC,EAAiBC,EAAeC,GAAaC,cAE9CC,EAAU,IAAIC,IAAQ,CAC1BC,QAAS,IACT1iB,OAAQ2iB,MAAOC,EAAOC,KACpB,IACE,IAAKD,EAAO,OAAOC,EAAG9e,EAAawM,KAAKmC,IAAQ,CAAQA,gBAExDmQ,SADkBC,YAAkB,wBAADvjB,OAAyBqjB,EAAK,KAAK9J,IAC/DiK,UAAUxS,KAAKmC,IAAQ,CAAQA,eACxC,CAAE,MAAOuL,GACP,MAAO,EACT,GAEF+E,OAAQ,WACRC,SAAU,WACVC,eAAiBjQ,GAAI,KAAA1T,OAAU0T,EAAKkQ,SAASzQ,SAAQ,KACrD0Q,UAAW,kFACXC,qBAAqB,EACrBC,gBAAiB,KACjBC,aAAa,EACbC,WAAY,CACVC,MAAM,KAIVjR,qBAAU,KAEJ+O,EAAYmC,QAAQC,WAAalC,EAASiC,SAAWE,MAAMC,QAAQ9f,KACrE0d,EAASiC,SAAU,EACnBlB,EAAQsB,OAAOvC,EAAYmC,QAAQC,UACnCpC,EAAYmC,QAAQC,SAASI,iBAAiB,oBAAqB9F,IACjE8C,EAAW9C,EAAErI,OAAOwJ,MAAM,IAE9B,GAEC,CAACmC,EAAYmC,QAAS3f,IAKzB,OACE1E,eAAA,UAAS2iB,IAAcrjB,SAAA,CACpBsiB,GACC5hB,eAAA,OAAKC,UAAS,2BAAAC,OAA6B6hB,EAAoB,MAAQ,IAAKziB,SAAA,CACzEyiB,GAAqB5hB,cAACwkB,IAAiB,CAAC1kB,UAAU,UACnDD,eAAA,OAAKC,UAAU,qCAAoCX,SAAA,CACjDa,cAAA,QACEiT,KAAK,SACLnT,UAAS,gCAAAC,OACNmiB,EAAiC,gBAAjB,gBAEnBjE,QAASA,IAAMkE,GAAiB,GAAOhjB,SAEvCa,cAACM,IAAgB,IAAKC,IAASwU,UAEjC/U,cAAA,QACEiT,KAAK,SACLnT,UAAS,oCAAAC,OACPmiB,EAAgB,eAAiB,iBAEnCjE,QAASA,IAAMkE,GAAiB,GAAMhjB,SAEtCa,cAACM,IAAgB,IAAKC,IAASyU,kBAKvCnV,eAAA,OAAKC,UAAS,GAAAC,OAAKmiB,EAAgB,KAAO,GAAE,aAAa,kBAAgB,QAAO/iB,SAAA,CAC9Ea,cAACM,IAAgB,IAAKuhB,EAAc1iB,SAChCslB,GACAzkB,cAAC0kB,IAAQ,CACPC,IAAK5C,EACL/M,QAAQ,OACRkK,SAAU0F,OAAOC,KAAK7F,GAAYjO,KAAK+T,GAAQ9F,EAAW8F,KAC1DC,cAAe,GACfnP,OAAQ,IACRgK,MAAOrS,EACPyX,SAAUzD,EACV0D,cAAe,IACVxC,IACHyC,WAAY,OACZC,YAAaV,KACV3C,GAELsD,kBAAgB,MAItBplB,cAAA,SACEjB,KAAK,OACL4B,GAAG,eACHb,UAAU,KACVulB,OAAO,UACPL,SAxDgB7B,eAChBL,EAAUwC,EAAMlP,OAAOiI,MAAM,GAAI+D,EAAoB9I,KAyDtDoI,GACC7hB,eAAA,OAAKC,UAAU,wFAAuFX,SAAA,CACpGa,cAAA,QAAMF,UAAU,kBAAiBX,SAC/Ba,cAACM,IAAgB,IAAKC,IAAS0U,gBAEjCjV,cAAA,QAAMF,UAAU,kBAAiBX,SAC/Ba,cAACM,IAAgB,IAAKC,IAAS2U,4BAKtCgN,GACCriB,eAAA,OAAKC,UAAU,YAAY6V,MAAO,CAAE4P,UAAW,IAAKC,YAAa,WAAYrmB,SAAA,CAC1EoO,GACCvN,cAAA,OACE2V,MAAO,CAAE8P,SAAU,cACnB3lB,UAAU,yCACV4lB,wBAAyBC,YAAiBC,YAAsBrY,OAGlEA,GACAvN,cAAA,QAAMF,UAAU,SAAQX,SACtBa,cAACM,IAAgB,IAAKC,IAASsU,wBAKtC2M,IAAuBU,GACtBriB,eAAA,QAAMC,UAAU,sBAAqBX,SAAA,CACnCa,cAAC6d,EAAY,CAACX,KAAM3P,EAASuQ,MAAOyD,EAAYxD,QAAQ,cACxD/d,cAAA,QAAAb,SAAM,OACNa,cAAC6d,EAAY,CAACX,KAAM3P,EAASuQ,MAAOyD,EAAYxD,QAAQ,YACvD4D,GACC9hB,eAAAgZ,WAAA,CAAA1Z,SAAA,CACEa,cAAA,QAAAb,SAAM,OACNa,cAAC6d,EAAY,CAACX,KAAM3P,EAASuQ,MAAOyD,EAAYxD,QAAQ,wBAKhE/d,cAAC4e,EAAoB,CACnBE,UAAWA,GAAa+D,EACxBhE,YAAaA,GAAe+D,IAE9B5iB,cAACoe,EAAc,CAACC,MAAOkE,MACnB,C,oCCvLH,SAASsD,EAAiBC,GAC/B,MAAMC,EAAU,sBAEhB,GAAID,EAAQE,eACV,MAAM,GAANjmB,OAAUgmB,EAAO,SAAAhmB,OAAQkmB,mBAAmBH,EAAQE,iBAGtD,IAAIE,EAAe,CAAC,EA4BpB,OA3BIJ,EAAQK,UACVD,EAAsB,QAAIE,EACG,kBAApBN,EAAQK,QAAuBL,EAAQK,QAAUL,EAAQK,QAAQE,KAAK,MAI1EP,EAAQvC,YACX2C,EAAsB,QAAIE,EAAY,KAIX,kBAApBN,EAAQQ,UACjBJ,EAAwB,UAAIE,EAAYN,EAAQQ,QAAQC,MAAM,KAAK,KAGjET,EAAQU,eACVN,EAA4B,cAAIE,EAAYN,EAAQU,eAGlDV,EAAQ3b,mBACV+b,EAAsB,QAAIE,EAAYN,EAAQ3b,mBAGf,kBAAtB2b,EAAQvC,YACjB2C,EAAoB,MAAIE,EAAYN,EAAQvC,YAGxC,GAANxjB,OAAUgmB,EAAO,aAAAhmB,OAAYkmB,mBAAmBQ,KAAKC,UAAUR,IACjE,CAMA,SAASE,EAAY5lB,GAEnB,OADoB4jB,MAAMC,QAAQ7jB,GAAUA,EAAS,CAACA,IACnCuQ,KAAKvQ,IAAWmmB,MAL5B,CAAEC,MADehH,EAM4Bpf,EAL7Bof,MAAOA,GADhC,IAA0BA,CAMmC,GAC7D,CA7CA,oEA+CO,MAAMiH,EAAejH,GACtBA,EAAMkH,WAAW,yBAAoD,IAA1BlH,EAAMmH,OAAO,QACnDnH,EAAM2G,MAAM,QAAQ,GAEtB3G,C,sJCjDF,MCIMmD,EAAiBA,KAC5B,MAAOjE,EAAWkI,GAAgBjU,oBAAS,IACpC8L,EAAaoI,GAAkBlU,mBAAS,MAwC/C,MAAO,CAAC8L,EAAaC,EAtCHoI,uBAAY,CAAC5I,EAAM6I,EAAU7N,KAC7C,GAAIgF,GAAQ6I,GAAY7N,EAAO,CACb,IAAI8N,SAAQ,CAACC,EAASC,KACpC,MAAMC,EAAS,IAAIC,WACnBD,EAAOE,cAAcnJ,GACrBiJ,EAAOG,OAAS,KACRH,EAAOI,OACXN,EAAQE,EAAOI,QAEfL,EAAOM,MAAM,+BACf,CACD,IAEKtN,MACLqN,IACC,MAAMjL,EAAU+J,KAAKC,UAAU,CAC7BmB,KAAMvJ,EAAKvf,KACXyb,KAAMmN,EAAOpB,MAAM,WAAW,GAC9BuB,UD1BoBpI,EC0BMpB,EAAKoB,KD1BLqI,EC0BWzJ,EAAKvf,MDxBrB,IAA3B2gB,EAAKsI,YAAY,OACnBtI,EAAI,GAAA3f,OAAM2f,EAAI,KAAA3f,OAAIgoB,EAASxB,MAAM,KAAK,KAElC,GAANxmB,OAAUkoB,IAAKvI,EAAKwI,OAAO,EAAGxI,EAAKsI,YAAY,QAAMjoB,OAAG2f,EAAKwI,OAAOxI,EAAKsI,YAAY,UALxDG,IAACzI,EAAMqI,EC4B5Bf,GAAa,GACboB,YAAmB,uBAAwB1L,EAASpD,GACjDgB,MAAMC,IACL4M,EAAS5M,EAAIkC,KACbuK,GAAa,GACbC,EAAe,KAAK,IAErBoB,OAAO5J,IACNwI,EAAexI,GACfuI,GAAa,EAAM,GACnB,IAELsB,IACCrB,EAAeqB,EAAI,GAGzB,IACC,IACuC,EAG/BhG,EAAaF,IACxB,MAAM9I,EAAQ9G,aAAaC,GAAUA,EAAMC,KAAK4G,SACzCuF,EAAaC,EAAWgE,GAAaC,IAQ5C,MAAO,CAAClE,EAAaC,EANNoI,uBACZqB,IACCA,EAAcC,SAAQrF,eAAsBL,EAAUxE,EAAM8D,EAAoB9I,IAAO,GAEzF,CAACA,EAAOwJ,EAAWV,IAEkB,C,oCC7DzC,yEAKO,MAAMqG,EAAgB3pB,IAA0B,IAAzB,OAAEgX,EAAM,QAAEvI,GAASzO,EAC/C,MAAe,YAAXgX,GAAyBvI,EAOd,UAAXuI,EAEA9V,cAACnB,IAAK,CAACE,KAAK,QAAQE,QAAQ,EAAMD,SAAS,EAAKG,SAC9Ca,cAACM,IAAgB,IAAKC,IAASkU,iBAI9B,KAZHzU,cAACnB,IAAK,CAACE,KAAK,UAAUE,QAAQ,EAAMD,SAAS,EAAKG,SAChDa,cAACM,IAAgB,IAAKC,IAASiU,eAW1B,C,oCCpBN,SAASkU,EAAcvS,EAAGwS,GAC/B,OAAIxS,EAAEyS,WAAW5e,OAAS2e,EAAEC,WAAW5e,OAAe,EAClD2e,EAAEC,WAAW5e,OAASmM,EAAEyS,WAAW5e,QAAgB,EAChD,CACT,CAEO,SAAS6e,EAAkB1S,EAAGwS,GACnC,OAAO,IAAI7Q,KAAK6Q,EAAEC,WAAWE,YAAc,IAAIhR,KAAK3B,EAAEyS,WAAWE,WACnE,CAEO,SAASC,EAAyB5S,EAAGwS,GAC1C,OAAO,IAAI7Q,KAAK6Q,EAAEG,YAAc,IAAIhR,KAAK3B,EAAE2S,WAC7C,CAEO,SAASE,EAA4B7S,EAAGwS,EAAGM,GAChD,OAAI9S,EAAE8S,GAAYN,EAAEM,IAAmB,EACnCN,EAAEM,GAAY9S,EAAE8S,GAAkB,EAC/B,CACT,CAlBA,uI,oCCAA,6CAEO,SAASC,EAAWC,EAAYC,GACrC,IAAIC,EAAU,CACZ,CACEzC,MAAO,QACPhH,MAAO,QACPnD,IAAK6M,KAEP,CACE1C,MAAO,YACPhH,MAAO,KACPnD,IAAK8M,KAEP,CACE3C,MAAO,OACPhH,MAAO,OACPnD,IAAK,yBAEP,CACEmK,MAAO,aACPhH,MAAO,aACPnD,IAAK+M,KAEP,CACE5C,MAAO,eACPhH,MAAO,eACPnD,IAAK,mCAST,OANI0M,IACFE,EAAUA,EAAQ/V,QAAQc,GAAM+U,EAAWhW,SAASiB,EAAEwL,UAEpDwJ,GAAgBD,EAAWhW,SAAS,WACtCkW,EAAQI,KAAK,CAAE7C,MAAOwC,EAAa1J,KAAME,MAAO,SAAUnD,IAAK2M,EAAa3M,MAEvE4M,CACT,C,iDCnCA,MAAMK,EAAMC,KAAKC,GAAK,IAChBC,EAAM,IAAMF,KAAKC,GASjBE,EAAoC,CAAC,EAAD,MAI7BC,EAQXC,cAMI,IANQC,KACVA,EAAO,IAAGC,aACVA,MAAe,uDAIb,CAAC,EAGH,GAFAnT,KAAKkT,KAAOA,EACZlT,KAAKoT,WAAYA,IAAAD,EAAwB,EAAI,GACxCJ,EAAM/S,KAAKkT,MAAO,CACrB,IAAIA,EAAOlT,KAAKkT,KACZG,EAAgB,CAClBC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,IAENV,EAAM/S,KAAKkT,MAAQG,EAEnB,IAAK,IAAIlT,EAAI,EAAGA,EAAI,GAAIA,IACtBkT,EAAEC,GAAGZ,KAAKQ,EAAO,KACjBG,EAAEE,GAAGb,KAAKQ,GAAQ,EAAIN,KAAKC,KAC3BQ,EAAEG,GAAGd,KAAKQ,EAAO,GACjBG,EAAEI,GAAGf,KAAKQ,GACVA,GAAQ,CAEX,CACDlT,KAAKsT,GAAKP,EAAM/S,KAAKkT,MAAMI,GAC3BtT,KAAKuT,GAAKR,EAAM/S,KAAKkT,MAAMK,GAC3BvT,KAAKwT,GAAKT,EAAM/S,KAAKkT,MAAMM,GAC3BxT,KAAKyT,GAAKV,EAAM/S,KAAKkT,MAAMO,EAC5B,CAMDC,GAAGC,EAAcC,GACf,GAAKC,OAAOC,UAAUF,GAcf,CACL,IAAIzT,EAAIH,KAAKwT,GAAGI,GACZG,EAAInB,KAAKoB,IAAIpB,KAAKqB,IAAIrB,KAAKsB,IAAIvB,EAAMgB,EAAG,KAAM,OAAS,OACvDzJ,EAAI0I,KAAKhR,MAAMzB,EAAIwT,EAAG,GAAK3T,KAAKsT,GAAGM,IACnCzJ,EAAIyI,KAAKhR,MACXzB,EAAI,GAAMyS,KAAKuB,KAAK,EAAIJ,IAAM,EAAIA,KAAO/T,KAAKuT,GAAGK,IAOnD,OALA1J,EAAIlK,KAAKyT,GAAGG,GAAQ5T,KAAKoT,YACtBlJ,EAAIlK,KAAKyT,GAAGG,GAAQ5T,KAAKoT,WAC5BjJ,EAAInK,KAAKyT,GAAGG,KAAUzJ,EAAInK,KAAKyT,GAAGG,IAG3B,CAAC1J,EAAGC,EACZ,CA3B4B,CAC3B,IAAI+I,EAAOlT,KAAKkT,KAAON,KAAKwB,IAAI,EAAGR,GAC/BzT,EAAI+S,EAAO,EACXmB,EAAKnB,EAAO,IACZoB,EAAKpB,GAAQ,EAAIN,KAAKC,IACtB0B,EAAKrB,EACLa,EAAInB,KAAKoB,IAAIpB,KAAKqB,IAAIrB,KAAKsB,IAAIvB,EAAMgB,EAAG,KAAM,OAAS,OACvDzJ,EAAI/J,EAAIwT,EAAG,GAAKU,EAChBlK,EAAIhK,EAAI,GAAMyS,KAAKuB,KAAK,EAAIJ,IAAM,EAAIA,KAAOO,EAKjD,OAJApK,EAAIqK,EAAKvU,KAAKoT,YAAclJ,EAAIqK,EAAKvU,KAAKoT,WAC1CjJ,EAAIoK,IAAOpK,EAAIoK,GAGR,CAACrK,EAAGC,EACZ,CAcF,CAMDwJ,GAAGD,EAAcE,GACf,GAAKC,OAAOC,UAAUF,GASf,CACL,IAAIY,GAAKd,EAAG,GAAK1T,KAAKwT,GAAGI,KAAU5T,KAAKuT,GAAGK,GAG3C,MAAO,EAFIF,EAAG,GAAK1T,KAAKwT,GAAGI,IAAS5T,KAAKsT,GAAGM,GAClCd,GAAO,EAAIF,KAAK6B,KAAK7B,KAAK8B,IAAIF,IAAM,GAAM5B,KAAKC,IAE1D,CAd4B,CAC3B,IAAIK,EAAOlT,KAAKkT,KAAON,KAAKwB,IAAI,EAAGR,GAC/BS,EAAKnB,EAAO,IACZoB,EAAKpB,GAAQ,EAAIN,KAAKC,IACtBW,EAAKN,EAAO,EACZsB,GAAKd,EAAG,GAAKF,IAAOc,EAGxB,MAAO,EAFIZ,EAAG,GAAKF,GAAMa,EACfvB,GAAO,EAAIF,KAAK6B,KAAK7B,KAAK8B,IAAIF,IAAM,GAAM5B,KAAKC,IAE1D,CAMF,WCnCG,SACJ8B,EACAf,EACAgB,GACmB,IAAnBC,yDAAmB,IAEdxH,MAAMC,QAAQqH,KACjBA,EAAS,CAACA,EAAOG,IAAKH,EAAOI,MAG/B,MAAMC,EAAO,IAAIhC,EAAkB,CACjCE,KAAM2B,IAEFnB,EAAKsB,EAAKtB,GAAGiB,EAAQf,GACrBqB,EAAKD,EAAKrB,GACd,CAACD,EAAG,GAAKkB,EAAW,GAAK,EAAGlB,EAAG,GAAKkB,EAAW,GAAK,GACpDhB,GAEIsB,EAAKF,EAAKrB,GACd,CAACD,EAAG,GAAKkB,EAAW,GAAK,EAAGlB,EAAG,GAAKkB,EAAW,GAAK,GACpDhB,GAEF,MAAO,CAACqB,EAAG,GAAIC,EAAG,GAAIA,EAAG,GAAID,EAAG,GAClC,aA5EgB,SACdE,EACAP,GAwBI,IAvBJQ,QACEA,EAAU,EAACC,QACXA,EAAU,GAAER,SACZA,EAAW,IAAGS,WACdA,KAAkBC,kBAClBA,MAAoB,uDAkBlB,CAAC,EAEL,MAAMP,EAAO,IAAIhC,EAAkB,CACjCE,KAAM2B,EACN1B,aAAcoC,IAEVC,EAAOH,EACPI,EAAKT,EAAKtB,GAAG,CAACyB,EAAO,GAAIA,EAAO,IAAKK,GACrCE,EAAKV,EAAKtB,GAAG,CAACyB,EAAO,GAAIA,EAAO,IAAKK,GACrC3V,EAAQ6V,EAAG,GAAKD,EAAG,GACnB5W,EAAS4W,EAAG,GAAKC,EAAG,GACpBC,EAAeF,EAAG,GAAK5V,EAAQ,EAC/B+V,EAAeF,EAAG,GAAK7W,EAAS,EAEhCgX,EAtDR,SAAqBL,EAAcM,EAAgBR,GACjD,MAAMO,EAAWjD,KAAKoB,IACpBwB,EAAO5C,KAAKuB,IAAI2B,EAAO,IAAMlD,KAAKuB,IAAI,GACtCqB,EAAO5C,KAAKuB,IAAI2B,EAAO,IAAMlD,KAAKuB,IAAI,IAGxC,OAAOmB,EAAaO,EAAWjD,KAAKmD,MAAMF,EAC5C,CAPA,CAsD+BL,EADN,CAAC3V,EAAQ+U,EAAW,GAAI/V,EAAS+V,EAAW,IACxBU,GAK3C,MAAO,CAAEX,OAHMK,EAAKrB,GAAG,CAACgC,EAAcC,GAAeJ,GAGpC5B,KAFJhB,KAAKqB,IAAImB,EAASxC,KAAKoB,IAAIqB,EAASQ,IAGnD,E,uCCtEA,oIAKO,MAAMG,EAAmBA,CAACxd,EAAW4N,KAC1C,MAAM7D,EAAQ9G,aAAaC,GAAUA,EAAMC,KAAK4G,QAC1ChB,EAAS9F,aAAaC,GAAUA,EAAM8G,YAAoB,SAYhE,OAAOC,YAAS,CACdC,SAAU,CAAC,yBAA0BlK,EAAW4N,GAChDzD,QAZkB5a,IAAiB,IAAhB,OAAE6a,GAAQ7a,EAC7B,OAAOqb,YAAIb,EAAOhB,GAAQ8B,IAAI,YAADra,OAAawP,EAAS,cAAc,CAC/DoK,SACAU,OAAQ,CACN2S,QAAS,EACT7P,SAEF,EAMFnC,OAASR,GAASA,EAAKA,MACvB,EAGSyS,EAAqB,SAAC1d,EAAWhC,EAAS+L,GAA0B,IAAnBhB,EAAMuC,UAAAC,OAAA,QAAA3C,IAAA0C,UAAA,GAAAA,UAAA,GAAG,KACrE,OAAOV,YAAIb,EAAOhB,GAAQzV,KAAK,YAAD9C,OAAawP,EAAS,cAAc,CAAEmP,QAASnR,GAC/E,EAEa2f,EAAkB,SAAC3d,EAAWvF,EAAQuD,EAAS+L,GAA0B,IAAnBhB,EAAMuC,UAAAC,OAAA,QAAA3C,IAAA0C,UAAA,GAAAA,UAAA,GAAG,KAC1E,OAAOV,YAAIb,EAAOhB,GAAQzV,KAAK,YAAD9C,OAAawP,EAAS,oBAAAxP,OAAmBiK,EAAM,KAAK,CAChFuD,WAEJ,C,oCClCA,kCAAO,MAAM4f,EAAsBA,CAACC,EAAaC,IAC/CD,EAAYE,QAAO,CAACC,EAAK9gB,KAClB8gB,EAAIpa,SAAS1G,EAAQ+gB,WAAa/gB,EAAQ+gB,WAAaH,GAC1DE,EAAI9D,KAAKhd,EAAQ+gB,UAEZD,EAAIE,SACV,G,qMCUUC,MAZiBjhB,IAC9B,MAAOkhB,EAAWC,GAAgB7a,mBAAS,MAQ3C,OAPAC,qBAAU,KACR,GAAIvG,GAAWA,EAAQ2gB,aAAe3gB,EAAQ2gB,YAAYtS,OAAQ,CAChE,MAAM+S,EACJphB,EAAQ2gB,YAAYK,KAAK1E,KAA0Btc,EAAQ2gB,YAAYtS,OAAS,GAC9E+S,EAAe/E,YAAY8E,EAAaC,EAAe/E,WAC7D,IACC,CAACrc,IACGkhB,CAAS,ECKHG,MAhBarhB,GACFya,uBAAY,IAC9Bza,GAAWA,EAAQ2gB,aAAe3gB,EAAQ2gB,YAAYtS,OACjDrO,EAAQ2gB,YAAYE,QAAO,CAAC/J,EAAW9P,KACvC8P,EAAUpQ,SAASM,EAAK+Z,WAC3BjK,EAAUkG,KAAKhW,EAAK+Z,UAEfjK,IACN,IAEI,IAER,CAAC9W,I,gDCdC,SAASshB,EAAmBC,EAAOC,GAAyB,IAC7DC,EAAU,wCACVjU,EAAS,OAFyCY,UAAAC,OAAA,QAAA3C,IAAA0C,UAAA,IAAAA,UAAA,KAIpDqT,EAAU,gDACVjU,EAAS,OAEX,MAAMkU,EAAW,CAACF,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAC5CG,EAAaJ,EAAMjd,KAAKsd,GAMzB,SAAyBA,EAAMJ,GACpC,MAAM,cAANluB,OAAqBsuB,EAAI,OAAAtuB,OAAMkuB,EAAI,gBAAAluB,OAAesuB,EAAI,OAAAtuB,OAAMkuB,EAAI,qBAAAluB,OAAoBsuB,EAAI,OAAAtuB,OAAMkuB,EAAI,KACpG,CARyCK,CAAgBD,EAAMF,KAAW9H,KAAK,IACvEjD,EAAK,QAAArjB,OAAWka,EAAM,oBAAAla,OAAmBquB,EAAU,6BAEzD,MAAM,GAANruB,OAAUmuB,GAAOnuB,OAAGkmB,mBAAmB7C,GACzC,C,wHCmBA,MAAMmL,EAAczvB,IAA6D,IAA5D,UAAEyQ,EAAS,OAAEvF,EAAM,aAAEzF,EAAY,kBAAEiqB,GAAmB1vB,EACzE,MAAMwa,EAAQ9G,aAAaC,GAAUA,EAAMC,KAAK4G,QAC1ChB,EAAS9F,aAAaC,GAAUA,EAAM8G,YAAoB,UACzDhM,EAASgU,GAAcxO,mBAAS,IAQjC0b,EAAWC,YAAY,CAC3BC,WAAYA,IAAMzB,YAAgB3d,EAAWvF,EAAQuD,EAAS+L,EAAOhB,GACrEsW,UAAYrU,IACViU,EAAkBjU,EAAIC,MACtB+G,EAAW,GAAG,IAIlB,OACE1hB,eAAA,OAAKC,UAAU,wCAAuCX,SAAA,CACpDa,cAACshB,IAAiB,CAChB/T,QAASA,EACTgU,WAAYA,EACZC,oBAAkB,EAClBjd,aAAcA,EACdod,2BAAyB,EACzBC,mBAAiB,EACjBH,eAAa,IAEf5hB,eAAA,OAAKC,UAAU,+CAA8CX,SAAA,CAC3Da,cAAC6uB,IAAM,CACL5Q,QAASA,KA1BX1Q,GACFkhB,EAASK,OAAO,CAAEpQ,QAASnR,GAyBM,EAC7BzN,UAAU,kBACVivB,QAASN,EAASO,UAClBC,UAAW1hB,EAAQpO,SAEnBa,cAACM,IAAgB,IAAKC,IAASgN,YAEjCvN,cAACyoB,IAAa,CAAC3S,OAAQ2Y,EAAS3Y,OAAQvI,QAASA,SAE/C,EAIG2hB,EAAchvB,IAA4B,IAADivB,EAAA,IAA1B,UAAE5f,EAAS,OAAEvF,GAAQ9J,EAC/C,MAAOkvB,EAAeC,GAAoBtc,mBAAS,aAC3CyH,KAAM8U,EAAc,OAAExZ,GAAWqG,YAAc5M,EAAWvF,GAE5DyC,EAAwB,OAAd6iB,QAAc,IAAdA,OAAc,EAAdA,EAAgBlC,YAC1BmC,EAA6B,OAAdD,QAAc,IAAdA,OAAc,EAAdA,EAAgBlC,YAAY9Z,QAAQkc,GAAmB,YAAbA,EAAEpvB,SAC3DqvB,EAA4B,OAAdH,QAAc,IAAdA,OAAc,EAAdA,EAAgBlC,YAAY9Z,QAAQkc,GAAmB,YAAbA,EAAEpvB,SAEhE,IAAIsvB,EAEFA,EADoB,aAAlBN,EACaG,EACY,eAAlBH,EACMK,EAEAhjB,EAyBjB,MAAe,YAAXqJ,EAEA9V,cAAA,OAAKF,UAAU,MAAKX,SAClBa,cAAC2vB,IAAgB,CAAC5wB,KAAK,QAAQ6wB,sBAAoB,EAACC,MAAO,QAKlD,UAAX/Z,EAEA9V,cAAA,OAAKF,UAAU,WAAUX,SACvBa,cAACnB,IAAK,CAACE,KAAK,QAAOI,SACjBa,cAACM,IAAgB,IAAKC,IAASyP,2BAMhB,IAAnBvD,EAAQqO,OAER9a,cAAA,OAAKF,UAAU,mBAAkBX,SAC/Ba,cAACM,IAAgB,IAAKC,IAAS2P,0BAKnCrQ,eAAAgZ,WAAA,CAAA1Z,SAAA,CACEa,cAAA,OAAKF,UAAU,uCAAuC,aAAW,4BAA2BX,SAjDrE,CACzB,CAAEygB,MAAO,WAAYgH,MAAO,YAC5B,CAAEhH,MAAO,aAAcgH,MAAO,cAC9B,CAAEhH,MAAO,MAAOgH,MAAO,QA+CC7V,KAAK+e,GACvBjwB,eAAA,SAAOC,UAAU,kBAAiBX,SAAA,CAChCa,cAAA,SACE4f,MAAOkQ,EAAOlQ,MACdmQ,QAASX,IAAkBU,EAAOlQ,MAClCoF,SAAUA,IAAMqK,EAAiBS,EAAOlQ,OACxC7gB,KAAK,QACLe,UAAS,gFAEXE,cAACM,IAAgB,IAAKC,IAAS,cAADR,OAAe+vB,EAAOlJ,YARdkJ,EAAOlQ,WAYnD5f,cAAA,OAAKF,UAAU,qBAAoBX,SAGR,IAAxBuwB,EAAa5U,OACZ9a,cAAA,OAAKF,UAAU,mBAAkBX,SAC/Ba,cAACM,IAAgB,IAAKC,IAAS0P,kBAGjB,QAFVkf,EA/DSa,MACrB,GAA4B,IAAxBN,EAAa5U,OAAc,OAC/B,IAAIP,EAAM,GACNrH,EAAWwc,EAAa,GAAGlC,SAU/B,OARAkC,EAAalH,SAAS/b,IAChBA,EAAQ+gB,WAAata,EACR,IAAfqH,EAAIO,OAAeP,EAAIkP,KAAK,CAAChd,IAAY8N,EAAIA,EAAIO,OAAS,GAAG2O,KAAKhd,IAElEyG,EAAWzG,EAAQ+gB,SACnBjT,EAAIkP,KAAK,CAAChd,IACZ,IAEK8N,CAAG,EAoDJyV,UAAgB,IAAAb,OAAA,EAAhBA,EAAkBpe,KAAI,CAACkf,EAASC,IAC9BlwB,cAAA,OAEEF,UAAS,+CAAiDX,SAEzD8wB,EAAQlf,KAAI,CAACtE,EAASyjB,IACrBrwB,eAAA,OAAKC,UAAU,yBAAwBX,SAAA,CACrCa,cAAA,OAAKF,UAAU,sBAAqBX,SAC3B,IAAN+wB,EACClwB,cAACmwB,IAAU,CACTjd,SAAU+c,EAAQ,GAAGzC,SACrB4C,QAASH,EAAQ,GAAGI,WACpBC,aAAa,oCAGftwB,cAAA,OAAKF,UAAU,eAGnBD,eAAA,OAAKC,UAAU,mBAAmB6V,MAAO,CAAE4a,UAAW,QAASpxB,SAAA,CAC7DU,eAAA,KAAGC,UAAU,gBAAeX,SAAA,CACnB,IAAN+wB,GACCrwB,eAAA,OAAKC,UAAU,UAASX,SAAA,CACtBa,cAAA,KACEsW,KAAM,UAAY7J,EAAQ+gB,SAC1B1tB,UAAU,2CAA0CX,SAEnDsN,EAAQ+gB,WACP,UAIPgD,EAAqB/jB,EAAQrM,OAAQqM,EAAQgkB,YAAa,IAC3DzwB,cAAC0wB,IAAoB,CAACC,KAAMlkB,EAAQqc,gBAElB,YAAnBrc,EAAQrM,QACPJ,cAAA,OACEF,UAAU,cACV4lB,wBAAyBC,YACvBC,YAAsBnZ,EAAQgkB,oBAhCKhkB,EAAQmkB,cAJlDX,EAAQ,GAAGW,iBA+CvB,EAIMC,EAAmB9V,IAAkD,IAAD+V,EAAA,IAAhD,QAAErkB,EAAO,iBAAEtC,EAAgB,KAAE8jB,GAAclT,EAC1E,MAAM4S,EAAYD,EAAuBjhB,GACnClI,EAAeupB,EAAmBrhB,GAClCskB,EAAaC,mBACjB,IACEnL,YAAiB,CACfM,QAAS8H,EACT3H,QAASqH,EACTpK,UAAWhf,IACX4F,iBAAkBA,KAEtB,CAAC8jB,EAAMN,EAAWppB,EAAc4F,IAGlC,OAAW,OAAPsC,QAAO,IAAPA,GAAoB,QAAbqkB,EAAPrkB,EAAS2gB,mBAAW,IAAA0D,OAAb,EAAPA,EAAsBhW,QAAS,EAE/B9a,cAACixB,IAAQ,CACPrR,MAAO,KACPxH,QAAS,CACP,CAAEwO,MAAO5mB,cAACM,IAAgB,IAAKC,IAASuP,eAAkBwG,KAAMya,GAChE,CACEnK,MAAO5mB,cAACM,IAAgB,IAAKC,IAASkP,wBACtC6G,KAAMyX,EAAmBxpB,IAAgB0pB,IAE3C,CACErH,MAAO5mB,cAACM,IAAgB,IAAKC,IAASiP,mBACtC8G,KAAMyX,EAAmBxpB,IAAgB0pB,GAAM,KAGnDiD,QAASlxB,cAACM,IAAgB,IAAKC,IAAS+O,WACxCxP,UAAU,2DAIPE,cAAA6Y,WAAA,GACT,EAGWsY,EAAejW,IAQb,IAADkW,EAAA,IARe,OAC3BpnB,EAAM,OACN8L,EAAM,QACNxD,EAAO,KACP2b,EAAI,MACJoD,EAAK,iBACLC,EAAgB,gBAChBC,GACOrW,EACP,MAAM5B,EAAQ9G,aAAaC,GAAUA,EAAMC,KAAK4G,QAC1C/G,EAAcC,aAAaC,GAAUA,EAAMC,KAAKH,eAE/Cif,EAAcC,GAAmB1e,oBAAS,GAC3C2e,EAAcC,eAEZnX,KAAM8U,GAAmBnT,YAAc7J,EAAQ/C,UAAWvF,GAAQ,GAEpE4nB,GACU,OAAdtC,QAAc,IAAdA,OAAc,EAAdA,EAAgBlC,cAChBD,YAAoBmC,EAAelC,YAAa7a,EAAYW,UAExDsb,EAAqB9R,IACzBgV,EAAYG,aAAa,CAAC,cAAevf,EAAQ/C,UAAWvF,GAAS,CAAEwQ,KAAMkC,GAAU,EAezF,OACE7c,eAAA,OAAKC,UAAU,iBAAgBX,SAAA,CAC7BU,eAAA,OAAKC,UAAU,kDAAiDX,SAAA,CAC9Da,cAAC8xB,IAAS,CAAChyB,UAAU,mBAAmBme,QAASA,IAAMoT,MACvDxxB,eAAA,OAAKC,UAAU,gBAAeX,SAAA,CAC5BU,eAAA,OAAKC,UAAU,sBAAqBX,SAAA,CAClCa,cAAA,KAAGF,UAAU,wCAAuCX,SAClDa,cAACM,IAAgB,IAAKC,IAAS4O,aAAc3O,OAAQ,CAAE0vB,EAAGlmB,OAExC,QAAnBonB,EAAA9e,EAAQyf,mBAAW,IAAAX,GAAnBA,EAAqB1R,KACpB7f,eAAA,QAAAV,SAAA,CACEU,eAAA,KAAAV,SAAA,CAAG,IAAEmT,EAAQ/C,aAAc,KAAG+C,EAAQyf,YAAYrS,QAGpD1f,cAACM,IAAgB,IAAKC,IAASgP,UAAW/O,OAAQ,CAAEG,GAAI2R,EAAQ/C,gBAGpE1P,eAAA,OAAKC,UAAU,6BAA4BX,SAAA,CACxCoyB,GACCvxB,cAAA,OAAKF,UAAU,UAASX,SACrB,CAAC,YAAa,cAAcgU,SAAS2C,IACpC9V,cAACgyB,EAAc,CAAC/D,KAAMA,EAAMjkB,OAAQA,EAAQsI,QAASA,MAI3DtS,cAAA,OAAKF,UAAU,UAASX,SACrB8uB,GAAQ3b,EAAQnI,kBACfnK,cAAC6wB,EAAgB,CACfpkB,QAAS6iB,EACTrB,KAAMA,EACN9jB,iBAAkBmI,EAAQnI,wBAKlCnK,cAAA,OAAKF,UAAU,sBAAqBX,SACjCoyB,GAAmB,CAAC,YAAa,cAAcpe,SAAS2C,KAAY0b,GACnExxB,cAACiyB,EAAkB,CAACC,QAjDdC,KAChB/J,YAAmB,YAADroB,OACJuS,EAAQ/C,UAAS,oCAAAxP,OAAmCiK,EAAM,KACtE,CAAC,EACDsP,GACAgB,MAAMC,IACNiU,EAAkBjU,QACOpC,IAArBmZ,GAAgCA,EAAiBhf,EAAQ/C,WAC7DkiB,GAAgB,EAAK,GACrB,EAwCgD3b,OAAQA,YAKxD9V,cAAA,OAAKF,UAAU,kCAAiCX,SAC9Ca,cAACkvB,EAAW,CAAC3f,UAAW+C,EAAQ/C,UAAWvF,OAAQA,MAErDhK,cAACuuB,EAAW,CACVhf,UAAW+C,EAAQ/C,UACnBvF,OAAQA,EACRwkB,kBAAmBA,EACnBjqB,aAAcqtB,MAEZ,EAIV,SAASI,EAAc3W,GAAqC,IAApC,QAAE/I,EAAO,OAAEtI,EAAM,KAAEikB,GAAc5S,EAkBvD,OACErb,cAACixB,IAAQ,CACP7Y,QAAS,CACP,CAAEwO,MAAO,YAAahH,MAAO,MAC7B,CAAEgH,MAAO,OAAQhH,MAAO,SAE1BA,MAAO,GACPsR,QAASlxB,cAACM,IAAgB,IAAKC,IAAS0I,aACxCnJ,UAAU,0CACVklB,SA1BsBoN,IACxB,GAAqB,OAAjBA,EAAI,GAAGxS,MAAgB,CACzB,IAAIyS,EAAwBC,OAAOC,KAAK,GAAG,MAADxyB,OAAQuS,EAAQ/C,UAAS,KAAAxP,OAAIiK,IACvE,MAAM,OAAE0hB,EAAM,KAAEf,GAAS6H,mBAASvE,EAAM,CAACqE,OAAOG,WAAYH,OAAOI,cACnEL,EAAsBvV,SAASxG,KAAOqc,YACpCrgB,EACAoZ,EACAf,EACA,CAAC3gB,GACDuf,IAEJ,CACqB,SAAjB6I,EAAI,GAAGxS,OACTgT,YAAiBtgB,EAAS,CAAC,EAAG,CAACtI,GAAS,CAACsoB,OAAOG,WAAYH,OAAOI,aAAczE,EACnF,GAeJ,CAEA,SAASgE,EAAkBtW,GAA+B,IAA9B,OAAE7F,EAAM,QAAEoc,GAAiBvW,EACrD,MAAOkX,EAAkBC,GAAuB/f,oBAAS,GAEzD,OACE/S,cAAA6Y,WAAA,CAAA1Z,SACG0zB,EACChzB,eAAAgZ,WAAA,CAAA1Z,SAAA,CACEU,eAAA,QAAMC,UAAU,UAASX,SAAA,CACvBa,cAACM,IAAgB,IAAKC,IAAS,gBAADR,OAAiB+V,MAC/CjW,eAAA,QAAMC,UAAU,MAAKX,SAAA,CAClB,IACDa,cAACM,IAAgB,IAAKC,IAASwN,gBAGnC/N,cAAC+yB,IAAY,CACXjzB,UAAU,yDACVme,QAASA,IAAM6U,GAAoB,GAAO3zB,SAE1Ca,cAACM,IAAgB,IAAKC,IAAS0N,OAEjCjO,cAAC+yB,IAAY,CACXjzB,UAAU,iDACVme,QAASA,KACPiU,IACAY,GAAoB,EAAM,EAC1B3zB,SAEFa,cAACM,IAAgB,IAAKC,IAASyN,WAInChO,cAAC+yB,IAAY,CACXjzB,UAAU,6CACVme,QAASA,IAAM6U,GAAoB,GAAM3zB,SAEzCa,cAACM,IAAgB,IAAKC,IAAS,SAADR,OAAU+V,SAKlD,CAEA,MAAM0a,EAAuBA,CAACpwB,EAAQqwB,KACpC,IAAI/R,EAAU,GACd,OAAQte,GACN,IAAK,UACHse,EAAUne,IAASwP,mBACnB,MACF,IAAK,qBACH2O,EAAUne,IAAS4P,yBACnB,MACF,IAAK,wBACHuO,EAAUne,IAAS6P,4BACnB,MACF,IAAK,4BACHsO,EAAUne,IAAS8P,+BACnB,MACF,IAAK,+BACHqO,EAAUne,IAAS+P,kCACnB,MACF,IAAK,uBACHoO,EAAUne,IAASgQ,8BACnB,MACF,IAAK,0BACHmO,EAAUne,IAASiQ,iCACnB,MACF,IAAK,eACH,OAAQigB,GACN,IAAK,aACH/R,EAAUne,IAASkQ,sBACnB,MACF,IAAK,SACHiO,EAAUne,IAASmQ,kBACnB,MACF,IAAK,YACHgO,EAAUne,IAASoQ,qBACnB,MAEF,IAAK,cACH+N,EAAUne,IAASqQ,uBACnB,MACF,IAAK,QACH8N,EAAUne,IAASsQ,iBACnB,MACF,IAAK,QACH6N,EAAUne,IAASuQ,kBAS3B,GAAI4N,EACF,OAAO1e,cAACM,IAAgB,IAAKoe,GAC/B,C,qLCrdK,MAAMsU,EAAuBl0B,IAA4B,IAA3B,UAAEgB,GAAmBhB,EACxD,OACEe,eAAA,OAAKC,UAAS,+BAAAC,OAAiCD,GAAYX,SAAA,CACzDa,cAACizB,IAAQ,CAACxd,MAAM,OAAO3V,UAAU,gBAAgB6V,MAAO,CAAEC,OAAQ,OAAQgB,MAAO,UACjF5W,cAACM,IAAgB,IAAKC,IAASoB,YAC3B,E,gCCEH,SAASuxB,EAAUp0B,GAAuE,IAAtE,OAAEoE,EAAM,UAAEqM,EAAS,SAAE6F,EAAQ,aAAE+d,EAAY,aAAE/f,GAAsBtU,EAC5F,MAAMs0B,EACJpzB,cAACqzB,IAAI,CAACC,GAAE,aAAAvzB,OAAewP,GAAazP,UAAU,uBAAsBX,SAClEU,eAAA,QAAMC,UAAU,aAAYX,SAAA,CAAC,IAAEoQ,OAGnC,OACE1P,eAAA,OAAKC,UAAU,sGAAqGX,SAAA,CAClHU,eAAA,OAAKC,UAAU,MAAKX,SAAA,CAClBa,cAAA,QAAMF,UAAU,aAAYX,SAAEi0B,IAC7BhgB,EAAevT,eAAA,QAAMC,UAAU,YAAWX,SAAA,CAAC,MAAIiU,KAAuB,QAEzEvT,eAAA,OAAKC,UAAU,KAAIX,SAAA,CAChBg0B,GACCnzB,cAACuzB,IAAU,CAAC9W,IAAG,oBAAA1c,OAAsBwP,GAAazP,UAAU,UAASX,SACnEa,cAACM,IAAgB,IAAKC,IAASqB,gBAGlCwT,GACCpV,cAAA,OAAKF,UAAU,UAASX,SACtBa,cAACmV,IAAW,CAACC,SAAUA,EAAUC,aAAc,cAAeC,UAAQ,WAMlF,CAEO,MAAMke,EAAgBtzB,IAAwC,IAAvC,QAAEoS,EAAO,aAAE6gB,GAAsBjzB,EAC7D,MAAMoY,EAAS9F,aAAaC,GAAUA,EAAM8G,YAAYjB,UACjDmb,GAAsBphB,YAAsBC,GAEnD,OACEzS,eAAAgZ,WAAA,CAAA1Z,SAAA,CACEa,cAACkzB,EAAU,CACThwB,OAAQoP,EAAQpP,OAChBqM,UAAW+C,EAAQ/C,UACnB6F,SAAU9C,EAAQohB,gBAClBtgB,aAAcd,EAAQqhB,iBACtBR,aAAcA,GAAgBM,IAEhC5zB,eAAA,OAAAV,SAAA,CACEa,cAAA,MACEF,UAAU,+DACV8zB,KAAMthB,EAAQyf,YAAYzZ,OAAOnZ,SAEhCmT,EAAQyf,aAAezf,EAAQyf,YAAYrS,OAE7CpN,EAAQ3Q,SAAW3B,cAACgzB,EAAoB,CAAClzB,UAAU,8BACnD,CAAC,QAAS,YAAYqT,SAASb,EAAQwD,SACtC9V,cAAC6V,IAAgB,CAACC,OAAQxD,EAAQwD,OAAQhW,UAAU,iCAGxDE,cAAC6zB,EAAO,CACNC,UAAWxhB,EAAQwhB,UACnB7W,UAAW3K,EAAQ2K,UACnB8W,UACEzb,EAAOnF,SAAS,MAAQb,EAAQ0hB,WAAaC,YAAiB3hB,EAAQ0hB,WAAY1b,OAGrF,EAIA,SAASub,EAAO9Y,GAA8D,IAA7D,UAAE+Y,EAAY,GAAE,UAAEC,EAAY,GAAE,UAAE9W,EAAY,IAAYlC,EAChF,MAAMzC,EAAS9F,aAAaC,GAAUA,EAAM8G,YAAYjB,SAKlD4b,EAAO,CAJcJ,EAAU/iB,KAAK8L,GAAaA,EAAS6C,OAAM2G,KAAK,MAChD/N,EAAOnF,SAAS,MAAQ4gB,EAAU1N,KAAK,MAAQ0N,EAC/C9W,EAAUlM,KAAKojB,GAAaA,EAASzU,OAAM2G,KAAK,OAED/S,QAAQ4c,GAAMA,IAExF,OACElwB,cAAA,QAAMF,UAAU,aAAYX,SACzB+0B,EAAKnjB,KAAI,CAACqjB,EAAKC,IACdx0B,eAAA,QAAAV,SAAA,CACa,IAAVk1B,GAAer0B,cAAA,QAAMF,UAAU,MAAKX,SAAC,SACrCi1B,IAFQA,MAOnB,C,yRCvFO,SAASE,EAAqBvyB,EAAOwyB,GAC1C,MAAMC,EAAoBD,EACtBE,YACE1yB,EAAM2yB,SAASphB,QAAQvJ,GAASwqB,EAAgBphB,SAASpJ,EAAK6e,WAAW5e,WAE3EjI,EACJ,OAAOksB,YAAKuG,EACd,CCZO,SAASvrB,EACdpH,EACAyQ,EACAvQ,EACA4yB,EACAC,EACAvC,GAEA,GAAe,SAAXxwB,EAEF,OADA+wB,EAAiBtgB,EAASvQ,EAAO4yB,EAAeC,GACzC,eAET,MAAM,OAAElJ,EAAM,KAAEf,GDXX,SAA6C5oB,EAAOwyB,EAAiBK,GAC1E,OAAOpC,mBAAS8B,EAAqBvyB,EAAOwyB,GAAkBK,EAChE,CCS2BC,CAAoC9yB,EAAO4yB,EAAeC,GACnF,GAAI,CAAC,KAAM,SAASzhB,SAAStR,GAC3B,OAAO8wB,EAASrgB,EAASoZ,EAAQf,EAAMgK,EAAe,WAAa9yB,GAKrE,IAH6B,MAAzBwwB,GAAiCA,EAAsByC,UACzDzC,EAAwBC,OAAOC,KAAK,GAAG,MAADxyB,OAAQuS,EAAO,KAAAvS,OAAI40B,KAE5C,eAAX9yB,EAEF,OADAwwB,EAAsBvV,SAASxG,MA2CHye,EA3C0BrJ,EA2ChBsJ,EA3CwBrK,EA4C1D,GAAN5qB,OAAUypB,IAAoB,SAAAzpB,OAAQ,CACpCi1B,EACAC,EAAgBF,EAAS,GAAI,GAC7BE,EAAgBF,EAAS,GAAI,IAC7B1O,KAAK,OA/CE,qBA0CJ,IAAyB0O,EAAUC,EAxCxC,GAAe,iBAAXnzB,EAEF,OADAwwB,EAAsBvV,SAASxG,KA+B5B,SAA2Bye,EAAUC,GAC1C,MAAM,kCAANj1B,OAAyC,CACvCi1B,EACAC,EAAgBF,EAAS,GAAI,GAC7BE,EAAgBF,EAAS,GAAI,IAC7B1O,KAAK,KACT,CArC0C6O,CAAkBxJ,EAAQf,GACzD,uBAET,GAAe,WAAX9oB,EAAqB,CACvB,MAAMszB,EAAY7iB,EAAQ8W,aAAa3M,IAEvC,OADA4V,EAAsBvV,SAASxG,KAAOqc,EAASrgB,EAASoZ,EAAQf,EAAMgK,EAAeQ,GAC9E,gBACT,CACF,CAEO,SAASC,EAAiBC,GAE/B,GAAIA,EACF,OAAOA,EAAWC,UAAUD,EAAWE,QAAQ,SAASpX,QAAQ,OAAQ,IAE5E,CAEO,SAASqX,EAAcjmB,EAAWolB,GACvC,OAAO,IAAIc,IAAI,YAAD11B,OACAwP,EAAS,8BAAAxP,OAA6B40B,EAActO,KAAK,MACrEqP,KACApf,IACJ,CAEO,SAASqf,EAAcpmB,EAAWolB,GACvC,OAAO,IAAIc,IAAI,YAAD11B,OACAwP,EAAS,8BAAAxP,OAA6B40B,EAActO,KAAK,MACrEqP,IAEJ,CAkBO,SAAS/C,EAASrgB,EAASyiB,EAAUC,EAAWL,EAAeQ,GACpE,MAAM5I,EAAO4I,EA+HR,SAAyB1Y,GAC9B,OAAOA,EAAItJ,SAAS,KAAOsJ,EAAG,GAAA1c,OAAM0c,EAAG,IACzC,CAjI2BmZ,CAAgBT,GAAU,GAAAp1B,OAAMwpB,KACzD,IAAI9M,EAAM8P,EAAO,QAAU,CAACyI,EAAWD,EAAS,GAAIA,EAAS,IAAI1O,KAAK,KAEtE,GAAI/T,EAAQujB,cAAe,CACzB,IAAIC,EAAcC,EAAkBzjB,EAAQujB,eACvCC,EAAYhP,WAAW,OAAMgP,EAAW,IAAA/1B,OAAO+1B,IACpDrZ,GAAOqZ,CACT,CAqBA,MAnBK,CAAC,aAAc,iBAAiB3iB,SAASgiB,KACxC7iB,EAAQnI,mBACVsS,GAAO,YAAcwJ,mBAAmB3T,EAAQnI,mBAE9CmI,EAAQrQ,UACNqQ,EAAQrQ,QAAQkR,SAAS,QAC3BsJ,GAAO,sBAAwBwJ,mBAAmBmP,EAAiB9iB,EAAQrQ,UAE3Ewa,GAAO,eAAiBwJ,mBAAmBmP,EAAiB9iB,EAAQrQ,WAIpEqQ,EAAQ/C,WAAaolB,IACvBlY,GAAO,QAAUwJ,mBAAmBuP,EAAcljB,EAAQ/C,UAAWolB,KAEnEriB,EAAQ0jB,YACVvZ,GAAO,YAAcwJ,mBAAmB3T,EAAQ0jB,UAAU3P,KAAK,QAG5D5J,CACT,CAEO,MAAMsZ,EAAqBv1B,IAChC,IAAIs1B,EAAc,GAQlB,OAPAt1B,EACG+lB,MAAM,KACNjT,QAAQ2iB,GAASA,IACjBzN,SAASyN,IACR,MAAOnR,EAAKlF,GAASqW,EAAK1P,MAAM,KAChCuP,GAAW,IAAA/1B,OAAQ+kB,EAAG,KAAA/kB,OAAIkmB,mBAAmBrG,GAAQ,IAElDkW,CAAW,EAGPlD,EAAmBzP,MAAO7Q,EAASvQ,EAAO4yB,EAAeC,EAAYsB,WAelF,SAA6B5jB,EAASqiB,GACpC,MAAMwB,EAAS,oBAAAp2B,OAAuB40B,EAAc7Z,OAAS,EAAI,KAAO,IAAG,KAAA/a,OAAI40B,EAActO,KAC3F,KACD,oBAAAtmB,OAAmBuS,EAAQ/C,UAAS,4BAC/B6mB,EAAoB,CACxBC,WAAW,EACXC,WAAYH,EACZI,cAAc,EACdC,gBAAiB,QACjBC,cAAe,QACfha,IAAKkZ,EAAcrjB,EAAQ/C,UAAWolB,GAAere,MAGvD,OAAOogB,EAAsBC,EAAc,SAAUP,GACvD,CA5BQQ,CAAoBtkB,EAASqiB,SA6CrC,SAA2BriB,GACzB,GAAIA,EAAQrQ,QAAS,CACnB,GAAIqQ,EAAQrQ,QAAQkR,SAAS,QAAS,CACpC,MAAOpU,EAAM83B,EAASC,GAlBrB,SAAwBra,GAC7B,MAAM1d,EAA0C,QAAnC0d,EAAIsa,cAAc7O,OAAO,EAAG,GAAe,MAAQ,MAC1DyC,EAAOlO,EAAIyL,OAAOzL,EAAI8Y,QAAQ,KAAO,EAAG9Y,EAAI8Y,QAAQ,KAAO9Y,EAAI8Y,QAAQ,KAAO,IAC7EsB,EAASC,GAAWnM,EAAK7P,QACL,IAAvB6P,EAAK4K,QAAQ,KACX5K,EAAKpE,MAAM,KACX,CAAC,KAAMoE,GACT,CAAC,KAAM,MACX,MAAO,CACL5rB,EACY,KAAZ83B,GAA8B,OAAZA,EAAmBjM,OAAOiM,GAAW,KAC3C,KAAZC,GAA8B,OAAZA,EAAmBlM,OAAOkM,GAAW,KAE3D,CAKuCE,CAAe1kB,EAAQrQ,SAClDg1B,EAAgB,CACpBxhB,MAAOnD,EAAQrQ,QACflD,KAAMA,GAMR,OAJI83B,IAASI,EAAcC,SAAWL,GAClCC,IAASG,EAAcE,SAAWL,GACtCG,EAAcxa,IAAMnK,EAAQrQ,QAAQimB,OAAO5V,EAAQrQ,QAAQszB,QAAQ,SAE5DmB,EAAsBC,EAAc,UAAWM,GACxD,CACE,OAAOP,EAAsBC,EAAc,UAAW,CAAEh2B,GAAI2R,EAAQrQ,UAExE,CACF,CA7DQm1B,CAAkB9kB,SAClBqiB,EAAc5jB,KAClBoS,MAAOpZ,EAAMmmB,UA6DjB,SAA4B5d,EAAS2b,EAAMoJ,GACzC,MAAMC,EAAoB,CACxBC,KAAMtJ,EAAK,GACXuJ,OAAQvJ,EAAK,GACbwJ,MAAOxJ,EAAK,GACZyJ,IAAKzJ,EAAK,GACV0J,kBAAmBrlB,EAAQnI,iBAC3BytB,iBAAkBtlB,EAAQrQ,QAAUqQ,EAAQrQ,QAAU,GACtDo0B,UAAWgB,EACXf,WAAY,YAGd,OAAOI,EAAsBC,EAAc,gBAAiBW,GAC9D,CAzEYO,CACJvlB,EACA4jB,GAAsB5B,EAAqBvyB,EAAO,CAACgI,IAC7C,IAANmmB,MAGC,GAqEF,SAASyG,EAAcmB,EAAUzd,GACtC,OAAO,IAAIob,IAYN,SAAyBpb,GAC9B,MAAM0d,EAAYnT,OAAOC,KAAKxK,GAC3BtJ,KAAK+T,GAAG,GAAA/kB,OAAQ+kB,EAAG,KAAA/kB,OAAIkmB,mBAAmB5L,EAAOyK,OACjDuB,KAAK,KACR,MAAM,IAANtmB,OAAWg4B,EACb,CAjBiBC,CAAgB3d,GAAQ,yBAADta,OAA2B+3B,GACnE,CAMA,SAAS7C,EAAgBgD,EAAOC,GAC9B,MAAMC,EAAIxO,KAAKwB,IAAI,GAAI+M,GACvB,OAAOvO,KAAKhR,MAAMsf,EAAQE,GAAKA,CACjC,CASA,IAAIC,EAAwB,KAC5B,MAAM1B,EAAwB,SAAU2B,GAOtC,OAAI/F,OAAOgG,OACF,IAAIlR,SAAQ,CAACC,EAASC,KACvB8Q,IAA0BA,EAAsBtD,QAClDsD,EAAsB/G,QAGxB+G,EAAwB9F,OAAOC,KAAK8F,GAGpCE,YAAW,KACLH,IAA0BA,EAAsBtD,QAClDsD,EAAsB/G,QAExBhK,GAAQ,EAAK,GACZ,IAAK,IAILmR,MAAMH,GACV/d,MAAMme,GAAiC,MAApBA,EAAS3iB,SAC5BuS,OAAO1oB,IACN+4B,QAAQxN,IAAIvrB,IACL,IAEb,C,oCC1PA,4GAMO,MAAMg5B,EAAe,CAC1B,CAAEv5B,KAAMw5B,KAAUnjB,MAAO,QAASmK,MAAO,SACzC,CAAExgB,KAAMy5B,IAAUpjB,MAAO,YAAamK,MAAO,aAC7C,CAAExgB,KAAM05B,KAAWrjB,MAAO,YAAamK,MAAO,aAC9C,CAAExgB,KAAM25B,KAAUtjB,MAAO,UAAWmK,MAAO,YAC3C,CAAExgB,KAAM45B,IAAcvjB,MAAO,QAASmK,MAAO,UAGxC,SAASqZ,EAAYn6B,GAAsC,IAArC,MAAEie,EAAQ,GAAE,WAAEmc,GAAoBp6B,EAC7D,MAAM4Y,EAAOC,cACb,OACE3X,cAAA6Y,WAAA,CAAA1Z,SACGw5B,EAAa5nB,KAAI,CAACooB,EAASC,IAC1Bp5B,cAAA,QAAMyV,MAAOiC,EAAKwG,cAAc3d,IAAS44B,EAAQ1jB,QAAQtW,SACvDa,cAACm5B,EAAQ/5B,KAAI,CACXU,UAAS,WAAAC,OACPgd,GAASA,EAAM5J,SAASgmB,EAAQvZ,OAASsZ,EAAa,cAExDtjB,OAAO,QALoDwjB,MAWvE,C,oCC9BA,iIAKO,MAAMC,EAAqBrvB,GACZwI,aAAaC,GAAUA,EAAM6mB,cAItCC,EAAsBA,KACjC,MAAMjgB,EAAQ9G,aAAaC,GAAUA,EAAMC,KAAK4G,QAC1CkgB,EAAWC,cASjB,OARqBvS,uBAAY/D,UAC/B,GAAI7J,EAAO,CACT,MAAMggB,QAAoBhW,YAAkB,8BAA+BhK,GAC3EkgB,EAAS,CAAEz6B,KAAM,mBAAoBgD,MAAOu3B,EAAYA,aAAe,KACvEE,EAAS,CAAEz6B,KAAM,cAAeuT,QAASgnB,EAAY/pB,WAAa,OAClEiqB,EAAS,CAAEz6B,KAAM,mBAAoB+W,OAAQwjB,EAAYI,YAAc,MACzE,IACC,CAACpgB,EAAOkgB,GACQ,EAGRG,EAAsBA,KACjC,MAAMH,EAAWC,cAMjB,OALqBvS,uBAAY,KAC/BsS,EAAS,CAAEz6B,KAAM,mBAAoBgD,MAAO,KAC5Cy3B,EAAS,CAAEz6B,KAAM,cAAeuT,QAAS,OACzCknB,EAAS,CAAEz6B,KAAM,mBAAoB+W,OAAQ,MAAO,GACnD,CAAC0jB,GACe,C,oCC/BrB,8FAQO,MAAMI,EAAe96B,IAAA,IAAC,QAAEwT,EAAO,UAAExS,EAAS,QAAEd,GAAU,EAAK,SAAEG,GAAkBL,EAAA,OACpFkB,cAAA,KAAGsW,KAAMuP,YAAiBvT,GAAU8D,OAAO,SAASC,IAAI,sBAAqBlX,SAC1EA,GACCU,eAACkzB,IAAY,CAACjzB,UAAWA,EAAUX,SAAA,CAChCH,EACCgB,cAACM,IAAgB,IAAKC,IAAS+D,aAE/BtE,cAACM,IAAgB,IAAKC,IAAS8D,eAEjCrE,cAAC65B,IAAgB,CAAC/5B,UAAWd,EAAU,MAAQ,YAGjD,C,qOCNN,IAAI86B,EAAW,IAAIC,MAAM,GAAI,IAC7BD,EAASE,ICfM,qcDiBf,IAAIC,EAAc,IAAIF,MAAM,GAAI,IAChCE,EAAYD,IElBG,6kBFoBfE,IAASC,YAAcC,IACvB,IACEF,IAASG,iBAAiBC,IAC5B,CAAE,MACA5B,QAAQxN,IAAI,0BACd,CAEO,MAAMqP,EAAWz7B,IAcjB,IAdkB,UACvBgB,EAAS,WACT06B,EAAU,eACVC,EAAc,cACdC,EAAa,gBACbC,EAAe,gBACfC,EAAe,kBACfC,EAAiB,WACjBlrB,EAAU,aACVmrB,EAAY,SACZC,EAAQ,YACRC,GAAc,EAAI,YAClBC,GAAc,EACdC,SAAUC,GACXr8B,EACC,MAAM4Y,EAAOC,cACPyjB,EAAS5kB,IAAM6kB,YACf/iB,EAAS9F,aAAaC,GAAUA,EAAM8G,YAAoB,SAC1D+hB,EAAc9oB,aAAaC,GAAUA,EAAMC,KAAKH,eAC/CgpB,EAAeC,GAAoBzoB,mBAAS,OAE5ChC,EAAK0qB,GAAa1oB,mBAAS,MA2blC,OAzbA2oB,2BAAgB,KAIdxB,IAASyB,aACPF,EACE,IAAIvB,IAAS0B,IAAI,CACfC,UAAWT,EAAOlX,QAClBvO,MAAOmmB,IACPpQ,OAAQ,CAAC,EAAG,GACZf,KAAM,EACNoR,oBAAoB,IAEnBC,WAAW,IAAI9B,IAAS+B,mBAAmB,CAAEj9B,SAAS,KACtDg9B,WAAW,IAAIE,IAAe,CAAEC,gBAAiB7jB,EAAO4P,OAAO,EAAG,IAAM,SAGxE,KACLnX,GAAOA,EAAIqrB,QAAQ,IAGpB,IAEHV,2BAAgB,KAEd,GAA4B,kBAAjBZ,EAA2B,CACpC,MAAMuB,EAAW7B,EAAW9F,SAASphB,QAClCvJ,GAASA,EAAK6e,WAAW5e,SAAW8wB,IACrC,GAAGwB,SACLvrB,EAAIwrB,UAAUtO,YAAKoO,GAAW,CAAEG,QAAS,GAAI1F,QAAS,GAAI2F,SAAS,GACrE,IACC,CAAC3B,EAAc/pB,EAAKypB,IAEvBkB,2BAAgB,KACd,MAAMgB,EAAqBje,IAAO,IAADke,EAC/B,MAAM5yB,EAAiB,QAAb4yB,EAAGle,EAAEiW,gBAAQ,IAAAiI,OAAA,EAAVA,EAAa,GAAG/T,WACnB,OAAVjZ,QAAU,IAAVA,KAAa5F,EAAKC,OAAQD,EAAK2vB,WAAW,EAGtCkD,EAAmB,CACvBnC,GAAkB,yBAClBA,GAAkB,uBAClBA,GAAkB,8BAEdoC,EAAgB,CACpB,aACA,aACA,wBACA,0BACApC,GAAkB,0BAGdqC,EAAeA,KAGnB,IAAgB,OAAZhC,QAAY,IAAZA,OAAY,EAAZA,EAAchgB,QAAS,EAAG,CAC5B,MAIMiiB,EAJkBvC,EAAW9F,SAASphB,QAAQvJ,GAClD+wB,EAAa3nB,SAASpJ,EAAK6e,WAAW5e,UAGIsjB,QAC1C,CAACC,EAAKyP,KACJ,MAAMC,EAAOD,EAAKV,SAClB,MAAO,CACLv9B,KAAM,eACNm+B,YAAa,IAAI3P,EAAI2P,eAAgBD,EAAKC,aAC3C,GAEH,CAAEn+B,KAAM,eAAgBm+B,YAAa,KAGjCC,EAAc7K,OAAOG,WAC3B1hB,EAAIwrB,UAAUtO,YAAK8O,GAAsB,CACvCP,QAASW,EAAc,EACvBV,SAAS,GAEb,MAAY9B,EAGV5pB,EAAIwrB,UAAUtO,YAAKuM,GAAa,CAAEgC,QAAS,IAAK1F,QAAS,IAAK2F,QAASzB,IAFvEjqB,EAAIwrB,UAAUtO,YAAKuM,GAAa,CAAEgC,QAAS,GAAIC,QAASzB,GAG1D,EAGIoC,EAAkBA,KAItB,GAHArsB,EAAIssB,KAAK,QAAQ,KACftsB,EAAIusB,QAAQ,SAEiBnlB,IAA3BpH,EAAIwsB,UAAU,SAAwB,CACxCxsB,EAAIysB,SAAS,OAAQ1D,EAAU,CAAEljB,MAAO,GAAIhB,OAAQ,GAAI4E,KAAMsf,IAC9D/oB,EAAIysB,SAAS,UAAWvD,EAAa,CAAErjB,MAAO,GAAIhB,OAAQ,GAAI4E,KAAMyf,IAEpElpB,EAAI0sB,UAAU,QAAS,CACrB1+B,KAAM,UACNyb,KAAMggB,IAGRzpB,EAAIirB,WAAW,IAAI9B,IAASwD,mBACxB7C,EAEF9pB,EAAI4sB,WAAWC,UAEf7sB,EAAI4sB,WAAWE,SAEjB,MAAMC,EAAS,CACb,MACA,CAAC,KAAM,CAAC,YAAa,CAAC,MAAO,eAAgB,sBAC7C,CAAC,KAAM,CAAC,YAAa,CAAC,MAAO,eAAgB,0BAG/C,IAAIC,EAAsB,CAAC,QAE3B,QAAuB5lB,IAAnBmjB,EAAY36B,GAAkB,CAChC,MAAMq9B,EAAgB,CAAC,MAAOF,EAAQ,CAAC,KAAM,CAAC,MAAO,YAAaxC,EAAY36B,KAC9Eo9B,EAAsB,IAAIA,EAAyBC,EAAe,UACpE,CACAD,EAAsB,IAAIA,EAAyBD,EAAQ,OAAQ,IAEnE/sB,EAAIktB,SAAS,CACXt9B,GAAI,aACJ5B,KAAM,SACNm/B,OAAQ,QACRC,OAAQ,CACN,aAAcJ,EACd,YAAa,MAIjBhtB,EAAIktB,SACF,CACEt9B,GAAI,aACJ5B,KAAM,OACNm/B,OAAQ,QACRE,MAAO,CACL,aAAc,CACZ,QACA,CAAC,MAAO,cACR,QACAC,IAAaC,MACb,qBACAD,IAAaE,mBACb,SACAF,IAAaG,OACb,wBACAH,IAAaI,sBACb,YACAJ,IAAaK,UACb,cACAL,IAAaM,YACb,aACAN,IAAaO,WACb,iBAEF,eAAgB,KAGpB,cAGF7tB,EAAIktB,SAAS,CACXt9B,GAAI,wBACJ5B,KAAM,OACNm/B,OAAQ,QACRE,MAAO,CACL,aAAc,UACd,aAAc,GAEhB9qB,YACoB6E,IAAlBgjB,GAAwD,IAAzBA,EAAcrgB,OACzC,CAAC,KAAM,SAAU,IACjB,CAAC,KAAM,UAAU/a,OAAOo7B,KAGhCpqB,EAAIktB,SACF,CACEt9B,GAAI,0BACJ5B,KAAM,OACNm/B,OAAQ,QACRE,MAAO,CACL,aAAc,UACd,aAAc,IAGlB,wBAEJ,CA6BA,QA3BuCjmB,IAAnCpH,EAAIwsB,UAAU,kBAAkC9C,IAClD1pB,EAAI0sB,UAAU,gBAAiB,CAC7B1+B,KAAM,UACNyb,KAAMigB,IAGR1pB,EAAIktB,SAAS,CACXt9B,GAAI,yBACJ5B,KAAM,OACNm/B,OAAQ,gBACRE,MAAO,CACL,aAAc,UACd,aAAc,CACZ7R,KAAM,GACNsS,MAAO,CACL,CAAC,EAAG,GACJ,CAAC,GAAI,GACL,CAAC,GAAI,OAIXV,OAAQ,CACNW,WAAY,mBAKqB3mB,IAAnCpH,EAAIwsB,UAAU,kBAAkC7C,EAAe,CACjE,MAAMqE,EAA4B,CAChChgC,KAAM,oBACN21B,SAAUgG,EAAc3pB,KAAKiuB,IAAI,CAAQjgC,KAAM,UAAWu9B,SAAU0C,OAEtEjuB,EAAI0sB,UAAU,gBAAiB,CAC7B1+B,KAAM,UACNyb,KAAMukB,IAGRhuB,EAAIktB,SAAS,CACXt9B,GAAI,uBACJ5B,KAAM,OACNm/B,OAAQ,gBACRE,MAAO,CACL,aAAc,UACd,iBAAkB,CAAC,EAAG,GACtB,aAAc,EACd,eAAgB,IAElBD,OAAQ,CACNW,WAAY,aAIhB/tB,EAAIktB,SACF,CACEt9B,GAAI,gBACJ5B,KAAM,OACNm/B,OAAQ,gBACRE,MAAO,CACL,aAAc,UACd,qBAAsB,UACtB,eAAgB,IAElBD,OAAQ,CACNW,WAAY,YAGhB,aAEJ,MAEwC3mB,IAApCpH,EAAIwsB,UAAU,mBAAmC9C,GAAkBG,IACrE7pB,EAAI0sB,UAAU,iBAAkB,CAC9B1+B,KAAM,UACNyb,KAAMogB,IAGR7pB,EAAIktB,SAAS,CACXt9B,GAAI,6BACJ5B,KAAM,SACNm/B,OAAQ,iBACRE,MAAO,CACL,gBAAiB,CACf7R,KAAM,EACNsS,MAAO,CACL,CAAC,GAAI,GACL,CAAC,GAAI,OAGT,eAAgB,QAElBV,OAAQ,CACNW,WAAY,aAIhB/tB,EAAIktB,SACF,CACEt9B,GAAI,uBACJ5B,KAAM,SACNm/B,OAAQ,iBACRE,MAAO,CACL,gBAAiB,CACf7R,KAAM,EACNsS,MAAO,CACL,CAAC,GAAI,IACL,CAAC,GAAI,OAGT,eAAgB,WAElBV,OAAQ,CACNW,WAAY,YAGhB,+BAGJ,MAAMG,EAAQ,IAAI/E,IAASgF,MAAM,CAC/BC,aAAa,EACbC,cAAc,EACdC,OAAQ,CACN3H,IAAK,EAAE,GAAI,GACXF,OAAQ,CAAC,GAAI,IACbD,KAAM,CAAC,GAAI,IACXE,MAAO,EAAE,GAAI,MAGd6H,QAAQ,GAADv/B,OAAI2X,EAAKwG,cAAc3d,IAASuG,0BACvCy4B,eAEHxuB,EAAIyuB,GAAG,YAAa,cAAc,SAAU/gB,GAGxCA,EAAEiW,SAAS,GAAG9L,WAAW6W,WAAanE,EAAY36B,IACV,WAAxC8d,EAAEiW,SAAS,GAAG9L,WAAW8Q,WAEzBuF,EAAMS,MAAM3uB,IAEZA,EAAI4uB,YAAYhqB,MAAMiqB,OAAS,UAC/BX,EAAMY,UAAYZ,EAAM7C,UAEtBnB,IAEExc,EAAEiW,SAAS,GAAG9L,WAAWxX,WAAakqB,EAAY36B,GACpD66B,EAAiB/c,EAAEiW,SAAS,GAAG9L,WAAW5e,QAE1CwxB,EAAiB,MAGvB,IAEIb,GAAmBI,IACrBhqB,EAAIyuB,GAAG,aAAc,wBAAwB,SAAU/gB,GACrD1N,EAAI4uB,YAAYhqB,MAAMiqB,OAAS,SACjC,IACA7uB,EAAIyuB,GAAG,aAAc,wBAAwB,SAAU/gB,GACrD1N,EAAI4uB,YAAYhqB,MAAMiqB,OAAS,EACjC,IACA7uB,EAAIyuB,GAAG,QAAS,wBAAwB,IAAMzE,EAAS,aACvDhqB,EAAIyuB,GAAG,QAAS,8BAA8B,IAAMzE,EAAS,cAG/DhqB,EAAIyuB,GAAG,QAAS,aAAc9C,GAC9B3rB,EAAIyuB,GAAG,aAAc,cAAc,SAAU/gB,GAE3C1N,EAAI4uB,YAAYhqB,MAAMiqB,OAAS,GAE/B3E,GAAeO,EAAiB,MAChCyD,EAAMY,UAAYZ,EAAM7C,SAIpBrrB,EAAI+uB,kBACN/uB,EAAI+uB,iBAAiBC,UAAU3D,OAAO,yBAE1C,IACAU,GAAc,EAGVkD,EAAmBxF,GAAcA,EAAW9F,UAAY8F,EAAW9F,SAAS5Z,OAAS,EAErFmlB,EACI,OAARlvB,GACAA,EAAImvB,sBACuB/nB,IAA3BpH,EAAIwsB,UAAU,UACdyC,EACIG,EACI,OAARpvB,IACCA,EAAImvB,sBACsB/nB,IAA3BpH,EAAIwsB,UAAU,UACdyC,EACII,EAAkC,OAARrvB,QAA2CoH,IAA3BpH,EAAIwsB,UAAU,SAqC9D,OAlCI0C,IAAuBG,EACzBhD,IACS+C,IAAyBC,EAClCrvB,EAAIyuB,GAAG,OAAQpC,IACN+C,GAAwBF,IACjCvH,QAAQ/4B,MAAM,oEAIZygC,GAA2BJ,IAC7BjvB,EAAIwsB,UAAU,SAAS8C,QAAQ7F,GAK/BzpB,EAAIyuB,GAAG,QAAS,aAAc9C,IAEN,IAApB/B,GACFkC,EAAcrU,SAAS8X,GAAOA,GAAMvvB,EAAIwvB,kBAAkBD,EAAI,aAAc,UAC5E1D,EAAiBpU,SAAS8X,GAAOA,GAAMvvB,EAAIwvB,kBAAkBD,EAAI,aAAc,eAE/E1D,EAAiBpU,SAAS8X,GAAOA,GAAMvvB,EAAIwvB,kBAAkBD,EAAI,aAAc,UAC/EzD,EAAcrU,SAAS8X,GAAOA,GAAMvvB,EAAIwvB,kBAAkBD,EAAI,aAAc,aACxEzF,GACFiC,IAEE3B,GAAiBA,EAAcrgB,OAAS,EAC1C/J,EAAIyvB,UAAU,wBAAyB,CAAC,KAAM,UAAUzgC,OAAOo7B,IAE/DpqB,EAAIyvB,UAAU,wBAAyB,CAAC,KAAM,SAAU,OAKvD,KAEO,OAARzvB,QAA2CoH,IAA3BpH,EAAIwsB,UAAU,UAA0ByC,IAC1DjvB,EAAI0vB,IAAI,QAAS,aAAc/D,GAC/BE,EAAiBpU,SAAS8X,GAAOA,GAAMvvB,EAAIwvB,kBAAkBD,EAAI,aAAc,UAC/EzD,EAAcrU,SAAS8X,GAAOA,GAAMvvB,EAAIwvB,kBAAkBD,EAAI,aAAc,UAC9E,CACD,GACA,CACDvvB,EACAypB,EACAE,EACAS,EACAxrB,EACA8qB,EACAG,EACAD,EACAE,EACAE,EACAC,EACAM,EAAY36B,GACZs6B,EACAH,EACAQ,EAAYpoB,SACZwE,IAGGwiB,IAASyB,YAIV97B,eAAAgZ,WAAA,CAAA1Z,SAAA,CACG87B,GAAeM,GACdv7B,cAAA,OAAKF,UAAU,sEAAqEX,SAClFa,cAACM,IAAgB,IAAKC,IAASyJ,OAAQxJ,OAAQ,CAAEG,GAAI46B,OAGzDv7B,cAAA,OAAKW,GAAG,MAAMb,UAAWA,EAAW6kB,IAAKyW,OATtCp7B,cAACgW,IAAgB,CAAClW,UAAS,kBAAAC,OAAoBD,GAAa,KAYrE,C,oCGxfF,yJAUO,SAAS4gC,EAAkB5hC,GAAoD,IAAnD,UAAEyQ,EAAS,kBAAEoxB,EAAiB,OAAEvgC,GAAgBtB,EACjF,MAAMge,EAAW8jB,cAEjB,OACE/gC,eAAAgZ,WAAA,CAAA1Z,SAAA,CACEa,cAAA,MAAIF,UAAU,8BAA6BX,SACzCa,cAACM,IAAgB,IAAKC,IAAS+H,sBAEjCtI,cAAA,OAAKF,UAAU,eAAcX,SAC3Ba,cAACM,IAAgB,IACXC,IACFogC,EAAoB,EAChB,+BACA,kCAENngC,OAAQ,CACN8R,QAAStS,cAAA,QAAMF,UAAU,MAAKX,SAAEoQ,IAChC2gB,EAAGlwB,cAAA,QAAMF,UAAU,MAAKX,SAAEwhC,IAC1BvgC,OACEJ,cAAA,QAAMF,UAAU,MAAKX,SACnBa,cAACM,IAAgB,IAAKC,IAASH,YAMzCJ,cAACqzB,IAAI,CAACC,GAAE,aAAAvzB,OAAewP,EAAS,KAAAxP,OAAIK,EAAM,KAAKqS,MAAO,CAAEouB,aAAc/jB,EAASgkB,UAAW3hC,SACxFa,cAAC6uB,IAAM,CAAC/uB,UAAU,eAAcX,SAC9Ba,cAACM,IAAgB,IAAKC,IAASoI,YAAanI,OAAQ,CAAE8R,QAAS/C,WAKzE,CAEO,SAASwxB,EAAe7gC,GAAmC,IAAlC,YAAEo5B,EAAW,OAAEl5B,GAAgBF,EAC7D,MAAM66B,EAAWiG,cACjB,OACEnhC,eAAAgZ,WAAA,CAAA1Z,SAAA,CACEa,cAAA,MAAIF,UAAU,8BAA6BX,SACzCa,cAACM,IAAgB,IAAKC,IAAS+H,sBAEjCtI,cAAA,OAAKF,UAAU,eAAcX,SAC3Ba,cAACM,IAAgB,IACXC,IACF+4B,EAAYv3B,MAAM+Y,OAAS,EACvB,+BACA,kCAENta,OAAQ,CAAEwJ,OAAQhK,cAAA,QAAMF,UAAU,MAAKX,SAAEm6B,EAAYv3B,aAGzD/B,cAAC6uB,IAAM,CACL/uB,UAAU,eACVme,QAASA,IAAM8c,EAAS,aAADh7B,OAAcu5B,EAAYhnB,QAAO,KAAAvS,OAAIK,EAAM,MAAKjB,SAEvEa,cAACM,IAAgB,IACXC,IAAS+4B,EAAYv3B,MAAM+Y,OAAS,EAAI,oBAAsB,uBAClEta,OAAQ,CAAEygC,cAAejhC,cAACM,IAAgB,IAAKC,IAASH,YAKlE,CAEO,MAAM8gC,EAAenmB,IAA+B,IAA9B,GAAEpa,EAAE,MAAE0wB,EAAK,UAAE8P,GAAWpmB,EACnD,MAAMzB,EAAQ9G,aAAaC,GAAUA,EAAMC,KAAK4G,SACzC8nB,EAASC,GAActuB,mBAAS,MAEvCC,qBAAU,KACamQ,WACnB,MAAM5I,QAAY+I,YAAkB,YAADvjB,OAAaY,EAAE,MAClD0gC,EAAW9mB,EAAI,EAEjB+mB,CAAa3gC,EAAG,GACf,CAACA,IAQJ,OACEd,eAAAgZ,WAAA,CAAA1Z,SAAA,CACEa,cAAA,MAAIF,UAAU,8BAA6BX,SACzCa,cAACM,IAAgB,IAAKC,IAAS2H,qBAEpB,OAAZk5B,EAAmB,KAClBvhC,eAAA,OAAKC,UAAU,eAAcX,SAAA,CAC3Ba,cAACM,IAAgB,IAAKC,IAAS4H,8BAC/BtI,eAAA,OAAKC,UAAU,yBAAwBX,SAAA,CACrCa,cAAA,KAAGF,UAAU,aAAYX,SAAEiiC,EAAQ1hB,OACnC1f,cAAA,KAAGF,UAAU,KAAIX,SAAEiiC,EAAQt9B,cAC3B9D,cAAA,KAAGF,UAAU,KAAIX,SAAEiiC,EAAQG,eAE7B1hC,eAAA,OAAKC,UAAU,YAAWX,SAAA,CACxBa,cAAC6uB,IAAM,CAAC5Q,QAASA,IAAMoT,IAASvxB,UAAU,yBAAwBX,SAChEa,cAACM,IAAgB,IAAKC,IAAS8H,WAEjCrI,cAAC6uB,IAAM,CAAC5Q,QAASA,KAtBzBmK,YAAmB,YAADroB,OAAaY,EAAE,2BAA2B,KAAM2Y,GAAOgB,MAAK,IAC5E6mB,KAqB6C,EAACrhC,UAAU,eAAcX,SAC9Da,cAACM,IAAgB,IAAKC,IAAS6H,0BAKtC,EAIA,SAASo5B,EAAStmB,GAAuE,IAAtE,MAAEvb,EAAK,MAAE0xB,EAAK,MAAEtvB,EAAK,cAAE4yB,EAAa,iBAAE8M,EAAgB,UAAEN,GAAWjmB,EAC3F,MAAMwmB,EAAqC,6BAAV/hC,GAAwCg1B,EAAc7Z,OAAS,EAEhG,OACEjb,eAAAgZ,WAAA,CAAA1Z,SAAA,CACEa,cAAA,MAAIF,UAAU,8BAA6BX,SACxCoB,IAAS,GAADR,OAAIJ,EAAK,UAChBK,cAACM,IAAgB,IAAKC,IAAS,GAADR,OAAIJ,EAAK,YAEvCK,cAACM,IAAgB,IAAKC,IAASyH,cAGnChI,cAAA,OAAKF,UAAU,eAAcX,SAC1BoB,IAAS,GAADR,OAAIJ,EAAK,qBAChBK,cAACM,IAAgB,IAAKC,IAAS,GAADR,OAAIJ,EAAK,uBAEvCK,cAACM,IAAgB,IAAKC,IAAS0H,yBAGnCjI,cAAC2hC,EAAgB,CACftQ,MAAOA,EACPqQ,yBAA0BA,EAC1B3/B,MAAOA,EACP4yB,cAAeA,EACf8M,iBAAkBA,EAClBN,UAAWA,MAInB,CAEA,SAASQ,EAAgBtmB,GAOrB,IAPsB,MACxBgW,EAAK,yBACLqQ,EAAwB,UACxBP,EAAS,MACTp/B,EAAK,cACL4yB,EAAa,iBACb8M,GACDpmB,EACC,MAAMgT,EAAO7b,aAAaC,GAAUA,EAAMC,KAAKH,eACxCqvB,EAAiBC,GAAsB9uB,oBAAS,GAwBvD,OAPAC,qBAAU,KACJ4uB,IACFT,IACAU,GAAmB,GACrB,GACC,CAACD,EAAiBT,IAGnBthC,eAAA,OAAKC,UAAU,6BAA4BX,SAAA,CACzCa,cAAC6uB,IAAM,CACL5Q,QAASoT,EACTvxB,UAAS,OAAAC,OAAS2hC,EAA2B,uBAAyB,gBAAiBviC,SAEvFa,cAACM,IAAgB,IAAKC,IAASqG,eAEhC86B,GACC1hC,cAAC6uB,IAAM,CAAC5Q,QA/BoB6jB,KAChC,MAAMC,EAAoBhgC,EAAM2yB,SAC7BphB,QAAQ0uB,GAAYA,EAAQpZ,WAAW6W,WAAapR,EAAK1tB,KACzDoQ,KAAKixB,GAAYA,EAAQpZ,WAAW5e,SAEjCi4B,EAAyBtN,EAAcrhB,QAC1C4uB,IAAkBH,EAAkB5uB,SAAS+uB,KAEhDT,EAAiBQ,GAIjBJ,GAAmB,EAAK,EAmBwB/hC,UAAU,mBAAkBX,SACtEa,cAACM,IAAgB,IAAKC,IAASsG,0BAKzC,CAEO,SAASs7B,EAAsBxmB,GAQ1B,IAR2B,QACrCrJ,EAAO,MACP3S,EAAK,MACL0xB,EAAK,UACL8P,EAAS,MACTp/B,EAAK,cACL4yB,EAAa,iBACb8M,GACO9lB,EACP,MAAM2d,EAAcD,cACdj5B,EAAgC,0BAAvBk5B,EAAYxjB,OAAqC,WAAa,MACvEssB,EAAyB,qBAAVziC,IAAiC25B,EAAYhnB,QAElE,OACEzS,eAAA,OAAKC,UAAU,2CAA0CX,SAAA,CACtDijC,GAAgBpiC,cAACkhC,EAAY,CAACvgC,GAAI2R,EAAQ+vB,UAAWhR,MAAOA,EAAO8P,UAAWA,IAEpE,SAAVxhC,GAAoBK,cAACwhC,EAAS,CAAC7hC,MAAOA,EAAO0xB,MAAOA,KACnDiI,EAAYhnB,UAAY8vB,GAA0B,SAAVziC,GACxCK,cAACwhC,EAAS,CACR7hC,MAAOA,EACP0xB,MAAOA,EACP8P,UAAWA,EACXp/B,MAAOA,EACP4yB,cAAeA,EACf8M,iBAAkBA,IAIrBnI,EAAYhnB,SAAWgnB,EAAYhnB,UAAYA,EAAQ/C,WAAuB,SAAV5P,GACnEK,cAAC0gC,EAAkB,CACjBnxB,UAAW+pB,EAAYhnB,QACvBlS,OAAQA,EACRugC,kBAAmBrH,EAAYv3B,MAAM+Y,SAIxCwe,EAAYhnB,UAAYA,EAAQ/C,WAAuB,SAAV5P,GAC5CK,cAAC+gC,EAAe,CAAC3gC,OAAQA,EAAQk5B,YAAaA,MAItD,C,oCCnPA,6HAQO,MAAMgJ,EAAoBxjC,IAAA,IAAC,UAAEyQ,EAAS,UAAEzP,GAAmBhB,EAAA,OAChEkB,cAAA,KACEsW,KAAI,GAAAvW,OAAK21B,IAAO,aAAA31B,OAAYwP,EAAS,8BACrCgzB,SAAQ,WAAAxiC,OAAawP,EAAS,gBAAepQ,SAE7Ca,cAAC+yB,IAAY,CAACjzB,UAAWA,EAAWqf,KAAMnf,cAACwiC,IAAU,CAAC1iC,UAAU,aAAcX,SAC5Ea,cAACM,IAAgB,IAAKC,IAAS2E,wBAE/B,EAGOu9B,EAAyBviC,IAAA,IAAC,UAAEqP,EAAS,UAAEzP,GAAmBI,EAAA,OACrEF,cAAA,KACEsW,KAAI,GAAAvW,OAAK21B,IAAO,aAAA31B,OAAYwP,EAAS,wBACrCgzB,SAAQ,WAAAxiC,OAAawP,EAAS,kBAAiBpQ,SAE/Ca,cAAC+yB,IAAY,CAACjzB,UAAWA,EAAWqf,KAAMnf,cAAC0iC,IAAiB,CAAC5iC,UAAU,aAAcX,SACnFa,cAACM,IAAgB,IAAKC,IAAS4E,sBAE/B,C,oCC3BN,uFAOO,SAASw9B,EAAmB7jC,GAA+C,IAA9C,aAAEkD,EAAY,kBAAE4gC,GAA2B9jC,EAC7E,MAAM+jC,EAAmB7gC,EAAe2jB,YAAiB3jB,GAAgB,CAAE8gC,OAAQ,IAEnF,OACEjjC,eAAAgZ,WAAA,CAAA1Z,SAAA,CACGyjC,GACC5iC,cAACnB,IAAK,CAACE,KAAK,UAAUC,SAAS,EAAMG,SACnCa,cAACM,IAAgB,IAAKC,IAAS0J,sBAGnCjK,cAAA,OACEF,UAAU,uCACV4lB,wBAAyBmd,MAIjC,C,oCCvBA,oEAKO,SAASE,EAAoBjkC,GAAoB,IAAnB,KAAEo1B,GAAcp1B,EACnD,OACEe,eAAA,OAAKC,UAAU,mBAAkBX,SAAA,CAC/BU,eAAA,QAAMC,UAAU,MAAKX,SAAA,CACnBa,cAACM,IAAgB,IAAKC,IAAS4J,mBAAoB,OAErDnK,cAAA,QAAMF,UAAU,MAAKX,SAAE+0B,MAG7B,C,oCCdA,0DAGO,MAAM8O,EAAclkC,IAAA,IAAC,UAAEgB,GAAmBhB,EAAA,OAC/CkB,cAAA,QAAMF,UAAS,wBAAAC,OAA0BD,GAAYX,SACnDa,cAACR,IAAS,CAACoW,OAAO,OAAOgB,MAAM,UAC1B,C,iHCqBF,MAAMqsB,UAKHC,IAeRlZ,YACEmZ,EACA/qB,GAEAgrB,QAEArsB,KAAKosB,OAASA,EACdpsB,KAAKssB,WAAWjrB,GAChBrB,KAAKusB,cACLvsB,KAAKwsB,cACN,CAESD,cACRvsB,KAAK+X,OAAS/X,KAAK+X,OAAO0U,KAAKzsB,MAC/BA,KAAK0sB,MAAQ1sB,KAAK0sB,MAAMD,KAAKzsB,KAC9B,CAEDssB,WACEjrB,GACA,MACA,MAAMsrB,EAAc3sB,KAAKqB,QACzBrB,KAAKqB,QAAUrB,KAAKosB,OAAOQ,uBAAuBvrB,GAC7CwrB,YAAoBF,EAAa3sB,KAAKqB,UACzCrB,KAAKosB,OAAOU,mBAAmBC,OAAO,CACpC/kC,KAAM,yBACN0vB,SAAU1X,KAAKgtB,gBACfC,SAAUjtB,OAGd,SAAAA,KAAKgtB,kBAAL,EAAsBV,WAAWtsB,KAAKqB,QACvC,CAES6rB,gBACkB,MAArBltB,KAAKmtB,iBACR,SAAAntB,KAAKgtB,kBAAL,EAAsBI,eAAeptB,MAExC,CAEDqtB,iBAAiBhkC,GACf2W,KAAKwsB,eAGL,MAAMc,EAA+B,CACnCC,WAAW,GAGO,YAAhBlkC,EAAOrB,KACTslC,EAAczV,WAAY,EACD,UAAhBxuB,EAAOrB,OAChBslC,EAAcE,SAAU,GAG1BxtB,KAAK+sB,OAAOO,EACb,CAEDG,mBAME,OAAOztB,KAAK0tB,aACb,CAEDhB,QACE1sB,KAAKgtB,qBAAkB5rB,EACvBpB,KAAKwsB,eACLxsB,KAAK+sB,OAAO,CAAEQ,WAAW,GAC1B,CAEDxV,OACE4V,EACAtsB,GAgBA,OAdArB,KAAK4tB,cAAgBvsB,EAEjBrB,KAAKgtB,iBACPhtB,KAAKgtB,gBAAgBI,eAAeptB,MAGtCA,KAAKgtB,gBAAkBhtB,KAAKosB,OAAOU,mBAAmBe,MAAM7tB,KAAKosB,OAAQ,IACpEpsB,KAAKqB,QACRssB,UACuB,qBAAdA,EAA4BA,EAAY3tB,KAAKqB,QAAQssB,YAGhE3tB,KAAKgtB,gBAAgBc,YAAY9tB,MAE1BA,KAAKgtB,gBAAgB1jB,SAC7B,CAEOkjB,eACN,MAAM9wB,EAAQsE,KAAKgtB,gBACfhtB,KAAKgtB,gBAAgBtxB,MACrBqyB,cAEEnd,EAKF,IACClV,EACHuc,UAA4B,YAAjBvc,EAAMqD,OACjBivB,UAA4B,YAAjBtyB,EAAMqD,OACjBkvB,QAA0B,UAAjBvyB,EAAMqD,OACfmvB,OAAyB,SAAjBxyB,EAAMqD,OACdgZ,OAAQ/X,KAAK+X,OACb2U,MAAO1sB,KAAK0sB,OAGd1sB,KAAK0tB,cAAgB9c,CAMtB,CAEOmc,OAAO1rB,GACb8sB,IAAcC,OAAM,KAGO,YADzB,GAAIpuB,KAAK4tB,eAAiB5tB,KAAKmtB,eAC7B,GAAI9rB,EAAQwW,UAER,OADF,KAAA7X,KAAK4tB,eAAc/V,YACjB,SAAA7X,KAAK0tB,cAAcjqB,KACnBzD,KAAK0tB,cAAcC,UACnB3tB,KAAK0tB,cAAcW,SAErB,YAAAruB,KAAK4tB,eAAcU,YAAnB,SACEtuB,KAAK0tB,cAAcjqB,KACnB,KACAzD,KAAK0tB,cAAcC,UACnB3tB,KAAK0tB,cAAcW,cAEhB,GAAIhtB,EAAQmsB,QAAS,aAExB,OADF,KAAAxtB,KAAK4tB,eAAcJ,UACjB,SAAAxtB,KAAK0tB,cAAc9kC,MACnBoX,KAAK0tB,cAAcC,UACnB3tB,KAAK0tB,cAAcW,SAErB,YAAAruB,KAAK4tB,eAAcU,YAAnB,cACEltB,EACApB,KAAK0tB,cAAc9kC,MACnBoX,KAAK0tB,cAAcC,UACnB3tB,KAAK0tB,cAAcW,QAEtB,CAIChtB,EAAQksB,WACVvtB,KAAKutB,UAAU9b,SAAQ,IAAkB,IAAjB,SAAE8c,GAAH,EACrBA,EAASvuB,KAAK0tB,cAAda,GAEH,GAEJ,E,+BC3II,SAAS5W,EAAT,O,+DAkBEsV,GAAY,EAAnB,2B,oCAUC,OAED,MAAMrc,EAAS,OAAf,IAAe,CAAf,8G,kDAeG,KAIH,GAAI,EAAJ,yD,wDAQD,CAGD,SAAS4d,IAAQ,C,iZC1HjB,IAAIC,EAAarkB,SAASC,eAAe,eACpCokB,IACHA,EAAarkB,SAASskB,cAAc,OACpCD,EAAWE,aAAa,KAAM,eAC9BvkB,SAASwkB,KAAKC,YAAYJ,IAG5B,MAAMK,UAAervB,IAAMsvB,UAAU9b,cAAA,SAAAnP,WAAA,KACnCkrB,GAAK5kB,SAASskB,cAAc,MAAO,CAEnCO,oBACER,EAAW7vB,MAAMub,QAAU,QAC3BsU,EAAWI,YAAY7uB,KAAKgvB,GAC9B,CAEAE,uBACET,EAAW7vB,MAAMub,QAAU,OAC3BsU,EAAWU,YAAYnvB,KAAKgvB,GAC9B,CAEArvB,SACE,OAAOyvB,IAASC,aAAarvB,KAAKC,MAAM7X,SAAU4X,KAAKgvB,GACzD,EAGaF,Q,yDCzBR,MAAMQ,EAAuB55B,IAClC,MAAOF,EAAkB+5B,GAAuBvzB,oBAAS,GAczD,OAZAC,qBAAU,KACR,GAAIvG,GAAWA,EAAQ2gB,aAAe3gB,EAAQ2gB,YAAYtS,OAAS,EAAG,CACpE,MAAMyrB,EAAyB95B,EAAQ2gB,YAAY9Z,QAChDvJ,GAA6B,gBAApBA,EAAK0mB,aAEXlB,EAAe9iB,EAAQ2gB,YAAY9Z,QAAQvJ,GAAyB,YAAhBA,EAAK3J,SAE3DmmC,EAAuBzrB,OAAS,GAAKyU,EAAazU,OAAS,GAC7DwrB,GAAoB,EAExB,IACC,CAAC75B,IACGF,CAAgB,ECfZi6B,EAAwB/5B,IACnC,MAAOg6B,EAAmBC,GAAwB3zB,oBAAS,GAgB3D,OAdAC,qBAAU,KACR,GAAIvG,GAAWA,EAAQ2gB,aAAe3gB,EAAQ2gB,YAAYtS,OAAS,EAAG,CACpE,MAAM6rB,EAAqBl6B,EAAQ2gB,YAAY9Z,QAC5CvJ,GAA6B,eAApBA,EAAK0mB,aACf3V,OACI8rB,EAAqBn6B,EAAQ2gB,YAAY9Z,QAC5CvJ,GAA6B,wCAApBA,EAAK0mB,aACf3V,OAEE6rB,GAAsBC,GACxBF,GAAqB,EAEzB,IACC,CAACj6B,IACGg6B,CAAiB,E,oICoBnB,SAASI,EAAuB/nC,GAa3B,IAb4B,QACtCwT,EAAO,SACPw0B,EAAQ,sBACRC,EAAqB,kBACrBN,EAAiB,iBACjBO,EAAgB,iBAChBC,EAAgB,SAChBhY,EAAQ,aACR1qB,EAAY,YACZ2iC,EAAW,eACXC,EAAc,eACdC,EAAc,kBACdC,GACOvoC,EACP,MAAMi8B,EAAWiG,cACX1nB,EAAQ9G,aAAaC,GAAUA,EAAMC,KAAK4G,QAC1ChB,EAAS9F,aAAaC,GAAUA,EAAM8G,YAAoB,SAC1DmY,EAAcC,eACb2V,EAAUC,GAAex0B,oBAAS,IAClCy0B,EAAqBC,GAA0B10B,oBAAS,IACxDvE,EAAgBk5B,GAAqB30B,oBAAS,IAC9CvF,EAA2Bm6B,GAAgC50B,oBAAS,GACrE60B,EAAa,8EACbC,EAAmBtO,cACnBuO,EAAmBnO,cACnBkH,EAAekH,aAAaC,QAAQ,wBACpC,UAAEz4B,GAAc+C,EAEhB21B,EAAoBvZ,YAAY,CACpCC,WAAYA,IAAMpgB,YAAUgB,EAAWu3B,EAAS,GAAIxtB,EAAOhB,GAC3DsW,UAAW1uB,IAA0B,IAAvBsa,MAAM,MAAEzY,IAAS7B,EAC7BgoC,IACAJ,IACAK,EAAoBpmC,EAAMgP,KAAKhH,GAASA,EAAKC,SAAQ,EAEvDu6B,QAAUjc,IAAS,IAAD8f,EAAAC,EACoB,kBAApB,QAAZD,EAAA9f,EAAImQ,gBAAQ,IAAA2P,GAAM,QAANC,EAAZD,EAAc5tB,YAAI,IAAA6tB,OAAN,EAAZA,EAAoBC,SACtBZ,GAAkB,GAElBa,IAAM5oC,MAAMK,cAACM,IAAgB,IAAKC,IAASmO,wBAC7C,IAIE85B,EAAsB9Z,YAAY,CACtCC,WAAYA,IAAMpS,YAAYhN,EAAWu3B,EAAS,GAAII,EAAa5tB,EAAOhB,GAC1EsW,UAAWA,KACTsZ,IACAJ,IACAK,EAAoBrB,EAAS,EAE/BvC,QAASA,KACPgE,IAAM5oC,MAAMK,cAACM,IAAgB,IAAKC,IAASqO,mBAAqB,IAI9D65B,EAAqB/Z,YAAY,CACrCC,WAAa+Z,IACX,MAAM,IAAEjsB,EAAG,QAAEC,GAAYgsB,EACzB,OAAOlsB,YAAkBC,EAAKC,EAASpD,EAAOhB,EAAO,EAEvDsW,UAAWA,KACTsZ,IACAL,IACAM,EAAoBrB,EAAS,EAE/BvC,QAASA,KACPgE,IAAM5oC,MACJK,cAACM,IAAgB,IAAKC,IAAS2O,gBAAiB1O,OAAQ,CAAEmoC,SAAU7B,EAAShsB,UAC9E,IAsCCotB,EAAwBA,KAC5BxW,EAAYkX,kBAAkB,CAAC,gBAAiBr5B,IAChDmiB,EAAYkX,kBAAkB,CAAC,qBAAsBr5B,GAAW,EAG5D44B,EAAuBU,IAC3B9N,EAAUvtB,GAA6BqzB,GAAY,aAAA9gC,OAAkBwP,EAAS,WAAW,CACvFkD,MAAO,CACLq2B,mBAAoBD,EACpBE,oBAAqBx5B,IAEvB,EAGJ,OACE1P,eAAA,OAAAV,SAAA,CACG8vB,GAAYuY,GACXxnC,cAACk/B,IAAK,CACJ8J,OAAK,EACLzW,MAAI,EACJ0W,eAAe,EACfC,sBAAsB,EACtBC,QAASA,IAAM1B,EAAuB,MAAMtoC,SAE1CkyB,GAAUrxB,cAACopC,GAA6B,CAAC/X,MAAOA,EAAOjxB,OAAQonC,MAGpEh5B,GACCxO,cAACk/B,IAAK,CACJ8J,OAAK,EACLzW,MAAI,EACJ0W,eAAe,EACfC,sBAAsB,EACtBC,QAASA,IAAMzB,GAAkB,GAAOvoC,SAEtCkyB,GAAUrxB,cAACqpC,GAA0B,CAAChY,MAAOA,MAGlD0V,GACClnC,eAAA,OACEoT,KAAK,SACLnT,UAAU,6CACVme,QAASA,IAAM+oB,IACfsC,UAAWA,OAASnqC,SAAA,CAEpBa,cAACV,IAAQ,CAACQ,UAAU,gBACpBE,cAAA,QAAMF,UAAU,cAAaX,SAC3Ba,cAACM,IAAgB,IAAKC,IAASgM,wBAIrC1M,eAAA,OAAKC,UAAU,KAAIX,SAAA,CAChB8nC,GAAoBjnC,cAACupC,GAAwB,CAACvnC,aAAcilC,IAC7DpnC,eAAA,MAAIC,UAAU,uBAAsBX,SAAA,CAClCa,cAACM,IAAgB,IAAKC,IAASmN,aAC/B1N,cAACwpC,KAAkB,CACjB1pC,UAAU,uCACV8V,OAAO,UACP3C,KAAK,SACL,aAAW,cACXgL,QAASA,IAAMspB,GAAaD,QAG/BA,GACCtnC,cAAA,OAAKF,UAAU,KAAIX,SACjBa,cAACypC,EAAsB,CAACC,cAAenC,MAG3CvnC,cAAA,KAAGF,UAAU,IAAGX,SACda,cAACM,IAAgB,IAAKC,IAAS2N,mBAEjCrO,eAAA,KAAAV,SAAA,CACEa,cAAA,SACEW,GAAG,SACH5B,KAAK,QACL6gB,MAAM,SACN9f,UAAW8nC,EACX7X,QAA4B,WAAnBqX,EACTpiB,SAAUA,IAAMqiB,EAAkB,YAEpCrnC,cAAA,SAAO2pC,QAAQ,SAAQxqC,SACrBa,cAACM,IAAgB,IAAKC,IAAS6N,gBAGnCvO,eAAA,KAAAV,SAAA,CACEa,cAAA,SACEW,GAAG,QACH5B,KAAK,QACL6gB,MAAM,QACN9f,UAAW8nC,EACX7X,QAA4B,UAAnBqX,EACTpiB,SAAUA,IAAMqiB,EAAkB,WAEpCrnC,cAAA,SAAO2pC,QAAQ,QAAOxqC,SACpBa,cAACM,IAAgB,IAAKC,IAAS8N,mBAGjCo4B,GACA5mC,eAAA,KAAAV,SAAA,CACEa,cAAA,SACEW,GAAG,aACH5B,KAAK,QACL6gB,MAAM,aACN9f,UAAW8nC,EACX7X,QAA4B,eAAnBqX,EACTpiB,SAAUA,IAAMqiB,EAAkB,gBAEpCrnC,cAAA,SAAO2pC,QAAQ,aAAYxqC,SACzBa,cAACM,IAAgB,IAAKC,IAAS+N,qBAKvCzO,eAAA,OAAKC,UAAU,KAAIX,SAAA,CACjBa,cAAA,MAAIF,UAAU,uBAAsBX,SAClCa,cAACM,IAAgB,IAAKC,IAASgN,YAEjCvN,cAAA,KAAAb,SACEa,cAACshB,IAAiB,CAChB/T,QAAS25B,EACT3lB,WAAY4lB,EACZ5iC,aAAcA,EACdid,oBAAoB,EACpBG,2BAAyB,EACzBF,eAAa,SAIlBof,GACChhC,eAAA,OAAKC,UAAU,oBAAmBX,SAAA,CAChCa,cAAC4pC,IAAa,CACZC,YAAaA,IAAMlC,GAA8Bn6B,GACjDs8B,SAAUt8B,IAEZxN,cAAA,SAAAb,SACEa,cAACM,IAAgB,IACXC,IAASiN,0BACbhN,OAAQ,CACN+O,UAAWsxB,EAAata,MAAM,KAAK,WAM7CvmB,cAAA,OAAKF,UAAU,SAAS,cAAQX,SAC9Ba,cAAC6uB,IAAM,CACL/uB,UAAU,wBACVme,QAjKa8rB,KACnB,MAAMttB,EACe,UAAnB2qB,EAA0B,YAAArnC,OACVwP,EAAS,gCAAAxP,OAA+B+mC,EAAS,GAAE,iBAAA/mC,OACnDwP,EAAS,wCAAAxP,OAAuC+mC,EAAS,GAAE,KACvEpqB,EAAU,CACdnP,QAAS25B,GAEY,UAAnBE,IACF1qB,EAAQ5G,OAASsxB,GAEnBqB,EAAmB3Z,OAAO,CAAErS,MAAKC,WAAU,EAuJrCuS,SACEA,IACCmY,GACD,CAACoB,EAAoB1yB,OAAQmyB,EAAkBnyB,QAAQ3C,SAAS,WAElE4b,QAAuC,YAA9B0Z,EAAmB3yB,OAAqB3W,SAEjDa,cAACM,IAAgB,IAAKC,IAASyO,iBAGlCigB,GACCjvB,cAACkZ,IAAY,CAACC,MAAM,MAAKha,SACvBa,cAACM,IAAgB,IAAKC,IAASoG,0BAGnC9G,eAAA,OAAKC,UAAU,SAAQX,SAAA,CACrBa,cAAC6uB,IAAM,CACL/uB,UAAU,6BACVme,QA9LY+rB,KAClB,GAAI/a,EACF,OAAO,IAAI7H,SAAQ,CAACC,EAASC,KAC3BmgB,EAAuB,UACvBpgB,GAAS,IAGb4gB,EAAkBnZ,QAAQ,EAwLpBC,QAAsC,YAA7BkZ,EAAkBnyB,OAC3BmZ,SAAU,CAACwZ,EAAmB3yB,OAAQmyB,EAAkBnyB,QAAQ3C,SAAS,WAAWhU,SAEpFa,cAACM,IAAgB,IAAKC,IAASgO,cAEjCvO,cAAC6uB,IAAM,CACL/uB,UAAU,6BACVme,QAhNcgsB,KACpB,GAAIhb,EACF,OAAO,IAAI7H,SAAQ,CAACC,EAASC,KAC3BmgB,EAAuB,UACvBpgB,GAAS,IAGbmhB,EAAoB1Z,QAAQ,EA0MtBC,QAAwC,YAA/ByZ,EAAoB1yB,OAC7BmZ,SAAU,CAACwZ,EAAmB3yB,OAAQmyB,EAAkBnyB,QAAQ3C,SAAS,WAAWhU,SAEpFa,cAACM,IAAgB,IAAKC,IAASoO,yBAGnC3O,cAAA,OAAKF,UAAU,iCAGrB,CAEO,SAASoqC,EAA0BnvB,GAU9B,IAV+B,QACzCzI,EAAO,SACPw0B,EAAQ,iBACRG,EAAgB,SAChBhY,EAAQ,aACR1qB,EAAY,iBACZ4lC,EAAgB,oBAChBC,EAAmB,mBACnBC,EAAkB,sBAClBC,GACOvvB,EACP,MAAMggB,EAAWiG,cACX1nB,EAAQ9G,aAAaC,GAAUA,EAAMC,KAAK4G,QAC1ChB,EAAS9F,aAAaC,GAAUA,EAAM8G,YAAYjB,SAClDoZ,EAAcC,eACb6V,EAAqBC,GAA0B10B,oBAAS,IACxDvF,EAA2Bm6B,GAAgC50B,oBAAS,GACrE80B,EAAmBtO,cACnBuO,EAAmBnO,cACnBkH,EAAekH,aAAaC,QAAQ,wBACpC,UAAEz4B,GAAc+C,EAEhBi4B,EAAyB7b,YAAY,CACzCC,WAAa+Z,GAAa75B,YAAeU,EAAWm5B,EAAUpvB,EAAOhB,GACrEsW,UAAWA,KACTkZ,IACAI,IACAC,GAAqB,EAEvB5D,QAASA,KACPgE,IAAM5oC,MAAMK,cAACM,IAAgB,IAAKC,IAASuO,sBAAwB,IAIjE25B,EAAqB/Z,YAAY,CACrCC,WAAa+Z,GAAa/rB,YAAqBpN,EAAWm5B,EAAUpvB,EAAOhB,GAC3EsW,UAAWA,KACTiZ,IACAK,IACAC,GAAoB,EAAK,EAE3B5D,QAASA,KACPgE,IAAM5oC,MACJK,cAACM,IAAgB,IAAKC,IAAS2O,gBAAiB1O,OAAQ,CAAEmoC,SAAU7B,EAAShsB,UAC9E,IAIC0vB,EAAeA,CAAC7pC,EAAI8pC,IACxBL,EAAoB,IAAKD,EAAkB,CAACxpC,GAAK8pC,IAE7CC,EAAgBA,CAAC/pC,EAAIgqC,IACzBL,EAAsB,IAAKD,EAAoB,CAAC1pC,GAAKgqC,IAEjDC,EAAqBA,CAACjqC,EAAIkqC,KAC9B,MAAMt9B,EAAU88B,EAAmB1pC,GACnC,IAAIoB,EAAQ+kC,EAASxzB,QAAQvJ,GAASA,IAASpJ,IAC3CkqC,IACF9oC,EAAQA,EAAMuR,QAAQvJ,GAASogC,EAAiBpgC,KAAU8gC,KAE5D,IAAInuB,EAAU,CAAC,EACf3a,EAAMymB,SAASze,GAAU2S,EAAQ3S,GAAQwD,IACzC+8B,EAAsB,IAAKD,KAAuB3tB,GAAU,EAGxDouB,EAAsBlmB,OAAOC,KAAKslB,GAAkBrvB,SAAWgsB,EAAShsB,OA6BxEqtB,EAAsB,WAA0B,IAChD4C,EAAc,GADoBlwB,UAAAC,OAAA,QAAA3C,IAAA0C,UAAA,IAAAA,UAAA,KAGpCkwB,EAAc,kBAEhBhQ,EACGvtB,GAA6BqzB,GAAY,aAAA9gC,OAAkBwP,EAAS,WAAAxP,OAAUgrC,GAC/E,CACEt4B,MAAO,CACLq2B,mBAAoBhC,EACpBiC,oBAAqBx5B,IAI7B,EAEM24B,EAAwBA,KAC5BxW,EAAYkX,kBAAkB,CAAC,gBAAiBr5B,IAChDmiB,EAAYkX,kBAAkB,CAAC,qBAAsBr5B,GAAW,EAGlE,OACE1P,eAAA,OAAAV,SAAA,CACG8vB,GAAYuY,GACXxnC,cAACk/B,IAAK,CACJ8J,OAAK,EACLzW,MAAI,EACJ0W,eAAe,EACfC,sBAAsB,EACtBC,QAASA,IAAM1B,EAAuB,MAAMtoC,SAE1CkyB,GAAUrxB,cAACopC,GAA6B,CAAC/X,MAAOA,EAAOjxB,OAAQonC,MAGrE3nC,eAAA,OAAKC,UAAU,KAAIX,SAAA,CAChB8nC,GACCjnC,cAACupC,GAAwB,CAACvnC,aAAcilC,EAAkB1U,MAAM,IAElEvyB,cAAA,MAAIF,UAAU,mBAAkBX,SAC9Ba,cAACM,IAAgB,IAAKC,IAASmN,eAEjC1N,cAAA,KAAGF,UAAU,QAAOX,SAClBa,cAACM,IAAgB,IAAKC,IAAS4N,kBAAmB3N,OAAQ,CAAEwqC,OAAQlE,EAAShsB,YAE9EgsB,EAAShsB,OAAS,GACjB9a,cAAA,OAAKF,UAAU,qDAAoDX,SACjEU,eAAA,OAAKC,UAAU,WAAUX,SAAA,CACvBa,cAAA,OAAKF,UAAU,kBAAiBX,SAC9Ba,cAACM,IAAgB,IAAKC,IAAS4L,cAEjCnM,cAAA,OAAKF,UAAU,aAAYX,SACxB,CAAC,YAAa,eAAe4R,KAAI,CAAC6O,EAAOyU,IACxCx0B,eAAA,OAAKC,UAAU,MAAKX,SAAA,CAClBa,cAAA,SACEjB,KAAK,QACL4B,GAAIif,EACJA,MAAOA,EACP9f,UAAU,kFACViwB,QACEnL,OAAOpkB,OAAO2pC,GAAkBc,OAAOn1B,GAAWA,IAAW8J,KAC7DgF,OAAOpkB,OAAO2pC,GAAkBrvB,SAAWgsB,EAAShsB,OAEtDkK,SAAUA,KACR,IAAIkmB,EAAU,CAAC,EACfpE,EAASte,SAAS7nB,GAAQuqC,EAAU,IAAKA,EAAS,CAACvqC,GAAKif,KACxDwqB,EAAoBc,EAAQ,IAGhClrC,cAAA,SAAO2pC,QAAS/pB,EAAMzgB,SACnBk1B,EACCr0B,cAACM,IAAgB,IAAKC,IAAS8N,aAE/BrO,cAACM,IAAgB,IAAKC,IAAS6N,eApBXimB,YA6BnCyS,EAAS/1B,KAAKpQ,GACbX,cAACmrC,EAAsB,CAErBxqC,GAAIA,EACJ4O,UAAWA,EACXhL,aAAcA,EACd6mC,cAAejB,EAAiBxpC,GAChC6pC,aAAcA,EACdj9B,QAAS88B,EAAmB1pC,GAC5B+pC,cAAeA,EACfE,mBAAoBA,EACpBS,0BAA2BvE,EAAShsB,OAAS,GATxCna,QAaVkgC,GACChhC,eAAA,OAAKC,UAAU,oBAAmBX,SAAA,CAChCa,cAAC4pC,IAAa,CACZC,YAAaA,IAAMlC,GAA8Bn6B,GACjDs8B,SAAUt8B,IAEZxN,cAAA,SAAAb,SACEa,cAACM,IAAgB,IACXC,IAASiN,0BACbhN,OAAQ,CACN+O,UAAWsxB,EAAata,MAAM,KAAK,WAM7CvmB,cAAA,OAAKF,UAAU,SAAS,cAAQX,SAC9Ba,cAAC6uB,IAAM,CACL/uB,UAAU,wBACVme,QA9Ha8rB,KACnB,MAAMrtB,EAAU,CACdpX,eAAgBwhC,EAAS/1B,KAAK/G,IAAM,CAClCA,OAAQA,EACRuD,QAAS88B,EAAmBrgC,GAC5B8L,OAAQq0B,EAAiBngC,QAG7By+B,EAAmB3Z,OAAOpS,EAAQ,EAuH5BuS,SAAUA,IAAa6b,GAAyD,YAAlCP,EAAuBz0B,OACrEiZ,QAAuC,YAA9B0Z,EAAmB3yB,OAAqB3W,SAEjDa,cAACM,IAAgB,IAAKC,IAASumC,EAAShsB,OAAS,EAAI,cAAgB,oBAGxEmU,GACCjvB,cAACkZ,IAAY,CAACC,MAAM,MAAKha,SACvBa,cAACM,IAAgB,IAAKC,IAASoG,0BAGnC3G,cAAA,OAAKF,UAAU,KAAIX,SACjBa,cAAC6uB,IAAM,CACL/uB,UAAU,8BACVme,QA7JiBqtB,KACvB,GAAIrc,EACF,OAAO,IAAI7H,SAAQ,CAACC,EAASC,KAC3BmgB,EAAuB,UACvBpgB,GAAS,IAGb,MAAM3K,EAAU,CACd6uB,WAAYzE,EAAS/1B,KAAK/G,IAAM,CAC9BA,OAAQA,EACRuD,QAAS88B,EAAmBrgC,QAGhCugC,EAAuBzb,OAAOpS,EAAQ,EAiJhCqS,QAA2C,YAAlCwb,EAAuBz0B,OAChCmZ,SAAwC,YAA9BwZ,EAAmB3yB,OAAqB3W,SAElDa,cAACM,IAAgB,IAAKC,IAASsO,qBAGnC7O,cAAA,OAAKF,UAAU,iCAGrB,CAEA,MAAMqrC,EAAyBjwB,IAUxB,IAVyB,GAC9Bva,EAAE,UACF4O,EAAS,cACT67B,EAAa,QACb79B,EAAO,cACPm9B,EAAa,aACbnmC,EAAY,aACZimC,EAAY,mBACZI,EAAkB,0BAClBS,GACDnwB,EACC,MAAM3I,EAAcC,aAAaC,GAAUA,EAAMC,KAAKH,eAC/Ci5B,EAAkBC,GAAuB14B,oBAAS,IAClD24B,EAAYC,GAAiB54B,oBAAS,IAEtC64B,EAAkBC,GAAuB94B,mBAAS,IAYzD,OARAC,qBAAU,KACJw4B,GAAoBH,GACtB/nB,YAAkB,YAADvjB,OAAawP,EAAS,WAAAxP,OAAUY,EAAE,MAAK2Z,MAAMme,GAC5DoT,EAAoB1e,YAAoBsL,EAASrL,YAAa7a,EAAYW,YAE9E,GACC,CAACm4B,EAA2BG,EAAkB7qC,EAAI4O,EAAWgD,EAAYW,WAG1ErT,eAAA,OAAKC,UAAU,gCAA+BX,SAAA,CAC5CU,eAAA,OAAKC,UAAU,WAAUX,SAAA,CACvBU,eAAA,OAAKC,UAAU,kBAAiBX,SAAA,CAAC,IAAEwB,KACnCd,eAAA,OAAKC,UAAU,aAAYX,SAAA,CACzBa,cAAA,SACEjB,KAAK,QACL6gB,MAAM,YACNjf,GAAE,IAAAZ,OAAMY,EAAE,cACVb,UAAU,kFACViwB,QAA2B,cAAlBqb,EACTpmB,SAAUA,IAAMwlB,EAAa7pC,EAAI,eAEnCX,cAAA,SAAO2pC,QAAO,IAAA5pC,OAAMY,EAAE,cAAaxB,SACjCa,cAACM,IAAgB,IAAKC,IAAS6N,aAEjCpO,cAAA,SACEjB,KAAK,QACL6gB,MAAM,cACNjf,GAAE,IAAAZ,OAAMY,EAAE,gBACVb,UAAU,kFACViwB,QAA2B,gBAAlBqb,EACTpmB,SAAUA,IAAMwlB,EAAa7pC,EAAI,iBAEnCX,cAAA,SAAO2pC,QAAO,IAAA5pC,OAAMY,EAAE,gBAAexB,SACnCa,cAACM,IAAgB,IAAKC,IAAS8N,eAEjCrO,cAAC+yB,IAAY,CACXjzB,UAAS,GAAAC,OACPyrC,EAAmB,aAAe,0BAAyB,gCAE7DvtB,QAASA,IAAMwtB,GAAqBD,GACpCrsB,KACE5R,EACEvN,cAAC8rC,IAAW,CAAChsC,UAAU,gBAEvBE,cAAC+rC,IAAQ,CAACjsC,UAAU,gBAEvBX,SAEDa,cAACM,IAAgB,IAAKC,IAASgN,kBAIpCi+B,GACC3rC,eAAAgZ,WAAA,CAAA1Z,SAAA,CACEa,cAAA,OAAKF,UAAU,kBAAiBX,SAC9Ba,cAACshB,IAAiB,CAChB/T,QAASA,EACTgU,WA9DQopB,GAAeD,EAAc/pC,EAAIgqC,GA+DzCpmC,aAAc8mC,EAA4BO,EAAmBrnC,EAC7Did,oBAAkB,EAClBG,2BAAyB,EACzBF,eAAa,MAGhB4pB,GAA6B99B,GAC5BvN,cAAA,OAAKF,UAAU,kCAAiCX,SAC7CusC,EACC7rC,eAAAgZ,WAAA,CAAA1Z,SAAA,CACEa,cAAC+yB,IAAY,CACXjzB,UAAU,0DACVme,QAASA,KACP2sB,EAAmBjqC,GACnBgrC,GAAc,EAAM,EACpBxsC,SAEFa,cAACM,IAAgB,IAAKC,IAASuM,qBAEhCs+B,GACCprC,cAAC+yB,IAAY,CACXjzB,UAAU,0DACVme,QAASA,KACP2sB,EAAmBjqC,EAAIyqC,GACvBO,GAAc,EAAM,EACpBxsC,SAEFa,cAACM,IAAgB,IAAKC,IAAS,gBAADR,OAAiBqrC,QAGnDprC,cAAC+yB,IAAY,CACXjzB,UAAU,kCACVme,QAASA,IAAM0tB,GAAc,GAAOxsC,SAEpCa,cAACM,IAAgB,IAAKC,IAAS8H,cAInCxI,eAACkzB,IAAY,CACXjzB,UAAU,sDACVme,QAASA,IAAM0tB,GAAc,GAAMxsC,SAAA,CAEnCa,cAACgsC,IAAa,CAAClsC,UAAU,oBACzBE,cAACM,IAAgB,IAAKC,IAASsM,wBAOvC,EAIV,SAAS48B,EAAsBpuB,GAA6B,IAA5B,cAAEquB,GAAuBruB,EACvD,OACExb,eAAA,OAAKC,UAAU,qBAAoBX,SAAA,CACjCa,cAAA,MAAIF,UAAU,sBAAqBX,SACjCa,cAACM,IAAgB,IAAKC,IAAS2M,uBAEjClN,cAAA,QACEF,UAAU,0DACVme,QAASA,IAAMyrB,GAAc,GAC7BJ,UAAWA,OAASnqC,SAEpBa,cAAC8xB,IAAS,CAAChyB,UAAU,MAAM,aAAW,wBAExCD,eAAA,OAAKC,UAAU,YAAWX,SAAA,CACxBU,eAAA,KAAAV,SAAA,CACEa,cAACgjC,IAAW,CAACljC,UAAU,iBACvBE,cAACM,IAAgB,IAAKC,IAAS4M,wBAEjCtN,eAAA,KAAAV,SAAA,CACEa,cAACgjC,IAAW,CAACljC,UAAU,iBACvBE,cAACM,IAAgB,IAAKC,IAAS8M,yBAEjCxN,eAAA,KAAAV,SAAA,CACEa,cAACgjC,IAAW,CAACljC,UAAU,iBACvBE,cAACM,IAAgB,IAAKC,IAAS+M,6BAKzC,CAEO,SAAS2+B,EAAYtwB,GAAmD,IAAlD,QAAErJ,EAAO,OAAElS,EAAM,OAAEyB,EAAM,WAAEqqC,GAAoBvwB,EAC1E,MAAMwwB,EAAgBjjB,YACT,YAAX9oB,EAAuBkS,EAAQ85B,eAAiB95B,EAAQ+5B,kBACxD/5B,EAAQ8W,cAGV,OACEvpB,eAAA,OAAKC,UAAU,6BAA4BX,SAAA,CACzCa,cAAA,QAAMF,UAAU,8BAA6BX,SAC3Ca,cAACM,IAAgB,IAAKC,IAASyI,iBAEjChJ,cAACixB,IAAQ,CACP7Y,QAAS+zB,EACTvsB,MACEusB,EAAcp7B,KAAKqD,GAAMA,EAAEwL,QAAOzM,SAAStR,GACvCA,EACAsqC,EAAcrxB,QAAUqxB,EAAc,GAAGvsB,MAE/CsR,QAASlxB,cAACM,IAAgB,IAAKC,IAASyI,eACxClJ,UAAU,mCACVklB,SAAUknB,EACVI,OAAO,MAIf,CAEO,SAASC,EAAa1wB,GAA4C,IAA3C,eAAE2wB,EAAc,aAAEC,GAAsB5wB,EACpE,MAAM6wB,EAAYl6B,aAAaC,GAAUA,EAAM5Q,OAAOujC,UAEtD,OACEplC,cAAA,OAAAb,SACEa,cAACM,IAAgB,IAAKC,IAASsJ,YAAW1K,SACtCqW,GACAxV,cAAA,OAAKF,UAAU,aAAa2V,MAAOD,EAAIrW,SACrCa,cAAC2sC,KAAW,CACV15B,KAAK,SACL,aAAW,eACXgL,QAASA,KACPuuB,GAAe,GACE,OAAjBC,GAAyBC,EAAUE,KAAKC,SAAS,SAQjE,CAEO,SAASzD,GAA6BptB,GAA6B,IAA5B,MAAEqV,EAAK,OAAEjxB,GAAgB4b,EACrE,OACEnc,eAAA,OAAKC,UAAU,8CAA6CX,SAAA,CAC1Da,cAAA,OAAKF,UAAU,gBAAeX,SAC5Ba,cAACN,IAAS,CAACkW,OAAO,OAAOgB,MAAM,WAEjC5W,cAAA,MAAIF,UAAU,8BAA6BX,SACzCa,cAACM,IAAgB,IAAKC,IAASgG,mBAEjC1G,eAAA,OAAKC,UAAU,eAAcX,SAAA,CACf,UAAXiB,GAAsBJ,cAACM,IAAgB,IAAKC,IAASiG,wBAC1C,WAAXpG,GAAuBJ,cAACM,IAAgB,IAAKC,IAASkG,yBAC3C,kBAAXrG,GACCJ,cAACM,IAAgB,IAAKC,IAASmG,kCAGnC1G,cAAC6uB,IAAM,CAAC/uB,UAAU,eAAeme,QAASA,IAAMoT,IAAQlyB,SACtDa,cAACM,IAAgB,IAAKC,IAASqG,iBAIvC,CAEA,SAASyiC,GAA0BhtB,GAAqB,IAApB,MAAEgV,GAAehV,EACnD,OACExc,eAAA,OAAKC,UAAU,8CAA6CX,SAAA,CAC1Da,cAAA,OAAKF,UAAU,mBAAkBX,SAC/Ba,cAACN,IAAS,CAACkW,OAAO,OAAOgB,MAAM,WAEjC5W,cAAA,MAAIF,UAAU,8BAA6BX,SACzCa,cAACM,IAAgB,IAAKC,IAASiO,mBAEjCxO,cAAA,OAAKF,UAAU,eAAcX,SAC3Ba,cAACM,IAAgB,IAAKC,IAASkO,8BAEjCzO,cAAC6uB,IAAM,CAAC/uB,UAAU,eAAeme,QAASA,IAAMoT,IAAQlyB,SACtDa,cAACM,IAAgB,IAAKC,IAASqG,iBAIvC,CAEA,SAAS2iC,GAAwBuD,GAAyC,IAAxC,aAAE9qC,EAAY,KAAEuwB,GAAO,GAAcua,EACrE,MAAOjN,EAAQkN,GAAah6B,mBAASwf,GACrC,OACE1yB,eAAAgZ,WAAA,CAAA1Z,SAAA,CACEU,eAAA,MACEC,UAAU,gCACVmT,KAAK,SACLgL,QAASA,IAAM8uB,GAAWlN,GAC1ByJ,UAAWA,OAASnqC,SAAA,CAEnB0gC,EACC7/B,cAACgtC,IAAe,CAACr3B,MAAO,CAAEC,OAAQ,QAAU9V,UAAU,kBAEtDE,cAACitC,IAAgB,CAACt3B,MAAO,CAAEC,OAAQ,QAAU9V,UAAU,kBAEzDE,cAACM,IAAgB,IAAKC,IAAS8Q,mBAEhCwuB,GACC7/B,cAAA,OACEF,UAAU,mBACV4lB,wBAAyBC,YAAiB3jB,OAKpD,CC90BA,SAASkrC,GAAgBC,EAAUC,GACjC,KAAMD,aAAoBC,GACxB,MAAM,IAAIC,UAAU,oCAExB,CAEA,SAASC,GAAkBl3B,EAAQY,GACjC,IAAK,IAAI5C,EAAI,EAAGA,EAAI4C,EAAM8D,OAAQ1G,IAAK,CACrC,IAAIm5B,EAAav2B,EAAM5C,GACvBm5B,EAAWC,WAAaD,EAAWC,aAAc,EACjDD,EAAWE,cAAe,EACtB,UAAWF,IAAYA,EAAWG,UAAW,GACjD9oB,OAAO+oB,eAAev3B,EAAQm3B,EAAWzoB,IAAKyoB,EAChD,CACF,CAEA,SAASK,GAAaR,EAAaS,EAAYC,GAG7C,OAFID,GAAYP,GAAkBF,EAAYW,UAAWF,GACrDC,GAAaR,GAAkBF,EAAaU,GACzCV,CACT,CAEA,SAASY,GAAgBC,EAAKnpB,EAAKlF,GAYjC,OAXIkF,KAAOmpB,EACTrpB,OAAO+oB,eAAeM,EAAKnpB,EAAK,CAC9BlF,MAAOA,EACP4tB,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZO,EAAInpB,GAAOlF,EAGNquB,CACT,CAEA,SAASC,KAeP,OAdAA,GAAWtpB,OAAOupB,QAAU,SAAU/3B,GACpC,IAAK,IAAIhC,EAAI,EAAGA,EAAIyG,UAAUC,OAAQ1G,IAAK,CACzC,IAAI8pB,EAASrjB,UAAUzG,GAEvB,IAAK,IAAI0Q,KAAOoZ,EACVtZ,OAAOmpB,UAAUK,eAAeC,KAAKnQ,EAAQpZ,KAC/C1O,EAAO0O,GAAOoZ,EAAOpZ,GAG3B,CAEA,OAAO1O,CACT,EAEO83B,GAASI,MAAMv3B,KAAM8D,UAC9B,CAEA,SAAS0zB,GAAQC,EAAQC,GACvB,IAAI5pB,EAAOD,OAAOC,KAAK2pB,GAEvB,GAAI5pB,OAAO8pB,sBAAuB,CAChC,IAAIC,EAAU/pB,OAAO8pB,sBAAsBF,GACvCC,IAAgBE,EAAUA,EAAQr7B,QAAO,SAAUs7B,GACrD,OAAOhqB,OAAOiqB,yBAAyBL,EAAQI,GAAKpB,UACtD,KACA3oB,EAAK4E,KAAK6kB,MAAMzpB,EAAM8pB,EACxB,CAEA,OAAO9pB,CACT,CAEA,SAASiqB,GAAe14B,GACtB,IAAK,IAAIhC,EAAI,EAAGA,EAAIyG,UAAUC,OAAQ1G,IAAK,CACzC,IAAI8pB,EAAyB,MAAhBrjB,UAAUzG,GAAayG,UAAUzG,GAAK,CAAC,EAEhDA,EAAI,EACNm6B,GAAQ3pB,OAAOsZ,IAAS,GAAM1V,SAAQ,SAAU1D,GAC9CkpB,GAAgB53B,EAAQ0O,EAAKoZ,EAAOpZ,GACtC,IACSF,OAAOmqB,0BAChBnqB,OAAOoqB,iBAAiB54B,EAAQwO,OAAOmqB,0BAA0B7Q,IAEjEqQ,GAAQ3pB,OAAOsZ,IAAS1V,SAAQ,SAAU1D,GACxCF,OAAO+oB,eAAev3B,EAAQ0O,EAAKF,OAAOiqB,yBAAyB3Q,EAAQpZ,GAC7E,GAEJ,CAEA,OAAO1O,CACT,CAEA,SAAS64B,GAAUC,EAAUC,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAI9B,UAAU,sDAGtB6B,EAASnB,UAAYnpB,OAAOwqB,OAAOD,GAAcA,EAAWpB,UAAW,CACrE/jB,YAAa,CACXpK,MAAOsvB,EACPxB,UAAU,EACVD,cAAc,KAGd0B,GAAYE,GAAgBH,EAAUC,EAC5C,CAEA,SAASG,GAAgBC,GAIvB,OAHAD,GAAkB1qB,OAAO4qB,eAAiB5qB,OAAO6qB,eAAiB,SAAyBF,GACzF,OAAOA,EAAEG,WAAa9qB,OAAO6qB,eAAeF,EAC9C,EACOD,GAAgBC,EACzB,CAEA,SAASF,GAAgBE,EAAGpX,GAM1B,OALAkX,GAAkBzqB,OAAO4qB,gBAAkB,SAAyBD,EAAGpX,GAErE,OADAoX,EAAEG,UAAYvX,EACPoX,CACT,EAEOF,GAAgBE,EAAGpX,EAC5B,CA8BA,SAASwX,GAAyBzR,EAAQ0R,GACxC,GAAc,MAAV1R,EAAgB,MAAO,CAAC,EAE5B,IAEIpZ,EAAK1Q,EAFLgC,EAlBN,SAAuC8nB,EAAQ0R,GAC7C,GAAc,MAAV1R,EAAgB,MAAO,CAAC,EAC5B,IAEIpZ,EAAK1Q,EAFLgC,EAAS,CAAC,EACVy5B,EAAajrB,OAAOC,KAAKqZ,GAG7B,IAAK9pB,EAAI,EAAGA,EAAIy7B,EAAW/0B,OAAQ1G,IACjC0Q,EAAM+qB,EAAWz7B,GACbw7B,EAASra,QAAQzQ,IAAQ,IAC7B1O,EAAO0O,GAAOoZ,EAAOpZ,IAGvB,OAAO1O,CACT,CAKe05B,CAA8B5R,EAAQ0R,GAInD,GAAIhrB,OAAO8pB,sBAAuB,CAChC,IAAIqB,EAAmBnrB,OAAO8pB,sBAAsBxQ,GAEpD,IAAK9pB,EAAI,EAAGA,EAAI27B,EAAiBj1B,OAAQ1G,IACvC0Q,EAAMirB,EAAiB37B,GACnBw7B,EAASra,QAAQzQ,IAAQ,GACxBF,OAAOmpB,UAAUiC,qBAAqB3B,KAAKnQ,EAAQpZ,KACxD1O,EAAO0O,GAAOoZ,EAAOpZ,GAEzB,CAEA,OAAO1O,CACT,CAEA,SAAS65B,GAAuBC,GAC9B,QAAa,IAATA,EACF,MAAM,IAAIC,eAAe,6DAG3B,OAAOD,CACT,CAUA,SAASE,GAAaC,GACpB,IAAIC,EAlEN,WACE,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EAExC,IAEE,OADA54B,KAAKi2B,UAAU4C,SAAStC,KAAKkC,QAAQC,UAAU14B,KAAM,IAAI,WAAa,MAC/D,CACT,CAAE,MAAO2G,GACP,OAAO,CACT,CACF,CAuDkCmyB,GAEhC,OAAO,WACL,IACIjpB,EAb4BuoB,EAAM7B,EAYlCwC,EAAQvB,GAAgBe,GAG5B,GAAIC,EAA2B,CAC7B,IAAIQ,EAAYxB,GAAgBv4B,MAAMiT,YAEtCrC,EAAS4oB,QAAQC,UAAUK,EAAOh2B,UAAWi2B,EAC/C,MACEnpB,EAASkpB,EAAMvC,MAAMv3B,KAAM8D,WAG7B,OAvBgCq1B,EAuBEn5B,OAvBIs3B,EAuBE1mB,IAtBb,kBAAT0mB,GAAqC,oBAATA,EAIzC4B,GAAuBC,GAHrB7B,CAsBT,CACF,CAEA,SAAS0C,GAAe3e,EAAKhe,GAC3B,OAWF,SAAyBge,GACvB,GAAIhO,MAAMC,QAAQ+N,GAAM,OAAOA,CACjC,CAbS4e,CAAgB5e,IAmBzB,SAA+BA,EAAKhe,GAClC,GAAsB,qBAAX68B,UAA4BA,OAAOC,YAAYtsB,OAAOwN,IAAO,OACxE,IAAI+e,EAAO,GACPC,GAAK,EACLC,GAAK,EACLC,OAAKn5B,EAET,IACE,IAAK,IAAiCo5B,EAA7BC,EAAKpf,EAAI6e,OAAOC,cAAmBE,GAAMG,EAAKC,EAAGC,QAAQC,QAChEP,EAAK1nB,KAAK8nB,EAAG3xB,QAETxL,GAAK+8B,EAAKr2B,SAAW1G,GAH8Cg9B,GAAK,GAKhF,CAAE,MAAO9oB,GACP+oB,GAAK,EACLC,EAAKhpB,CACP,CAAE,QACA,IACO8oB,GAAsB,MAAhBI,EAAW,QAAWA,EAAW,QAC9C,CAAE,QACA,GAAIH,EAAI,MAAMC,CAChB,CACF,CAEA,OAAOH,CACT,CA5CiCQ,CAAsBvf,EAAKhe,IAAMw9B,GAA4Bxf,EAAKhe,IAmEnG,WACE,MAAM,IAAIi5B,UAAU,4IACtB,CArEyGwE,EACzG,CAEA,SAASC,GAAmB1f,GAC1B,OAGF,SAA4BA,GAC1B,GAAIhO,MAAMC,QAAQ+N,GAAM,OAAO2f,GAAkB3f,EACnD,CALS4f,CAAmB5f,IAW5B,SAA0B6f,GACxB,GAAsB,qBAAXhB,QAA0BA,OAAOC,YAAYtsB,OAAOqtB,GAAO,OAAO7tB,MAAM8tB,KAAKD,EAC1F,CAboCE,CAAiB/f,IAAQwf,GAA4Bxf,IA2DzF,WACE,MAAM,IAAIib,UAAU,uIACtB,CA7DiG+E,EACjG,CAyCA,SAASR,GAA4BrC,EAAG8C,GACtC,GAAK9C,EAAL,CACA,GAAiB,kBAANA,EAAgB,OAAOwC,GAAkBxC,EAAG8C,GACvD,IAAIniB,EAAItL,OAAOmpB,UAAU4C,SAAStC,KAAKkB,GAAGh3B,MAAM,GAAI,GAEpD,MADU,WAAN2X,GAAkBqf,EAAEvlB,cAAakG,EAAIqf,EAAEvlB,YAAYtK,MAC7C,QAANwQ,GAAqB,QAANA,EAAoB9L,MAAM8tB,KAAK3C,GACxC,cAANrf,GAAqB,2CAA2CoiB,KAAKpiB,GAAW6hB,GAAkBxC,EAAG8C,QAAzG,CALc,CAMhB,CAEA,SAASN,GAAkB3f,EAAKmgB,IACnB,MAAPA,GAAeA,EAAMngB,EAAItX,UAAQy3B,EAAMngB,EAAItX,QAE/C,IAAK,IAAI1G,EAAI,EAAGo+B,EAAO,IAAIpuB,MAAMmuB,GAAMn+B,EAAIm+B,EAAKn+B,IAAKo+B,EAAKp+B,GAAKge,EAAIhe,GAEnE,OAAOo+B,CACT,CAUA,IAAIC,GAAiB,SAASA,EAAe3zC,GAC3C,IAAI4zC,EAAQ37B,KAER47B,EAAgB7zC,EAAK8zC,SACrBC,OAA8B,IAAlBF,EAA2B,GAAKA,EAC5CG,EAAwBh0C,EAAKi0C,sBAC7BA,OAAkD,IAA1BD,GAA2CA,EACnEE,EAAwBl0C,EAAKm0C,kBAC7BA,OAA8C,IAA1BD,GAA2CA,EAEnE9F,GAAgBn2B,KAAM07B,GAEtBzE,GAAgBj3B,KAAM,gBAAY,GAElCi3B,GAAgBj3B,KAAM,6BAAyB,GAE/Ci3B,GAAgBj3B,KAAM,yBAAqB,GAE3Ci3B,GAAgBj3B,KAAM,kBAAkB,SAAUm8B,GAChD,OAAIR,EAAMS,eAAeD,GAChBR,EAGQA,EAAMU,eAAeF,GAO7BR,EAAMW,QAAQ,CACnBT,SAAUF,EAAME,SAASt/B,QAAO,SAAUggC,GACxC,OAAOA,IAAiBJ,CAC1B,MAPKR,EAAMW,QAAQ,CACnBT,SAAUF,EAAMK,sBAAwB,GAAGhzC,OAAO+xC,GAAmBY,EAAME,UAAW,CAACM,IAAS,CAACA,IASvG,IAEAlF,GAAgBj3B,KAAM,kBAAkB,SAAUm8B,GAChD,IAAIK,EAAab,EAAMU,eAAeF,GAElCM,EAA8C,IAA1Bd,EAAME,SAAS93B,OACvC,OAAO24B,QAAQF,IAAeb,EAAMO,mBAAqBO,EAC3D,IAEAxF,GAAgBj3B,KAAM,kBAAkB,SAAUm8B,GAChD,OAAyC,IAAlCR,EAAME,SAASrd,QAAQ2d,EAChC,IAEAlF,GAAgBj3B,KAAM,sBAAsB,SAAUm8B,EAAMQ,GAC1D,IAAId,EAAsC,OAA3Bc,QAA8D,IAA3BA,EAAoCA,EAAyBhB,EAAMU,eAAeF,GACpI,MAAO,CACLjgC,KAAMy/B,EAAMK,2BAAwB56B,EAAY,SAChD,cAAeu6B,EAAMK,uBAAyBH,OAAWz6B,EACzD,kBAAmBu6B,EAAMiB,YAAYT,GACrCvyC,GAAI+xC,EAAMkB,WAAWV,GACrBW,QAAQjB,QAAWz6B,EAEvB,IAEA61B,GAAgBj3B,KAAM,wBAAwB,WAC5C,MAAO,CACL9D,KAAM,UAEV,IAEA+6B,GAAgBj3B,KAAM,uBAAuB,SAAUm8B,EAAMQ,GAC3D,IAAId,EAAsC,OAA3Bc,QAA8D,IAA3BA,EAAoCA,EAAyBhB,EAAMU,eAAeF,GAEhIjkB,EAAWyjB,EAAMS,eAAeD,GAEpC,MAAO,CACLvyC,GAAI+xC,EAAMiB,YAAYT,GACtB,gBAAiBjkB,EACjB,gBAAiB2jB,EACjB,gBAAiBF,EAAMkB,WAAWV,GAClCjgC,KAAM,SACN6gC,SAAU,EAEd,IAEA9F,GAAgBj3B,KAAM,cAAc,SAAUm8B,GAC5C,MAAO,oBAAoBnzC,OAAOmzC,EACpC,IAEAlF,GAAgBj3B,KAAM,eAAe,SAAUm8B,GAC7C,MAAO,sBAAsBnzC,OAAOmzC,EACtC,IAEAlF,GAAgBj3B,KAAM,WAAW,SAAUg9B,GACzC,OAAO,IAAItB,EAAe3D,GAAe,CACvC8D,SAAUF,EAAME,SAChBG,sBAAuBL,EAAMK,sBAC7BE,kBAAmBP,EAAMO,mBACxBc,GACL,IAEAh9B,KAAK67B,SAAWC,EAChB97B,KAAKg8B,sBAAwBA,EAC7Bh8B,KAAKk8B,kBAAoBA,CAC3B,EAEIe,GAAuBC,wBAAc,MACrCC,GAAwB,SAAUC,GACpClF,GAAUiF,EAAUC,GAEpB,IAAIC,EAAShE,GAAa8D,GAE1B,SAASA,IACP,IAAIxB,EAEJxF,GAAgBn2B,KAAMm9B,GAEtB,IAAK,IAAIG,EAAOx5B,UAAUC,OAAQi5B,EAAO,IAAI3vB,MAAMiwB,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC/EP,EAAKO,GAAQz5B,UAAUy5B,GA0CzB,OArCAtG,GAAgBiC,GAFhByC,EAAQ0B,EAAO/F,KAAKC,MAAM8F,EAAQ,CAACr9B,MAAMhX,OAAOg0C,KAED,QAAS,IAAItB,GAAe,CACzEG,SAAUF,EAAM17B,MAAMu9B,YACtBxB,sBAAuBL,EAAM17B,MAAM+7B,sBACnCE,kBAAmBP,EAAM17B,MAAMi8B,qBAGjCjF,GAAgBiC,GAAuByC,GAAQ,kBAAkB,SAAU5tB,GACzE4tB,EAAM8B,UAAS,SAAU/hC,GACvB,OAAOA,EAAMgiC,eAAe3vB,EAC9B,IAAG,WACG4tB,EAAM17B,MAAMgO,UACd0tB,EAAM17B,MAAMgO,SAAS0tB,EAAMjgC,MAAMmgC,SAErC,GACF,IAEA5E,GAAgBiC,GAAuByC,GAAQ,kBAAkB,SAAU5tB,GACzE,OAAO4tB,EAAMjgC,MAAM0gC,eAAeruB,EACpC,IAEAkpB,GAAgBiC,GAAuByC,GAAQ,kBAAkB,SAAU5tB,GACzE,OAAO4tB,EAAMjgC,MAAM2gC,eAAetuB,EACpC,IAEAkpB,GAAgBiC,GAAuByC,GAAQ,sBAAsB,SAAU5tB,EAAK4uB,GAClF,OAAOhB,EAAMjgC,MAAMiiC,mBAAmB5vB,EAAK4uB,EAC7C,IAEA1F,GAAgBiC,GAAuByC,GAAQ,wBAAwB,WAErE,OAAOA,EAAMjgC,MAAMkiC,sBACrB,IAEA3G,GAAgBiC,GAAuByC,GAAQ,uBAAuB,SAAU5tB,EAAK4uB,GACnF,OAAOhB,EAAMjgC,MAAMmiC,oBAAoB9vB,EAAK4uB,EAC9C,IAEOhB,CACT,CAuBA,OArBA9E,GAAasG,EAAU,CAAC,CACtBpvB,IAAK,SACLlF,MAAO,WACL,IAAIi1B,EAAc99B,KAAKtE,MACnBwgC,EAAoB4B,EAAY5B,kBAChCF,EAAwB8B,EAAY9B,sBACxC,OAAoBtN,wBAAcuO,GAAQE,SAAU,CAClDt0B,MAAO,CACLmzB,sBAAuBA,EACvBE,kBAAmBA,EACnBwB,eAAgB19B,KAAK09B,eACrBtB,eAAgBp8B,KAAKo8B,eACrBC,eAAgBr8B,KAAKq8B,eACrBsB,mBAAoB39B,KAAK29B,mBACzBC,qBAAsB59B,KAAK49B,qBAC3BC,oBAAqB79B,KAAK69B,sBAE3B79B,KAAKC,MAAM7X,UAAY,KAC5B,KAGK+0C,CACT,CA9E4B,CA8E1Bz9B,iBAEFu3B,GAAgBkG,GAAU,eAAgB,CACxCnB,uBAAuB,EACvBE,mBAAmB,IAGrB,IAqDI6B,GArDAC,GAAwB,SAAUC,GACpC/F,GAAU8F,EAAUC,GAEpB,IAAIC,EAAU7E,GAAa2E,GAE3B,SAASA,IACP,IAAIG,EAEJhI,GAAgBn2B,KAAMg+B,GAEtB,IAAK,IAAII,EAAQt6B,UAAUC,OAAQi5B,EAAO,IAAI3vB,MAAM+wB,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IACpFrB,EAAKqB,GAASv6B,UAAUu6B,GAS1B,OAJApH,GAAgBiC,GAFhBiF,EAASD,EAAQ5G,KAAKC,MAAM2G,EAAS,CAACl+B,MAAMhX,OAAOg0C,KAEH,kBAAkB,SAAUlY,GAC1E,OAAOA,EAAYqZ,EAAOl+B,MAAM7X,SAAS08B,GAAa,IACxD,IAEOqZ,CACT,CASA,OAPAtH,GAAamH,EAAU,CAAC,CACtBjwB,IAAK,SACLlF,MAAO,WACL,OAAoB6lB,wBAAcuO,GAAQe,SAAU,KAAMh+B,KAAKs+B,eACjE,KAGKN,CACT,CA/B4B,CA+B1Bt+B,iBAEE6+B,GAAY,SAAmBx2C,GACjC,IAAIy2C,EAAiBz2C,EAAKgB,UACtBA,OAA+B,IAAnBy1C,EAA4B,YAAcA,EACtDxC,EAAwBj0C,EAAKi0C,sBAC7BE,EAAoBn0C,EAAKm0C,kBACzBjuB,EAAWlmB,EAAKkmB,SAChBuvB,EAAcz1C,EAAKy1C,YACnBiB,EAAO7F,GAAyB7wC,EAAM,CAAC,YAAa,wBAAyB,oBAAqB,WAAY,gBAElH,OAAoB2mC,wBAAcyO,GAAU,CAC1CK,YAAaA,EACbxB,sBAAuBA,EACvBE,kBAAmBA,EACnBjuB,SAAUA,GACIygB,wBAAc,MAAOyI,GAAS,CAC5C,2BAA4B,YAC5BpuC,UAAWA,GACV01C,IACL,GAIA,SAAWV,GACTA,EAAuB,UAAI,YAC3BA,EAA2B,cAAI,gBAC/BA,EAAiC,oBAAI,sBACrCA,EAAkC,qBAAI,uBACtCA,EAAgC,mBAAI,oBACrC,CAND,CAMGA,KAAgBA,GAAc,CAAC,IAElC,IAAIW,GAAgBX,GAGhBY,GADU,EAad,IAAIC,GAAU,oCACd,SAASC,GAAkBC,GACzB,MAAe,KAAXA,IAAiBF,GAAQrD,KAAKuD,KAChCnd,QAAQ/4B,MAAM,gDAAiDI,OAAO81C,EAAQ,wCACvE,EAIX,CAEA,IAAIC,GAAyB7B,wBAAc,MAEvC8B,GAAa,SAAkBj3C,GACjC,IAAIK,EAAWL,EAAKK,SAChB+zC,EAAOp0C,EAAKo0C,KACZ8C,EAAmBl3C,EAAKk3C,iBACxBtC,EAAyB50C,EAAK40C,uBAE9Be,EAAiB,WACnBuB,EAAiBvB,eAAevB,EAClC,EAEImC,EAAiB,SAAwBW,GAC3C,IAAIpD,EAAsC,OAA3Bc,QAA8D,IAA3BA,EAAoCA,EAAyBsC,EAAiB5C,eAAeF,GAC3IjkB,EAAW+mB,EAAiB7C,eAAeD,GAC3C+C,EAAkBD,EAAiBtB,mBAAmBxB,EAAMQ,GAC5DwC,EAAoBF,EAAiBrB,qBAAqBzB,GAC1DiD,EAAmBH,EAAiBpB,oBAAoB1B,EAAMQ,GAClE,OAAoBjO,wBAAcqQ,GAAU5B,SAAU,CACpDt0B,MAAO,CACLszB,KAAMA,EACNN,SAAUA,EACV3jB,SAAUA,EACVwlB,eAAgBA,EAChBwB,gBAAiBA,EACjBC,kBAAmBA,EACnBC,iBAAkBA,IAEnBh3C,EACL,EAEA,OAAoBsmC,wBAAcsP,GAAU,KAAMM,EACpD,EAEIe,GAAkB,SAAyBp/B,GAC7C,OAAoByuB,wBAAcsP,GAAU,MAAM,SAAUiB,GAC1D,OAAoBvQ,wBAAcsQ,GAAY7H,GAAS,CAAC,EAAGl3B,EAAO,CAChEg/B,iBAAkBA,IAEtB,GACF,EACIK,GAAa,SAAkBn2C,GACjC,IAAIf,EAAWe,EAAMf,SAEjBk2C,EAAiB,SAAwBxZ,GAC3C,OAAOA,EAAY18B,EAAS08B,GAAa,IAC3C,EAEA,OAAoB4J,wBAAcqQ,GAAUf,SAAU,KAAMM,EAC9D,EAEIiB,GAAgB,SAAuBx3C,GACzC,IAAIy3C,EAAaz3C,EAAKo0C,KAClBQ,EAAyB50C,EAAK40C,uBAC9B6B,EAAiBz2C,EAAKgB,UACtBA,OAA+B,IAAnBy1C,EAA4B,kBAAoBA,EAC5DiB,EAAkB13C,EAAK03C,gBACvBhB,EAAO7F,GAAyB7wC,EAAM,CAAC,OAAQ,yBAA0B,YAAa,oBAItF23C,EADa1F,GADDh+B,mBAhFlB,WACE,IAAImR,EAAUwxB,GAEd,OADAA,IAAoB,EACb,OAAO31C,OAAOmkB,EACvB,CA4E2BwyB,IACkB,GACb,GAE1BxD,EAAsB,OAAfqD,QAAsC,IAAfA,EAAwBA,EAAaE,EAEnEpB,EAAiB,SAAwBsB,GAC3C,IACIz2B,EADWy2B,EAAY/D,UACN4D,EAAkBA,EAAkB12C,EACzD,OAAoB2lC,wBAAc,MAAOyI,GAAS,CAChD,2BAA4B,gBAC5BpuC,UAAWogB,GACVs1B,GACL,EAQA,OANAI,GAAkB1C,EAAKvC,YAEnB6E,EAAK70C,IACPi1C,GAAkBJ,EAAK70C,IAGL8kC,wBAAc2Q,GAAiB,CACjDlD,KAAMA,EACNQ,uBAAwBA,GACVjO,wBAAc4Q,GAAY,KAAMhB,GAClD,EAIA,SAASuB,GAAoB7Q,GAC3B,OAAOA,IAAOA,EAAG8Q,QAAQ,0CAA4C9Q,EAAK6Q,GAAoB7Q,EAAG+Q,eACnG,CACA,SAASC,GAAkBtjC,GACzB,IAAIujC,EAAkBJ,GAAoBnjC,GAC1C,OAAOujC,GAAmB5yB,MAAM8tB,KAAK8E,EAAgBC,iBAAiB,oDACxE,CARAX,GAAcY,YAAczB,GAAca,cAkD1C,IAAIa,GACG,MADHA,GAEK,QAFLA,GAGI,OAHJA,GAIK,IAJLA,GAKgB,WALhBA,GAME,UANFA,GAOI,YAPJA,GAQI,YARJA,GASK,aAGLC,GAAsB,SAA6Bt4C,GACrD,IAAI21C,EAAiB31C,EAAK21C,eACtBc,EAAiBz2C,EAAKgB,UACtBA,OAA+B,IAAnBy1C,EAA4B,oBAAsBA,EAC9DC,EAAO7F,GAAyB7wC,EAAM,CAAC,iBAAkB,cAuD7D,OAJI02C,EAAK70C,IACPi1C,GAAkBJ,EAAK70C,IAGL8kC,wBAAc,MAAOyI,GAAS,CAChDpuC,UAAWA,GACV01C,EAAM,CACPviC,KAAM,SACN6gC,SAAU,EACV71B,QAASw2B,EACTnL,UA3DmB,SAAwB+N,GAC3C,IAAIC,EAAUD,EAAIvyB,IAalB,GAXIwyB,IAAYH,IAAkBG,IAAYH,IAAkBG,IAAYH,KAC1EE,EAAIE,iBACJ9C,KASE4C,EAAIjhC,kBAAkBohC,YACxB,OAAQF,GACN,KAAKH,GAEDE,EAAIE,iBA7EhB,SAA6B9jC,GAC3B,IACIgkC,GADWV,GAAkBtjC,IAAS,IACrB,GAEjBgkC,GACFA,EAAMC,OAEV,CAuEYC,CAAoBN,EAAIjhC,QACxB,MAGJ,KAAK+gC,GAEDE,EAAIE,iBA5EhB,SAA4B9jC,GAC1B,IAAImkC,EAAWb,GAAkBtjC,IAAS,GACtCokC,EAAOD,EAASA,EAAS98B,OAAS,GAElC+8B,GACFA,EAAKH,OAET,CAsEYI,CAAmBT,EAAIjhC,QACvB,MAGJ,KAAK+gC,GACL,KAAKA,GAEDE,EAAIE,iBAhEhB,SAAgC9jC,GAC9B,IAAImkC,EAAWb,GAAkBtjC,IAAS,GACtCskC,EAAeH,EAASriB,QAAQ9hB,GAEpC,IAAsB,IAAlBskC,EAAqB,CACvB,IAAIC,EAAWJ,EAASG,EAAe,GAEnCC,GACFA,EAASN,OAEb,CACF,CAsDYO,CAAuBZ,EAAIjhC,QAC3B,MAGJ,KAAK+gC,GACL,KAAKA,GAEDE,EAAIE,iBApFhB,SAA4B9jC,GAC1B,IAAImkC,EAAWb,GAAkBtjC,IAAS,GACtCskC,EAAeH,EAASriB,QAAQ9hB,GAEpC,IAAsB,IAAlBskC,EAAqB,CACvB,IAAItG,EAAOmG,EAASG,EAAe,GAE/BtG,GACFA,EAAKiG,OAET,CACF,CA0EYQ,CAAmBb,EAAIjhC,QAKjC,EAaE,2BAA4B,wBAEhC,EAEI+hC,GAA6B,SAAoCnhC,GACnE,OAAoByuB,wBAAc4Q,GAAY,MAAM,SAAUM,GAC5D,IAAIlC,EAAiBkC,EAAYlC,eAC7B0B,EAAmBQ,EAAYR,iBACnC,OAAoB1Q,wBAAc2R,GAAqBlJ,GAAS,CAC9DuG,eAAgBA,GACfz9B,EAAOm/B,GACZ,GACF,EAOIiC,GAAoC,SAAUjE,GAChDlF,GAAUmJ,EAAsBjE,GAEhC,IAAIC,EAAShE,GAAagI,GAE1B,SAASA,IACP,IAAI1F,EAEJxF,GAAgBn2B,KAAMqhC,GAEtB,IAAK,IAAI/D,EAAOx5B,UAAUC,OAAQi5B,EAAO,IAAI3vB,MAAMiwB,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IAC/EP,EAAKO,GAAQz5B,UAAUy5B,GAWzB,OANAtG,GAAgBiC,GAFhByC,EAAQ0B,EAAO/F,KAAKC,MAAM8F,EAAQ,CAACr9B,MAAMhX,OAAOg0C,KAED,WAAO,GAEtD/F,GAAgBiC,GAAuByC,GAAQ,UAAU,SAAU/tB,GACjE+tB,EAAM/tB,IAAMA,CACd,IAEO+tB,CACT,CAkCA,OAhCA9E,GAAawK,EAAsB,CAAC,CAClCtzB,IAAK,qBACLlF,MAAO,WACLw4B,EAAqBC,SAASthC,KAAK4N,IACrC,GACC,CACDG,IAAK,oBACLlF,MAAO,WACLw4B,EAAqBC,SAASthC,KAAK4N,IACrC,GACC,CACDG,IAAK,SACLlF,MAAO,WACL,OAAoB6lB,wBAAc,MAAOyI,GAAS,CAChD,2BAA4B,wBAC3Bn3B,KAAKC,MAAO,CACb2N,IAAK5N,KAAKuhC,SAEd,IACE,CAAC,CACHxzB,IAAK,WACLlF,MAAO,SAAkB+E,GACvB,QAAYxM,IAARwM,EACF,MAAM,IAAIiD,MAAM,oBAGlB,GAAgC,IAA1BjD,EAAI4zB,oBAA2B5zB,EAAI6zB,mBAAwF,wBAAnE7zB,EAAI6zB,kBAAkBC,aAAa,4BAC/F,MAAM,IAAI7wB,MArDD,mYAuDb,KAGKwwB,CACT,CA1DwC,CA0DtC3hC,iBAEFu3B,GAAgBoK,GAAsB,eAjEnB,CACjBt4C,UAAW,qBACX,aAAc,IAiEhB,IAAI44C,GAA8B,SAAqC1hC,GACrE,OAAoByuB,wBAAc4Q,GAAY,MAAM,SAAUM,GAC5D,IAAIT,EAAoBS,EAAYT,kBAMpC,OAJIl/B,EAAMrW,IACRi1C,GAAkB5+B,EAAMrW,IAGN8kC,wBAAc2S,GAAsBlK,GAAS,CAAC,EAAGl3B,EAAOk/B,GAC9E,GACF,EAEAwC,GAA4BxB,YAAczB,GAAc2C,qBAExD,IAAIO,GAAqB,SAA4B75C,GACnD,IAAIy2C,EAAiBz2C,EAAKgB,UACtBA,OAA+B,IAAnBy1C,EAA4B,mBAAqBA,EAC7DqD,EAAS95C,EAAK85C,OACdj4C,EAAK7B,EAAK6B,GACV60C,EAAO7F,GAAyB7wC,EAAM,CAAC,YAAa,SAAU,OAE9Du2C,EAAiB,SAAwBn1C,GAC3C,IAAI+1C,EAAkB/1C,EAAM+1C,gBAExBt1C,GACFi1C,GAAkBj1C,GAGpB,IAAIk4C,EAAQ/J,GAAeA,GAAe,CAAC,EAAGmH,GAAkB,CAAC,EAAG,CAClE,kBAAmB2C,EAAS3C,EAAgB,wBAAqB99B,IAGnE,OAAoBstB,wBAAc,MAAOyI,GAAS,CAChD,2BAA4B,qBAC5BpuC,UAAWA,GACV01C,EAAMqD,EAAO,CACd5lC,KAAM2lC,EAAS,cAAWzgC,IAE9B,EAEA,OAAoBstB,wBAAc4Q,GAAY,KAAMhB,EACtD,EC72BO,MAAMyD,GAAiCh6C,IAA2B,IAA1B,MAAEiD,EAAK,UAAEwN,GAAWzQ,EACjE,OACEkB,cAACs1C,GAAS,CAACx1C,UAAU,KAAKizC,uBAAqB,EAACE,mBAAiB,EAAA9zC,SAC9D4C,EACE0rB,MAAK,CAACsrB,EAAIC,IAAOD,EAAG/uC,OAASgvC,EAAGhvC,SAChC+G,KAAKye,GACJ3vB,eAACy2C,GAAa,CAACx2C,UAAU,mBAAkCozC,KAAM1jB,EAAExlB,OAAO7K,SAAA,CACxEa,cAACo4C,GAAoB,CAACt4C,UAAU,gBAAeX,SAC7Ca,cAACo3C,GAAmB,CAACt3C,UAAU,8DAA6DX,SAC1Fa,cAACM,IAAgB,IAAKC,IAAS4O,aAAc3O,OAAQ,CAAE0vB,EAAGV,EAAExlB,cAGhEhK,cAAC24C,GAAkB,CAAC74C,UAAU,0BAAyBX,SACrDa,cAACkvB,IAAW,CAAC3f,UAAWA,EAAWvF,OAAQwlB,EAAExlB,aAPAwlB,EAAExlB,WAW7C,E,8DClBT,MAAMivC,GAAen6C,IAA0C,IAAzC,QAAEwT,EAAO,SAAEw0B,EAAQ,aAAEoS,GAAcp6C,EAC9D,MAAOq6C,EAAYC,GAAiBrmC,mBAA6B,IAApB+zB,EAAShsB,OAAegsB,EAAS,GAAK,MAC7E7Y,GCXoBjkB,EDWDmvC,ECXSE,EDWGH,ECVjBloB,mBAAQ,KAC1B,GAAIqoB,GAAWA,EAAQ3kB,SAAU,CAC/B,MAAM4kB,EAAgBD,EAAQ3kB,SAASphB,QAAQvJ,GAASA,EAAK6e,WAAW5e,SAAWA,IACnF,GAAIsvC,GAAiBA,EAAcx+B,QAAUw+B,EAAc,GAAGhd,SAC5D,OAAOrO,aAAKqrB,EAAc,GAAGhd,SACjC,IACC,CAACtyB,EAAQqvC,KAPaE,IAACvvC,EAAQqvC,EDYlC,MAAMtoB,EAAaC,mBACjB,IACEnL,aAAiB,CACfM,QAAS8H,EACT3H,QAAShU,EAAQgU,QACjBnc,iBAAkBmI,EAAQnI,oBAE9B,CAAC8jB,EAAM3b,EAAQgU,QAAShU,EAAQnI,mBAGlC,OACEtK,eAAAgZ,WAAA,CAAA1Z,SAAA,CACEa,cAAA,MAAIF,UAAU,mBAAkBX,SAC9Ba,cAACM,IAAgB,IAAKC,IAAS+D,eAEjCzE,eAAA,OAAKC,UAAU,MAAKX,SAAA,CAClBa,cAAA,KAAAb,SACEa,cAAC45B,KAAY,CAACtnB,QAASA,EAAQnT,SAC7BU,eAACkzB,IAAY,CAACjzB,UAAU,8CAA6CX,SAAA,CACnEa,cAACM,IAAgB,IAAKC,IAASqP,gBAC/B5P,cAAC65B,IAAgB,CAAC/5B,UAAU,eAIlCD,eAAA,OAAKC,UAAU,0BAAyBX,SAAA,CACrC2nC,EAAShsB,OAAS,GACjB9a,cAACw5C,KAAM,CACLC,gBAAgB,eAChB35C,UAAU,2BACV45C,aAAa,EACbC,eAAiB7pB,GAAWA,EAAOlJ,MACnCgzB,eAAiB9pB,GAAWA,EAAOlQ,MACnCi6B,SAAS,EACTzhC,QAAS0uB,EAAS/1B,KAAKpQ,IAAE,CAAQimB,MAAOjmB,EAAIif,MAAOjf,MACnDwkB,YAAanlB,cAACM,IAAgB,IAAKC,IAASoP,aAC5CmqC,cAAc,EACd90B,SAAWkW,GAAake,EAAcle,EAAStb,SAGnD5f,cAAA,KAAGsW,KAAMya,EAAY3a,OAAO,SAASC,IAAI,sBAAqBlX,SAC5DU,eAACkzB,IAAY,CAACjzB,UAAW,iCAAkCmvB,UAAWkqB,EAAWh6C,SAAA,CAC/Ea,cAACM,IAAgB,IAAKC,IAASsP,oBAC/B7P,cAAC65B,IAAgB,CAAC/5B,UAAU,mBAKpCE,cAAA,MAAIF,UAAU,mBAAkBX,SAC9Ba,cAACM,IAAgB,IAAKC,IAASmP,gBAEjC7P,eAAA,OAAKC,UAAU,uBAAsBX,SAAA,CACnCa,cAACsiC,KAAiB,CAChB/yB,UAAW+C,EAAQ/C,UACnBzP,UAAU,gDAEZE,cAACyiC,KAAsB,CACrBlzB,UAAW+C,EAAQ/C,UACnBzP,UAAU,qDAGb,E,cErEA,MAAMi6C,GAAgBj7C,IAOtB,IAPuB,cAC5Bk7C,EAAa,iBACbC,EAAgB,YAChBC,EAAW,iBACXlT,EAAgB,kBAChBmT,EAAiB,OACjB/5C,GACDtB,EACC,MAAMs7C,EAAkBp4B,iBAAO,MAE/B,OACEhiB,cAACq6C,KAAgB,CACfC,sBAAuBF,EACvBG,eAAe,wBACfz6C,UAAU,MAAKX,SAEfU,eAAA,OACE8kB,IAAKy1B,EACLt6C,UAAU,2GAA0GX,SAAA,CAEpHa,cAAA,QACEiT,KAAK,SACLnT,UAAS,6BAAAC,OACW,eAAlBi6C,GAAkC,iBAEpC/7B,QAASA,IAAMg8B,EAAiB,cAAc96C,SAE9Ca,cAACM,IAAgB,IAAKC,IAASiM,eAEjCxM,cAAA,QACEiT,KAAK,SACLnT,UAAS,6BAAAC,OACW,iBAAlBi6C,GAAoC,iBAEtC/7B,QAASA,IAAMg8B,EAAiB,gBAAgB96C,SAEhDa,cAACM,IAAgB,IAAKC,IAASyB,iBAEjCnC,eAAA,QACEoT,KAAK,SACLnT,UAAS,kDAAAC,OACW,YAAlBi6C,GAA+B,iBAEjC/7B,QAASA,IAAM+oB,IAAmB7nC,SAAA,CAElCa,cAACM,IAAgB,IAAKC,IAASkM,UACP,IAAvBytC,EAAYp/B,QAAgBq/B,EAAoB,GAC/Cn6C,cAAA,QACEF,UAAU,8DACV6V,MAAO,CAAEC,OAAQ,WAAYgB,MAAO,YAAazX,SAEhDg7C,OAIK,eAAX/5C,GACCJ,cAAA,QACEiT,KAAK,SACLnT,UAAS,6BAAAC,OACW,cAAlBi6C,GAAiC,iBAEnC/7B,QAASA,IAAMg8B,EAAiB,aAAa96C,SAE7Ca,cAACM,IAAgB,IAAKC,IAAS0M,kBAIpB,E,0BChEhB,SAASutC,GAAoB17C,GAQhC,IARiC,0BACnC27C,EAAyB,2BACzBC,EAA0B,UAC1BnrC,EAAS,MACT+J,EAAK,SACLwtB,EAAQ,SACR6T,EAAQ,kBACRC,GACD97C,EACC,MAAO+7C,EAAmBC,GAAwB/nC,oBAAS,IACpDiyB,EAAS+V,GAAchoC,oBAAS,GAEjCioC,EAAmBA,KACvBD,GAAW,GACX3yB,YAAmB,YAADroB,OACJwP,EAAS,0BACrBkX,KAAKC,UAAU,CAAEmiB,QAAS/B,IAC1BxtB,GAECgB,MAAK,KACJwgC,GAAqB,GACrBG,aAAaL,EAAkB12B,SAC/BqU,WAAW2iB,EAAa,MACxBP,GAAU,IAEXtyB,OAAM,IAAM0yB,GAAW,IAAM,EAG5BG,EAAcA,KAClBR,GAA2B,GAC3BI,GAAqB,GACrBC,GAAW,EAAM,EAGnB,OACE/6C,cAACk/B,IAAK,CACJ8J,OAAK,EACLzW,KAAMkoB,EACNxR,eAAe,EACfC,sBAAsB,EACtBC,QAAS+R,EAAY/7C,SAEnBkyB,GACAxxB,eAAA,OAAKC,UAAU,2CAA0CX,SAAA,CACvDa,cAAA,MAAIF,UAAU,8BAA6BX,SACzCa,cAACM,IAAgB,IAAKC,IAAS4I,8BAEjCnJ,cAAA,OAAKF,UAAU,eAAcX,SAC3Ba,cAACM,IAAgB,IAAKC,IAAS6I,oCAEhCyxC,GACC76C,cAACnB,KAAK,CAACE,KAAK,UAASI,SACnBa,cAACM,IAAgB,IAAKC,IAAS+I,oBAGlC07B,GACChlC,cAACnB,KAAK,CAACE,KAAK,QAAOI,SACjBa,cAACM,IAAgB,IAAKC,IAASgJ,0BAGnC1J,eAAA,OAAKC,UAAS,oBAAAC,OAAsB86C,GAAqB7V,EAAU,MAAQ,IAAK7lC,SAAA,CAC9Ea,cAAC6uB,IAAM,CAAC5Q,QAASoT,EAAMlyB,SAAC,WACtB07C,GACA76C,cAAC6uB,IAAM,CAAC/uB,UAAU,mBAAmBme,QAAS+8B,EAAiB77C,SAC7Da,cAACM,IAAgB,IAAKC,IAAS8I,sBAQ/C,CAEO,SAAS8xC,GAAcj7C,GAQ1B,IAR2B,yBAC7Bk7C,EAAwB,4BACxBC,EAA2B,UAC3B9rC,EAAS,MACT+J,EAAK,SACLwtB,EAAQ,OACR1mC,EAAM,SACNu6C,GACDz6C,EACC,MAAOo7C,EAAgBC,GAAqBxoC,oBAAS,IAC9CiyB,EAAS+V,GAAchoC,oBAAS,GAEjCioC,EAAmBA,KACvBD,GAAW,GACX,MAAMt+B,EACO,YAAXrc,EAAoB,YAAAL,OACJwP,EAAS,oCAAAxP,OAAmC+mC,EAAS,GAAE,iBAAA/mC,OACvDwP,EAAS,uCAE3B6Y,YAAmB3L,EAAKgK,KAAKC,UAAU,CAAEmiB,QAAS/B,IAAaxtB,GAC5DgB,MAAK,KACJihC,GAAkB,GAClBhjB,WAAW2iB,EAAa,MACxBP,GAAU,IAEXtyB,OAAM,IAAM0yB,GAAW,IAAM,EAG5BG,EAAcA,KAClBG,GAA4B,GAC5BE,GAAkB,GAClBR,GAAW,EAAM,EAGnB,OACE/6C,cAACk/B,IAAK,CACJ8J,OAAK,EACLzW,KAAM6oB,EACNnS,eAAe,EACfC,sBAAsB,EACtBC,QAAS+R,EAAY/7C,SAEnBkyB,GACAxxB,eAAA,OAAKC,UAAU,2CAA0CX,SAAA,CACvDa,cAAA,MAAIF,UAAU,8BAA6BX,SACzCa,cAACM,IAAgB,IAAKC,IAASiJ,wBAEjCxJ,cAAA,OAAKF,UAAU,eAAcX,SAC3Ba,cAACM,IAAgB,IACXC,IAASkJ,0BACbjJ,OAAQ,CAAEg7C,MAAO1U,EAAShsB,YAG7BwgC,GACCt7C,cAACnB,KAAK,CAACE,KAAK,UAASI,SACnBa,cAACM,IAAgB,IAAKC,IAASoJ,aAAcnJ,OAAQ,CAAEg7C,MAAO1U,EAAShsB,YAG1EkqB,GACChlC,cAACnB,KAAK,CAACE,KAAK,QAAOI,SACjBa,cAACM,IAAgB,IAAKC,IAASqJ,gBAAiBpJ,OAAQ,CAAEg7C,MAAO1U,EAAShsB,YAG9Ejb,eAAA,OAAKC,UAAS,oBAAAC,OAAsBu7C,GAAkBtW,EAAU,MAAQ,IAAK7lC,SAAA,CAC3Ea,cAAC6uB,IAAM,CAAC5Q,QAASoT,EAAMlyB,SAAC,WACtBm8C,GACAt7C,cAAC6uB,IAAM,CAAC/uB,UAAU,mBAAmBme,QAAS+8B,EAAiB77C,SAC7Da,cAACM,IAAgB,IAAKC,IAASmJ,WAAYlJ,OAAQ,CAAEg7C,MAAO1U,EAAShsB,mBAQrF,C,eCxHA,MAAM2gC,GAASjlC,IAAMklC,MAAK,IAAM,4DAC1BC,GAAcnlC,IAAMklC,MAAK,IAAM,mCAE/BE,GAAwB,EAEvB,SAASC,GAAa/8C,GAA6D,IAADg9C,EAAA,IAA3D,QAAExpC,EAAO,MAAEvQ,EAAK,YAAEm4C,EAAW,SAAES,EAAQ,OAAEv6C,EAAM,OAAEyB,GAAQ/C,EACrFi9C,YAA0BzpC,GAC1B,MAAMoF,EAAOC,cACPojB,EAAWiG,cACXlkB,EAAW8jB,cACXob,EAA0Bh6B,mBAC1B44B,EAAoB54B,mBACpBzP,EAAcC,aAAaC,GAAUA,EAAMC,KAAKH,cAChD+G,EAAQ9G,aAAaC,GAAUA,EAAMC,KAAK4G,SACzC0gC,EAAeC,GAAoBlnC,mBAAS,eAC5C05B,EAAcwP,GAAmBlpC,mBAASlR,IAC1CqH,EAAasjC,GAAkBz5B,oBAAS,IACxCmpC,EAAaC,GAAkBppC,oBAAS,GACzC+zB,EAAW9V,mBACf,IACEkpB,EACIA,EACGnpC,KAAKhH,GAASA,EAAKC,SACnByjB,MAAK,CAACsrB,EAAIC,IAEFD,EAAKC,IAEhB,IACN,CAACkB,KAEIjrB,GAAUmtB,IAAcrpC,oBAAS,IACjCm0B,GAAaC,IAAkBp0B,mBAAS,KACxCq0B,GAAgBC,IAAqBt0B,sBACrCs3B,GAAoBC,IAAyBv3B,mBAAS,CAAC,IACvDo3B,GAAkBC,IAAuBr3B,mBAAS,CAAC,IACnDspC,GAAmBC,IAAwBvpC,oBAAS,IACpDy0B,GAAqBC,IAA0B10B,oBAAS,IACxD0nC,GAA2B8B,IAAgCxpC,oBAAS,IACpEqoC,GAA0BoB,IAA+BzpC,oBAAS,GAEnEomC,GAAwB,OAAXe,QAAW,IAAXA,OAAW,EAAXA,EAAc,GAC3BtiC,GAAQ,IAAIE,KAAKqhC,GAAWsD,aAClC7kC,GAAM8kC,WAAW9kC,GAAM+kC,aAAexD,GAAWyD,mBAEjD,MAAQpiC,KAAMqiC,IAAe1gC,YAAc7J,EAAQ/C,UAAWu3B,EAAS,KAC/DtsB,KAAMsiC,GAAc9X,QAAS+X,IAAwBnhC,YAC3DtJ,EAAQ/C,WAGJhL,GAAyB,OAAVs4C,SAAU,IAAVA,OAAYzvB,YAC7BD,YAAoB0vB,GAAWzvB,YAAa7a,EAAYW,UACxD,GAEE3G,GAAmB85B,EAAoBwW,IACvCpW,GAAoBD,EAAqBqW,IAEzCG,GAAwB91B,uBAAY,CAAC5U,EAASvQ,IAAUyzB,YAAcljB,EAASvQ,IAAQ,IACvFk7C,GAA2B/1B,uBAAajlB,GAAYmzB,YAAiBnzB,IAAU,IAE/E+kC,GAAmBA,KACvBsV,IAAqB,GACrBrC,EAAiB,UAAU,EAG7BjnC,qBAAU,KACR,MAAMkqC,EAAY,IAAIplC,KAAKqhC,GAAWsD,aACtCS,EAAUR,WAAWQ,EAAUP,aAAexD,GAAWyD,mBACzD,MAAMO,EAAkC,IAAIrlC,KAAKolC,GAAaplC,KAAKC,MAC7DqlC,EACJD,EAA0D,GAAxBvB,GAA6B,IAYjE,OAVAI,EAAwB93B,QAAUqU,YAAW,KAC3CikB,IAA4B,GAC5BD,IAA6B,EAAK,GACjCa,GAEHxC,EAAkB12B,QAAUqU,YAAW,KACrCgkB,IAA6B,GAC7BC,IAA4B,EAAK,GAChCW,GAEI,KACLlC,aAAae,EAAwB93B,SACrC+2B,aAAaL,EAAkB12B,QAAQ,CACxC,GACA,CAACi1B,GAAWyD,kBAAmBzD,GAAWsD,cAE7CzpC,qBAAU,KACR,IAAKnR,GAAU0Q,EAAY8qC,eAAiBt7C,GAAS+kC,EAAU,CAC7D,IAAIwW,EAEFA,EADa,YAAXl9C,EACYkS,EAAQ85B,eAAej5B,SAASZ,EAAY8qC,eACtD,CAAC9qC,EAAY8qC,eACb/qC,EAAQ85B,eAEE95B,EAAQ+5B,kBAAkBl5B,SAASZ,EAAY8qC,eACzD,CAAC9qC,EAAY8qC,eACb/qC,EAAQ+5B,kBAEd,MAAM5vB,EAAMxT,YACVq0C,EAAY,GACZhrC,EACAvQ,EACA+kC,EACA,CAACxU,OAAOG,WAAYH,OAAOI,aAC3B,MAIAqI,EADEte,EACO,KAAD1c,OAAM0c,GAEL,aAAD1c,OAAcu9C,EAAY,IAEtC,IACC,CAACz7C,EAAQyQ,EAASC,EAAY8qC,cAAej9C,EAAQ2B,EAAO+kC,EAAU/L,IAEzE/nB,qBAAU,KAAO,IAADuqC,EACI,QAAlBA,EAAIzgC,EAASrK,aAAK,IAAA8qC,GAAdA,EAAgB1c,aAClBkH,aAAayV,QAAQ,sBAAuB1gC,EAASrK,MAAMouB,cAE3DkH,aAAa0V,WAAW,sBAC1B,GAEC,IAEHzqC,qBAAU,KACR+pC,KACG,CAAC,KAAM,SAAS5pC,SAAStR,IAC1B0mC,IAAM5oC,MAAMK,cAACM,IAAgB,IAAKC,IAASwG,4BAA8B,GAC1E,CAAClF,EAAQk7C,KAoCZ,OACEl9C,eAAAgZ,WAAA,CAAA1Z,SAAA,CACEa,cAAC6lC,EAAM,CAAA1mC,SACLU,eAAA,OAAKC,UAAU,4CAA2CX,SAAA,CACxDa,cAAA,OAAKF,UAAS,qBAAAC,OAAuBmJ,EAAc,OAAS,oBAAqB/J,SAC9E,CAAC,KAAM,SAASgU,SAAStR,GACxB7B,cAACwW,IAAMknC,SAAQ,CACbC,SACE39C,cAAA,OAAKF,UAAS,eAAiBX,SAC7Ba,cAAC2vB,IAAgB,CACfC,sBAAsB,EACtB7wB,KAAK,QACL6+C,KAAM,GACNC,OAAO,MAGZ1+C,SAEW,OAAX0C,EACC7B,cAACy7C,GAAM,CACLW,WAAYA,GACZ7uC,QAAS+E,EAAQnI,iBACjB2zC,QAASxrC,EAAQ0jB,UACjB/zB,QAASg7C,GAAyB3qC,EAAQrQ,SAC1C87C,OAAQf,GAAsB1qC,EAAQ/C,UAAWu3B,KAGnD9mC,cAAC27C,GAAW,CACVS,WAAYA,GACZ7uC,QAAS+E,EAAQnI,iBACjB2zC,QAASxrC,EAAQ0jB,UACjB/zB,QAASg7C,GAAyB3qC,EAAQrQ,SAC1C87C,OAAQf,GAAsB1qC,EAAQ/C,UAAWu3B,GACjDkX,UAAW1rC,EAAQ2rC,eACnB/0C,YAAaA,MAKnBlJ,cAAC2vB,IAAgB,CACfC,sBAAsB,EACtB7wB,KAAK,QACL6+C,KAAM,GACN/tB,MAAO,GACPguB,MAAOpK,aAA4Bt7B,KAAf,OAALpW,QAAK,IAALA,OAAK,EAALA,EAAO2yB,WAAwBv1B,SAE9Ca,cAACu6B,IAAQ,CACPC,WAAYz4B,EACZjC,UAAU,8BACV66B,iBAAiB,EACjBK,aAAa,EACbE,SAAU4L,EACV7L,YAAwB,eAAX76B,EACbs6B,cAAeoiB,SAKtB5zC,EACClJ,cAAA,OAAKF,UAAU,6DAA4DX,SACzEU,eAAC8vB,IAAgB,CACfC,sBAAsB,EACtBguB,KAAM,EACNC,MAAoC,kBAAtBvrC,EAAQ/C,WAA0B+C,EAAQ/C,UAAY,EAAEpQ,SAAA,EAEnD,OAAjBstC,GAA0C,UAAjBA,IACzBzsC,cAACusC,EAAa,CAACC,eAAgBA,EAAgBC,aAAcA,IAE/DzsC,cAACkzB,IAAU,CACThwB,OAAQoP,EAAQpP,OAChBqM,UAAW+C,EAAQ/C,UACnB6D,aAAcd,EAAQqhB,mBAExB9zB,eAAA,OAAKC,UAAU,SAAQX,SAAA,CACrBU,eAAA,MACEC,UAAU,yDACV8zB,KAAMthB,EAAQyf,aAAezf,EAAQyf,YAAYzZ,OAAOnZ,SAAA,CAEvDmT,EAAQyf,aAAezf,EAAQyf,YAAYrS,KAC5C1f,cAAA,QAAMF,UAAU,MAAKX,SAAC,SACrB2nC,EAAS/1B,KAAI,CAAChH,EAAMmmB,IACnBrwB,eAAA,QAAAV,SAAA,CACEa,cAAA,QAAMF,UAAU,cAAaX,SAAA,IAAAY,OAAMgK,KAClC+8B,EAAShsB,OAAS,GAAKoV,IAAM4W,EAAShsB,OAAS,EAC9C9a,cAAA,QAAMF,UAAU,aAAYX,SAAC,SAE7B,KALO+wB,QAUflwB,cAAA,OAAKF,UAAU,KAAK2V,MAAOiC,EAAKwG,cAAc3d,IAASuJ,cAAc3K,SACnEa,cAACoX,IAAU,CAACC,QAASO,GAAOJ,kBAAgB,EAACF,aAAc,WAG/DtX,cAACi5B,KAAY,CAAClc,MAAOzK,EAAQ4rC,eAC7Bl+C,cAAA,OAAKF,UAAU,SAAQX,SACrBa,cAAC+5C,GAAa,CACZC,cAAeA,EACfC,iBAAkBA,EAClBC,YAAaA,EACblT,iBAAkBA,GAClBmT,kBAA6B,OAAV0C,SAAU,IAAVA,IAAuB,QAAbf,EAAVe,GAAYzvB,mBAAW,IAAA0uB,OAAb,EAAVA,EAAyBhhC,OAC5C1a,OAAQA,MAGZP,eAAA,OAAKC,UAAU,MAAKX,SAAA,CACC,eAAlB66C,GACCn6C,eAAAgZ,WAAA,CAAA1Z,SAAA,CACc,YAAXiB,GACCJ,cAAC6mC,EAAuB,CACtBv0B,QAASA,EACTw0B,SAAUA,EACVC,sBAAuBx6B,KAAqB8vC,GAC5C5V,kBAC+B,aAA7Bl0B,EAAY4rC,cAA+B1X,GAE7CliC,aAAcA,GACdyiC,iBAAkBA,GAClBC,iBAAkBiT,GAAeA,EAAY,GAAGkE,oBAChDnvB,SAAUA,GACViY,YAAaA,GACbC,eAAgBA,GAChBC,eAAgBA,GAChBC,kBAAmBA,KAGX,eAAXjnC,GACCJ,cAACkqC,EAA0B,CACzB53B,QAASA,EACTw0B,SAAUA,EACVG,iBAAkBiT,GAAeA,EAAY,GAAGkE,oBAChDnvB,SAAUA,GACV1qB,aAAcA,GACd8lC,mBAAoBA,GACpBC,sBAAuBA,GACvBH,iBAAkBA,GAClBC,oBAAqBA,KAGzBvqC,eAAA,OAAKC,UAAU,MAAKX,SAAA,CAClBa,cAACisC,EAAY,CACX35B,QAASA,EACTlS,OAAQA,EACRyB,OAAQ4qC,EACRP,WAnLL/oB,UAEjB,GADAg5B,GAAe,GACVltB,GAyBH,OAAO,IAAI7H,SAAQ,CAACC,EAASC,KAC3BmgB,GAAuB,iBACvBpgB,GAAS,IA3BE,CACb40B,EAAgB7pB,EAAI,GAAGxS,OACvB,MAAMnD,EAAMxT,YACVmpB,EAAI,GAAGxS,MACPtN,EACAvQ,EACA+kC,EACA,CAACxU,OAAOG,WAAYH,OAAOI,aAC3B,MAEF,GAAIjW,GAEF,GADAse,EAAS,KAADh7B,OAAM0c,IACO,SAAjB2V,EAAI,GAAGxS,MACT,UACQ4Y,MAAM7B,YAAc,UAAW,CAAE0nB,MAAO,cAChD,CAAE,MAAO5/B,GAEP,YADA09B,GAAe,EAEjB,OAGFphB,EAAS,aAADh7B,OAAcqyB,EAAI,GAAGxS,OAEjC,CAMA,IAsJqBqP,IAAYuY,IACXxnC,cAACk/B,IAAK,CACJ8J,OAAK,EACLzW,MAAI,EACJ0W,eAAe,EACfC,sBAAsB,EACtBC,QAASA,IAAM1B,GAAuB,MAAMtoC,SAE1CkyB,GACArxB,cAACopC,GAA6B,CAC5B/X,MAAOA,EACPjxB,OAAQonC,QAKH,OAAX3lC,GAA8B,UAAXA,IACnB7B,cAACk/B,IAAK,CACJ8J,OAAK,EACL9lB,QAAUqP,GACRvyB,cAAA,OAAKF,UAAU,oBAAmBX,SAChCa,cAAC6uB,IAAM,CAAC/uB,UAAU,yBAAwBX,SACxCa,cAACM,IAAgB,IAAKC,IAASwO,eAIrCk6B,eAAe,EACfC,sBAAsB,EACtBoV,OAAQA,KACNvB,IACExU,IAAM5oC,MACJK,cAACM,IAAgB,IAAKC,IAASwG,4BAChC,EACH5H,SAEAkyB,GACArxB,cAAA,OAAKF,UAAU,QAAOX,SACpBa,cAACu6B,IAAQ,CACPC,WAAYz4B,EACZjC,UAAU,8BACV66B,iBAAiB,EACjBK,aAAa,EACbE,SAAU4L,EACV7L,YAAwB,eAAX76B,EACbs6B,cAAeoiB,eASZ,iBAAlB9C,GACCn6C,eAAAgZ,WAAA,CAAA1Z,SAAA,CACEa,cAAC2iC,IAAmB,CAClB3gC,aAAcsQ,EAAQyf,aAAezf,EAAQyf,YAAY/vB,eAE3DhC,cAAC+iC,IAAoB,CAAC7O,KAAM5hB,EAAQnI,sBAGrB,YAAlB6vC,GACCn6C,eAAAgZ,WAAA,CAAA1Z,SAAA,CAC0B,IAAvB+6C,EAAYp/B,QACX9a,cAAA6Y,WAAA,CAAA1Z,SACEa,cAACkvB,IAAW,CAAC3f,UAAW+C,EAAQ/C,UAAWvF,OAAQ88B,EAAS,OAGpD,eAAX1mC,GAA2B85C,EAAYp/B,OAAS,GAC/C9a,cAAC84C,GAA8B,CAC7B/2C,MAAOm4C,EACP3qC,UAAW+C,EAAQ/C,eAKR,cAAlByqC,GACCh6C,cAACi5C,GAAY,CAAC3mC,QAASA,EAASw0B,SAAUA,EAAUoS,aAAcn3C,YAM1ElC,eAAA,OACEC,UAAU,sDACVme,QAASA,IAAMuuB,GAAe,GAAMrtC,SAAA,CAEpCa,cAACM,IAAgB,IAAKC,IAAS2I,YAAW/J,SACtCqW,GACAxV,cAAA,OAAKF,UAAU,KAAK2V,MAAOD,EAAIrW,SAC7Ba,cAAC2sC,KAAW,QAIlB9sC,eAAA,OAAKC,UAAU,KAAIX,SAAA,CACjBU,eAAA,MAAIC,UAAU,eAAcX,SAAA,CAAC,IAAEmT,EAAQ/C,aACvCvP,cAAA,OAAAb,SACG2nC,EAAS/1B,KAAI,CAAChH,EAAMmmB,IACnBlwB,cAAA,QAAcF,UAAU,oBAAmBX,SAAA,IAAAY,OAAMgK,IAAtCmmB,kBAQxBgsB,GACCl8C,cAACk/B,IAAK,CACJ8J,OAAK,EACLzW,MAAI,EACJ0W,eAAe,EACfC,sBAAsB,EACtBC,QAASA,IAAMgT,GAAe,GAAOh9C,SAEnCkyB,GAAUrxB,cAACmiC,KAAsB,CAAC7vB,QAASA,EAAS3S,MAAM,OAAO0xB,MAAOA,MAG9ErxB,cAACw6C,GAAoB,CACnBC,0BAA2BA,GAC3BC,2BAA4B6B,GAC5BhtC,UAAW+C,EAAQ/C,UACnBu3B,SAAUA,EACVxtB,MAAOA,EACPqhC,SAAUA,EACVC,kBAAmBA,IAErB56C,cAACm7C,GAAc,CACbC,yBAA0BA,GAC1BC,4BAA6BmB,GAC7BjtC,UAAW+C,EAAQ/C,UACnBu3B,SAAUA,EACVxtB,MAAOA,EACPlZ,OAAQA,EACRu6C,SAAUA,MAIlB,C,wBCleO,MAAM4D,GAAsBA,KACjC,MAAMjlC,EAAQ9G,aAAaC,GAAUA,EAAMC,KAAK4G,QAC1ChB,EAAS9F,aAAaC,GAAUA,EAAM8G,YAAoB,SAQhE,OAAOC,aAAS,CACdC,SAAU,CAAC,gBACXC,QARuB5a,IAAiB,IAAhB,OAAE6a,GAAQ7a,EAClC,OAAOqb,aAAIb,EAAOhB,GAAQ8B,IAAI,sCAAuC,CACnET,UACA,EAMFqB,OAASR,IAAI,IAAAgkC,EAAA,OAAc,QAAdA,EAAKhkC,EAAKA,YAAI,IAAAgkC,OAAA,EAATA,EAAWz8C,KAAK,EAClC08C,UAAW,EACXhjC,kBAAkB,GAClB,ECPG,SAASijC,KACd,MAAM,GAAE/9C,GAAOg+C,cACf,OAAO3+C,cAAC4+C,GAAU,CAACrvC,UAAW5O,EAAIP,OAAO,WAC3C,CAEO,SAASy+C,KACd,MAAM,GAAEl+C,GAAOg+C,cACf,OAAO3+C,cAAC4+C,GAAU,CAACrvC,UAAW5O,EAAIP,OAAO,cAC3C,CAEO,SAASw+C,GAAU9/C,GAAiC,IAAhC,UAAEyQ,EAAS,OAAEnP,GAAgBtB,EACtD,MAAMi8B,EAAWiG,cACXxH,EAAWC,cACXngB,EAAQ9G,aAAaC,GAAUA,EAAMC,KAAK4G,SAEzCzX,EAAQi9C,GAAaC,wBAAc,SAAUC,gBAE5ClpC,OAAQmpC,EAAmBzkC,KAAM8e,EAAa4lB,QAASvE,GAAa4D,KAmB5E,GAjBAvrC,qBAAU,KACRwmB,EAAS,CAAEz6B,KAAM,iBAAkBogD,WAAW,IACvC,KACL3lB,EAAS,CAAEz6B,KAAM,iBAAkBogD,WAAW,GAAO,IAEtD,CAAC3lB,IAEJxmB,qBAAU,KACHsG,GACHyhB,EAAS,SAAU,CACjBtoB,MAAO,CACLy/B,KAAK,aAADnyC,OAAewP,EAAS,KAAAxP,OAAe,eAAXK,EAA0B,WAAa,MAAK,OAGlF,GACC,CAACA,EAAQ26B,EAAUxrB,EAAW+J,IAEP,YAAtB2lC,EACF,OACEj/C,cAAC2vB,IAAgB,CAACC,sBAAsB,EAAM7wB,KAAK,OAAO6+C,KAAM,EAAG/tB,MAAO,GAAG1wB,SAAC,eAMlF,GAA0B,YAAtB8/C,EAAiC,CAEnC,GAA2B,IAAvB3lB,EAAYxe,OACd,OACEjb,eAAA,OAAKC,UAAU,qBAAoBX,SAAA,CACjCa,cAAA,KAAAb,SACEa,cAACM,IAAgB,IACXC,IAAS6+C,qBACb5+C,OAAQ,CAAE6+C,eAAgB9vC,OAG9BvP,cAAC6uB,IAAM,CACL/uB,UAAU,eACVme,QAASA,IAAM8c,EAAS,aAADh7B,OAAcwP,EAAS,YAAWpQ,SAEzDa,cAACM,IAAgB,IAAKC,IAAS++C,kBAAmB9+C,OAAQ,CAAE8R,QAAS/C,UAO7E,GAAI+pB,EAAYxe,OAAS,GAAKwe,EAAY,GAAG/pB,YAAcqb,OAAOrb,GAAY,CAC5E,MAAMnP,EAAuC,0BAA9Bk5B,EAAY,GAAGI,WAAyC,WAAa,MACpF,OACE15B,cAAA,OAAKF,UAAU,kCAAiCX,SAC9Ca,cAAC0gC,KAAkB,CACjBnxB,UAAW+pB,EAAY,GAAG/pB,UAC1BnP,OAAQA,EACRugC,kBAAmBrH,EAAYxe,UAIvC,CAEA,GAAIwe,EAAYxe,OAAS,GAAKwe,EAAY,GAAG/pB,YAAcqb,OAAOrb,GAChE,OACEvP,cAACu/C,GAAkB,CACjBhwC,UAAWA,EACX+pB,YAAaA,EACbl5B,OAAQA,EACRyB,OAAQA,EACR84C,SAAUA,GAIlB,CACA,OAAO,IACT,CAEO,SAAS4E,GAAkBr/C,GAAwD,IAAvD,UAAEqP,EAAS,YAAE+pB,EAAW,OAAEl5B,EAAM,OAAEyB,EAAM,SAAE84C,GAAUz6C,EACrF,MAAQsa,KAAMlI,EAASwD,OAAQ0pC,GAAkB7kC,YAAuBpL,EAAW,CACjFkM,kBAAkB,KAEZjB,KAAMzY,EAAO+T,OAAQ2pC,GAAgB/jC,YAAcnM,EAAW,CAAEkM,kBAAkB,IAE1F,OACEzb,cAAA,OAAKF,UAAU,WAAUX,SACvBa,cAAC2vB,IAAgB,CACfC,sBAAoB,EACpB7wB,KAAK,QACL6+C,KAAM,GACN/tB,MAAO,GACPguB,MAAyB,YAAlB2B,GAA+C,YAAhBC,EAA0BtgD,SAEhEa,cAAC67C,GAAa,CACZvpC,QAASA,EACTvQ,MAAOA,EACPm4C,YAAa5gB,EACbqhB,SAAUA,EACVv6C,OAAQA,EACRyB,OAAQA,OAKlB,C","file":"static/js/taskAction.cc617f39.chunk.js","sourcesContent":["import { FormattedMessage } from 'react-intl';\n\nimport { BanIcon, CheckIcon, InfoIcon, AlertIcon } from '../svgIcons';\nimport messages from '../../views/messages';\n\nexport const Alert = ({\n  type = 'info',\n  compact = false,\n  inline = false,\n  iconClassName,\n  children,\n}) => {\n  const icons = {\n    info: InfoIcon,\n    success: CheckIcon,\n    warning: AlertIcon,\n    error: BanIcon,\n  };\n  const Icon = icons[type];\n\n  const color = {\n    info: 'b--blue bg-lightest-blue',\n    success: 'b--dark-green bg-washed-green',\n    warning: 'b--gold bg-washed-yellow',\n    error: 'b--dark-red bg-washed-red',\n  };\n  const iconColor = {\n    info: 'blue',\n    success: 'dark-green',\n    warning: 'gold',\n    error: 'dark-red',\n  };\n\n  return (\n    <div\n      className={`${inline ? 'di' : 'db'} blue-dark bl bw2 br2 ${compact ? 'pa2' : 'pa3'} ${\n        color[type]\n      }`}\n    >\n      <Icon className={`h1 w1 v-top mr2 ${iconColor[type]} ${iconClassName || ''}`} />\n      {children}\n    </div>\n  );\n};\n\nexport function EntityError({ entity, action = 'creation' }) {\n  const messageType = action === 'updation' ? 'entityInfoUpdationFailure' : 'entityCreationFailure';\n\n  return (\n    <Alert type=\"error\">\n      <FormattedMessage\n        {...messages[messageType]}\n        values={{\n          entity: entity,\n        }}\n      />\n    </Alert>\n  );\n}\n","import { defineMessages } from 'react-intl';\n\n/**\n * Internationalized messages for use on project cards.\n */\nexport default defineMessages({\n  noProjectTeams: {\n    id: 'project.detail.teams.empty',\n    defaultMessage: \"This project doesn't have any teams associated with.\",\n  },\n  coordination: {\n    id: 'project.detail.coordination',\n    defaultMessage: 'Coordination',\n  },\n  projectCoordination: {\n    id: 'project.detail.coordination.description',\n    defaultMessage: 'This project is coordinated by {organisation} and was created by {user}.',\n  },\n  createdBy: {\n    id: 'project.detail.createdBy',\n    defaultMessage: 'Project created by {user}.',\n  },\n  noProjectContributors: {\n    id: 'project.detail.contributorCount.zero',\n    defaultMessage: 'No contributors yet',\n  },\n  projectTotalContributors: {\n    id: 'project.detail.contributorCount',\n    defaultMessage: '{number, plural, one {<b>#</b> contributor} other {<b>#</b> contributors}}',\n  },\n  projectLastContribution: {\n    id: 'project.detail.lastContribution',\n    defaultMessage: 'Last contribution',\n  },\n  percentMapped: {\n    id: 'project.detail.percentMapped',\n    defaultMessage: 'Mapped',\n  },\n  percentValidated: {\n    id: 'project.detail.percentValidated',\n    defaultMessage: 'Validated',\n  },\n  projectPriorityURGENT: {\n    id: 'project.detail.projectPriorityUrgent',\n    defaultMessage: 'Urgent',\n  },\n  projectPriorityHIGH: {\n    id: 'project.detail.projectPriorityHigh',\n    defaultMessage: 'High',\n  },\n  projectPriorityMEDIUM: {\n    id: 'project.detail.projectPriorityMedium',\n    defaultMessage: 'Medium',\n  },\n  projectPriorityLOW: {\n    id: 'project.detail.projectPriorityLow',\n    defaultMessage: 'Low',\n  },\n  dueDateRelativeRemainingDays: {\n    id: 'project.detail.dueDateLeft',\n    defaultMessage: '{daysLeftHumanize} left',\n  },\n  typesOfMapping: {\n    id: 'project.detail.typesOfMapping',\n    defaultMessage: 'Types of Mapping',\n  },\n  private: {\n    id: 'project.detail.private',\n    defaultMessage: 'Private',\n  },\n  editProject: {\n    id: 'project.detail.editProject',\n    defaultMessage: 'Edit project',\n  },\n  editor: {\n    id: 'project.detail.editor',\n    defaultMessage: 'Editor',\n  },\n  selectEditor: {\n    id: 'project.detail.editor.select',\n    defaultMessage: 'Select editor',\n  },\n  tasks: {\n    id: 'project.detail.tasks',\n    defaultMessage: 'Tasks',\n  },\n  instructions: {\n    id: 'project.detail.instructions',\n    defaultMessage: 'Instructions',\n  },\n  imagery: {\n    id: 'project.detail.imagery',\n    defaultMessage: 'Imagery',\n  },\n  customTMSLayer: {\n    id: 'project.detail.imagery.tms',\n    defaultMessage: 'Custom TMS Layer',\n  },\n  customWMSLayer: {\n    id: 'project.detail.imagery.wms',\n    defaultMessage: 'Custom WMS Layer',\n  },\n  customWMTSLayer: {\n    id: 'project.detail.imagery.wmts',\n    defaultMessage: 'Custom WMTS Layer',\n  },\n  contribute: {\n    id: 'project.selectTask.footer.button.contribute',\n    defaultMessage: 'Contribute',\n  },\n  readMore: {\n    id: 'project.readMoreButton',\n    defaultMessage: 'Read more',\n  },\n  readLess: {\n    id: 'project.readLessButton',\n    defaultMessage: 'Read less',\n  },\n  addToFavorites: {\n    id: 'project.detail.addToFavorites',\n    defaultMessage: 'Add to Favorites',\n  },\n  removeFromFavorites: {\n    id: 'project.detail.removeFromFavorites',\n    defaultMessage: 'Remove from Favorites',\n  },\n  noComments: {\n    id: 'project.detail.questionsAndComments.none',\n    defaultMessage:\n      'There are currently no questions or comments on this project. Be the first to post one!',\n  },\n  loginTocomment: {\n    id: 'project.detail.questionsAndComments.login',\n    defaultMessage: 'Log in to be able to post comments.',\n  },\n  errorLoadingComments: {\n    id: 'project.detail.questionsAndComments.fetching.error',\n    defaultMessage: 'An error occured while loading questions and comments.',\n  },\n  post: {\n    id: 'project.detail.questionsAndComments.button',\n    defaultMessage: 'Post',\n  },\n  share: {\n    id: 'project.detail.share',\n    defaultMessage: 'Share',\n  },\n  team: {\n    id: 'project.detail.team',\n    defaultMessage: 'Team',\n  },\n  validationTeam: {\n    id: 'project.detail.validation_team',\n    defaultMessage: 'Validation team',\n  },\n  teamsAndPermissions: {\n    id: 'project.detail.teams_permissions',\n    defaultMessage: 'Teams & Permissions',\n  },\n  author: {\n    id: 'project.detail.author',\n    defaultMessage: 'Author',\n  },\n  whoCanMap: {\n    id: 'project.detail.mapping_permissions',\n    defaultMessage: 'Who can map?',\n  },\n  whoCanValidate: {\n    id: 'project.detail.validation_permissions',\n    defaultMessage: 'Who can validate?',\n  },\n  zoomToTasks: {\n    id: 'project.detail.zoomToTasks',\n    defaultMessage: 'Zoom to tasks',\n  },\n  selectATaskCardTitle: {\n    id: 'project.detail.cards.selectATask.title',\n    defaultMessage: '1. Select a task',\n  },\n  mapThroughOSMCardTitle: {\n    id: 'project.detail.cards.mapthroughosm.title',\n    defaultMessage: '2. Map with OpenStreetMap',\n  },\n  submitYourWorkCardTitle: {\n    id: 'project.detail.cards.submityourwork.title',\n    defaultMessage: '3. Submit your work',\n  },\n  selectATaskCardDescription: {\n    id: 'project.detail.cards.selectATask.description',\n    defaultMessage:\n      'Projects are divided into sets of smaller tasks and adapted to fit your skill level.',\n  },\n  mapThroughOSMCardDescription: {\n    id: 'project.detail.cards.mapthroughosm.description',\n    defaultMessage:\n      'If you are new to mapping, we recommend checking the Learn page for instructions before you begin.',\n  },\n  submitYourWorkCardDescription: {\n    id: 'project.detail.cards.submityourwork.description',\n    defaultMessage: 'Submitting your work is crucial to make sure your data is saved.',\n  },\n  overview: {\n    id: 'project.detail.sections.overview',\n    defaultMessage: 'Overview',\n  },\n  dueDateTooltip: {\n    id: 'project.detail.sections.overview.dueDate',\n    defaultMessage: 'Ideal date to complete the project',\n  },\n  description: {\n    id: 'project.detail.sections.description',\n    defaultMessage: 'Description',\n  },\n  questionsAndComments: {\n    id: 'project.detail.sections.questionsAndComments',\n    defaultMessage: 'Questions and comments',\n  },\n  contributions: {\n    id: 'project.detail.sections.contributions',\n    defaultMessage: 'Contributions',\n  },\n  contributionsTimeline: {\n    id: 'project.detail.sections.contributionsTimeline',\n    defaultMessage: 'Contributions timeline',\n  },\n  downloadOsmData: {\n    id: 'project.detail.sections.downloadOsmData',\n    defaultMessage: 'Download OSM Data',\n  },\n  errorDownloadOsmData: {\n    id: 'project.detail.sections.errorDownloadOsmData',\n    defaultMessage: 'Data Extraction Unavailable',\n  },\n  errorDownloadOsmDataDescription: {\n    id: 'project.detail.sections.errorDownloadOsmDataDescription',\n    defaultMessage:\n      'The data extract you are attempting to download is currently inactive or unavailable. Please ensure that the extract is active and try again later.',\n  },\n  viewInOsmcha: {\n    id: 'project.detail.sections.contributions.osmcha',\n    defaultMessage: 'Changesets in OSMCha',\n  },\n  changesets: {\n    id: 'project.detail.sections.contributions.changesets',\n    defaultMessage: 'Changesets',\n  },\n  contributors: {\n    id: 'project.detail.sections.contributors',\n    defaultMessage: 'Contributors',\n  },\n  similarProjects: {\n    id: 'project.detail.sections.similarProjects',\n    defaultMessage: 'Similar projects',\n  },\n  contributorsError: {\n    id: 'project.detail.sections.contributors.error',\n    defaultMessage: 'An error occured while loading contributors',\n  },\n  timelineNotAvailable: {\n    id: 'project.detail.sections.contributions.timelineError',\n    defaultMessage: 'A timeline is going to be available after the first task has been mapped.',\n  },\n  status_DRAFT: {\n    id: 'project.status.draft',\n    defaultMessage: 'Draft',\n  },\n  status_ARCHIVED: {\n    id: 'project.status.archived',\n    defaultMessage: 'Archived',\n  },\n  status_PUBLISHED: {\n    id: 'project.status.published',\n    defaultMessage: 'Published',\n  },\n  permissions_ANY: {\n    id: 'project.permissions.any',\n    defaultMessage: 'All users',\n  },\n  permissions_LEVEL: {\n    id: 'project.permissions.level',\n    defaultMessage: 'Users with intermediate or advanced level',\n  },\n  permissions_TEAMS: {\n    id: 'project.permissions.teams',\n    defaultMessage: '{team} members',\n  },\n  permissions_TEAMS_LEVEL: {\n    id: 'project.permissions.teamsAndLevel',\n    defaultMessage: 'Intermediate and advanced {team} members',\n  },\n  downloadProjectAOI: {\n    id: 'projects.data.download.aoi',\n    defaultMessage: 'Download AOI',\n  },\n  downloadTaskGrid: {\n    id: 'projects.data.download.taskGrid',\n    defaultMessage: 'Download Tasks Grid',\n  },\n  moreStats: {\n    id: 'projects.link.stats',\n    defaultMessage: 'More statistics',\n  },\n  mappedTasks: {\n    id: 'projects.stats.mapped',\n    defaultMessage: 'Mapped tasks',\n  },\n  validatedTasks: {\n    id: 'projects.stats.validated',\n    defaultMessage: 'Validated tasks',\n  },\n  shareMessage: {\n    id: 'project.share.twitter',\n    defaultMessage: 'Contribute mapping the project #{id} on {site}',\n  },\n  postOnFacebook: {\n    id: 'project.share.facebook',\n    defaultMessage: 'Post on Facebook',\n  },\n  shareOnLinkedIn: {\n    id: 'project.share.linkedin',\n    defaultMessage: 'Share on LinkedIn',\n  },\n  inaccessibleProjectTitle: {\n    id: 'project.inaccessible.title',\n    defaultMessage: \"You don't have permission to access this project\",\n  },\n  inaccessibleProjectDescription: {\n    id: 'project.inaccessible.description',\n    defaultMessage: 'Please contact the project manager to request access.',\n  },\n  exploreOtherProjects: {\n    id: 'project.inaccessible.exploreOtherProjects',\n    defaultMessage: 'Explore other projects',\n  },\n  noSimilarProjectsFound: {\n    id: 'project.noSimilarProjectsFound',\n    defaultMessage: 'Could not find any similar projects for this project',\n  },\n});\n","import { defineMessages } from 'react-intl';\n\n/**\n * Internationalized messages for use on project cards.\n */\nexport default defineMessages({\n  projectTotalContributors: {\n    id: 'project.card.contributorCount',\n    defaultMessage: '{number} total contributors',\n  },\n  projectLastContribution: {\n    id: 'project.card.lastContribution',\n    defaultMessage: 'Last contribution',\n  },\n  percentMapped: {\n    id: 'project.card.percentMapped',\n    defaultMessage: '{n}% mapped',\n  },\n  percentValidated: {\n    id: 'project.card.percentValidated',\n    defaultMessage: '{n}% validated',\n  },\n  percentBadImagery: {\n    id: 'project.card.percentBadImagery',\n    defaultMessage: '{n}% bad imagery',\n  },\n  projectPriorityURGENT: {\n    id: 'project.card.projectPriorityUrgent',\n    defaultMessage: 'Urgent',\n  },\n  projectPriorityHIGH: {\n    id: 'project.card.projectPriorityHigh',\n    defaultMessage: 'High',\n  },\n  projectPriorityMEDIUM: {\n    id: 'project.card.projectPriorityMedium',\n    defaultMessage: 'Medium',\n  },\n  projectPriorityLOW: {\n    id: 'project.card.projectPriorityLow',\n    defaultMessage: 'Low',\n  },\n  priorityDescriptionURGENT: {\n    id: 'project.card.projectPriorityUrgent.description',\n    defaultMessage: 'Urgent priority',\n  },\n  priorityDescriptionHIGH: {\n    id: 'project.card.projectPriorityHigh.description',\n    defaultMessage: 'High priority',\n  },\n  priorityDescriptionMEDIUM: {\n    id: 'project.card.projectPriorityMedium.description',\n    defaultMessage: 'Medium priority',\n  },\n  priorityDescriptionLOW: {\n    id: 'project.card.projectPriorityLow.description',\n    defaultMessage: 'Low priority',\n  },\n  dueDateRelativeRemainingDays: {\n    id: 'project.card.dueDateLeft',\n    defaultMessage: '{daysLeftHumanize} left',\n  },\n  editProject: {\n    id: 'project.card.edit_project.button',\n    defaultMessage: 'Edit',\n  },\n  projectPage: {\n    id: 'project.card.project_page.button',\n    defaultMessage: 'Project Page',\n  },\n  projectTasks: {\n    id: 'project.card.project_tasks.button',\n    defaultMessage: 'Tasks',\n  },\n  noDueDate: {\n    id: 'project.detail.noDueDate',\n    defaultMessage: 'No due date specified',\n  },\n  dueDateExpired: {\n    id: 'project.detail.dueDateExpired',\n    defaultMessage: 'Due date expired',\n  },\n});\n","import { defineMessages } from 'react-intl';\n\n/**\n * Internationalized messages for use on task selection.\n */\nexport default defineMessages({\n  unsavedChanges: {\n    id: 'project.tasks.unsaved_map_changes.title',\n    defaultMessage: 'You have some unsaved map changes',\n  },\n  unsavedChangesToSplit: {\n    id: 'project.tasks.unsaved_map_changes.split',\n    defaultMessage: 'Save or undo it to be able to split the task',\n  },\n  unsavedChangesToUnlock: {\n    id: 'project.tasks.unsaved_map_changes.unlock',\n    defaultMessage: 'Save or undo it to be able to select another task',\n  },\n  unsavedChangesToReloadEditor: {\n    id: 'project.tasks.unsaved_map_changes.reload_editor',\n    defaultMessage: 'Save or undo it to be able to switch editors',\n  },\n  unsavedChangesTooltip: {\n    id: 'project.tasks.unsaved_map_changes.tooltip',\n    defaultMessage: 'You have unsaved edits. Save or undo them to submit this task.',\n  },\n  closeModal: {\n    id: 'project.tasks.unsaved_map_changes.actions.close_modal',\n    defaultMessage: 'Close',\n  },\n  deselectAndValidate: {\n    id: 'project.tasks.validation.cannot_validate_mapped_tasks.deselect_and_validate',\n    defaultMessage: 'Deselect and validate',\n  },\n  cantValidateMappedTask: {\n    id: 'project.tasks.select.cantValidateMappedTask',\n    defaultMessage: 'This task was mapped by you',\n  },\n  priorityAreasLoadingError: {\n    id: 'project.tasks.selection.map.priorityAreas.loading.error',\n    defaultMessage: 'An error occured while loading the priority areas for the project',\n  },\n  noMappedTasksSelectedError: {\n    id: 'project.tasks.no_mapped_tasks_selected',\n    defaultMessage: 'No mapped tasks selected',\n  },\n  noMappedTasksSelectedErrorDescription: {\n    id: 'project.tasks.no_mapped_tasks_selected.description',\n    defaultMessage:\n      'It was not possible to lock the selected tasks, as none of them are on the mapped status.',\n  },\n  InvalidTaskStateError: {\n    id: 'project.tasks.invalid_task_state_errortitle',\n    defaultMessage: 'Invalid Task State',\n  },\n  InvalidTaskStateErrorDescription: {\n    id: 'project.tasks.invalid_task_state_error.description',\n    defaultMessage: 'Task in invalid state for mapping',\n  },\n  UserNotAllowedError: {\n    id: 'project.tasks.user_not_allowed_error.title',\n    defaultMessage: 'User Not Allowed Error',\n  },\n  UserNotAllowedErrorDescription: {\n    id: 'project.tasks.user_not_allowed_error.description',\n    defaultMessage: 'Mapping not allowed because user not on allowed list',\n  },\n  ProjectNotPublishedError: {\n    id: 'project.tasks.project_not_published_error.title',\n    defaultMessage: 'Project Not Published',\n  },\n  ProjectNotPublishedErrorDescription: {\n    id: 'project.tasks.project_not_published_error.description',\n    defaultMessage: 'Mapping not allowed because project not published',\n  },\n  TaskNotOwnedError: {\n    id: 'project.tasks.task_not_owned_error.title',\n    defaultMessage: 'Task Not Owned',\n  },\n  TaskNotOwnedErrorDescription: {\n    id: 'project.tasks.task_not_owned_error.description',\n    defaultMessage: 'Attempting to unlock a task owned by another user',\n  },\n  NotReadyForValidationError: {\n    id: 'project.tasks.not_ready_for_validation_error.title',\n    defaultMessage: 'Not Ready for Validation',\n  },\n  NotReadyForValidationErrorDescription: {\n    id: 'project.tasks.not_ready_for_validation_error.description',\n    defaultMessage: 'Task is not MAPPED, BADIMAGERY or INVALIDATED',\n  },\n  CannotValidateMappedTaskError: {\n    id: 'project.tasks.cannot_validate_mapped_task_error.title',\n    defaultMessage: 'Cannot Validate Mapped Task',\n  },\n  CannotValidateMappedTaskErrorDescription: {\n    id: 'project.tasks.cannot_validate_mapped_task_error.description',\n    defaultMessage:\n      'Tasks cannot be validated by the same user who marked task as mapped or badimagery',\n  },\n  JOSMError: {\n    id: 'project.tasks.josm_error',\n    defaultMessage: 'Connection with JOSM failed',\n  },\n  JOSMErrorDescription: {\n    id: 'project.tasks.josm_error.description',\n    defaultMessage:\n      'Please verify if JOSM is running on your computer and the remote control is enabled.',\n  },\n  lockError: {\n    id: 'project.tasks.lock_error.generic',\n    defaultMessage: \"It wasn't possible to lock this task for you...\",\n  },\n  lockErrorDescription: {\n    id: 'project.tasks.lock_error.generic.description',\n    defaultMessage:\n      'Some error occurred when trying to lock this task. Check if your user matches the level, role and permissions required by this project.',\n  },\n  lockErrorLicense: {\n    id: 'project.tasks.lock_error.license.title',\n    defaultMessage: 'This project has a required license.',\n  },\n  lockErrorLicenseDescription: {\n    id: 'project.tasks.lock_error.license.description',\n    defaultMessage: 'Please accept this license in order to collaborate in this project. ',\n  },\n  acceptLicense: {\n    id: 'project.tasks.lock_error.license.accept',\n    defaultMessage: 'Accept',\n  },\n  cancel: {\n    id: 'project.tasks.lock_error.cancel',\n    defaultMessage: 'Cancel',\n  },\n  anotherLockedTask: {\n    id: 'project.tasks.lock_error.another_project',\n    defaultMessage: 'We found another mapping task already locked by you',\n  },\n  anotherProjectLockTextSingular: {\n    id: 'project.tasks.lock_error.another_project.description.singular',\n    defaultMessage:\n      'It is on the Project #{project}. You will need to update the status of that task before you can map another task.',\n  },\n  anotherProjectLockTextPlural: {\n    id: 'project.tasks.lock_error.another_project.description.plural',\n    defaultMessage:\n      'It is on the Project #{project}. You will need to update the status of that task before you can map another task.',\n  },\n  currentProjectLockTextSingular: {\n    id: 'project.tasks.lock_error.current_project.description.singular',\n    defaultMessage:\n      'The task #{taskId} was previously locked by you. You will need to update the status of that task before you can map another task.',\n  },\n  currentProjectLockTextPlural: {\n    id: 'project.tasks.lock_error.current_project.description.plural',\n    defaultMessage:\n      'Some tasks were previously locked by you on this project. You will need to update the status of those tasks before you can map another task.',\n  },\n  goToProject: {\n    id: 'project.tasks.lock_error.go_to_project.button',\n    defaultMessage: 'Go to Project #{project}',\n  },\n  workOnTasksSingular: {\n    id: 'project.tasks.lock_error.work_on_tasks.singular.button',\n    defaultMessage: '{mapOrValidate} that task',\n  },\n  workOnTasksPlural: {\n    id: 'project.tasks.lock_error.work_on_tasks.plural.button',\n    defaultMessage: '{mapOrValidate} those tasks',\n  },\n  legend: {\n    id: 'project.tasks.map.legend',\n    defaultMessage: 'Legend',\n  },\n  typesOfMapping: {\n    id: 'project.typesOfMapping',\n    defaultMessage: 'Types of Mapping',\n  },\n  editor: {\n    id: 'project.editor',\n    defaultMessage: 'Editor',\n  },\n  selectEditor: {\n    id: 'project.editor.select',\n    defaultMessage: 'Select editor',\n  },\n  filterPlaceholder: {\n    id: 'project.input.placeholders.filter',\n    defaultMessage: 'Filter tasks by id or username',\n  },\n  reloadEditor: {\n    id: 'project.editor.reload_editor',\n    defaultMessage: 'Reload editor',\n  },\n  openEditor: {\n    id: 'project.editor.open_editor',\n    defaultMessage: 'Open editor',\n  },\n  showSidebar: {\n    id: 'project.sidebar.show',\n    defaultMessage: 'Show sidebar',\n  },\n  sessionAboutToExpireTitle: {\n    id: 'project.sidebar.lockTimeAboutToExpire.title',\n    defaultMessage: 'Extend session for this task',\n  },\n  sessionAboutToExpireDescription: {\n    id: 'project.sidebar.lockTimeAboutToExpire.description',\n    defaultMessage:\n      'Your session of two hours is about to expire. Do you want to extend your time for this session to continue working on this task?',\n  },\n  extendTime: {\n    id: 'project.sidebar.extendTime',\n    defaultMessage: 'Extend session',\n  },\n  sessionExtended: {\n    id: 'project.sidebar.sessionExtended',\n    defaultMessage: 'Your session has been extended',\n  },\n  sessionExtensionError: {\n    id: 'project.sidebar.sessionExtensionError',\n    defaultMessage: 'An error occurred while extending your session.',\n  },\n  sessionExpiredTitle: {\n    id: 'project.sidebar.sessionExpired.title',\n    defaultMessage: 'Your session has expired',\n  },\n  sessionExpiredDescription: {\n    id: 'project.sidebar.sessionExpired.description',\n    defaultMessage:\n      'Do you want to relock the tasks to extend the session so that you can update the status of the {count, plural, =1 {task} other{tasks}}?',\n  },\n  relockTask: {\n    id: 'project.sidebar.relockTask',\n    defaultMessage: 'Relock {count, plural, =1 {task} other{tasks}}',\n  },\n  taskRelocked: {\n    id: 'project.sidebar.taskRelocked',\n    defaultMessage: 'Your {count, plural, =1 {task has} other{tasks have}} been relocked.',\n  },\n  taskRelockError: {\n    id: 'project.sidebar.taskRelockError',\n    defaultMessage:\n      'An error occurred while relocking your {count, plural, =1 {task} other{tasks}}.',\n  },\n  hideSidebar: {\n    id: 'project.sidebar.hide',\n    defaultMessage: 'Hide sidebar',\n  },\n  timeToUnlock: {\n    id: 'project.sidebar.timeToUnlock',\n    defaultMessage: 'Time available for you to complete work on this task',\n  },\n  task: {\n    id: 'project.task',\n    defaultMessage: 'Task',\n  },\n  tasks: {\n    id: 'project.tasks',\n    defaultMessage: 'Tasks',\n  },\n  taskId: {\n    id: 'project.taskId',\n    defaultMessage: 'Task #{id}',\n  },\n  instructions: {\n    id: 'project.instructions',\n    defaultMessage: 'Instructions',\n  },\n  projectIsArchived: {\n    id: 'project.isArchived',\n    defaultMessage:\n      'This project is archived and read-only. You can view the project, but you cannot update tasks.',\n  },\n  enforcedRandomTaskSelection: {\n    id: 'project.enforcedRandomTaskSelection',\n    defaultMessage:\n      \"This project has enforced random task selection for mapping. When you click the 'Map a task' button, a random task will be presented for mapping.\",\n  },\n  changesetComment: {\n    id: 'project.changesetComment',\n    defaultMessage: 'Changeset comment',\n  },\n  contributions: {\n    id: 'project.contributions',\n    defaultMessage: 'contributions',\n  },\n  registered: {\n    id: 'project.contributions.registered',\n    defaultMessage: 'Registered on',\n  },\n  imagery: {\n    id: 'project.imagery',\n    defaultMessage: 'Imagery',\n  },\n  customTMSLayer: {\n    id: 'project.imagery.tms',\n    defaultMessage: 'Custom TMS Layer',\n  },\n  customWMSLayer: {\n    id: 'project.imagery.wms',\n    defaultMessage: 'Custom WMS Layer',\n  },\n  customWMTSLayer: {\n    id: 'project.imagery.wmts',\n    defaultMessage: 'Custom WMTS Layer',\n  },\n  customLayer: {\n    id: 'project.imagery.customLayer',\n    defaultMessage: 'Custom Layer',\n  },\n  noImageryDefined: {\n    id: 'project.imagery.noDefined',\n    defaultMessage: 'Any available source',\n  },\n  copyImageryURL: {\n    id: 'project.imagery.copy',\n    defaultMessage: 'Copy imagery URL',\n  },\n  mapATask: {\n    id: 'project.selectTask.footer.button.mapRandomTask',\n    defaultMessage: 'Map a task',\n  },\n  mapSelectedTask: {\n    id: 'project.selectTask.footer.button.mapSelectedTask',\n    defaultMessage: 'Map selected task',\n  },\n  mapAnotherTask: {\n    id: 'project.selectTask.footer.button.mapAnotherTask',\n    defaultMessage: 'Map another task',\n  },\n  validateATask: {\n    id: 'project.selectTask.footer.button.validateRandomTask',\n    defaultMessage: 'Validate a task',\n  },\n  validateSelectedTask: {\n    id: 'project.selectTask.footer.button.validateSelectedTask',\n    defaultMessage:\n      '{number, plural, one {Validate selected task} other {Validate # selected tasks}}',\n  },\n  validateAnotherTask: {\n    id: 'project.selectTask.footer.button.validateAnotherTask',\n    defaultMessage: 'Validate another task',\n  },\n  selectAnotherProject: {\n    id: 'project.selectTask.footer.button.selectAnotherProject',\n    defaultMessage: 'Select another project',\n  },\n  resumeMapping: {\n    id: 'project.selectTask.footer.button.resumeMapping',\n    defaultMessage: 'Resume mapping',\n  },\n  resumeValidation: {\n    id: 'project.selectTask.footer.button.resumeValidation',\n    defaultMessage: 'Resume validation',\n  },\n  taskLastUpdate: {\n    id: 'project.tasks.list.lastUpdate',\n    defaultMessage: 'Last updated by {user}',\n  },\n  seeTaskHistory: {\n    id: 'project.tasks.list.details',\n    defaultMessage: 'See task history',\n  },\n  zoomToTask: {\n    id: 'project.tasks.list.zoom',\n    defaultMessage: 'Zoom map to task',\n  },\n  copyTaskLink: {\n    id: 'project.tasks.list.copyLink',\n    defaultMessage: 'Copy task link',\n  },\n  taskLinkCopied: {\n    id: 'project.tasks.list.linkCopied',\n    defaultMessage: 'Task link copied to the clipboard',\n  },\n  taskStatus_PRIORITY_AREAS: {\n    id: 'project.tasks.priority_areas',\n    defaultMessage: 'Priority areas',\n  },\n  taskStatus_READY: {\n    id: 'project.tasks.status.ready',\n    defaultMessage: 'Available for mapping',\n  },\n  taskStatus_MAPPED: {\n    id: 'project.tasks.status.mapped',\n    defaultMessage: 'Ready for validation',\n  },\n  taskStatus_LOCKED: {\n    id: 'project.tasks.status.locked',\n    defaultMessage: 'Locked',\n  },\n  taskStatus_LOCKED_FOR_MAPPING: {\n    id: 'project.tasks.status.lockedForMapping',\n    defaultMessage: 'Locked for mapping',\n  },\n  taskStatus_LOCKED_FOR_VALIDATION: {\n    id: 'project.tasks.status.lockedForValidation',\n    defaultMessage: 'Locked for validation',\n  },\n  taskStatus_VALIDATED: {\n    id: 'project.tasks.status.validated',\n    defaultMessage: 'Finished',\n  },\n  taskStatus_INVALIDATED: {\n    id: 'project.tasks.status.invalidated',\n    defaultMessage: 'More mapping needed',\n  },\n  taskStatus_BADIMAGERY: {\n    id: 'project.tasks.status.badImagery',\n    defaultMessage: 'Unavailable',\n  },\n  taskStatus_SPLIT: {\n    id: 'project.tasks.status.split',\n    defaultMessage: 'Split',\n  },\n  sortById: {\n    id: 'project.tasks.sorting.id',\n    defaultMessage: 'Sort by task number',\n  },\n  sortByMostRecentlyUpdate: {\n    id: 'project.tasks.sorting.date',\n    defaultMessage: 'Most recently updated',\n  },\n  sortByLeastRecentlyUpdate: {\n    id: 'project.tasks.sorting.date.reverse',\n    defaultMessage: 'Least recently updated',\n  },\n  filterAll: {\n    id: 'project.tasks.filter.all',\n    defaultMessage: 'All',\n  },\n  filterReadyToValidate: {\n    id: 'project.tasks.filter.readyToValidate',\n    defaultMessage: 'Ready for validation',\n  },\n  filterReadyToMap: {\n    id: 'project.tasks.filter.readyToMap',\n    defaultMessage: 'Available for mapping',\n  },\n  noTasksFound: {\n    id: 'project.tasks.filter.noTasksFound',\n    defaultMessage: 'No tasks were found.',\n  },\n  readTaskComments: {\n    id: 'project.tasks.readComments',\n    defaultMessage: 'Please check the history tab for relevant comments.',\n  },\n  completion: {\n    id: 'project.tasks.action.completion',\n    defaultMessage: 'Completion',\n  },\n  history: {\n    id: 'project.tasks.action.history',\n    defaultMessage: 'History',\n  },\n  taskHistoryComments: {\n    id: 'project.tasks.history.comments',\n    defaultMessage: 'Comments',\n  },\n  taskHistoryActivities: {\n    id: 'project.tasks.history.activities',\n    defaultMessage: 'Activities',\n  },\n  taskHistoryAll: {\n    id: 'project.tasks.history.all',\n    defaultMessage: 'All',\n  },\n  copyComment: {\n    id: 'project.tasks.action.comments.copy',\n    defaultMessage: 'Copy comment',\n  },\n  copyCommentToAll: {\n    id: 'project.tasks.action.comments.copy_to_all',\n    defaultMessage: 'To all tasks',\n  },\n  copyCommentToINVALIDATED: {\n    id: 'project.tasks.action.comments.copy_to_invalidated',\n    defaultMessage: 'To tasks marked as \"No\"',\n  },\n  copyCommentToVALIDATED: {\n    id: 'project.tasks.action.comments.copy_to_validated',\n    defaultMessage: 'To tasks marked as \"Yes\"',\n  },\n  resources: {\n    id: 'project.tasks.action.resources',\n    defaultMessage: 'Resources',\n  },\n  finishMappingTitle: {\n    id: 'project.tasks.action.finish_mapping.title',\n    defaultMessage: 'Once you have finished mapping',\n  },\n  instructionsSelect: {\n    id: 'project.tasks.action.instructions.select_task',\n    defaultMessage: 'Select one of the options below that matches your edit status',\n  },\n  writeComment: {\n    id: 'project.input.placeholder.write_comment',\n    defaultMessage: 'Write a comment',\n  },\n  instructionsComment: {\n    id: 'project.tasks.action.instructions.leave_comment',\n    defaultMessage: 'Leave a comment (optional)',\n  },\n  instructionsSubmit: {\n    id: 'project.tasks.action.instructions.submit_task',\n    defaultMessage: 'Submit your work',\n  },\n  comment: {\n    id: 'project.tasks.action.comment.title',\n    defaultMessage: 'Comment',\n  },\n  redirectToPreviousProject: {\n    id: 'project.tasks.action.redirectToPreviousProject',\n    defaultMessage: 'Redirect to previous project #{projectId}',\n  },\n  commentPlaceholder: {\n    id: 'project.tasks.action.comment.input.placeholder',\n    defaultMessage: 'Write a comment on this task',\n  },\n  editStatus: {\n    id: 'project.tasks.action.selection.title',\n    defaultMessage: 'Task status',\n  },\n  revertVALIDATED: {\n    id: 'project.tasks.action.invalidate',\n    defaultMessage: 'Request revalidation',\n  },\n  confirmRevertVALIDATED: {\n    id: 'project.tasks.action.invalidate.confirmation',\n    defaultMessage: 'Task status will be changed to \"Ready for validation\".',\n  },\n  revertBADIMAGERY: {\n    id: 'project.tasks.action.set_as_ready',\n    defaultMessage: 'Request mapping',\n  },\n  confirmRevertBADIMAGERY: {\n    id: 'project.tasks.action.set_as_ready.confirmation',\n    defaultMessage: 'Task status will be changed to \"Available for mapping\".',\n  },\n  proceed: {\n    id: 'project.tasks.action.proceed.confirmation',\n    defaultMessage: 'Do want to proceed?',\n  },\n  yes: {\n    id: 'project.tasks.action.confirmation.yes',\n    defaultMessage: 'Yes',\n  },\n  no: {\n    id: 'project.tasks.action.confirmation.no',\n    defaultMessage: 'No',\n  },\n  mappedQuestion: {\n    id: 'project.tasks.action.options.mapped_question',\n    defaultMessage: 'Is this task completely mapped?',\n  },\n  validatedQuestion: {\n    id: 'project.tasks.action.options.validated_question',\n    defaultMessage:\n      '{number, plural, one {Is this task well mapped?} other {Are these tasks well mapped?}}',\n  },\n  complete: {\n    id: 'project.tasks.action.options.complete',\n    defaultMessage: 'Yes',\n  },\n  incomplete: {\n    id: 'project.tasks.action.options.incomplete',\n    defaultMessage: 'No',\n  },\n  badImagery: {\n    id: 'project.tasks.action.options.bad_imagery',\n    defaultMessage: 'The imagery is bad',\n  },\n  splitTask: {\n    id: 'project.tasks.action.split_task',\n    defaultMessage: 'Split task',\n  },\n  splitTaskError: {\n    id: 'project.tasks.action.split_task.error',\n    defaultMessage: 'It was not possible to split the task',\n  },\n  splitTaskErrorDescription: {\n    id: 'project.tasks.action.split_task.error.description',\n    defaultMessage: 'This task is already too small and can not be split.',\n  },\n  splitTaskGenericError: {\n    id: 'project.tasks.action.split_task.error.generic',\n    defaultMessage: 'An error occured while splitting the task.',\n  },\n  selectAnotherTask: {\n    id: 'project.tasks.action.select_another_task',\n    defaultMessage: 'Select another task',\n  },\n  stopMappingError: {\n    id: 'project.tasks.action.stop_mapping.error',\n    defaultMessage: 'An error occured while stopping mapping.',\n  },\n  stopValidation: {\n    id: 'project.tasks.action.stop_validation',\n    defaultMessage: 'Stop validation',\n  },\n  stopValidationError: {\n    id: 'project.tasks.action.stop_validation.error',\n    defaultMessage: 'An error occured while stopping validation.',\n  },\n  tasksMap: {\n    id: 'project.tasks.action.tasks_map',\n    defaultMessage: 'Tasks map',\n  },\n  submitTask: {\n    id: 'project.tasks.action.submit_task',\n    defaultMessage: 'Submit task',\n  },\n  submitTasks: {\n    id: 'project.tasks.action.submit_tasks',\n    defaultMessage: 'Submit tasks',\n  },\n  submitTaskError: {\n    id: 'project.tasks.action.submit_task.error',\n    defaultMessage:\n      'An error occured while submitting your {numTasks, plural, =1 {task} other {tasks}}.',\n  },\n  taskActivity: {\n    id: 'project.tasks.history.title',\n    defaultMessage: 'Task {n}',\n  },\n  taskUnavailable: {\n    id: 'project.tasks.history.unavailable',\n    defaultMessage: 'Task unavailable',\n  },\n  taskSplitDescription: {\n    id: 'project.tasks.history.split.description',\n    defaultMessage: 'The task {id} was split and its history is not available anymore',\n  },\n  taskData: {\n    id: 'project.tasks.activity.data.links',\n    defaultMessage: 'Task data',\n  },\n  projectId: {\n    id: 'project.tasks.activity.project_id',\n    defaultMessage: 'Project #{id}',\n  },\n  overpassDownload: {\n    id: 'project.tasks.activity.overpass.download',\n    defaultMessage: 'Download from Overpass',\n  },\n  overpassVisualization: {\n    id: 'project.tasks.activity.overpass.visualization',\n    defaultMessage: 'Visualize with Overpass',\n  },\n  projectData: {\n    id: 'project.resources.data',\n    defaultMessage: \"Project's data\",\n  },\n  changesets: {\n    id: 'project.resources.changesets',\n    defaultMessage: 'Changesets',\n  },\n  selectTask: {\n    id: 'project.resources.changesets.select_task',\n    defaultMessage: 'Select task',\n  },\n  entireProject: {\n    id: 'project.resources.changesets.entire_project',\n    defaultMessage: 'Entire project',\n  },\n  seeTaskChangesets: {\n    id: 'project.resources.changesets.task',\n    defaultMessage: \"See task's changesets\",\n  },\n  taskOnOSMCha: {\n    id: 'project.tasks.activity.osmcha',\n    defaultMessage: 'View changesets in OSMCha',\n  },\n  taskHistoryComment: {\n    id: 'project.tasks.history.comment',\n    defaultMessage: 'commented',\n  },\n  taskDetailFetchError: {\n    id: 'project.tasks.history.taskDetailFetchError',\n    defaultMessage: 'An error occured while fetching the task details.',\n  },\n  noCommentsYet: {\n    id: 'project.tasks.history.noCommentsYet',\n    defaultMessage: 'No comments have been made on the task yet.',\n  },\n  noActivitiesToDisplay: {\n    id: 'project.tasks.history.nothingToDisplay',\n    defaultMessage: 'No comments/activities have been made on this task yet.',\n  },\n  taskHistoryLockedMapping: {\n    id: 'project.tasks.history.lockedmapping',\n    defaultMessage: 'locked for mapping',\n  },\n  taskHistoryLockedValidation: {\n    id: 'project.tasks.history.lockedvalidation',\n    defaultMessage: 'locked for validation',\n  },\n  taskHistoryAutoUnlockedMapping: {\n    id: 'project.tasks.history.autounlockedmapping',\n    defaultMessage: 'automatically unlocked for mapping',\n  },\n  taskHistoryAutoUnlockedValidation: {\n    id: 'project.tasks.history.autounlockedvalidation',\n    defaultMessage: 'automatically unlocked for validation',\n  },\n  taskHistoryExtendedForMapping: {\n    id: 'project.tasks.history.extendedForMapping',\n    defaultMessage: 'extended the lock session for mapping',\n  },\n  taskHistoryExtendedForValidation: {\n    id: 'project.tasks.history.extendedForValidation',\n    defaultMessage: 'extended the lock session for validation',\n  },\n  taskHistoryBadImagery: {\n    id: 'project.tasks.history.badimagery',\n    defaultMessage: 'marked as unavailable',\n  },\n  taskHistoryMapped: {\n    id: 'project.tasks.history.mapped',\n    defaultMessage: 'marked as mapped',\n  },\n  taskHistoryValidated: {\n    id: 'project.tasks.history.validated',\n    defaultMessage: 'marked as validated',\n  },\n  taskHistoryInvalidated: {\n    id: 'project.tasks.history.invalidated',\n    defaultMessage: 'marked as more mapping needed',\n  },\n  taskHistorySplit: {\n    id: 'project.tasks.history.split',\n    defaultMessage: 'split a task',\n  },\n  taskHistoryReady: {\n    id: 'project.tasks.history.ready',\n    defaultMessage: 'marked as ready for mapping',\n  },\n  map: {\n    id: 'project.tasks.action.map',\n    defaultMessage: 'Map',\n  },\n  mapped: {\n    id: 'project.tasks.action.mapped',\n    defaultMessage: 'Mapped',\n  },\n  validate: {\n    id: 'project.tasks.action.validate',\n    defaultMessage: 'Validate',\n  },\n  validated: {\n    id: 'project.tasks.action.validated',\n    defaultMessage: 'Validated',\n  },\n  total: {\n    id: 'project.tasks.number.total',\n    defaultMessage: 'Total',\n  },\n  lockedBy: {\n    id: 'project.tasks.locked_by_user',\n    defaultMessage: '{lockStatus} by {user}',\n  },\n  taskExtraInfo: {\n    id: 'project.tasks.extra_information.title',\n    defaultMessage: 'Specific task information',\n  },\n  userFilterDefaultLabel: {\n    id: 'project.users.all',\n    defaultMessage: 'All users',\n  },\n  mappingLevelALL: {\n    id: 'project.level.all',\n    defaultMessage: 'All levels',\n  },\n  mappingLevelADVANCED: {\n    id: 'project.level.advanced',\n    defaultMessage: 'Advanced',\n  },\n  mappingLevelINTERMEDIATE: {\n    id: 'project.level.intermediate',\n    defaultMessage: 'Intermediate',\n  },\n  mappingLevelBEGINNER: {\n    id: 'project.level.beginner',\n    defaultMessage: 'Beginner',\n  },\n  mappingLevelNEWUSER: {\n    id: 'project.level.new_users',\n    defaultMessage: 'New users',\n  },\n  statistics: {\n    id: 'project.contributions.stats',\n    defaultMessage: 'Statistics',\n  },\n  mappedByUser: {\n    id: 'project.contributions.user.select.mapped',\n    defaultMessage: 'Select tasks mapped by {username}',\n  },\n  validatedByUser: {\n    id: 'project.contributions.user.select.validated',\n    defaultMessage: 'Select tasks validated by {username}',\n  },\n  allUserTasks: {\n    id: 'project.contributions.user.select.all',\n    defaultMessage: 'Select all tasks mapped or validated by {username}',\n  },\n  permissionErrorTitle: {\n    id: 'project.permissions.error.title',\n    defaultMessage: 'You are not ready to work on this project...',\n  },\n  permissionError_userLevelToValidate: {\n    id: 'project.permissions.error.userLevelToValidate',\n    defaultMessage:\n      'Only users with intermediate or advanced experience level can validate this project.',\n  },\n  permissionError_userLevelToMap: {\n    id: 'project.permissions.error.userLevelToMap',\n    defaultMessage:\n      'Only users with intermediate or advanced experience level can map this project.',\n  },\n  permissionError_userIsNotValidationTeamMember: {\n    id: 'project.permissions.error.userIsNotValidationTeamMember',\n    defaultMessage:\n      'You need to be member of one of the validation teams to be able to validate this project.',\n  },\n  permissionError_userIsNotMappingTeamMember: {\n    id: 'project.permissions.error.userIsNotMappingTeamMember',\n    defaultMessage:\n      'You need to be member of one of the mapping teams to be able to map this project.',\n  },\n});\n","import { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nexport function useEditProjectAllowed(project) {\n  const userDetails = useSelector((state) => state.auth.userDetails);\n  const organisations = useSelector((state) => state.auth.organisations);\n  const pmTeams = useSelector((state) => state.auth.pmTeams);\n  const [isAllowed, setIsAllowed] = useState(false);\n\n  useEffect(() => {\n    // admin users can edit any project\n    if (userDetails.role === 'ADMIN') setIsAllowed(true);\n    // owners can edit their projects\n    // project and project.author check are needed to avoid `null === null` case while data is loading\n    if (project && project.author && userDetails.username === project.author) setIsAllowed(true);\n    // managers of the organisation related to the project can edit it\n    if (organisations && organisations.includes(project.organisation)) setIsAllowed(true);\n    // users that are member of a PROJECT_MANAGER team associated with the project can edit it\n    const teams = project.teams\n      ? project.teams.filter((team) => team.role === 'PROJECT_MANAGER').map((team) => team.teamId)\n      : [];\n    if (pmTeams && pmTeams.some((item) => teams.includes(item))) {\n      setIsAllowed(true);\n    }\n  }, [pmTeams, userDetails.role, userDetails.username, organisations, project]);\n  return [isAllowed];\n}\n\nexport function useEditTeamAllowed(team) {\n  const userDetails = useSelector((state) => state.auth.userDetails);\n  const organisations = useSelector((state) => state.auth.organisations);\n  const pmTeams = useSelector((state) => state.auth.pmTeams);\n  const [isAllowed, setIsAllowed] = useState(false);\n\n  useEffect(() => {\n    // admin users can edit any team\n    if (userDetails.role === 'ADMIN') setIsAllowed(true);\n    // managers of the organisation related to the team can edit it\n    if (organisations && organisations.includes(team.organisation_id)) setIsAllowed(true);\n    // team managers can edit it\n    // verify from the redux store\n    if (pmTeams && pmTeams.includes(team.teamId)) setIsAllowed(true);\n    // and verify based on the team members list\n    if (team.members) {\n      const managers = team.members\n        .filter((member) => member.active && member.function === 'MANAGER')\n        .map((member) => member.username);\n      if (userDetails.username && managers.includes(userDetails.username)) {\n        setIsAllowed(true);\n      }\n    }\n  }, [pmTeams, userDetails.role, userDetails.username, organisations, team]);\n  return [isAllowed];\n}\n\nexport function useEditOrgAllowed(org) {\n  const userDetails = useSelector((state) => state.auth.userDetails);\n  const organisations = useSelector((state) => state.auth.organisations);\n  const [isAllowed, setIsAllowed] = useState(false);\n\n  useEffect(() => {\n    // admin users can edit any organisation\n    if (userDetails.role === 'ADMIN') setIsAllowed(true);\n    // check if user is a organisation manager\n    // based on the redux store data\n    if (org && org.organisationId && organisations && organisations.includes(org.organisationId)) {\n      setIsAllowed(true);\n    }\n    // and based on the organisation data\n    if (org && org.managers && org.managers.map((i) => i.username).includes(userDetails.username)) {\n      setIsAllowed(true);\n    }\n  }, [org, organisations, userDetails.username, userDetails.role]);\n  return [isAllowed];\n}\n","import { defineMessages } from 'react-intl';\n\n/**\n * Internationalized messages for use on comment input field.\n */\nexport default defineMessages({\n  imageUploadFailed: {\n    id: 'comment.input.imageUpload.error',\n    defaultMessage: 'The image upload failed.',\n  },\n  imageUploadOnProgress: {\n    id: 'comment.input.imageUpload.progress',\n    defaultMessage: 'Uploading file...',\n  },\n  sendingMessage: {\n    id: 'comment.input.sending.progress',\n    defaultMessage: 'Sending message...',\n  },\n  messageSent: {\n    id: 'comment.input.sending.success',\n    defaultMessage: 'Message sent.',\n  },\n  messageError: {\n    id: 'comment.input.sending.error',\n    defaultMessage: 'An error occurred while sending message.',\n  },\n  managersHashtagTip: {\n    id: 'comment.hashtags.help.managers',\n    defaultMessage: 'Add \"{hashtag}\" to notify the project managers about your comment.',\n  },\n  authorHashtagTip: {\n    id: 'comment.hashtags.help.author',\n    defaultMessage: 'Add \"{hashtag}\" to notify the project author about your comment.',\n  },\n  contributorsHashtagTip: {\n    id: 'comment.hashtags.help.contributors',\n    defaultMessage: 'Add \"{hashtag}\" to notify the task contributors about your comment.',\n  },\n  nothingToPreview: {\n    id: 'comment.preview.nothingToPreview',\n    defaultMessage: 'Nothing to preview',\n  },\n  leaveAComment: {\n    id: 'comment.preview.leaveAComment',\n    defaultMessage: 'Leave a comment...',\n  },\n  write: {\n    id: 'textarea.write',\n    defaultMessage: 'Write',\n  },\n  preview: {\n    id: 'textarea.preview',\n    defaultMessage: 'Preview',\n  },\n  attachImage: {\n    id: 'comment.write.attachImage',\n    defaultMessage: 'Attach image by dragging and dropping',\n  },\n  markdownSupported: {\n    id: 'comment.write.markdownSupported',\n    defaultMessage: 'Markdown supported',\n  },\n});\n","import React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\nimport { ClockIcon } from '../svgIcons';\n\nexport function PriorityBox({ priority, extraClasses, showIcon }: Object) {\n  let color = 'blue-grey b--blue-grey';\n  if (priority === 'URGENT') color = 'red b--red';\n  if (priority === 'HIGH') color = 'orange b--orange';\n\n  return (\n    <FormattedMessage {...messages[`priorityDescription${priority}`]}>\n      {(msg) => (\n        <div className={`tc br1 f8 ttu ba ${color} ${extraClasses}`} title={msg}>\n          {showIcon && <ClockIcon className={`${color} v-mid mr1`} style={{ height: '13px' }} />}\n          {priority ? (\n            <span className=\"v-mid fw5\">\n              <FormattedMessage {...messages[`projectPriority${priority}`]} />\n            </span>\n          ) : (\n            ''\n          )}\n        </div>\n      )}\n    </FormattedMessage>\n  );\n}\n","import React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\n\nexport const ProjectStatusBox = ({ status, className }: Object) => {\n  const colour = status === 'DRAFT' ? 'orange' : 'blue-grey';\n  return (\n    <div className={`tc br1 f7 ttu ba b--${colour} ${colour} ${className}`}>\n      <FormattedMessage {...messages[`status_${status}`]} />\n    </div>\n  );\n};\n","import React from 'react';\nimport { Alert } from './alert';\nimport { FormattedMessage } from 'react-intl';\nimport messages from './messages';\n\nexport default function WebglUnsupported({ className }) {\n  return (\n    <div className={className}>\n      <Alert type=\"warning\" iconClassName=\"h2 w2\">\n        <h3 className=\"barlow-condensed f3 fw6 mv0 dib\">\n          <FormattedMessage {...messages.webglUnsupportedTitle} />\n        </h3>\n        <div className=\"mv4 lh-title\">\n          <FormattedMessage\n            {...messages.webglUnsupportedDescription}\n            values={{\n              a: (msg) => (\n                <a target=\"_blank\" rel=\"noreferrer\" href=\"https://get.webgl.org/\">\n                  {msg}\n                </a>\n              ),\n            }}\n          />\n        </div>\n      </Alert>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport class TimerIcon extends React.PureComponent {\n  render() {\n    return (\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"10\"\n        height=\"12\"\n        fill=\"none\"\n        viewBox=\"0 0 10 12\"\n        role=\"img\"\n        {...this.props}\n      >\n        <title>Timer</title>\n        <path\n          fill=\"#68707F\"\n          fillRule=\"evenodd\"\n          d=\"M5.77 1.013v.932C8.164 2.32 10 4.419 10 6.942 10 9.732 7.757 12 5 12S0 9.731 0 6.942c0-2.524 1.837-4.621 4.23-4.997v-.932h-.421a.504.504 0 01-.501-.507c0-.28.224-.506.5-.506h2.383c.277 0 .501.227.501.506 0 .28-.224.507-.5.507H5.77zm3.306 5.909a.344.344 0 00.09-.264c-.182-1.99-1.783-3.58-3.787-3.76A.344.344 0 005 3.24V6.69c0 .19.155.344.347.344H8.82c.098 0 .191-.04.257-.112z\"\n          clipRule=\"evenodd\"\n        ></path>\n      </svg>\n    );\n  }\n}\n","import React, { useState, useEffect } from 'react';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport humanizeDuration from 'humanize-duration';\nimport ReactTooltip from 'react-tooltip';\n\nimport { ClockIcon } from '../svgIcons';\nimport messages from './messages';\nimport { TimerIcon } from '../svgIcons/timer';\n\nexport function DueDateBox({\n  dueDate,\n  intervalMili,\n  tooltipMsg,\n  isTaskStatusPage = false,\n  isProjectDetailPage = false,\n}: Object) {\n  const intl = useIntl();\n  const [timer, setTimer] = useState(Date.now());\n  useEffect(() => {\n    let interval;\n    if (intervalMili) {\n      interval = setInterval(() => {\n        setTimer(Date.now());\n      }, intervalMili); // 1 minute\n    }\n    return () => {\n      clearInterval(interval);\n    };\n  }, [intervalMili]);\n\n  if (dueDate === undefined || new Date(dueDate) === undefined) {\n    return null;\n  }\n\n  let options = { language: intl.locale.slice(0, 2), fallbacks: ['en'], largest: 1 };\n\n  if (intervalMili !== undefined) {\n    options = { units: ['h', 'm'], round: true };\n  }\n  const milliDifference = new Date(dueDate) - timer;\n\n  if (milliDifference > 0) {\n    return (\n      <>\n        <span\n          className={`inline-flex items-center lh-solid f8 br1 ph2 link ${\n            milliDifference < 60000 * 20 && intervalMili !== undefined\n              ? 'bg-red white'\n              : 'bg-tan blue-grey'\n          } ${intervalMili ? '' : 'mw4'}`}\n          data-tip={tooltipMsg}\n          style={{ paddingTop: '0.375rem', paddingBottom: '0.375rem' }}\n        >\n          {!isTaskStatusPage ? (\n            <ClockIcon height=\"12px\" width=\"12px\" />\n          ) : (\n            <TimerIcon height=\"12px\" width=\"12px\" />\n          )}\n          <span className=\"pl1\">\n            <FormattedMessage\n              className=\"indent\"\n              {...messages['dueDateRelativeRemainingDays']}\n              values={{\n                daysLeftHumanize: humanizeDuration(milliDifference, options),\n              }}\n            />\n          </span>\n        </span>\n        {tooltipMsg && <ReactTooltip place=\"bottom\" />}\n      </>\n    );\n  } else {\n    return (\n      isProjectDetailPage && (\n        <span\n          className=\"inline-flex items-center lh-solid f8 br1 ph2 link bg-tan blue-grey\"\n          style={{ paddingTop: '0.375rem', paddingBottom: '0.375rem' }}\n        >\n          <ClockIcon height=\"12px\" width=\"12px\" />\n          <span className=\"pl1\">\n            {dueDate ? (\n              <FormattedMessage {...messages.dueDateExpired} />\n            ) : (\n              <FormattedMessage {...messages.noDueDate} />\n            )}\n          </span>\n        </span>\n      )\n    );\n  }\n}\n","import { subMonths, format } from 'date-fns';\nimport { useQuery } from '@tanstack/react-query';\nimport { useSelector } from 'react-redux';\n\nimport { remapParamsToAPI } from '../utils/remapParamsToAPI';\nimport api from './apiClient';\n\nexport const useProjectsQuery = (fullProjectsQuery, action) => {\n  const token = useSelector((state) => state.auth.token);\n  const locale = useSelector((state) => state.preferences['locale']);\n\n  const fetchProjects = (signal, queryKey) => {\n    const [, fullProjectsQuery, action] = queryKey;\n    const paramsRemapped = remapParamsToAPI(fullProjectsQuery, backendToQueryConversion);\n    // it's needed in order to query by action when the user goes to /explore page\n    if (paramsRemapped.action === undefined && action) {\n      paramsRemapped.action = action;\n    }\n\n    if (paramsRemapped.lastUpdatedTo) {\n      paramsRemapped.lastUpdatedTo = format(subMonths(Date.now(), 6), 'yyyy-MM-dd');\n    }\n\n    return api(token, locale)\n      .get('projects/', {\n        signal,\n        params: paramsRemapped,\n      })\n      .then((res) => res.data);\n  };\n\n  return useQuery({\n    queryKey: ['projects', fullProjectsQuery, action],\n    queryFn: ({ signal, queryKey }) => fetchProjects(signal, queryKey),\n    keepPreviousData: true,\n  });\n};\n\nexport const useProjectQuery = (projectId) => {\n  const token = useSelector((state) => state.auth.token);\n  const locale = useSelector((state) => state.preferences['locale']);\n  const fetchProject = ({ signal }) => {\n    return api(token, locale).get(`projects/${projectId}/`, {\n      signal,\n    });\n  };\n\n  return useQuery({\n    queryKey: ['project', projectId],\n    queryFn: fetchProject,\n  });\n};\nexport const useProjectSummaryQuery = (projectId, otherOptions = {}) => {\n  const fetchProjectSummary = ({ signal }) => {\n    return api().get(`projects/${projectId}/queries/summary/`, {\n      signal,\n    });\n  };\n\n  return useQuery({\n    queryKey: ['project-summary', projectId],\n    queryFn: fetchProjectSummary,\n    select: (data) => data.data,\n    ...otherOptions,\n  });\n};\n\nexport const useProjectContributionsQuery = (projectId, otherOptions = {}) => {\n  const fetchProjectContributions = ({ signal }) => {\n    return api().get(`projects/${projectId}/contributions/`, {\n      signal,\n    });\n  };\n\n  return useQuery({\n    queryKey: ['project-contributions', projectId],\n    queryFn: fetchProjectContributions,\n    select: (data) => data.data.userContributions,\n    ...otherOptions,\n  });\n};\n\nexport const useActivitiesQuery = (projectId) => {\n  const ACTIVITIES_REFETCH_INTERVAL = 1000 * 60;\n  const fetchProjectActivities = ({ signal }) => {\n    return api().get(`projects/${projectId}/activities/latest/`, {\n      signal,\n    });\n  };\n\n  return useQuery({\n    queryKey: ['project-activities', projectId],\n    queryFn: fetchProjectActivities,\n    select: (data) => data.data,\n    refetchIntervalInBackground: false,\n    refetchInterval: ACTIVITIES_REFETCH_INTERVAL,\n    refetchOnWindowFocus: true,\n    useErrorBoundary: true,\n  });\n};\n\nexport const useTasksQuery = (projectId, otherOptions = {}) => {\n  const fetchProjectTasks = ({ signal }) => {\n    return api().get(`projects/${projectId}/tasks/`, {\n      signal,\n    });\n  };\n\n  return useQuery({\n    queryKey: ['project-tasks', projectId],\n    queryFn: fetchProjectTasks,\n    select: (data) => data.data,\n    ...otherOptions,\n  });\n};\n\nexport const usePriorityAreasQuery = (projectId) => {\n  const fetchProjectPriorityArea = (signal) => {\n    return api().get(`projects/${projectId}/queries/priority-areas/`, {\n      signal,\n    });\n  };\n\n  return useQuery({\n    queryKey: ['project-priority-area', projectId],\n    queryFn: ({ signal }) => fetchProjectPriorityArea(signal),\n    select: (data) => data.data,\n  });\n};\n\nexport const useProjectTimelineQuery = (projectId) => {\n  const fetchTimelineData = (signal) => {\n    return api().get(`projects/${projectId}/contributions/queries/day/`, {\n      signal,\n    });\n  };\n\n  return useQuery({\n    queryKey: ['project-timeline', projectId],\n    queryFn: ({ signal }) => fetchTimelineData(signal),\n    select: (data) => data.data.stats,\n  });\n};\n\nexport const useTaskDetail = (projectId, taskId, shouldRefetch) => {\n  const token = useSelector((state) => state.auth.token);\n\n  const fetchTaskDetail = ({ signal }) => {\n    return api(token).get(`projects/${projectId}/tasks/${taskId}/`, {\n      signal,\n    });\n  };\n\n  return useQuery({\n    queryKey: ['task-detail', projectId, taskId],\n    queryFn: fetchTaskDetail,\n    select: (data) => data.data,\n    enabled: !!(projectId && taskId),\n    refetchInterval: shouldRefetch ? 1000 * 60 : false,\n  });\n};\n\n// MAPPING\nexport const stopMapping = (projectId, taskId, comment, token, locale = 'en') => {\n  return api(token, locale).post(`projects/${projectId}/tasks/actions/stop-mapping/${taskId}/`, {\n    comment,\n  });\n};\n\nexport const splitTask = (projectId, taskId, token, locale) => {\n  return api(token, locale).post(`projects/${projectId}/tasks/actions/split/${taskId}/`);\n};\n\nexport const submitMappingTask = (url, payload, token, locale) => {\n  return api(token, locale).post(url, payload);\n};\n\n// VALIDATION\nexport const stopValidation = (projectId, payload, token, locale = 'en') => {\n  return api(token, locale).post(`projects/${projectId}/tasks/actions/stop-validation/`, payload);\n};\n\nexport const submitValidationTask = (projectId, payload, token, locale) => {\n  return api(token, locale).post(\n    `projects/${projectId}/tasks/actions/unlock-after-validation/`,\n    payload,\n  );\n};\n\nconst backendToQueryConversion = {\n  difficulty: 'difficulty',\n  campaign: 'campaign',\n  team: 'teamId',\n  organisation: 'organisationName',\n  location: 'country',\n  types: 'mappingTypes',\n  exactTypes: 'mappingTypesExact',\n  interests: 'interests',\n  text: 'textSearch',\n  page: 'page',\n  orderBy: 'orderBy',\n  orderByType: 'orderByType',\n  createdByMe: 'createdByMe',\n  managedByMe: 'managedByMe',\n  favoritedByMe: 'favoritedByMe',\n  mappedByMe: 'mappedByMe',\n  status: 'projectStatuses',\n  action: 'action',\n  stale: 'lastUpdatedTo',\n  createdFrom: 'createdFrom',\n  basedOnMyInterests: 'basedOnMyInterests',\n};\n","import React from 'react';\nimport { useIntl } from 'react-intl';\n\nimport messages from './messages';\n\nexport default function HashtagPaste({ text, setFn, hashtag, className }: Object) {\n  const intl = useIntl();\n  return (\n    <span\n      className={`bb pointer ${className}`}\n      style={{ borderBottomStyle: 'dashed' }}\n      onClick={() => setFn(text ? `${text} ${hashtag}` : `${hashtag} `)}\n      title={intl.formatMessage(messages[`${hashtag.replace('#', '')}HashtagTip`], {\n        hashtag: hashtag,\n      })}\n    >\n      {hashtag}\n    </span>\n  );\n}\n","import React from 'react';\n\nconst FileRejections = ({ files }: Object) => {\n  // Component that receives the rejected files from Dropzone\n  return (\n    <ul>\n      {files.map(({ file, errors }) => (\n        <li key={file.path} className=\"red\">\n          {file.path} (\n          {errors.map((e) => (\n            <span key={e.code} className=\"dib pr2\">\n              {e.message},\n            </span>\n          ))}\n          )\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nexport default FileRejections;\n","import React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\n\nconst DropzoneUploadStatus = ({ uploadError, uploading }: Object) => {\n  return (\n    <>\n      {uploadError && (\n        <span className=\"red f6 pt3 db\">\n          <FormattedMessage {...messages.imageUploadFailed} />\n        </span>\n      )}\n      {uploading && (\n        <span className=\"blue-grey f6 pt3 db\">\n          <FormattedMessage {...messages.imageUploadOnProgress} />\n        </span>\n      )}\n    </>\n  );\n};\n\nexport default DropzoneUploadStatus;\n","import { commands, selectWord } from '@uiw/react-md-editor';\n\nconst ICON_SIZE = 14;\n\nexport const iconConfig = {\n  bold: {\n    ...commands.bold,\n    icon: (\n      <svg role=\"img\" width={ICON_SIZE} height={ICON_SIZE} viewBox=\"0 0 384 512\">\n        <path\n          fill=\"currentColor\"\n          d=\"M304.793 243.891c33.639-18.537 53.657-54.16 53.657-95.693 0-48.236-26.25-87.626-68.626-104.179C265.138 34.01 240.849 32 209.661 32H24c-8.837 0-16 7.163-16 16v33.049c0 8.837 7.163 16 16 16h33.113v318.53H24c-8.837 0-16 7.163-16 16V464c0 8.837 7.163 16 16 16h195.69c24.203 0 44.834-1.289 66.866-7.584C337.52 457.193 376 410.647 376 350.014c0-52.168-26.573-91.684-71.207-106.123zM142.217 100.809h67.444c16.294 0 27.536 2.019 37.525 6.717 15.828 8.479 24.906 26.502 24.906 49.446 0 35.029-20.32 56.79-53.029 56.79h-76.846V100.809zm112.642 305.475c-10.14 4.056-22.677 4.907-31.409 4.907h-81.233V281.943h84.367c39.645 0 63.057 25.38 63.057 63.057.001 28.425-13.66 52.483-34.782 61.284z\"\n        />\n      </svg>\n    ),\n  },\n  italic: {\n    ...commands.italic,\n    icon: (\n      <svg data-name=\"italic\" width={ICON_SIZE} height={ICON_SIZE} role=\"img\" viewBox=\"0 0 320 512\">\n        <path\n          fill=\"currentColor\"\n          d=\"M204.758 416h-33.849l62.092-320h40.725a16 16 0 0 0 15.704-12.937l6.242-32C297.599 41.184 290.034 32 279.968 32H120.235a16 16 0 0 0-15.704 12.937l-6.242 32C96.362 86.816 103.927 96 113.993 96h33.846l-62.09 320H46.278a16 16 0 0 0-15.704 12.935l-6.245 32C22.402 470.815 29.967 480 40.034 480h158.479a16 16 0 0 0 15.704-12.935l6.245-32c1.927-9.88-5.638-19.065-15.704-19.065z\"\n        />\n      </svg>\n    ),\n  },\n  quote: {\n    ...commands.quote,\n    icon: (\n      <svg width={ICON_SIZE} height={ICON_SIZE} viewBox=\"0 0 520 520\">\n        <path\n          fill=\"currentColor\"\n          d=\"M520,95.75 L520,225.75 C520,364.908906 457.127578,437.050625 325.040469,472.443125 C309.577578,476.586875 294.396016,464.889922 294.396016,448.881641 L294.396016,414.457031 C294.396016,404.242891 300.721328,395.025078 310.328125,391.554687 C377.356328,367.342187 414.375,349.711094 414.375,274.5 L341.25,274.5 C314.325781,274.5 292.5,252.674219 292.5,225.75 L292.5,95.75 C292.5,68.8257812 314.325781,47 341.25,47 L471.25,47 C498.174219,47 520,68.8257812 520,95.75 Z M178.75,47 L48.75,47 C21.8257813,47 0,68.8257812 0,95.75 L0,225.75 C0,252.674219 21.8257813,274.5 48.75,274.5 L121.875,274.5 C121.875,349.711094 84.8563281,367.342187 17.828125,391.554687 C8.22132813,395.025078 1.89601563,404.242891 1.89601563,414.457031 L1.89601563,448.881641 C1.89601563,464.889922 17.0775781,476.586875 32.5404687,472.443125 C164.627578,437.050625 227.5,364.908906 227.5,225.75 L227.5,95.75 C227.5,68.8257812 205.674219,47 178.75,47 Z\"\n        />\n      </svg>\n    ),\n  },\n  link: {\n    ...commands.link,\n    icon: (\n      <svg data-name=\"italic\" width={ICON_SIZE} height={ICON_SIZE} role=\"img\" viewBox=\"0 0 520 520\">\n        <path\n          fill=\"currentColor\"\n          d=\"M331.751196,182.121107 C392.438214,241.974735 391.605313,337.935283 332.11686,396.871226 C332.005129,396.991316 331.873084,397.121413 331.751196,397.241503 L263.493918,464.491645 C203.291404,523.80587 105.345257,523.797864 45.151885,464.491645 C-15.0506283,405.187427 -15.0506283,308.675467 45.151885,249.371249 L82.8416853,212.237562 C92.836501,202.39022 110.049118,208.9351 110.56511,222.851476 C111.223305,240.5867 114.451306,258.404985 120.407566,275.611815 C122.424812,281.438159 120.983487,287.882964 116.565047,292.23621 L103.272145,305.332975 C74.8052033,333.379887 73.9123737,379.047937 102.098973,407.369054 C130.563883,435.969378 177.350591,436.139505 206.033884,407.879434 L274.291163,340.6393 C302.9257,312.427264 302.805844,266.827265 274.291163,238.733318 C270.531934,235.036561 266.74528,232.16442 263.787465,230.157924 C259.544542,227.2873 256.928256,222.609848 256.731165,217.542518 C256.328935,206.967633 260.13184,196.070508 268.613213,187.714278 L289.998463,166.643567 C295.606326,161.118448 304.403592,160.439942 310.906317,164.911276 C318.353355,170.034591 325.328531,175.793397 331.751196,182.121107 Z M240.704978,55.4828366 L172.447607,122.733236 C172.325719,122.853326 172.193674,122.983423 172.081943,123.103513 C117.703294,179.334654 129.953294,261.569283 185.365841,328.828764 C191.044403,335.721376 198.762988,340.914712 206.209732,346.037661 C212.712465,350.509012 221.510759,349.829503 227.117615,344.305363 L248.502893,323.234572 C256.984277,314.87831 260.787188,303.981143 260.384957,293.406218 C260.187865,288.338869 257.571576,283.661398 253.328648,280.790763 C250.370829,278.78426 246.58417,275.912107 242.824936,272.215337 C214.310216,244.121282 206.209732,204.825874 229.906702,179.334654 L298.164073,112.094263 C326.847404,83.8340838 373.633159,84.0042113 402.099123,112.604645 C430.285761,140.92587 429.393946,186.594095 400.92595,214.641114 L387.63303,227.737929 C383.214584,232.091191 381.773257,238.536021 383.790506,244.362388 C389.746774,261.569283 392.974779,279.387637 393.632975,297.122928 C394.149984,311.039357 411.361608,317.584262 421.356437,307.736882 L459.046288,270.603053 C519.249898,211.29961 519.249898,114.787281 459.047304,55.4828366 C398.853851,-3.82360914 300.907572,-3.83161514 240.704978,55.4828366 Z\"\n        />\n      </svg>\n    ),\n  },\n  unorderedListCommand: {\n    ...commands.unorderedListCommand,\n    icon: (\n      <svg data-name=\"unordered-list\" width={ICON_SIZE} height={ICON_SIZE} viewBox=\"0 0 512 512\">\n        <path\n          fill=\"currentColor\"\n          d=\"M96 96c0 26.51-21.49 48-48 48S0 122.51 0 96s21.49-48 48-48 48 21.49 48 48zM48 208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm0 160c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm96-236h352c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z\"\n        />\n      </svg>\n    ),\n  },\n  orderedListCommand: {\n    ...commands.orderedListCommand,\n    icon: (\n      <svg\n        data-name=\"ordered-list\"\n        width={ICON_SIZE}\n        height={ICON_SIZE}\n        role=\"img\"\n        viewBox=\"0 0 512 512\"\n      >\n        <path\n          fill=\"currentColor\"\n          d=\"M3.263 139.527c0-7.477 3.917-11.572 11.573-11.572h15.131V88.078c0-5.163.534-10.503.534-10.503h-.356s-1.779 2.67-2.848 3.738c-4.451 4.273-10.504 4.451-15.666-1.068l-5.518-6.231c-5.342-5.341-4.984-11.216.534-16.379l21.72-19.938C32.815 33.602 36.732 32 42.785 32H54.89c7.656 0 11.749 3.916 11.749 11.572v84.384h15.488c7.655 0 11.572 4.094 11.572 11.572v8.901c0 7.477-3.917 11.572-11.572 11.572H14.836c-7.656 0-11.573-4.095-11.573-11.572v-8.902zM2.211 304.591c0-47.278 50.955-56.383 50.955-69.165 0-7.18-5.954-8.755-9.28-8.755-3.153 0-6.479 1.051-9.455 3.852-5.079 4.903-10.507 7.004-16.111 2.451l-8.579-6.829c-5.779-4.553-7.18-9.805-2.803-15.409C13.592 201.981 26.025 192 47.387 192c19.437 0 44.476 10.506 44.476 39.573 0 38.347-46.753 46.402-48.679 56.909h39.049c7.529 0 11.557 4.027 11.557 11.382v8.755c0 7.354-4.028 11.382-11.557 11.382h-67.94c-7.005 0-12.083-4.028-12.083-11.382v-4.028zM5.654 454.61l5.603-9.28c3.853-6.654 9.105-7.004 15.584-3.152 4.903 2.101 9.63 3.152 14.359 3.152 10.155 0 14.358-3.502 14.358-8.23 0-6.654-5.604-9.106-15.934-9.106h-4.728c-5.954 0-9.28-2.101-12.258-7.88l-1.05-1.926c-2.451-4.728-1.226-9.806 2.801-14.884l5.604-7.004c6.829-8.405 12.257-13.483 12.257-13.483v-.35s-4.203 1.051-12.608 1.051H16.685c-7.53 0-11.383-4.028-11.383-11.382v-8.755c0-7.53 3.853-11.382 11.383-11.382h58.484c7.529 0 11.382 4.027 11.382 11.382v3.327c0 5.778-1.401 9.806-5.079 14.183l-17.509 20.137c19.611 5.078 28.716 20.487 28.716 34.845 0 21.363-14.358 44.126-48.503 44.126-16.636 0-28.192-4.728-35.896-9.455-5.779-4.202-6.304-9.805-2.626-15.934zM144 132h352c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z\"\n        />\n      </svg>\n    ),\n  },\n  mention: {\n    name: 'mention',\n    keyCommand: 'mention',\n    value: '@',\n    buttonProps: { 'aria-label': 'Mention user', title: 'Mention user' },\n    icon: (\n      <svg\n        width={ICON_SIZE}\n        height={ICON_SIZE}\n        viewBox=\"0 0 24 24\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      >\n        <circle cx=\"12\" cy=\"12\" r=\"4\"></circle>\n        <path d=\"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94\"></path>\n      </svg>\n    ),\n    execute: (state, api) => {\n      const newSelectionRange = selectWord({ text: state.text, selection: state.selection });\n      const state1 = api.setSelectionRange(newSelectionRange);\n      const state2 = api.replaceSelection(`@${state1.selectedText}`);\n      api.setSelectionRange({\n        start: state2.selection.end - state1.selectedText.length,\n        end: state2.selection.end,\n      });\n    },\n  },\n  upload: {\n    name: 'upload',\n    keyCommand: 'upload',\n    buttonProps: { 'aria-label': 'Upload user', title: 'Upload image' },\n    icon: (\n      <svg width={ICON_SIZE} height={ICON_SIZE} x=\"0\" y=\"0\" viewBox=\"0 0 24 24\" className=\"\">\n        <g>\n          <path\n            id=\"image-upload\"\n            d=\"m21.75 11v6a3.383 3.383 0 0 1 -3.75 3.75h-12a3.383 3.383 0 0 1 -3.75-3.75v-10a3.383 3.383 0 0 1 3.75-3.75h8a.75.75 0 0 1 0 1.5h-8c-1.577 0-2.25.673-2.25 2.25v9.25l2.54-2.54a1.008 1.008 0 0 1 1.42 0l.94.94a.5.5 0 0 0 .7 0l4.94-4.94a1.008 1.008 0 0 1 1.42 0l4.54 4.54v-3.25a.75.75 0 0 1 1.5 0zm-13.757-3.25a1.253 1.253 0 1 0 .007 0zm10.537-2.72.22-.219v2.189a.75.75 0 0 0 1.5 0v-2.189l.22.219a.75.75 0 0 0 1.06-1.06l-1.5-1.5a.751.751 0 0 0 -1.06 0l-1.5 1.5a.75.75 0 0 0 1.06 1.06z\"\n            fill=\"#000000\"\n            data-original=\"#000000\"\n            className=\"\"\n          ></path>\n        </g>\n      </svg>\n    ),\n    execute: () => {\n      document.getElementById('image_picker').click();\n    },\n  },\n  // The backend converts markdown into HTML, so youtube embed iframe works on the preview mode,\n  // uncomment this when backend has support for converting our custom youtube markdown into iframes\n  // youtube: {\n  //   name: 'youtube',\n  //   keyCommand: 'youtube',\n  //   value: '::youtube[]',\n  //   buttonProps: { 'aria-label': 'Add YouTube video', title: 'Add YouTube video' },\n  //   icon: (\n  //     <svg\n  //       xmlns=\"http://www.w3.org/2000/svg\"\n  //       x=\"0px\"\n  //       y=\"0px\"\n  //       width=\"14\"\n  //       height=\"14\"\n  //       viewBox=\"0 0 48 48\"\n  //       style={{ fill: '#7950F2' }}\n  //     >\n  //       <path\n  //         fill=\"#FF3D00\"\n  //         d=\"M43.2,33.9c-0.4,2.1-2.1,3.7-4.2,4c-3.3,0.5-8.8,1.1-15,1.1c-6.1,0-11.6-0.6-15-1.1c-2.1-0.3-3.8-1.9-4.2-4C4.4,31.6,4,28.2,4,24c0-4.2,0.4-7.6,0.8-9.9c0.4-2.1,2.1-3.7,4.2-4C12.3,9.6,17.8,9,24,9c6.2,0,11.6,0.6,15,1.1c2.1,0.3,3.8,1.9,4.2,4c0.4,2.3,0.9,5.7,0.9,9.9C44,28.2,43.6,31.6,43.2,33.9z\"\n  //       ></path>\n  //       <path fill=\"#FFF\" d=\"M20 31L20 17 32 24z\"></path>\n  //     </svg>\n  //   ),\n  //   execute: (state, api) => {\n  //     const newSelectionRange = selectWord({ text: state.text, selection: state.selection });\n  //     const state1 = api.setSelectionRange(newSelectionRange);\n  //     const state2 = api.replaceSelection(`::youtube[${state1.selectedText}]`);\n  //     api.setSelectionRange({\n  //       start: state2.selection.end - 1,\n  //       end: state2.selection.end - 1,\n  //     });\n  //   },\n  // },\n};\n","import React, { useRef, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport MDEditor from '@uiw/react-md-editor';\nimport Tribute from 'tributejs';\nimport { FormattedMessage } from 'react-intl';\nimport { useDropzone } from 'react-dropzone';\n\nimport 'tributejs/tribute.css';\n\nimport { useOnDrop, useUploadImage } from '../../hooks/UseUploadImage';\nimport { fetchLocalJSONAPI } from '../../network/genericJSONRequest';\nimport HashtagPaste from './hashtagPaste';\nimport FileRejections from './fileRejections';\nimport DropzoneUploadStatus from './uploadStatus';\nimport { DROPZONE_SETTINGS } from '../../config';\nimport { htmlFromMarkdown, formatUserNamesToLink } from '../../utils/htmlFromMarkdown';\nimport { iconConfig } from './editorIconConfig';\nimport messages from './messages';\nimport { CurrentUserAvatar } from '../user/avatar';\n\nexport const CommentInputField = ({\n  comment,\n  setComment,\n  contributors,\n  enableHashtagPaste = false,\n  isShowTabNavs = false,\n  isShowFooter = false,\n  enableContributorsHashtag = false,\n  isShowUserPicture = false,\n  placeholderMsg = messages.leaveAComment,\n  markdownTextareaProps = {},\n}: Object) => {\n  const token = useSelector((state) => state.auth.token);\n  const textareaRef = useRef();\n  const isBundle = useRef(false);\n  const [isShowPreview, setIsShowPreview] = useState(false);\n\n  const appendImgToComment = (url) => setComment(`${comment}\\n![image](${url})\\n`);\n  const [uploadError, uploading, onDrop] = useOnDrop(appendImgToComment);\n  const { fileRejections, getRootProps, getInputProps } = useDropzone({\n    onDrop,\n    ...DROPZONE_SETTINGS,\n  });\n  const [fileuploadError, fileuploading, uploadImg] = useUploadImage();\n\n  const tribute = new Tribute({\n    trigger: '@',\n    values: async (query, cb) => {\n      try {\n        if (!query) return cb(contributors.map((username) => ({ username })));\n        const res = await fetchLocalJSONAPI(`users/queries/filter/${query}/`, token);\n        cb(res.usernames.map((username) => ({ username })));\n      } catch (e) {\n        return [];\n      }\n    },\n    lookup: 'username',\n    fillAttr: 'username',\n    selectTemplate: (item) => `@[${item.original.username}]`,\n    itemClass: 'w-100 pv2 ph3 bg-tan hover-bg-blue-grey blue-grey hover-white pointer base-font',\n    requireLeadingSpace: true,\n    noMatchTemplate: null,\n    allowSpaces: true,\n    searchOpts: {\n      skip: true,\n    },\n  });\n\n  useEffect(() => {\n    // Make sure the type of contributors is not an array until the attachment happens\n    if (textareaRef.current.textarea && !isBundle.current && Array.isArray(contributors)) {\n      isBundle.current = true;\n      tribute.attach(textareaRef.current.textarea);\n      textareaRef.current.textarea.addEventListener('tribute-replaced', (e) => {\n        setComment(e.target.value);\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [textareaRef.current, contributors]);\n\n  const handleImagePick = async (event) =>\n    await uploadImg(event.target.files[0], appendImgToComment, token);\n\n  return (\n    <div {...getRootProps()}>\n      {isShowTabNavs && (\n        <div className={`flex items-center gap-1 ${isShowUserPicture ? 'mb3' : ''}`}>\n          {isShowUserPicture && <CurrentUserAvatar className=\"w3 h3\" />}\n          <div className=\"pv3-ns ph3 ph3-m bg-grey-light dib\">\n            <span\n              role=\"button\"\n              className={`pointer db dib-ns pb1 bb bw1 ${\n                !isShowPreview ? 'b--blue-dark' : 'b--grey-light'\n              }`}\n              onClick={() => setIsShowPreview(false)}\n            >\n              <FormattedMessage {...messages.write} />\n            </span>\n            <span\n              role=\"button\"\n              className={`pointer ml3 db dib-ns pb1 bb bw1 ${\n                isShowPreview ? 'b--blue-dark' : 'b--grey-light'\n              }`}\n              onClick={() => setIsShowPreview(true)}\n            >\n              <FormattedMessage {...messages.preview} />\n            </span>\n          </div>\n        </div>\n      )}\n      <div className={`${isShowPreview ? 'dn' : ''} bg-white`} data-color-mode=\"light\">\n        <FormattedMessage {...placeholderMsg}>\n          {(val) => (\n            <MDEditor\n              ref={textareaRef}\n              preview=\"edit\"\n              commands={Object.keys(iconConfig).map((key) => iconConfig[key])}\n              extraCommands={[]}\n              height={200}\n              value={comment}\n              onChange={setComment}\n              textareaProps={{\n                ...getInputProps(),\n                spellCheck: 'true',\n                placeholder: val,\n                ...markdownTextareaProps,\n              }}\n              defaultTabEnable\n            />\n          )}\n        </FormattedMessage>\n        <input\n          type=\"file\"\n          id=\"image_picker\"\n          className=\"dn\"\n          accept=\"image/*\"\n          onChange={handleImagePick}\n        />\n        {isShowFooter && (\n          <div className=\"dn flex-ns justify-between ba bt-0 w-100 ph2 pv1 relative b--blue-grey textareaDetail\">\n            <span className=\"f7 lh-copy gray\">\n              <FormattedMessage {...messages.attachImage} />\n            </span>\n            <span className=\"f7 lh-copy gray\">\n              <FormattedMessage {...messages.markdownSupported} />\n            </span>\n          </div>\n        )}\n      </div>\n      {isShowPreview && (\n        <div className=\"db ba ph3\" style={{ minHeight: 200, borderColor: '#F0EEEE' }}>\n          {comment && (\n            <div\n              style={{ wordWrap: 'break-word' }}\n              className=\"blue-grey f5 lh-title markdown-content\"\n              dangerouslySetInnerHTML={htmlFromMarkdown(formatUserNamesToLink(comment))}\n            />\n          )}\n          {!comment && (\n            <span className=\"db mt3\">\n              <FormattedMessage {...messages.nothingToPreview} />\n            </span>\n          )}\n        </div>\n      )}\n      {enableHashtagPaste && !isShowPreview && (\n        <span className=\"db blue-grey f6 pt2\">\n          <HashtagPaste text={comment} setFn={setComment} hashtag=\"#managers\" />\n          <span>, </span>\n          <HashtagPaste text={comment} setFn={setComment} hashtag=\"#author\" />\n          {enableContributorsHashtag && (\n            <>\n              <span>, </span>\n              <HashtagPaste text={comment} setFn={setComment} hashtag=\"#contributors\" />\n            </>\n          )}\n        </span>\n      )}\n      <DropzoneUploadStatus\n        uploading={uploading || fileuploading}\n        uploadError={uploadError || fileuploadError}\n      />\n      <FileRejections files={fileRejections} />\n    </div>\n  );\n};\n","export function formatOSMChaLink(infoObj) {\n  const baseURL = 'https://osmcha.org/';\n  // If a custom filter id is given, ignores everything else\n  if (infoObj.osmchaFilterId) {\n    return `${baseURL}?aoi=${encodeURIComponent(infoObj.osmchaFilterId)}`;\n  }\n\n  let filterParams = {};\n  if (infoObj.aoiBBOX) {\n    filterParams['in_bbox'] = buildFilter(\n      typeof infoObj.aoiBBOX === 'string' ? infoObj.aoiBBOX : infoObj.aoiBBOX.join(','),\n    );\n    // add the area_lt only if we are filtering changesets of the entire project\n    // on that case, we don't have usernames information\n    if (!infoObj.usernames) {\n      filterParams['area_lt'] = buildFilter(2);\n    }\n  }\n\n  if (typeof infoObj.created === 'string') {\n    filterParams['date__gte'] = buildFilter(infoObj.created.split('T')[0]);\n  }\n\n  if (infoObj.mappingTeams) {\n    filterParams['mapping_teams'] = buildFilter(infoObj.mappingTeams);\n  }\n\n  if (infoObj.changesetComment) {\n    filterParams['comment'] = buildFilter(infoObj.changesetComment);\n  }\n\n  if (typeof infoObj.usernames === 'object') {\n    filterParams['users'] = buildFilter(infoObj.usernames);\n  }\n\n  return `${baseURL}?filters=${encodeURIComponent(JSON.stringify(filterParams))}`;\n}\n\nfunction buildFilterValue(value) {\n  return { label: value, value: value };\n}\n\nfunction buildFilter(values) {\n  const valuesArray = Array.isArray(values) ? values : [values];\n  return valuesArray.map((values) => buildFilterValue(values));\n}\n\nexport const getFilterId = (value) => {\n  if (value.startsWith('https://osmcha.org/') && value.search('aoi=') !== -1) {\n    return value.split('aoi=')[1];\n  }\n  return value;\n};\n","import slug from 'slug';\n\nexport const slugifyFileName = (name, mimetype) => {\n  // slugify file names in order to avoid problems on the markdown\n  if (name.lastIndexOf('.') === -1) {\n    name = `${name}.${mimetype.split('/')[1]}`;\n  }\n  return `${slug(name.substr(0, name.lastIndexOf('.')))}${name.substr(name.lastIndexOf('.'))}`;\n};\n","import { useState, useCallback } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { pushToLocalJSONAPI } from '../network/genericJSONRequest';\nimport { slugifyFileName } from '../utils/slugifyFileName';\n\nexport const useUploadImage = () => {\n  const [uploading, setUploading] = useState(false);\n  const [uploadError, setUploadError] = useState(null);\n\n  const uploadImg = useCallback((file, updateFn, token) => {\n    if (file && updateFn && token) {\n      const promise = new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onload = () => {\n          if (!!reader.result) {\n            resolve(reader.result);\n          } else {\n            reject(Error('Failed converting to base64'));\n          }\n        };\n      });\n      promise.then(\n        (result) => {\n          const payload = JSON.stringify({\n            mime: file.type,\n            data: result.split('base64,')[1],\n            filename: slugifyFileName(file.name, file.type),\n          });\n          setUploading(true);\n          pushToLocalJSONAPI('system/image-upload/', payload, token)\n            .then((res) => {\n              updateFn(res.url);\n              setUploading(false);\n              setUploadError(null);\n            })\n            .catch((e) => {\n              setUploadError(e);\n              setUploading(false);\n            });\n        },\n        (err) => {\n          setUploadError(err);\n        },\n      );\n    }\n  }, []);\n  return [uploadError, uploading, uploadImg];\n};\n\nexport const useOnDrop = (appendImgToComment) => {\n  const token = useSelector((state) => state.auth.token);\n  const [uploadError, uploading, uploadImg] = useUploadImage();\n\n  const onDrop = useCallback(\n    (acceptedFiles) => {\n      acceptedFiles.forEach(async (file) => await uploadImg(file, appendImgToComment, token));\n    },\n    [token, uploadImg, appendImgToComment],\n  );\n  return [uploadError, uploading, onDrop];\n};\n","import { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\nimport { Alert } from '../alert';\n\nexport const MessageStatus = ({ status, comment }) => {\n  if (status === 'success' && !comment) {\n    return (\n      <Alert type=\"success\" inline={true} compact={true}>\n        <FormattedMessage {...messages.messageSent} />\n      </Alert>\n    );\n  }\n  if (status === 'error') {\n    return (\n      <Alert type=\"error\" inline={true} compact={true}>\n        <FormattedMessage {...messages.messageError} />\n      </Alert>\n    );\n  }\n  return null;\n};\n","export function compareTaskId(a, b) {\n  if (a.properties.taskId > b.properties.taskId) return 1;\n  if (b.properties.taskId > a.properties.taskId) return -1;\n  return 0;\n}\n\nexport function compareLastUpdate(a, b) {\n  return new Date(b.properties.actionDate) - new Date(a.properties.actionDate);\n}\n\nexport function compareHistoryLastUpdate(a, b) {\n  return new Date(b.actionDate) - new Date(a.actionDate);\n}\n\nexport function compareByPropertyDescending(a, b, property) {\n  if (a[property] > b[property]) return -1;\n  if (b[property] > a[property]) return 1;\n  return 0;\n}\n","import { ID_EDITOR_URL, POTLATCH2_EDITOR_URL, RAPID_EDITOR_URL } from '../config';\n\nexport function getEditors(filterList, customEditor) {\n  let editors = [\n    {\n      label: 'RapiD',\n      value: 'RAPID',\n      url: RAPID_EDITOR_URL,\n    },\n    {\n      label: 'iD Editor',\n      value: 'ID',\n      url: ID_EDITOR_URL,\n    },\n    {\n      label: 'JOSM',\n      value: 'JOSM',\n      url: 'http://127.0.0.1:8111',\n    },\n    {\n      label: 'Potlatch 2',\n      value: 'POTLATCH_2',\n      url: POTLATCH2_EDITOR_URL,\n    },\n    {\n      label: 'Field Papers',\n      value: 'FIELD_PAPERS',\n      url: 'http://fieldpapers.org/compose',\n    },\n  ];\n  if (filterList) {\n    editors = editors.filter((i) => filterList.includes(i.value));\n  }\n  if (customEditor && filterList.includes('CUSTOM')) {\n    editors.push({ label: customEditor.name, value: 'CUSTOM', url: customEditor.url });\n  }\n  return editors;\n}\n","import { Position } from \"./types\";\n\nconst D2R = Math.PI / 180;\nconst R2D = 180 / Math.PI;\n\ninterface ZoomParams {\n  Bc: number[];\n  Cc: number[];\n  zc: number[];\n  Ac: number[];\n}\n\nconst cache: Record<number, ZoomParams> = {};\n\n// SphericalMercator constructor: precaches calculations\n// for fast tile lookups.\nexport class SphericalMercator {\n  size: number;\n  expansion: number;\n  Bc: number[];\n  Cc: number[];\n  zc: number[];\n  Ac: number[];\n\n  constructor({\n    size = 256,\n    antimeridian = false,\n  }: {\n    size?: number;\n    antimeridian?: boolean;\n  } = {}) {\n    this.size = size;\n    this.expansion = antimeridian === true ? 2 : 1;\n    if (!cache[this.size]) {\n      let size = this.size;\n      let c: ZoomParams = {\n        Bc: [],\n        Cc: [],\n        zc: [],\n        Ac: [],\n      };\n      cache[this.size] = c;\n\n      for (let d = 0; d < 30; d++) {\n        c.Bc.push(size / 360);\n        c.Cc.push(size / (2 * Math.PI));\n        c.zc.push(size / 2);\n        c.Ac.push(size);\n        size *= 2;\n      }\n    }\n    this.Bc = cache[this.size].Bc;\n    this.Cc = cache[this.size].Cc;\n    this.zc = cache[this.size].zc;\n    this.Ac = cache[this.size].Ac;\n  }\n\n  // Convert lon lat to screen pixel value\n  //\n  // - `ll` {Array} `[lon, lat]` array of geographic coordinates.\n  // - `zoom` {Number} zoom level.\n  px(ll: Position, zoom: number): Position {\n    if (!Number.isInteger(zoom)) {\n      let size = this.size * Math.pow(2, zoom);\n      let d = size / 2;\n      let bc = size / 360;\n      let cc = size / (2 * Math.PI);\n      let ac = size;\n      let f = Math.min(Math.max(Math.sin(D2R * ll[1]), -0.9999), 0.9999);\n      let x = d + ll[0] * bc;\n      let y = d + 0.5 * Math.log((1 + f) / (1 - f)) * -cc;\n      x > ac * this.expansion && (x = ac * this.expansion);\n      y > ac && (y = ac);\n      //(x < 0) && (x = 0);\n      //(y < 0) && (y = 0);\n      return [x, y];\n    } else {\n      let d = this.zc[zoom];\n      let f = Math.min(Math.max(Math.sin(D2R * ll[1]), -0.9999), 0.9999);\n      let x = Math.round(d + ll[0] * this.Bc[zoom]);\n      let y = Math.round(\n        d + 0.5 * Math.log((1 + f) / (1 - f)) * -this.Cc[zoom]\n      );\n      x > this.Ac[zoom] * this.expansion &&\n        (x = this.Ac[zoom] * this.expansion);\n      y > this.Ac[zoom] && (y = this.Ac[zoom]);\n      //(x < 0) && (x = 0);\n      //(y < 0) && (y = 0);\n      return [x, y];\n    }\n  }\n\n  // Convert screen pixel value to lon lat\n  //\n  // - `px` {Array} `[x, y]` array of geographic coordinates.\n  // - `zoom` {Number} zoom level.\n  ll(px: Position, zoom: number): Position {\n    if (!Number.isInteger(zoom)) {\n      let size = this.size * Math.pow(2, zoom);\n      let bc = size / 360;\n      let cc = size / (2 * Math.PI);\n      let zc = size / 2;\n      let g = (px[1] - zc) / -cc;\n      let lon = (px[0] - zc) / bc;\n      let lat = R2D * (2 * Math.atan(Math.exp(g)) - 0.5 * Math.PI);\n      return [lon, lat];\n    } else {\n      let g = (px[1] - this.zc[zoom]) / -this.Cc[zoom];\n      let lon = (px[0] - this.zc[zoom]) / this.Bc[zoom];\n      let lat = R2D * (2 * Math.atan(Math.exp(g)) - 0.5 * Math.PI);\n      return [lon, lat];\n    }\n  }\n}\n","import { SphericalMercator } from \"./sphericalmercator\";\nimport {\n  Ratios,\n  Viewport,\n  Position,\n  Bounds,\n  Dimensions,\n  LongitudeLatitude,\n} from \"./types\";\n\nfunction getAdjusted(base: number, ratios: Ratios, allowFloat: boolean) {\n  const adjusted = Math.min(\n    base - Math.log(ratios[0]) / Math.log(2),\n    base - Math.log(ratios[1]) / Math.log(2)\n  );\n\n  return allowFloat ? adjusted : Math.floor(adjusted);\n}\n\n/**\n * Given bounds in WSEN order and pixel dimensions,\n * figure out what center and zoom will produce a map\n * view with the same bounds and dimensions.\n */\nexport function viewport(\n  bounds: Bounds,\n  dimensions: Dimensions,\n  {\n    minzoom = 0,\n    maxzoom = 20,\n    tileSize = 256,\n    allowFloat = false,\n    allowAntiMeridian = false,\n  }: {\n    /**\n     * Given a minimum or maximum zoom, the output zoom will\n     * be clamped between those numbers.\n     */\n    minzoom?: number;\n    maxzoom?: number;\n    /**\n     * Tile size. By default, this is 256.\n     */\n    tileSize?: number;\n    /**\n     * Allow floating-point zoom levels. By default,\n     * only integer zoom levels are output.\n     */\n    allowFloat?: boolean;\n    allowAntiMeridian?: boolean;\n  } = {}\n): Viewport {\n  const merc = new SphericalMercator({\n    size: tileSize,\n    antimeridian: allowAntiMeridian,\n  });\n  const base = maxzoom;\n  const bl = merc.px([bounds[0], bounds[1]], base);\n  const tr = merc.px([bounds[2], bounds[3]], base);\n  const width = tr[0] - bl[0];\n  const height = bl[1] - tr[1];\n  const centerPixelX = bl[0] + width / 2;\n  const centerPixelY = tr[1] + height / 2;\n  const ratios: Ratios = [width / dimensions[0], height / dimensions[1]];\n  const adjusted = getAdjusted(base, ratios, allowFloat);\n\n  const center = merc.ll([centerPixelX, centerPixelY], base);\n  const zoom = Math.max(minzoom, Math.min(maxzoom, adjusted));\n\n  return { center, zoom };\n}\n\n/**\n * The inverse of viewport: given center, zoom,\n * dimensions, and tileSize, return the bounds that will be produced\n * when you configure a map with those parameters.\n */\nexport function bounds(\n  center: LongitudeLatitude,\n  zoom: number,\n  dimensions: Dimensions,\n  tileSize: number = 256\n): Bounds {\n  if (!Array.isArray(center)) {\n    center = [center.lon, center.lat];\n  }\n\n  const merc = new SphericalMercator({\n    size: tileSize,\n  });\n  const px = merc.px(center, zoom);\n  const tl = merc.ll(\n    [px[0] - dimensions[0] / 2, px[1] - dimensions[1] / 2],\n    zoom\n  );\n  const br = merc.ll(\n    [px[0] + dimensions[0] / 2, px[1] + dimensions[1] / 2],\n    zoom\n  );\n  return [tl[0], br[1], br[0], tl[1]];\n}\n\nexport { Dimensions, LongitudeLatitude, Bounds, Position, Viewport };\n","import { useQuery } from '@tanstack/react-query';\nimport { useSelector } from 'react-redux';\n\nimport api from './apiClient';\n\nexport const useCommentsQuery = (projectId, page) => {\n  const token = useSelector((state) => state.auth.token);\n  const locale = useSelector((state) => state.preferences['locale']);\n\n  const getComments = ({ signal }) => {\n    return api(token, locale).get(`projects/${projectId}/comments/`, {\n      signal,\n      params: {\n        perPage: 5,\n        page,\n      },\n    });\n  };\n\n  return useQuery({\n    queryKey: ['questions-and-comments', projectId, page],\n    queryFn: getComments,\n    select: (data) => data.data,\n  });\n};\n\nexport const postProjectComment = (projectId, comment, token, locale = 'en') => {\n  return api(token, locale).post(`projects/${projectId}/comments/`, { message: comment });\n};\n\nexport const postTaskComment = (projectId, taskId, comment, token, locale = 'en') => {\n  return api(token, locale).post(`projects/${projectId}/comments/tasks/${taskId}/`, {\n    comment,\n  });\n};\n","export const getTaskContributors = (taskHistory, usernameToExclude) =>\n  taskHistory.reduce((acc, history) => {\n    if (!acc.includes(history.actionBy) && history.actionBy !== usernameToExclude) {\n      acc.push(history.actionBy);\n    }\n    return acc.sort();\n  }, []);\n","import { useEffect, useState } from 'react';\n\nimport { compareHistoryLastUpdate } from '../utils/sorting';\n\nconst useFirstTaskActionDate = (history) => {\n  const [firstDate, setFirstDate] = useState(null);\n  useEffect(() => {\n    if (history && history.taskHistory && history.taskHistory.length) {\n      const fistTaskAction =\n        history.taskHistory.sort(compareHistoryLastUpdate)[history.taskHistory.length - 1];\n      if (fistTaskAction.actionDate) setFirstDate(fistTaskAction.actionDate);\n    }\n  }, [history]);\n  return firstDate;\n};\n\nexport default useFirstTaskActionDate;\n","import { useCallback } from 'react';\n\nconst useGetContributors = (history) => {\n  const getContributors = useCallback(() => {\n    if (history && history.taskHistory && history.taskHistory.length) {\n      return history.taskHistory.reduce((usernames, item) => {\n        if (!usernames.includes(item.actionBy)) {\n          usernames.push(item.actionBy);\n        }\n        return usernames;\n      }, []);\n    } else {\n      return [];\n    }\n  }, [history]);\n  return getContributors;\n};\n\nexport default useGetContributors;\n","export function formatOverpassLink(users, bbox, download = false) {\n  let baseUrl = 'https://overpass-turbo.eu/map.html?Q=';\n  let format = 'json';\n  if (download) {\n    baseUrl = 'https://overpass-api.de/api/interpreter?data=';\n    format = 'xml';\n  }\n  const swneBbox = [bbox[1], bbox[0], bbox[3], bbox[2]];\n  const usersQuery = users.map((user) => formatUserQuery(user, swneBbox)).join('');\n  const query = `[out:${format}][timeout:250];(${usersQuery});out body;>;out skel qt;`;\n\n  return `${baseUrl}${encodeURIComponent(query)}`;\n}\n\nexport function formatUserQuery(user, bbox) {\n  return `node(user:\"${user}\")(${bbox});way(user:\"${user}\")(${bbox});relation(user:\"${user}\")(${bbox});`;\n}\n","import { useState, useMemo } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { viewport } from '@placemarkio/geo-viewport';\nimport { FormattedMessage } from 'react-intl';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport ReactPlaceholder from 'react-placeholder';\n\nimport messages from './messages';\nimport useFirstTaskActionDate from '../../hooks/UseFirstTaskActionDate';\nimport useGetContributors from '../../hooks/UseGetContributors';\nimport { RelativeTimeWithUnit } from '../../utils/formattedRelativeTime';\nimport { formatOSMChaLink } from '../../utils/osmchaLink';\nimport { htmlFromMarkdown, formatUserNamesToLink } from '../../utils/htmlFromMarkdown';\nimport { getTaskContributors } from '../../utils/getTaskContributors';\nimport { getIdUrl, sendJosmCommands } from '../../utils/openEditor';\nimport { formatOverpassLink } from '../../utils/overpassLink';\nimport { pushToLocalJSONAPI } from '../../network/genericJSONRequest';\nimport { UserAvatar } from '../user/avatar';\nimport { CloseIcon } from '../svgIcons';\nimport { ID_EDITOR_URL } from '../../config';\nimport { Button, CustomButton } from '../button';\nimport { Dropdown } from '../dropdown';\nimport { CommentInputField } from '../comments/commentInput';\nimport { useTaskDetail } from '../../api/projects';\nimport { Alert } from '../alert';\nimport { MessageStatus } from '../comments/status';\nimport { postTaskComment } from '../../api/questionsAndComments';\n\nimport './styles.scss';\n\nconst PostComment = ({ projectId, taskId, contributors, setCommentPayload }) => {\n  const token = useSelector((state) => state.auth.token);\n  const locale = useSelector((state) => state.preferences['locale']);\n  const [comment, setComment] = useState('');\n\n  const saveComment = () => {\n    if (comment) {\n      mutation.mutate({ message: comment });\n    }\n  };\n\n  const mutation = useMutation({\n    mutationFn: () => postTaskComment(projectId, taskId, comment, token, locale),\n    onSuccess: (res) => {\n      setCommentPayload(res.data);\n      setComment('');\n    },\n  });\n\n  return (\n    <div className=\"w-100 pt3 ph3-ns ph1 flex flex-column\">\n      <CommentInputField\n        comment={comment}\n        setComment={setComment}\n        enableHashtagPaste\n        contributors={contributors}\n        enableContributorsHashtag\n        isShowUserPicture\n        isShowTabNavs\n      />\n      <div className=\"ml-auto mb5 flex flex-column gap-1 items-end\">\n        <Button\n          onClick={() => saveComment()}\n          className=\"bg-red white f6\"\n          loading={mutation.isLoading}\n          disabled={!comment}\n        >\n          <FormattedMessage {...messages.comment} />\n        </Button>\n        <MessageStatus status={mutation.status} comment={comment} />\n      </div>\n    </div>\n  );\n};\n\nexport const TaskHistory = ({ projectId, taskId }) => {\n  const [historyOption, setHistoryOption] = useState('Comments');\n  const { data: commentPayload, status } = useTaskDetail(projectId, taskId);\n\n  const history = commentPayload?.taskHistory;\n  const taskComments = commentPayload?.taskHistory.filter((t) => t.action === 'COMMENT');\n  const taskChanges = commentPayload?.taskHistory.filter((t) => t.action !== 'COMMENT');\n\n  let shownHistory;\n  if (historyOption === 'Comments') {\n    shownHistory = taskComments;\n  } else if (historyOption === 'Activities') {\n    shownHistory = taskChanges;\n  } else {\n    shownHistory = history;\n  }\n\n  const taskHistoryOptions = [\n    { value: 'Comments', label: 'Comments' },\n    { value: 'Activities', label: 'Activities' },\n    { value: 'All', label: 'All' },\n  ];\n\n  const groupBySession = () => {\n    if (shownHistory.length === 0) return;\n    let res = [];\n    let username = shownHistory[0].actionBy;\n\n    shownHistory.forEach((history) => {\n      if (history.actionBy === username) {\n        res.length === 0 ? res.push([history]) : res[res.length - 1].push(history);\n      } else {\n        username = history.actionBy;\n        res.push([history]);\n      }\n    });\n    return res;\n  };\n\n  if (status === 'loading') {\n    return (\n      <div className=\"ma4\">\n        <ReactPlaceholder type=\"media\" showLoadingAnimation delay={300} />\n      </div>\n    );\n  }\n\n  if (status === 'error') {\n    return (\n      <div className=\"ma4 gray\">\n        <Alert type=\"error\">\n          <FormattedMessage {...messages.taskDetailFetchError} />\n        </Alert>\n      </div>\n    );\n  }\n\n  if (history.length === 0) {\n    return (\n      <div className=\"ma4 dark-gray tc\">\n        <FormattedMessage {...messages.noActivitiesToDisplay} />\n      </div>\n    );\n  }\n  return (\n    <>\n      <div className=\"ml3 pl1 pv2 blue-dark flex flex-wrap\" aria-label=\"view task history options\">\n        {taskHistoryOptions.map((option) => (\n          <label className=\"pt1 pr3 fl w-15\" key={option.value}>\n            <input\n              value={option.value}\n              checked={historyOption === option.value}\n              onChange={() => setHistoryOption(option.value)}\n              type=\"radio\"\n              className={`radio-input input-reset pointer v-mid dib h2 w2 mr2 br-100 ba b--blue-light`}\n            />\n            <FormattedMessage {...messages[`taskHistory${option.label}`]} />\n          </label>\n        ))}\n      </div>\n      <div className=\"timeline-container\">\n        {/* This can handle displaying a messaage for the no comments section \n        because no activities will be handled earlier */}\n        {shownHistory.length === 0 ? (\n          <div className=\"ma4 dark-gray tc\">\n            <FormattedMessage {...messages.noCommentsYet} />\n          </div>\n        ) : (\n          groupBySession()?.map((grouped, n) => (\n            <div\n              key={grouped[0].historyId}\n              className={`grouped-ctr session ph3 mt4 bb b--grey-light`}\n            >\n              {grouped.map((history, n) => (\n                <div className=\"flex activity relative\" key={history.historyId}>\n                  <div className=\"flex justify-center\">\n                    {n === 0 ? (\n                      <UserAvatar\n                        username={grouped[0].actionBy}\n                        picture={grouped[0].pictureUrl}\n                        colorClasses=\"white bg-blue-grey z-1 relative\"\n                      />\n                    ) : (\n                      <div className=\"oval z-1\" />\n                    )}\n                  </div>\n                  <div className=\"mh2 f6 blue-dark\" style={{ marginTop: '-2px' }}>\n                    <p className=\"ma0 blue-grey\">\n                      {n === 0 && (\n                        <div className=\"mt2 dib\">\n                          <a\n                            href={'/users/' + history.actionBy}\n                            className=\"blue-dark b no-underline underline-hover\"\n                          >\n                            {history.actionBy}\n                          </a>\n                          &nbsp;\n                        </div>\n                      )}\n                      {getTaskActionMessage(history.action, history.actionText)}{' '}\n                      <RelativeTimeWithUnit date={history.actionDate} />\n                    </p>\n                    {history.action === 'COMMENT' && (\n                      <div\n                        className=\"ma0 comment\"\n                        dangerouslySetInnerHTML={htmlFromMarkdown(\n                          formatUserNamesToLink(history.actionText),\n                        )}\n                      />\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          ))\n        )}\n      </div>\n    </>\n  );\n};\n\nexport const TaskDataDropdown = ({ history, changesetComment, bbox }: Object) => {\n  const firstDate = useFirstTaskActionDate(history);\n  const contributors = useGetContributors(history);\n  const osmchaLink = useMemo(\n    () =>\n      formatOSMChaLink({\n        aoiBBOX: bbox,\n        created: firstDate,\n        usernames: contributors(),\n        changesetComment: changesetComment,\n      }),\n    [bbox, firstDate, contributors, changesetComment],\n  );\n\n  if (history?.taskHistory?.length > 0) {\n    return (\n      <Dropdown\n        value={null}\n        options={[\n          { label: <FormattedMessage {...messages.taskOnOSMCha} />, href: osmchaLink },\n          {\n            label: <FormattedMessage {...messages.overpassVisualization} />,\n            href: formatOverpassLink(contributors(), bbox),\n          },\n          {\n            label: <FormattedMessage {...messages.overpassDownload} />,\n            href: formatOverpassLink(contributors(), bbox, true),\n          },\n        ]}\n        display={<FormattedMessage {...messages.taskData} />}\n        className=\"blue-dark bg-white v-mid pv2 ph2 ba b--grey-light link\"\n      />\n    );\n  } else {\n    return <></>;\n  }\n};\n\nexport const TaskActivity = ({\n  taskId,\n  status,\n  project,\n  bbox,\n  close,\n  updateActivities,\n  userCanValidate,\n}: Object) => {\n  const token = useSelector((state) => state.auth.token);\n  const userDetails = useSelector((state) => state.auth.userDetails);\n  // use it to hide the reset task action button\n  const [resetSuccess, setResetSuccess] = useState(false);\n  const queryClient = useQueryClient();\n\n  const { data: commentPayload } = useTaskDetail(project.projectId, taskId, true);\n\n  const uniqueContributors =\n    commentPayload?.taskHistory &&\n    getTaskContributors(commentPayload.taskHistory, userDetails.username);\n\n  const setCommentPayload = (payload) => {\n    queryClient.setQueryData(['task-detail', project.projectId, taskId], { data: payload });\n  };\n\n  const resetTask = () => {\n    pushToLocalJSONAPI(\n      `projects/${project.projectId}/tasks/actions/undo-last-action/${taskId}/`,\n      {},\n      token,\n    ).then((res) => {\n      setCommentPayload(res);\n      if (updateActivities !== undefined) updateActivities(project.projectId);\n      setResetSuccess(true);\n    });\n  };\n\n  return (\n    <div className=\"h-100 bg-white\">\n      <div className=\"w-100 pt2 pb3 pl4 pr2 blue-dark bg-tan relative\">\n        <CloseIcon className=\"h1 w1 fr pointer\" onClick={() => close()} />\n        <div className=\"f5 pa0 ma0 cf\">\n          <div className=\"w-40-l w-100 fl pt2\">\n            <p className=\"ttu f3 pa0 ma0 barlow-condensed b mb2\">\n              <FormattedMessage {...messages.taskActivity} values={{ n: taskId }} />\n            </p>\n            {project.projectInfo?.name ? (\n              <span>\n                <b>#{project.projectId}</b>: {project.projectInfo.name}\n              </span>\n            ) : (\n              <FormattedMessage {...messages.projectId} values={{ id: project.projectId }} />\n            )}\n          </div>\n          <div className=\"w-60-l w-100 fl tr pr3 pt2\">\n            {userCanValidate && (\n              <div className=\"ph1 dib\">\n                {['VALIDATED', 'BADIMAGERY'].includes(status) && (\n                  <EditorDropdown bbox={bbox} taskId={taskId} project={project} />\n                )}\n              </div>\n            )}\n            <div className=\"ph1 dib\">\n              {bbox && project.changesetComment && (\n                <TaskDataDropdown\n                  history={commentPayload}\n                  bbox={bbox}\n                  changesetComment={project.changesetComment}\n                />\n              )}\n            </div>\n          </div>\n          <div className=\"fl tr w-100 pt2 pr3\">\n            {userCanValidate && ['VALIDATED', 'BADIMAGERY'].includes(status) && !resetSuccess && (\n              <UndoLastTaskAction resetFn={resetTask} status={status} />\n            )}\n          </div>\n        </div>\n      </div>\n      <div className=\"blue-dark overflow-y-auto vh-50\">\n        <TaskHistory projectId={project.projectId} taskId={taskId} />\n      </div>\n      <PostComment\n        projectId={project.projectId}\n        taskId={taskId}\n        setCommentPayload={setCommentPayload}\n        contributors={uniqueContributors}\n      />\n    </div>\n  );\n};\n\nfunction EditorDropdown({ project, taskId, bbox }: Object) {\n  const loadTaskOnEditor = (arr) => {\n    if (arr[0].value === 'ID') {\n      let windowObjectReference = window.open('', `iD-${project.projectId}-${taskId}`);\n      const { center, zoom } = viewport(bbox, [window.innerWidth, window.innerHeight]);\n      windowObjectReference.location.href = getIdUrl(\n        project,\n        center,\n        zoom,\n        [taskId],\n        ID_EDITOR_URL,\n      );\n    }\n    if (arr[0].value === 'JOSM') {\n      sendJosmCommands(project, {}, [taskId], [window.innerWidth, window.innerHeight], bbox);\n    }\n  };\n\n  return (\n    <Dropdown\n      options={[\n        { label: 'iD Editor', value: 'ID' },\n        { label: 'JOSM', value: 'JOSM' },\n      ]}\n      value={[]}\n      display={<FormattedMessage {...messages.openEditor} />}\n      className=\"bg-white b--grey-light ba pa2 dib v-mid\"\n      onChange={loadTaskOnEditor}\n    />\n  );\n}\n\nfunction UndoLastTaskAction({ status, resetFn }: Object) {\n  const [showConfirmation, setShowConfirmation] = useState(false);\n\n  return (\n    <>\n      {showConfirmation ? (\n        <>\n          <span className=\"dib pb2\">\n            <FormattedMessage {...messages[`confirmRevert${status}`]} />\n            <span className=\"fw6\">\n              {' '}\n              <FormattedMessage {...messages.proceed} />\n            </span>\n          </span>\n          <CustomButton\n            className=\"mh1 dib link ph3 f6 pv2 bg-white blue-dark ba b--white\"\n            onClick={() => setShowConfirmation(false)}\n          >\n            <FormattedMessage {...messages.no} />\n          </CustomButton>\n          <CustomButton\n            className=\"mh1 dib link ph3 f6 pv2 bg-red white ba b--red\"\n            onClick={() => {\n              resetFn();\n              setShowConfirmation(false);\n            }}\n          >\n            <FormattedMessage {...messages.yes} />\n          </CustomButton>\n        </>\n      ) : (\n        <CustomButton\n          className=\"mh1 link ph3 f6 pv2 bg-red white ba b--red\"\n          onClick={() => setShowConfirmation(true)}\n        >\n          <FormattedMessage {...messages[`revert${status}`]} />\n        </CustomButton>\n      )}\n    </>\n  );\n}\n\nconst getTaskActionMessage = (action, actionText) => {\n  let message = '';\n  switch (action) {\n    case 'COMMENT':\n      message = messages.taskHistoryComment;\n      break;\n    case 'LOCKED_FOR_MAPPING':\n      message = messages.taskHistoryLockedMapping;\n      break;\n    case 'LOCKED_FOR_VALIDATION':\n      message = messages.taskHistoryLockedValidation;\n      break;\n    case 'AUTO_UNLOCKED_FOR_MAPPING':\n      message = messages.taskHistoryAutoUnlockedMapping;\n      break;\n    case 'AUTO_UNLOCKED_FOR_VALIDATION':\n      message = messages.taskHistoryAutoUnlockedValidation;\n      break;\n    case 'EXTENDED_FOR_MAPPING':\n      message = messages.taskHistoryExtendedForMapping;\n      break;\n    case 'EXTENDED_FOR_VALIDATION':\n      message = messages.taskHistoryExtendedForValidation;\n      break;\n    case 'STATE_CHANGE':\n      switch (actionText) {\n        case 'BADIMAGERY':\n          message = messages.taskHistoryBadImagery;\n          break;\n        case 'MAPPED':\n          message = messages.taskHistoryMapped;\n          break;\n        case 'VALIDATED':\n          message = messages.taskHistoryValidated;\n          break;\n\n        case 'INVALIDATED':\n          message = messages.taskHistoryInvalidated;\n          break;\n        case 'SPLIT':\n          message = messages.taskHistorySplit;\n          break;\n        case 'READY':\n          message = messages.taskHistoryReady;\n          break;\n        default:\n          break;\n      }\n      break;\n    default:\n      break;\n  }\n  if (message) {\n    return <FormattedMessage {...message} />;\n  }\n};\n","import React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport { LockIcon } from '../svgIcons';\nimport messages from './messages';\n\nexport const ProjectVisibilityBox = ({ className }: Object) => {\n  return (\n    <div className={`tc br1 f7 ttu ba b--red red ${className}`}>\n      <LockIcon title=\"lock\" className=\"red v-mid mr1\" style={{ height: '13px', width: '13px' }} />\n      <FormattedMessage {...messages.private} />\n    </div>\n  );\n};\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\nimport { PriorityBox } from '../projectCard/priorityBox';\nimport { translateCountry } from '../../utils/countries';\nimport { ProjectVisibilityBox } from './visibilityBox';\nimport { ProjectStatusBox } from './statusBox';\nimport { EditButton } from '../button';\nimport { useEditProjectAllowed } from '../../hooks/UsePermissions';\n\nexport function HeaderLine({ author, projectId, priority, showEditLink, organisation }: Object) {\n  const projectIdLink = (\n    <Link to={`/projects/${projectId}`} className=\"no-underline pointer\">\n      <span className=\"blue-light\">#{projectId}</span>\n    </Link>\n  );\n  return (\n    <div className=\"flex flex-column flex-row-ns justify-start justify-between-ns items-start items-center-ns flex-wrap\">\n      <div className=\"pv2\">\n        <span className=\"blue-light\">{projectIdLink}</span>\n        {organisation ? <span className=\"blue-dark\"> | {organisation}</span> : null}\n      </div>\n      <div className=\"tr\">\n        {showEditLink && (\n          <EditButton url={`/manage/projects/${projectId}`} className=\"mh0 mv0\">\n            <FormattedMessage {...messages.editProject} />\n          </EditButton>\n        )}\n        {priority && (\n          <div className=\"mw4 dib\">\n            <PriorityBox priority={priority} extraClasses={'pv2 ph3 ml2'} showIcon />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport const ProjectHeader = ({ project, showEditLink }: Object) => {\n  const locale = useSelector((state) => state.preferences.locale);\n  const [userCanEditProject] = useEditProjectAllowed(project);\n\n  return (\n    <>\n      <HeaderLine\n        author={project.author}\n        projectId={project.projectId}\n        priority={project.projectPriority}\n        organisation={project.organisationName}\n        showEditLink={showEditLink && userCanEditProject}\n      />\n      <div>\n        <h3\n          className=\"f2 fw5 mt3 mt2-ns mb3 ttu barlow-condensed blue-dark dib mr3\"\n          lang={project.projectInfo.locale}\n        >\n          {project.projectInfo && project.projectInfo.name}\n        </h3>\n        {project.private && <ProjectVisibilityBox className=\"pv2 ph3 mb3 mr3 v-mid dib\" />}\n        {['DRAFT', 'ARCHIVED'].includes(project.status) && (\n          <ProjectStatusBox status={project.status} className=\"pv2 ph3 mb3 v-mid dib mr3\" />\n        )}\n      </div>\n      <TagLine\n        campaigns={project.campaigns}\n        interests={project.interests}\n        countries={\n          locale.includes('en') ? project.countryTag : translateCountry(project.countryTag, locale)\n        }\n      />\n    </>\n  );\n};\n\nexport function TagLine({ campaigns = [], countries = [], interests = [] }: Object) {\n  const locale = useSelector((state) => state.preferences.locale);\n  const formattedCampaigns = campaigns.map((campaign) => campaign.name).join(', ');\n  const formattedCountries = locale.includes('en') ? countries.join(', ') : countries;\n  const formattedInterests = interests.map((interest) => interest.name).join(', ');\n  // Remove empty formatted strings\n  const tags = [formattedCampaigns, formattedCountries, formattedInterests].filter((n) => n);\n\n  return (\n    <span className=\"blue-light\">\n      {tags.map((tag, index) => (\n        <span key={tag}>\n          {index !== 0 && <span className=\"ph2\">&#183;</span>}\n          {tag}\n        </span>\n      ))}\n    </span>\n  );\n}\n","import { featureCollection } from '@turf/helpers';\nimport bbox from '@turf/bbox';\nimport { viewport } from '@placemarkio/geo-viewport';\n\nexport function getCentroidAndZoomFromSelectedTasks(tasks, selectedTaskIds, windowSize) {\n  return viewport(getSelectedTasksBBox(tasks, selectedTaskIds), windowSize);\n}\n\nexport function getSelectedTasksBBox(tasks, selectedTaskIds) {\n  const selectedTasksGeom = selectedTaskIds\n    ? featureCollection(\n        tasks.features.filter((task) => selectedTaskIds.includes(task.properties.taskId)),\n      )\n    : tasks;\n  return bbox(selectedTasksGeom);\n}\n","import { API_URL, ID_EDITOR_URL, POTLATCH2_EDITOR_URL } from '../config';\nimport { getCentroidAndZoomFromSelectedTasks, getSelectedTasksBBox } from './tasksGeometry';\n\nexport function openEditor(\n  editor,\n  project,\n  tasks,\n  selectedTasks,\n  windowSize,\n  windowObjectReference,\n) {\n  if (editor === 'JOSM') {\n    sendJosmCommands(project, tasks, selectedTasks, windowSize);\n    return '?editor=JOSM';\n  }\n  const { center, zoom } = getCentroidAndZoomFromSelectedTasks(tasks, selectedTasks, windowSize);\n  if (['ID', 'RAPID'].includes(editor)) {\n    return getIdUrl(project, center, zoom, selectedTasks, '?editor=' + editor);\n  }\n  if (windowObjectReference == null || windowObjectReference.closed) {\n    windowObjectReference = window.open('', `iD-${project}-${selectedTasks}`);\n  }\n  if (editor === 'POTLATCH_2') {\n    windowObjectReference.location.href = getPotlatch2Url(center, zoom);\n    return '?editor=POTLATCH_2';\n  }\n  if (editor === 'FIELD_PAPERS') {\n    windowObjectReference.location.href = getFieldPapersUrl(center, zoom);\n    return '?editor=FIELD_PAPERS';\n  }\n  if (editor === 'CUSTOM') {\n    const customUrl = project.customEditor.url;\n    windowObjectReference.location.href = getIdUrl(project, center, zoom, selectedTasks, customUrl);\n    return '?editor=CUSTOM';\n  }\n}\n\nexport function formatImageryUrl(imageryURL) {\n  // url is supposed to look like tms[22]:http://hiu...\n  if (imageryURL) {\n    return imageryURL.substring(imageryURL.indexOf('http')).replace('zoom', 'z');\n  }\n}\n\nexport function getTaskGpxUrl(projectId, selectedTasks) {\n  return new URL(\n    `projects/${projectId}/tasks/queries/gpx/?tasks=${selectedTasks.join(',')}`,\n    API_URL,\n  ).href;\n}\n\nexport function getTaskXmlUrl(projectId, selectedTasks) {\n  return new URL(\n    `projects/${projectId}/tasks/queries/xml/?tasks=${selectedTasks.join(',')}`,\n    API_URL,\n  );\n}\n\nexport function getFieldPapersUrl(centroid, zoomLevel) {\n  return `http://fieldpapers.org/compose#${[\n    zoomLevel,\n    roundToDecimals(centroid[1], 5),\n    roundToDecimals(centroid[0], 5),\n  ].join('/')}`;\n}\n\nexport function getPotlatch2Url(centroid, zoomLevel) {\n  return `${POTLATCH2_EDITOR_URL}#map=${[\n    zoomLevel,\n    roundToDecimals(centroid[1], 5),\n    roundToDecimals(centroid[0], 5),\n  ].join('/')}`;\n}\n\nexport function getIdUrl(project, centroid, zoomLevel, selectedTasks, customUrl) {\n  const base = customUrl ? formatCustomUrl(customUrl) : `${ID_EDITOR_URL}`;\n  let url = base + '#map=' + [zoomLevel, centroid[1], centroid[0]].join('/');\n  // add the extraParams\n  if (project.extraIdParams) {\n    let extraParams = formatExtraParams(project.extraIdParams);\n    if (!extraParams.startsWith('&')) extraParams = `&${extraParams}`;\n    url += extraParams;\n  }\n  // the other URL params are only needed by external iD editors\n  if (!['?editor=ID', '?editor=RAPID'].includes(customUrl)) {\n    if (project.changesetComment) {\n      url += '&comment=' + encodeURIComponent(project.changesetComment);\n    }\n    if (project.imagery) {\n      if (project.imagery.includes('http')) {\n        url += '&background=custom:' + encodeURIComponent(formatImageryUrl(project.imagery));\n      } else {\n        url += '&background=' + encodeURIComponent(formatImageryUrl(project.imagery));\n      }\n    }\n    // add GPX\n    if (project.projectId && selectedTasks) {\n      url += '&gpx=' + encodeURIComponent(getTaskGpxUrl(project.projectId, selectedTasks));\n    }\n    if (project.idPresets) {\n      url += '&presets=' + encodeURIComponent(project.idPresets.join(','));\n    }\n  }\n  return url;\n}\n\nexport const formatExtraParams = (values) => {\n  let extraParams = '';\n  values\n    .split('&')\n    .filter((term) => term)\n    .forEach((term) => {\n      const [key, value] = term.split('=');\n      extraParams += `&${key}=${encodeURIComponent(value)}`;\n    });\n  return extraParams;\n};\n\nexport const sendJosmCommands = async (project, tasks, selectedTasks, windowSize, taskBbox) => {\n  await loadTasksBoundaries(project, selectedTasks);\n  await loadImageryonJosm(project);\n  await selectedTasks.map(\n    async (task, n) =>\n      await loadOsmDataToTasks(\n        project,\n        taskBbox ? taskBbox : getSelectedTasksBBox(tasks, [task]),\n        n === 0 ? true : false,\n      ),\n  );\n  return true;\n};\n\n// creates a new layer on JOSM and then add the tasks boundaries\nfunction loadTasksBoundaries(project, selectedTasks) {\n  const layerName = `Boundary for task${selectedTasks.length > 1 ? 's:' : ':'} ${selectedTasks.join(\n    ',',\n  )} of TM Project #${project.projectId} - Do not edit or upload`;\n  const tmTaskLayerParams = {\n    new_layer: true,\n    layer_name: layerName,\n    layer_locked: true,\n    download_policy: \"never\",\n    upload_policy: \"never\",\n    url: getTaskXmlUrl(project.projectId, selectedTasks).href,\n  };\n\n  return callJosmRemoteControl(formatJosmUrl('import', tmTaskLayerParams));\n}\n\nexport function getImageryInfo(url) {\n  const type = url.toLowerCase().substr(0, 3) === 'wms' ? 'wms' : 'tms';\n  const zoom = url.substr(url.indexOf('[') + 1, url.indexOf(']') - url.indexOf('[') - 1);\n  const [minZoom, maxZoom] = zoom.length\n    ? zoom.indexOf(':') !== -1\n      ? zoom.split(':')\n      : [null, zoom]\n    : [null, null];\n  return [\n    type,\n    minZoom !== '' && minZoom !== null ? Number(minZoom) : null,\n    maxZoom !== '' && maxZoom !== null ? Number(maxZoom) : null,\n  ];\n}\n\nfunction loadImageryonJosm(project) {\n  if (project.imagery) {\n    if (project.imagery.includes('http')) {\n      const [type, minZoom, maxZoom] = getImageryInfo(project.imagery);\n      const imageryParams = {\n        title: project.imagery,\n        type: type,\n      };\n      if (minZoom) imageryParams.min_zoom = minZoom;\n      if (maxZoom) imageryParams.max_zoom = maxZoom;\n      imageryParams.url = project.imagery.substr(project.imagery.indexOf('http'));\n\n      return callJosmRemoteControl(formatJosmUrl('imagery', imageryParams));\n    } else {\n      return callJosmRemoteControl(formatJosmUrl('imagery', { id: project.imagery }));\n    }\n  }\n}\n\nfunction loadOsmDataToTasks(project, bbox, newLayer) {\n  const loadAndZoomParams = {\n    left: bbox[0],\n    bottom: bbox[1],\n    right: bbox[2],\n    top: bbox[3],\n    changeset_comment: project.changesetComment,\n    changeset_source: project.imagery ? project.imagery : '',\n    new_layer: newLayer,\n    layer_name: 'OSM Data',\n  };\n\n  return callJosmRemoteControl(formatJosmUrl('load_and_zoom', loadAndZoomParams));\n}\n\nexport function formatJosmUrl(endpoint, params) {\n  return new URL(formatUrlParams(params), `http://127.0.0.1:8111/${endpoint}`);\n}\n\nexport function formatCustomUrl(url) {\n  return url.includes('?') ? url : `${url}?`;\n}\n\nfunction roundToDecimals(input, decimals) {\n  const p = Math.pow(10, decimals);\n  return Math.round(input * p) / p;\n}\n\nexport function formatUrlParams(params) {\n  const urlParams = Object.keys(params)\n    .map((key) => `${key}=${encodeURIComponent(params[key])}`)\n    .join('&');\n  return `?${urlParams}`;\n}\n\nlet safariWindowReference = null;\nconst callJosmRemoteControl = function (uri) {\n  // Safari won't send AJAX commands to the default (insecure) JOSM port when\n  // on a secure site, and the secure JOSM port uses a self-signed certificate\n  // that requires the user to jump through a bunch of hoops to trust before\n  // communication can proceed. So for Safari only, fall back to sending JOSM\n  // requests via the opening of a separate window instead of AJAX.\n  // Source: https://github.com/osmlab/maproulette3\n  if (window.safari) {\n    return new Promise((resolve, reject) => {\n      if (safariWindowReference && !safariWindowReference.closed) {\n        safariWindowReference.close();\n      }\n\n      safariWindowReference = window.open(uri);\n\n      // Close the window after 1 second and resolve the promise\n      setTimeout(() => {\n        if (safariWindowReference && !safariWindowReference.closed) {\n          safariWindowReference.close();\n        }\n        resolve(true);\n      }, 1000);\n    });\n  }\n\n  return fetch(uri)\n    .then((response) => response.status === 200)\n    .catch((error) => {\n      console.log(error);\n      return false;\n    });\n};\n","import React from 'react';\nimport { useIntl } from 'react-intl';\n\nimport messages from './messages';\nimport { RoadIcon, HomeIcon, WavesIcon, TaskIcon, AsteriskIcon } from './svgIcons';\n\nexport const TITLED_ICONS = [\n  { Icon: RoadIcon, title: 'roads', value: 'ROADS' },\n  { Icon: HomeIcon, title: 'buildings', value: 'BUILDINGS' },\n  { Icon: WavesIcon, title: 'waterways', value: 'WATERWAYS' },\n  { Icon: TaskIcon, title: 'landUse', value: 'LAND_USE' },\n  { Icon: AsteriskIcon, title: 'other', value: 'OTHER' },\n];\n\nexport function MappingTypes({ types = [], colorClass }: Object) {\n  const intl = useIntl();\n  return (\n    <>\n      {TITLED_ICONS.map((Element, k) => (\n        <span title={intl.formatMessage(messages[Element.title])} key={k}>\n          <Element.Icon\n            className={`ml1 mr3 ${\n              types && types.includes(Element.value) ? colorClass : 'grey-light'\n            }`}\n            height=\"23\"\n          />\n        </span>\n      ))}\n    </>\n  );\n}\n","import { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { fetchLocalJSONAPI } from '../network/genericJSONRequest';\n\nexport const useGetLockedTasks = (taskId) => {\n  const lockedTasks = useSelector((state) => state.lockedTasks);\n  return lockedTasks;\n};\n\nexport const useFetchLockedTasks = () => {\n  const token = useSelector((state) => state.auth.token);\n  const dispatch = useDispatch();\n  const memoCallback = useCallback(async () => {\n    if (token) {\n      const lockedTasks = await fetchLocalJSONAPI('users/queries/tasks/locked/', token);\n      dispatch({ type: 'SET_LOCKED_TASKS', tasks: lockedTasks.lockedTasks || [] });\n      dispatch({ type: 'SET_PROJECT', project: lockedTasks.projectId || null });\n      dispatch({ type: 'SET_TASKS_STATUS', status: lockedTasks.taskStatus || null });\n    }\n  }, [token, dispatch]);\n  return memoCallback;\n};\n\nexport const useClearLockedTasks = () => {\n  const dispatch = useDispatch();\n  const memoCallback = useCallback(() => {\n    dispatch({ type: 'SET_LOCKED_TASKS', tasks: [] });\n    dispatch({ type: 'SET_PROJECT', project: null });\n    dispatch({ type: 'SET_TASKS_STATUS', status: null });\n  }, [dispatch]);\n  return memoCallback;\n};\n","import React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\nimport { CustomButton } from '../button';\nimport { ExternalLinkIcon } from '../svgIcons';\nimport { formatOSMChaLink } from '../../utils/osmchaLink';\n\nexport const OSMChaButton = ({ project, className, compact = false, children }: Object) => (\n  <a href={formatOSMChaLink(project)} target=\"_blank\" rel=\"noopener noreferrer\">\n    {children || (\n      <CustomButton className={className}>\n        {compact ? (\n          <FormattedMessage {...messages.changesets} />\n        ) : (\n          <FormattedMessage {...messages.viewInOsmcha} />\n        )}\n        <ExternalLinkIcon className={compact ? 'pl1' : 'pl2'} />\n      </CustomButton>\n    )}\n  </a>\n);\n","import React, { useLayoutEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport bbox from '@turf/bbox';\nimport mapboxgl from 'mapbox-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport MapboxLanguage from '@mapbox/mapbox-gl-language';\nimport { FormattedMessage, useIntl } from 'react-intl';\n\nimport WebglUnsupported from '../webglUnsupported';\nimport messages from './messages';\nimport { MAPBOX_TOKEN, TASK_COLOURS, MAP_STYLE, MAPBOX_RTL_PLUGIN_URL } from '../../config';\nimport lock from '../../assets/img/lock.png';\nimport redlock from '../../assets/img/red-lock.png';\n\nlet lockIcon = new Image(17, 20);\nlockIcon.src = lock;\n\nlet redlockIcon = new Image(17, 20);\nredlockIcon.src = redlock;\n\nmapboxgl.accessToken = MAPBOX_TOKEN;\ntry {\n  mapboxgl.setRTLTextPlugin(MAPBOX_RTL_PLUGIN_URL);\n} catch {\n  console.log('RTLTextPlugin is loaded');\n}\n\nexport const TasksMap = ({\n  className,\n  mapResults,\n  taskBordersMap,\n  priorityAreas,\n  taskBordersOnly,\n  taskCentroidMap,\n  disableScrollZoom,\n  selectTask,\n  zoomedTaskId,\n  navigate,\n  animateZoom = true,\n  showTaskIds = false,\n  selected: selectedOnMap,\n}) => {\n  const intl = useIntl();\n  const mapRef = React.createRef();\n  const locale = useSelector((state) => state.preferences['locale']);\n  const authDetails = useSelector((state) => state.auth.userDetails);\n  const [hoveredTaskId, setHoveredTaskId] = useState(null);\n\n  const [map, setMapObj] = useState(null);\n\n  useLayoutEffect(() => {\n    /* May be able to refactor this to just take\n     * advantage of useRef instead inside other useLayoutEffect() */\n    /* I referenced this initially https://philipprost.com/how-to-use-mapbox-gl-with-react-functional-component/ */\n    mapboxgl.supported() &&\n      setMapObj(\n        new mapboxgl.Map({\n          container: mapRef.current,\n          style: MAP_STYLE,\n          center: [0, 0],\n          zoom: 1,\n          attributionControl: false,\n        })\n          .addControl(new mapboxgl.AttributionControl({ compact: false }))\n          .addControl(new MapboxLanguage({ defaultLanguage: locale.substr(0, 2) || 'en' })),\n      );\n\n    return () => {\n      map && map.remove();\n    };\n    // eslint-disable-next-line\n  }, []);\n\n  useLayoutEffect(() => {\n    // should run only when triggered from tasks list\n    if (typeof zoomedTaskId === 'number') {\n      const taskGeom = mapResults.features.filter(\n        (task) => task.properties.taskId === zoomedTaskId,\n      )[0].geometry;\n      map.fitBounds(bbox(taskGeom), { padding: 40, maxZoom: 22, animate: true });\n    }\n  }, [zoomedTaskId, map, mapResults]);\n\n  useLayoutEffect(() => {\n    const onSelectTaskClick = (e) => {\n      const task = e.features?.[0].properties;\n      selectTask?.(task.taskId, task.taskStatus);\n    };\n\n    const countryMapLayers = [\n      taskBordersMap && 'outerhull-tasks-border',\n      taskBordersMap && 'point-tasks-centroid',\n      taskBordersMap && 'point-tasks-centroid-inner',\n    ];\n    const taskMapLayers = [\n      'tasks-icon',\n      'tasks-fill',\n      'selected-tasks-border',\n      'unselected-tasks-border',\n      taskBordersMap && 'outerhull-tasks-border',\n    ];\n\n    const updateTMZoom = () => {\n      // fit bounds to last mapped/validated task(s), if exists\n      // otherwise fit bounds to all tasks\n      if (zoomedTaskId?.length > 0) {\n        const lastLockedTasks = mapResults.features.filter((task) =>\n          zoomedTaskId.includes(task.properties.taskId),\n        );\n\n        const lastLockedTasksGeom = lastLockedTasks.reduce(\n          (acc, curr) => {\n            const geom = curr.geometry;\n            return {\n              type: 'MultiPolygon',\n              coordinates: [...acc.coordinates, ...geom.coordinates],\n            };\n          },\n          { type: 'MultiPolygon', coordinates: [] },\n        );\n\n        const screenWidth = window.innerWidth;\n        map.fitBounds(bbox(lastLockedTasksGeom), {\n          padding: screenWidth / 8,\n          animate: false,\n        });\n      } else if (!taskBordersOnly) {\n        map.fitBounds(bbox(mapResults), { padding: 40, animate: animateZoom });\n      } else {\n        map.fitBounds(bbox(mapResults), { padding: 220, maxZoom: 6.5, animate: animateZoom });\n      }\n    };\n\n    const mapboxLayerDefn = () => {\n      map.once('load', () => {\n        map.resize();\n      });\n      if (map.getSource('tasks') === undefined) {\n        map.addImage('lock', lockIcon, { width: 17, height: 20, data: lockIcon });\n        map.addImage('redlock', redlockIcon, { width: 30, height: 30, data: redlockIcon });\n\n        map.addSource('tasks', {\n          type: 'geojson',\n          data: mapResults,\n        });\n\n        map.addControl(new mapboxgl.NavigationControl());\n        if (disableScrollZoom) {\n          // disable map zoom when using scroll\n          map.scrollZoom.disable();\n        } else {\n          map.scrollZoom.enable();\n        }\n        const locked = [\n          'any',\n          ['==', ['to-string', ['get', 'taskStatus']], 'LOCKED_FOR_MAPPING'],\n          ['==', ['to-string', ['get', 'taskStatus']], 'LOCKED_FOR_VALIDATION'],\n        ];\n\n        let taskStatusCondition = ['case'];\n\n        if (authDetails.id !== undefined) {\n          const all_condition = ['all', locked, ['==', ['get', 'lockedBy'], authDetails.id]];\n          taskStatusCondition = [...taskStatusCondition, ...[all_condition, 'redlock']];\n        }\n        taskStatusCondition = [...taskStatusCondition, ...[locked, 'lock', '']];\n\n        map.addLayer({\n          id: 'tasks-icon',\n          type: 'symbol',\n          source: 'tasks',\n          layout: {\n            'icon-image': taskStatusCondition,\n            'icon-size': 0.7,\n          },\n        });\n\n        map.addLayer(\n          {\n            id: 'tasks-fill',\n            type: 'fill',\n            source: 'tasks',\n            paint: {\n              'fill-color': [\n                'match',\n                ['get', 'taskStatus'],\n                'READY',\n                TASK_COLOURS.READY,\n                'LOCKED_FOR_MAPPING',\n                TASK_COLOURS.LOCKED_FOR_MAPPING,\n                'MAPPED',\n                TASK_COLOURS.MAPPED,\n                'LOCKED_FOR_VALIDATION',\n                TASK_COLOURS.LOCKED_FOR_VALIDATION,\n                'VALIDATED',\n                TASK_COLOURS.VALIDATED,\n                'INVALIDATED',\n                TASK_COLOURS.INVALIDATED,\n                'BADIMAGERY',\n                TASK_COLOURS.BADIMAGERY,\n                'rgba(0,0,0,0)',\n              ],\n              'fill-opacity': 0.8,\n            },\n          },\n          'tasks-icon',\n        );\n\n        map.addLayer({\n          id: 'selected-tasks-border',\n          type: 'line',\n          source: 'tasks',\n          paint: {\n            'line-color': '#2c3038',\n            'line-width': 2,\n          },\n          filter:\n            selectedOnMap === undefined || selectedOnMap.length === 0\n              ? ['in', 'taskId', '']\n              : ['in', 'taskId'].concat(selectedOnMap),\n        });\n\n        map.addLayer(\n          {\n            id: 'unselected-tasks-border',\n            type: 'line',\n            source: 'tasks',\n            paint: {\n              'line-color': '#999db6',\n              'line-width': 1,\n            },\n          },\n          'selected-tasks-border',\n        );\n      }\n\n      if (map.getSource('tasks-outline') === undefined && taskBordersMap) {\n        map.addSource('tasks-outline', {\n          type: 'geojson',\n          data: taskBordersMap,\n        });\n\n        map.addLayer({\n          id: 'outerhull-tasks-border',\n          type: 'line',\n          source: 'tasks-outline',\n          paint: {\n            'line-color': '#68707f',\n            'line-width': {\n              base: 0.3,\n              stops: [\n                [1, 4],\n                [10, 1],\n                [12, 0.3],\n              ],\n            },\n          },\n          layout: {\n            visibility: 'visible',\n          },\n        });\n      }\n\n      if (map.getSource('priority-area') === undefined && priorityAreas) {\n        const priorityFeatureCollection = {\n          type: 'FeatureCollection',\n          features: priorityAreas.map((poly) => ({ type: 'Feature', geometry: poly })),\n        };\n        map.addSource('priority-area', {\n          type: 'geojson',\n          data: priorityFeatureCollection,\n        });\n\n        map.addLayer({\n          id: 'priority-area-border',\n          type: 'line',\n          source: 'priority-area',\n          paint: {\n            'line-color': '#d73f3f',\n            'line-dasharray': [2, 2],\n            'line-width': 2,\n            'line-opacity': 0.7,\n          },\n          layout: {\n            visibility: 'visible',\n          },\n        });\n\n        map.addLayer(\n          {\n            id: 'priority-area',\n            type: 'fill',\n            source: 'priority-area',\n            paint: {\n              'fill-color': '#d73f3f',\n              'fill-outline-color': '#d73f3f',\n              'fill-opacity': 0.4,\n            },\n            layout: {\n              visibility: 'visible',\n            },\n          },\n          'tasks-fill',\n        );\n      }\n\n      if (map.getSource('tasks-centroid') === undefined && taskBordersMap && taskCentroidMap) {\n        map.addSource('tasks-centroid', {\n          type: 'geojson',\n          data: taskCentroidMap,\n        });\n\n        map.addLayer({\n          id: 'point-tasks-centroid-inner',\n          type: 'circle',\n          source: 'tasks-centroid',\n          paint: {\n            'circle-radius': {\n              base: 3,\n              stops: [\n                [12, 4],\n                [22, 180],\n              ],\n            },\n            'circle-color': '#FFF',\n          },\n          layout: {\n            visibility: 'visible',\n          },\n        });\n\n        map.addLayer(\n          {\n            id: 'point-tasks-centroid',\n            type: 'circle',\n            source: 'tasks-centroid',\n            paint: {\n              'circle-radius': {\n                base: 5,\n                stops: [\n                  [12, 10],\n                  [22, 180],\n                ],\n              },\n              'circle-color': '#d73f3f',\n            },\n            layout: {\n              visibility: 'visible',\n            },\n          },\n          'point-tasks-centroid-inner',\n        );\n      }\n      const popup = new mapboxgl.Popup({\n        closeButton: false,\n        closeOnClick: false,\n        offset: {\n          top: [-10, 0],\n          bottom: [0, -10],\n          left: [0, -10],\n          right: [-10, 0],\n        },\n      })\n        .setHTML(`${intl.formatMessage(messages.cantValidateMappedTask)}`)\n        .trackPointer();\n\n      map.on('mousemove', 'tasks-fill', function (e) {\n        // To now allow validators to select tasks that they mapped\n        if (\n          e.features[0].properties.mappedBy === authDetails.id &&\n          e.features[0].properties.taskStatus === 'MAPPED'\n        ) {\n          popup.addTo(map);\n        } else {\n          map.getCanvas().style.cursor = 'pointer';\n          popup.isOpen() && popup.remove();\n        }\n        if (showTaskIds) {\n          // when the user hover on a task they are validating, enable the task id dialog\n          if (e.features[0].properties.lockedBy === authDetails.id) {\n            setHoveredTaskId(e.features[0].properties.taskId);\n          } else {\n            setHoveredTaskId(null);\n          }\n        }\n      });\n\n      if (taskBordersOnly && navigate) {\n        map.on('mouseenter', 'point-tasks-centroid', function (e) {\n          map.getCanvas().style.cursor = 'pointer';\n        });\n        map.on('mouseleave', 'point-tasks-centroid', function (e) {\n          map.getCanvas().style.cursor = '';\n        });\n        map.on('click', 'point-tasks-centroid', () => navigate('./tasks'));\n        map.on('click', 'point-tasks-centroid-inner', () => navigate('./tasks'));\n      }\n\n      map.on('click', 'tasks-fill', onSelectTaskClick);\n      map.on('mouseleave', 'tasks-fill', function (e) {\n        // Change the cursor style as a UI indicator.\n        map.getCanvas().style.cursor = '';\n        // disable the task id dialog when the mouse go outside the task grid\n        showTaskIds && setHoveredTaskId(null);\n        popup.isOpen() && popup.remove();\n\n        // Cursor style won't change to original state with trackPointer()\n        // https://github.com/mapbox/mapbox-gl-js/issues/12223\n        if (map._canvasContainer) {\n          map._canvasContainer.classList.remove('mapboxgl-track-pointer');\n        }\n      });\n      updateTMZoom();\n    };\n\n    const someResultsReady = mapResults && mapResults.features && mapResults.features.length > 0;\n\n    const mapReadyTasksReady =\n      map !== null &&\n      map.isStyleLoaded() &&\n      map.getSource('tasks') === undefined &&\n      someResultsReady;\n    const tasksReadyMapLoading =\n      map !== null &&\n      !map.isStyleLoaded() &&\n      map.getSource('tasks') === undefined &&\n      someResultsReady;\n    const mapLayersAlreadyDefined = map !== null && map.getSource('tasks') !== undefined;\n\n    /* set up style/sources for the map, either immediately or on base load */\n    if (mapReadyTasksReady && !mapLayersAlreadyDefined) {\n      mapboxLayerDefn();\n    } else if (tasksReadyMapLoading && !mapLayersAlreadyDefined) {\n      map.on('load', mapboxLayerDefn);\n    } else if (tasksReadyMapLoading || mapReadyTasksReady) {\n      console.error('One of the hook dependencies changed and try to redefine the map');\n    }\n\n    /* refill the source on mapResults changes */\n    if (mapLayersAlreadyDefined && someResultsReady) {\n      map.getSource('tasks').setData(mapResults);\n\n      /* update the click event so its functional scope can see the\n       *  new selectedOnMap to be able to toggle it off.\n       *  These will accumulate and need cleanup. */\n      map.on('click', 'tasks-fill', onSelectTaskClick);\n\n      if (taskBordersOnly === true) {\n        taskMapLayers.forEach((lr) => lr && map.setLayoutProperty(lr, 'visibility', 'none'));\n        countryMapLayers.forEach((lr) => lr && map.setLayoutProperty(lr, 'visibility', 'visible'));\n      } else {\n        countryMapLayers.forEach((lr) => lr && map.setLayoutProperty(lr, 'visibility', 'none'));\n        taskMapLayers.forEach((lr) => lr && map.setLayoutProperty(lr, 'visibility', 'visible'));\n        if (disableScrollZoom) {\n          updateTMZoom();\n        }\n        if (selectedOnMap && selectedOnMap.length > 0) {\n          map.setFilter('selected-tasks-border', ['in', 'taskId'].concat(selectedOnMap));\n        } else {\n          map.setFilter('selected-tasks-border', ['in', 'taskId', '']);\n        }\n      }\n    }\n\n    return () => {\n      /* cleanup any extra click event listeners after each effect */\n      if (map !== null && map.getSource('tasks') !== undefined && someResultsReady) {\n        map.off('click', 'tasks-fill', onSelectTaskClick);\n        countryMapLayers.forEach((lr) => lr && map.setLayoutProperty(lr, 'visibility', 'none'));\n        taskMapLayers.forEach((lr) => lr && map.setLayoutProperty(lr, 'visibility', 'none'));\n      }\n    };\n  }, [\n    map,\n    mapResults,\n    priorityAreas,\n    selectedOnMap,\n    selectTask,\n    taskBordersMap,\n    taskCentroidMap,\n    taskBordersOnly,\n    disableScrollZoom,\n    navigate,\n    animateZoom,\n    authDetails.id,\n    showTaskIds,\n    zoomedTaskId,\n    authDetails.username,\n    intl,\n  ]);\n\n  if (!mapboxgl.supported()) {\n    return <WebglUnsupported className={`w-100 h-100 fr ${className || ''}`} />;\n  } else {\n    return (\n      <>\n        {showTaskIds && hoveredTaskId && (\n          <div className=\"absolute top-1 left-1 bg-red white base-font fw8 f5 ph3 pv2 z-5 mr2\">\n            <FormattedMessage {...messages.taskId} values={{ id: hoveredTaskId }} />\n          </div>\n        )}\n        <div id=\"map\" className={className} ref={mapRef}></div>\n      </>\n    );\n  }\n};\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAUCAYAAABroNZJAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAXEgAAFxIBZ5/SUgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAC9SURBVDiN7dAxSgNBGMXxnyFsiEUsI9pFW8kBcghtcgXvpLcQQe+Q3MJAKi1M2EQb12Jn4WOzq6BilQfDPN775s/M0Kxz3GKBdzzhBmct8zu6Qo6iYeW4/A4wxjYc+sAy7VW2wcVXkPsw/IBhyo/xGLq7NsCh8v0FnjGo9Ud4Sf0b+lXRCUOnyJKfY1WDvGKWfC/N70Cy4Nctt415rwnyY3VxnfxJyEchV8srTTGBA+VH/Up/8pw9ZA/5N8gn4gsqXiXfqU0AAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAUCAYAAABroNZJAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAqLwAAKi8BUJQ8zgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEkSURBVDiN7Y+9TgJREIW/u7thdSExWhiF2KgkUllQWLIkNHbWPgCPYGtMqHwEex/ACgsCgQbxpzJKLLA0WhgjJoJg7tjcjSusFcaK082ZM1/OKCJ04/vrlsgesA0sKngSKDu2fZiuVjujeTVq3Pr+jhI5BrwI/ruyrN2NWu3kV8hdPr+ptT4DZowlwCOwFMr2ENnKNBrXwZ0VhmitSwFAoPzpOMuZej2plUoCpyY2i1KlyCaX2awXTyRegBjw7PT7q+lWqxvsO4XC3GA4vAcWgI/EYDC/0mz2fjTx4vGUAQBchAEAa5XKK3BuRrfruqmxd8S2Y6GbN6L17SvljkEmkWrnckVDTiKyb/wr4CgiXwSyJn+AyEMAkUmb/Mk7U8gU8m+QL7R0U9jY2+x3AAAAAElFTkSuQmCC\"","import React, { useEffect, useState } from 'react';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport { fetchLocalJSONAPI, pushToLocalJSONAPI } from '../../network/genericJSONRequest';\nimport { useSelector } from 'react-redux';\nimport { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\nimport { Button } from '../button';\nimport { useGetLockedTasks } from '../../hooks/UseLockedTasks';\n\nexport function AnotherProjectLock({ projectId, lockedTasksLength, action }: Object) {\n  const location = useLocation();\n\n  return (\n    <>\n      <h3 className=\"barlow-condensed f3 fw6 mv0\">\n        <FormattedMessage {...messages.anotherLockedTask} />\n      </h3>\n      <div className=\"mv4 lh-title\">\n        <FormattedMessage\n          {...messages[\n            lockedTasksLength > 1\n              ? 'anotherProjectLockTextPlural'\n              : 'anotherProjectLockTextSingular'\n          ]}\n          values={{\n            project: <span className=\"fw6\">{projectId}</span>,\n            n: <span className=\"fw6\">{lockedTasksLength}</span>,\n            action: (\n              <span className=\"ttl\">\n                <FormattedMessage {...messages[action]} />\n              </span>\n            ),\n          }}\n        />\n      </div>\n      <Link to={`/projects/${projectId}/${action}/`} state={{ directedFrom: location.pathname }}>\n        <Button className=\"bg-red white\">\n          <FormattedMessage {...messages.goToProject} values={{ project: projectId }} />\n        </Button>\n      </Link>\n    </>\n  );\n}\n\nexport function SameProjectLock({ lockedTasks, action }: Object) {\n  const navigate = useNavigate();\n  return (\n    <>\n      <h3 className=\"barlow-condensed f3 fw6 mv0\">\n        <FormattedMessage {...messages.anotherLockedTask} />\n      </h3>\n      <div className=\"mv4 lh-title\">\n        <FormattedMessage\n          {...messages[\n            lockedTasks.tasks.length > 1\n              ? 'currentProjectLockTextPlural'\n              : 'currentProjectLockTextSingular'\n          ]}\n          values={{ taskId: <span className=\"fw6\">{lockedTasks.tasks}</span> }}\n        />\n      </div>\n      <Button\n        className=\"bg-red white\"\n        onClick={() => navigate(`/projects/${lockedTasks.project}/${action}/`)}\n      >\n        <FormattedMessage\n          {...messages[lockedTasks.tasks.length > 1 ? 'workOnTasksPlural' : 'workOnTasksSingular']}\n          values={{ mapOrValidate: <FormattedMessage {...messages[action]} /> }}\n        />\n      </Button>\n    </>\n  );\n}\n\nexport const LicenseError = ({ id, close, lockTasks }) => {\n  const token = useSelector((state) => state.auth.token);\n  const [license, setLicense] = useState(null);\n\n  useEffect(() => {\n    const fetchLicense = async (id) => {\n      const res = await fetchLocalJSONAPI(`licenses/${id}/`);\n      setLicense(res);\n    };\n    fetchLicense(id);\n  }, [id]);\n\n  const acceptLicense = () => {\n    pushToLocalJSONAPI(`licenses/${id}/actions/accept-for-me/`, null, token).then(() =>\n      lockTasks(),\n    );\n  };\n\n  return (\n    <>\n      <h3 className=\"barlow-condensed f3 fw6 mv0\">\n        <FormattedMessage {...messages.lockErrorLicense} />\n      </h3>\n      {license === null ? null : (\n        <div className=\"mt3 lh-title\">\n          <FormattedMessage {...messages.lockErrorLicenseDescription} />\n          <div className=\"h5 ph2 overflow-scroll\">\n            <p className=\"fw6 f5 ttu\">{license.name}</p>\n            <p className=\"f6\">{license.description}</p>\n            <p className=\"f6\">{license.plainText}</p>\n          </div>\n          <div className=\"w-100 pt3\">\n            <Button onClick={() => close()} className=\"blue-dark bg-white mr2\">\n              <FormattedMessage {...messages.cancel} />\n            </Button>\n            <Button onClick={() => acceptLicense()} className=\"white bg-red\">\n              <FormattedMessage {...messages.acceptLicense} />\n            </Button>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport function LockError({ error, close, tasks, selectedTasks, setSelectedTasks, lockTasks }) {\n  const shouldShowDeselectButton = error === 'CannotValidateMappedTask' && selectedTasks.length > 1;\n\n  return (\n    <>\n      <h3 className=\"barlow-condensed f3 fw6 mv0\">\n        {messages[`${error}Error`] ? (\n          <FormattedMessage {...messages[`${error}Error`]} />\n        ) : (\n          <FormattedMessage {...messages.lockError} />\n        )}\n      </h3>\n      <div className=\"mv4 lh-title\">\n        {messages[`${error}ErrorDescription`] ? (\n          <FormattedMessage {...messages[`${error}ErrorDescription`]} />\n        ) : (\n          <FormattedMessage {...messages.lockErrorDescription} />\n        )}\n      </div>\n      <LockErrorButtons\n        close={close}\n        shouldShowDeselectButton={shouldShowDeselectButton}\n        tasks={tasks}\n        selectedTasks={selectedTasks}\n        setSelectedTasks={setSelectedTasks}\n        lockTasks={lockTasks}\n      />\n    </>\n  );\n}\n\nfunction LockErrorButtons({\n  close,\n  shouldShowDeselectButton,\n  lockTasks,\n  tasks,\n  selectedTasks,\n  setSelectedTasks,\n}) {\n  const user = useSelector((state) => state.auth.userDetails);\n  const [hasTasksChanged, setHasTasksChanged] = useState(false);\n\n  const handleDeselectAndValidate = () => {\n    const userMappedTaskIds = tasks.features\n      .filter((feature) => feature.properties.mappedBy === user.id)\n      .map((feature) => feature.properties.taskId);\n\n    const remainingSelectedTasks = selectedTasks.filter(\n      (selectedTask) => !userMappedTaskIds.includes(selectedTask),\n    );\n    setSelectedTasks(remainingSelectedTasks);\n    // Set the flag to indicate that tasks have changed.\n    // Note: The introduction of useEffect pattern might benefit\n    // from future optimization.\n    setHasTasksChanged(true);\n  };\n\n  useEffect(() => {\n    if (hasTasksChanged) {\n      lockTasks();\n      setHasTasksChanged(false);\n    }\n  }, [hasTasksChanged, lockTasks]);\n\n  return (\n    <div className=\"w-100 pt3 flex justify-end\">\n      <Button\n        onClick={close}\n        className={`mr2 ${shouldShowDeselectButton ? 'bg-transparent black' : 'bg-red white'}`}\n      >\n        <FormattedMessage {...messages.closeModal} />\n      </Button>\n      {shouldShowDeselectButton && (\n        <Button onClick={handleDeselectAndValidate} className=\"bg-red white mr2\">\n          <FormattedMessage {...messages.deselectAndValidate} />\n        </Button>\n      )}\n    </div>\n  );\n}\n\nexport function LockedTaskModalContent({\n  project,\n  error,\n  close,\n  lockTasks,\n  tasks,\n  selectedTasks,\n  setSelectedTasks,\n}: Object) {\n  const lockedTasks = useGetLockedTasks();\n  const action = lockedTasks.status === 'LOCKED_FOR_VALIDATION' ? 'validate' : 'map';\n  const licenseError = error === 'UserLicenseError' && !lockedTasks.project;\n\n  return (\n    <div className=\"blue-dark bg-white pv2 pv4-ns ph2 ph4-ns\">\n      {licenseError && <LicenseError id={project.licenseId} close={close} lockTasks={lockTasks} />}\n      {/* Other error happened */}\n      {error === 'JOSM' && <LockError error={error} close={close} />}\n      {!lockedTasks.project && !licenseError && error !== 'JOSM' && (\n        <LockError\n          error={error}\n          close={close}\n          lockTasks={lockTasks}\n          tasks={tasks}\n          selectedTasks={selectedTasks}\n          setSelectedTasks={setSelectedTasks}\n        />\n      )}\n      {/* User has tasks locked on another project */}\n      {lockedTasks.project && lockedTasks.project !== project.projectId && error !== 'JOSM' && (\n        <AnotherProjectLock\n          projectId={lockedTasks.project}\n          action={action}\n          lockedTasksLength={lockedTasks.tasks.length}\n        />\n      )}\n      {/* User has tasks locked on the current project */}\n      {lockedTasks.project === project.projectId && error !== 'JOSM' && (\n        <SameProjectLock action={action} lockedTasks={lockedTasks} />\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\nimport { API_URL } from '../../config';\nimport { CustomButton } from '../button';\nimport { NineCellsGridIcon, MappedIcon } from '../svgIcons';\n\nexport const DownloadAOIButton = ({ projectId, className }: Object) => (\n  <a\n    href={`${API_URL}projects/${projectId}/queries/aoi/?as_file=true`}\n    download={`project-${projectId}-aoi.geojson`}\n  >\n    <CustomButton className={className} icon={<MappedIcon className=\"h1 v-mid\" />}>\n      <FormattedMessage {...messages.downloadProjectAOI} />\n    </CustomButton>\n  </a>\n);\n\nexport const DownloadTaskGridButton = ({ projectId, className }: Object) => (\n  <a\n    href={`${API_URL}projects/${projectId}/tasks/?as_file=true`}\n    download={`project-${projectId}-tasks.geojson`}\n  >\n    <CustomButton className={className} icon={<NineCellsGridIcon className=\"h1 v-mid\" />}>\n      <FormattedMessage {...messages.downloadTaskGrid} />\n    </CustomButton>\n  </a>\n);\n","import React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport { htmlFromMarkdown } from '../../utils/htmlFromMarkdown';\nimport { Alert } from '../alert';\nimport messages from './messages';\n\nexport function ProjectInstructions({ instructions, isProjectArchived }: Object) {\n  const htmlInstructions = instructions ? htmlFromMarkdown(instructions) : { __html: '' };\n\n  return (\n    <>\n      {isProjectArchived && (\n        <Alert type=\"warning\" compact={false}>\n          <FormattedMessage {...messages.projectIsArchived} />\n        </Alert>\n      )}\n      <div\n        className=\"markdown-content base-font blue-dark\"\n        dangerouslySetInnerHTML={htmlInstructions}\n      />\n    </>\n  );\n}\n","import React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\n\nexport function ChangesetCommentTags({ tags }: Object) {\n  return (\n    <div className=\"cf pb3 blue-dark\">\n      <span className=\"fw6\">\n        <FormattedMessage {...messages.changesetComment} />:\n      </span>\n      <span className=\"pl2\">{tags}</span>\n    </div>\n  );\n}\n","import React from 'react';\nimport { CheckIcon } from './svgIcons';\n\nexport const CheckCircle = ({ className }: Object) => (\n  <span className={`br-100 h1 w1 ph1 mr2 ${className}`}>\n    <CheckIcon height=\"10px\" width=\"10px\" />\n  </span>\n);\n","import { getDefaultState } from './mutation'\nimport { notifyManager } from './notifyManager'\nimport { Subscribable } from './subscribable'\nimport { shallowEqualObjects } from './utils'\nimport type { QueryClient } from './queryClient'\nimport type {\n  MutateOptions,\n  MutationObserverBaseResult,\n  MutationObserverOptions,\n  MutationObserverResult,\n} from './types'\nimport type { Action, Mutation } from './mutation'\n\n// TYPES\n\ntype MutationObserverListener<TData, TError, TVariables, TContext> = (\n  result: MutationObserverResult<TData, TError, TVariables, TContext>,\n) => void\n\ninterface NotifyOptions {\n  listeners?: boolean\n  onError?: boolean\n  onSuccess?: boolean\n}\n\n// CLASS\n\nexport class MutationObserver<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown,\n> extends Subscribable<\n  MutationObserverListener<TData, TError, TVariables, TContext>\n> {\n  options!: MutationObserverOptions<TData, TError, TVariables, TContext>\n\n  private client: QueryClient\n  private currentResult!: MutationObserverResult<\n    TData,\n    TError,\n    TVariables,\n    TContext\n  >\n  private currentMutation?: Mutation<TData, TError, TVariables, TContext>\n  private mutateOptions?: MutateOptions<TData, TError, TVariables, TContext>\n\n  constructor(\n    client: QueryClient,\n    options: MutationObserverOptions<TData, TError, TVariables, TContext>,\n  ) {\n    super()\n\n    this.client = client\n    this.setOptions(options)\n    this.bindMethods()\n    this.updateResult()\n  }\n\n  protected bindMethods(): void {\n    this.mutate = this.mutate.bind(this)\n    this.reset = this.reset.bind(this)\n  }\n\n  setOptions(\n    options?: MutationObserverOptions<TData, TError, TVariables, TContext>,\n  ) {\n    const prevOptions = this.options\n    this.options = this.client.defaultMutationOptions(options)\n    if (!shallowEqualObjects(prevOptions, this.options)) {\n      this.client.getMutationCache().notify({\n        type: 'observerOptionsUpdated',\n        mutation: this.currentMutation,\n        observer: this,\n      })\n    }\n    this.currentMutation?.setOptions(this.options)\n  }\n\n  protected onUnsubscribe(): void {\n    if (!this.hasListeners()) {\n      this.currentMutation?.removeObserver(this)\n    }\n  }\n\n  onMutationUpdate(action: Action<TData, TError, TVariables, TContext>): void {\n    this.updateResult()\n\n    // Determine which callbacks to trigger\n    const notifyOptions: NotifyOptions = {\n      listeners: true,\n    }\n\n    if (action.type === 'success') {\n      notifyOptions.onSuccess = true\n    } else if (action.type === 'error') {\n      notifyOptions.onError = true\n    }\n\n    this.notify(notifyOptions)\n  }\n\n  getCurrentResult(): MutationObserverResult<\n    TData,\n    TError,\n    TVariables,\n    TContext\n  > {\n    return this.currentResult\n  }\n\n  reset(): void {\n    this.currentMutation = undefined\n    this.updateResult()\n    this.notify({ listeners: true })\n  }\n\n  mutate(\n    variables?: TVariables,\n    options?: MutateOptions<TData, TError, TVariables, TContext>,\n  ): Promise<TData> {\n    this.mutateOptions = options\n\n    if (this.currentMutation) {\n      this.currentMutation.removeObserver(this)\n    }\n\n    this.currentMutation = this.client.getMutationCache().build(this.client, {\n      ...this.options,\n      variables:\n        typeof variables !== 'undefined' ? variables : this.options.variables,\n    })\n\n    this.currentMutation.addObserver(this)\n\n    return this.currentMutation.execute()\n  }\n\n  private updateResult(): void {\n    const state = this.currentMutation\n      ? this.currentMutation.state\n      : getDefaultState<TData, TError, TVariables, TContext>()\n\n    const result: MutationObserverBaseResult<\n      TData,\n      TError,\n      TVariables,\n      TContext\n    > = {\n      ...state,\n      isLoading: state.status === 'loading',\n      isSuccess: state.status === 'success',\n      isError: state.status === 'error',\n      isIdle: state.status === 'idle',\n      mutate: this.mutate,\n      reset: this.reset,\n    }\n\n    this.currentResult = result as MutationObserverResult<\n      TData,\n      TError,\n      TVariables,\n      TContext\n    >\n  }\n\n  private notify(options: NotifyOptions) {\n    notifyManager.batch(() => {\n      // First trigger the mutate callbacks\n      if (this.mutateOptions && this.hasListeners()) {\n        if (options.onSuccess) {\n          this.mutateOptions.onSuccess?.(\n            this.currentResult.data!,\n            this.currentResult.variables!,\n            this.currentResult.context!,\n          )\n          this.mutateOptions.onSettled?.(\n            this.currentResult.data!,\n            null,\n            this.currentResult.variables!,\n            this.currentResult.context,\n          )\n        } else if (options.onError) {\n          this.mutateOptions.onError?.(\n            this.currentResult.error!,\n            this.currentResult.variables!,\n            this.currentResult.context,\n          )\n          this.mutateOptions.onSettled?.(\n            undefined,\n            this.currentResult.error,\n            this.currentResult.variables!,\n            this.currentResult.context,\n          )\n        }\n      }\n\n      // Then trigger the listeners\n      if (options.listeners) {\n        this.listeners.forEach(({ listener }) => {\n          listener(this.currentResult)\n        })\n      }\n    })\n  }\n}\n","'use client'\nimport * as React from 'react'\nimport {\n  MutationObserver,\n  notifyManager,\n  parseMutationArgs,\n} from '@tanstack/query-core'\nimport { useSyncExternalStore } from './useSyncExternalStore'\n\nimport { useQueryClient } from './QueryClientProvider'\nimport { shouldThrowError } from './utils'\nimport type { MutationFunction, MutationKey } from '@tanstack/query-core'\nimport type {\n  UseMutateFunction,\n  UseMutationOptions,\n  UseMutationResult,\n} from './types'\n\n// HOOK\n\nexport function useMutation<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown,\n>(\n  options: UseMutationOptions<TData, TError, TVariables, TContext>,\n): UseMutationResult<TData, TError, TVariables, TContext>\nexport function useMutation<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown,\n>(\n  mutationFn: MutationFunction<TData, TVariables>,\n  options?: Omit<\n    UseMutationOptions<TData, TError, TVariables, TContext>,\n    'mutationFn'\n  >,\n): UseMutationResult<TData, TError, TVariables, TContext>\nexport function useMutation<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown,\n>(\n  mutationKey: MutationKey,\n  options?: Omit<\n    UseMutationOptions<TData, TError, TVariables, TContext>,\n    'mutationKey'\n  >,\n): UseMutationResult<TData, TError, TVariables, TContext>\nexport function useMutation<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown,\n>(\n  mutationKey: MutationKey,\n  mutationFn?: MutationFunction<TData, TVariables>,\n  options?: Omit<\n    UseMutationOptions<TData, TError, TVariables, TContext>,\n    'mutationKey' | 'mutationFn'\n  >,\n): UseMutationResult<TData, TError, TVariables, TContext>\nexport function useMutation<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown,\n>(\n  arg1:\n    | MutationKey\n    | MutationFunction<TData, TVariables>\n    | UseMutationOptions<TData, TError, TVariables, TContext>,\n  arg2?:\n    | MutationFunction<TData, TVariables>\n    | UseMutationOptions<TData, TError, TVariables, TContext>,\n  arg3?: UseMutationOptions<TData, TError, TVariables, TContext>,\n): UseMutationResult<TData, TError, TVariables, TContext> {\n  const options = parseMutationArgs(arg1, arg2, arg3)\n  const queryClient = useQueryClient({ context: options.context })\n\n  const [observer] = React.useState(\n    () =>\n      new MutationObserver<TData, TError, TVariables, TContext>(\n        queryClient,\n        options,\n      ),\n  )\n\n  React.useEffect(() => {\n    observer.setOptions(options)\n  }, [observer, options])\n\n  const result = useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) =>\n        observer.subscribe(notifyManager.batchCalls(onStoreChange)),\n      [observer],\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult(),\n  )\n\n  const mutate = React.useCallback<\n    UseMutateFunction<TData, TError, TVariables, TContext>\n  >(\n    (variables, mutateOptions) => {\n      observer.mutate(variables, mutateOptions).catch(noop)\n    },\n    [observer],\n  )\n\n  if (\n    result.error &&\n    shouldThrowError(observer.options.useErrorBoundary, [result.error])\n  ) {\n    throw result.error\n  }\n\n  return { ...result, mutate, mutateAsync: result.mutate }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nfunction noop() {}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nlet portalRoot = document.getElementById('action-root');\nif (!portalRoot) {\n  portalRoot = document.createElement('div');\n  portalRoot.setAttribute('id', 'action-root');\n  document.body.appendChild(portalRoot);\n}\n\nclass Portal extends React.Component {\n  el = document.createElement('div');\n\n  componentDidMount() {\n    portalRoot.style.display = 'block';\n    portalRoot.appendChild(this.el);\n  }\n\n  componentWillUnmount() {\n    portalRoot.style.display = 'none';\n    portalRoot.removeChild(this.el);\n  }\n\n  render() {\n    return ReactDOM.createPortal(this.props.children, this.el);\n  }\n}\n\nexport default Portal;\n","import { useState, useEffect } from 'react';\n\n// return true if a task was previously invalidated and received comments\nexport const useReadTaskComments = (history) => {\n  const [readTaskComments, setReadTaskComments] = useState(false);\n\n  useEffect(() => {\n    if (history && history.taskHistory && history.taskHistory.length > 1) {\n      const invalidatedTaskHistory = history.taskHistory.filter(\n        (task) => task.actionText === 'INVALIDATED',\n      );\n      const taskComments = history.taskHistory.filter((task) => task.action === 'COMMENT');\n\n      if (invalidatedTaskHistory.length > 0 && taskComments.length > 0) {\n        setReadTaskComments(true);\n      }\n    }\n  }, [history]);\n  return readTaskComments;\n};\n","import { useState, useEffect } from 'react';\n\n// return true if a task was previously marked as BADIMAGERY and reverted to READY\nexport const useDisableBadImagery = (history) => {\n  const [disableBadImagery, setDisableBadImagery] = useState(false);\n\n  useEffect(() => {\n    if (history && history.taskHistory && history.taskHistory.length > 1) {\n      const wasSetAsBadImagery = history.taskHistory.filter(\n        (task) => task.actionText === 'BADIMAGERY',\n      ).length;\n      const wasRevertedToReady = history.taskHistory.filter(\n        (task) => task.actionText === 'Undo state from BADIMAGERY to READY',\n      ).length;\n\n      if (wasSetAsBadImagery && wasRevertedToReady) {\n        setDisableBadImagery(true);\n      }\n    }\n  }, [history]);\n  return disableBadImagery;\n};\n","import React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\nimport Popup from 'reactjs-popup';\nimport ReactTooltip from 'react-tooltip';\nimport { FormattedMessage } from 'react-intl';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport toast from 'react-hot-toast';\n\nimport messages from './messages';\nimport { CheckBoxInput } from '../formInputs';\nimport { Button, CustomButton } from '../button';\nimport { Dropdown } from '../dropdown';\nimport { CheckCircle } from '../checkCircle';\nimport {\n  CloseIcon,\n  ClipboardIcon,\n  SidebarIcon,\n  AlertIcon,\n  QuestionCircleIcon,\n  ChevronRightIcon,\n  ChevronDownIcon,\n  InfoIcon,\n  CommentIcon,\n  PlusIcon,\n} from '../svgIcons';\nimport { getEditors } from '../../utils/editorsList';\nimport { htmlFromMarkdown } from '../../utils/htmlFromMarkdown';\nimport { getTaskContributors } from '../../utils/getTaskContributors';\nimport { fetchLocalJSONAPI } from '../../network/genericJSONRequest';\nimport { CommentInputField } from '../comments/commentInput';\nimport { useFetchLockedTasks, useClearLockedTasks } from '../../hooks/UseLockedTasks';\nimport {\n  submitMappingTask,\n  splitTask,\n  stopMapping,\n  stopValidation,\n  submitValidationTask,\n} from '../../api/projects';\n\nexport function CompletionTabForMapping({\n  project,\n  tasksIds,\n  showReadCommentsAlert,\n  disableBadImagery,\n  historyTabSwitch,\n  taskInstructions,\n  disabled,\n  contributors,\n  taskComment,\n  setTaskComment,\n  selectedStatus,\n  setSelectedStatus,\n}: Object) {\n  const navigate = useNavigate();\n  const token = useSelector((state) => state.auth.token);\n  const locale = useSelector((state) => state.preferences['locale']);\n  const queryClient = useQueryClient();\n  const [showHelp, setShowHelp] = useState(false);\n  const [showMapChangesModal, setShowMapChangesModal] = useState(false);\n  const [splitTaskError, setSplitTaskError] = useState(false);\n  const [redirectToPreviousProject, setRedirectToPreviousProject] = useState(true);\n  const radioInput = 'radio-input input-reset pointer v-mid dib h2 w2 mr2 br-100 ba b--blue-light';\n  const fetchLockedTasks = useFetchLockedTasks();\n  const clearLockedTasks = useClearLockedTasks();\n  const directedFrom = localStorage.getItem('lastProjectPathname');\n  const { projectId } = project;\n\n  const splitTaskMutation = useMutation({\n    mutationFn: () => splitTask(projectId, tasksIds[0], token, locale),\n    onSuccess: ({ data: { tasks } }) => {\n      invalidateProjectData();\n      clearLockedTasks();\n      navigateToTasksPage(tasks.map((task) => task.taskId));\n    },\n    onError: (err) => {\n      if (err.response?.data?.SubCode === 'SmallToSplit') {\n        setSplitTaskError(true);\n      } else {\n        toast.error(<FormattedMessage {...messages.splitTaskGenericError} />);\n      }\n    },\n  });\n\n  const stopMappingMutation = useMutation({\n    mutationFn: () => stopMapping(projectId, tasksIds[0], taskComment, token, locale),\n    onSuccess: () => {\n      invalidateProjectData();\n      clearLockedTasks();\n      navigateToTasksPage(tasksIds);\n    },\n    onError: () => {\n      toast.error(<FormattedMessage {...messages.stopMappingError} />);\n    },\n  });\n\n  const submitTaskMutation = useMutation({\n    mutationFn: (formData) => {\n      const { url, payload } = formData;\n      return submitMappingTask(url, payload, token, locale);\n    },\n    onSuccess: () => {\n      invalidateProjectData();\n      fetchLockedTasks();\n      navigateToTasksPage(tasksIds);\n    },\n    onError: () => {\n      toast.error(\n        <FormattedMessage {...messages.submitTaskError} values={{ numTasks: tasksIds.length }} />,\n      );\n    },\n  });\n\n  const onStopMapping = () => {\n    if (disabled) {\n      return new Promise((resolve, reject) => {\n        setShowMapChangesModal('unlock');\n        resolve();\n      });\n    }\n    stopMappingMutation.mutate();\n  };\n\n  const onSplitTask = () => {\n    if (disabled) {\n      return new Promise((resolve, reject) => {\n        setShowMapChangesModal('unlock');\n        resolve();\n      });\n    }\n    splitTaskMutation.mutate();\n  };\n\n  const onSubmitTask = () => {\n    const url =\n      selectedStatus === 'READY'\n        ? `projects/${projectId}/tasks/actions/stop-mapping/${tasksIds[0]}/`\n        : `projects/${projectId}/tasks/actions/unlock-after-mapping/${tasksIds[0]}/`;\n    const payload = {\n      comment: taskComment,\n    };\n    if (selectedStatus !== 'READY') {\n      payload.status = selectedStatus;\n    }\n    submitTaskMutation.mutate({ url, payload });\n  };\n\n  const invalidateProjectData = () => {\n    queryClient.invalidateQueries(['project-tasks', projectId]);\n    queryClient.invalidateQueries(['project-activities', projectId]);\n  };\n\n  const navigateToTasksPage = (taskIds) => {\n    navigate((redirectToPreviousProject && directedFrom) || `/projects/${projectId}/tasks/`, {\n      state: {\n        lastLockedTasksIds: taskIds,\n        lastLockedProjectId: projectId,\n      },\n    });\n  };\n\n  return (\n    <div>\n      {disabled && showMapChangesModal && (\n        <Popup\n          modal\n          open\n          closeOnEscape={true}\n          closeOnDocumentClick={true}\n          onClose={() => setShowMapChangesModal(null)}\n        >\n          {(close) => <UnsavedMapChangesModalContent close={close} action={showMapChangesModal} />}\n        </Popup>\n      )}\n      {splitTaskError && (\n        <Popup\n          modal\n          open\n          closeOnEscape={true}\n          closeOnDocumentClick={true}\n          onClose={() => setSplitTaskError(false)}\n        >\n          {(close) => <TaskSplitErrorModalContent close={close} />}\n        </Popup>\n      )}\n      {showReadCommentsAlert && (\n        <div\n          role=\"button\"\n          className=\"tc pa2 mb1 bg-grey-light blue-dark pointer\"\n          onClick={() => historyTabSwitch()}\n          onKeyDown={() => {}}\n        >\n          <InfoIcon className=\"v-mid h1 w1\" />\n          <span className=\"ml2 fw1 pa1\">\n            <FormattedMessage {...messages.readTaskComments} />\n          </span>\n        </div>\n      )}\n      <div className=\"cf\">\n        {taskInstructions && <TaskSpecificInstructions instructions={taskInstructions} />}\n        <h4 className=\"ttu blue-grey f6 fw5\">\n          <FormattedMessage {...messages.editStatus} />\n          <QuestionCircleIcon\n            className=\"pointer dib v-mid pl2 pb1 blue-light\"\n            height=\"1.25rem\"\n            role=\"button\"\n            aria-label=\"toggle help\"\n            onClick={() => setShowHelp(!showHelp)}\n          />\n        </h4>\n        {showHelp && (\n          <div className=\"cf\">\n            <CompletionInstructions setVisibility={setShowHelp} />\n          </div>\n        )}\n        <p className=\"b\">\n          <FormattedMessage {...messages.mappedQuestion} />\n        </p>\n        <p>\n          <input\n            id=\"MAPPED\"\n            type=\"radio\"\n            value=\"MAPPED\"\n            className={radioInput}\n            checked={selectedStatus === 'MAPPED'}\n            onChange={() => setSelectedStatus('MAPPED')}\n          />\n          <label htmlFor=\"MAPPED\">\n            <FormattedMessage {...messages.complete} />\n          </label>\n        </p>\n        <p>\n          <input\n            id=\"READY\"\n            type=\"radio\"\n            value=\"READY\"\n            className={radioInput}\n            checked={selectedStatus === 'READY'}\n            onChange={() => setSelectedStatus('READY')}\n          />\n          <label htmlFor=\"READY\">\n            <FormattedMessage {...messages.incomplete} />\n          </label>\n        </p>\n        {!disableBadImagery && (\n          <p>\n            <input\n              id=\"BADIMAGERY\"\n              type=\"radio\"\n              value=\"BADIMAGERY\"\n              className={radioInput}\n              checked={selectedStatus === 'BADIMAGERY'}\n              onChange={() => setSelectedStatus('BADIMAGERY')}\n            />\n            <label htmlFor=\"BADIMAGERY\">\n              <FormattedMessage {...messages.badImagery} />\n            </label>\n          </p>\n        )}\n      </div>\n      <div className=\"cf\">\n        <h4 className=\"ttu blue-grey f6 fw5\">\n          <FormattedMessage {...messages.comment} />\n        </h4>\n        <p>\n          <CommentInputField\n            comment={taskComment}\n            setComment={setTaskComment}\n            contributors={contributors}\n            enableHashtagPaste={true}\n            enableContributorsHashtag\n            isShowTabNavs\n          />\n        </p>\n      </div>\n      {directedFrom && (\n        <div className=\"flex items-center\">\n          <CheckBoxInput\n            changeState={() => setRedirectToPreviousProject(!redirectToPreviousProject)}\n            isActive={redirectToPreviousProject}\n          />\n          <label>\n            <FormattedMessage\n              {...messages.redirectToPreviousProject}\n              values={{\n                projectId: directedFrom.split('/')[2],\n              }}\n            />\n          </label>\n        </div>\n      )}\n      <div className=\"cf mv2\" data-tip>\n        <Button\n          className=\"bg-red white w-100 fl\"\n          onClick={onSubmitTask}\n          disabled={\n            disabled ||\n            !selectedStatus ||\n            [stopMappingMutation.status, splitTaskMutation.status].includes('loading')\n          }\n          loading={submitTaskMutation.status === 'loading'}\n        >\n          <FormattedMessage {...messages.submitTask} />\n        </Button>\n      </div>\n      {disabled && (\n        <ReactTooltip place=\"top\">\n          <FormattedMessage {...messages.unsavedChangesTooltip} />\n        </ReactTooltip>\n      )}\n      <div className=\"cf pb1\">\n        <Button\n          className=\"bg-blue-dark white w-50 fl\"\n          onClick={onSplitTask}\n          loading={splitTaskMutation.status === 'loading'}\n          disabled={[submitTaskMutation.status, splitTaskMutation.status].includes('loading')}\n        >\n          <FormattedMessage {...messages.splitTask} />\n        </Button>\n        <Button\n          className=\"blue-dark bg-white w-50 fl\"\n          onClick={onStopMapping}\n          loading={stopMappingMutation.status === 'loading'}\n          disabled={[submitTaskMutation.status, splitTaskMutation.status].includes('loading')}\n        >\n          <FormattedMessage {...messages.selectAnotherTask} />\n        </Button>\n      </div>\n      <div className=\"bb b--grey-light w-100 pv2\"></div>\n    </div>\n  );\n}\n\nexport function CompletionTabForValidation({\n  project,\n  tasksIds,\n  taskInstructions,\n  disabled,\n  contributors,\n  validationStatus,\n  setValidationStatus,\n  validationComments,\n  setValidationComments,\n}: Object) {\n  const navigate = useNavigate();\n  const token = useSelector((state) => state.auth.token);\n  const locale = useSelector((state) => state.preferences.locale);\n  const queryClient = useQueryClient();\n  const [showMapChangesModal, setShowMapChangesModal] = useState(false);\n  const [redirectToPreviousProject, setRedirectToPreviousProject] = useState(true);\n  const fetchLockedTasks = useFetchLockedTasks();\n  const clearLockedTasks = useClearLockedTasks();\n  const directedFrom = localStorage.getItem('lastProjectPathname');\n  const { projectId } = project;\n\n  const stopValidationMutation = useMutation({\n    mutationFn: (formData) => stopValidation(projectId, formData, token, locale),\n    onSuccess: () => {\n      clearLockedTasks();\n      invalidateProjectData();\n      navigateToTasksPage();\n    },\n    onError: () => {\n      toast.error(<FormattedMessage {...messages.stopValidationError} />);\n    },\n  });\n\n  const submitTaskMutation = useMutation({\n    mutationFn: (formData) => submitValidationTask(projectId, formData, token, locale),\n    onSuccess: () => {\n      fetchLockedTasks();\n      invalidateProjectData();\n      navigateToTasksPage(true);\n    },\n    onError: () => {\n      toast.error(\n        <FormattedMessage {...messages.submitTaskError} values={{ numTasks: tasksIds.length }} />,\n      );\n    },\n  });\n\n  const updateStatus = (id, newStatus) =>\n    setValidationStatus({ ...validationStatus, [id]: newStatus });\n\n  const updateComment = (id, newComment) =>\n    setValidationComments({ ...validationComments, [id]: newComment });\n\n  const copyCommentToTasks = (id, statusFilter) => {\n    const comment = validationComments[id];\n    let tasks = tasksIds.filter((task) => task !== id);\n    if (statusFilter) {\n      tasks = tasks.filter((task) => validationStatus[task] === statusFilter);\n    }\n    let payload = {};\n    tasks.forEach((task) => (payload[task] = comment));\n    setValidationComments({ ...validationComments, ...payload });\n  };\n\n  const areAllTasksVerified = Object.keys(validationStatus).length === tasksIds.length;\n\n  const onStopValidation = () => {\n    if (disabled) {\n      return new Promise((resolve, reject) => {\n        setShowMapChangesModal('unlock');\n        resolve();\n      });\n    }\n    const payload = {\n      resetTasks: tasksIds.map((taskId) => ({\n        taskId: taskId,\n        comment: validationComments[taskId],\n      })),\n    };\n    stopValidationMutation.mutate(payload);\n  };\n\n  const onSubmitTask = () => {\n    const payload = {\n      validatedTasks: tasksIds.map((taskId) => ({\n        taskId: taskId,\n        comment: validationComments[taskId],\n        status: validationStatus[taskId],\n      })),\n    };\n    submitTaskMutation.mutate(payload);\n  };\n\n  const navigateToTasksPage = (applyFilter = false) => {\n    let filterParam = '';\n    if (applyFilter) {\n      filterParam = '?filter=MAPPED';\n    }\n    navigate(\n      (redirectToPreviousProject && directedFrom) || `/projects/${projectId}/tasks/${filterParam}`,\n      {\n        state: {\n          lastLockedTasksIds: tasksIds,\n          lastLockedProjectId: projectId,\n        },\n      },\n    );\n  };\n\n  const invalidateProjectData = () => {\n    queryClient.invalidateQueries(['project-tasks', projectId]);\n    queryClient.invalidateQueries(['project-activities', projectId]);\n  };\n\n  return (\n    <div>\n      {disabled && showMapChangesModal && (\n        <Popup\n          modal\n          open\n          closeOnEscape={true}\n          closeOnDocumentClick={true}\n          onClose={() => setShowMapChangesModal(null)}\n        >\n          {(close) => <UnsavedMapChangesModalContent close={close} action={showMapChangesModal} />}\n        </Popup>\n      )}\n      <div className=\"cf\">\n        {taskInstructions && (\n          <TaskSpecificInstructions instructions={taskInstructions} open={false} />\n        )}\n        <h4 className=\"ttu blue-grey f5\">\n          <FormattedMessage {...messages.editStatus} />\n        </h4>\n        <p className=\"b mb2\">\n          <FormattedMessage {...messages.validatedQuestion} values={{ number: tasksIds.length }} />\n        </p>\n        {tasksIds.length > 3 && (\n          <div className=\"cf w-100 db pt1 pv2 blue-dark mb2 bb b--light-gray\">\n            <div className=\"cf w-100\">\n              <div className=\"fw8 f5 w-10 dib\">\n                <FormattedMessage {...messages.filterAll} />\n              </div>\n              <div className=\"w-auto dib\">\n                {['VALIDATED', 'INVALIDATED'].map((value, index) => (\n                  <div className=\"dib\" key={index}>\n                    <input\n                      type=\"radio\"\n                      id={value}\n                      value={value}\n                      className=\"radio-input input-reset pointer v-mid dib h2 w2 mr2 ml3 br-100 ba b--blue-light\"\n                      checked={\n                        Object.values(validationStatus).every((status) => status === value) &&\n                        Object.values(validationStatus).length === tasksIds.length\n                      }\n                      onChange={() => {\n                        let tempObj = {};\n                        tasksIds.forEach((id) => (tempObj = { ...tempObj, [id]: value }));\n                        setValidationStatus(tempObj);\n                      }}\n                    />\n                    <label htmlFor={value}>\n                      {index ? (\n                        <FormattedMessage {...messages.incomplete} />\n                      ) : (\n                        <FormattedMessage {...messages.complete} />\n                      )}\n                    </label>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        )}\n        {tasksIds.map((id) => (\n          <TaskValidationSelector\n            key={id}\n            id={id}\n            projectId={projectId}\n            contributors={contributors}\n            currentStatus={validationStatus[id]}\n            updateStatus={updateStatus}\n            comment={validationComments[id]}\n            updateComment={updateComment}\n            copyCommentToTasks={copyCommentToTasks}\n            isValidatingMultipleTasks={tasksIds.length > 1}\n          />\n        ))}\n      </div>\n      {directedFrom && (\n        <div className=\"flex items-center\">\n          <CheckBoxInput\n            changeState={() => setRedirectToPreviousProject(!redirectToPreviousProject)}\n            isActive={redirectToPreviousProject}\n          />\n          <label>\n            <FormattedMessage\n              {...messages.redirectToPreviousProject}\n              values={{\n                projectId: directedFrom.split('/')[2],\n              }}\n            />\n          </label>\n        </div>\n      )}\n      <div className=\"cf mv3\" data-tip>\n        <Button\n          className=\"bg-red white w-100 fl\"\n          onClick={onSubmitTask}\n          disabled={disabled || !areAllTasksVerified || stopValidationMutation.status === 'loading'}\n          loading={submitTaskMutation.status === 'loading'}\n        >\n          <FormattedMessage {...messages[tasksIds.length > 1 ? 'submitTasks' : 'submitTask']} />\n        </Button>\n      </div>\n      {disabled && (\n        <ReactTooltip place=\"top\">\n          <FormattedMessage {...messages.unsavedChangesTooltip} />\n        </ReactTooltip>\n      )}\n      <div className=\"cf\">\n        <Button\n          className=\"blue-dark bg-white w-100 fl\"\n          onClick={onStopValidation}\n          loading={stopValidationMutation.status === 'loading'}\n          disabled={submitTaskMutation.status === 'loading'}\n        >\n          <FormattedMessage {...messages.stopValidation} />\n        </Button>\n      </div>\n      <div className=\"bb b--grey-light w-100 pv2\"></div>\n    </div>\n  );\n}\n\nconst TaskValidationSelector = ({\n  id,\n  projectId,\n  currentStatus,\n  comment,\n  updateComment,\n  contributors,\n  updateStatus,\n  copyCommentToTasks,\n  isValidatingMultipleTasks,\n}) => {\n  const userDetails = useSelector((state) => state.auth.userDetails);\n  const [showCommentInput, setShowCommentInput] = useState(false);\n  const [enableCopy, setEnableCopy] = useState(false);\n  const setComment = (newComment) => updateComment(id, newComment);\n  const [contributorsList, setContributorsList] = useState([]);\n\n  // the contributors is filled only on the case of single task validation,\n  // so we need to fetch the task history in the case of multiple task validation\n  useEffect(() => {\n    if (showCommentInput && isValidatingMultipleTasks) {\n      fetchLocalJSONAPI(`projects/${projectId}/tasks/${id}/`).then((response) =>\n        setContributorsList(getTaskContributors(response.taskHistory, userDetails.username)),\n      );\n    }\n  }, [isValidatingMultipleTasks, showCommentInput, id, projectId, userDetails.username]);\n\n  return (\n    <div className=\"cf w-100 db pt1 pv2 blue-dark\">\n      <div className=\"cf w-100\">\n        <div className=\"fw8 f5 w-10 dib\">#{id}</div>\n        <div className=\"w-auto dib\">\n          <input\n            type=\"radio\"\n            value=\"VALIDATED\"\n            id={`#${id}-VALIDATED`}\n            className=\"radio-input input-reset pointer v-mid dib h2 w2 mr2 ml3 br-100 ba b--blue-light\"\n            checked={currentStatus === 'VALIDATED'}\n            onChange={() => updateStatus(id, 'VALIDATED')}\n          />\n          <label htmlFor={`#${id}-VALIDATED`}>\n            <FormattedMessage {...messages.complete} />\n          </label>\n          <input\n            type=\"radio\"\n            value=\"INVALIDATED\"\n            id={`#${id}-INVALIDATED`}\n            className=\"radio-input input-reset pointer v-mid dib h2 w2 mr2 ml3 br-100 ba b--blue-light\"\n            checked={currentStatus === 'INVALIDATED'}\n            onChange={() => updateStatus(id, 'INVALIDATED')}\n          />\n          <label htmlFor={`#${id}-INVALIDATED`}>\n            <FormattedMessage {...messages.incomplete} />\n          </label>\n          <CustomButton\n            className={`${\n              showCommentInput ? 'b--red red' : 'b--grey-light blue-dark'\n            } bg-white ba br1 ml3 pv2 ph3`}\n            onClick={() => setShowCommentInput(!showCommentInput)}\n            icon={\n              comment ? (\n                <CommentIcon className=\"h1 w1 v-mid\" />\n              ) : (\n                <PlusIcon className=\"h1 w1 v-mid\" />\n              )\n            }\n          >\n            <FormattedMessage {...messages.comment} />\n          </CustomButton>\n        </div>\n      </div>\n      {showCommentInput && (\n        <>\n          <div className=\"cf w-100 db pt2\">\n            <CommentInputField\n              comment={comment}\n              setComment={setComment}\n              contributors={isValidatingMultipleTasks ? contributorsList : contributors}\n              enableHashtagPaste\n              enableContributorsHashtag\n              isShowTabNavs\n            />\n          </div>\n          {isValidatingMultipleTasks && comment && (\n            <div className=\"fw5 tr bb b--grey-light bw1 pb2\">\n              {enableCopy ? (\n                <>\n                  <CustomButton\n                    className=\"bg-white ba b--grey-light blue-dark br1 ml1 pv2 ph2 mb1\"\n                    onClick={() => {\n                      copyCommentToTasks(id);\n                      setEnableCopy(false);\n                    }}\n                  >\n                    <FormattedMessage {...messages.copyCommentToAll} />\n                  </CustomButton>\n                  {currentStatus && (\n                    <CustomButton\n                      className=\"bg-white ba b--grey-light blue-dark br1 ml1 pv2 ph2 mb1\"\n                      onClick={() => {\n                        copyCommentToTasks(id, currentStatus);\n                        setEnableCopy(false);\n                      }}\n                    >\n                      <FormattedMessage {...messages[`copyCommentTo${currentStatus}`]} />\n                    </CustomButton>\n                  )}\n                  <CustomButton\n                    className=\"red bn bg-white br1 ml2 ph2 pv2\"\n                    onClick={() => setEnableCopy(false)}\n                  >\n                    <FormattedMessage {...messages.cancel} />\n                  </CustomButton>\n                </>\n              ) : (\n                <CustomButton\n                  className=\"bg-white ba b--grey-light blue-dark br1 ml1 pv2 ph3\"\n                  onClick={() => setEnableCopy(true)}\n                >\n                  <ClipboardIcon className=\"h1 w1 v-top pr1\" />\n                  <FormattedMessage {...messages.copyComment} />\n                </CustomButton>\n              )}\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nfunction CompletionInstructions({ setVisibility }: Object) {\n  return (\n    <div className=\"dib ph4-l w-100 cf\">\n      <h4 className=\"fw8 f5 blue-dark di\">\n        <FormattedMessage {...messages.finishMappingTitle} />\n      </h4>\n      <span\n        className=\"br-100 bg-grey-light white h1 w1 fr pointer tc v-mid di\"\n        onClick={() => setVisibility(false)}\n        onKeyDown={() => {}}\n      >\n        <CloseIcon className=\"pv1\" aria-label=\"hide instructions\" />\n      </span>\n      <div className=\"blue-grey\">\n        <p>\n          <CheckCircle className=\"bg-red white\" />\n          <FormattedMessage {...messages.instructionsSelect} />\n        </p>\n        <p>\n          <CheckCircle className=\"bg-red white\" />\n          <FormattedMessage {...messages.instructionsComment} />\n        </p>\n        <p>\n          <CheckCircle className=\"bg-red white\" />\n          <FormattedMessage {...messages.instructionsSubmit} />\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport function ReopenEditor({ project, action, editor, callEditor }: Object) {\n  const editorOptions = getEditors(\n    action === 'MAPPING' ? project.mappingEditors : project.validationEditors,\n    project.customEditor,\n  );\n\n  return (\n    <div className=\"dib w-50 fl tc pt3 pb2 pr3\">\n      <span className=\"db pb2 ttu blue-grey f6 fw5\">\n        <FormattedMessage {...messages.reloadEditor} />\n      </span>\n      <Dropdown\n        options={editorOptions}\n        value={\n          editorOptions.map((i) => i.value).includes(editor)\n            ? editor\n            : editorOptions.length && editorOptions[0].value\n        }\n        display={<FormattedMessage {...messages.reloadEditor} />}\n        className=\"bg-white b--grey-light ba pa2 di\"\n        onChange={callEditor}\n        toTop={true}\n      />\n    </div>\n  );\n}\n\nexport function SidebarToggle({ setShowSidebar, activeEditor }: Object) {\n  const iDContext = useSelector((state) => state.editor.context);\n\n  return (\n    <div>\n      <FormattedMessage {...messages.hideSidebar}>\n        {(msg) => (\n          <div className=\"fr pointer\" title={msg}>\n            <SidebarIcon\n              role=\"button\"\n              aria-label=\"Hide sidebar\"\n              onClick={() => {\n                setShowSidebar(false);\n                activeEditor === 'ID' && iDContext.ui().restart();\n              }}\n            />\n          </div>\n        )}\n      </FormattedMessage>\n    </div>\n  );\n}\n\nexport function UnsavedMapChangesModalContent({ close, action }: Object) {\n  return (\n    <div className=\"blue-dark bg-white pv2 pv4-ns ph2 ph4-ns tc\">\n      <div className=\"cf tc red pb3\">\n        <AlertIcon height=\"50px\" width=\"50px\" />\n      </div>\n      <h3 className=\"barlow-condensed f3 fw6 mv0\">\n        <FormattedMessage {...messages.unsavedChanges} />\n      </h3>\n      <div className=\"mv4 lh-title\">\n        {action === 'split' && <FormattedMessage {...messages.unsavedChangesToSplit} />}\n        {action === 'unlock' && <FormattedMessage {...messages.unsavedChangesToUnlock} />}\n        {action === 'reload editor' && (\n          <FormattedMessage {...messages.unsavedChangesToReloadEditor} />\n        )}\n      </div>\n      <Button className=\"bg-red white\" onClick={() => close()}>\n        <FormattedMessage {...messages.closeModal} />\n      </Button>\n    </div>\n  );\n}\n\nfunction TaskSplitErrorModalContent({ close }: Object) {\n  return (\n    <div className=\"blue-dark bg-white pv2 pv4-ns ph2 ph4-ns tc\">\n      <div className=\"cf tc orange pb3\">\n        <AlertIcon height=\"50px\" width=\"50px\" />\n      </div>\n      <h3 className=\"barlow-condensed f3 fw6 mv0\">\n        <FormattedMessage {...messages.splitTaskError} />\n      </h3>\n      <div className=\"mv4 lh-title\">\n        <FormattedMessage {...messages.splitTaskErrorDescription} />\n      </div>\n      <Button className=\"bg-red white\" onClick={() => close()}>\n        <FormattedMessage {...messages.closeModal} />\n      </Button>\n    </div>\n  );\n}\n\nfunction TaskSpecificInstructions({ instructions, open = true }: Object) {\n  const [isOpen, setIsOpen] = useState(open);\n  return (\n    <>\n      <h4\n        className=\"ttu blue-grey mt1 mb0 pointer\"\n        role=\"button\"\n        onClick={() => setIsOpen(!isOpen)}\n        onKeyDown={() => {}}\n      >\n        {isOpen ? (\n          <ChevronDownIcon style={{ height: '14px' }} className=\"pr1 pb1 v-mid\" />\n        ) : (\n          <ChevronRightIcon style={{ height: '14px' }} className=\"pr1 pb1 v-mid\" />\n        )}\n        <FormattedMessage {...messages.taskExtraInfo} />\n      </h4>\n      {isOpen && (\n        <div\n          className=\"markdown-content\"\n          dangerouslySetInnerHTML={htmlFromMarkdown(instructions)}\n        />\n      )}\n    </>\n  );\n}\n","import { createElement, PureComponent, createContext, useState, Fragment } from 'react';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar AccordionStore = function AccordionStore(_ref) {\n  var _this = this;\n\n  var _ref$expanded = _ref.expanded,\n      _expanded = _ref$expanded === void 0 ? [] : _ref$expanded,\n      _ref$allowMultipleExp = _ref.allowMultipleExpanded,\n      allowMultipleExpanded = _ref$allowMultipleExp === void 0 ? false : _ref$allowMultipleExp,\n      _ref$allowZeroExpande = _ref.allowZeroExpanded,\n      allowZeroExpanded = _ref$allowZeroExpande === void 0 ? false : _ref$allowZeroExpande;\n\n  _classCallCheck(this, AccordionStore);\n\n  _defineProperty(this, \"expanded\", void 0);\n\n  _defineProperty(this, \"allowMultipleExpanded\", void 0);\n\n  _defineProperty(this, \"allowZeroExpanded\", void 0);\n\n  _defineProperty(this, \"toggleExpanded\", function (uuid) {\n    if (_this.isItemDisabled(uuid)) {\n      return _this;\n    }\n\n    var isExpanded = _this.isItemExpanded(uuid);\n\n    if (!isExpanded) {\n      return _this.augment({\n        expanded: _this.allowMultipleExpanded ? [].concat(_toConsumableArray(_this.expanded), [uuid]) : [uuid]\n      });\n    } else {\n      return _this.augment({\n        expanded: _this.expanded.filter(function (expandedUuid) {\n          return expandedUuid !== uuid;\n        })\n      });\n    }\n  });\n\n  _defineProperty(this, \"isItemDisabled\", function (uuid) {\n    var isExpanded = _this.isItemExpanded(uuid);\n\n    var isOnlyOneExpanded = _this.expanded.length === 1;\n    return Boolean(isExpanded && !_this.allowZeroExpanded && isOnlyOneExpanded);\n  });\n\n  _defineProperty(this, \"isItemExpanded\", function (uuid) {\n    return _this.expanded.indexOf(uuid) !== -1;\n  });\n\n  _defineProperty(this, \"getPanelAttributes\", function (uuid, dangerouslySetExpanded) {\n    var expanded = dangerouslySetExpanded !== null && dangerouslySetExpanded !== void 0 ? dangerouslySetExpanded : _this.isItemExpanded(uuid);\n    return {\n      role: _this.allowMultipleExpanded ? undefined : 'region',\n      'aria-hidden': _this.allowMultipleExpanded ? !expanded : undefined,\n      'aria-labelledby': _this.getButtonId(uuid),\n      id: _this.getPanelId(uuid),\n      hidden: expanded ? undefined : true\n    };\n  });\n\n  _defineProperty(this, \"getHeadingAttributes\", function () {\n    return {\n      role: 'heading'\n    };\n  });\n\n  _defineProperty(this, \"getButtonAttributes\", function (uuid, dangerouslySetExpanded) {\n    var expanded = dangerouslySetExpanded !== null && dangerouslySetExpanded !== void 0 ? dangerouslySetExpanded : _this.isItemExpanded(uuid);\n\n    var disabled = _this.isItemDisabled(uuid);\n\n    return {\n      id: _this.getButtonId(uuid),\n      'aria-disabled': disabled,\n      'aria-expanded': expanded,\n      'aria-controls': _this.getPanelId(uuid),\n      role: 'button',\n      tabIndex: 0\n    };\n  });\n\n  _defineProperty(this, \"getPanelId\", function (uuid) {\n    return \"accordion__panel-\".concat(uuid);\n  });\n\n  _defineProperty(this, \"getButtonId\", function (uuid) {\n    return \"accordion__heading-\".concat(uuid);\n  });\n\n  _defineProperty(this, \"augment\", function (args) {\n    return new AccordionStore(_objectSpread2({\n      expanded: _this.expanded,\n      allowMultipleExpanded: _this.allowMultipleExpanded,\n      allowZeroExpanded: _this.allowZeroExpanded\n    }, args));\n  });\n\n  this.expanded = _expanded;\n  this.allowMultipleExpanded = allowMultipleExpanded;\n  this.allowZeroExpanded = allowZeroExpanded;\n};\n\nvar Context = /*#__PURE__*/createContext(null);\nvar Provider = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(Provider, _React$PureComponent);\n\n  var _super = _createSuper(Provider);\n\n  function Provider() {\n    var _this;\n\n    _classCallCheck(this, Provider);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", new AccordionStore({\n      expanded: _this.props.preExpanded,\n      allowMultipleExpanded: _this.props.allowMultipleExpanded,\n      allowZeroExpanded: _this.props.allowZeroExpanded\n    }));\n\n    _defineProperty(_assertThisInitialized(_this), \"toggleExpanded\", function (key) {\n      _this.setState(function (state) {\n        return state.toggleExpanded(key);\n      }, function () {\n        if (_this.props.onChange) {\n          _this.props.onChange(_this.state.expanded);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isItemDisabled\", function (key) {\n      return _this.state.isItemDisabled(key);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isItemExpanded\", function (key) {\n      return _this.state.isItemExpanded(key);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getPanelAttributes\", function (key, dangerouslySetExpanded) {\n      return _this.state.getPanelAttributes(key, dangerouslySetExpanded);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getHeadingAttributes\", function () {\n      // uuid: UUID\n      return _this.state.getHeadingAttributes();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getButtonAttributes\", function (key, dangerouslySetExpanded) {\n      return _this.state.getButtonAttributes(key, dangerouslySetExpanded);\n    });\n\n    return _this;\n  }\n\n  _createClass(Provider, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          allowZeroExpanded = _this$state.allowZeroExpanded,\n          allowMultipleExpanded = _this$state.allowMultipleExpanded;\n      return /*#__PURE__*/createElement(Context.Provider, {\n        value: {\n          allowMultipleExpanded: allowMultipleExpanded,\n          allowZeroExpanded: allowZeroExpanded,\n          toggleExpanded: this.toggleExpanded,\n          isItemDisabled: this.isItemDisabled,\n          isItemExpanded: this.isItemExpanded,\n          getPanelAttributes: this.getPanelAttributes,\n          getHeadingAttributes: this.getHeadingAttributes,\n          getButtonAttributes: this.getButtonAttributes\n        }\n      }, this.props.children || null);\n    }\n  }]);\n\n  return Provider;\n}(PureComponent);\n\n_defineProperty(Provider, \"defaultProps\", {\n  allowMultipleExpanded: false,\n  allowZeroExpanded: false\n});\n\nvar Consumer = /*#__PURE__*/function (_React$PureComponent2) {\n  _inherits(Consumer, _React$PureComponent2);\n\n  var _super2 = _createSuper(Consumer);\n\n  function Consumer() {\n    var _this2;\n\n    _classCallCheck(this, Consumer);\n\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    _this2 = _super2.call.apply(_super2, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this2), \"renderChildren\", function (container) {\n      return container ? _this2.props.children(container) : null;\n    });\n\n    return _this2;\n  }\n\n  _createClass(Consumer, [{\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/createElement(Context.Consumer, null, this.renderChildren);\n    }\n  }]);\n\n  return Consumer;\n}(PureComponent);\n\nvar Accordion = function Accordion(_ref) {\n  var _ref$className = _ref.className,\n      className = _ref$className === void 0 ? 'accordion' : _ref$className,\n      allowMultipleExpanded = _ref.allowMultipleExpanded,\n      allowZeroExpanded = _ref.allowZeroExpanded,\n      onChange = _ref.onChange,\n      preExpanded = _ref.preExpanded,\n      rest = _objectWithoutProperties(_ref, [\"className\", \"allowMultipleExpanded\", \"allowZeroExpanded\", \"onChange\", \"preExpanded\"]);\n\n  return /*#__PURE__*/createElement(Provider, {\n    preExpanded: preExpanded,\n    allowMultipleExpanded: allowMultipleExpanded,\n    allowZeroExpanded: allowZeroExpanded,\n    onChange: onChange\n  }, /*#__PURE__*/createElement(\"div\", _extends({\n    \"data-accordion-component\": \"Accordion\",\n    className: className\n  }, rest)));\n};\n\nvar DisplayName;\n\n(function (DisplayName) {\n  DisplayName[\"Accordion\"] = \"Accordion\";\n  DisplayName[\"AccordionItem\"] = \"AccordionItem\";\n  DisplayName[\"AccordionItemButton\"] = \"AccordionItemButton\";\n  DisplayName[\"AccordionItemHeading\"] = \"AccordionItemHeading\";\n  DisplayName[\"AccordionItemPanel\"] = \"AccordionItemPanel\";\n})(DisplayName || (DisplayName = {}));\n\nvar DisplayName$1 = DisplayName;\n\nvar DEFAULT = 0;\nvar counter = DEFAULT;\nfunction nextUuid() {\n  var current = counter;\n  counter = counter + 1;\n  return \"raa-\".concat(current);\n}\nfunction resetNextUuid() {\n  counter = DEFAULT;\n} // HTML5 ids allow all unicode characters, except for ASCII whitespaces\n// https://infra.spec.whatwg.org/#ascii-whitespace\n// eslint-disable-next-line no-control-regex\n\nvar idRegex = /[\\u0009\\u000a\\u000c\\u000d\\u0020]/g;\nfunction assertValidHtmlId(htmlId) {\n  if (htmlId === '' || idRegex.test(htmlId)) {\n    console.error(\"uuid must be a valid HTML5 id but was given \\\"\".concat(htmlId, \"\\\", ASCII whitespaces are forbidden\"));\n    return false;\n  }\n\n  return true;\n}\n\nvar Context$1 = /*#__PURE__*/createContext(null);\n\nvar Provider$1 = function Provider(_ref) {\n  var children = _ref.children,\n      uuid = _ref.uuid,\n      accordionContext = _ref.accordionContext,\n      dangerouslySetExpanded = _ref.dangerouslySetExpanded;\n\n  var toggleExpanded = function toggleExpanded() {\n    accordionContext.toggleExpanded(uuid);\n  };\n\n  var renderChildren = function renderChildren(accordionContext) {\n    var expanded = dangerouslySetExpanded !== null && dangerouslySetExpanded !== void 0 ? dangerouslySetExpanded : accordionContext.isItemExpanded(uuid);\n    var disabled = accordionContext.isItemDisabled(uuid);\n    var panelAttributes = accordionContext.getPanelAttributes(uuid, dangerouslySetExpanded);\n    var headingAttributes = accordionContext.getHeadingAttributes(uuid);\n    var buttonAttributes = accordionContext.getButtonAttributes(uuid, dangerouslySetExpanded);\n    return /*#__PURE__*/createElement(Context$1.Provider, {\n      value: {\n        uuid: uuid,\n        expanded: expanded,\n        disabled: disabled,\n        toggleExpanded: toggleExpanded,\n        panelAttributes: panelAttributes,\n        headingAttributes: headingAttributes,\n        buttonAttributes: buttonAttributes\n      }\n    }, children);\n  };\n\n  return /*#__PURE__*/createElement(Consumer, null, renderChildren);\n};\n\nvar ProviderWrapper = function ProviderWrapper(props) {\n  return /*#__PURE__*/createElement(Consumer, null, function (accordionContext) {\n    return /*#__PURE__*/createElement(Provider$1, _extends({}, props, {\n      accordionContext: accordionContext\n    }));\n  });\n};\nvar Consumer$1 = function Consumer(_ref2) {\n  var children = _ref2.children;\n\n  var renderChildren = function renderChildren(container) {\n    return container ? children(container) : null;\n  };\n\n  return /*#__PURE__*/createElement(Context$1.Consumer, null, renderChildren);\n};\n\nvar AccordionItem = function AccordionItem(_ref) {\n  var customUuid = _ref.uuid,\n      dangerouslySetExpanded = _ref.dangerouslySetExpanded,\n      _ref$className = _ref.className,\n      className = _ref$className === void 0 ? 'accordion__item' : _ref$className,\n      activeClassName = _ref.activeClassName,\n      rest = _objectWithoutProperties(_ref, [\"uuid\", \"dangerouslySetExpanded\", \"className\", \"activeClassName\"]);\n\n  var _useState = useState(nextUuid()),\n      _useState2 = _slicedToArray(_useState, 1),\n      instanceUuid = _useState2[0];\n\n  var uuid = customUuid !== null && customUuid !== void 0 ? customUuid : instanceUuid;\n\n  var renderChildren = function renderChildren(itemContext) {\n    var expanded = itemContext.expanded;\n    var cx = expanded && activeClassName ? activeClassName : className;\n    return /*#__PURE__*/createElement(\"div\", _extends({\n      \"data-accordion-component\": \"AccordionItem\",\n      className: cx\n    }, rest));\n  };\n\n  assertValidHtmlId(uuid.toString());\n\n  if (rest.id) {\n    assertValidHtmlId(rest.id);\n  }\n\n  return /*#__PURE__*/createElement(ProviderWrapper, {\n    uuid: uuid,\n    dangerouslySetExpanded: dangerouslySetExpanded\n  }, /*#__PURE__*/createElement(Consumer$1, null, renderChildren));\n};\n\nAccordionItem.displayName = DisplayName$1.AccordionItem;\n\nfunction getClosestAccordion(el) {\n  return el && (el.matches('[data-accordion-component=\"Accordion\"]') ? el : getClosestAccordion(el.parentElement));\n}\nfunction getSiblingButtons(item) {\n  var parentAccordion = getClosestAccordion(item);\n  return parentAccordion && Array.from(parentAccordion.querySelectorAll('[data-accordion-component=\"AccordionItemButton\"]'));\n}\nfunction focusFirstSiblingOf(item) {\n  var siblings = getSiblingButtons(item) || [];\n  var first = siblings[0];\n\n  if (first) {\n    first.focus();\n  }\n}\nfunction focusLastSiblingOf(item) {\n  var siblings = getSiblingButtons(item) || [];\n  var last = siblings[siblings.length - 1];\n\n  if (last) {\n    last.focus();\n  }\n}\nfunction focusNextSiblingOf(item) {\n  var siblings = getSiblingButtons(item) || [];\n  var currentIndex = siblings.indexOf(item);\n\n  if (currentIndex !== -1) {\n    var next = siblings[currentIndex + 1];\n\n    if (next) {\n      next.focus();\n    }\n  }\n}\nfunction focusPreviousSiblingOf(item) {\n  var siblings = getSiblingButtons(item) || [];\n  var currentIndex = siblings.indexOf(item);\n\n  if (currentIndex !== -1) {\n    var previous = siblings[currentIndex - 1];\n\n    if (previous) {\n      previous.focus();\n    }\n  }\n}\n\nvar keycodes = {\n  END: 'End',\n  ENTER: 'Enter',\n  HOME: 'Home',\n  SPACE: ' ',\n  SPACE_DEPRECATED: 'Spacebar',\n  UP: 'ArrowUp',\n  DOWN: 'ArrowDown',\n  LEFT: 'ArrowLeft',\n  RIGHT: 'ArrowRight'\n};\n\nvar AccordionItemButton = function AccordionItemButton(_ref) {\n  var toggleExpanded = _ref.toggleExpanded,\n      _ref$className = _ref.className,\n      className = _ref$className === void 0 ? 'accordion__button' : _ref$className,\n      rest = _objectWithoutProperties(_ref, [\"toggleExpanded\", \"className\"]);\n\n  var handleKeyPress = function handleKeyPress(evt) {\n    var keyCode = evt.key;\n\n    if (keyCode === keycodes.ENTER || keyCode === keycodes.SPACE || keyCode === keycodes.SPACE_DEPRECATED) {\n      evt.preventDefault();\n      toggleExpanded();\n    }\n    /* The following block is ignored from test coverage because at time\n     * time of writing Jest/react-testing-library can not assert 'focus'\n     * functionality.\n     */\n    // istanbul ignore next\n\n\n    if (evt.target instanceof HTMLElement) {\n      switch (keyCode) {\n        case keycodes.HOME:\n          {\n            evt.preventDefault();\n            focusFirstSiblingOf(evt.target);\n            break;\n          }\n\n        case keycodes.END:\n          {\n            evt.preventDefault();\n            focusLastSiblingOf(evt.target);\n            break;\n          }\n\n        case keycodes.LEFT:\n        case keycodes.UP:\n          {\n            evt.preventDefault();\n            focusPreviousSiblingOf(evt.target);\n            break;\n          }\n\n        case keycodes.RIGHT:\n        case keycodes.DOWN:\n          {\n            evt.preventDefault();\n            focusNextSiblingOf(evt.target);\n            break;\n          }\n      }\n    }\n  };\n\n  if (rest.id) {\n    assertValidHtmlId(rest.id);\n  }\n\n  return /*#__PURE__*/createElement(\"div\", _extends({\n    className: className\n  }, rest, {\n    role: \"button\",\n    tabIndex: 0,\n    onClick: toggleExpanded,\n    onKeyDown: handleKeyPress,\n    \"data-accordion-component\": \"AccordionItemButton\"\n  }));\n};\n\nvar AccordionItemButtonWrapper = function AccordionItemButtonWrapper(props) {\n  return /*#__PURE__*/createElement(Consumer$1, null, function (itemContext) {\n    var toggleExpanded = itemContext.toggleExpanded,\n        buttonAttributes = itemContext.buttonAttributes;\n    return /*#__PURE__*/createElement(AccordionItemButton, _extends({\n      toggleExpanded: toggleExpanded\n    }, props, buttonAttributes));\n  });\n};\n\nvar defaultProps = {\n  className: 'accordion__heading',\n  'aria-level': 3\n};\nvar SPEC_ERROR = \"AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.\\n\\nFrom the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):\\n\\n\\u201CThe button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.\\u201D\\n\\n\";\nvar AccordionItemHeading = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(AccordionItemHeading, _React$PureComponent);\n\n  var _super = _createSuper(AccordionItemHeading);\n\n  function AccordionItemHeading() {\n    var _this;\n\n    _classCallCheck(this, AccordionItemHeading);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"ref\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"setRef\", function (ref) {\n      _this.ref = ref;\n    });\n\n    return _this;\n  }\n\n  _createClass(AccordionItemHeading, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      AccordionItemHeading.VALIDATE(this.ref);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      AccordionItemHeading.VALIDATE(this.ref);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/createElement(\"div\", _extends({\n        \"data-accordion-component\": \"AccordionItemHeading\"\n      }, this.props, {\n        ref: this.setRef\n      }));\n    }\n  }], [{\n    key: \"VALIDATE\",\n    value: function VALIDATE(ref) {\n      if (ref === undefined) {\n        throw new Error('ref is undefined');\n      }\n\n      if (!(ref.childElementCount === 1 && ref.firstElementChild && ref.firstElementChild.getAttribute('data-accordion-component') === 'AccordionItemButton')) {\n        throw new Error(SPEC_ERROR);\n      }\n    }\n  }]);\n\n  return AccordionItemHeading;\n}(PureComponent);\n\n_defineProperty(AccordionItemHeading, \"defaultProps\", defaultProps);\n\nvar AccordionItemHeadingWrapper = function AccordionItemHeadingWrapper(props) {\n  return /*#__PURE__*/createElement(Consumer$1, null, function (itemContext) {\n    var headingAttributes = itemContext.headingAttributes;\n\n    if (props.id) {\n      assertValidHtmlId(props.id);\n    }\n\n    return /*#__PURE__*/createElement(AccordionItemHeading, _extends({}, props, headingAttributes));\n  });\n};\n\nAccordionItemHeadingWrapper.displayName = DisplayName$1.AccordionItemHeading;\n\nvar AccordionItemPanel = function AccordionItemPanel(_ref) {\n  var _ref$className = _ref.className,\n      className = _ref$className === void 0 ? 'accordion__panel' : _ref$className,\n      region = _ref.region,\n      id = _ref.id,\n      rest = _objectWithoutProperties(_ref, [\"className\", \"region\", \"id\"]);\n\n  var renderChildren = function renderChildren(_ref2) {\n    var panelAttributes = _ref2.panelAttributes;\n\n    if (id) {\n      assertValidHtmlId(id);\n    }\n\n    var attrs = _objectSpread2(_objectSpread2({}, panelAttributes), {}, {\n      'aria-labelledby': region ? panelAttributes['aria-labelledby'] : undefined\n    });\n\n    return /*#__PURE__*/createElement(\"div\", _extends({\n      \"data-accordion-component\": \"AccordionItemPanel\",\n      className: className\n    }, rest, attrs, {\n      role: region ? 'region' : undefined\n    }));\n  };\n\n  return /*#__PURE__*/createElement(Consumer$1, null, renderChildren);\n};\n\nvar AccordionItemState = function AccordionItemState(_ref) {\n  var children = _ref.children;\n\n  var renderChildren = function renderChildren(itemContext) {\n    var expanded = itemContext.expanded,\n        disabled = itemContext.disabled;\n    return /*#__PURE__*/createElement(Fragment, null, children({\n      expanded: expanded,\n      disabled: disabled\n    }));\n  };\n\n  return /*#__PURE__*/createElement(Consumer$1, null, renderChildren);\n};\n\nexport { Accordion, AccordionItem, AccordionItemButtonWrapper as AccordionItemButton, AccordionItemHeadingWrapper as AccordionItemHeading, AccordionItemPanel, AccordionItemState, resetNextUuid };\n","import React from 'react';\nimport {\n  Accordion,\n  AccordionItem,\n  AccordionItemHeading,\n  AccordionItemButton,\n  AccordionItemPanel,\n} from 'react-accessible-accordion';\nimport { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\nimport { TaskHistory } from './taskActivity';\n\nexport const MultipleTaskHistoriesAccordion = ({ tasks, projectId }) => {\n  return (\n    <Accordion className=\"bn\" allowMultipleExpanded allowZeroExpanded>\n      {tasks\n        .sort((n1, n2) => n1.taskId - n2.taskId)\n        .map((t) => (\n          <AccordionItem className=\"bb b--light-gray\" key={t.taskId} uuid={t.taskId}>\n            <AccordionItemHeading className=\"b ttu tracked\">\n              <AccordionItemButton className=\"bg-white blue-grey pointer pa3 w-100 tl bn accordion_button\">\n                <FormattedMessage {...messages.taskActivity} values={{ n: t.taskId }} />\n              </AccordionItemButton>\n            </AccordionItemHeading>\n            <AccordionItemPanel className=\"ph2 pb2 accordion_panel\">\n              <TaskHistory projectId={projectId} taskId={t.taskId} />\n            </AccordionItemPanel>\n          </AccordionItem>\n        ))}\n    </Accordion>\n  );\n};\n","import React, { useMemo, useState } from 'react';\nimport Select from 'react-select';\nimport { FormattedMessage } from 'react-intl';\n\nimport messages from './messages';\nimport { useTaskBbox } from '../../hooks/UseTaskBbox';\nimport { formatOSMChaLink } from '../../utils/osmchaLink';\nimport { ExternalLinkIcon } from '../svgIcons';\nimport { CustomButton } from '../button';\nimport { OSMChaButton } from '../projectDetail/osmchaButton';\nimport { DownloadAOIButton, DownloadTaskGridButton } from '../projectDetail/downloadButtons';\n\nexport const ResourcesTab = ({ project, tasksIds, tasksGeojson }) => {\n  const [activeTask, setActiveTask] = useState(tasksIds.length === 1 ? tasksIds[0] : null);\n  const bbox = useTaskBbox(activeTask, tasksGeojson);\n  const osmchaLink = useMemo(\n    () =>\n      formatOSMChaLink({\n        aoiBBOX: bbox,\n        created: project.created,\n        changesetComment: project.changesetComment,\n      }),\n    [bbox, project.created, project.changesetComment],\n  );\n\n  return (\n    <>\n      <h4 className=\"ttu blue-grey f5\">\n        <FormattedMessage {...messages.changesets} />\n      </h4>\n      <div className=\"ph2\">\n        <p>\n          <OSMChaButton project={project}>\n            <CustomButton className=\"bg-white blue-dark ba b--grey-light pv2 ph3\">\n              <FormattedMessage {...messages.entireProject} />\n              <ExternalLinkIcon className=\"pl2\" />\n            </CustomButton>\n          </OSMChaButton>\n        </p>\n        <div className=\"w-100 cf flex flex-wrap\">\n          {tasksIds.length > 1 && (\n            <Select\n              classNamePrefix=\"react-select\"\n              className=\"z-4 flex-auto fl mr3 pb2\"\n              isClearable={false}\n              getOptionLabel={(option) => option.label}\n              getOptionValue={(option) => option.value}\n              isMulti={false}\n              options={tasksIds.map((id) => ({ label: id, value: id }))}\n              placeholder={<FormattedMessage {...messages.selectTask} />}\n              isSearchable={true}\n              onChange={(selected) => setActiveTask(selected.value)}\n            />\n          )}\n          <a href={osmchaLink} target=\"_blank\" rel=\"noopener noreferrer\">\n            <CustomButton className={'bg-red b--red white ba pv2 ph3'} disabled={!activeTask}>\n              <FormattedMessage {...messages.seeTaskChangesets} />\n              <ExternalLinkIcon className=\"pl2\" />\n            </CustomButton>\n          </a>\n        </div>\n      </div>\n      <h4 className=\"ttu blue-grey f5\">\n        <FormattedMessage {...messages.projectData} />\n      </h4>\n      <div className=\"flex flex-wrap gap-1\">\n        <DownloadAOIButton\n          projectId={project.projectId}\n          className=\"bg-white blue-dark ba b--grey-light pv2 ph3\"\n        />\n        <DownloadTaskGridButton\n          projectId={project.projectId}\n          className=\"bg-white blue-dark ba b--grey-light pv2 ph3\"\n        />\n      </div>\n    </>\n  );\n};\n","import { useMemo } from 'react';\nimport bbox from '@turf/bbox';\n\nexport const useTaskBbox = (taskId, geojson) => {\n  const getTaskBBox = useMemo(() => {\n    if (geojson && geojson.features) {\n      const filteredTasks = geojson.features.filter((task) => task.properties.taskId === taskId);\n      if (filteredTasks && filteredTasks.length && filteredTasks[0].geometry)\n        return bbox(filteredTasks[0].geometry);\n    }\n  }, [taskId, geojson]);\n  return getTaskBBox;\n};\n","import React, { useRef } from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport { HorizontalScroll } from '../horizontalScroll';\nimport messages from './messages';\n\nexport const ActionTabsNav = ({\n  activeSection,\n  setActiveSection,\n  activeTasks,\n  historyTabSwitch,\n  taskHistoryLength,\n  action,\n}) => {\n  const tabContainerRef = useRef(null);\n\n  return (\n    <HorizontalScroll\n      menuItemsContainerRef={tabContainerRef}\n      containerClass=\".menu-items-container\"\n      className=\"mb3\"\n    >\n      <div\n        ref={tabContainerRef}\n        className=\"ttu w-100 barlow-condensed menu-items-container f4 blue-dark nowrap bb b--grey-light fw5 overflow-x-auto\"\n      >\n        <span\n          role=\"button\"\n          className={`dib mr4-l mr3 pb2 pointer ${\n            activeSection === 'completion' && 'bb b--red bw1'\n          }`}\n          onClick={() => setActiveSection('completion')}\n        >\n          <FormattedMessage {...messages.completion} />\n        </span>\n        <span\n          role=\"button\"\n          className={`dib mr4-l mr3 pb2 pointer ${\n            activeSection === 'instructions' && 'bb b--red bw1'\n          }`}\n          onClick={() => setActiveSection('instructions')}\n        >\n          <FormattedMessage {...messages.instructions} />\n        </span>\n        <span\n          role=\"button\"\n          className={`inline-flex items-center mr4-l mr3 pb2 pointer ${\n            activeSection === 'history' && 'bb b--red bw1'\n          }`}\n          onClick={() => historyTabSwitch()}\n        >\n          <FormattedMessage {...messages.history} />\n          {activeTasks.length === 1 && taskHistoryLength > 1 && (\n            <span\n              className=\"bg-red white br-100 f6 ml1 flex items-center justify-center\"\n              style={{ height: '1.125rem', width: '1.125rem' }}\n            >\n              {taskHistoryLength}\n            </span>\n          )}\n        </span>\n        {action === 'VALIDATION' && (\n          <span\n            role=\"button\"\n            className={`dib mr4-l mr3 pb2 pointer ${\n              activeSection === 'resources' && 'bb b--red bw1'\n            }`}\n            onClick={() => setActiveSection('resources')}\n          >\n            <FormattedMessage {...messages.resources} />\n          </span>\n        )}\n      </div>\n    </HorizontalScroll>\n  );\n};\n","import { useState } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport Popup from 'reactjs-popup';\n\nimport { Button } from '../button';\nimport { Alert } from '../alert';\nimport { pushToLocalJSONAPI } from '../../network/genericJSONRequest';\nimport messages from './messages';\n\nexport function SessionAboutToExpire({\n  showSessionExpiringDialog,\n  setShowSessionExpiryDialog,\n  projectId,\n  token,\n  tasksIds,\n  getTasks,\n  expiredTimeoutRef,\n}) {\n  const [isSessionExtended, setIsSessionExtended] = useState(false);\n  const [isError, setIsError] = useState(false);\n\n  const handleTimeExtend = () => {\n    setIsError(false);\n    pushToLocalJSONAPI(\n      `projects/${projectId}/tasks/actions/extend/`,\n      JSON.stringify({ taskIds: tasksIds }),\n      token,\n    )\n      .then(() => {\n        setIsSessionExtended(true);\n        clearTimeout(expiredTimeoutRef.current);\n        setTimeout(handleClose, 6969);\n        getTasks();\n      })\n      .catch(() => setIsError(true));\n  };\n\n  const handleClose = () => {\n    setShowSessionExpiryDialog(false);\n    setIsSessionExtended(false);\n    setIsError(false);\n  };\n\n  return (\n    <Popup\n      modal\n      open={showSessionExpiringDialog}\n      closeOnEscape={true}\n      closeOnDocumentClick={true}\n      onClose={handleClose}\n    >\n      {(close) => (\n        <div className=\"blue-dark bg-white pv2 pv4-ns ph2 ph4-ns\">\n          <h3 className=\"barlow-condensed f3 fw6 mv0\">\n            <FormattedMessage {...messages.sessionAboutToExpireTitle} />\n          </h3>\n          <div className=\"mv4 lh-title\">\n            <FormattedMessage {...messages.sessionAboutToExpireDescription} />\n          </div>\n          {isSessionExtended && (\n            <Alert type=\"success\">\n              <FormattedMessage {...messages.sessionExtended} />\n            </Alert>\n          )}\n          {isError && (\n            <Alert type=\"error\">\n              <FormattedMessage {...messages.sessionExtensionError} />\n            </Alert>\n          )}\n          <div className={`flex justify-end ${isSessionExtended || isError ? 'mt4' : ''}`}>\n            <Button onClick={close}>Close</Button>\n            {!isSessionExtended && (\n              <Button className=\"bg-red white ml3\" onClick={handleTimeExtend}>\n                <FormattedMessage {...messages.extendTime} />\n              </Button>\n            )}\n          </div>\n        </div>\n      )}\n    </Popup>\n  );\n}\n\nexport function SessionExpired({\n  showSessionExpiredDialog,\n  setShowSessionExpiredDialog,\n  projectId,\n  token,\n  tasksIds,\n  action,\n  getTasks,\n}) {\n  const [isTaskRelocked, setIsTaskRelocked] = useState(false);\n  const [isError, setIsError] = useState(false);\n\n  const handleTimeExtend = () => {\n    setIsError(false);\n    const url =\n      action === 'MAPPING'\n        ? `projects/${projectId}/tasks/actions/lock-for-mapping/${tasksIds[0]}/`\n        : `projects/${projectId}/tasks/actions/lock-for-validation/`;\n\n    pushToLocalJSONAPI(url, JSON.stringify({ taskIds: tasksIds }), token)\n      .then(() => {\n        setIsTaskRelocked(true);\n        setTimeout(handleClose, 6969);\n        getTasks();\n      })\n      .catch(() => setIsError(true));\n  };\n\n  const handleClose = () => {\n    setShowSessionExpiredDialog(false);\n    setIsTaskRelocked(false);\n    setIsError(false);\n  };\n\n  return (\n    <Popup\n      modal\n      open={showSessionExpiredDialog}\n      closeOnEscape={true}\n      closeOnDocumentClick={true}\n      onClose={handleClose}\n    >\n      {(close) => (\n        <div className=\"blue-dark bg-white pv2 pv4-ns ph2 ph4-ns\">\n          <h3 className=\"barlow-condensed f3 fw6 mv0\">\n            <FormattedMessage {...messages.sessionExpiredTitle} />\n          </h3>\n          <div className=\"mv4 lh-title\">\n            <FormattedMessage\n              {...messages.sessionExpiredDescription}\n              values={{ count: tasksIds.length }}\n            />\n          </div>\n          {isTaskRelocked && (\n            <Alert type=\"success\">\n              <FormattedMessage {...messages.taskRelocked} values={{ count: tasksIds.length }} />\n            </Alert>\n          )}\n          {isError && (\n            <Alert type=\"error\">\n              <FormattedMessage {...messages.taskRelockError} values={{ count: tasksIds.length }} />\n            </Alert>\n          )}\n          <div className={`flex justify-end ${isTaskRelocked || isError ? 'mt4' : ''}`}>\n            <Button onClick={close}>Close</Button>\n            {!isTaskRelocked && (\n              <Button className=\"bg-red white ml3\" onClick={handleTimeExtend}>\n                <FormattedMessage {...messages.relockTask} values={{ count: tasksIds.length }} />\n              </Button>\n            )}\n          </div>\n        </div>\n      )}\n    </Popup>\n  );\n}\n","import React, { useState, useEffect, useCallback, useMemo, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport ReactPlaceholder from 'react-placeholder';\nimport Popup from 'reactjs-popup';\nimport toast from 'react-hot-toast';\nimport { FormattedMessage, useIntl } from 'react-intl';\n\nimport messages from './messages';\nimport { ProjectInstructions } from './instructions';\nimport { TasksMap } from './map';\nimport { HeaderLine } from '../projectDetail/header';\nimport { Button } from '../button';\nimport Portal from '../portal';\nimport { SidebarIcon } from '../svgIcons';\nimport { openEditor, getTaskGpxUrl, formatImageryUrl, formatJosmUrl } from '../../utils/openEditor';\nimport { getTaskContributors } from '../../utils/getTaskContributors';\nimport { TaskHistory } from './taskActivity';\nimport { ChangesetCommentTags } from './changesetComment';\nimport { useSetProjectPageTitleTag } from '../../hooks/UseMetaTags';\nimport { useReadTaskComments } from '../../hooks/UseReadTaskComments';\nimport { useDisableBadImagery } from '../../hooks/UseDisableBadImagery';\nimport { DueDateBox } from '../projectCard/dueDateBox';\nimport {\n  CompletionTabForMapping,\n  CompletionTabForValidation,\n  SidebarToggle,\n  ReopenEditor,\n  UnsavedMapChangesModalContent,\n} from './actionSidebars';\nimport { MultipleTaskHistoriesAccordion } from './multipleTaskHistories';\nimport { ResourcesTab } from './resourcesTab';\nimport { ActionTabsNav } from './actionTabsNav';\nimport { LockedTaskModalContent } from './lockedTasks';\nimport { SessionAboutToExpire, SessionExpired } from './extendSession';\nimport { MappingTypes } from '../mappingTypes';\nimport { usePriorityAreasQuery, useTaskDetail } from '../../api/projects';\n\nconst Editor = React.lazy(() => import('../editor'));\nconst RapiDEditor = React.lazy(() => import('../rapidEditor'));\n\nconst MINUTES_BEFORE_DIALOG = 5;\n\nexport function TaskMapAction({ project, tasks, activeTasks, getTasks, action, editor }) {\n  useSetProjectPageTitleTag(project);\n  const intl = useIntl();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const aboutToExpireTimeoutRef = useRef();\n  const expiredTimeoutRef = useRef();\n  const userDetails = useSelector((state) => state.auth.userDetails);\n  const token = useSelector((state) => state.auth.token);\n  const [activeSection, setActiveSection] = useState('completion');\n  const [activeEditor, setActiveEditor] = useState(editor);\n  const [showSidebar, setShowSidebar] = useState(true);\n  const [isJosmError, setIsJosmError] = useState(false);\n  const tasksIds = useMemo(\n    () =>\n      activeTasks\n        ? activeTasks\n            .map((task) => task.taskId)\n            .sort((n1, n2) => {\n              // in ascending order\n              return n1 - n2;\n            })\n        : [],\n    [activeTasks],\n  );\n  const [disabled, setDisable] = useState(false);\n  const [taskComment, setTaskComment] = useState('');\n  const [selectedStatus, setSelectedStatus] = useState();\n  const [validationComments, setValidationComments] = useState({});\n  const [validationStatus, setValidationStatus] = useState({});\n  const [historyTabChecked, setHistoryTabChecked] = useState(false);\n  const [showMapChangesModal, setShowMapChangesModal] = useState(false);\n  const [showSessionExpiringDialog, setShowSessionExpiringDialog] = useState(false);\n  const [showSessionExpiredDialog, setSessionTimeExpiredDialog] = useState(false);\n\n  const activeTask = activeTasks?.[0];\n  const timer = new Date(activeTask.lastUpdated);\n  timer.setSeconds(timer.getSeconds() + activeTask.autoUnlockSeconds);\n  //eslint-disable-next-line\n  const { data: taskDetail } = useTaskDetail(project.projectId, tasksIds[0]);\n  const { data: priorityArea, isError: isPriorityAreaError } = usePriorityAreasQuery(\n    project.projectId,\n  );\n\n  const contributors = taskDetail?.taskHistory\n    ? getTaskContributors(taskDetail.taskHistory, userDetails.username)\n    : [];\n\n  const readTaskComments = useReadTaskComments(taskDetail);\n  const disableBadImagery = useDisableBadImagery(taskDetail);\n\n  const getTaskGpxUrlCallback = useCallback((project, tasks) => getTaskGpxUrl(project, tasks), []);\n  const formatImageryUrlCallback = useCallback((imagery) => formatImageryUrl(imagery), []);\n\n  const historyTabSwitch = () => {\n    setHistoryTabChecked(true);\n    setActiveSection('history');\n  };\n\n  useEffect(() => {\n    const tempTimer = new Date(activeTask.lastUpdated);\n    tempTimer.setSeconds(tempTimer.getSeconds() + activeTask.autoUnlockSeconds);\n    const milliDifferenceForSessionExpire = new Date(tempTimer) - Date.now();\n    const milliDifferenceForAboutToSessionExpire =\n      milliDifferenceForSessionExpire - MINUTES_BEFORE_DIALOG * 60 * 1000;\n\n    aboutToExpireTimeoutRef.current = setTimeout(() => {\n      setSessionTimeExpiredDialog(false);\n      setShowSessionExpiringDialog(true);\n    }, milliDifferenceForAboutToSessionExpire);\n\n    expiredTimeoutRef.current = setTimeout(() => {\n      setShowSessionExpiringDialog(false);\n      setSessionTimeExpiredDialog(true);\n    }, milliDifferenceForSessionExpire);\n\n    return () => {\n      clearTimeout(aboutToExpireTimeoutRef.current);\n      clearTimeout(expiredTimeoutRef.current);\n    };\n  }, [activeTask.autoUnlockSeconds, activeTask.lastUpdated]);\n\n  useEffect(() => {\n    if (!editor && userDetails.defaultEditor && tasks && tasksIds) {\n      let editorToUse;\n      if (action === 'MAPPING') {\n        editorToUse = project.mappingEditors.includes(userDetails.defaultEditor)\n          ? [userDetails.defaultEditor]\n          : project.mappingEditors;\n      } else {\n        editorToUse = project.validationEditors.includes(userDetails.defaultEditor)\n          ? [userDetails.defaultEditor]\n          : project.validationEditors;\n      }\n      const url = openEditor(\n        editorToUse[0],\n        project,\n        tasks,\n        tasksIds,\n        [window.innerWidth, window.innerHeight],\n        null,\n      );\n\n      if (url) {\n        navigate(`./${url}`);\n      } else {\n        navigate(`./?editor=${editorToUse[0]}`);\n      }\n    }\n  }, [editor, project, userDetails.defaultEditor, action, tasks, tasksIds, navigate]);\n\n  useEffect(() => {\n    if (location.state?.directedFrom) {\n      localStorage.setItem('lastProjectPathname', location.state.directedFrom);\n    } else {\n      localStorage.removeItem('lastProjectPathname');\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    isPriorityAreaError &&\n      !['ID', 'RAPID'].includes(editor) &&\n      toast.error(<FormattedMessage {...messages.priorityAreasLoadingError} />);\n  }, [editor, isPriorityAreaError]);\n\n  const callEditor = async (arr) => {\n    setIsJosmError(false);\n    if (!disabled) {\n      setActiveEditor(arr[0].value);\n      const url = openEditor(\n        arr[0].value,\n        project,\n        tasks,\n        tasksIds,\n        [window.innerWidth, window.innerHeight],\n        null,\n      );\n      if (url) {\n        navigate(`./${url}`);\n        if (arr[0].value === 'JOSM') {\n          try {\n            await fetch(formatJosmUrl('version', { jsonp: 'checkJOSM' }));\n          } catch (e) {\n            setIsJosmError(true);\n            return;\n          }\n        }\n      } else {\n        navigate(`./?editor=${arr[0].value}`);\n      }\n    } else {\n      // we need to return a promise in order to be called by useAsync\n      return new Promise((resolve, reject) => {\n        setShowMapChangesModal('reload editor');\n        resolve();\n      });\n    }\n  };\n\n  return (\n    <>\n      <Portal>\n        <div className=\"cf w-100 vh-minus-69-ns overflow-y-hidden\">\n          <div className={`fl h-100 relative ${showSidebar ? 'w-70' : 'w-100-minus-4rem'}`}>\n            {['ID', 'RAPID'].includes(editor) ? (\n              <React.Suspense\n                fallback={\n                  <div className={`w7 h5 center`}>\n                    <ReactPlaceholder\n                      showLoadingAnimation={true}\n                      type=\"media\"\n                      rows={26}\n                      ready={false}\n                    />\n                  </div>\n                }\n              >\n                {editor === 'ID' ? (\n                  <Editor\n                    setDisable={setDisable}\n                    comment={project.changesetComment}\n                    presets={project.idPresets}\n                    imagery={formatImageryUrlCallback(project.imagery)}\n                    gpxUrl={getTaskGpxUrlCallback(project.projectId, tasksIds)}\n                  />\n                ) : (\n                  <RapiDEditor\n                    setDisable={setDisable}\n                    comment={project.changesetComment}\n                    presets={project.idPresets}\n                    imagery={formatImageryUrlCallback(project.imagery)}\n                    gpxUrl={getTaskGpxUrlCallback(project.projectId, tasksIds)}\n                    powerUser={project.rapidPowerUser}\n                    showSidebar={showSidebar}\n                  />\n                )}\n              </React.Suspense>\n            ) : (\n              <ReactPlaceholder\n                showLoadingAnimation={true}\n                type=\"media\"\n                rows={26}\n                delay={10}\n                ready={Boolean(tasks?.features !== undefined)}\n              >\n                <TasksMap\n                  mapResults={tasks}\n                  className=\"dib w-100 fl h-100-ns vh-75\"\n                  taskBordersOnly={false}\n                  animateZoom={false}\n                  selected={tasksIds}\n                  showTaskIds={action === 'VALIDATION'}\n                  priorityAreas={priorityArea}\n                />\n              </ReactPlaceholder>\n            )}\n          </div>\n          {showSidebar ? (\n            <div className=\"w-30 fr pt3 ph3 h-100 overflow-y-scroll base-font bg-white\">\n              <ReactPlaceholder\n                showLoadingAnimation={true}\n                rows={3}\n                ready={typeof project.projectId === 'number' && project.projectId > 0}\n              >\n                {(activeEditor === 'ID' || activeEditor === 'RAPID') && (\n                  <SidebarToggle setShowSidebar={setShowSidebar} activeEditor={activeEditor} />\n                )}\n                <HeaderLine\n                  author={project.author}\n                  projectId={project.projectId}\n                  organisation={project.organisationName}\n                />\n                <div className=\"cf pb3\">\n                  <h3\n                    className=\"f2 fw5 lh-title mt2 mb1 ttu barlow-condensed blue-dark\"\n                    lang={project.projectInfo && project.projectInfo.locale}\n                  >\n                    {project.projectInfo && project.projectInfo.name}\n                    <span className=\"pl2\">&#183;</span>\n                    {tasksIds.map((task, n) => (\n                      <span key={n}>\n                        <span className=\"red dib ph2\">{`#${task}`}</span>\n                        {tasksIds.length > 1 && n !== tasksIds.length - 1 ? (\n                          <span className=\"blue-light\">&#183;</span>\n                        ) : (\n                          ''\n                        )}\n                      </span>\n                    ))}\n                  </h3>\n                  <div className=\"db\" title={intl.formatMessage(messages.timeToUnlock)}>\n                    <DueDateBox dueDate={timer} isTaskStatusPage intervalMili={60000} />\n                  </div>\n                </div>\n                <MappingTypes types={project.mappingTypes} />\n                <div className=\"cf mt3\">\n                  <ActionTabsNav\n                    activeSection={activeSection}\n                    setActiveSection={setActiveSection}\n                    activeTasks={activeTasks}\n                    historyTabSwitch={historyTabSwitch}\n                    taskHistoryLength={taskDetail?.taskHistory?.length}\n                    action={action}\n                  />\n                </div>\n                <div className=\"pt0\">\n                  {activeSection === 'completion' && (\n                    <>\n                      {action === 'MAPPING' && (\n                        <CompletionTabForMapping\n                          project={project}\n                          tasksIds={tasksIds}\n                          showReadCommentsAlert={readTaskComments && !historyTabChecked}\n                          disableBadImagery={\n                            userDetails.mappingLevel !== 'ADVANCED' || disableBadImagery\n                          }\n                          contributors={contributors}\n                          historyTabSwitch={historyTabSwitch}\n                          taskInstructions={activeTasks && activeTasks[0].perTaskInstructions}\n                          disabled={disabled}\n                          taskComment={taskComment}\n                          setTaskComment={setTaskComment}\n                          selectedStatus={selectedStatus}\n                          setSelectedStatus={setSelectedStatus}\n                        />\n                      )}\n                      {action === 'VALIDATION' && (\n                        <CompletionTabForValidation\n                          project={project}\n                          tasksIds={tasksIds}\n                          taskInstructions={activeTasks && activeTasks[0].perTaskInstructions}\n                          disabled={disabled}\n                          contributors={contributors}\n                          validationComments={validationComments}\n                          setValidationComments={setValidationComments}\n                          validationStatus={validationStatus}\n                          setValidationStatus={setValidationStatus}\n                        />\n                      )}\n                      <div className=\"pt3\">\n                        <ReopenEditor\n                          project={project}\n                          action={action}\n                          editor={activeEditor}\n                          callEditor={callEditor}\n                        />\n                        {disabled && showMapChangesModal && (\n                          <Popup\n                            modal\n                            open\n                            closeOnEscape={true}\n                            closeOnDocumentClick={true}\n                            onClose={() => setShowMapChangesModal(null)}\n                          >\n                            {(close) => (\n                              <UnsavedMapChangesModalContent\n                                close={close}\n                                action={showMapChangesModal}\n                              />\n                            )}\n                          </Popup>\n                        )}\n                        {(editor === 'ID' || editor === 'RAPID') && (\n                          <Popup\n                            modal\n                            trigger={(open) => (\n                              <div className=\"w-50 cf fl tc pt4\">\n                                <Button className=\"blue-dark bg-white dib\">\n                                  <FormattedMessage {...messages.tasksMap} />\n                                </Button>\n                              </div>\n                            )}\n                            closeOnEscape={true}\n                            closeOnDocumentClick={true}\n                            onOpen={() => {\n                              isPriorityAreaError &&\n                                toast.error(\n                                  <FormattedMessage {...messages.priorityAreasLoadingError} />,\n                                );\n                            }}\n                          >\n                            {(close) => (\n                              <div className=\"vh-75\">\n                                <TasksMap\n                                  mapResults={tasks}\n                                  className=\"dib w-100 fl h-100-ns vh-75\"\n                                  taskBordersOnly={false}\n                                  animateZoom={false}\n                                  selected={tasksIds}\n                                  showTaskIds={action === 'VALIDATION'}\n                                  priorityAreas={priorityArea}\n                                />\n                              </div>\n                            )}\n                          </Popup>\n                        )}\n                      </div>\n                    </>\n                  )}\n                  {activeSection === 'instructions' && (\n                    <>\n                      <ProjectInstructions\n                        instructions={project.projectInfo && project.projectInfo.instructions}\n                      />\n                      <ChangesetCommentTags tags={project.changesetComment} />\n                    </>\n                  )}\n                  {activeSection === 'history' && (\n                    <>\n                      {activeTasks.length === 1 && (\n                        <>\n                          <TaskHistory projectId={project.projectId} taskId={tasksIds[0]} />\n                        </>\n                      )}\n                      {action === 'VALIDATION' && activeTasks.length > 1 && (\n                        <MultipleTaskHistoriesAccordion\n                          tasks={activeTasks}\n                          projectId={project.projectId}\n                        />\n                      )}\n                    </>\n                  )}\n                  {activeSection === 'resources' && (\n                    <ResourcesTab project={project} tasksIds={tasksIds} tasksGeojson={tasks} />\n                  )}\n                </div>\n              </ReactPlaceholder>\n            </div>\n          ) : (\n            <div\n              className=\"w3 h-100 base-font fr cf tc mt3 ph1 pl2 pr1 pointer\"\n              onClick={() => setShowSidebar(true)}\n            >\n              <FormattedMessage {...messages.showSidebar}>\n                {(msg) => (\n                  <div className=\"db\" title={msg}>\n                    <SidebarIcon />\n                  </div>\n                )}\n              </FormattedMessage>\n              <div className=\"db\">\n                <h3 className=\"blue-dark f5\">#{project.projectId}</h3>\n                <div>\n                  {tasksIds.map((task, n) => (\n                    <span key={n} className=\"red fw8 f5 db pb2\">{`#${task}`}</span>\n                  ))}\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </Portal>\n      {isJosmError && (\n        <Popup\n          modal\n          open\n          closeOnEscape={true}\n          closeOnDocumentClick={true}\n          onClose={() => setIsJosmError(false)}\n        >\n          {(close) => <LockedTaskModalContent project={project} error=\"JOSM\" close={close} />}\n        </Popup>\n      )}\n      <SessionAboutToExpire\n        showSessionExpiringDialog={showSessionExpiringDialog}\n        setShowSessionExpiryDialog={setShowSessionExpiringDialog}\n        projectId={project.projectId}\n        tasksIds={tasksIds}\n        token={token}\n        getTasks={getTasks}\n        expiredTimeoutRef={expiredTimeoutRef}\n      />\n      <SessionExpired\n        showSessionExpiredDialog={showSessionExpiredDialog}\n        setShowSessionExpiredDialog={setSessionTimeExpiredDialog}\n        projectId={project.projectId}\n        tasksIds={tasksIds}\n        token={token}\n        action={action}\n        getTasks={getTasks}\n      />\n    </>\n  );\n}\n","import { useSelector } from 'react-redux';\nimport { useQuery } from '@tanstack/react-query';\n\nimport api from './apiClient';\n\nexport const useLockedTasksQuery = () => {\n  const token = useSelector((state) => state.auth.token);\n  const locale = useSelector((state) => state.preferences['locale']);\n\n  const fetchLockedTasks = ({ signal }) => {\n    return api(token, locale).get(`users/queries/tasks/locked/details/`, {\n      signal,\n    });\n  };\n\n  return useQuery({\n    queryKey: ['locked-tasks'],\n    queryFn: fetchLockedTasks,\n    select: (data) => data.data?.tasks,\n    cacheTime: 0,\n    useErrorBoundary: true,\n  });\n};\n","import { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { useQueryParam, StringParam } from 'use-query-params';\nimport { FormattedMessage } from 'react-intl';\nimport ReactPlaceholder from 'react-placeholder';\n\nimport messages from './messages';\nimport { Button } from '../components/button';\nimport { TaskMapAction } from '../components/taskSelection/action';\nimport { AnotherProjectLock } from '../components/taskSelection/lockedTasks';\nimport { useLockedTasksQuery } from '../api/user';\nimport { useProjectSummaryQuery, useTasksQuery } from '../api/projects';\n\nexport function MapTask() {\n  const { id } = useParams();\n  return <TaskAction projectId={id} action=\"MAPPING\" />;\n}\n\nexport function ValidateTask() {\n  const { id } = useParams();\n  return <TaskAction projectId={id} action=\"VALIDATION\" />;\n}\n\nexport function TaskAction({ projectId, action }: Object) {\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const token = useSelector((state) => state.auth.token);\n  // eslint-disable-next-line\n  const [editor, setEditor] = useQueryParam('editor', StringParam);\n\n  const { status: lockedTasksStatus, data: lockedTasks, refetch: getTasks } = useLockedTasksQuery();\n\n  useEffect(() => {\n    dispatch({ type: 'SET_VISIBILITY', isVisible: false });\n    return () => {\n      dispatch({ type: 'SET_VISIBILITY', isVisible: true });\n    };\n  }, [dispatch]);\n\n  useEffect(() => {\n    if (!token) {\n      navigate('/login', {\n        state: {\n          from: `/projects/${projectId}/${action === 'VALIDATION' ? 'validate' : 'map'}/`,\n        },\n      });\n    }\n  }, [action, navigate, projectId, token]);\n\n  if (lockedTasksStatus === 'loading') {\n    return (\n      <ReactPlaceholder showLoadingAnimation={true} type=\"text\" rows={4} delay={10}>\n        Loading...\n      </ReactPlaceholder>\n    );\n  }\n\n  if (lockedTasksStatus === 'success') {\n    // if user has not locked tasks on the system, suggest him to go to the task selection page of the current project\n    if (lockedTasks.length === 0) {\n      return (\n        <div className=\"cf pull-center pa4\">\n          <p>\n            <FormattedMessage\n              {...messages.noLockedTasksMessage}\n              values={{ currentProject: projectId }}\n            />\n          </p>\n          <Button\n            className=\"bg-red white\"\n            onClick={() => navigate(`/projects/${projectId}/tasks/`)}\n          >\n            <FormattedMessage {...messages.goToProjectButton} values={{ project: projectId }} />\n          </Button>\n        </div>\n      );\n    }\n\n    // if user has locked tasks on another project, suggest him to go update it\n    if (lockedTasks.length > 0 && lockedTasks[0].projectId !== Number(projectId)) {\n      const action = lockedTasks[0].taskStatus === 'LOCKED_FOR_VALIDATION' ? 'validate' : 'map';\n      return (\n        <div className=\"cf tc blue-dark pull-center pa4\">\n          <AnotherProjectLock\n            projectId={lockedTasks[0].projectId}\n            action={action}\n            lockedTasksLength={lockedTasks.length}\n          />\n        </div>\n      );\n    }\n\n    if (lockedTasks.length > 0 && lockedTasks[0].projectId === Number(projectId)) {\n      return (\n        <TaskActionPossible\n          projectId={projectId}\n          lockedTasks={lockedTasks}\n          action={action}\n          editor={editor}\n          getTasks={getTasks}\n        />\n      );\n    }\n  }\n  return null;\n}\n\nexport function TaskActionPossible({ projectId, lockedTasks, action, editor, getTasks }) {\n  const { data: project, status: projectStatus } = useProjectSummaryQuery(projectId, {\n    useErrorBoundary: true,\n  });\n  const { data: tasks, status: tasksStatus } = useTasksQuery(projectId, { useErrorBoundary: true });\n\n  return (\n    <div className=\"cf w-100\">\n      <ReactPlaceholder\n        showLoadingAnimation\n        type=\"media\"\n        rows={26}\n        delay={10}\n        ready={projectStatus === 'success' && tasksStatus === 'success'}\n      >\n        <TaskMapAction\n          project={project}\n          tasks={tasks}\n          activeTasks={lockedTasks}\n          getTasks={getTasks}\n          action={action}\n          editor={editor}\n        />\n      </ReactPlaceholder>\n    </div>\n  );\n}\n"],"sourceRoot":""}